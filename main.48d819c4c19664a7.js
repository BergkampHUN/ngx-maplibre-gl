(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{3619:(Sn,wt,V)=>{"use strict";V.d(wt,{a:()=>je});var D=V(7429),l=V(5e3);function W(qe,Oe){1&qe&&l.Hsn(0)}const f=["*"];let je=(()=>{class qe{constructor(Le,he,ze){this.componentFactoryResolver=Le,this.injector=he,this.appRef=ze}ngAfterViewInit(){this.portalOutlet=new D.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return qe.\u0275fac=function(Le){return new(Le||qe)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},qe.\u0275cmp=l.Xpm({type:qe,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Le,he){if(1&Le&&l.Gf(D.ig,5),2&Le){let ze;l.iGM(ze=l.CRH())&&(he.portal=ze.first)}},inputs:{position:"position"},ngContentSelectors:f,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Le,he){1&Le&&(l.F$t(),l.YNc(0,W,1,0,"ng-template",0))},directives:[D.bH],encapsulation:2}),qe})()},6449:(Sn,wt,V)=>{"use strict";V.d(wt,{$:()=>qe});var D=V(5e3),l=V(4594),W=V(7423),f=V(4521),je=V(3874);let qe=(()=>{class Oe{}return Oe.\u0275fac=function(he){return new(he||Oe)},Oe.\u0275cmp=D.Xpm({type:Oe,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(he,ze){1&he&&(D.TgZ(0,"mat-toolbar",0),D.TgZ(1,"div"),D._UZ(2,"div",1),D.TgZ(3,"a",2),D._UZ(4,"mat-icon",3),D._uU(5," ngx-maplibre-gl "),D.qZA(),D.TgZ(6,"a",4),D._uU(7," Demo "),D.qZA(),D.TgZ(8,"a",5),D._uU(9," Documentation "),D.qZA(),D.qZA(),D.TgZ(10,"div"),D._UZ(11,"div",6),D.TgZ(12,"a",7),D._UZ(13,"mat-icon",8),D._uU(14," GitHub "),D.qZA(),D.qZA(),D.qZA(),D._UZ(15,"router-outlet"))},directives:[l.Ye,W.zs,f.yS,je.Hw,f.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),Oe})()},6838:(Sn,wt,V)=>{"use strict";V.d(wt,{x:()=>He});var D=V(7429),l=V(9808),W=V(7423),f=V(3874),je=V(4594),qe=V(4521),he=(V(3619),V(6449),V(5e3));let He=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275mod=he.oAB({type:Be}),Be.\u0275inj=he.cJS({providers:[],imports:[[l.ez,qe.Bz,je.g0,f.Ps,W.ot,D.eL]]}),Be})()},9819:(Sn,wt,V)=>{"use strict";var D=V(2313),l=V(5e3),W=V(4521);let f=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-root"]],decls:1,vars:0,template:function(a,y){1&a&&l._UZ(0,"router-outlet")},directives:[W.lC],encapsulation:2}),d})();var je=V(3874),qe=V(6360),Oe=V(9808);let Le=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Oe.ez]]}),d})();var he=V(655),ze=V(1943),He=V(7579);class Be extends He.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(C){const{hasError:a,_hasValue:y,_value:Z,thrownError:pe,isStopped:Qe,_isComplete:Wt}=this;a?C.error(pe):(Qe||Wt)&&(y&&C.next(Z),C.complete())}next(C){this.isStopped||(this._value=C,this._hasValue=!0)}complete(){const{_hasValue:C,_value:a,_isComplete:y}=this;y||(this._isComplete=!0,C&&super.next(a),super.complete())}}var gt=V(727),Ye=V(590);let et=(()=>{class d{constructor(a){this.zone=a,this.mapCreated=new Be,this.mapLoaded=new Be,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new gt.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(a){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{this.createMap(a.mapOptions),this.hookEvents(a.mapEvents),this.mapEvents=a.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(a)})}updateMaxZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(a)})}updateMinPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(a)})}updateMaxPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(a)})}updateRenderWorldCopies(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(a)})}updateScrollZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(a)})}updateMaxBounds(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(a)})}changeCanvasCursor(a){this.mapInstance.getCanvasContainer().style.cursor=a}queryRenderedFeatures(a,y){return this.mapInstance.queryRenderedFeatures(a,y)}panTo(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(a,y)})}move(a,y,Z,pe,Qe,Wt){return this.zone.runOutsideAngular(()=>{this.mapInstance[a](Object.assign(Object.assign({},y),{zoom:null!=Z?Z:this.mapInstance.getZoom(),center:null!=pe?pe:this.mapInstance.getCenter(),bearing:null!=Qe?Qe:this.mapInstance.getBearing(),pitch:null!=Wt?Wt:this.mapInstance.getPitch()}))})}addLayer(a,y,Z){this.zone.runOutsideAngular(()=>{Object.keys(a.layerOptions).forEach(pe=>{void 0===a.layerOptions[pe]&&delete a.layerOptions[pe]}),this.mapInstance.addLayer(a.layerOptions,Z),y&&(a.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerClick.emit(pe)})}),a.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerDblClick.emit(pe)})}),a.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseDown.emit(pe)})}),a.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseUp.emit(pe)})}),a.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseEnter.emit(pe)})}),a.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseLeave.emit(pe)})}),a.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseMove.emit(pe)})}),a.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseOver.emit(pe)})}),a.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseOut.emit(pe)})}),a.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerContextMenu.emit(pe)})}),a.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchStart.emit(pe)})}),a.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchEnd.emit(pe)})}),a.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchCancel.emit(pe)})}))})}removeLayer(a){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(a)&&this.mapInstance.removeLayer(a)})}addMarker(a){const y={offset:a.markersOptions.offset,anchor:a.markersOptions.anchor,draggable:!!a.markersOptions.draggable,rotationAlignment:a.markersOptions.rotationAlignment,pitchAlignment:a.markersOptions.pitchAlignment,clickTolerance:a.markersOptions.clickTolerance};a.markersOptions.element.childNodes.length>0&&(y.element=a.markersOptions.element);const Z=new ze.Marker(y);return a.markersEvents.markerDragStart.observers.length&&Z.on("dragstart",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDragStart.emit(Wt)})}}),a.markersEvents.markerDrag.observers.length&&Z.on("drag",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDrag.emit(Wt)})}}),a.markersEvents.markerDragEnd.observers.length&&Z.on("dragend",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDragEnd.emit(Wt)})}}),Z.setLngLat(a.markersOptions.feature?a.markersOptions.feature.geometry.coordinates:a.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(Z.addTo(this.mapInstance),Z))}removeMarker(a){this.markersToRemove.push(a)}createPopup(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(a.popupOptions).forEach(pe=>void 0===a.popupOptions[pe]&&delete a.popupOptions[pe]);const Z=new ze.Popup(a.popupOptions);return Z.setDOMContent(y),a.popupEvents.popupClose.observers.length&&Z.on("close",()=>{this.zone.run(()=>{a.popupEvents.popupClose.emit()})}),a.popupEvents.popupOpen.observers.length&&Z.on("open",()=>{this.zone.run(()=>{a.popupEvents.popupOpen.emit()})}),Z})}addPopupToMap(a,y,Z=!1){return this.zone.runOutsideAngular(()=>{Z&&a._listeners&&delete a._listeners.open,a.setLngLat(y),a.addTo(this.mapInstance)})}addPopupToMarker(a,y){return this.zone.runOutsideAngular(()=>{a.setPopup(y)})}removePopupFromMap(a,y=!1){y&&a._listeners&&delete a._listeners.close,this.popupsToRemove.push(a)}removePopupFromMarker(a){return this.zone.runOutsideAngular(()=>{a.setPopup(void 0)})}addControl(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(a,y)})}removeControl(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(a)})}loadAndAddImage(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){return this.zone.runOutsideAngular(()=>new Promise((pe,Qe)=>{this.mapInstance.loadImage(y,(Wt,En)=>{Wt?Qe(Wt):(this.addImage(a,En,Z),pe())})}))})}addImage(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(a,y,Z)})}removeImage(a){this.imageIdsToRemove.push(a)}addSource(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>void 0===y[Z]&&delete y[Z]),this.mapInstance.addSource(a,y)})}getSource(a){return this.mapInstance.getSource(a)}removeSource(a){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(a).forEach(y=>this.mapInstance.removeLayer(y.id)),this.mapInstance.removeSource(a)})}setAllLayerPaintProperty(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>{this.mapInstance.setPaintProperty(a,Z,y[Z])})})}setAllLayerLayoutProperty(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>{this.mapInstance.setLayoutProperty(a,Z,y[Z])})})}setLayerFilter(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(a,y)})}setLayerBefore(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(a,y)})}setLayerZoomRange(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(a,y||0,Z||20)})}fitBounds(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(a,y)})}fitScreenCoordinates(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(a[0],a[1],y,Z)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(a){l.R0b.assertNotInAngularZone(),Object.keys(a).forEach(Z=>{void 0===a[Z]&&delete a[Z]}),this.mapInstance=new ze.Map(a),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(a.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const a of this.markersToRemove)a.remove();this.markersToRemove=[]}removePopups(){for(const a of this.popupsToRemove)a.remove();this.popupsToRemove=[]}removeImages(){for(const a of this.imageIdsToRemove)this.mapInstance.removeImage(a);this.imageIdsToRemove=[]}findLayersBySourceId(a){const y=this.mapInstance.getStyle().layers;return null==y?[]:y.filter(Z=>"source"in Z&&Z.source===a)}hookEvents(a){this.mapInstance.on("load",y=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{a.mapLoad.emit(y.target)})}),a.mapResize.observers.length&&this.mapInstance.on("resize",y=>this.zone.run(()=>{a.mapResize.emit(y)})),a.mapRemove.observers.length&&this.mapInstance.on("remove",y=>this.zone.run(()=>{a.mapRemove.emit(y)})),a.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",y=>this.zone.run(()=>{a.mapMouseDown.emit(y)})),a.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",y=>this.zone.run(()=>{a.mapMouseUp.emit(y)})),a.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",y=>this.zone.run(()=>{a.mapMouseMove.emit(y)})),a.mapClick.observers.length&&this.mapInstance.on("click",y=>this.zone.run(()=>{a.mapClick.emit(y)})),a.mapDblClick.observers.length&&this.mapInstance.on("dblclick",y=>this.zone.run(()=>{a.mapDblClick.emit(y)})),a.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",y=>this.zone.run(()=>{a.mapMouseOver.emit(y)})),a.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",y=>this.zone.run(()=>{a.mapMouseOut.emit(y)})),a.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",y=>this.zone.run(()=>{a.mapContextMenu.emit(y)})),a.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",y=>this.zone.run(()=>{a.mapTouchStart.emit(y)})),a.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",y=>this.zone.run(()=>{a.mapTouchEnd.emit(y)})),a.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",y=>this.zone.run(()=>{a.mapTouchMove.emit(y)})),a.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",y=>this.zone.run(()=>{a.mapTouchCancel.emit(y)})),a.mapWheel.observers.length&&this.mapInstance.on("wheel",y=>this.zone.run(()=>{a.mapWheel.emit(y)})),a.moveStart.observers.length&&this.mapInstance.on("movestart",y=>this.zone.run(()=>a.moveStart.emit(y))),a.move.observers.length&&this.mapInstance.on("move",y=>this.zone.run(()=>a.move.emit(y))),a.moveEnd.observers.length&&this.mapInstance.on("moveend",y=>this.zone.run(()=>a.moveEnd.emit(y))),a.mapDragStart.observers.length&&this.mapInstance.on("dragstart",y=>this.zone.run(()=>{a.mapDragStart.emit(y)})),a.mapDrag.observers.length&&this.mapInstance.on("drag",y=>this.zone.run(()=>{a.mapDrag.emit(y)})),a.mapDragEnd.observers.length&&this.mapInstance.on("dragend",y=>this.zone.run(()=>{a.mapDragEnd.emit(y)})),a.zoomStart.observers.length&&this.mapInstance.on("zoomstart",y=>this.zone.run(()=>a.zoomStart.emit(y))),a.zoomEvt.observers.length&&this.mapInstance.on("zoom",y=>this.zone.run(()=>a.zoomEvt.emit(y))),a.zoomEnd.observers.length&&this.mapInstance.on("zoomend",y=>this.zone.run(()=>a.zoomEnd.emit(y))),a.rotateStart.observers.length&&this.mapInstance.on("rotatestart",y=>this.zone.run(()=>a.rotateStart.emit(y))),a.rotate.observers.length&&this.mapInstance.on("rotate",y=>this.zone.run(()=>a.rotate.emit(y))),a.rotateEnd.observers.length&&this.mapInstance.on("rotateend",y=>this.zone.run(()=>a.rotateEnd.emit(y))),a.pitchStart.observers.length&&this.mapInstance.on("pitchstart",y=>this.zone.run(()=>a.pitchStart.emit(y))),a.pitchEvt.observers.length&&this.mapInstance.on("pitch",y=>this.zone.run(()=>a.pitchEvt.emit(y))),a.pitchEnd.observers.length&&this.mapInstance.on("pitchend",y=>this.zone.run(()=>a.pitchEnd.emit(y))),a.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",y=>this.zone.run(()=>a.boxZoomStart.emit(y))),a.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",y=>this.zone.run(()=>a.boxZoomEnd.emit(y))),a.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",y=>this.zone.run(()=>a.boxZoomCancel.emit(y))),a.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",y=>this.zone.run(()=>a.webGlContextLost.emit(y))),a.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",y=>this.zone.run(()=>a.webGlContextRestored.emit(y))),a.render.observers.length&&this.mapInstance.on("render",y=>this.zone.run(()=>a.render.emit(y))),a.mapError.observers.length&&this.mapInstance.on("error",y=>this.zone.run(()=>{a.mapError.emit(y)})),a.data.observers.length&&this.mapInstance.on("data",y=>this.zone.run(()=>a.data.emit(y))),a.styleData.observers.length&&this.mapInstance.on("styledata",y=>this.zone.run(()=>a.styleData.emit(y))),a.sourceData.observers.length&&this.mapInstance.on("sourcedata",y=>this.zone.run(()=>a.sourceData.emit(y))),a.dataLoading.observers.length&&this.mapInstance.on("dataloading",y=>this.zone.run(()=>a.dataLoading.emit(y))),a.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",y=>this.zone.run(()=>a.styleDataLoading.emit(y))),a.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",y=>this.zone.run(()=>a.sourceDataLoading.emit(y))),a.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",y=>this.zone.run(()=>a.styleImageMissing.emit(y))),a.idle.observers.length&&this.mapInstance.on("idle",y=>this.zone.run(()=>a.idle.emit(y)))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac}),d})();const bt=["content"],We=["*"];class Ut{constructor(C){this.container=C}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let jt=(()=>{class d{constructor(a){this.mapService=a,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Ut(this.content.nativeElement),this.mapService.mapCreated$.subscribe(()=>{this.mapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.mapService.removeControl(this.control)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-control"]],viewQuery:function(a,y){if(1&a&&l.Gf(bt,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{position:"position"},ngContentSelectors:We,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),d})();var un=V(4968),Dt=V(9300),ke=V(8505),ot=V(3900),nn=V(2722),zt=V(5698),tn=V(8372);let st=(()=>{class d{constructor(a,y){this.mapService=a,this.zone=y,this.type="geojson",this.updateFeatureData=new He.x,this.sub=new gt.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const a=this.mapService.mapLoaded$.subscribe(()=>{this.init();const y=(0,un.R)(this.mapService.mapInstance,"styledata").pipe((0,Dt.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(y)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded&&((a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.buffer&&!a.buffer.isFirstChange()||a.tolerance&&!a.tolerance.isFirstChange()||a.cluster&&!a.cluster.isFirstChange()||a.clusterRadius&&!a.clusterRadius.isFirstChange()||a.clusterMaxZoom&&!a.clusterMaxZoom.isFirstChange()||a.clusterMinPoints&&!a.clusterMinPoints.isFirstChange()||a.clusterProperties&&!a.clusterProperties.isFirstChange()||a.lineMetrics&&!a.lineMetrics.isFirstChange()||a.generateId&&!a.generateId.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange()||a.filter&&!a.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),a.data&&!a.data.isFirstChange())){const y=this.mapService.getSource(this.id);if(void 0===y)return;y.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(a){return(0,he.mG)(this,void 0,void 0,function*(){const y=this.mapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Z,pe)=>{y.getClusterExpansionZoom(a,(Qe,Wt)=>{Qe?pe(Qe):Z(Wt)})})}))})}getClusterChildren(a){return(0,he.mG)(this,void 0,void 0,function*(){const y=this.mapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Z,pe)=>{y.getClusterChildren(a,(Qe,Wt)=>{Qe?pe(Qe):Z(Wt)})})}))})}getClusterLeaves(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){const pe=this.mapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Qe,Wt)=>{pe.getClusterLeaves(a,y,Z,(En,ti)=>{En?Wt(En):Qe(ti)})})}))})}_addFeature(a){this.data.features.push(a),this.updateFeatureData.next(void 0)}_removeFeature(a){const y=this.data,Z=y.features.indexOf(a);Z>-1&&y.features.splice(Z,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.mapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const y=this.updateFeatureData.pipe((0,tn.b)(0)).subscribe(()=>{const Z=this.mapService.getSource(this.id);void 0!==Z&&Z.setData(this.data)});this.sub.add(y),this.sourceAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),yt=(()=>{class d{constructor(a){this.geoJSONSourceComponent=a,this.type="Feature"}ngOnInit(){this.id||(this.id=this.geoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.geoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.geoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(a){this.feature.geometry.coordinates=a,this.geoJSONSourceComponent.updateFeatureData.next(void 0)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36((0,l.Gpc)(()=>st)))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),ct=(()=>{class d{constructor(a,y,Z){this.mapService=a,this.ngZone=y,this.featureComponent=Z,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new gt.w0}ngOnInit(){let a,y,Z;if(!this.featureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(a=this.layer.layerMouseEnter,y=this.layer.layerMouseLeave,Z=this.featureComponent.updateCoordinates.bind(this.featureComponent),"Point"!==this.featureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(a,y,Z)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(a,y,Z){let pe=!1,Qe=!1;this.mapService.mapCreated$.subscribe(()=>{const Wt=(0,un.R)(this.mapService.mapInstance,"mouseup"),En=a.pipe((0,Dt.h)(()=>!pe),(0,Dt.h)(li=>this.filterFeature(li)),(0,ke.b)(()=>{Qe=!0,this.mapService.changeCanvasCursor("move"),this.mapService.updateDragPan(!1)}),(0,ot.w)(()=>(0,un.R)(this.mapService.mapInstance,"mousedown").pipe((0,nn.R)(y)))),ti=En.pipe((0,ot.w)(()=>(0,un.R)(this.mapService.mapInstance,"mousemove").pipe((0,nn.R)(Wt)))),gi=En.pipe((0,ot.w)(()=>Wt.pipe((0,zt.q)(1))));this.sub.add(En.subscribe(li=>{pe=!0,this.featureDragStart.observers.length&&this.ngZone.run(()=>{this.featureDragStart.emit(li)})})),this.sub.add(ti.subscribe(li=>{Z([li.lngLat.lng,li.lngLat.lat]),this.featureDrag.observers.length&&this.ngZone.run(()=>{this.featureDrag.emit(li)})})),this.sub.add(gi.subscribe(li=>{pe=!1,this.featureDragEnd.observers.length&&this.ngZone.run(()=>{this.featureDragEnd.emit(li)}),Qe||(this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0))})),this.sub.add(y.pipe((0,ke.b)(()=>Qe=!1),(0,Dt.h)(()=>!pe)).subscribe(()=>{this.mapService.changeCanvasCursor(""),this.mapService.updateDragPan(!0)}))})}filterFeature(a){return!(this.featureComponent&&this.layer&&!this.mapService.queryRenderedFeatures(a.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.featureComponent.id]]})[0])}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(l.R0b),l.Y36(yt,9))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),d})();var Tt=V(4004);function Xt(d){return(0,Tt.U)(()=>d)}var Ct=V(8675);let vn=(()=>{class d{constructor(a){this.mapService=a,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,ot.w)(()=>(0,un.R)(this.mapService.mapInstance,"styledata").pipe(Xt(!1),(0,Dt.h)(()=>!this.mapService.mapInstance.getLayer(this.id)),(0,Ct.O)(!0)))).subscribe(a=>this.init(a))}ngOnChanges(a){!this.layerAdded||(a.paint&&!a.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id,a.paint.currentValue),a.layout&&!a.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id,a.layout.currentValue),a.filter&&!a.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id,a.filter.currentValue),a.before&&!a.before.isFirstChange()&&this.mapService.setLayerBefore(this.id,a.before.currentValue),(a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.mapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(a){this.mapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}},a,this.before),this.layerAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2}),d})(),fi=(()=>{class d{constructor(a,y){this.mapService=a,this.zone=y,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.mapService.mapLoaded$.pipe((0,ot.w)(()=>(0,un.R)(this.mapService.mapInstance,"styledata").pipe((0,Ct.O)(void 0),(0,Dt.h)(()=>!this.isAdding&&!this.mapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(a){(a.data&&!a.data.isFirstChange()||a.options&&!a.options.isFirstChange()||a.url&&!a.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.mapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){return(0,he.mG)(this,void 0,void 0,function*(){if(this.isAdding=!0,this.data)this.mapService.addImage(this.id,this.data,this.options),this.isAdded=!0,this.isAdding=!1;else if(this.url)try{yield this.mapService.loadAndAddImage(this.id,this.url,this.options),this.isAdded=!0,this.isAdding=!1,this.zone.run(()=>{this.imageLoaded.emit()})}catch(a){this.zone.run(()=>{this.imageError.emit(a)})}})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2}),d})(),zi=(()=>{class d{constructor(a){this.mapService=a,this.type="vector",this.sourceAdded=!1,this.sub=new gt.w0}ngOnInit(){const a=this.mapService.mapLoaded$.subscribe(()=>{this.init();const y=(0,un.R)(this.mapService.mapInstance,"styledata").pipe((0,Dt.h)(()=>!this.mapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(y)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded)if(a.bounds&&!a.bounds.isFirstChange()||a.scheme&&!a.scheme.isFirstChange()||a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(a.url&&!a.url.isFirstChange()||a.tiles&&!a.tiles.isFirstChange()){const y=this.mapService.getSource(this.id);if(void 0===y)return;a.url&&this.url&&y.setUrl(this.url),a.tiles&&this.tiles&&y.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.mapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.mapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),Ii=(()=>{class d{constructor(a){this.mapService=a,this.type="image"}ngOnInit(){this.sub=this.mapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(a){if(void 0===this.sourceId)return;const y=this.mapService.getSource(this.sourceId);void 0!==y&&y.updateImage({url:void 0===a.url?void 0:this.url,coordinates:void 0===a.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.mapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.mapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})();const _i=["content"],kn=["*"];let ii=(()=>{class d{constructor(a){this.mapService=a,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(a){a.lngLat&&!a.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),a.feature&&!a.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),a.draggable&&!a.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),a.popupShown&&!a.popupShown.isFirstChange()&&(a.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.mapService.mapInstance):this.markerInstance.getPopup().remove()),a.pitchAlignment&&!a.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(a.pitchAlignment.currentValue),a.rotationAlignment&&!a.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(a.rotationAlignment.currentValue)}ngAfterViewInit(){this.mapService.mapCreated$.subscribe(()=>{this.markerInstance=this.mapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.mapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(a){this.markerInstance.setLngLat(a)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-marker"]],viewQuery:function(a,y){if(1&a&&l.Gf(_i,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:kn,decls:3,vars:2,consts:[["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&a&&l.Tol(y.className)},encapsulation:2,changeDetection:0}),d})();const ft=["content"],Ft=["*"];let on=(()=>{class d{constructor(a){this.mapService=a,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(a){if(a.lngLat&&!a.lngLat.isFirstChange()||a.feature&&!a.feature.isFirstChange()){const y=a.lngLat?this.lngLat:this.feature.geometry.coordinates;this.mapService.removePopupFromMap(this.popupInstance,!0);const Z=this.createPopup();this.mapService.addPopupToMap(Z,y,this.popupInstance.isOpen()),this.popupInstance=Z}if(a.marker&&!a.marker.isFirstChange()){const y=a.marker.previousValue;y.markerInstance&&this.mapService.removePopupFromMarker(y.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.mapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}a.offset&&!a.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.mapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.mapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(a){this.mapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.mapService.addPopupToMap(a,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.mapService.addPopupToMarker(this.marker.markerInstance,a)}})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-popup"]],viewQuery:function(a,y){if(1&a&&l.Gf(ft,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:Ft,decls:3,vars:0,consts:[["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),d})(),gn=(()=>{class d{constructor(a,y){this.mapService=a,this.controlComponent=y}onFullscreen(){this.mapService.mapInstance.resize()}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");this.controlComponent.control=new ze.FullscreenControl({container:this.container}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(jt,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglFullscreen",""]],hostBindings:function(a,y){1&a&&l.NdJ("webkitfullscreenchange",function(pe){return y.onFullscreen(pe.target)},!1,l.Jf7)},inputs:{container:"container"}}),d})(),zn=(()=>{class d{constructor(a,y){this.mapService=a,this.controlComponent=y,this.geolocate=new l.vpe}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(a).forEach(y=>{void 0===a[y]&&delete a[y]}),this.controlComponent.control=new ze.GeolocateControl(a),this.controlComponent.control.on("geolocate",y=>{this.geolocate.emit(y)}),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(jt,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),d})(),Jn=(()=>{class d{constructor(a,y){this.mapService=a,this.controlComponent=y}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.showCompass&&(a.showCompass=this.showCompass),void 0!==this.showZoom&&(a.showZoom=this.showZoom),this.controlComponent.control=new ze.NavigationControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(jt,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),d})(),Pi=(()=>{class d{constructor(a,y){this.mapService=a,this.controlComponent=y}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.compact&&(a.compact=this.compact),void 0!==this.customAttribution&&(a.customAttribution=this.customAttribution),this.controlComponent.control=new ze.AttributionControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(jt,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),d})(),er=(()=>{class d{constructor(a,y){this.mapService=a,this.controlComponent=y}ngOnChanges(a){a.unit&&!a.unit.isFirstChange()&&this.controlComponent.control.setUnit(a.unit.currentValue)}ngAfterContentInit(){this.mapService.mapCreated$.subscribe(()=>{if(this.controlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.maxWidth&&(a.maxWidth=this.maxWidth),void 0!==this.unit&&(a.unit=this.unit),this.controlComponent.control=new ze.ScaleControl(a),this.mapService.addControl(this.controlComponent.control,this.controlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(jt,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),d})();var sr=V(6451);function Kn(d,C){1&d&&l.GkF(0)}const ri=function(d){return{$implicit:d}};function Zn(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,Kn,1,0,"ng-container",4),l.qZA(),l.BQk()),2&d){const a=l.oxw().$implicit,y=l.oxw();l.xp6(1),l.Q6J("feature",a),l.xp6(1),l.Q6J("ngTemplateOutlet",y.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,ri,a))}}function ht(d,C){1&d&&l.GkF(0)}function $(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,ht,1,0,"ng-container",4),l.qZA(),l.BQk()),2&d){const a=l.oxw().$implicit,y=l.oxw();l.xp6(1),l.Q6J("feature",a),l.xp6(1),l.Q6J("ngTemplateOutlet",y.pointTpl)("ngTemplateOutletContext",l.VKq(3,ri,a))}}function U(d,C){if(1&d&&(l.ynx(0),l.YNc(1,Zn,3,5,"ng-container",2),l.YNc(2,$,3,5,"ng-container",2),l.BQk()),2&d){const a=C.$implicit;l.xp6(1),l.Q6J("ngIf",a.properties.cluster),l.xp6(1),l.Q6J("ngIf",!a.properties.cluster)}}const R=function(){return{"circle-radius":0}};let B=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["ng-template","mglPoint",""]]}),d})(),ie=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["ng-template","mglClusterPoint",""]]}),d})(),fe=0,tt=(()=>{class d{constructor(a,y,Z){this.mapService=a,this.changeDetectorRef=y,this.ngZone=Z,this.layerId="mgl-markers-for-clusters-"+fe++,this.sub=new gt.w0}ngAfterContentInit(){const y=this.mapService.mapCreated$.pipe((0,ot.w)(()=>(0,un.R)(this.mapService.mapInstance,"data").pipe((0,Dt.h)(Z=>Z.sourceId===this.source&&"metadata"!==Z.sourceDataType&&this.mapService.mapInstance.isSourceLoaded(this.source)))),(0,ot.w)(()=>(0,sr.T)((0,un.R)(this.mapService.mapInstance,"move"),(0,un.R)(this.mapService.mapInstance,"moveend")).pipe((0,Ct.O)(void 0)))).subscribe(()=>{this.ngZone.run(()=>{this.updateCluster()})});this.sub.add(y)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(a,y){return y.id}updateCluster(){const a={layers:[this.layerId]};this.pointTpl||(a.filter=["==","cluster",!0]),this.clusterPoints=this.mapService.mapInstance.queryRenderedFeatures(a),this.changeDetectorRef.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et),l.Y36(l.sBO),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,B,5,l.Rgc),l.Suo(Z,ie,5,l.Rgc)),2&a){let pe;l.iGM(pe=l.CRH())&&(y.pointTpl=pe.first),l.iGM(pe=l.CRH())&&(y.clusterPointTpl=pe.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,y){1&a&&(l._UZ(0,"mgl-layer",0),l.YNc(1,U,3,2,"ng-container",1)),2&a&&(l.Q6J("id",y.layerId)("source",y.source)("paint",l.DdM(5,R)),l.xp6(1),l.Q6J("ngForOf",y.clusterPoints)("ngForTrackBy",y.trackByClusterPoint))},directives:[vn,Oe.sg,Oe.O5,ii,Oe.tP],encapsulation:2,changeDetection:0}),d})();const It=["container"];let _t=(()=>{class d{constructor(a){this.mapService=a,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}get mapInstance(){return this.mapService.mapInstance}ngAfterViewInit(){this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.mapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(a){return(0,he.mG)(this,void 0,void 0,function*(){yield this.mapService.mapCreated$.toPromise(),a.cursorStyle&&!a.cursorStyle.isFirstChange()&&this.mapService.changeCanvasCursor(a.cursorStyle.currentValue),a.minZoom&&!a.minZoom.isFirstChange()&&this.mapService.updateMinZoom(a.minZoom.currentValue),a.maxZoom&&!a.maxZoom.isFirstChange()&&this.mapService.updateMaxZoom(a.maxZoom.currentValue),a.minPitch&&!a.minPitch.isFirstChange()&&this.mapService.updateMinPitch(a.minPitch.currentValue),a.maxPitch&&!a.maxPitch.isFirstChange()&&this.mapService.updateMaxPitch(a.maxPitch.currentValue),a.renderWorldCopies&&!a.renderWorldCopies.isFirstChange()&&this.mapService.updateRenderWorldCopies(a.renderWorldCopies.currentValue),a.scrollZoom&&!a.scrollZoom.isFirstChange()&&this.mapService.updateScrollZoom(a.scrollZoom.currentValue),a.dragRotate&&!a.dragRotate.isFirstChange()&&this.mapService.updateDragRotate(a.dragRotate.currentValue),a.touchPitch&&!a.touchPitch.isFirstChange()&&this.mapService.updateTouchPitch(a.touchPitch.currentValue),a.touchZoomRotate&&!a.touchZoomRotate.isFirstChange()&&this.mapService.updateTouchZoomRotate(a.touchZoomRotate.currentValue),a.doubleClickZoom&&!a.doubleClickZoom.isFirstChange()&&this.mapService.updateDoubleClickZoom(a.doubleClickZoom.currentValue),a.keyboard&&!a.keyboard.isFirstChange()&&this.mapService.updateKeyboard(a.keyboard.currentValue),a.dragPan&&!a.dragPan.isFirstChange()&&this.mapService.updateDragPan(a.dragPan.currentValue),a.boxZoom&&!a.boxZoom.isFirstChange()&&this.mapService.updateBoxZoom(a.boxZoom.currentValue),a.style&&!a.style.isFirstChange()&&this.mapService.updateStyle(a.style.currentValue),a.maxBounds&&!a.maxBounds.isFirstChange()&&this.mapService.updateMaxBounds(a.maxBounds.currentValue),a.fitBounds&&a.fitBounds.currentValue&&!a.fitBounds.isFirstChange()&&this.mapService.fitBounds(a.fitBounds.currentValue,this.fitBoundsOptions),a.fitScreenCoordinates&&a.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&a.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.mapService.fitScreenCoordinates(a.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!a.center||a.center.isFirstChange()||a.zoom||a.bearing||a.pitch?(a.center&&!a.center.isFirstChange()||a.zoom&&!a.zoom.isFirstChange()||a.bearing&&!a.bearing.isFirstChange()&&!a.fitScreenCoordinates||a.pitch&&!a.pitch.isFirstChange())&&this.mapService.move(this.movingMethod,this.movingOptions,a.zoom&&this.zoom?this.zoom[0]:void 0,a.center?this.center:void 0,a.bearing&&this.bearing?this.bearing[0]:void 0,a.pitch&&this.pitch?this.pitch[0]:void 0):this.mapService.panTo(this.center,this.panToOptions)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-map"]],viewQuery:function(a,y){if(1&a&&l.Gf(It,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.mapContainer=Z.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([et]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(a,y){1&a&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),d})();var mn=V(6838);const Vn="object"==typeof global&&global&&global.Object===Object&&global;var yi="object"==typeof self&&self&&self.Object===Object&&self;const pn=Vn||yi||Function("return this")(),Ai=pn.Symbol;var Qn=Object.prototype,Ln=Qn.hasOwnProperty,Bt=Qn.toString,pt=Ai?Ai.toStringTag:void 0;var lt=Object.prototype.toString;var tr=Ai?Ai.toStringTag:void 0;const it=function St(d){return null==d?void 0===d?"[object Undefined]":"[object Null]":tr&&tr in Object(d)?function Ce(d){var C=Ln.call(d,pt),a=d[pt];try{d[pt]=void 0;var y=!0}catch(pe){}var Z=Bt.call(d);return y&&(C?d[pt]=a:delete d[pt]),Z}(d):function Pt(d){return lt.call(d)}(d)},F=function J(d){var C=typeof d;return null!=d&&("object"==C||"function"==C)},$e=function Ke(d){if(!F(d))return!1;var C=it(d);return"[object Function]"==C||"[object GeneratorFunction]"==C||"[object AsyncFunction]"==C||"[object Proxy]"==C};var d,nt=pn["__core-js_shared__"],Nt=(d=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"";var an=Function.prototype.toString;const Un=function Cn(d){if(null!=d){try{return an.call(d)}catch(C){}try{return d+""}catch(C){}}return""};var ui=/^\[object .+?Constructor\]$/,si=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ji=function wr(d){return!(!F(d)||function rn(d){return!!Nt&&Nt in d}(d))&&($e(d)?si:ui).test(Un(d))},co=function Ri(d,C){var a=function Bo(d,C){return null==d?void 0:d[C]}(d,C);return Ji(a)?a:void 0};var Vo=function(){try{var d=co(Object,"defineProperty");return d({},"",{}),d}catch(C){}}();const _r=Vo,to=function Zi(d,C,a){"__proto__"==C&&_r?_r(d,C,{configurable:!0,enumerable:!0,value:a,writable:!0}):d[C]=a},Pr=function qo(d,C,a,y){for(var Z=-1,pe=null==d?0:d.length;++Z<pe;){var Qe=d[Z];C(y,Qe,a(Qe),d)}return y};var qs=function Yr(d){return function(C,a,y){for(var Z=-1,pe=Object(C),Qe=y(C),Wt=Qe.length;Wt--;){var En=Qe[d?Wt:++Z];if(!1===a(pe[En],En,pe))break}return C}}();const no=qs,xo=function is(d){return null!=d&&"object"==typeof d},Uo=function Gr(d){return xo(d)&&"[object Arguments]"==it(d)};var Ds=Object.prototype,Fr=Ds.hasOwnProperty,rs=Ds.propertyIsEnumerable,Ns=Uo(function(){return arguments}())?Uo:function(d){return xo(d)&&Fr.call(d,"callee")&&!rs.call(d,"callee")};const Ms=Ns,Jr=Array.isArray;var wa="object"==typeof exports&&exports&&!exports.nodeType&&exports,ha=wa&&"object"==typeof module&&module&&!module.nodeType&&module,os=ha&&ha.exports===wa?pn.Buffer:void 0;const Fi=(os?os.isBuffer:void 0)||function da(){return!1};var So=/^(?:0|[1-9]\d*)$/;const Yo=function fs(d,C){var a=typeof d;return!!(C=null==C?9007199254740991:C)&&("number"==a||"symbol"!=a&&So.test(d))&&d>-1&&d%1==0&&d<C},ms=function wo(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=9007199254740991};var wi={};wi["[object Float32Array]"]=wi["[object Float64Array]"]=wi["[object Int8Array]"]=wi["[object Int16Array]"]=wi["[object Int32Array]"]=wi["[object Uint8Array]"]=wi["[object Uint8ClampedArray]"]=wi["[object Uint16Array]"]=wi["[object Uint32Array]"]=!0,wi["[object Arguments]"]=wi["[object Array]"]=wi["[object ArrayBuffer]"]=wi["[object Boolean]"]=wi["[object DataView]"]=wi["[object Date]"]=wi["[object Error]"]=wi["[object Function]"]=wi["[object Map]"]=wi["[object Number]"]=wi["[object Object]"]=wi["[object RegExp]"]=wi["[object Set]"]=wi["[object String]"]=wi["[object WeakMap]"]=!1;const X=function ji(d){return function(C){return d(C)}};var q="object"==typeof exports&&exports&&!exports.nodeType&&exports,N=q&&"object"==typeof module&&module&&!module.nodeType&&module,Lt=N&&N.exports===q&&Vn.process;const hr=function(){try{return N&&N.require&&N.require("util").types||Lt&&Lt.binding&&Lt.binding("util")}catch(C){}}();var $r=hr&&hr.isTypedArray;const To=$r?X($r):function lr(d){return xo(d)&&ms(d.length)&&!!wi[it(d)]};var ue=Object.prototype.hasOwnProperty;const S=function M(d,C){var a=Jr(d),y=!a&&Ms(d),Z=!a&&!y&&Fi(d),pe=!a&&!y&&!Z&&To(d),Qe=a||y||Z||pe,Wt=Qe?function Ar(d,C){for(var a=-1,y=Array(d);++a<d;)y[a]=C(a);return y}(d.length,String):[],En=Wt.length;for(var ti in d)(C||ue.call(d,ti))&&(!Qe||!("length"==ti||Z&&("offset"==ti||"parent"==ti)||pe&&("buffer"==ti||"byteLength"==ti||"byteOffset"==ti)||Yo(ti,En)))&&Wt.push(ti);return Wt};var H=Object.prototype;const Te=function de(d){var C=d&&d.constructor;return d===("function"==typeof C&&C.prototype||H)},rt=function Ue(d,C){return function(a){return d(C(a))}},sn=rt(Object.keys,Object);var oi=Object.prototype.hasOwnProperty;const Ci=function mi(d){return null!=d&&ms(d.length)&&!$e(d)},fr=function Hi(d){return Ci(d)?S(d):function vi(d){if(!Te(d))return sn(d);var C=[];for(var a in Object(d))oi.call(d,a)&&"constructor"!=a&&C.push(a);return C}(d)};var _o=function Zr(d,C){return function(a,y){if(null==a)return a;if(!Ci(a))return d(a,y);for(var Z=a.length,pe=C?Z:-1,Qe=Object(a);(C?pe--:++pe<Z)&&!1!==y(Qe[pe],pe,Qe););return a}}(function Lr(d,C){return d&&no(d,C,fr)});const yo=_o,Ps=function Ao(d,C,a,y){return yo(d,function(Z,pe,Qe){C(y,Z,a(Z),Qe)}),y},ys=function Jo(d,C){return d===C||d!=d&&C!=C},Os=function fa(d,C){for(var a=d.length;a--;)if(ys(d[a][0],C))return a;return-1};var ai=Array.prototype.splice;function ma(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}ma.prototype.clear=function _s(){this.__data__=[],this.size=0},ma.prototype.delete=function Oi(d){var C=this.__data__,a=Os(C,d);return!(a<0||(a==C.length-1?C.pop():ai.call(C,a,1),--this.size,0))},ma.prototype.get=function Sr(d){var C=this.__data__,a=Os(C,d);return a<0?void 0:C[a][1]},ma.prototype.has=function Wr(d){return Os(this.__data__,d)>-1},ma.prototype.set=function Tr(d,C){var a=this.__data__,y=Os(a,d);return y<0?(++this.size,a.push([d,C])):a[y][1]=C,this};const Dr=ma,La=co(pn,"Map"),cs=co(Object,"create");var hl=Object.prototype.hasOwnProperty;var Sa=Object.prototype.hasOwnProperty;function _a(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}_a.prototype.clear=function Wl(){this.__data__=cs?cs(null):{},this.size=0},_a.prototype.delete=function gu(d){var C=this.has(d)&&delete this.__data__[d];return this.size-=C?1:0,C},_a.prototype.get=function Co(d){var C=this.__data__;if(cs){var a=C[d];return"__lodash_hash_undefined__"===a?void 0:a}return hl.call(C,d)?C[d]:void 0},_a.prototype.has=function Ta(d){var C=this.__data__;return cs?void 0!==C[d]:Sa.call(C,d)},_a.prototype.set=function Ho(d,C){var a=this.__data__;return this.size+=this.has(d)?0:1,a[d]=cs&&void 0===C?"__lodash_hash_undefined__":C,this};const z=_a,Ve=function be(d,C){var a=d.__data__;return function Q(d){var C=typeof d;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==d:null===d}(C)?a["string"==typeof C?"string":"hash"]:a.map};function Po(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}Po.prototype.clear=function P(){this.size=0,this.__data__={hash:new z,map:new(La||Dr),string:new z}},Po.prototype.delete=function Fe(d){var C=Ve(this,d).delete(d);return this.size-=C?1:0,C},Po.prototype.get=function ei(d){return Ve(this,d).get(d)},Po.prototype.has=function Ei(d){return Ve(this,d).has(d)},Po.prototype.set=function pr(d,C){var a=Ve(this,d),y=a.size;return a.set(d,C),this.size+=a.size==y?0:1,this};const po=Po;function ro(d){var C=this.__data__=new Dr(d);this.size=C.size}ro.prototype.clear=function vo(){this.__data__=new Dr,this.size=0},ro.prototype.delete=function bo(d){var C=this.__data__,a=C.delete(d);return this.size=C.size,a},ro.prototype.get=function Ea(d){return this.__data__.get(d)},ro.prototype.has=function In(d){return this.__data__.has(d)},ro.prototype.set=function qr(d,C){var a=this.__data__;if(a instanceof Dr){var y=a.__data__;if(!La||y.length<199)return y.push([d,C]),this.size=++a.size,this;a=this.__data__=new po(y)}return a.set(d,C),this.size=a.size,this};const Xs=ro;function E(d){var C=-1,a=null==d?0:d.length;for(this.__data__=new po;++C<a;)this.add(d[C])}E.prototype.add=E.prototype.push=function i(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},E.prototype.has=function m(d){return this.__data__.has(d)};const O=E,Y=function j(d,C){for(var a=-1,y=null==d?0:d.length;++a<y;)if(C(d[a],a,d))return!0;return!1},le=function re(d,C){return d.has(C)},Pe=function Ze(d,C,a,y,Z,pe){var Qe=1&a,Wt=d.length,En=C.length;if(Wt!=En&&!(Qe&&En>Wt))return!1;var ti=pe.get(d),gi=pe.get(C);if(ti&&gi)return ti==C&&gi==d;var li=-1,Qi=!0,Qr=2&a?new O:void 0;for(pe.set(d,C),pe.set(C,d);++li<Wt;){var mo=d[li],ao=C[li];if(y)var lo=Qe?y(ao,mo,li,C,d,pe):y(mo,ao,li,d,C,pe);if(void 0!==lo){if(lo)continue;Qi=!1;break}if(Qr){if(!Y(C,function(Wo,ua){if(!le(Qr,ua)&&(mo===Wo||Z(mo,Wo,a,y,pe)))return Qr.push(ua)})){Qi=!1;break}}else if(mo!==ao&&!Z(mo,ao,a,y,pe)){Qi=!1;break}}return pe.delete(d),pe.delete(C),Qi},mt=pn.Uint8Array,At=function vt(d){var C=-1,a=Array(d.size);return d.forEach(function(y,Z){a[++C]=[Z,y]}),a},$t=function xt(d){var C=-1,a=Array(d.size);return d.forEach(function(y){a[++C]=y}),a};var vr=Ai?Ai.prototype:void 0,Er=vr?vr.valueOf:void 0;const Qs=function Xo(d,C){for(var a=-1,y=C.length,Z=d.length;++a<y;)d[Z+a]=C[a];return d},bs=function Na(d,C,a){var y=C(d);return Jr(d)?y:Qs(y,a(d))},gr=function js(){return[]};var fo=Object.prototype.propertyIsEnumerable,Oo=Object.getOwnPropertySymbols,Xr=Oo?function(d){return null==d?[]:(d=Object(d),function Ia(d,C){for(var a=-1,y=null==d?0:d.length,Z=0,pe=[];++a<y;){var Qe=d[a];C(Qe,a,d)&&(pe[Z++]=Qe)}return pe}(Oo(d),function(C){return fo.call(d,C)}))}:gr;const Hs=Xr,Ba=function ea(d){return bs(d,fr,Hs)};var _u=Object.prototype.hasOwnProperty;const za=co(pn,"DataView"),ko=co(pn,"Promise"),Fc=co(pn,"Set"),Pa=co(pn,"WeakMap");var Qa="[object Map]",fl="[object Promise]",Jl="[object Set]",ta="[object WeakMap]",_d="[object DataView]",Xl=Un(za),Ro=Un(La),yu=Un(ko),vu=Un(Fc),el=Un(Pa),na=it;(za&&na(new za(new ArrayBuffer(1)))!=_d||La&&na(new La)!=Qa||ko&&na(ko.resolve())!=fl||Fc&&na(new Fc)!=Jl||Pa&&na(new Pa)!=ta)&&(na=function(d){var C=it(d),a="[object Object]"==C?d.constructor:void 0,y=a?Un(a):"";if(y)switch(y){case Xl:return _d;case Ro:return Qa;case yu:return fl;case vu:return Jl;case el:return ta}return C});const Pl=na;var Ol="[object Arguments]",pc="[object Array]",Lc="[object Object]",Nc=Object.prototype.hasOwnProperty;const Fh=function ef(d,C,a,y,Z,pe){var Qe=Jr(d),Wt=Jr(C),En=Qe?pc:Pl(d),ti=Wt?pc:Pl(C),gi=(En=En==Ol?Lc:En)==Lc,li=(ti=ti==Ol?Lc:ti)==Lc,Qi=En==ti;if(Qi&&Fi(d)){if(!Fi(C))return!1;Qe=!0,gi=!1}if(Qi&&!gi)return pe||(pe=new Xs),Qe||To(d)?Pe(d,C,a,y,Z,pe):function Ir(d,C,a,y,Z,pe,Qe){switch(a){case"[object DataView]":if(d.byteLength!=C.byteLength||d.byteOffset!=C.byteOffset)return!1;d=d.buffer,C=C.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=C.byteLength||!pe(new mt(d),new mt(C)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ys(+d,+C);case"[object Error]":return d.name==C.name&&d.message==C.message;case"[object RegExp]":case"[object String]":return d==C+"";case"[object Map]":var Wt=At;case"[object Set]":if(Wt||(Wt=$t),d.size!=C.size&&!(1&y))return!1;var ti=Qe.get(d);if(ti)return ti==C;y|=2,Qe.set(d,C);var gi=Pe(Wt(d),Wt(C),y,Z,pe,Qe);return Qe.delete(d),gi;case"[object Symbol]":if(Er)return Er.call(d)==Er.call(C)}return!1}(d,C,En,a,y,Z,pe);if(!(1&a)){var Qr=gi&&Nc.call(d,"__wrapped__"),mo=li&&Nc.call(C,"__wrapped__");if(Qr||mo){var ao=Qr?d.value():d,lo=mo?C.value():C;return pe||(pe=new Xs),Z(ao,lo,a,y,pe)}}return!!Qi&&(pe||(pe=new Xs),function Xa(d,C,a,y,Z,pe){var Qe=1&a,Wt=Ba(d),En=Wt.length;if(En!=Ba(C).length&&!Qe)return!1;for(var li=En;li--;){var Qi=Wt[li];if(!(Qe?Qi in C:_u.call(C,Qi)))return!1}var Qr=pe.get(d),mo=pe.get(C);if(Qr&&mo)return Qr==C&&mo==d;var ao=!0;pe.set(d,C),pe.set(C,d);for(var lo=Qe;++li<En;){var Wo=d[Qi=Wt[li]],ua=C[Qi];if(y)var Dl=Qe?y(ua,Wo,Qi,C,d,pe):y(Wo,ua,Qi,d,C,pe);if(!(void 0===Dl?Wo===ua||Z(Wo,ua,a,y,pe):Dl)){ao=!1;break}lo||(lo="constructor"==Qi)}if(ao&&!lo){var Ml=d.constructor,cc=C.constructor;Ml!=cc&&"constructor"in d&&"constructor"in C&&!("function"==typeof Ml&&Ml instanceof Ml&&"function"==typeof cc&&cc instanceof cc)&&(ao=!1)}return pe.delete(d),pe.delete(C),ao}(d,C,a,y,Z,pe))},bd=function vd(d,C,a,y,Z){return d===C||(null==d||null==C||!xo(d)&&!xo(C)?d!=d&&C!=C:Fh(d,C,a,y,vd,Z))},Lh=function xu(d){return d==d&&!F(d)},wu=function Bc(d,C){return function(a){return null!=a&&a[d]===C&&(void 0!==C||d in Object(a))}},Nh=function mc(d){var C=function Um(d){for(var C=fr(d),a=C.length;a--;){var y=C[a],Z=d[y];C[a]=[y,Z,Lh(Z)]}return C}(d);return 1==C.length&&C[0][2]?wu(C[0][0],C[0][1]):function(a){return a===d||function Ql(d,C,a,y){var Z=a.length,pe=Z,Qe=!y;if(null==d)return!pe;for(d=Object(d);Z--;){var Wt=a[Z];if(Qe&&Wt[2]?Wt[1]!==d[Wt[0]]:!(Wt[0]in d))return!1}for(;++Z<pe;){var En=(Wt=a[Z])[0],ti=d[En],gi=Wt[1];if(Qe&&Wt[2]){if(void 0===ti&&!(En in d))return!1}else{var li=new Xs;if(y)var Qi=y(ti,gi,En,d,C,li);if(!(void 0===Qi?bd(gi,ti,3,y,li):Qi))return!1}}return!0}(a,d,C)}},Cu=function Bh(d){return"symbol"==typeof d||xo(d)&&"[object Symbol]"==it(d)};var tf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xd=/^\w*$/;const ya=function zh(d,C){if(Jr(d))return!1;var a=typeof d;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=d&&!Cu(d))||xd.test(d)||!tf.test(d)||null!=C&&d in Object(C)};function Fs(d,C){if("function"!=typeof d||null!=C&&"function"!=typeof C)throw new TypeError("Expected a function");var a=function(){var y=arguments,Z=C?C.apply(this,y):y[0],pe=a.cache;if(pe.has(Z))return pe.get(Z);var Qe=d.apply(this,y);return a.cache=pe.set(Z,Qe)||pe,Qe};return a.cache=new(Fs.Cache||po),a}Fs.Cache=po;const Vh=Fs;var wd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zc=/\\(\\)?/g,Uh=function rf(d){var C=Vh(d,function(y){return 500===a.size&&a.clear(),y}),a=C.cache;return C}(function(d){var C=[];return 46===d.charCodeAt(0)&&C.push(""),d.replace(wd,function(a,y,Z,pe){C.push(Z?pe.replace(zc,"$1"):y||a)}),C});const kl=Uh;var jh=Ai?Ai.prototype:void 0,gc=jh?jh.toString:void 0;const il=function Cd(d){if("string"==typeof d)return d;if(Jr(d))return function Vc(d,C){for(var a=-1,y=null==d?0:d.length,Z=Array(y);++a<y;)Z[a]=C(d[a],a,d);return Z}(d,Cd)+"";if(Cu(d))return gc?gc.call(d):"";var C=d+"";return"0"==C&&1/d==-1/0?"-0":C},Rl=function Hh(d,C){return Jr(d)?d:ya(d,C)?[d]:kl(function Uc(d){return null==d?"":il(d)}(d))},_c=function Do(d){if("string"==typeof d||Cu(d))return d;var C=d+"";return"0"==C&&1/d==-1/0?"-0":C},ec=function Du(d,C){for(var a=0,y=(C=Rl(C,d)).length;null!=d&&a<y;)d=d[_c(C[a++])];return a&&a==y?d:void 0},Ed=function lf(d,C){return null!=d&&C in Object(d)},Gh=function Md(d,C){return null!=d&&function jc(d,C,a){for(var y=-1,Z=(C=Rl(C,d)).length,pe=!1;++y<Z;){var Qe=_c(C[y]);if(!(pe=null!=d&&a(d,Qe)))break;d=d[Qe]}return pe||++y!=Z?pe:!!(Z=null==d?0:d.length)&&ms(Z)&&Yo(Qe,Z)&&(Jr(d)||Ms(d))}(d,C,Ed)},Sd=function vc(d,C){return ya(d)&&Lh(C)?wu(_c(d),C):function(a){var y=function yc(d,C,a){var y=null==d?void 0:ec(d,C);return void 0===y?a:y}(a,d);return void 0===y&&y===C?Gh(a,d):bd(C,y,3)}},Fo=function Td(d){return d},uf=function cf(d){return ya(d)?function Su(d){return function(C){return null==C?void 0:C[d]}}(_c(d)):function Gc(d){return function(C){return ec(C,d)}}(d)};var Zc=Object.prototype.hasOwnProperty,Gs=function hf(d,C){return function(a,y){var Z=Jr(a)?Pr:Ps,pe=C?C():{};return Z(a,d,function df(d){return"function"==typeof d?d:null==d?Fo:"object"==typeof d?Jr(d)?Sd(d[0],d[1]):Nh(d):uf(d)}(y),pe)}}(function(d,C,a){Zc.call(d,a)?d[a].push(C):to(d,a,[C])});const Id=Gs;var Wc=Object.prototype.hasOwnProperty;const Wh=function kd(d,C,a){var y=d[C];(!Wc.call(d,C)||!ys(y,a)||void 0===a&&!(C in d))&&to(d,C,a)},_l=function Rd(d,C,a,y){var Z=!a;a||(a={});for(var pe=-1,Qe=C.length;++pe<Qe;){var Wt=C[pe],En=y?y(a[Wt],d[Wt],Wt,a,d):void 0;void 0===En&&(En=d[Wt]),Z?to(a,Wt,En):Wh(a,Wt,En)}return a};var Kh=Object.prototype.hasOwnProperty;const mf=function Ld(d){if(!F(d))return function ff(d){var C=[];if(null!=d)for(var a in Object(d))C.push(a);return C}(d);var C=Te(d),a=[];for(var y in d)"constructor"==y&&(C||!Kh.call(d,y))||a.push(y);return a},Yc=function gf(d){return Ci(d)?S(d,!0):mf(d)};var tc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tu=tc&&"object"==typeof module&&module&&!module.nodeType&&module,Nd=Tu&&Tu.exports===tc?pn.Buffer:void 0,Bd=Nd?Nd.allocUnsafe:void 0;const nc=rt(Object.getPrototypeOf,Object);var zd=Object.getOwnPropertySymbols?function(d){for(var C=[];d;)Qs(C,Hs(d)),d=nc(d);return C}:gr;const Ll=zd,Au=function ic(d){return bs(d,Yc,Ll)};var ja=Object.prototype.hasOwnProperty;const Iu=function tp(d){var C=new d.constructor(d.byteLength);return new mt(C).set(new mt(d)),C};var ip=/\w*$/;var jd=Ai?Ai.prototype:void 0,Ef=jd?jd.valueOf:void 0;const Tf=function ku(d,C,a){var y=d.constructor;switch(C){case"[object ArrayBuffer]":return Iu(d);case"[object Boolean]":case"[object Date]":return new y(+d);case"[object DataView]":return function Kc(d,C){var a=C?Iu(d.buffer):d.buffer;return new d.constructor(a,d.byteOffset,d.byteLength)}(d,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function rc(d,C){var a=C?Iu(d.buffer):d.buffer;return new d.constructor(a,d.byteOffset,d.length)}(d,a);case"[object Map]":case"[object Set]":return new y;case"[object Number]":case"[object String]":return new y(d);case"[object RegExp]":return function Vd(d){var C=new d.constructor(d.source,ip.exec(d));return C.lastIndex=d.lastIndex,C}(d);case"[object Symbol]":return function bc(d){return Ef?Object(Ef.call(d)):{}}(d)}};var Ru=Object.create,rl=function(){function d(){}return function(C){if(!F(C))return{};if(Ru)return Ru(C);d.prototype=C;var a=new d;return d.prototype=void 0,a}}();const qd=rl;var Fu=hr&&hr.isMap;const Lu=Fu?X(Fu):function Qc(d){return xo(d)&&"[object Map]"==Pl(d)};var Jd=hr&&hr.isSet;const tu=Jd?X(Jd):function up(d){return xo(d)&&"[object Set]"==Pl(d)};var Xd="[object Arguments]",ia="[object Function]",eh="[object Object]",Ur={};Ur[Xd]=Ur["[object Array]"]=Ur["[object ArrayBuffer]"]=Ur["[object DataView]"]=Ur["[object Boolean]"]=Ur["[object Date]"]=Ur["[object Float32Array]"]=Ur["[object Float64Array]"]=Ur["[object Int8Array]"]=Ur["[object Int16Array]"]=Ur["[object Int32Array]"]=Ur["[object Map]"]=Ur["[object Number]"]=Ur[eh]=Ur["[object RegExp]"]=Ur["[object Set]"]=Ur["[object String]"]=Ur["[object Symbol]"]=Ur["[object Uint8Array]"]=Ur["[object Uint8ClampedArray]"]=Ur["[object Uint16Array]"]=Ur["[object Uint32Array]"]=!0,Ur["[object Error]"]=Ur[ia]=Ur["[object WeakMap]"]=!1;const rh=function iu(d,C,a,y,Z,pe){var Qe,Wt=1&C,En=2&C,ti=4&C;if(a&&(Qe=Z?a(d,y,Z,pe):a(d)),void 0!==Qe)return Qe;if(!F(d))return d;var gi=Jr(d);if(gi){if(Qe=function Ha(d){var C=d.length,a=new d.constructor(C);return C&&"string"==typeof d[0]&&ja.call(d,"index")&&(a.index=d.index,a.input=d.input),a}(d),!Wt)return function bf(d,C){var a=-1,y=d.length;for(C||(C=Array(y));++a<y;)C[a]=d[a];return C}(d,Qe)}else{var li=Pl(d),Qi=li==ia||"[object GeneratorFunction]"==li;if(Fi(d))return function Jh(d,C){if(C)return d.slice();var a=d.length,y=Bd?Bd(a):new d.constructor(a);return d.copy(y),y}(d,Wt);if(li==eh||li==Xd||Qi&&!Z){if(Qe=En||Qi?{}:function ol(d){return"function"!=typeof d.constructor||Te(d)?{}:qd(nc(d))}(d),!Wt)return En?function Ua(d,C){return _l(d,Ll(d),C)}(d,function _f(d,C){return d&&_l(C,Yc(C),d)}(Qe,d)):function Qh(d,C){return _l(d,Hs(d),C)}(d,function Fd(d,C){return d&&_l(C,fr(C),d)}(Qe,d))}else{if(!Ur[li])return Z?d:{};Qe=Tf(d,li,Wt)}}pe||(pe=new Xs);var Qr=pe.get(d);if(Qr)return Qr;pe.set(d,Qe),tu(d)?d.forEach(function(lo){Qe.add(iu(lo,C,a,lo,d,pe))}):Lu(d)&&d.forEach(function(lo,Wo){Qe.set(Wo,iu(lo,C,a,Wo,d,pe))});var ao=gi?void 0:(ti?En?Au:Ba:En?Yc:fr)(d);return function Pd(d,C){for(var a=-1,y=null==d?0:d.length;++a<y&&!1!==C(d[a],a,d););}(ao||d,function(lo,Wo){ao&&(lo=d[Wo=lo]),Wh(Qe,Wo,iu(lo,C,a,Wo,d,pe))}),Qe};function Tc(d){return"object"==typeof d&&null!=d&&1===d.nodeType}function ou(d,C){return(!C||"hidden"!==d)&&"visible"!==d&&"clip"!==d}function Ac(d,C){if(d.clientHeight<d.scrollHeight||d.clientWidth<d.scrollWidth){var a=getComputedStyle(d,null);return ou(a.overflowY,C)||ou(a.overflowX,C)||!!(Z=function(pe){if(!pe.ownerDocument||!pe.ownerDocument.defaultView)return null;try{return pe.ownerDocument.defaultView.frameElement}catch(Qe){return null}}(y=d))&&(Z.clientHeight<y.scrollHeight||Z.clientWidth<y.scrollWidth)}var y,Z;return!1}function ac(d,C,a,y,Z,pe,Qe,Wt){return pe<d&&Qe>C||pe>d&&Qe<C?0:pe<=d&&Wt<=a||Qe>=C&&Wt>=a?pe-d-y:Qe>C&&Wt<a||pe<d&&Wt>a?Qe-C+Z:0}function oh(d,C){var a=window,y=C.scrollMode,Z=C.block,pe=C.inline,Qe=C.boundary,Wt=C.skipOverflowHiddenElements,En="function"==typeof Qe?Qe:function($l){return $l!==Qe};if(!Tc(d))throw new TypeError("Invalid target");for(var ti=document.scrollingElement||document.documentElement,gi=[],li=d;Tc(li)&&En(li);){if((li=li.parentElement)===ti){gi.push(li);break}null!=li&&li===document.body&&Ac(li)&&!Ac(document.documentElement)||null!=li&&Ac(li,Wt)&&gi.push(li)}for(var Qi=a.visualViewport?a.visualViewport.width:innerWidth,Qr=a.visualViewport?a.visualViewport.height:innerHeight,mo=window.scrollX||pageXOffset,ao=window.scrollY||pageYOffset,lo=d.getBoundingClientRect(),Wo=lo.height,ua=lo.width,Dl=lo.top,Ml=lo.right,cc=lo.bottom,Dh=lo.left,dl="start"===Z||"nearest"===Z?Dl:"end"===Z?cc:Dl+Wo/2,Sl="center"===pe?Dh+ua/2:"end"===pe?Ml:Dh,Fm=[],Lm=0;Lm<gi.length;Lm++){var ka=gi[Lm],gd=ka.getBoundingClientRect(),$p=gd.height,pu=gd.width,Mh=gd.top,Zp=gd.right,Wp=gd.bottom,Sh=gd.left;if("if-needed"===y&&Dl>=0&&Dh>=0&&cc<=Qr&&Ml<=Qi&&Dl>=Mh&&cc<=Wp&&Dh>=Sh&&Ml<=Zp)return Fm;var Th=getComputedStyle(ka),Ah=parseInt(Th.borderLeftWidth,10),qp=parseInt(Th.borderTopWidth,10),Ih=parseInt(Th.borderRightWidth,10),Yp=parseInt(Th.borderBottomWidth,10),fu=0,mu=0,Kp="offsetWidth"in ka?ka.offsetWidth-ka.clientWidth-Ah-Ih:0,Oc="offsetHeight"in ka?ka.offsetHeight-ka.clientHeight-qp-Yp:0;if(ti===ka)fu="start"===Z?dl:"end"===Z?dl-Qr:"nearest"===Z?ac(ao,ao+Qr,Qr,qp,Yp,ao+dl,ao+dl+Wo,Wo):dl-Qr/2,mu="start"===pe?Sl:"center"===pe?Sl-Qi/2:"end"===pe?Sl-Qi:ac(mo,mo+Qi,Qi,Ah,Ih,mo+Sl,mo+Sl+ua,ua),fu=Math.max(0,fu+ao),mu=Math.max(0,mu+mo);else{fu="start"===Z?dl-Mh-qp:"end"===Z?dl-Wp+Yp+Oc:"nearest"===Z?ac(Mh,Wp,$p,qp,Yp+Oc,dl,dl+Wo,Wo):dl-(Mh+$p/2)+Oc/2,mu="start"===pe?Sl-Sh-Ah:"center"===pe?Sl-(Sh+pu/2)+Kp/2:"end"===pe?Sl-Zp+Ih+Kp:ac(Sh,Zp,pu,Ah,Ih+Kp,Sl,Sl+ua,ua);var q_=ka.scrollLeft,Jp=ka.scrollTop;dl+=Jp-(fu=Math.max(0,Math.min(Jp+fu,ka.scrollHeight-$p+Oc))),Sl+=q_-(mu=Math.max(0,Math.min(q_+mu,ka.scrollWidth-pu+Kp)))}Fm.push({el:ka,top:fu,left:mu})}return Fm}function su(d){return d===Object(d)&&0!==Object.keys(d).length}let au=(()=>{class d{constructor(){this.resize$=new He.x}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var yp=V(3619),lc=V(7423),Vu=V(7144),Ti=V(508),Wi=V(3191),es=V(3075),sl=V(5664);const vp=["thumbContainer"],ah=["toggleBar"],Uu=["input"],bp=function(d){return{enterDuration:d}},$m=["*"],r=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let e=0;const s={provide:es.JU,useExisting:(0,l.Gpc)(()=>x),multi:!0};class h{constructor(C,a){this.source=C,this.checked=a}}const g=(0,Ti.sb)((0,Ti.pj)((0,Ti.Kr)((0,Ti.Id)(class{constructor(d){this._elementRef=d}}))));let x=(()=>{class d extends g{constructor(a,y,Z,pe,Qe,Wt){super(a),this._focusMonitor=y,this._changeDetectorRef=Z,this.defaults=Qe,this._onChange=En=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++e,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(pe)||0,this.color=this.defaultColor=Qe.color||"accent",this._noopAnimations="NoopAnimations"===Wt}get required(){return this._required}set required(a){this._required=(0,Wi.Ig)(a)}get checked(){return this._checked}set checked(a){this._checked=(0,Wi.Ig)(a),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{a||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(a){a.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(a){a.stopPropagation()}writeValue(a){this.checked=!!a}registerOnChange(a){this._onChange=a}registerOnTouched(a){this._onTouched=a}setDisabledState(a){this.disabled=a,this._changeDetectorRef.markForCheck()}focus(a,y){y?this._focusMonitor.focusVia(this._inputElement,y,a):this._inputElement.nativeElement.focus(a)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new h(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(sl.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(r),l.Y36(qe.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-slide-toggle"]],viewQuery:function(a,y){if(1&a&&(l.Gf(vp,5),l.Gf(ah,5),l.Gf(Uu,5)),2&a){let Z;l.iGM(Z=l.CRH())&&(y._thumbEl=Z.first),l.iGM(Z=l.CRH())&&(y._thumbBarEl=Z.first),l.iGM(Z=l.CRH())&&(y._inputElement=Z.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(a,y){2&a&&(l.Ikx("id",y.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),l.ekj("mat-checked",y.checked)("mat-disabled",y.disabled)("mat-slide-toggle-label-before","before"==y.labelPosition)("_mat-animation-noopable",y._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[l._Bn([s]),l.qOj],ngContentSelectors:$m,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"label",0,1),l.TgZ(2,"div",2,3),l.TgZ(4,"input",4,5),l.NdJ("change",function(pe){return y._onChangeEvent(pe)})("click",function(pe){return y._onInputClick(pe)}),l.qZA(),l.TgZ(6,"div",6,7),l._UZ(8,"div",8),l.TgZ(9,"div",9),l._UZ(10,"div",10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"span",11,12),l.NdJ("cdkObserveContent",function(){return y._onLabelTextChange()}),l.TgZ(13,"span",13),l._uU(14,"\xa0"),l.qZA(),l.Hsn(15),l.qZA(),l.qZA()),2&a){const Z=l.MAs(1),pe=l.MAs(12);l.uIk("for",y.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!pe.textContent||!pe.textContent.trim()),l.xp6(2),l.Q6J("id",y.inputId)("required",y.required)("tabIndex",y.tabIndex)("checked",y.checked)("disabled",y.disabled),l.uIk("name",y.name)("aria-checked",y.checked.toString())("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby)("aria-describedby",y.ariaDescribedby),l.xp6(5),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y.disableRipple||y.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,bp,y._noopAnimations?0:150))}},directives:[Ti.wG,Vu.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),d})(),L=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({}),d})(),ee=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[L,Ti.si,Ti.BQ,Vu.Q8],L,Ti.BQ]}),d})();var oe=V(925),ae=V(8962),me=V(1159),Me=V(1884),we=V(1777),Je=V(226);const Xe=["*"],Mt=["content"];function Gt(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){return l.CHM(a),l.oxw()._onBackdropClicked()}),l.qZA()}if(2&d){const a=l.oxw();l.ekj("mat-drawer-shown",a._isShowingBackdrop())}}function Ht(d,C){1&d&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const Qt=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],hn=["mat-drawer","mat-drawer-content","*"];function ln(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){return l.CHM(a),l.oxw()._onBackdropClicked()}),l.qZA()}if(2&d){const a=l.oxw();l.ekj("mat-drawer-shown",a._isShowingBackdrop())}}function Yn(d,C){1&d&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const hi=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Nn=["mat-sidenav","mat-sidenav-content","*"],Pn={transformDrawer:(0,we.X$)("transform",[(0,we.SB)("open, open-instant",(0,we.oB)({transform:"none",visibility:"visible"})),(0,we.SB)("void",(0,we.oB)({"box-shadow":"none",visibility:"hidden"})),(0,we.eR)("void => open-instant",(0,we.jt)("0ms")),(0,we.eR)("void <=> open, open-instant => void",(0,we.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},$n=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Mi(){return!1}}),wn=new l.OlP("MAT_DRAWER_CONTAINER");let di=(()=>{class d extends ae.PQ{constructor(a,y,Z,pe,Qe){super(Z,pe,Qe),this._changeDetectorRef=a,this._container=y}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>br)),l.Y36(l.SBq),l.Y36(ae.mF),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(a,y){2&a&&l.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[l._Bn([{provide:ae.PQ,useExisting:d}]),l.qOj],ngContentSelectors:Xe,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),d})(),cr=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt,En,ti){this._elementRef=a,this._focusTrapFactory=y,this._focusMonitor=Z,this._platform=pe,this._ngZone=Qe,this._interactivityChecker=Wt,this._doc=En,this._container=ti,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new He.x,this._animationEnd=new He.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,Dt.h)(gi=>gi),(0,Tt.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Dt.h)(gi=>gi.fromState!==gi.toState&&0===gi.toState.indexOf("open")),Xt(void 0)),this._closedStream=this.openedChange.pipe((0,Dt.h)(gi=>!gi),(0,Tt.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Dt.h)(gi=>gi.fromState!==gi.toState&&"void"===gi.toState),Xt(void 0)),this._destroyed=new He.x,this.onPositionChanged=new l.vpe,this._modeChanged=new He.x,this.openedChange.subscribe(gi=>{gi?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,un.R)(this._elementRef.nativeElement,"keydown").pipe((0,Dt.h)(gi=>gi.keyCode===me.hY&&!this.disableClose&&!(0,me.Vb)(gi)),(0,nn.R)(this._destroyed)).subscribe(gi=>this._ngZone.run(()=>{this.close(),gi.stopPropagation(),gi.preventDefault()}))}),this._animationEnd.pipe((0,Me.x)((gi,li)=>gi.fromState===li.fromState&&gi.toState===li.toState)).subscribe(gi=>{const{fromState:li,toState:Qi}=gi;(0===Qi.indexOf("open")&&"void"===li||"void"===Qi&&0===li.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(a){(a="end"===a?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(a),this._position=a,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(a){this._mode=a,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(a){this._disableClose=(0,Wi.Ig)(a)}get autoFocus(){const a=this._autoFocus;return null==a?"side"===this.mode?"dialog":"first-tabbable":a}set autoFocus(a){("true"===a||"false"===a||null==a)&&(a=(0,Wi.Ig)(a)),this._autoFocus=a}get opened(){return this._opened}set opened(a){this.toggle((0,Wi.Ig)(a))}_forceFocus(a,y){this._interactivityChecker.isFocusable(a)||(a.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{a.addEventListener("blur",()=>a.removeAttribute("tabindex")),a.addEventListener("mousedown",()=>a.removeAttribute("tabindex"))})),a.focus(y)}_focusByCssSelector(a,y){let Z=this._elementRef.nativeElement.querySelector(a);Z&&this._forceFocus(Z,y)}_takeFocus(){if(!this._focusTrap)return;const a=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(y=>{!y&&"function"==typeof this._elementRef.nativeElement.focus&&a.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(a){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,a):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const a=this._doc.activeElement;return!!a&&this._elementRef.nativeElement.contains(a)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var a;this._focusTrap&&this._focusTrap.destroy(),null===(a=this._anchor)||void 0===a||a.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(a){return this.toggle(!0,a)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(a=!this.opened,y){a&&y&&(this._openedVia=y);const Z=this._setOpen(a,!a&&this._isFocusWithinDrawer(),this._openedVia||"program");return a||(this._openedVia=null),Z}_setOpen(a,y,Z){return this._opened=a,a?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",y&&this._restoreFocus(Z)),this._updateFocusTrapState(),new Promise(pe=>{this.openedChange.pipe((0,zt.q)(1)).subscribe(Qe=>pe(Qe?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(a){const y=this._elementRef.nativeElement,Z=y.parentNode;"end"===a?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),Z.insertBefore(this._anchor,y)),Z.appendChild(y)):this._anchor&&this._anchor.parentNode.insertBefore(y,this._anchor)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(sl.qV),l.Y36(sl.tE),l.Y36(oe.t4),l.Y36(l.R0b),l.Y36(sl.ic),l.Y36(Oe.K0,8),l.Y36(wn,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer"]],viewQuery:function(a,y){if(1&a&&l.Gf(Mt,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._content=Z.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(a,y){1&a&&l.WFA("@transform.start",function(pe){return y._animationStarted.next(pe)})("@transform.done",function(pe){return y._animationEnd.next(pe)}),2&a&&(l.uIk("align",null),l.d8E("@transform",y._animationState),l.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Xe,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},directives:[ae.PQ],encapsulation:2,data:{animation:[Pn.transformDrawer]},changeDetection:0}),d})(),br=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt=!1,En){this._dir=a,this._element=y,this._ngZone=Z,this._changeDetectorRef=pe,this._animationMode=En,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new He.x,this._doCheckSubject=new He.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new He.x,a&&a.change.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Qe.change().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Wt}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(a){this._autosize=(0,Wi.Ig)(a)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(a){this._backdropOverride=null==a?null:(0,Wi.Ig)(a)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Ct.O)(this._allDrawers),(0,nn.R)(this._destroyed)).subscribe(a=>{this._drawers.reset(a.filter(y=>!y._container||y._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ct.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(a=>{this._watchDrawerToggle(a),this._watchDrawerPosition(a),this._watchDrawerMode(a)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,tn.b)(10),(0,nn.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(a=>a.open())}close(){this._drawers.forEach(a=>a.close())}updateContentMargins(){let a=0,y=0;if(this._left&&this._left.opened)if("side"==this._left.mode)a+=this._left._getWidth();else if("push"==this._left.mode){const Z=this._left._getWidth();a+=Z,y-=Z}if(this._right&&this._right.opened)if("side"==this._right.mode)y+=this._right._getWidth();else if("push"==this._right.mode){const Z=this._right._getWidth();y+=Z,a-=Z}a=a||null,y=y||null,(a!==this._contentMargins.left||y!==this._contentMargins.right)&&(this._contentMargins={left:a,right:y},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(a){a._animationStarted.pipe((0,Dt.h)(y=>y.fromState!==y.toState),(0,nn.R)(this._drawers.changes)).subscribe(y=>{"open-instant"!==y.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==a.mode&&a.openedChange.pipe((0,nn.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(a.opened))}_watchDrawerPosition(a){!a||a.onPositionChanged.pipe((0,nn.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,zt.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(a){a&&a._modeChanged.pipe((0,nn.R)((0,sr.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(a){const y=this._element.nativeElement.classList,Z="mat-drawer-container-has-open";a?y.add(Z):y.remove(Z)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(a=>{"end"==a.position?this._end=a:this._start=a}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(a=>a&&!a.disableClose&&this._canHaveBackdrop(a)).forEach(a=>a._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(a){return"side"!==a.mode||!!this._backdropOverride}_isDrawerOpen(a){return null!=a&&a.opened}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(Je.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(ae.rL),l.Y36($n),l.Y36(qe.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer-container"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,di,5),l.Suo(Z,cr,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._content=pe.first),l.iGM(pe=l.CRH())&&(y._allDrawers=pe)}},viewQuery:function(a,y){if(1&a&&l.Gf(di,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._userContent=Z.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:wn,useExisting:d}])],ngContentSelectors:hn,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(a,y){1&a&&(l.F$t(Qt),l.YNc(0,Gt,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,Ht,2,0,"mat-drawer-content",1)),2&a&&(l.Q6J("ngIf",y.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!y._content))},directives:[di,Oe.O5],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),d})(),jr=(()=>{class d extends di{constructor(a,y,Z,pe,Qe){super(a,y,Z,pe,Qe)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>Go)),l.Y36(l.SBq),l.Y36(ae.mF),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(a,y){2&a&&l.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[l._Bn([{provide:ae.PQ,useExisting:d}]),l.qOj],ngContentSelectors:Xe,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),d})(),Nr=(()=>{class d extends cr{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(a){this._fixedInViewport=(0,Wi.Ig)(a)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(a){this._fixedTopGap=(0,Wi.su)(a)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(a){this._fixedBottomGap=(0,Wi.su)(a)}}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(a,y){2&a&&(l.uIk("align",null),l.Udp("top",y.fixedInViewport?y.fixedTopGap:null,"px")("bottom",y.fixedInViewport?y.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened)("mat-sidenav-fixed",y.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:Xe,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},directives:[ae.PQ],encapsulation:2,data:{animation:[Pn.transformDrawer]},changeDetection:0}),d})(),Go=(()=>{class d extends br{}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav-container"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,jr,5),l.Suo(Z,Nr,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._content=pe.first),l.iGM(pe=l.CRH())&&(y._allDrawers=pe)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:wn,useExisting:d}]),l.qOj],ngContentSelectors:Nn,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(a,y){1&a&&(l.F$t(hi),l.YNc(0,ln,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,Yn,2,0,"mat-sidenav-content",1)),2&a&&(l.Q6J("ngIf",y.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!y._content))},directives:[jr,Oe.O5],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),d})(),Mo=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Oe.ez,Ti.BQ,oe.ud,ae.ZD],ae.ZD,Ti.BQ]}),d})();var Br=V(7322),$o=V(515);const ts=(0,oe.i$)({passive:!0});let zr=(()=>{class d{constructor(a,y){this._platform=a,this._ngZone=y,this._monitoredElements=new Map}monitor(a){if(!this._platform.isBrowser)return $o.E;const y=(0,Wi.fI)(a),Z=this._monitoredElements.get(y);if(Z)return Z.subject;const pe=new He.x,Qe="cdk-text-field-autofilled",Wt=En=>{"cdk-text-field-autofill-start"!==En.animationName||y.classList.contains(Qe)?"cdk-text-field-autofill-end"===En.animationName&&y.classList.contains(Qe)&&(y.classList.remove(Qe),this._ngZone.run(()=>pe.next({target:En.target,isAutofilled:!1}))):(y.classList.add(Qe),this._ngZone.run(()=>pe.next({target:En.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{y.addEventListener("animationstart",Wt,ts),y.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(y,{subject:pe,unlisten:()=>{y.removeEventListener("animationstart",Wt,ts)}}),pe}stopMonitoring(a){const y=(0,Wi.fI)(a),Z=this._monitoredElements.get(y);Z&&(Z.unlisten(),Z.subject.complete(),y.classList.remove("cdk-text-field-autofill-monitored"),y.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(y))}ngOnDestroy(){this._monitoredElements.forEach((a,y)=>this.stopMonitoring(y))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(oe.t4),l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),us=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[oe.ud]]}),d})();const xs=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),oa=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Zs=0;const Hr=(0,Ti.FD)(class{constructor(d,C,a,y){this._defaultErrorStateMatcher=d,this._parentForm=C,this._parentFormGroup=a,this.ngControl=y}});let No=(()=>{class d extends Hr{constructor(a,y,Z,pe,Qe,Wt,En,ti,gi,li){super(Wt,pe,Qe,Z),this._elementRef=a,this._platform=y,this._autofillMonitor=ti,this._formField=li,this._uid="mat-input-"+Zs++,this.focused=!1,this.stateChanges=new He.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(mo=>(0,oe.qK)().has(mo));const Qi=this._elementRef.nativeElement,Qr=Qi.nodeName.toLowerCase();this._inputValueAccessor=En||Qi,this._previousNativeValue=this.value,this.id=this.id,y.IOS&&gi.runOutsideAngular(()=>{a.nativeElement.addEventListener("keyup",mo=>{const ao=mo.target;!ao.value&&0===ao.selectionStart&&0===ao.selectionEnd&&(ao.setSelectionRange(1,1),ao.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Qr,this._isTextarea="textarea"===Qr,this._isInFormField=!!li,this._isNativeSelect&&(this.controlType=Qi.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(a){this._disabled=(0,Wi.Ig)(a),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(a){this._id=a||this._uid}get required(){var a,y,Z,pe;return null!==(pe=null!==(a=this._required)&&void 0!==a?a:null===(Z=null===(y=this.ngControl)||void 0===y?void 0:y.control)||void 0===Z?void 0:Z.hasValidator(es.kI.required))&&void 0!==pe&&pe}set required(a){this._required=(0,Wi.Ig)(a)}get type(){return this._type}set type(a){this._type=a||"text",this._validateType(),!this._isTextarea&&(0,oe.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(a){a!==this.value&&(this._inputValueAccessor.value=a,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(a){this._readonly=(0,Wi.Ig)(a)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(a=>{this.autofilled=a.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(a){this._elementRef.nativeElement.focus(a)}_focusChanged(a){a!==this.focused&&(this.focused=a,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var a,y;const Z=(null===(y=null===(a=this._formField)||void 0===a?void 0:a._hideControlPlaceholder)||void 0===y?void 0:y.call(a))?null:this.placeholder;if(Z!==this._previousPlaceholder){const pe=this._elementRef.nativeElement;this._previousPlaceholder=Z,Z?pe.setAttribute("placeholder",Z):pe.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const a=this._elementRef.nativeElement.value;this._previousNativeValue!==a&&(this._previousNativeValue=a,this.stateChanges.next())}_validateType(){oa.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let a=this._elementRef.nativeElement.validity;return a&&a.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const a=this._elementRef.nativeElement,y=a.options[0];return this.focused||a.multiple||!this.empty||!!(a.selectedIndex>-1&&y&&y.label)}return this.focused||!this.empty}setDescribedByIds(a){a.length?this._elementRef.nativeElement.setAttribute("aria-describedby",a.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const a=this._elementRef.nativeElement;return this._isNativeSelect&&(a.multiple||a.size>1)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(oe.t4),l.Y36(es.a5,10),l.Y36(es.F,8),l.Y36(es.sg,8),l.Y36(Ti.rD),l.Y36(xs,10),l.Y36(zr),l.Y36(l.R0b),l.Y36(Br.G_,8))},d.\u0275dir=l.lG2({type:d,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y._focusChanged(!0)})("blur",function(){return y._focusChanged(!1)})("input",function(){return y._onInput()}),2&a&&(l.Ikx("disabled",y.disabled)("required",y.required),l.uIk("id",y.id)("data-placeholder",y.placeholder)("name",y.name||null)("readonly",y.readonly&&!y._isNativeSelect||null)("aria-invalid",y.empty&&y.required?null:y.errorState)("aria-required",y.required),l.ekj("mat-input-server",y._isServer)("mat-native-select-inline",y._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:Br.Eo,useExisting:d}]),l.qOj,l.TTD]}),d})(),or=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[Ti.rD],imports:[[us,Br.lN,Ti.BQ],us,Br.lN]}),d})();var ws=V(449);let ds=(()=>{class d{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(a){this._vertical=(0,Wi.Ig)(a)}get inset(){return this._inset}set inset(a){this._inset=(0,Wi.Ig)(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(a,y){2&a&&(l.uIk("aria-orientation",y.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",y.vertical)("mat-divider-horizontal",!y.vertical)("mat-divider-inset",y.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(a,y){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),d})(),hs=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.BQ],Ti.BQ]}),d})();const sa=["*"],Ga=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],bl=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Vl=(0,Ti.Id)((0,Ti.Kr)(class{})),xp=(0,Ti.Kr)(class{}),ju=new l.OlP("MatList"),lh=new l.OlP("MatNavList");let al=(()=>{class d extends Vl{constructor(){super(...arguments),this._stateChanges=new He.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:lh,useExisting:d}]),l.qOj,l.TTD],ngContentSelectors:sa,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),d})(),wp=(()=>{class d extends Vl{constructor(a){super(),this._elementRef=a,this._stateChanges=new He.x,"action-list"===this._getListType()&&a.nativeElement.classList.add("mat-action-list")}_getListType(){const a=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===a?"list":"mat-action-list"===a?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:ju,useExisting:d}]),l.qOj,l.TTD],ngContentSelectors:sa,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),d})(),Hu=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),d})(),Gu=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),d})(),$u=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),d})(),Cp=(()=>{class d extends xp{constructor(a,y,Z,pe){super(),this._element=a,this._isInteractiveList=!1,this._destroyed=new He.x,this._disabled=!1,this._isInteractiveList=!!(Z||pe&&"action-list"===pe._getListType()),this._list=Z||pe;const Qe=this._getHostElement();"button"===Qe.nodeName.toLowerCase()&&!Qe.hasAttribute("type")&&Qe.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{y.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(a){this._disabled=(0,Wi.Ig)(a)}ngAfterContentInit(){(0,Ti.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(lh,8),l.Y36(ju,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,Hu,5),l.Suo(Z,Gu,5),l.Suo(Z,Ti.X2,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._avatar=pe.first),l.iGM(pe=l.CRH())&&(y._icon=pe.first),l.iGM(pe=l.CRH())&&(y._lines=pe)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(a,y){2&a&&l.ekj("mat-list-item-disabled",y.disabled)("mat-list-item-avatar",y._avatar||y._icon)("mat-list-item-with-avatar",y._avatar||y._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:bl,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(a,y){1&a&&(l.F$t(Ga),l.TgZ(0,"div",0),l._UZ(1,"div",1),l.Hsn(2),l.TgZ(3,"div",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&a&&(l.xp6(1),l.Q6J("matRippleTrigger",y._getHostElement())("matRippleDisabled",y._isRippleDisabled()))},directives:[Ti.wG],encapsulation:2,changeDetection:0}),d})(),Ep=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.uc,Ti.si,Ti.BQ,Ti.us,Oe.ez],Ti.uc,Ti.BQ,Ti.us,hs]}),d})();const $a=["exampleLink"];function qu(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){return l.CHM(a),l.oxw().clearSearch()}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA(),l.qZA()}}const Yu=function(d){return{_routerLinkActiveWakeUpHack_:d}};function la(d,C){if(1&d&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&d){const a=l.oxw().$implicit,y=l.oxw(2);l.Q6J("routerLink","/demo/"+(y.isEditMode?"/edit/":"")+a.path)("routerLinkActiveOptions",l.VKq(3,Yu,y.isEditMode)),l.xp6(2),l.hij(" ",a.data.label," ")}}function ll(d,C){if(1&d&&(l.ynx(0),l.YNc(1,la,3,5,"a",13),l.BQk()),2&d){const a=C.$implicit;l.xp6(1),l.Q6J("ngIf",a)}}function Ic(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,ll,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&d){const a=C.$implicit,y=l.oxw();l.xp6(2),l.Oqu(a),l.xp6(1),l.Q6J("ngForOf",y.routes[a])}}let Pc=(()=>{class d{constructor(a,y,Z,pe){this.zone=a,this.router=y,this.activatedRoute=Z,this.mapResizeService=pe,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=Id(km[0].children,Qe=>Qe.data?Qe.data.cat:null),this.categories=[qi.STYLES,qi.LAYERS,qi.SOURCES,qi.USER_INTERACTION,qi.CAMERA,qi.CONTROLS_AND_OVERLAYS]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(a){const y=this.activatedRoute.snapshot.firstChild;this.router.navigate(a.checked?["demo","edit",y.url[0].path]:["demo",y.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Sc(d){return rh(d,5)}(this.originalRoutes),Object.values(this.routes).forEach(a=>{a.forEach((y,Z)=>{y.data&&!y.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete a[Z]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{const a=this.exampleLinks.find(y=>y.nativeElement.classList.contains("active"));a&&function _p(d,C){var a=!d.ownerDocument.documentElement.contains(d);if(su(C)&&"function"==typeof C.behavior)return C.behavior(a?[]:oh(d,C));if(!a){var y=function sh(d){return!1===d?{block:"end",inline:"nearest"}:su(d)?d:{block:"start",inline:"nearest"}}(C);(function gp(d,C){void 0===C&&(C="auto");var a="scrollBehavior"in document.body.style;d.forEach(function(y){var Z=y.el,pe=y.top,Qe=y.left;Z.scroll&&a?Z.scroll({top:pe,left:Qe,behavior:C}):(Z.scrollTop=pe,Z.scrollLeft=Qe)})})(oh(d,y),y.behavior)}}(a.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.R0b),l.Y36(W.F0),l.Y36(W.gz),l.Y36(au))},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],viewQuery:function(a,y){if(1&a&&l.Gf($a,5,l.SBq),2&a){let Z;l.iGM(Z=l.CRH())&&(y.exampleLinks=Z)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(a,y){1&a&&(l.TgZ(0,"showcase-layout-toolbar-menu",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return y.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"showcase-layout-toolbar-menu",2),l.TgZ(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(pe){return y.isEditMode=pe})("change",function(pe){return y.toggleEdit(pe)}),l._uU(6," Edit! "),l.qZA(),l.qZA(),l.TgZ(7,"mat-sidenav-container"),l.TgZ(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return y.onSidenavChange()}),l.TgZ(10,"mat-form-field",6),l.TgZ(11,"input",7),l.NdJ("ngModelChange",function(pe){return y.searchTerm=pe})("ngModelChange",function(){return y.search()}),l.qZA(),l.YNc(12,qu,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,Ic,5,2,"ng-container",9),l.qZA(),l.qZA(),l.TgZ(15,"mat-sidenav-content"),l.TgZ(16,"section",10),l._UZ(17,"router-outlet"),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.xp6(5),l.Q6J("ngModel",y.isEditMode),l.xp6(3),l.Q6J("opened",y.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",y.searchTerm),l.xp6(1),l.Q6J("ngIf",y.searchTerm),l.xp6(2),l.Q6J("ngForOf",y.categories))},directives:[yp.a,lc.lW,je.Hw,x,es.JJ,es.On,Go,Nr,Br.KE,No,es.Fj,Oe.O5,Br.R9,al,Oe.sg,$u,Cp,W.yS,W.Od,ds,jr,W.lC],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),d})(),ur=(()=>{class d{constructor(a,y){this.mapResizeService=a,this.map=y,this.sub=new gt.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(au),l.Y36(_t))},d.\u0275dir=l.lG2({type:d,selectors:[["mgl-map"]]}),d})();const Ul=function(d){return[d,40.7135]},Zm=function(){return["==","extrude","true"]},jl=function(){return["linear"]},dh=function(){return["zoom"]},oy=function(){return["get","height"]},Wm=function(d,C,a){return["interpolate",d,C,15,0,15.05,a]},hb=function(){return["get","min_height"]},Nf=function(d,C){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":d,"fill-extrusion-base":C,"fill-extrusion-opacity":.6}};let qm=(()=>{class d{onLoad(a){const y=a.getStyle().layers;for(let Z=0;Z<y.length;Z++)if("symbol"===y[Z].type&&y[Z].layout["text-field"]){this.labelLayerId=y[Z].id;break}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.onLoad(pe)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,Ul,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,Zm))("minzoom",15)("paint",l.WLB(27,Nf,l.kEZ(16,Wm,l.DdM(13,jl),l.DdM(14,dh),l.DdM(15,oy)),l.kEZ(23,Wm,l.DdM(20,jl),l.DdM(21,dh),l.DdM(22,hb))))("before",y.labelLayerId))},directives:[_t,ur,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Bf=function(d){return{width:64,height:64,data:d}},hh=function(){return[0,0]},sy=function(d){return{type:"Point",coordinates:d}},zf=function(d){return{type:"Feature",geometry:d}},Ym=function(d){return[d]},Km=function(d){return{type:"FeatureCollection",features:d}},Jm=function(d){return{type:"geojson",data:d}},ay=function(){return{"icon-image":"gradient"}};let Vf=(()=>{class d{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const Z=new Uint8Array(16384);for(let pe=0;pe<64;pe++)for(let Qe=0;Qe<64;Qe++){const Wt=4*(64*Qe+pe);Z[Wt+0]=Qe/64*255,Z[Wt+1]=pe/64*255,Z[Wt+2]=128,Z[Wt+3]=255}return Z}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0),l._UZ(2,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,Bf,y.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,Jm,l.VKq(14,Km,l.VKq(12,Ym,l.VKq(10,zf,l.VKq(8,sy,l.DdM(7,hh)))))))("layout",l.DdM(18,ay)))},directives:[_t,ur,fi,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function ly(d,C){if(1&d&&l._UZ(0,"mgl-image",3),2&d){const a=C.$implicit;l.Q6J("id",a.id)("data",a)}}const cy=function(){return[0,0]},Dp=function(d){return{type:"Point",coordinates:d}},Ku=function(){return{color:"255,0,0"}},Mp=function(d,C){return{type:"Feature",geometry:d,properties:C}},uy=function(){return[50,0]},dy=function(){return{color:"255,209,28"}},Ju=function(d){return[d,0]},hy=function(){return{color:"242,127,32"}},py=function(d,C,a){return[d,C,a]},fy=function(d){return{type:"FeatureCollection",features:d}},my=function(d){return{type:"geojson",data:d}},cl=function(){return["get","color"]},Uf=function(d){return["concat","square-rgb-",d]},Xm=function(d){return{"icon-image":d}};let Qm=(()=>{class d{constructor(){this.imagesData=[]}generateImage({id:a}){const y="square-rgb-";if(0!==a.indexOf(y))return;const Z=a.replace(y,"").split(",").map(Number),Wt=new Uint8Array(16384);for(let ti=0;ti<64;ti++)for(let gi=0;gi<64;gi++){const li=4*(64*gi+ti);Wt[li+0]=Z[0],Wt[li+1]=Z[1],Wt[li+2]=Z[2],Wt[li+3]=255}this.imagesData=[...this.imagesData,{id:a,width:64,height:64,data:Wt}]}trackByImage(a,y){return y.id}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(pe){return y.generateImage(pe)}),l.YNc(1,ly,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",y.imagesData)("ngForTrackBy",y.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,my,l.VKq(32,fy,l.kEZ(28,py,l.WLB(10,Mp,l.VKq(7,Dp,l.DdM(6,cy)),l.DdM(9,Ku)),l.WLB(17,Mp,l.VKq(14,Dp,l.DdM(13,uy)),l.DdM(16,dy)),l.WLB(25,Mp,l.VKq(22,Dp,l.VKq(20,Ju,-50)),l.DdM(24,hy))))))("layout",l.VKq(39,Xm,l.VKq(37,Uf,l.DdM(36,cl)))))},directives:[_t,ur,Oe.sg,fi,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const eg=function(){return[0,0]},tg=function(d){return{type:"Point",coordinates:d}},gy=function(d){return{type:"Feature",geometry:d}},_y=function(d){return[d]},yy=function(d){return{type:"FeatureCollection",features:d}},vy=function(d){return{type:"geojson",data:d}},ng=function(){return{"icon-image":"cat","icon-size":.25}};function pb(d,C){1&d&&l._UZ(0,"mgl-layer",2),2&d&&l.Q6J("source",l.VKq(11,vy,l.VKq(9,yy,l.VKq(7,_y,l.VKq(5,gy,l.VKq(3,tg,l.DdM(2,eg)))))))("layout",l.DdM(13,ng))}let ig=(()=>{class d{constructor(){this.imageLoaded=!1}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l.TgZ(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return y.imageLoaded=!0}),l.qZA(),l.YNc(2,pb,1,14,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",y.imageLoaded))},directives:[_t,ur,fi,Oe.O5,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const by=function(d){return[d,38.907]},xy=function(){return[11.15]};let fb=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,by,-77.04))("zoom",l.DdM(7,xy))("attributionControl",!1))},directives:[_t,ur,jt,Pi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function mb(d,C){1&d&&l._UZ(0,"mgl-feature",4),2&d&&l.Q6J("geometry",C.$implicit)}const jf=function(){return[8]},wy=function(){return{"icon-image":"oneway"}};let rg=(()=>{class d{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(a){this.center=a.features[0].geometry.coordinates}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.map=pe}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,mb,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(pe){return y.centerMapTo(pe)})("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""}),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,jf))("center",y.center)("cursorStyle",y.cursorStyle),l.xp6(2),l.Q6J("ngForOf",y.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,wy)))},directives:[_t,ur,st,Oe.sg,yt,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function og(d,C){1&d&&l._UZ(0,"showcase-cluster-point",6),2&d&&l.Q6J("properties",C.$implicit.properties)}const gb=function(){return[.3]},xl=function(){return[0,20]},Cy=function(){return["!=","cluster",!0]},_b=function(d){return{fill:d}};function sg(d,C){if(1&d&&(l.O4$(),l._UZ(0,"path",4)),2&d){const a=C.$implicit;l.Q6J("ngStyle",l.VKq(2,_b,a.fill)),l.uIk("d",a.d)}}const ag=function(d){return{font:d}},lu=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let Ey=(()=>{class d{constructor(){const a=["<",["get","mag"],2],y=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],Z=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],pe=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",a,1,0]],mag2:["+",["case",y,1,0]],mag3:["+",["case",Z,1,0]],mag4:["+",["case",pe,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",a,lu[0],y,lu[1],Z,lu[2],pe,lu[3],lu[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,og,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4),l._UZ(5,"mgl-layer",5),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,gb))("center",l.DdM(13,xl)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",y.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,Cy))("paint",y.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,Cy))("layout",y.labelLayout)("paint",y.labelPaint))},directives:function(){return[_t,ur,st,tt,ie,yb,vn]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),yb=(()=>{class d{ngOnInit(){const a=[],y=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let Z=0;for(let Qe=0;Qe<y.length;Qe++)a.push(Z),Z+=y[Qe];this.font=(Z>=1e3?22:Z>=100?20:Z>=10?18:16)+"px sans-serif",this.r=Z>=1e3?50:Z>=100?32:Z>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let Qe=0;Qe<y.length;Qe++)this.segments.push(this.donutSegment(a[Qe]/Z,(a[Qe]+y[Qe])/Z,lu[Qe]));this.totalString=Z.toLocaleString()}donutSegment(a,y,Z){y-a==1&&(y-=1e-5);const pe=2*Math.PI*(a-.25),Qe=2*Math.PI*(y-.25),Wt=Math.cos(pe),En=Math.sin(pe),ti=Math.cos(Qe),gi=Math.sin(Qe),li=y-a>.5?1:0;return{d:`M ${this.r+this.r0*Wt} ${this.r+this.r0*En} L ${this.r+this.r*Wt} ${this.r+this.r*En} A ${this.r} ${this.r} 0 ${li} 1 ${this.r+this.r*ti} ${this.r+this.r*gi} L ${this.r+this.r0*ti} ${this.r+this.r0*gi} A ${this.r0} ${this.r0} 0 ${li} 0 ${this.r+this.r0*Wt} ${this.r+this.r0*En}`,fill:Z}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(a,y){1&a&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,sg,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA(),l.qZA()),2&a&&(l.Q6J("ngStyle",l.VKq(10,ag,y.font)),l.uIk("width",y.w)("height",y.w)("viewbox",y.viewbox),l.xp6(1),l.Q6J("ngForOf",y.segments),l.xp6(1),l.uIk("cx",y.r)("cy",y.r)("r",y.r0),l.xp6(1),l.uIk("transform",y.textTransform),l.xp6(1),l.hij(" ",y.totalString," "))},directives:[Oe.PC,Oe.sg],encapsulation:2}),d})();const Hf=function(){return["has","point_count"]},Gf=function(){return[0,"#51bbd6"]},Dy=function(){return[100,"#f1f075"]},$f=function(){return[750,"#f28cb1"]},lg=function(d,C,a){return[d,C,a]},cg=function(d){return{property:"point_count",type:"interval",stops:d}},My=function(){return[0,20]},Sy=function(){return[100,30]},Ty=function(){return[750,40]},Ay=function(d,C){return{"circle-color":d,"circle-radius":C}},Sp=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},Xu=function(d){return{"text-field":"{point_count_abbreviated}","text-font":d,"text-size":12}},Iy=function(){return["!has","point_count"]},ph=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Py(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l._UZ(2,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l._UZ(4,"mgl-layer",5),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,Hf))("paint",l.WLB(29,Ay,l.VKq(18,cg,l.kEZ(14,lg,l.DdM(11,Gf),l.DdM(12,Dy),l.DdM(13,$f))),l.VKq(27,cg,l.kEZ(23,lg,l.DdM(20,My),l.DdM(21,Sy),l.DdM(22,Ty))))),l.xp6(1),l.Q6J("filter",l.DdM(32,Hf))("layout",l.VKq(34,Xu,l.DdM(33,Sp))),l.xp6(1),l.Q6J("filter",l.DdM(36,Iy))("paint",l.DdM(37,ph))}}const Oy=function(){return[3]},Zf=function(d){return[d,40.66995747013945]};let Hl=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){this.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19))})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Py,5,38,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Oy))("center",l.VKq(6,Zf,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:[_t,ur,Oe.O5,st,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const fh=function(d){return[d,38.907]},ca=function(){return[11.15]},Tp=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let ul=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,fh,-77.04))("zoom",l.DdM(8,ca))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,Tp)))},directives:[_t,ur,jt,Pi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Wf=function(){return[36.235656,50.00387]},Qu=function(){return[11.15]};let ed=(()=>{class d{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l._UZ(2,"mgl-control",2),l._UZ(3,"mgl-control",3),l._UZ(4,"mgl-control",4),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,Wf))("zoom",l.DdM(6,Qu))("locale",y.locale))},directives:[_t,ur,jt,gn,zn,Jn,er],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const td=function(d,C,a){return{"background-image":d,width:C,height:a}};function nd(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"mgl-marker",2),l.TgZ(1,"div",3),l.NdJ("click",function(){const pe=l.CHM(a).$implicit;return l.oxw().alert(pe.properties.message)}),l.qZA(),l.qZA()}if(2&d){const a=C.$implicit;l.Q6J("feature",a),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,td,"url(https://placekitten.com/g/"+a.properties.iconSize.join("/")+"/)",a.properties.iconSize[0]+"px",a.properties.iconSize[1]+"px"))}}const id=function(){return[5]},rd=function(d,C){return[d,C]};let od=(()=>{class d{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(a){alert(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,nd,2,6,"mgl-marker",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,id))("center",l.WLB(6,rd,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",y.geojson.features))},directives:[_t,ur,Oe.sg,ii,Oe.PC],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),d})();const sd=function(){return[3]},ad=function(d){return[d,39]};let ug=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,sd))("center",l.VKq(5,ad,-77.38)))},directives:[_t,ur],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const dg=function(){return[9]},hg=function(d){return[d,40]};let pg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,dg))("center",l.VKq(5,hg,-74.5)))},directives:[_t,ur],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const fg=["*",[["mat-card-footer"]]],mg=["*","mat-card-footer"];let Uy=(()=>{class d{constructor(a){this._animationMode=a}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(qe.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("_mat-animation-noopable","NoopAnimations"===y._animationMode)},exportAs:["matCard"],ngContentSelectors:mg,decls:2,vars:0,template:function(a,y){1&a&&(l.F$t(fg),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),d})(),qf=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.BQ],Ti.BQ]}),d})();function jy(d,C){if(1&d&&(l.TgZ(0,"mgl-control",3),l.TgZ(1,"mat-card"),l.TgZ(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA(),l.qZA(),l.qZA()),2&d){const a=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",a.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",a.coordinates[1],"")}}const Sb=function(){return[2]},Hy=function(){return[0,0]};let Tb=(()=>{class d{constructor(){this.color="#3887be"}onDragEnd(a){this.coordinates=a.getLngLat().toArray()}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(pe){return y.onDragEnd(pe)}),l.qZA(),l.YNc(2,jy,6,2,"mgl-control",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Sb))("center",l.DdM(8,Hy)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,Hy))("draggable",!0),l.xp6(1),l.Q6J("ngIf",y.coordinates))},directives:[_t,ur,ii,Oe.O5,jt,Uy],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Gy=function(){return[13]},_g=function(){return[11.255,43.77]};let Ab=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Gy))("center",l.DdM(5,_g)))},directives:[_t,ur,jt,gn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const $y=function(){return[15]},ld=function(d){return[d,37.830348]},Zy=function(){return{}},yg=function(d){return[d,37.83381888486939]},Wy=function(d){return[d,37.83317489144141]},vg=function(d){return[d,37.83270036637107]},Ap=function(d){return[d,37.832056363179625]},qy=function(d){return[d,37.83114119107971]},bg=function(d){return[d,37.83049717427869]},Yy=function(d){return[d,37.829920943955045]},Ky=function(d){return[d,37.82954808664175]},Jy=function(d){return[d,37.82944639795659]},Xy=function(d){return[d,37.82880236636284]},Qy=function(d){return[d,37.82931081282506]},xg=function(d){return[d,37.83080223556934]},ev=function(d){return[d,37.83168351665737]},wg=function(d){return[d,37.832158048267786]},Cg=function(d){return[d,37.83297152392784]},Yf=function(d){return[d,37.83263257682617]},Ib=function(d){return[d,37.832937629287755]},Kf=function(d){return[d,37.832429207817725]},tv=function(d){return[d,37.832564787218985]},Pb=function(d){return[d,37.83337825839438]},mh=function(d){return[d,37.83368330777276]},Eg=function(d,C,a,y,Z,pe,Qe,Wt,En,ti,gi,li,Qi,Qr,mo,ao,lo,Wo,ua,Dl,Ml){return[d,C,a,y,Z,pe,Qe,Wt,En,ti,gi,li,Qi,Qr,mo,ao,lo,Wo,ua,Dl,Ml]},Jf=function(d){return{type:"LineString",coordinates:d}},Xf=function(d,C){return{type:"Feature",properties:d,geometry:C}},nv=function(d){return{type:"geojson",data:d}},Qf=function(){return{"line-join":"round","line-cap":"round"}},em=function(){return{"line-color":"#888","line-width":8}};let Dg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,$y))("center",l.VKq(8,ld,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,nv,l.WLB(77,Xf,l.DdM(10,Zy),l.VKq(75,Jf,l.rFY(53,Eg,[l.VKq(11,yg,-122.48369693756104),l.VKq(13,Wy,-122.48348236083984),l.VKq(15,vg,-122.48339653015138),l.VKq(17,Ap,-122.48356819152832),l.VKq(19,qy,-122.48404026031496),l.VKq(21,bg,-122.48404026031496),l.VKq(23,Yy,-122.48348236083984),l.VKq(25,Ky,-122.48356819152832),l.VKq(27,Jy,-122.48507022857666),l.VKq(29,Xy,-122.48610019683838),l.VKq(31,Qy,-122.48695850372314),l.VKq(33,xg,-122.48700141906738),l.VKq(35,ev,-122.48751640319824),l.VKq(37,wg,-122.48803138732912),l.VKq(39,Cg,-122.48888969421387),l.VKq(41,Yf,-122.48987674713133),l.VKq(43,Ib,-122.49043464660643),l.VKq(45,Kf,-122.49125003814696),l.VKq(47,tv,-122.49163627624512),l.VKq(49,Pb,-122.49223709106445),l.VKq(51,mh,-122.49378204345702)])))))("layout",l.DdM(82,Qf))("paint",l.DdM(83,em)))},directives:[_t,ur,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function Ob(d,C){if(1&d&&l._UZ(0,"mgl-layer",5),2&d){const a=C.$implicit;l.Q6J("id",a.id)("type",a.type)("filter",a.filter)("paint",a.paint)}}const iv=function(){return["!=","cluster",!0]},tm=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function nm(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,Ob,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",a.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,iv))("paint",l.DdM(8,tm))}}const Mg=function(){return[3]},Sg=function(d){return[d,40.66995747013945]};let im=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){this.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19));const a=[[0,"green"],[20,"orange"],[200,"red"]];this.clusterLayers=a.map((y,Z)=>({type:"circle",id:`cluster-${Z}`,paint:{"circle-color":y[1],"circle-radius":70,"circle-blur":1},filter:Z===a.length-1?[">=","point_count",y[0]]:["all",[">=","point_count",y[0]],["<","point_count",a[Z+1][0]]]}))})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,nm,4,9,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Mg))("center",l.VKq(6,Sg,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:[_t,ur,Oe.O5,st,Oe.sg,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Tg=function(){return[2]},Ag=function(d){return[d,37.830348]},rm=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},om=function(){return{"line-color":"#627BC1","line-width":2}},rv=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let Ig=(()=>{class d{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(a){this.hoverFilter=["==","name",a.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(pe){return y.activateHoverOn(pe)})("layerMouseLeave",function(){return y.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3),l._UZ(4,"mgl-layer",4),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Tg))("center",l.VKq(9,Ag,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,rm)),l.xp6(1),l.Q6J("paint",l.DdM(12,om)),l.xp6(1),l.Q6J("paint",l.DdM(13,rv))("filter",y.hoverFilter))},directives:[_t,ur,st,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Pg=function(){return[9]},sm=function(d){return[d,40]};let Og=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Pg))("center",l.VKq(6,sm,-74.5))("interactive",!1))},directives:[_t,ur],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const ov=function(){return[2.9]},kg=function(){return[16.05,48]};let Rg=(()=>{class d{changeLangTo(a){this.map.setLayoutProperty("country_1","text-field","{name:"+a+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+a+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+a+"}")}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.map=pe}),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",1),l.NdJ("click",function(){return y.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return y.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return y.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return y.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,ov))("center",l.DdM(5,kg)))},directives:[_t,ur,jt,lc.lW],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function Fg(d,C){if(1&d&&l._UZ(0,"mgl-geojson-source",3),2&d){const a=l.oxw();l.Q6J("data",a.data)}}const am=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function Lg(d,C){1&d&&l._UZ(0,"mgl-layer",4),2&d&&l.Q6J("paint",l.DdM(1,am))}let Ng=(()=>{class d{constructor(){this.zoom=[0]}ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const a=yield V.e(330).then(V.t.bind(V,3330,19)),y=a.features[0].geometry.coordinates;a.features[0].geometry.coordinates=[y[0]],this.data=a,this.center=y[0],this.zoom=[14],this.pitch=30;let Z=0;this.timer=window.setInterval(()=>{Z<y.length?(this.center=y[Z],a.features[0].geometry.coordinates.push(y[Z]),this.data=Object.assign({},this.data),Z++):window.clearInterval(this.timer)},10)})}ngOnDestroy(){window.clearInterval(this.timer)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Fg,1,1,"mgl-geojson-source",1),l.YNc(2,Lg,1,2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",y.zoom)("center",y.center)("centerWithPanTo",!0)("pitch",y.pitch),l.xp6(1),l.Q6J("ngIf",y.data),l.xp6(1),l.Q6J("ngIf",y.data))},directives:[_t,ur,Oe.O5,st,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();var Bg=V(4986),zg=V(5963);const Ug=function(){return[14]},jg=function(){return{"raster-fade-duration":0}};let Hg=(()=>{class d{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const y=(yield V.e(330).then(V.t.bind(V,3330,19))).features[0].geometry.coordinates,Z=y.map(Qe=>this.makeRectangle(Qe));this.center=y[0],this.coordinates=Z[0];let pe=0;this.sub=function Vg(d=0,C=Bg.z){return d<0&&(d=0),(0,zg.H)(d,d,C)}(250).subscribe(()=>{this.url=Math.random()<.5?"assets/red.png":"assets/blue.png",this.coordinates=Z[pe],pe=(pe+1)%Z.length})})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([a,y]){return[[a,y],[a+this.size,y],[a+this.size,y-this.size],[a,y-this.size]]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",y.center)("zoom",l.DdM(7,Ug)),l.xp6(1),l.Q6J("url",y.url)("coordinates",y.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,jg)))},directives:[_t,ur,Ii,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const kb=function(){return{enableHighAccuracy:!0}};let sv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,kb))("trackUserLocation",!0))},directives:[_t,ur,jt,zn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Gg=function(d){return[d]},$g=function(){return[17]},av=function(){return[4.577979,51.038189]},Cs=function(){return[4.577979,51.03816]};let Zg=(()=>{class d{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let a=0;setInterval(()=>{a+=.01,1===a&&(a=0),this.pitch=45+15*Math.cos(a),this.bearing=20*Math.sin(a)-103},20)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.TgZ(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4),l._UZ(5,"polygon",5),l._UZ(6,"polygon",6),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Gg,y.pitch))("bearing",l.VKq(10,Gg,y.bearing))("zoom",l.DdM(12,$g))("center",l.DdM(13,av)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,Cs)))},directives:[_t,ur,ii],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),d})();const lv=function(){return[9]},cv=function(d){return[d,40]};let Wg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,lv))("center",l.VKq(5,cv,-74.5)))},directives:[_t,ur,jt,Jn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();var qg=V(4107),Ip=V(9776),Yg=V(9841),cd=V(7272),uv=V(8306),dv=V(5684);const Kg=new Set;let uu,Rb=(()=>{class d{constructor(a){this._platform=a,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cm}matchMedia(a){return(this._platform.WEBKIT||this._platform.BLINK)&&function lm(d){if(!Kg.has(d))try{uu||(uu=document.createElement("style"),uu.setAttribute("type","text/css"),document.head.appendChild(uu)),uu.sheet&&(uu.sheet.insertRule(`@media ${d} {body{ }}`,0),Kg.add(d))}catch(C){console.error(C)}}(a),this._matchMedia(a)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(oe.t4))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function cm(d){return{matches:"all"===d||""===d,media:d,addListener:()=>{},removeListener:()=>{}}}let wl=(()=>{class d{constructor(a,y){this._mediaMatcher=a,this._zone=y,this._queries=new Map,this._destroySubject=new He.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(a){return Jg((0,Wi.Eq)(a)).some(Z=>this._registerQuery(Z).mql.matches)}observe(a){const Z=Jg((0,Wi.Eq)(a)).map(Qe=>this._registerQuery(Qe).observable);let pe=(0,Yg.a)(Z);return pe=(0,cd.z)(pe.pipe((0,zt.q)(1)),pe.pipe((0,dv.T)(1),(0,tn.b)(0))),pe.pipe((0,Tt.U)(Qe=>{const Wt={matches:!1,breakpoints:{}};return Qe.forEach(({matches:En,query:ti})=>{Wt.matches=Wt.matches||En,Wt.breakpoints[ti]=En}),Wt}))}_registerQuery(a){if(this._queries.has(a))return this._queries.get(a);const y=this._mediaMatcher.matchMedia(a),pe={observable:new uv.y(Qe=>{const Wt=En=>this._zone.run(()=>Qe.next(En));return y.addListener(Wt),()=>{y.removeListener(Wt)}}).pipe((0,Ct.O)(y),(0,Tt.U)(({matches:Qe})=>({query:a,matches:Qe})),(0,nn.R)(this._destroySubject)),mql:y};return this._queries.set(a,pe),pe}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(Rb),l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function Jg(d){return d.map(C=>C.split(",")).reduce((C,a)=>C.concat(a)).map(C=>C.trim())}var Gl=V(7429);const Cl={tooltipState:(0,we.X$)("state",[(0,we.SB)("initial, void, hidden",(0,we.oB)({opacity:0,transform:"scale(0)"})),(0,we.SB)("visible",(0,we.oB)({transform:"scale(1)"})),(0,we.eR)("* => visible",(0,we.jt)("200ms cubic-bezier(0, 0, 0.2, 1)",(0,we.F4)([(0,we.oB)({opacity:0,transform:"scale(0)",offset:0}),(0,we.oB)({opacity:.5,transform:"scale(0.99)",offset:.5}),(0,we.oB)({opacity:1,transform:"scale(1)",offset:1})]))),(0,we.eR)("* => hidden",(0,we.jt)("100ms cubic-bezier(0, 0, 0.2, 1)",(0,we.oB)({opacity:0})))])},um="tooltip-panel",Qg=(0,oe.i$)({passive:!0}),e_=new l.OlP("mat-tooltip-scroll-strategy"),gh={provide:e_,deps:[Ip.aV],useFactory:function dm(d){return()=>d.scrollStrategies.reposition({scrollThrottle:20})}},mv=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function t_(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let gv=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt,En,ti,gi,li,Qi,Qr){this._overlay=a,this._elementRef=y,this._scrollDispatcher=Z,this._viewContainerRef=pe,this._ngZone=Qe,this._platform=Wt,this._ariaDescriber=En,this._focusMonitor=ti,this._dir=li,this._defaultOptions=Qi,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new He.x,this._scrollStrategy=gi,this._document=Qr,Qi&&(Qi.position&&(this.position=Qi.position),Qi.touchGestures&&(this.touchGestures=Qi.touchGestures)),li.change.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(a){var y;a!==this._position&&(this._position=a,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(y=this._tooltipInstance)||void 0===y||y.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Wi.Ig)(a),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(a){this._showDelay=(0,Wi.su)(a)}get hideDelay(){return this._hideDelay}set hideDelay(a){this._hideDelay=(0,Wi.su)(a)}get message(){return this._message}set message(a){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=a?String(a).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(a){this._tooltipClass=a,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,nn.R)(this._destroyed)).subscribe(a=>{a?"keyboard"===a&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const a=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([y,Z])=>{a.removeEventListener(y,Z,Qg)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(a,this.message,"tooltip"),this._focusMonitor.stopMonitoring(a)}show(a=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const y=this._createOverlay();this._detach(),this._portal=this._portal||new Gl.C5(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=y.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(a)}hide(a=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(a)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const a=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),y=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(a);return y.positionChanges.pipe((0,nn.R)(this._destroyed)).subscribe(Z=>{this._updateCurrentPositionClass(Z.connectionPair),this._tooltipInstance&&Z.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:y,panelClass:`${this._cssClassPrefix}-${um}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,nn.R)(this._destroyed)).subscribe(()=>{var Z;return null===(Z=this._tooltipInstance)||void 0===Z?void 0:Z._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe((0,nn.R)(this._destroyed)).subscribe(Z=>{this._isTooltipVisible()&&Z.keyCode===me.hY&&!(0,me.Vb)(Z)&&(Z.preventDefault(),Z.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(a){const y=a.getConfig().positionStrategy,Z=this._getOrigin(),pe=this._getOverlayPosition();y.withPositions([this._addOffset(Object.assign(Object.assign({},Z.main),pe.main)),this._addOffset(Object.assign(Object.assign({},Z.fallback),pe.fallback))])}_addOffset(a){return a}_getOrigin(){const a=!this._dir||"ltr"==this._dir.value,y=this.position;let Z;"above"==y||"below"==y?Z={originX:"center",originY:"above"==y?"top":"bottom"}:"before"==y||"left"==y&&a||"right"==y&&!a?Z={originX:"start",originY:"center"}:("after"==y||"right"==y&&a||"left"==y&&!a)&&(Z={originX:"end",originY:"center"});const{x:pe,y:Qe}=this._invertPosition(Z.originX,Z.originY);return{main:Z,fallback:{originX:pe,originY:Qe}}}_getOverlayPosition(){const a=!this._dir||"ltr"==this._dir.value,y=this.position;let Z;"above"==y?Z={overlayX:"center",overlayY:"bottom"}:"below"==y?Z={overlayX:"center",overlayY:"top"}:"before"==y||"left"==y&&a||"right"==y&&!a?Z={overlayX:"end",overlayY:"center"}:("after"==y||"right"==y&&a||"left"==y&&!a)&&(Z={overlayX:"start",overlayY:"center"});const{x:pe,y:Qe}=this._invertPosition(Z.overlayX,Z.overlayY);return{main:Z,fallback:{overlayX:pe,overlayY:Qe}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,zt.q)(1),(0,nn.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(a){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=a,this._tooltipInstance._markForCheck())}_invertPosition(a,y){return"above"===this.position||"below"===this.position?"top"===y?y="bottom":"bottom"===y&&(y="top"):"end"===a?a="start":"start"===a&&(a="end"),{x:a,y}}_updateCurrentPositionClass(a){const{overlayY:y,originX:Z,originY:pe}=a;let Qe;if(Qe="center"===y?this._dir&&"rtl"===this._dir.value?"end"===Z?"left":"right":"start"===Z?"left":"right":"bottom"===y&&"top"===pe?"above":"below",Qe!==this._currentPosition){const Wt=this._overlayRef;if(Wt){const En=`${this._cssClassPrefix}-${um}-`;Wt.removePanelClass(En+this._currentPosition),Wt.addPanelClass(En+Qe)}this._currentPosition=Qe}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const a=[];if(this._platformSupportsMouseEvents())a.push(["mouseleave",()=>this.hide()],["wheel",y=>this._wheelListener(y)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const y=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};a.push(["touchend",y],["touchcancel",y])}this._addListeners(a),this._passiveListeners.push(...a)}_addListeners(a){a.forEach(([y,Z])=>{this._elementRef.nativeElement.addEventListener(y,Z,Qg)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(a){if(this._isTooltipVisible()){const y=this._document.elementFromPoint(a.clientX,a.clientY),Z=this._elementRef.nativeElement;y!==Z&&!Z.contains(y)&&this.hide()}}_disableNativeGesturesIfNecessary(){const a=this.touchGestures;if("off"!==a){const y=this._elementRef.nativeElement,Z=y.style;("on"===a||"INPUT"!==y.nodeName&&"TEXTAREA"!==y.nodeName)&&(Z.userSelect=Z.msUserSelect=Z.webkitUserSelect=Z.MozUserSelect="none"),("on"===a||!y.draggable)&&(Z.webkitUserDrag="none"),Z.touchAction="none",Z.webkitTapHighlightColor="transparent"}}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),d})(),n_=(()=>{class d extends gv{constructor(a,y,Z,pe,Qe,Wt,En,ti,gi,li,Qi,Qr){super(a,y,Z,pe,Qe,Wt,En,ti,gi,li,Qi,Qr),this._tooltipComponent=Pp}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(Ip.aV),l.Y36(l.SBq),l.Y36(ae.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(oe.t4),l.Y36(sl.$s),l.Y36(sl.tE),l.Y36(e_),l.Y36(Je.Is,8),l.Y36(mv,8),l.Y36(Oe.K0))},d.\u0275dir=l.lG2({type:d,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),d})(),i_=(()=>{class d{constructor(a){this._changeDetectorRef=a,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new He.x}show(a){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},a)}hide(a){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},a)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(a){const y=a.toState;"hidden"===y&&!this.isVisible()&&this._onHide.next(),("visible"===y||"hidden"===y)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO))},d.\u0275dir=l.lG2({type:d}),d})(),Pp=(()=>{class d extends i_{constructor(a,y){super(a),this._breakpointObserver=y,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36(wl))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(a,y){2&a&&l.Udp("zoom","visible"===y._visibility?1:null)},features:[l.qOj],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(a,y){if(1&a&&(l.TgZ(0,"div",0),l.NdJ("@state.start",function(){return y._animationStart()})("@state.done",function(pe){return y._animationDone(pe)}),l.ALo(1,"async"),l._uU(2),l.qZA()),2&a){let Z;l.ekj("mat-tooltip-handset",null==(Z=l.lcZ(1,5,y._isHandset))?null:Z.matches),l.Q6J("ngClass",y.tooltipClass)("@state",y._visibility),l.xp6(2),l.Oqu(y.message)}},directives:[Oe.mk],pipes:[Oe.Ov],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[Cl.tooltipState]},changeDetection:0}),d})(),_v=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[gh],imports:[[sl.rt,Oe.ez,Ip.U8,Ti.BQ],Ti.BQ,ae.ZD]}),d})();function r_(d,C){if(1&d&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.Q6J("value",a),l.xp6(1),l.hij(" ",a," ")}}function o_(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"mat-form-field",16),l.TgZ(1,"mat-select",17),l.NdJ("selectionChange",function(Z){return l.CHM(a),l.oxw(2)._changePageSize(Z.value)}),l.YNc(2,r_,2,2,"mat-option",18),l.qZA(),l.qZA()}if(2&d){const a=l.oxw(2);l.Q6J("appearance",a._formFieldAppearance)("color",a.color),l.xp6(1),l.Q6J("value",a.pageSize)("disabled",a.disabled)("aria-label",a._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",a._displayedPageSizeOptions)}}function hm(d,C){if(1&d&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&d){const a=l.oxw(2);l.xp6(1),l.Oqu(a.pageSize)}}function Op(d,C){if(1&d&&(l.TgZ(0,"div",12),l.TgZ(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,o_,3,6,"mat-form-field",14),l.YNc(4,hm,2,1,"div",15),l.qZA()),2&d){const a=l.oxw();l.xp6(2),l.hij(" ",a._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",a._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",a._displayedPageSizeOptions.length<=1)}}function s_(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){return l.CHM(a),l.oxw().firstPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA(),l.qZA()}if(2&d){const a=l.oxw();l.Q6J("matTooltip",a._intl.firstPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),l.uIk("aria-label",a._intl.firstPageLabel)}}function a_(d,C){if(1&d){const a=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){return l.CHM(a),l.oxw().lastPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA(),l.qZA()}if(2&d){const a=l.oxw();l.Q6J("matTooltip",a._intl.lastPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),l.uIk("aria-label",a._intl.lastPageLabel)}}let _h=(()=>{class d{constructor(){this.changes=new He.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(a,y,Z)=>{if(0==Z||0==y)return`0 of ${Z}`;const pe=a*y;return`${pe+1} \u2013 ${pe<(Z=Math.max(Z,0))?Math.min(pe+y,Z):pe+y} of ${Z}`}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const c_={provide:_h,deps:[[new l.FiY,new l.tp0,_h]],useFactory:function l_(d){return d||new _h}},d_=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),h_=(0,Ti.Id)((0,Ti.dB)(class{}));let vv=(()=>{class d extends h_{constructor(a,y,Z){if(super(),this._intl=a,this._changeDetectorRef=y,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new l.vpe,this._intlChanges=a.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),Z){const{pageSize:pe,pageSizeOptions:Qe,hidePageSize:Wt,showFirstLastButtons:En}=Z;null!=pe&&(this._pageSize=pe),null!=Qe&&(this._pageSizeOptions=Qe),null!=Wt&&(this._hidePageSize=Wt),null!=En&&(this._showFirstLastButtons=En)}}get pageIndex(){return this._pageIndex}set pageIndex(a){this._pageIndex=Math.max((0,Wi.su)(a),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(a){this._length=(0,Wi.su)(a),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(a){this._pageSize=Math.max((0,Wi.su)(a),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(a){this._pageSizeOptions=(a||[]).map(y=>(0,Wi.su)(y)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(a){this._hidePageSize=(0,Wi.Ig)(a)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(a){this._showFirstLastButtons=(0,Wi.Ig)(a)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(a)}previousPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(a)}firstPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=0,this._emitPageEvent(a)}lastPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(a)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const a=this.getNumberOfPages()-1;return this.pageIndex<a&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(a){const Z=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/a)||0,this.pageSize=a,this._emitPageEvent(Z)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((a,y)=>a-y),this._changeDetectorRef.markForCheck())}_emitPageEvent(a){this.page.emit({previousPageIndex:a,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[l.qOj]}),d})(),p_=(()=>{class d extends vv{constructor(a,y,Z){super(a,y,Z),Z&&null!=Z.formFieldAppearance&&(this._formFieldAppearance=Z.formFieldAppearance)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(_h),l.Y36(l.sBO),l.Y36(d_,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(a,y){1&a&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.YNc(2,Op,5,3,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,s_,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return y.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return y.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA(),l.qZA(),l.YNc(13,a_,3,5,"button",11),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.xp6(2),l.Q6J("ngIf",!y.hidePageSize),l.xp6(3),l.hij(" ",y._intl.getRangeLabel(y.pageIndex,y.pageSize,y.length)," "),l.xp6(1),l.Q6J("ngIf",y.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",y._intl.previousPageLabel)("matTooltipDisabled",y._previousButtonsDisabled())("matTooltipPosition","above")("disabled",y._previousButtonsDisabled()),l.uIk("aria-label",y._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",y._intl.nextPageLabel)("matTooltipDisabled",y._nextButtonsDisabled())("matTooltipPosition","above")("disabled",y._nextButtonsDisabled()),l.uIk("aria-label",y._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",y.showFirstLastButtons))},directives:[Br.KE,qg.gD,Ti.ey,lc.lW,Oe.O5,Oe.sg,n_],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),d})(),bv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[c_],imports:[[Oe.ez,lc.ot,qg.LD,_v,Ti.BQ]]}),d})();function xv(d,C){if(1&d&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.Q6J("title",a.properties["Secondary ID"]),l.xp6(1),l.hij(" ",a.properties["Primary ID"]," ")}}function wv(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(Z){const Qe=l.CHM(a).$implicit;return l.oxw(2).selectCluster(Z,Qe)}),l._uU(1),l.qZA()}if(2&d){const a=C.$implicit;l.xp6(1),l.hij(" ",null==a.properties?null:a.properties.point_count," ")}}function Cv(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&d){l.oxw();const a=l.MAs(2),y=l.oxw();l.Q6J("feature",y.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",a)("selectedCluster",y.selectedCluster)}}function Ev(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,xv,2,2,"ng-template",5),l.YNc(5,wv,2,1,"ng-template",6),l.qZA(),l.YNc(6,Cv,2,3,"mgl-popup",7),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",a.selectedCluster)}}const Dv=function(){return[3]},Mv=function(d){return[d,40.66995747013945]};function Sv(d,C){if(1&d&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.xp6(1),l.hij(" ",a.properties["Primary ID"]," ")}}let Tv=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const a=yield V.e(45).then(V.t.bind(V,3045,19));setInterval(()=>{a.features.length&&a.features.pop(),this.earthquakes=Object.assign({},a)},500)})}selectCluster(a,y){a.stopPropagation(),this.selectedCluster={geometry:y.geometry,properties:y.properties}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Ev,7,5,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Dv))("center",l.VKq(6,Mv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:function(){return[_t,ur,Oe.O5,st,tt,B,ie,on,Av]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),d})(),Av=(()=>{class d{ngOnChanges(a){this.changePage(),a.selectedCluster&&!a.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(a){return(0,he.mG)(this,void 0,void 0,function*(){let y=0;a&&(y=5*a.pageIndex),this.leaves=yield this.clusterComponent.getClusterLeaves(this.selectedCluster.properties.cluster_id,5,y)})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-cluster-popup"]],viewQuery:function(a,y){if(1&a&&l.Gf(p_,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.paginator=Z.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(a,y){1&a&&(l.TgZ(0,"mat-list"),l.YNc(1,Sv,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(pe){return y.changePage(pe)}),l.qZA()),2&a&&(l.xp6(1),l.Q6J("ngForOf",y.leaves),l.xp6(1),l.Q6J("length",null==y.selectedCluster.properties?null:y.selectedCluster.properties.point_count)("pageSize",5))},directives:[wp,Oe.sg,Cp,p_],encapsulation:2}),d})(),Iv=(()=>{class d{alert(a){alert(a)}onGeolocate(a){console.log("geolocate",a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:9,vars:2,consts:[["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",0),l.NdJ("click",function(){return y.alert("Hello")}),l._uU(3," Hello "),l.qZA(),l.qZA(),l._UZ(4,"mgl-control",1),l._UZ(5,"mgl-control",2),l.TgZ(6,"mgl-control",3),l.NdJ("geolocate",function(pe){return y.onGeolocate(pe)}),l.qZA(),l._UZ(7,"mgl-control",4),l._UZ(8,"mgl-control",5),l.qZA()),2&a&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},directives:[_t,ur,jt,lc.lW,Pi,gn,zn,Jn,er],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Pv=function(){return[5]},kp=function(d,C){return[d,C]};let Ov=(()=>{class d{alert(a){alert(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return y.alert("Foo")}),l.qZA(),l.qZA(),l.TgZ(3,"mgl-marker",1),l.TgZ(4,"div",3),l.NdJ("click",function(){return y.alert("Bar")}),l.qZA(),l.qZA(),l.TgZ(5,"mgl-marker",1),l.TgZ(6,"div",4),l.NdJ("click",function(){return y.alert("Baz")}),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Pv))("center",l.WLB(8,kp,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,kp,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,kp,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,kp,-63.29223632812499,-18.28151823530889)))},directives:[_t,ur,ii],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),d})();const kv=function(){return[2]},pm=function(){return[0,0]},f_=function(d){return{type:"Point",coordinates:d}};let m_=(()=>{class d{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(a){console.log("onDragStart",a)}onDragEnd(a){console.log("onDragEnd",a)}onDrag(a){console.log("onDrag",a),this.coordinates=a.lngLat.toArray()}changeColor(a){this.layerPaint=Object.assign(Object.assign({},this.layerPaint),{"circle-color":a})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(a,y){if(1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-feature",2),l.NdJ("featureDragStart",function(pe){return y.onDragStart(pe)})("featureDragEnd",function(pe){return y.onDragEnd(pe)})("featureDrag",function(pe){return y.onDrag(pe)}),l.qZA(),l.qZA(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return y.changeColor("#3bb2d0")})("layerMouseLeave",function(){return y.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5),l.TgZ(6,"mat-card"),l.TgZ(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&a){const Z=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,kv))("center",l.DdM(10,pm)),l.xp6(2),l.Q6J("geometry",l.VKq(12,f_,l.DdM(11,pm)))("mglDraggable",Z),l.xp6(1),l.Q6J("paint",y.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",y.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",y.coordinates[1],"")}},directives:[_t,ur,st,yt,ct,vn,jt,Uy],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const g_=function(){return[15]},__=function(d){return[d,37.830348]},y_=function(){return{"line-join":"round","line-cap":"round"}},v_=function(){return{"line-color":"#888","line-width":8}};let b_=(()=>{class d{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,g_))("center",l.VKq(8,__,-122.486052)),l.xp6(2),l.Q6J("geometry",y.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,y_))("paint",l.DdM(11,v_)))},directives:[_t,ur,st,yt,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),x_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&a&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},directives:[_t,ur,jt,er],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function fm(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&d){const a=l.oxw();l.Q6J("lngLat",a.selectedLngLat),l.xp6(1),l.Q6J("innerHTML",null==a.selectedElement?null:a.selectedElement.name,l.oJD)}}const mm=function(){return[3]},du=function(d){return[d,38.907]},Fv=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},ud=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let Lb=(()=>{class d{onClick(a){this.selectedLngLat=a.lngLat,this.selectedElement=a.features[0].properties}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat",4,"ngIf"],[3,"lngLat"],[3,"innerHTML"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""})("layerClick",function(pe){return y.onClick(pe)}),l.qZA(),l.YNc(2,fm,2,2,"mgl-popup",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,mm))("center",l.VKq(9,du,-100.04))("cursorStyle",y.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,Fv))("paint",l.DdM(12,ud)),l.xp6(1),l.Q6J("ngIf",y.selectedLngLat))},directives:[_t,ur,vn,Oe.O5,on],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function gm(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&d){const a=l.oxw();l.Q6J("feature",a.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==a.selectedPoint.properties?null:a.selectedPoint.properties.description,l.oJD)}}const Nb=function(){return[11.15]},w_=function(d){return[d,38.907]},C_=function(){return["get","icon"]},Bb=function(d){return{"icon-image":d,"icon-allow-overlap":!0}};let Gi=(()=>{class d{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(a){this.selectedPoint=a.features[0]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(pe){return y.onClick(pe)})("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""}),l.qZA(),l.YNc(3,gm,2,2,"mgl-popup",3),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Nb))("center",l.VKq(9,w_,-77.04))("cursorStyle",y.cursorStyle),l.xp6(1),l.Q6J("data",y.points),l.xp6(1),l.Q6J("layout",l.VKq(12,Bb,l.DdM(11,C_))),l.xp6(1),l.Q6J("ngIf",y.selectedPoint))},directives:[_t,ur,st,vn,Oe.O5,on],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Lv=function(){return[3]},E_=function(d){return[d,37.8]};let Nv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-popup",1),l.TgZ(2,"h1"),l._uU(3,"Hello world !"),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Lv))("center",l.VKq(8,E_,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,E_,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},directives:[_t,ur,on],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),d})();const Bv=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Fp=function(d){return{satellite:d}},Lp=function(){return{visibility:"visible"}},Zo=function(){return{"raster-opacity":1}},zb=function(d,C){return{id:"satellite",layout:d,minzoom:0,paint:C,"raster-opacity":1,source:"satellite",type:"raster"}},D_=function(d){return[d]},zv=function(d,C){return{version:8,sources:d,layers:C}},Vv=function(){return[9]},M_=function(){return[137.9150899566626,36.25956997955441]};let S_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn(l.WLB(14,zv,l.VKq(5,Fp,l.DdM(4,Bv)),l.VKq(12,D_,l.WLB(9,zb,l.DdM(7,Lp),l.DdM(8,Zo))))),l.Q6J("zoom",l.DdM(17,Vv))("center",l.DdM(18,M_)))},directives:[_t,ur],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const T_=function(){return[15]},_m=function(d){return[d,38.8895]},jv=function(){return{"background-image":"url(https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let Hv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(a,y){if(1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA(),l.qZA()),2&a){const Z=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,T_))("center",l.VKq(8,_m,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,_m,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,jv)),l.xp6(1),l.Q6J("marker",Z)}},directives:[_t,ur,ii,Oe.PC,on],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const yh=["input"],Gv=function(d){return{enterDuration:d}},$v=["*"],Zv=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function Np(){return{color:"accent"}}});let ym=0;const A_={provide:es.JU,useExisting:(0,l.Gpc)(()=>dd),multi:!0};class vm{constructor(C,a){this.source=C,this.value=a}}const I_=new l.OlP("MatRadioGroup");let vh=(()=>{class d{constructor(a){this._changeDetector=a,this._value=null,this._name="mat-radio-group-"+ym++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(a){this._name=a,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(a){this._labelPosition="before"===a?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(a){this._selected=a,this.value=a?a.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Wi.Ig)(a),this._markRadiosForCheck()}get required(){return this._required}set required(a){this._required=(0,Wi.Ig)(a),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(a=>{a.name=this.name,a._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(y=>{y.checked=this.value===y.value,y.checked&&(this._selected=y)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new vm(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(a=>a._markForCheck())}writeValue(a){this.value=a,this._changeDetector.markForCheck()}registerOnChange(a){this._controlValueAccessorChangeFn=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a,this._changeDetector.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO))},d.\u0275dir=l.lG2({type:d,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),d})(),dd=(()=>{class d extends vh{}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275dir=l.lG2({type:d,selectors:[["mat-radio-group"]],contentQueries:function(a,y,Z){if(1&a&&l.Suo(Z,bm,5),2&a){let pe;l.iGM(pe=l.CRH())&&(y._radios=pe)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([A_,{provide:I_,useExisting:d}]),l.qOj]}),d})();class Wv{constructor(C){this._elementRef=C}}const qv=(0,Ti.Kr)((0,Ti.sb)(Wv));let Yv=(()=>{class d extends qv{constructor(a,y,Z,pe,Qe,Wt,En,ti){super(y),this._changeDetector=Z,this._focusMonitor=pe,this._radioDispatcher=Qe,this._providerOverride=En,this._uniqueId="mat-radio-"+ ++ym,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=a,this._noopAnimations="NoopAnimations"===Wt,ti&&(this.tabIndex=(0,Wi.su)(ti,0)),this._removeUniqueSelectionListener=Qe.listen((gi,li)=>{gi!==this.id&&li===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(a){const y=(0,Wi.Ig)(a);this._checked!==y&&(this._checked=y,y&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!y&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),y&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===a),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(a){this._labelPosition=a}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(a){this._setDisabled((0,Wi.Ig)(a))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(a){this._required=(0,Wi.Ig)(a)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(a){this._color=a}get inputId(){return`${this.id||this._uniqueId}-input`}focus(a,y){y?this._focusMonitor.focusVia(this._inputElement,y,a):this._inputElement.nativeElement.focus(a)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{!a&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new vm(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(a){a.stopPropagation()}_onInputInteraction(a){if(a.stopPropagation(),!this.checked&&!this.disabled){const y=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),y&&this.radioGroup._emitChangeEvent())}}_setDisabled(a){this._disabled!==a&&(this._disabled=a,this._changeDetector.markForCheck())}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,viewQuery:function(a,y){if(1&a&&l.Gf(yh,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._inputElement=Z.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),d})(),bm=(()=>{class d extends Yv{constructor(a,y,Z,pe,Qe,Wt,En,ti){super(a,y,Z,pe,Qe,Wt,En,ti)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(I_,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(sl.tE),l.Y36(ws.A8),l.Y36(qe.Qb,8),l.Y36(Zv,8),l.$8M("tabindex"))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y._inputElement.nativeElement.focus()}),2&a&&(l.uIk("tabindex",null)("id",y.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",y.checked)("mat-radio-disabled",y.disabled)("_mat-animation-noopable",y._noopAnimations)("mat-primary","primary"===y.color)("mat-accent","accent"===y.color)("mat-warn","warn"===y.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:$v,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"label",0,1),l.TgZ(2,"span",2),l._UZ(3,"span",3),l._UZ(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(pe){return y._onInputInteraction(pe)})("click",function(pe){return y._onInputClick(pe)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA(),l.qZA(),l.TgZ(9,"span",9),l.TgZ(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA(),l.qZA()),2&a){const Z=l.MAs(1);l.uIk("for",y.inputId),l.xp6(5),l.Q6J("id",y.inputId)("checked",y.checked)("disabled",y.disabled)("tabIndex",y.tabIndex)("required",y.required),l.uIk("name",y.name)("value",y.value)("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby)("aria-describedby",y.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,Gv,y._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==y.labelPosition)}},directives:[Ti.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),d})(),P_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.si,Ti.BQ],Ti.BQ]}),d})();const O_=function(){return[13]},Kv=function(){return[4.899,52.372]};let k_=(()=>{class d{constructor(){this.layerId="basic"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(a){this.style="streets"===a?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(a,y){1&a&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(pe){return y.changeStyle(pe)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA(),l.qZA()),2&a&&(l.Akn(y.style),l.Q6J("zoom",l.DdM(5,O_))("center",l.DdM(6,Kv)),l.xp6(1),l.Q6J("ngModel",y.layerId))},directives:[_t,ur,dd,es.JJ,es.On,bm],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),d})();const Jv=["button"],Xv=["*"],Qv=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),e0=new l.OlP("MatButtonToggleGroup");let t0=0;class xm{constructor(C,a){this.source=C,this.value=a}}const n0=(0,Ti.Kr)(class{});let R_=(()=>{class d extends n0{constructor(a,y,Z,pe,Qe,Wt){super(),this._changeDetectorRef=y,this._elementRef=Z,this._focusMonitor=pe,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const En=Number(Qe);this.tabIndex=En||0===En?En:null,this.buttonToggleGroup=a,this.appearance=Wt&&Wt.appearance?Wt.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(a){this._appearance=a}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(a){const y=(0,Wi.Ig)(a);y!==this._checked&&(this._checked=y,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(a){this._disabled=(0,Wi.Ig)(a)}ngOnInit(){const a=this.buttonToggleGroup;this._isSingleSelector=a&&!a.multiple,this.id=this.id||"mat-button-toggle-"+t0++,this._isSingleSelector&&(this.name=a.name),a&&(a._isPrechecked(this)?this.checked=!0:a._isSelected(this)!==this._checked&&a._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const a=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),a&&a._isSelected(this)&&a._syncButtonToggle(this,!1,!1,!0)}focus(a){this._buttonElement.nativeElement.focus(a)}_onButtonClick(){const a=!!this._isSingleSelector||!this._checked;a!==this._checked&&(this._checked=a,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new xm(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(e0,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(sl.tE),l.$8M("tabindex"),l.Y36(Qv,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-button-toggle"]],viewQuery:function(a,y){if(1&a&&l.Gf(Jv,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._buttonElement=Z.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y.focus()}),2&a&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",y.id)("name",null),l.ekj("mat-button-toggle-standalone",!y.buttonToggleGroup)("mat-button-toggle-checked",y.checked)("mat-button-toggle-disabled",y.disabled)("mat-button-toggle-appearance-standard","standard"===y.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:Xv,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return y._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA(),l.qZA(),l._UZ(4,"span",3),l._UZ(5,"span",4)),2&a){const Z=l.MAs(1);l.Q6J("id",y.buttonId)("disabled",y.disabled||null),l.uIk("tabindex",y.disabled?-1:y.tabIndex)("aria-pressed",y.checked)("name",y.name||null)("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y.disableRipple||y.disabled)}},directives:[Ti.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),d})(),F_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.BQ,Ti.si],Ti.BQ]}),d})();const bh=function(){return[3]},r0=function(d,C){return[d,C]},s0=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},a0=function(){return{"line-color":"blue"}};let l0=(()=>{class d{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(a){this.layouts[a.value]=Object.assign(Object.assign({},this.layouts[a.value]),{visibility:"visible"===this.layouts[a.value].visibility?"none":"visible"})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1),l._UZ(2,"mgl-vector-source",2),l._UZ(3,"mgl-layer",3),l._UZ(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5),l.TgZ(6,"mat-button-toggle",6),l.NdJ("change",function(pe){return y.toggleLayer(pe)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(pe){return y.toggleLayer(pe)}),l._uU(9,"countries border"),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(10,bh))("center",l.WLB(11,r0,-71.97722138410576,-13.517379300798098)),l.xp6(1),l.Q6J("tiles",l.DdM(14,s0)),l.xp6(2),l.Q6J("layout",y.layouts.countries)("paint",l.DdM(15,a0)),l.xp6(1),l.Q6J("layout",y.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},directives:[_t,ur,zi,vn,R_],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),d})();const L_=function(){return[12]},c0=function(d){return[d,38.897]},u0=function(){return{padding:20}},hd=function(){return{"line-color":"#BF93E4","line-width":5}},d0=function(){return{"line-join":"round","line-cap":"round"}};let N_=(()=>{class d{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const a=this.source.data.features[0].geometry.coordinates;this.bounds=a.reduce((y,Z)=>y.extend(Z),new ze.LngLatBounds(a[0],a[0]))}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",1),l.NdJ("click",function(){return y.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA(),l.qZA(),l._UZ(4,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(9,L_))("center",l.VKq(10,c0,-77.0214))("fitBounds",y.bounds)("fitBoundsOptions",l.DdM(12,u0)),l.xp6(4),l.Q6J("source",y.source)("paint",l.DdM(13,hd))("layout",l.DdM(14,d0)))},directives:[_t,ur,jt,lc.lW,vn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),B_=(()=>{class d{constructor(a){this.router=a}canActivate(a){return!!km[0].children.some(y=>y.path===a.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(W.F0))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function hu(d){return d&&d.origin?d.origin:"https://stackblitz.com"}function wm(){return Math.random().toString(36).substring(7)}function pd(d){var C=[];return d&&(d.forceEmbedLayout&&C.push("embed=1"),d.clickToLoad&&C.push("ctl=1"),"string"==typeof d.openFile&&C.push("file="+d.openFile),Array.isArray(d.openFile)&&d.openFile.forEach(function(a){"string"==typeof a&&C.push("file="+a)}),"preview"!==d.view&&"editor"!==d.view||C.push("view="+d.view),"light"!==d.theme&&"dark"!==d.theme||C.push("theme="+d.theme),d.hideExplorer&&C.push("hideExplorer=1"),d.hideNavigation&&C.push("hideNavigation=1"),d.hideDevTools&&C.push("hidedevtools=1"),"number"==typeof d.devToolsHeight&&d.devToolsHeight>=0&&d.devToolsHeight<=100&&C.push("devtoolsheight="+Math.round(d.devToolsHeight))),C.length?"?"+C.join("&"):""}function xh(d,C,a){if(null===d.parentNode)throw new Error("Invalid Element");C.id=d.id,function z_(d,C){C&&(C.hasOwnProperty("height")&&(d.height=""+C.height),C.hasOwnProperty("width")&&(d.width=""+C.width)),d.height||(d.height="300"),d.width||d.setAttribute("style","width:100%;")}(C,a),d.parentNode.replaceChild(C,d)}function Cm(d){if("string"==typeof d){var C=document.getElementById(d);if(null!==C)return C}else if(d instanceof HTMLElement)return d;throw new Error("Invalid Element")}function zp(d){return d&&!1===d.newWindow?"_self":"_blank"}var V_=function(d){var C=this;this.pending={},this.port=d,this.port.onmessage=function(a){if(a.data.payload.__reqid){var y=a.data.payload.__reqid,Z=a.data.payload.__success;if(C.pending[y]){if(delete a.data.payload.__reqid,delete a.data.payload.__success,Z){var pe=0===Object.keys(a.data.payload).length&&a.data.payload.constructor===Object?null:a.data.payload;C.pending[y].resolve(pe)}else C.pending[y].reject(a.data.payload.error?a.data.type+": "+a.data.payload.error:a.data.type);delete C.pending[y]}}}};V_.prototype.request=function(d){var C=this,a=wm();return new Promise(function(y,Z){C.pending[a]={resolve:y,reject:Z},d.payload.__reqid=a,C.port.postMessage(d)})};var Vp=function(d,C){var a=this;this.rdc=new V_(d),this.preview={},Object.defineProperty(this.preview,"origin",{value:C.previewOrigin,writable:!1}),this.editor={openFile:function(y){return a.rdc.request({type:"SDK_OPEN_FILE",payload:{path:y}})}}};Vp.prototype.applyFsDiff=function(d){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:d})},Vp.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Vp.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var Up=[],Em=function(d){var C=this;this.id=wm(),this.element=d,this.pending=new Promise(function(a,y){var Z=function(ti){ti.data.action&&"SDK_INIT_SUCCESS"===ti.data.action&&ti.data.id===C.id&&(C.vm=new Vp(ti.ports[0],ti.data.payload),a(C.vm),Qe())},pe=function(){C.element.contentWindow&&C.element.contentWindow.postMessage({action:"SDK_INIT",id:C.id},"*")};function Qe(){window.clearInterval(En),window.removeEventListener("message",Z)}window.addEventListener("message",Z),pe();var Wt=0,En=window.setInterval(function(){if(C.vm)Qe();else{if(Wt>=20)return Qe(),y("Timeout: Unable to establish a connection with the StackBlitz VM"),void Up.forEach(function(ti,gi){ti.id===C.id&&Up.splice(gi,1)});Wt++,pe()}},500)}),Up.push(this)},Dm=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function fd(d,C){var a=document.createElement("input");return a.type="hidden",a.name=d,a.value=C,a}function U_(d){-1===Dm.indexOf(d.template)&&console.warn("Unsupported project template, must be one of: "+Dm.join(", "));var C=document.createElement("form");return C.method="POST",C.setAttribute("style","display:none!important;"),C.appendChild(fd("project[title]",d.title)),C.appendChild(fd("project[description]",d.description)),C.appendChild(fd("project[template]",d.template)),d.dependencies&&C.appendChild(fd("project[dependencies]",JSON.stringify(d.dependencies))),d.settings&&C.appendChild(fd("project[settings]",JSON.stringify(d.settings))),Object.keys(d.files).forEach(function(a){C.appendChild(fd("project[files]["+a+"]",d.files[a]))}),C}var jp={connect:function(d){if(!d||!d.contentWindow)return Promise.reject("Provided element is not an iframe.");var C=function(d){var C=d instanceof Element?"element":"id";return Up.find(function(y){return y[C]===d})||null}(d);return C?C.pending:new Em(d).pending},openGithubProject:function(d,C){window.open(hu(C)+"/github/"+d+pd(C),zp(C))},openProject:function(d,C){!function m0(d,C){var a=U_(d);a.action=hu(C)+"/run"+pd(C),a.target=zp(C),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}(d,C)},openProjectId:function(d,C){window.open(hu(C)+"/edit/"+d+pd(C),zp(C))},embedGithubProject:function(d,C,a){var y=Cm(d),Z=document.createElement("iframe");return Z.src=hu(a)+"/github/"+C+pd(a),xh(y,Z,a),jp.connect(Z)},embedProject:function(d,C,a){var y=Cm(d),Z=function f0(d,C){var a=U_(d);return a.action=hu(C)+"/run"+pd(C),a.id="sb","<html><head><title></title></head><body>"+a.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(C,a),pe=document.createElement("iframe");return xh(y,pe,a),pe.contentDocument&&pe.contentDocument.write(Z),jp.connect(pe)},embedProjectId:function(d,C,a){var y=Cm(d),Z=document.createElement("iframe");return Z.src=hu(a)+"/edit/"+C+pd(a),xh(y,Z,a),jp.connect(Z)}};const g0=jp;var Mm=V(4128),j_=V(9646),H_=V(2076),G_=V(6063);class _0 extends He.x{constructor(C=1/0,a=1/0,y=G_.l){super(),this._bufferSize=C,this._windowTime=a,this._timestampProvider=y,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,C),this._windowTime=Math.max(1,a)}next(C){const{isStopped:a,_buffer:y,_infiniteTimeWindow:Z,_timestampProvider:pe,_windowTime:Qe}=this;a||(y.push(C),!Z&&y.push(pe.now()+Qe)),this._trimBuffer(),super.next(C)}_subscribe(C){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(C),{_infiniteTimeWindow:y,_buffer:Z}=this,pe=Z.slice();for(let Qe=0;Qe<pe.length&&!C.closed;Qe+=y?1:2)C.next(pe[Qe]);return this._checkFinalizedStatuses(C),a}_trimBuffer(){const{_bufferSize:C,_timestampProvider:a,_buffer:y,_infiniteTimeWindow:Z}=this,pe=(Z?1:2)*C;if(C<1/0&&pe<y.length&&y.splice(0,y.length-pe),!Z){const Qe=a.now();let Wt=0;for(let En=1;En<y.length&&y[En]<=Qe;En+=2)Wt=En;Wt&&y.splice(0,Wt+1)}}}var y0=V(3099);function Hp(d,C,a){var y,Z;let pe,Qe=!1;return d&&"object"==typeof d?(pe=null!==(y=d.bufferSize)&&void 0!==y?y:1/0,C=null!==(Z=d.windowTime)&&void 0!==Z?Z:1/0,Qe=!!d.refCount,a=d.scheduler):pe=null!=d?d:1/0,(0,y0.B)({connector:()=>new _0(pe,C,a),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Qe})}var v0=V(8746);function b0(d){return d.replace(/(^\w|-\w)/g,x0)}function x0(d){return d.replace(/-/,"").toUpperCase()}var wh=V(520);const Tm="app/demo/examples/";let Am=(()=>{class d{constructor(a){this.http=a,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(a){let y=this.fileCache.get(a);return y||(y=this.http.get(`${Tm}${a}.component.ts`,{responseType:"text"}).pipe((0,ot.w)(Z=>this.loadAdditionnalFilesIfNecessary(Z)),Hp(1)),this.fileCache.set(a,y),y)}loadAdditionnalFilesIfNecessary(a){const y=/'\.\/([\w-.]+\.\w+)'/g;let Z;const pe=[],Qe={"src/demo.ts":a};for(;Z=y.exec(a);)pe.push(this.loadFile(Z[1]));return pe.length?(0,Mm.D)(pe).pipe((0,Tt.U)(Wt=>Object.assign(Object.assign({},Object.assign({},...Wt)),Qe))):(0,j_.of)(Qe)}loadFile(a){let y=this.fileCache.get(a);return y||(y=this.http.get(`${Tm}${a}`,{responseType:"text"}).pipe((0,Tt.U)(Z=>({[`src/${a}`]:Z})),Hp(1)),this.fileCache.set(a,y),y)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(wh.eN))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function w0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+a._spinnerAnimationLabel)("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function C0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function Im(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+a._spinnerAnimationLabel)("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function E0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}const D0=(0,Ti.pj)(class{constructor(d){this._elementRef=d}},"primary"),Om=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function Ub(){return{diameter:100}}});class Za extends D0{constructor(C,a,y,Z,pe,Qe,Wt,En){super(C),this._document=y,this._diameter=100,this._value=0,this._resizeSubscription=gt.w0.EMPTY,this.mode="determinate";const ti=Za._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),ti.has(y.head)||ti.set(y.head,new Set([100])),this._noopAnimations="NoopAnimations"===Z&&!!pe&&!pe._forceAnimations,pe&&(pe.diameter&&(this.diameter=pe.diameter),pe.strokeWidth&&(this.strokeWidth=pe.strokeWidth)),a.isBrowser&&a.SAFARI&&Wt&&Qe&&En&&(this._resizeSubscription=Wt.change(150).subscribe(()=>{"indeterminate"===this.mode&&En.run(()=>Qe.markForCheck())}))}get diameter(){return this._diameter}set diameter(C){this._diameter=(0,Wi.su)(C),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(C){this._strokeWidth=(0,Wi.su)(C)}get value(){return"determinate"===this.mode?this._value:0}set value(C){this._value=Math.max(0,Math.min(100,(0,Wi.su)(C)))}ngOnInit(){const C=this._elementRef.nativeElement;this._styleRoot=(0,oe.kV)(C)||this._document.head,this._attachStyleNode(),C.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const C=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${C} ${C}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(C){var a;const y=50*(null!==(a=C.currentScale)&&void 0!==a?a:1);return`${y}% ${y}%`}_attachStyleNode(){const C=this._styleRoot,a=this._diameter,y=Za._diameters;let Z=y.get(C);if(!Z||!Z.has(a)){const pe=this._document.createElement("style");pe.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),pe.textContent=this._getAnimationText(),C.appendChild(pe),Z||(Z=new Set,y.set(C,Z)),Z.add(a)}}_getAnimationText(){const C=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*C).replace(/END_VALUE/g,""+.2*C).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Za._diameters=new WeakMap,Za.\u0275fac=function(C){return new(C||Za)(l.Y36(l.SBq),l.Y36(oe.t4),l.Y36(Oe.K0,8),l.Y36(qe.Qb,8),l.Y36(Om),l.Y36(l.sBO),l.Y36(ae.rL),l.Y36(l.R0b))},Za.\u0275cmp=l.Xpm({type:Za,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(C,a){2&C&&(l.uIk("aria-valuemin","determinate"===a.mode?0:null)("aria-valuemax","determinate"===a.mode?100:null)("aria-valuenow","determinate"===a.mode?a.value:null)("mode",a.mode),l.Udp("width",a.diameter,"px")("height",a.diameter,"px"),l.ekj("_mat-animation-noopable",a._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(C,a){1&C&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,w0,1,11,"circle",2),l.YNc(3,C0,1,9,"circle",3),l.qZA()),2&C&&(l.Udp("width",a.diameter,"px")("height",a.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===a.mode),l.uIk("viewBox",a._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Oe.RF,Oe.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let S0=(()=>{class d extends Za{constructor(a,y,Z,pe,Qe,Wt,En,ti){super(a,y,Z,pe,Qe,Wt,En,ti),this.mode="indeterminate"}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(oe.t4),l.Y36(Oe.K0,8),l.Y36(qe.Qb,8),l.Y36(Om),l.Y36(l.sBO),l.Y36(ae.rL),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(a,y){2&a&&(l.Udp("width",y.diameter,"px")("height",y.diameter,"px"),l.ekj("_mat-animation-noopable",y._noopAnimations))},inputs:{color:"color"},features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(a,y){1&a&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,Im,1,11,"circle",2),l.YNc(3,E0,1,9,"circle",3),l.qZA()),2&a&&(l.Udp("width",y.diameter,"px")("height",y.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===y.mode),l.uIk("viewBox",y._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Oe.RF,Oe.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),d})(),md=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Ti.BQ,Oe.ez],Ti.BQ]}),d})();const Ch=["container"];function T0(d,C){1&d&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner"),l._UZ(2,"div"),l.qZA())}let jb=(()=>{class d{constructor(a,y,Z,pe,Qe){this.zone=a,this.activatedRoute=y,this.demoFileLoaderService=Z,this.http=pe,this.ChangeDetectorRef=Qe,this.loading=!0,this.projectbase$=(0,Mm.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe(Hp(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,ke.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,ot.w)(a=>(0,Mm.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(a.demoUrl),(0,j_.of)(a.demoUrl)])),(0,ot.w)(([a,y,Z])=>(0,H_.D)(this.openExample(a,y,Z)).pipe((0,v0.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){if(this.vm)return void(yield this.vm.applyFsDiff({create:y,destroy:[]}));const pe=function Sm(d,C,a){return{files:Object.assign({"src/main.ts":d[0].replace(/###/g,b0(a)+"Component"),"angular.json":d[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n"},C),title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(a,y,Z);yield this.zone.runOutsideAngular(()=>(0,he.mG)(this,void 0,void 0,function*(){this.vm=yield g0.embedProject(this.stackblitzContainer.nativeElement,pe,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.R0b),l.Y36(W.gz),l.Y36(Am),l.Y36(wh.eN),l.Y36(l.sBO))},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],viewQuery:function(a,y){if(1&a&&l.Gf(Ch,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y.stackblitzContainer=Z.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(a,y){1&a&&(l._UZ(0,"div",null,0),l.YNc(2,T0,3,0,"div",1)),2&a&&(l.xp6(2),l.Q6J("ngIf",y.loading))},directives:[Oe.O5,S0],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),d})();var qi=(()=>(function(d){d.STYLES="Styles",d.LAYERS="Layers",d.SOURCES="Sources",d.USER_INTERACTION="User interaction",d.CAMERA="Camera",d.CONTROLS_AND_OVERLAYS="Controls and overlays"}(qi||(qi={})),qi))();const km=[{path:"",component:Pc,children:[{path:"edit/:demoUrl",component:jb,canActivate:[B_]},{path:"display-map",component:pg,data:{label:"Display a map",cat:qi.STYLES}},{path:"custom-style-id",component:ug,data:{label:"Display a map with a custom style",cat:qi.STYLES}},{path:"set-style",component:k_,data:{label:"Change a map's style",cat:qi.STYLES}},{path:"satellite-map",component:S_,data:{label:"Display a satellite map",cat:qi.STYLES}},{path:"add-image-generated",component:Vf,data:{label:"Add a generated icon to the map",cat:qi.LAYERS}},{path:"add-image",component:ig,data:{label:"Add an icon to the map",cat:qi.LAYERS}},{path:"toggle-layers",component:l0,data:{label:"Show and hide layers",cat:qi.LAYERS}},{path:"3d-buildings",component:qm,data:{label:"Display 3d buildings",cat:qi.LAYERS}},{path:"cluster",component:Hl,data:{label:"Create and style clusters",cat:qi.LAYERS}},{path:"heatmap",component:im,data:{label:"Create a heatmap layer",cat:qi.LAYERS}},{path:"geojson-line",component:Dg,data:{label:"Add a GeoJSON line",cat:qi.LAYERS}},{path:"ngx-geojson-line",component:b_,data:{label:"[NGX] Add a GeoJSON line",cat:qi.LAYERS}},{path:"custom-marker-icons",component:od,data:{label:"Add custom icons with Markers",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Ov,data:{label:"[NGX] Add custom icons with Markers",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:Ng,data:{label:"Update a feature in realtime",cat:qi.SOURCES}},{path:"live-update-image-source",component:Hg,data:{label:"Update an image source in realtime",cat:qi.SOURCES}},{path:"popup",component:Nv,data:{label:"Display a popup",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:Hv,data:{label:"Attach a popup to a marker instance",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:Ab,data:{label:"View a fullscreen map",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:Wg,data:{label:"Display map navigation controls",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:sv,data:{label:"Locate the user",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:fb,data:{label:"Change the default position for attribution",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:x_,data:{label:"[NGX] Show scale information",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:Iv,data:{label:"[NGX] Add a custom control",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Og,data:{label:"Display a non-interactive map",cat:qi.USER_INTERACTION}},{path:"language-switch",component:Rg,data:{label:"Change a map's language",cat:qi.USER_INTERACTION}},{path:"center-on-symbol",component:rg,data:{label:"Center the map on a clicked symbol",cat:qi.USER_INTERACTION}},{path:"ngx-drag-a-point",component:m_,data:{label:"[NGX] Create a draggable point",cat:qi.USER_INTERACTION}},{path:"drag-a-marker",component:Tb,data:{label:"Create a draggable marker",cat:qi.USER_INTERACTION}},{path:"hover-styles",component:Ig,data:{label:"Create a hover effect",cat:qi.USER_INTERACTION}},{path:"popup-on-click",component:Gi,data:{label:"Display a popup on click",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:N_,data:{label:"Fit to the bounds of a LineString",cat:qi.USER_INTERACTION}},{path:"cluster-html",component:Ey,data:{label:"Display HTML clusters with custom properties",cat:qi.LAYERS}},{path:"ngx-cluster-html",component:Tv,data:{label:"[NGX] Display HTML clusters with custom properties",cat:qi.LAYERS}},{path:"polygon-popup-on-click",component:Lb,data:{label:"Show polygon information on click",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Qm,data:{label:"Generate and add a missing icon to the map",cat:qi.STYLES}},{path:"custom-attribution",component:ul,data:{label:"Add custom attributions",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:ed,data:{label:"Add custom localization for controls",cat:qi.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:Zg,data:{label:"Marker alignment options",cat:qi.CAMERA}},{path:"**",redirectTo:"display-map"}]}],A0=function(){return[2]},I0=[{path:"",component:(()=>{class d{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:a=>a}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const a=this.center[0];0===a?this.center=[90,0]:90===a?this.center=[180,0]:180===a?this.center=[-90,0]:-90===a&&(this.center=[0,0])}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return y.moveCenter()})("moveEnd",function(){return y.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA(),l.qZA()),2&a&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,A0))("center",y.center)("centerWithPanTo",!0)("panToOptions",y.panToOptions)("interactive",!1))},directives:[_t,je.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0px;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),d})(),pathMatch:"full"}],P0=[{path:"",component:V(6449).$,children:[{path:"demo",children:km},...I0,{path:"doc",loadChildren:()=>V.e(690).then(V.bind(V,7690)).then(d=>d.DocModule)}]},{path:"**",redirectTo:""}];let Rm=(()=>{class d{constructor(a,y){a.addSvgIcon("ngx-maplibre-gl",y.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),a.addSvgIcon("ngx-maplibre-gl-red",y.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),a.addSvgIcon("github",y.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(je.jv),l.LFG(D.H7))},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[],imports:[[D.b2,qe.PW,je.Ps,W.Bz.forRoot(P0,{relativeLinkResolution:"legacy"}),Le,mn.x]]}),d})(),Gp=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[B_],imports:[[W.Bz,wh.JF,Oe.ez,es.u5,Le,mn.x,P_,F_,lc.ot,Ep,qf,md,or,je.Ps,Mo,bv,ee]]}),d})(),Eh=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Le,je.Ps]]}),d})(),O0=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d,bootstrap:[f]}),d.\u0275inj=l.cJS({imports:[[W.Bz,Rm,Eh,Gp]]}),d})();(0,l.G48)(),D.q6().bootstrapModule(O0).catch(d=>console.log(d))},1135:(Sn,wt,V)=>{"use strict";V.d(wt,{X:()=>l});var D=V(7579);class l extends D.x{constructor(f){super(),this._value=f}get value(){return this.getValue()}_subscribe(f){const je=super._subscribe(f);return!je.closed&&f.next(this._value),je}getValue(){const{hasError:f,thrownError:je,_value:qe}=this;if(f)throw je;return this._throwIfClosed(),qe}next(f){super.next(this._value=f)}}},8306:(Sn,wt,V)=>{"use strict";V.d(wt,{y:()=>ze});var D=V(930),l=V(727),W=V(8822),f=V(4671);var Oe=V(2416),Le=V(576),he=V(2806);let ze=(()=>{class Ye{constructor(bt){bt&&(this._subscribe=bt)}lift(bt){const We=new Ye;return We.source=this,We.operator=bt,We}subscribe(bt,We,Ut){const jt=function gt(Ye){return Ye&&Ye instanceof D.Lv||function Be(Ye){return Ye&&(0,Le.m)(Ye.next)&&(0,Le.m)(Ye.error)&&(0,Le.m)(Ye.complete)}(Ye)&&(0,l.Nn)(Ye)}(bt)?bt:new D.Hp(bt,We,Ut);return(0,he.x)(()=>{const{operator:un,source:Dt}=this;jt.add(un?un.call(jt,Dt):Dt?this._subscribe(jt):this._trySubscribe(jt))}),jt}_trySubscribe(bt){try{return this._subscribe(bt)}catch(We){bt.error(We)}}forEach(bt,We){return new(We=He(We))((Ut,jt)=>{const un=new D.Hp({next:Dt=>{try{bt(Dt)}catch(ke){jt(ke),un.unsubscribe()}},error:jt,complete:Ut});this.subscribe(un)})}_subscribe(bt){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(bt)}[W.L](){return this}pipe(...bt){return function qe(Ye){return 0===Ye.length?f.y:1===Ye.length?Ye[0]:function(bt){return Ye.reduce((We,Ut)=>Ut(We),bt)}}(bt)(this)}toPromise(bt){return new(bt=He(bt))((We,Ut)=>{let jt;this.subscribe(un=>jt=un,un=>Ut(un),()=>We(jt))})}}return Ye.create=et=>new Ye(et),Ye})();function He(Ye){var et;return null!==(et=null!=Ye?Ye:Oe.v.Promise)&&void 0!==et?et:Promise}},7579:(Sn,wt,V)=>{"use strict";V.d(wt,{x:()=>Oe});var D=V(8306),l=V(727);const f=(0,V(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=V(8737),qe=V(2806);let Oe=(()=>{class he extends D.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(He){const Be=new Le(this,this);return Be.operator=He,Be}_throwIfClosed(){if(this.closed)throw new f}next(He){(0,qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Be=this.observers.slice();for(const gt of Be)gt.next(He)}})}error(He){(0,qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=He;const{observers:Be}=this;for(;Be.length;)Be.shift().error(He)}})}complete(){(0,qe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:He}=this;for(;He.length;)He.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var He;return(null===(He=this.observers)||void 0===He?void 0:He.length)>0}_trySubscribe(He){return this._throwIfClosed(),super._trySubscribe(He)}_subscribe(He){return this._throwIfClosed(),this._checkFinalizedStatuses(He),this._innerSubscribe(He)}_innerSubscribe(He){const{hasError:Be,isStopped:gt,observers:Ye}=this;return Be||gt?l.Lc:(Ye.push(He),new l.w0(()=>(0,je.P)(Ye,He)))}_checkFinalizedStatuses(He){const{hasError:Be,thrownError:gt,isStopped:Ye}=this;Be?He.error(gt):Ye&&He.complete()}asObservable(){const He=new D.y;return He.source=this,He}}return he.create=(ze,He)=>new Le(ze,He),he})();class Le extends Oe{constructor(ze,He){super(),this.destination=ze,this.source=He}next(ze){var He,Be;null===(Be=null===(He=this.destination)||void 0===He?void 0:He.next)||void 0===Be||Be.call(He,ze)}error(ze){var He,Be;null===(Be=null===(He=this.destination)||void 0===He?void 0:He.error)||void 0===Be||Be.call(He,ze)}complete(){var ze,He;null===(He=null===(ze=this.destination)||void 0===ze?void 0:ze.complete)||void 0===He||He.call(ze)}_subscribe(ze){var He,Be;return null!==(Be=null===(He=this.source)||void 0===He?void 0:He.subscribe(ze))&&void 0!==Be?Be:l.Lc}}},930:(Sn,wt,V)=>{"use strict";V.d(wt,{Hp:()=>gt,Lv:()=>Be});var D=V(576),l=V(727),W=V(2416),f=V(7849),je=V(5032);const qe=he("C",void 0,void 0);function he(Ut,jt,un){return{kind:Ut,value:jt,error:un}}var ze=V(3410),He=V(2806);class Be extends l.w0{constructor(jt){super(),this.isStopped=!1,jt?(this.destination=jt,(0,l.Nn)(jt)&&jt.add(this)):this.destination=We}static create(jt,un,Dt){return new gt(jt,un,Dt)}next(jt){this.isStopped?bt(function Le(Ut){return he("N",Ut,void 0)}(jt),this):this._next(jt)}error(jt){this.isStopped?bt(function Oe(Ut){return he("E",void 0,Ut)}(jt),this):(this.isStopped=!0,this._error(jt))}complete(){this.isStopped?bt(qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(jt){this.destination.next(jt)}_error(jt){try{this.destination.error(jt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class gt extends Be{constructor(jt,un,Dt){let ke;if(super(),(0,D.m)(jt))ke=jt;else if(jt){let ot;({next:ke,error:un,complete:Dt}=jt),this&&W.v.useDeprecatedNextContext?(ot=Object.create(jt),ot.unsubscribe=()=>this.unsubscribe()):ot=jt,ke=null==ke?void 0:ke.bind(ot),un=null==un?void 0:un.bind(ot),Dt=null==Dt?void 0:Dt.bind(ot)}this.destination={next:ke?Ye(ke):je.Z,error:Ye(null!=un?un:et),complete:Dt?Ye(Dt):je.Z}}}function Ye(Ut,jt){return(...un)=>{try{Ut(...un)}catch(Dt){W.v.useDeprecatedSynchronousErrorHandling?(0,He.O)(Dt):(0,f.h)(Dt)}}}function et(Ut){throw Ut}function bt(Ut,jt){const{onStoppedNotification:un}=W.v;un&&ze.z.setTimeout(()=>un(Ut,jt))}const We={closed:!0,next:je.Z,error:et,complete:je.Z}},727:(Sn,wt,V)=>{"use strict";V.d(wt,{Lc:()=>qe,w0:()=>je,Nn:()=>Oe});var D=V(576);const W=(0,V(3888).d)(he=>function(He){he(this),this.message=He?`${He.length} errors occurred during unsubscription:\n${He.map((Be,gt)=>`${gt+1}) ${Be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=He});var f=V(8737);class je{constructor(ze){this.initialTeardown=ze,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let ze;if(!this.closed){this.closed=!0;const{_parentage:He}=this;if(He)if(this._parentage=null,Array.isArray(He))for(const Ye of He)Ye.remove(this);else He.remove(this);const{initialTeardown:Be}=this;if((0,D.m)(Be))try{Be()}catch(Ye){ze=Ye instanceof W?Ye.errors:[Ye]}const{_teardowns:gt}=this;if(gt){this._teardowns=null;for(const Ye of gt)try{Le(Ye)}catch(et){ze=null!=ze?ze:[],et instanceof W?ze=[...ze,...et.errors]:ze.push(et)}}if(ze)throw new W(ze)}}add(ze){var He;if(ze&&ze!==this)if(this.closed)Le(ze);else{if(ze instanceof je){if(ze.closed||ze._hasParent(this))return;ze._addParent(this)}(this._teardowns=null!==(He=this._teardowns)&&void 0!==He?He:[]).push(ze)}}_hasParent(ze){const{_parentage:He}=this;return He===ze||Array.isArray(He)&&He.includes(ze)}_addParent(ze){const{_parentage:He}=this;this._parentage=Array.isArray(He)?(He.push(ze),He):He?[He,ze]:ze}_removeParent(ze){const{_parentage:He}=this;He===ze?this._parentage=null:Array.isArray(He)&&(0,f.P)(He,ze)}remove(ze){const{_teardowns:He}=this;He&&(0,f.P)(He,ze),ze instanceof je&&ze._removeParent(this)}}je.EMPTY=(()=>{const he=new je;return he.closed=!0,he})();const qe=je.EMPTY;function Oe(he){return he instanceof je||he&&"closed"in he&&(0,D.m)(he.remove)&&(0,D.m)(he.add)&&(0,D.m)(he.unsubscribe)}function Le(he){(0,D.m)(he)?he():he.unsubscribe()}},2416:(Sn,wt,V)=>{"use strict";V.d(wt,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Sn,wt,V)=>{"use strict";V.d(wt,{a:()=>ze});var D=V(8306),l=V(4742),W=V(2076),f=V(4671),je=V(3268),qe=V(3269),Oe=V(1810),Le=V(5403),he=V(9672);function ze(...gt){const Ye=(0,qe.yG)(gt),et=(0,qe.jO)(gt),{args:bt,keys:We}=(0,l.D)(gt);if(0===bt.length)return(0,W.D)([],Ye);const Ut=new D.y(function He(gt,Ye,et=f.y){return bt=>{Be(Ye,()=>{const{length:We}=gt,Ut=new Array(We);let jt=We,un=We;for(let Dt=0;Dt<We;Dt++)Be(Ye,()=>{const ke=(0,W.D)(gt[Dt],Ye);let ot=!1;ke.subscribe(new Le.Q(bt,nn=>{Ut[Dt]=nn,ot||(ot=!0,un--),un||bt.next(et(Ut.slice()))},()=>{--jt||bt.complete()}))},bt)},bt)}}(bt,Ye,We?jt=>(0,Oe.n)(We,jt):f.y));return et?Ut.pipe((0,je.Z)(et)):Ut}function Be(gt,Ye,et){gt?(0,he.f)(et,gt,Ye):Ye()}},7272:(Sn,wt,V)=>{"use strict";V.d(wt,{z:()=>je});var D=V(8189),W=V(3269),f=V(2076);function je(...qe){return function l(){return(0,D.J)(1)}()((0,f.D)(qe,(0,W.yG)(qe)))}},9770:(Sn,wt,V)=>{"use strict";V.d(wt,{P:()=>W});var D=V(8306),l=V(8421);function W(f){return new D.y(je=>{(0,l.Xf)(f()).subscribe(je)})}},515:(Sn,wt,V)=>{"use strict";V.d(wt,{E:()=>l});const l=new(V(8306).y)(je=>je.complete())},4128:(Sn,wt,V)=>{"use strict";V.d(wt,{D:()=>Le});var D=V(8306),l=V(4742),W=V(8421),f=V(3269),je=V(5403),qe=V(3268),Oe=V(1810);function Le(...he){const ze=(0,f.jO)(he),{args:He,keys:Be}=(0,l.D)(he),gt=new D.y(Ye=>{const{length:et}=He;if(!et)return void Ye.complete();const bt=new Array(et);let We=et,Ut=et;for(let jt=0;jt<et;jt++){let un=!1;(0,W.Xf)(He[jt]).subscribe(new je.Q(Ye,Dt=>{un||(un=!0,Ut--),bt[jt]=Dt},()=>We--,void 0,()=>{(!We||!un)&&(Ut||Ye.next(Be?(0,Oe.n)(Be,bt):bt),Ye.complete())}))}});return ze?gt.pipe((0,qe.Z)(ze)):gt}},2076:(Sn,wt,V)=>{"use strict";V.d(wt,{D:()=>nn});var D=V(8421),l=V(9672),W=V(4482),f=V(5403);function je(zt,tn=0){return(0,W.e)((st,yt)=>{st.subscribe(new f.Q(yt,ct=>(0,l.f)(yt,zt,()=>yt.next(ct),tn),()=>(0,l.f)(yt,zt,()=>yt.complete(),tn),ct=>(0,l.f)(yt,zt,()=>yt.error(ct),tn)))})}function qe(zt,tn=0){return(0,W.e)((st,yt)=>{yt.add(zt.schedule(()=>st.subscribe(yt),tn))})}var he=V(8306),He=V(2202),Be=V(576);function Ye(zt,tn){if(!zt)throw new Error("Iterable cannot be null");return new he.y(st=>{(0,l.f)(st,tn,()=>{const yt=zt[Symbol.asyncIterator]();(0,l.f)(st,tn,()=>{yt.next().then(ct=>{ct.done?st.complete():st.next(ct.value)})},0,!0)})})}var et=V(3670),bt=V(8239),We=V(1144),Ut=V(6495),jt=V(2206),un=V(4532),Dt=V(3260);function nn(zt,tn){return tn?function ot(zt,tn){if(null!=zt){if((0,et.c)(zt))return function Oe(zt,tn){return(0,D.Xf)(zt).pipe(qe(tn),je(tn))}(zt,tn);if((0,We.z)(zt))return function ze(zt,tn){return new he.y(st=>{let yt=0;return tn.schedule(function(){yt===zt.length?st.complete():(st.next(zt[yt++]),st.closed||this.schedule())})})}(zt,tn);if((0,bt.t)(zt))return function Le(zt,tn){return(0,D.Xf)(zt).pipe(qe(tn),je(tn))}(zt,tn);if((0,jt.D)(zt))return Ye(zt,tn);if((0,Ut.T)(zt))return function gt(zt,tn){return new he.y(st=>{let yt;return(0,l.f)(st,tn,()=>{yt=zt[He.h](),(0,l.f)(st,tn,()=>{let ct,Tt;try{({value:ct,done:Tt}=yt.next())}catch(Xt){return void st.error(Xt)}Tt?st.complete():st.next(ct)},0,!0)}),()=>(0,Be.m)(null==yt?void 0:yt.return)&&yt.return()})}(zt,tn);if((0,Dt.L)(zt))return function ke(zt,tn){return Ye((0,Dt.Q)(zt),tn)}(zt,tn)}throw(0,un.z)(zt)}(zt,tn):(0,D.Xf)(zt)}},4968:(Sn,wt,V)=>{"use strict";V.d(wt,{R:()=>ze});var D=V(8421),l=V(8306),W=V(5577),f=V(1144),je=V(576),qe=V(3268);const Oe=["addListener","removeListener"],Le=["addEventListener","removeEventListener"],he=["on","off"];function ze(et,bt,We,Ut){if((0,je.m)(We)&&(Ut=We,We=void 0),Ut)return ze(et,bt,We).pipe((0,qe.Z)(Ut));const[jt,un]=function Ye(et){return(0,je.m)(et.addEventListener)&&(0,je.m)(et.removeEventListener)}(et)?Le.map(Dt=>ke=>et[Dt](bt,ke,We)):function Be(et){return(0,je.m)(et.addListener)&&(0,je.m)(et.removeListener)}(et)?Oe.map(He(et,bt)):function gt(et){return(0,je.m)(et.on)&&(0,je.m)(et.off)}(et)?he.map(He(et,bt)):[];if(!jt&&(0,f.z)(et))return(0,W.z)(Dt=>ze(Dt,bt,We))((0,D.Xf)(et));if(!jt)throw new TypeError("Invalid event target");return new l.y(Dt=>{const ke=(...ot)=>Dt.next(1<ot.length?ot:ot[0]);return jt(ke),()=>un(ke)})}function He(et,bt){return We=>Ut=>et[We](bt,Ut)}},8421:(Sn,wt,V)=>{"use strict";V.d(wt,{Xf:()=>gt});var D=V(655),l=V(1144),W=V(8239),f=V(8306),je=V(3670),qe=V(2206),Oe=V(4532),Le=V(6495),he=V(3260),ze=V(576),He=V(7849),Be=V(8822);function gt(Dt){if(Dt instanceof f.y)return Dt;if(null!=Dt){if((0,je.c)(Dt))return function Ye(Dt){return new f.y(ke=>{const ot=Dt[Be.L]();if((0,ze.m)(ot.subscribe))return ot.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Dt);if((0,l.z)(Dt))return function et(Dt){return new f.y(ke=>{for(let ot=0;ot<Dt.length&&!ke.closed;ot++)ke.next(Dt[ot]);ke.complete()})}(Dt);if((0,W.t)(Dt))return function bt(Dt){return new f.y(ke=>{Dt.then(ot=>{ke.closed||(ke.next(ot),ke.complete())},ot=>ke.error(ot)).then(null,He.h)})}(Dt);if((0,qe.D)(Dt))return Ut(Dt);if((0,Le.T)(Dt))return function We(Dt){return new f.y(ke=>{for(const ot of Dt)if(ke.next(ot),ke.closed)return;ke.complete()})}(Dt);if((0,he.L)(Dt))return function jt(Dt){return Ut((0,he.Q)(Dt))}(Dt)}throw(0,Oe.z)(Dt)}function Ut(Dt){return new f.y(ke=>{(function un(Dt,ke){var ot,nn,zt,tn;return(0,D.mG)(this,void 0,void 0,function*(){try{for(ot=(0,D.KL)(Dt);!(nn=yield ot.next()).done;)if(ke.next(nn.value),ke.closed)return}catch(st){zt={error:st}}finally{try{nn&&!nn.done&&(tn=ot.return)&&(yield tn.call(ot))}finally{if(zt)throw zt.error}}ke.complete()})})(Dt,ke).catch(ot=>ke.error(ot))})}},6451:(Sn,wt,V)=>{"use strict";V.d(wt,{T:()=>qe});var D=V(8189),l=V(8421),W=V(515),f=V(3269),je=V(2076);function qe(...Oe){const Le=(0,f.yG)(Oe),he=(0,f._6)(Oe,1/0),ze=Oe;return ze.length?1===ze.length?(0,l.Xf)(ze[0]):(0,D.J)(he)((0,je.D)(ze,Le)):W.E}},9646:(Sn,wt,V)=>{"use strict";V.d(wt,{of:()=>W});var D=V(3269),l=V(2076);function W(...f){const je=(0,D.yG)(f);return(0,l.D)(f,je)}},5963:(Sn,wt,V)=>{"use strict";V.d(wt,{H:()=>je});var D=V(8306),l=V(4986),W=V(3532);function je(qe=0,Oe,Le=l.P){let he=-1;return null!=Oe&&((0,W.K)(Oe)?Le=Oe:he=Oe),new D.y(ze=>{let He=function f(qe){return qe instanceof Date&&!isNaN(qe)}(qe)?+qe-Le.now():qe;He<0&&(He=0);let Be=0;return Le.schedule(function(){ze.closed||(ze.next(Be++),0<=he?this.schedule(void 0,he):ze.complete())},He)})}},5403:(Sn,wt,V)=>{"use strict";V.d(wt,{Q:()=>l});var D=V(930);class l extends D.Lv{constructor(f,je,qe,Oe,Le){super(f),this.onFinalize=Le,this._next=je?function(he){try{je(he)}catch(ze){f.error(ze)}}:super._next,this._error=Oe?function(he){try{Oe(he)}catch(ze){f.error(ze)}finally{this.unsubscribe()}}:super._error,this._complete=qe?function(){try{qe()}catch(he){f.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var f;const{closed:je}=this;super.unsubscribe(),!je&&(null===(f=this.onFinalize)||void 0===f||f.call(this))}}},262:(Sn,wt,V)=>{"use strict";V.d(wt,{K:()=>f});var D=V(8421),l=V(5403),W=V(4482);function f(je){return(0,W.e)((qe,Oe)=>{let ze,Le=null,he=!1;Le=qe.subscribe(new l.Q(Oe,void 0,void 0,He=>{ze=(0,D.Xf)(je(He,f(je)(qe))),Le?(Le.unsubscribe(),Le=null,ze.subscribe(Oe)):he=!0})),he&&(Le.unsubscribe(),Le=null,ze.subscribe(Oe))})}},4351:(Sn,wt,V)=>{"use strict";V.d(wt,{b:()=>W});var D=V(5577),l=V(576);function W(f,je){return(0,l.m)(je)?(0,D.z)(f,je,1):(0,D.z)(f,1)}},8372:(Sn,wt,V)=>{"use strict";V.d(wt,{b:()=>f});var D=V(4986),l=V(4482),W=V(5403);function f(je,qe=D.z){return(0,l.e)((Oe,Le)=>{let he=null,ze=null,He=null;const Be=()=>{if(he){he.unsubscribe(),he=null;const Ye=ze;ze=null,Le.next(Ye)}};function gt(){const Ye=He+je,et=qe.now();if(et<Ye)return he=this.schedule(void 0,Ye-et),void Le.add(he);Be()}Oe.subscribe(new W.Q(Le,Ye=>{ze=Ye,He=qe.now(),he||(he=qe.schedule(gt,je),Le.add(he))},()=>{Be(),Le.complete()},void 0,()=>{ze=he=null}))})}},6590:(Sn,wt,V)=>{"use strict";V.d(wt,{d:()=>W});var D=V(4482),l=V(5403);function W(f){return(0,D.e)((je,qe)=>{let Oe=!1;je.subscribe(new l.Q(qe,Le=>{Oe=!0,qe.next(Le)},()=>{Oe||qe.next(f),qe.complete()}))})}},1884:(Sn,wt,V)=>{"use strict";V.d(wt,{x:()=>f});var D=V(4671),l=V(4482),W=V(5403);function f(qe,Oe=D.y){return qe=null!=qe?qe:je,(0,l.e)((Le,he)=>{let ze,He=!0;Le.subscribe(new W.Q(he,Be=>{const gt=Oe(Be);(He||!qe(ze,gt))&&(He=!1,ze=gt,he.next(Be))}))})}function je(qe,Oe){return qe===Oe}},9300:(Sn,wt,V)=>{"use strict";V.d(wt,{h:()=>W});var D=V(4482),l=V(5403);function W(f,je){return(0,D.e)((qe,Oe)=>{let Le=0;qe.subscribe(new l.Q(Oe,he=>f.call(je,he,Le++)&&Oe.next(he)))})}},8746:(Sn,wt,V)=>{"use strict";V.d(wt,{x:()=>l});var D=V(4482);function l(W){return(0,D.e)((f,je)=>{try{f.subscribe(je)}finally{je.add(W)}})}},590:(Sn,wt,V)=>{"use strict";V.d(wt,{P:()=>Oe});var D=V(6805),l=V(9300),W=V(5698),f=V(6590),je=V(8068),qe=V(4671);function Oe(Le,he){const ze=arguments.length>=2;return He=>He.pipe(Le?(0,l.h)((Be,gt)=>Le(Be,gt,He)):qe.y,(0,W.q)(1),ze?(0,f.d)(he):(0,je.T)(()=>new D.K))}},4004:(Sn,wt,V)=>{"use strict";V.d(wt,{U:()=>W});var D=V(4482),l=V(5403);function W(f,je){return(0,D.e)((qe,Oe)=>{let Le=0;qe.subscribe(new l.Q(Oe,he=>{Oe.next(f.call(je,he,Le++))}))})}},8189:(Sn,wt,V)=>{"use strict";V.d(wt,{J:()=>W});var D=V(5577),l=V(4671);function W(f=1/0){return(0,D.z)(l.y,f)}},5577:(Sn,wt,V)=>{"use strict";V.d(wt,{z:()=>Le});var D=V(4004),l=V(8421),W=V(4482),f=V(9672),je=V(5403),Oe=V(576);function Le(he,ze,He=1/0){return(0,Oe.m)(ze)?Le((Be,gt)=>(0,D.U)((Ye,et)=>ze(Be,Ye,gt,et))((0,l.Xf)(he(Be,gt))),He):("number"==typeof ze&&(He=ze),(0,W.e)((Be,gt)=>function qe(he,ze,He,Be,gt,Ye,et,bt){const We=[];let Ut=0,jt=0,un=!1;const Dt=()=>{un&&!We.length&&!Ut&&ze.complete()},ke=nn=>Ut<Be?ot(nn):We.push(nn),ot=nn=>{Ye&&ze.next(nn),Ut++;let zt=!1;(0,l.Xf)(He(nn,jt++)).subscribe(new je.Q(ze,tn=>{null==gt||gt(tn),Ye?ke(tn):ze.next(tn)},()=>{zt=!0},void 0,()=>{if(zt)try{for(Ut--;We.length&&Ut<Be;){const tn=We.shift();et?(0,f.f)(ze,et,()=>ot(tn)):ot(tn)}Dt()}catch(tn){ze.error(tn)}}))};return he.subscribe(new je.Q(ze,ke,()=>{un=!0,Dt()})),()=>{null==bt||bt()}}(Be,gt,he,He)))}},3099:(Sn,wt,V)=>{"use strict";V.d(wt,{B:()=>qe});var D=V(2076),l=V(5698),W=V(7579),f=V(930),je=V(4482);function qe(Le={}){const{connector:he=(()=>new W.x),resetOnError:ze=!0,resetOnComplete:He=!0,resetOnRefCountZero:Be=!0}=Le;return gt=>{let Ye=null,et=null,bt=null,We=0,Ut=!1,jt=!1;const un=()=>{null==et||et.unsubscribe(),et=null},Dt=()=>{un(),Ye=bt=null,Ut=jt=!1},ke=()=>{const ot=Ye;Dt(),null==ot||ot.unsubscribe()};return(0,je.e)((ot,nn)=>{We++,!jt&&!Ut&&un();const zt=bt=null!=bt?bt:he();nn.add(()=>{We--,0===We&&!jt&&!Ut&&(et=Oe(ke,Be))}),zt.subscribe(nn),Ye||(Ye=new f.Hp({next:tn=>zt.next(tn),error:tn=>{jt=!0,un(),et=Oe(Dt,ze,tn),zt.error(tn)},complete:()=>{Ut=!0,un(),et=Oe(Dt,He),zt.complete()}}),(0,D.D)(ot).subscribe(Ye))})(gt)}}function Oe(Le,he,...ze){return!0===he?(Le(),null):!1===he?null:he(...ze).pipe((0,l.q)(1)).subscribe(()=>Le())}},5684:(Sn,wt,V)=>{"use strict";V.d(wt,{T:()=>l});var D=V(9300);function l(W){return(0,D.h)((f,je)=>W<=je)}},8675:(Sn,wt,V)=>{"use strict";V.d(wt,{O:()=>f});var D=V(7272),l=V(3269),W=V(4482);function f(...je){const qe=(0,l.yG)(je);return(0,W.e)((Oe,Le)=>{(qe?(0,D.z)(je,Oe,qe):(0,D.z)(je,Oe)).subscribe(Le)})}},3900:(Sn,wt,V)=>{"use strict";V.d(wt,{w:()=>f});var D=V(8421),l=V(4482),W=V(5403);function f(je,qe){return(0,l.e)((Oe,Le)=>{let he=null,ze=0,He=!1;const Be=()=>He&&!he&&Le.complete();Oe.subscribe(new W.Q(Le,gt=>{null==he||he.unsubscribe();let Ye=0;const et=ze++;(0,D.Xf)(je(gt,et)).subscribe(he=new W.Q(Le,bt=>Le.next(qe?qe(gt,bt,et,Ye++):bt),()=>{he=null,Be()}))},()=>{He=!0,Be()}))})}},5698:(Sn,wt,V)=>{"use strict";V.d(wt,{q:()=>f});var D=V(515),l=V(4482),W=V(5403);function f(je){return je<=0?()=>D.E:(0,l.e)((qe,Oe)=>{let Le=0;qe.subscribe(new W.Q(Oe,he=>{++Le<=je&&(Oe.next(he),je<=Le&&Oe.complete())}))})}},2722:(Sn,wt,V)=>{"use strict";V.d(wt,{R:()=>je});var D=V(4482),l=V(5403),W=V(8421),f=V(5032);function je(qe){return(0,D.e)((Oe,Le)=>{(0,W.Xf)(qe).subscribe(new l.Q(Le,()=>Le.complete(),f.Z)),!Le.closed&&Oe.subscribe(Le)})}},8505:(Sn,wt,V)=>{"use strict";V.d(wt,{b:()=>je});var D=V(576),l=V(4482),W=V(5403),f=V(4671);function je(qe,Oe,Le){const he=(0,D.m)(qe)||Oe||Le?{next:qe,error:Oe,complete:Le}:qe;return he?(0,l.e)((ze,He)=>{var Be;null===(Be=he.subscribe)||void 0===Be||Be.call(he);let gt=!0;ze.subscribe(new W.Q(He,Ye=>{var et;null===(et=he.next)||void 0===et||et.call(he,Ye),He.next(Ye)},()=>{var Ye;gt=!1,null===(Ye=he.complete)||void 0===Ye||Ye.call(he),He.complete()},Ye=>{var et;gt=!1,null===(et=he.error)||void 0===et||et.call(he,Ye),He.error(Ye)},()=>{var Ye,et;gt&&(null===(Ye=he.unsubscribe)||void 0===Ye||Ye.call(he)),null===(et=he.finalize)||void 0===et||et.call(he)}))}):f.y}},8068:(Sn,wt,V)=>{"use strict";V.d(wt,{T:()=>f});var D=V(6805),l=V(4482),W=V(5403);function f(qe=je){return(0,l.e)((Oe,Le)=>{let he=!1;Oe.subscribe(new W.Q(Le,ze=>{he=!0,Le.next(ze)},()=>he?Le.complete():Le.error(qe())))})}function je(){return new D.K}},4408:(Sn,wt,V)=>{"use strict";V.d(wt,{o:()=>je});var D=V(727);class l extends D.w0{constructor(Oe,Le){super()}schedule(Oe,Le=0){return this}}const W={setInterval(...qe){const{delegate:Oe}=W;return((null==Oe?void 0:Oe.setInterval)||setInterval)(...qe)},clearInterval(qe){const{delegate:Oe}=W;return((null==Oe?void 0:Oe.clearInterval)||clearInterval)(qe)},delegate:void 0};var f=V(8737);class je extends l{constructor(Oe,Le){super(Oe,Le),this.scheduler=Oe,this.work=Le,this.pending=!1}schedule(Oe,Le=0){if(this.closed)return this;this.state=Oe;const he=this.id,ze=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(ze,he,Le)),this.pending=!0,this.delay=Le,this.id=this.id||this.requestAsyncId(ze,this.id,Le),this}requestAsyncId(Oe,Le,he=0){return W.setInterval(Oe.flush.bind(Oe,this),he)}recycleAsyncId(Oe,Le,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Le;W.clearInterval(Le)}execute(Oe,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Oe,Le);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Le){let ze,he=!1;try{this.work(Oe)}catch(He){he=!0,ze=He||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),ze}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Le}=this,{actions:he}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,f.P)(he,this),null!=Oe&&(this.id=this.recycleAsyncId(Le,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Sn,wt,V)=>{"use strict";V.d(wt,{v:()=>W});var D=V(6063);class l{constructor(je,qe=l.now){this.schedulerActionCtor=je,this.now=qe}schedule(je,qe=0,Oe){return new this.schedulerActionCtor(this,je).schedule(Oe,qe)}}l.now=D.l.now;class W extends l{constructor(je,qe=l.now){super(je,qe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(je){const{actions:qe}=this;if(this._active)return void qe.push(je);let Oe;this._active=!0;do{if(Oe=je.execute(je.state,je.delay))break}while(je=qe.shift());if(this._active=!1,Oe){for(;je=qe.shift();)je.unsubscribe();throw Oe}}}},4986:(Sn,wt,V)=>{"use strict";V.d(wt,{z:()=>W,P:()=>f});var D=V(4408);const W=new(V(7565).v)(D.o),f=W},6063:(Sn,wt,V)=>{"use strict";V.d(wt,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(Sn,wt,V)=>{"use strict";V.d(wt,{z:()=>D});const D={setTimeout(...l){const{delegate:W}=D;return((null==W?void 0:W.setTimeout)||setTimeout)(...l)},clearTimeout(l){const{delegate:W}=D;return((null==W?void 0:W.clearTimeout)||clearTimeout)(l)},delegate:void 0}},2202:(Sn,wt,V)=>{"use strict";V.d(wt,{h:()=>l});const l=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Sn,wt,V)=>{"use strict";V.d(wt,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Sn,wt,V)=>{"use strict";V.d(wt,{K:()=>l});const l=(0,V(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Sn,wt,V)=>{"use strict";V.d(wt,{jO:()=>f,yG:()=>je,_6:()=>qe});var D=V(576),l=V(3532);function W(Oe){return Oe[Oe.length-1]}function f(Oe){return(0,D.m)(W(Oe))?Oe.pop():void 0}function je(Oe){return(0,l.K)(W(Oe))?Oe.pop():void 0}function qe(Oe,Le){return"number"==typeof W(Oe)?Oe.pop():Le}},4742:(Sn,wt,V)=>{"use strict";V.d(wt,{D:()=>je});const{isArray:D}=Array,{getPrototypeOf:l,prototype:W,keys:f}=Object;function je(Oe){if(1===Oe.length){const Le=Oe[0];if(D(Le))return{args:Le,keys:null};if(function qe(Oe){return Oe&&"object"==typeof Oe&&l(Oe)===W}(Le)){const he=f(Le);return{args:he.map(ze=>Le[ze]),keys:he}}}return{args:Oe,keys:null}}},8737:(Sn,wt,V)=>{"use strict";function D(l,W){if(l){const f=l.indexOf(W);0<=f&&l.splice(f,1)}}V.d(wt,{P:()=>D})},3888:(Sn,wt,V)=>{"use strict";function D(l){const f=l(je=>{Error.call(je),je.stack=(new Error).stack});return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}V.d(wt,{d:()=>D})},1810:(Sn,wt,V)=>{"use strict";function D(l,W){return l.reduce((f,je,qe)=>(f[je]=W[qe],f),{})}V.d(wt,{n:()=>D})},2806:(Sn,wt,V)=>{"use strict";V.d(wt,{x:()=>W,O:()=>f});var D=V(2416);let l=null;function W(je){if(D.v.useDeprecatedSynchronousErrorHandling){const qe=!l;if(qe&&(l={errorThrown:!1,error:null}),je(),qe){const{errorThrown:Oe,error:Le}=l;if(l=null,Oe)throw Le}}else je()}function f(je){D.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=je)}},9672:(Sn,wt,V)=>{"use strict";function D(l,W,f,je=0,qe=!1){const Oe=W.schedule(function(){f(),qe?l.add(this.schedule(null,je)):this.unsubscribe()},je);if(l.add(Oe),!qe)return Oe}V.d(wt,{f:()=>D})},4671:(Sn,wt,V)=>{"use strict";function D(l){return l}V.d(wt,{y:()=>D})},1144:(Sn,wt,V)=>{"use strict";V.d(wt,{z:()=>D});const D=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(Sn,wt,V)=>{"use strict";V.d(wt,{D:()=>l});var D=V(576);function l(W){return Symbol.asyncIterator&&(0,D.m)(null==W?void 0:W[Symbol.asyncIterator])}},576:(Sn,wt,V)=>{"use strict";function D(l){return"function"==typeof l}V.d(wt,{m:()=>D})},3670:(Sn,wt,V)=>{"use strict";V.d(wt,{c:()=>W});var D=V(8822),l=V(576);function W(f){return(0,l.m)(f[D.L])}},6495:(Sn,wt,V)=>{"use strict";V.d(wt,{T:()=>W});var D=V(2202),l=V(576);function W(f){return(0,l.m)(null==f?void 0:f[D.h])}},8239:(Sn,wt,V)=>{"use strict";V.d(wt,{t:()=>l});var D=V(576);function l(W){return(0,D.m)(null==W?void 0:W.then)}},3260:(Sn,wt,V)=>{"use strict";V.d(wt,{Q:()=>W,L:()=>f});var D=V(655),l=V(576);function W(je){return(0,D.FC)(this,arguments,function*(){const Oe=je.getReader();try{for(;;){const{value:Le,done:he}=yield(0,D.qq)(Oe.read());if(he)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Le)}}finally{Oe.releaseLock()}})}function f(je){return(0,l.m)(null==je?void 0:je.getReader)}},3532:(Sn,wt,V)=>{"use strict";V.d(wt,{K:()=>l});var D=V(576);function l(W){return W&&(0,D.m)(W.schedule)}},4482:(Sn,wt,V)=>{"use strict";V.d(wt,{A:()=>l,e:()=>W});var D=V(576);function l(f){return(0,D.m)(null==f?void 0:f.lift)}function W(f){return je=>{if(l(je))return je.lift(function(qe){try{return f(qe,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Sn,wt,V)=>{"use strict";V.d(wt,{Z:()=>f});var D=V(4004);const{isArray:l}=Array;function f(je){return(0,D.U)(qe=>function W(je,qe){return l(qe)?je(...qe):je(qe)}(je,qe))}},5032:(Sn,wt,V)=>{"use strict";function D(){}V.d(wt,{Z:()=>D})},7849:(Sn,wt,V)=>{"use strict";V.d(wt,{h:()=>W});var D=V(2416),l=V(3410);function W(f){l.z.setTimeout(()=>{const{onUnhandledError:je}=D.v;if(!je)throw f;je(f)})}},4532:(Sn,wt,V)=>{"use strict";function D(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(wt,{z:()=>D})},655:(Sn,wt,V)=>{"use strict";function Le(st,yt,ct,Tt){return new(ct||(ct=Promise))(function(Ct,vn){function fi(Tn){try{Dn(Tt.next(Tn))}catch(Ii){vn(Ii)}}function zi(Tn){try{Dn(Tt.throw(Tn))}catch(Ii){vn(Ii)}}function Dn(Tn){Tn.done?Ct(Tn.value):function Xt(Ct){return Ct instanceof ct?Ct:new ct(function(vn){vn(Ct)})}(Tn.value).then(fi,zi)}Dn((Tt=Tt.apply(st,yt||[])).next())})}function We(st){return this instanceof We?(this.v=st,this):new We(st)}function Ut(st,yt,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xt,Tt=ct.apply(st,yt||[]),Ct=[];return Xt={},vn("next"),vn("throw"),vn("return"),Xt[Symbol.asyncIterator]=function(){return this},Xt;function vn(ci){Tt[ci]&&(Xt[ci]=function(ir){return new Promise(function(_i,kn){Ct.push([ci,ir,_i,kn])>1||fi(ci,ir)})})}function fi(ci,ir){try{!function zi(ci){ci.value instanceof We?Promise.resolve(ci.value.v).then(Dn,Tn):Ii(Ct[0][2],ci)}(Tt[ci](ir))}catch(_i){Ii(Ct[0][3],_i)}}function Dn(ci){fi("next",ci)}function Tn(ci){fi("throw",ci)}function Ii(ci,ir){ci(ir),Ct.shift(),Ct.length&&fi(Ct[0][0],Ct[0][1])}}function un(st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,yt=st[Symbol.asyncIterator];return yt?yt.call(st):(st=function Be(st){var yt="function"==typeof Symbol&&Symbol.iterator,ct=yt&&st[yt],Tt=0;if(ct)return ct.call(st);if(st&&"number"==typeof st.length)return{next:function(){return st&&Tt>=st.length&&(st=void 0),{value:st&&st[Tt++],done:!st}}};throw new TypeError(yt?"Object is not iterable.":"Symbol.iterator is not defined.")}(st),ct={},Tt("next"),Tt("throw"),Tt("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function Tt(Ct){ct[Ct]=st[Ct]&&function(vn){return new Promise(function(fi,zi){!function Xt(Ct,vn,fi,zi){Promise.resolve(zi).then(function(Dn){Ct({value:Dn,done:fi})},vn)}(fi,zi,(vn=st[Ct](vn)).done,vn.value)})}}}V.d(wt,{mG:()=>Le,qq:()=>We,FC:()=>Ut,KL:()=>un})},1943:function(Sn){Sn.exports=function(){"use strict";var wt,V,D;function l(f,je){if(wt)if(V){var qe="var sharedChunk = {}; ("+wt+")(sharedChunk); ("+V+")(sharedChunk);",Oe={};wt(Oe),D=je(Oe),"undefined"!=typeof window&&(D.workerUrl=window.URL.createObjectURL(new Blob([qe],{type:"text/javascript"})))}else V=je;else wt=je}return l(0,function(f){var je=qe;function qe(r,e,s,h){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(h-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=s,this.p2y=h}function Oe(r,e,s,h){const g=new je(r,e,s,h);return function(x){return g.solve(x)}}qe.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(void 0===e&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,h=0;h<8;h++){var g=this.sampleCurveX(s)-r;if(Math.abs(g)<e)return s;var x=this.sampleCurveDerivativeX(s);if(Math.abs(x)<1e-6)break;s-=g/x}var w=0,I=1;for(s=r,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-r)<e));h++)r>g?w=s:I=s,s=.5*(I-w)+w;return s},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};const Le=Oe(.25,.1,.25,1);function he(r,e,s){return Math.min(s,Math.max(e,r))}function ze(r,e,s){const h=s-e,g=((r-e)%h+h)%h+e;return g===e?s:g}function He(r,...e){for(const s of e)for(const h in s)r[h]=s[h];return r}let Be=1;function gt(r,e){r.forEach(s=>{e[s]&&(e[s]=e[s].bind(e))})}function Ye(r,e,s){const h={};for(const g in r)h[g]=e.call(s||this,r[g],g,r);return h}function et(r,e,s){const h={};for(const g in r)e.call(s||this,r[g],g,r)&&(h[g]=r[g]);return h}function bt(r){return Array.isArray(r)?r.map(bt):"object"==typeof r&&r?Ye(r,bt):r}const We={};function Ut(r){We[r]||("undefined"!=typeof console&&console.warn(r),We[r]=!0)}function jt(r,e,s){return(s.y-r.y)*(e.x-r.x)>(e.y-r.y)*(s.x-r.x)}function un(r){let e=0;for(let s,h,g=0,x=r.length,w=x-1;g<x;w=g++)s=r[g],h=r[w],e+=(h.x-s.x)*(s.y+h.y);return e}function Dt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ke(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,g,x)=>{const w=g||x;return e[h]=!w||w.toLowerCase(),""}),e["max-age"]){const s=parseInt(e["max-age"],10);isNaN(s)?delete e["max-age"]:e["max-age"]=s}return e}let ot,nn,zt=null;function tn(r){if(null==zt){const e=r.navigator?r.navigator.userAgent:null;zt=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return zt}function st(r){return"undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap}const yt={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const e=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(r,e=0){const s=window.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-e,-e,r.width+2*e,r.height+2*e)},resolveURL:r=>(ot||(ot=document.createElement("a")),ot.href=r,ot.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==nn&&(nn=matchMedia("(prefers-reduced-motion: reduce)")),nn.matches)}};var ct=Tt;function Tt(r,e){this.x=r,this.y=e}Tt.prototype={clone:function(){return new Tt(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,s=r.y-this.y;return e*e+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),s=Math.sin(r),h=s*this.x+e*this.y;return this.x=e*this.x-s*this.y,this.y=h,this},_rotateAround:function(r,e){var s=Math.cos(r),h=Math.sin(r),g=e.y+h*(this.x-e.x)+s*(this.y-e.y);return this.x=e.x+s*(this.x-e.x)-h*(this.y-e.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Tt.convert=function(r){return r instanceof Tt?r:Array.isArray(r)?new Tt(r[0],r[1]):r};const Xt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ct="mapbox-tiles";let vn,zi=500,Dn=50;function Tn(){"undefined"==typeof caches||vn||(vn=caches.open(Ct))}let Ii=1/0;const ci={supported:!1,testSupport:function(r){!kn&&_i&&(ii?ft(r):ir=r)}};let ir,_i,kn=!1,ii=!1;function ft(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,_i),r.isContextLost())return;ci.supported=!0}catch(s){}r.deleteTexture(e),kn=!0}"undefined"!=typeof document&&(_i=document.createElement("img"),_i.onload=function(){ir&&ft(ir),ir=null,ii=!0},_i.onerror=function(){kn=!0,ir=null},_i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ft);class on extends Error{constructor(e,s,h,g){super(`AJAXError: ${s} (${e}): ${h}`),this.status=e,this.statusText=s,this.url=h,this.body=g}}const gn=Dt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function zn(r,e){const s=new AbortController,h=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:gn(),signal:s.signal});let g=!1,x=!1;return"json"===r.type&&h.headers.set("Accept","application/json"),((w,I,L)=>{if(x)return;const ee=Date.now();fetch(h).then(oe=>{return oe.ok?(ae=oe,null,ee,void("arrayBuffer"===r.type?ae.arrayBuffer():"json"===r.type?ae.json():ae.text()).then(we=>{x||(g=!0,e(null,we,ae.headers.get("Cache-Control"),ae.headers.get("Expires")))}).catch(we=>{x||e(new Error(we.message))})):oe.blob().then(ae=>e(new on(oe.status,oe.statusText,r.url,ae)));var ae}).catch(oe=>{20!==oe.code&&e(new Error(oe.message))})})(),{cancel:()=>{x=!0,g||s.abort()}}}const Jn=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e);if(!Dt()){const h=r.url.substring(0,r.url.indexOf("://"));return(Xt.REGISTERED_PROTOCOLS[h]||zn)(r,e)}}if(!(/^file:/.test(s=r.url)||/^file:/.test(gn())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return zn(r,e);if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var s;return function(h,g){const x=new XMLHttpRequest;x.open(h.method||"GET",h.url,!0),"arrayBuffer"===h.type&&(x.responseType="arraybuffer");for(const w in h.headers)x.setRequestHeader(w,h.headers[w]);return"json"===h.type&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials="include"===h.credentials,x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||0===x.status)&&null!==x.response){let w=x.response;if("json"===h.type)try{w=JSON.parse(x.response)}catch(I){return g(I)}g(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const w=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});g(new on(x.status,x.statusText,h.url,w))}},x.send(h.body),{cancel:()=>x.abort()}}(r,e)},Pi=function(r,e){return Jn(He(r,{type:"arrayBuffer"}),e)};function er(r){const e=window.document.createElement("a");return e.href=r,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const sr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Kn,ri;Kn=[],ri=0;const Zn=function(r,e){if(ci.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),ri>=Xt.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Kn.push(x),x}ri++;let s=!1;const h=()=>{if(!s)for(s=!0,ri--;Kn.length&&ri<Xt.MAX_PARALLEL_IMAGE_REQUESTS;){const x=Kn.shift(),{requestParameters:w,callback:I,cancelled:L}=x;L||(x.cancel=Zn(w,I).cancel)}},g=Pi(r,(x,w,I,L)=>{var ee,oe;h(),x?e(x):w&&(ee=w,oe=(ee,oe)=>{null!=ee?e(ee):null!=oe&&e(null,oe,{cacheControl:I,expires:L})},"function"==typeof createImageBitmap?function(ae,me){const Me=new Blob([new Uint8Array(ae)],{type:"image/png"});createImageBitmap(Me).then(we=>{me(null,we)}).catch(we=>{me(new Error(`Could not load image because of ${we.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ee,oe):function(ae,me){const Me=new Image;Me.onload=()=>{me(null,Me),URL.revokeObjectURL(Me.src),Me.onload=null,window.requestAnimationFrame(()=>{Me.src=sr})},Me.onerror=()=>me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const we=new Blob([new Uint8Array(ae)],{type:"image/png"});Me.src=ae.byteLength?URL.createObjectURL(we):sr}(ee,oe))});return{cancel:()=>{g.cancel(),h()}}};function ht(r,e,s){s[r]&&-1!==s[r].indexOf(e)||(s[r]=s[r]||[],s[r].push(e))}function $(r,e,s){if(s&&s[r]){const h=s[r].indexOf(e);-1!==h&&s[r].splice(h,1)}}class U{constructor(e,s={}){He(this,s),this.type=e}}class R extends U{constructor(e,s={}){super("error",He({error:e},s))}}class B{on(e,s){return this._listeners=this._listeners||{},ht(e,s,this._listeners),this}off(e,s){return $(e,s,this._listeners),$(e,s,this._oneTimeListeners),this}once(e,s){return this._oneTimeListeners=this._oneTimeListeners||{},ht(e,s,this._oneTimeListeners),this}fire(e,s){"string"==typeof e&&(e=new U(e,s||{}));const h=e.type;if(this.listens(h)){e.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const I of g)I.call(this,e);const x=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const I of x)$(h,I,this._oneTimeListeners),I.call(this,e);const w=this._eventedParent;w&&(He(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(e))}else e instanceof R&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,s){return this._eventedParent=e,this._eventedParentData=s,this}}var ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class fe{constructor(e,s,h,g){this.message=(e?`${e}: `:"")+h,g&&(this.identifier=g),null!=s&&s.__line__&&(this.line=s.__line__)}}function tt(r){const e=r.value;return e?[new fe(r.key,e,"constants have been deprecated as of v8")]:[]}function It(r,...e){for(const s of e)for(const h in s)r[h]=s[h];return r}function _t(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function mn(r){if(Array.isArray(r))return r.map(mn);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const s in r)e[s]=mn(r[s]);return e}return _t(r)}class _n extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}class Vn{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[h,g]of s)this.bindings[h]=g}concat(e){return new Vn(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const yi={kind:"null"},en={kind:"number"},pn={kind:"string"},qt={kind:"boolean"},Ai={kind:"color"},Qn={kind:"object"},Ln={kind:"value"},Bt={kind:"collator"},pt={kind:"formatted"},Ce={kind:"resolvedImage"};function Ae(r,e){return{kind:"array",itemType:r,N:e}}function ye(r){if("array"===r.kind){const e=ye(r.itemType);return"number"==typeof r.N?`array<${e}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${e}>`}return r.kind}const lt=[yi,en,pn,qt,Ai,pt,Qn,Ae(Ln),Ce];function Pt(r,e){if("error"===e.kind)return null;if("array"===r.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Pt(r.itemType,e.itemType))&&("number"!=typeof r.N||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if("value"===r.kind)for(const s of lt)if(!Pt(s,e))return null}return`Expected ${ye(r)} but found ${ye(e)} instead.`}function fn(r,e){return e.some(s=>s.kind===r.kind)}function bi(r,e){return e.some(s=>"null"===s?null===r:"array"===s?Array.isArray(r):"object"===s?r&&!Array.isArray(r)&&"object"==typeof r:s===typeof r)}var Ui,tr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function St(r){return(r=Math.round(r))<0?0:r>255?255:r}function it(r){return St("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function J(r){return(e="%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))<0?0:e>1?1:e;var e}function F(r,e,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?r+(e-r)*s*6:2*s<1?e:3*s<2?r+(e-r)*(2/3-s)*6:r}try{Ui={}.parseCSSColor=function(r){var e,s=r.replace(/ /g,"").toLowerCase();if(s in tr)return tr[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var h=s.indexOf("("),g=s.indexOf(")");if(-1!==h&&g+1===s.length){var x=s.substr(0,h),w=s.substr(h+1,g-(h+1)).split(","),I=1;switch(x){case"rgba":if(4!==w.length)return null;I=J(w.pop());case"rgb":return 3!==w.length?null:[it(w[0]),it(w[1]),it(w[2]),I];case"hsla":if(4!==w.length)return null;I=J(w.pop());case"hsl":if(3!==w.length)return null;var L=(parseFloat(w[0])%360+360)%360/360,ee=J(w[1]),oe=J(w[2]),ae=oe<=.5?oe*(ee+1):oe+ee-oe*ee,me=2*oe-ae;return[St(255*F(me,ae,L+1/3)),St(255*F(me,ae,L)),St(255*F(me,ae,L-1/3)),I];default:return null}}return null}}catch(r){}class K{constructor(e,s,h,g=1){this.r=e,this.g=s,this.b=h,this.a=g}static parse(e){if(!e)return;if(e instanceof K)return e;if("string"!=typeof e)return;const s=Ui(e);return s?new K(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[e,s,h,g]=this.toArray();return`rgba(${Math.round(e)},${Math.round(s)},${Math.round(h)},${g})`}toArray(){const{r:e,g:s,b:h,a:g}=this;return 0===g?[0,0,0,0]:[255*e/g,255*s/g,255*h/g,g]}}K.black=new K(0,0,0,1),K.white=new K(1,1,1,1),K.transparent=new K(0,0,0,0),K.red=new K(1,0,0,1);class ge{constructor(e,s,h){this.sensitivity=e?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ee{constructor(e,s,h,g,x){this.text=e,this.image=s,this.scale=h,this.fontStack=g,this.textColor=x}}class Re{constructor(e){this.sections=e}static fromString(e){return new Re([new Ee(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Re?e:Re.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const s of this.sections){if(s.image){e.push(["image",s.image.name]);continue}e.push(s.text);const h={};s.fontStack&&(h["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(h["font-scale"]=s.scale),s.textColor&&(h["text-color"]=["rgba"].concat(s.textColor.toArray())),e.push(h)}return e}}class Ke{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ke({name:e,available:!1}):null}serialize(){return["image",this.name]}}function $e(r,e,s,h){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[r,e,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[r,e,s,h]:[r,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nt(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof K||r instanceof ge||r instanceof Re||r instanceof Ke)return!0;if(Array.isArray(r)){for(const e of r)if(!nt(e))return!1;return!0}if("object"==typeof r){for(const e in r)if(!nt(r[e]))return!1;return!0}return!1}function at(r){if(null===r)return yi;if("string"==typeof r)return pn;if("boolean"==typeof r)return qt;if("number"==typeof r)return en;if(r instanceof K)return Ai;if(r instanceof ge)return Bt;if(r instanceof Re)return pt;if(r instanceof Ke)return Ce;if(Array.isArray(r)){const e=r.length;let s;for(const h of r){const g=at(h);if(s){if(s===g)continue;s=Ln;break}s=g}return Ae(s||Ln,e)}return Qn}function Nt(r){const e=typeof r;return null===r?"":"string"===e||"number"===e||"boolean"===e?String(r):r instanceof K||r instanceof Re||r instanceof Ke?r.toString():JSON.stringify(r)}class rn{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(2!==e.length)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!nt(e[1]))return s.error("invalid value");const h=e[1];let g=at(h);const x=s.expectedType;return"array"!==g.kind||0!==g.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(g=x),new rn(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof K?["rgba"].concat(this.value.toArray()):this.value instanceof Re?this.value.serialize():this.value}}class Rt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Vt={string:pn,number:en,boolean:qt,object:Qn};class an{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let h,g=1;const x=e[0];if("array"===x){let I,L;if(e.length>2){const ee=e[1];if("string"!=typeof ee||!(ee in Vt)||"object"===ee)return s.error('The item type argument of "array" must be one of string, number, boolean',1);I=Vt[ee],g++}else I=Ln;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);L=e[2],g++}h=Ae(I,L)}else h=Vt[x];const w=[];for(;g<e.length;g++){const I=s.parse(e[g],g,Ln);if(!I)return null;w.push(I)}return new an(h,w)}evaluate(e){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(e);if(!Pt(this.type,at(h)))return h;if(s===this.args.length-1)throw new Rt(`Expected value to be of type ${ye(this.type)}, but found ${ye(at(h))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,s=[e.kind];if("array"===e.kind){const h=e.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){s.push(h.kind);const g=e.N;("number"==typeof g||this.args.length>1)&&s.push(g)}}return s.concat(this.args.map(h=>h.serialize()))}}class Cn{constructor(e){this.type=pt,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const h=e[1];if(!Array.isArray(h)&&"object"==typeof h)return s.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=e.length-1;++w){const I=e[w];if(x&&"object"==typeof I&&!Array.isArray(I)){x=!1;let L=null;if(I["font-scale"]&&(L=s.parse(I["font-scale"],1,en),!L))return null;let ee=null;if(I["text-font"]&&(ee=s.parse(I["text-font"],1,Ae(pn)),!ee))return null;let oe=null;if(I["text-color"]&&(oe=s.parse(I["text-color"],1,Ai),!oe))return null;const ae=g[g.length-1];ae.scale=L,ae.font=ee,ae.textColor=oe}else{const L=s.parse(e[w],1,Ln);if(!L)return null;const ee=L.type.kind;if("string"!==ee&&"value"!==ee&&"null"!==ee&&"resolvedImage"!==ee)return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:L,scale:null,font:null,textColor:null})}}return new Cn(g)}evaluate(e){return new Re(this.sections.map(s=>{const h=s.content.evaluate(e);return at(h)===Ce?new Ee("",h,null,null,null):new Ee(Nt(h),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)}))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const s of this.sections){e.push(s.content.serialize());const h={};s.scale&&(h["font-scale"]=s.scale.serialize()),s.font&&(h["text-font"]=s.font.serialize()),s.textColor&&(h["text-color"]=s.textColor.serialize()),e.push(h)}return e}}class Un{constructor(e){this.type=Ce,this.input=e}static parse(e,s){if(2!==e.length)return s.error("Expected two arguments.");const h=s.parse(e[1],1,pn);return h?new Un(h):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),h=Ke.fromString(s);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(s)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Li={"to-boolean":qt,"to-color":Ai,"to-number":en,"to-string":pn};class ui{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const h=e[0];if(("to-boolean"===h||"to-string"===h)&&2!==e.length)return s.error("Expected one argument.");const g=Li[h],x=[];for(let w=1;w<e.length;w++){const I=s.parse(e[w],w,Ln);if(!I)return null;x.push(I)}return new ui(g,x)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let s,h;for(const g of this.args){if(s=g.evaluate(e),h=null,s instanceof K)return s;if("string"==typeof s){const x=e.parseColor(s);if(x)return x}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:$e(s[0],s[1],s[2],s[3]),!h))return new K(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Rt(h||`Could not parse color from value '${"string"==typeof s?s:String(JSON.stringify(s))}'`)}if("number"===this.type.kind){let s=null;for(const h of this.args){if(s=h.evaluate(e),null===s)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Rt(`Could not convert ${JSON.stringify(s)} to number.`)}return"formatted"===this.type.kind?Re.fromString(Nt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ke.fromString(Nt(this.args[0].evaluate(e))):Nt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Cn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Un(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(s=>{e.push(s.serialize())}),e}}const xi=["Unknown","Point","LineString","Polygon"];class Rn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?xi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=K.parse(e)),s}}class pi{constructor(e,s,h,g){this.name=e,this.type=s,this._evaluate=h,this.args=g}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,s){const h=e[0],g=pi.definitions[h];if(!g)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,I=w.filter(([ee])=>!Array.isArray(ee)||ee.length===e.length-1);let L=null;for(const[ee,oe]of I){L=new Kr(s.registry,s.path,null,s.scope);const ae=[];let me=!1;for(let Me=1;Me<e.length;Me++){const we=e[Me],Je=Array.isArray(ee)?ee[Me-1]:ee.type,Xe=L.parse(we,1+ae.length,Je);if(!Xe){me=!0;break}ae.push(Xe)}if(!me)if(Array.isArray(ee)&&ee.length!==ae.length)L.error(`Expected ${ee.length} arguments, but found ${ae.length} instead.`);else{for(let Me=0;Me<ae.length;Me++){const we=Array.isArray(ee)?ee[Me]:ee.type,Je=ae[Me];L.concat(Me+1).checkSubtype(we,Je.type)}if(0===L.errors.length)return new pi(h,x,oe,ae)}}if(1===I.length)s.errors.push(...L.errors);else{const ee=(I.length?I:w).map(([ae])=>{return me=ae,Array.isArray(me)?`(${me.map(ye).join(", ")})`:`(${ye(me.type)}...)`;var me}).join(" | "),oe=[];for(let ae=1;ae<e.length;ae++){const me=s.parse(e[ae],1+oe.length);if(!me)return null;oe.push(ye(me.type))}s.error(`Expected arguments of type ${ee}, but found (${oe.join(", ")}) instead.`)}return null}static register(e,s){pi.definitions=s;for(const h in s)e[h]=pi}}class ar{constructor(e,s,h){this.type=Bt,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(2!==e.length)return s.error("Expected one argument.");const h=e[1];if("object"!=typeof h||Array.isArray(h))return s.error("Collator options argument must be an object.");const g=s.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,qt);if(!g)return null;const x=s.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,qt);if(!x)return null;let w=null;return h.locale&&(w=s.parse(h.locale,1,pn),!w)?null:new ar(g,x,w)}evaluate(e){return new ge(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const si=8192;function wr(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function Ji(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Bo(r,e){const s=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,g=Math.pow(2,e.z);return[Math.round(s*g*si),Math.round(h*g*si)]}function zo(r,e,s){const h=r[0]-e[0],g=r[1]-e[1],x=r[0]-s[0],w=r[1]-s[1];return h*w-x*g==0&&h*x<=0&&g*w<=0}function Ri(r,e){let s=!1;for(let w=0,I=e.length;w<I;w++){const L=e[w];for(let ee=0,oe=L.length;ee<oe-1;ee++){if(zo(r,L[ee],L[ee+1]))return!1;(g=L[ee])[1]>(h=r)[1]!=(x=L[ee+1])[1]>h[1]&&h[0]<(x[0]-g[0])*(h[1]-g[1])/(x[1]-g[1])+g[0]&&(s=!s)}}var h,g,x;return s}function co(r,e){for(let s=0;s<e.length;s++)if(Ri(r,e[s]))return!0;return!1}function Vo(r,e,s,h){const g=h[0]-s[0],x=h[1]-s[1],w=(r[0]-s[0])*x-g*(r[1]-s[1]),I=(e[0]-s[0])*x-g*(e[1]-s[1]);return w>0&&I<0||w<0&&I>0}function _r(r,e,s){for(const ee of s)for(let oe=0;oe<ee.length-1;++oe)if((I=[(w=ee[oe+1])[0]-(x=ee[oe])[0],w[1]-x[1]])[0]*(L=[(g=e)[0]-(h=r)[0],g[1]-h[1]])[1]-I[1]*L[0]!=0&&Vo(h,g,x,w)&&Vo(x,w,h,g))return!0;var h,g,x,w,I,L;return!1}function Zi(r,e){for(let s=0;s<r.length;++s)if(!Ri(r[s],e))return!1;for(let s=0;s<r.length-1;++s)if(_r(r[s],r[s+1],e))return!1;return!0}function to(r,e){for(let s=0;s<e.length;s++)if(Zi(r,e[s]))return!0;return!1}function qo(r,e,s){const h=[];for(let g=0;g<r.length;g++){const x=[];for(let w=0;w<r[g].length;w++){const I=Bo(r[g][w],s);wr(e,I),x.push(I)}h.push(x)}return h}function Pr(r,e,s){const h=[];for(let g=0;g<r.length;g++){const x=qo(r[g],e,s);h.push(x)}return h}function Yr(r,e,s,h){if(r[0]<s[0]||r[0]>s[2]){const g=.5*h;let x=r[0]-s[0]>g?-h:s[0]-r[0]>g?h:0;0===x&&(x=r[0]-s[2]>g?-h:s[2]-r[0]>g?h:0),r[0]+=x}wr(e,r)}function Es(r,e,s,h){const g=Math.pow(2,h.z)*si,x=[h.x*si,h.y*si],w=[];for(const I of r)for(const L of I){const ee=[L.x+x[0],L.y+x[1]];Yr(ee,e,s,g),w.push(ee)}return w}function qs(r,e,s,h){const g=Math.pow(2,h.z)*si,x=[h.x*si,h.y*si],w=[];for(const L of r){const ee=[];for(const oe of L){const ae=[oe.x+x[0],oe.y+x[1]];wr(e,ae),ee.push(ae)}w.push(ee)}if(e[2]-e[0]<=g/2){(I=e)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const L of w)for(const ee of L)Yr(ee,e,s,g)}var I;return w}class no{constructor(e,s){this.type=qt,this.geojson=e,this.geometries=s}static parse(e,s){if(2!==e.length)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(nt(e[1])){const h=e[1];if("FeatureCollection"===h.type)for(let g=0;g<h.features.length;++g){const x=h.features[g].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new no(h,h.features[g].geometry)}else if("Feature"===h.type){const g=h.geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new no(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new no(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(s,h){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=s.canonicalID();if("Polygon"===h.type){const I=qo(h.coordinates,x,w),L=Es(s.geometry(),g,x,w);if(!Ji(g,x))return!1;for(const ee of L)if(!Ri(ee,I))return!1}if("MultiPolygon"===h.type){const I=Pr(h.coordinates,x,w),L=Es(s.geometry(),g,x,w);if(!Ji(g,x))return!1;for(const ee of L)if(!co(ee,I))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(s,h){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=s.canonicalID();if("Polygon"===h.type){const I=qo(h.coordinates,x,w),L=qs(s.geometry(),g,x,w);if(!Ji(g,x))return!1;for(const ee of L)if(!Zi(ee,I))return!1}if("MultiPolygon"===h.type){const I=Pr(h.coordinates,x,w),L=qs(s.geometry(),g,x,w);if(!Ji(g,x))return!1;for(const ee of L)if(!to(ee,I))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ar(r){if(r instanceof pi&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof no)return!1;let e=!0;return r.eachChild(s=>{e&&!Ar(s)&&(e=!1)}),e}function ns(r){if(r instanceof pi&&"feature-state"===r.name)return!1;let e=!0;return r.eachChild(s=>{e&&!ns(s)&&(e=!1)}),e}function is(r,e){if(r instanceof pi&&e.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild(h=>{s&&!is(h,e)&&(s=!1)}),s}class xo{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(2!==e.length||"string"!=typeof e[1])return s.error("'var' expression requires exactly one string literal argument.");const h=e[1];return s.scope.has(h)?new xo(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Kr{constructor(e,s=[],h,g=new Vn,x=[]){this.registry=e,this.path=s,this.key=s.map(w=>`[${w}]`).join(""),this.scope=g,this.errors=x,this.expectedType=h}parse(e,s,h,g,x={}){return s?this.concat(s,h,g)._parse(e,x):this._parse(e,x)}_parse(e,s){function h(g,x,w){return"assert"===w?new an(x,[g]):"coerce"===w?new ui(x,[g]):g}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=e[0];if("string"!=typeof g)return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(e,this);if(!w)return null;if(this.expectedType){const I=this.expectedType,L=w.type;if("string"!==I.kind&&"number"!==I.kind&&"boolean"!==I.kind&&"object"!==I.kind&&"array"!==I.kind||"value"!==L.kind)if("color"!==I.kind&&"formatted"!==I.kind&&"resolvedImage"!==I.kind||"value"!==L.kind&&"string"!==L.kind){if(this.checkSubtype(I,L))return null}else w=h(w,I,s.typeAnnotation||"coerce");else w=h(w,I,s.typeAnnotation||"assert")}if(!(w instanceof rn)&&"resolvedImage"!==w.type.kind&&Gr(w)){const I=new Rn;try{w=new rn(w.type,w.evaluate(I))}catch(L){return this.error(L.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,s,h){const g="number"==typeof e?this.path.concat(e):this.path,x=h?this.scope.concat(h):this.scope;return new Kr(this.registry,g,s||null,x,this.errors)}error(e,...s){const h=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new _n(h,e))}checkSubtype(e,s){const h=Pt(e,s);return h&&this.error(h),h}}function Gr(r){if(r instanceof xo)return Gr(r.boundExpression);if(r instanceof pi&&"error"===r.name||r instanceof ar||r instanceof no)return!1;const e=r instanceof ui||r instanceof an;let s=!0;return r.eachChild(h=>{s=e?s&&Gr(h):s&&h instanceof rn}),!!s&&Ar(r)&&is(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Uo(r,e){const s=r.length-1;let h,g,x=0,w=s,I=0;for(;x<=w;)if(I=Math.floor((x+w)/2),h=r[I],g=r[I+1],h<=e){if(I===s||e<g)return I;x=I+1}else{if(!(h>e))throw new Rt("Input is not a number.");w=I-1}return 0}class Ds{constructor(e,s,h){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[g,x]of h)this.labels.push(g),this.outputs.push(x)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(e[1],1,en);if(!h)return null;const g=[];let x=null;s.expectedType&&"value"!==s.expectedType.kind&&(x=s.expectedType);for(let w=1;w<e.length;w+=2){const I=1===w?-1/0:e[w],L=e[w+1],ee=w,oe=w+1;if("number"!=typeof I)return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(g.length&&g[g.length-1][0]>=I)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const ae=s.parse(L,oe,x);if(!ae)return null;x=x||ae.type,g.push([I,ae])}return new Ds(x,h,g)}evaluate(e){const s=this.labels,h=this.outputs;if(1===s.length)return h[0].evaluate(e);const g=this.input.evaluate(e);if(g<=s[0])return h[0].evaluate(e);const x=s.length;return g>=s[x-1]?h[x-1].evaluate(e):h[Uo(s,g)].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&e.push(this.labels[s]),e.push(this.outputs[s].serialize());return e}}function Fr(r,e,s){return r*(1-s)+e*s}var rs=Object.freeze({__proto__:null,number:Fr,color:function(r,e,s){return new K(Fr(r.r,e.r,s),Fr(r.g,e.g,s),Fr(r.b,e.b,s),Fr(r.a,e.a,s))},array:function(r,e,s){return r.map((h,g)=>Fr(h,e[g],s))}});const Ss=4/29,Jr=6/29,da=3*Jr*Jr,Bs=Math.PI/180,wa=180/Math.PI;function ha(r){return r>.008856451679035631?Math.pow(r,1/3):r/da+Ss}function Ys(r){return r>Jr?r*r*r:da*(r-Ss)}function os(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function go(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Ra(r){const e=go(r.r),s=go(r.g),h=go(r.b),g=ha((.4124564*e+.3575761*s+.1804375*h)/.95047),x=ha((.2126729*e+.7151522*s+.072175*h)/1);return{l:116*x-16,a:500*(g-x),b:200*(x-ha((.0193339*e+.119192*s+.9503041*h)/1.08883)),alpha:r.a}}function Fi(r){let e=(r.l+16)/116,s=isNaN(r.a)?e:e+r.a/500,h=isNaN(r.b)?e:e-r.b/200;return e=1*Ys(e),s=.95047*Ys(s),h=1.08883*Ys(h),new K(os(3.2404542*s-1.5371385*e-.4985314*h),os(-.969266*s+1.8760108*e+.041556*h),os(.0556434*s-.2040259*e+1.0572252*h),r.alpha)}function qa(r,e,s){const h=e-r;return r+s*(h>180||h<-180?h-360*Math.round(h/360):h)}const So={forward:Ra,reverse:Fi,interpolate:function(r,e,s){return{l:Fr(r.l,e.l,s),a:Fr(r.a,e.a,s),b:Fr(r.b,e.b,s),alpha:Fr(r.alpha,e.alpha,s)}}},fs={forward:function(r){const{l:e,a:s,b:h}=Ra(r),g=Math.atan2(h,s)*wa;return{h:g<0?g+360:g,c:Math.sqrt(s*s+h*h),l:e,alpha:r.a}},reverse:function(r){const e=r.h*Bs,s=r.c;return Fi({l:r.l,a:Math.cos(e)*s,b:Math.sin(e)*s,alpha:r.alpha})},interpolate:function(r,e,s){return{h:qa(r.h,e.h,s),c:Fr(r.c,e.c,s),l:Fr(r.l,e.l,s),alpha:Fr(r.alpha,e.alpha,s)}}};var Yo=Object.freeze({__proto__:null,lab:So,hcl:fs});class Or{constructor(e,s,h,g,x){this.type=e,this.operator=s,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[w,I]of x)this.labels.push(w),this.outputs.push(I)}static interpolationFactor(e,s,h,g){let x=0;if("exponential"===e.name)x=wo(s,e.base,h,g);else if("linear"===e.name)x=wo(s,1,h,g);else if("cubic-bezier"===e.name){const w=e.controlPoints;x=new je(w[0],w[1],w[2],w[3]).solve(wo(s,1,h,g))}return x}static parse(e,s){let[h,g,x,...w]=e;if(!Array.isArray(g)||0===g.length)return s.error("Expected an interpolation type expression.",1);if("linear"===g[0])g={name:"linear"};else if("exponential"===g[0]){const ee=g[1];if("number"!=typeof ee)return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:ee}}else{if("cubic-bezier"!==g[0])return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const ee=g.slice(1);if(4!==ee.length||ee.some(oe=>"number"!=typeof oe||oe<0||oe>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:ee}}}if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(x=s.parse(x,2,en),!x)return null;const I=[];let L=null;"interpolate-hcl"===h||"interpolate-lab"===h?L=Ai:s.expectedType&&"value"!==s.expectedType.kind&&(L=s.expectedType);for(let ee=0;ee<w.length;ee+=2){const oe=w[ee],ae=w[ee+1],me=ee+3,Me=ee+4;if("number"!=typeof oe)return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',me);if(I.length&&I[I.length-1][0]>=oe)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',me);const we=s.parse(ae,Me,L);if(!we)return null;L=L||we.type,I.push([oe,we])}return"number"===L.kind||"color"===L.kind||"array"===L.kind&&"number"===L.itemType.kind&&"number"==typeof L.N?new Or(L,h,g,x,I):s.error(`Type ${ye(L)} is not interpolatable.`)}evaluate(e){const s=this.labels,h=this.outputs;if(1===s.length)return h[0].evaluate(e);const g=this.input.evaluate(e);if(g<=s[0])return h[0].evaluate(e);const x=s.length;if(g>=s[x-1])return h[x-1].evaluate(e);const w=Uo(s,g),I=Or.interpolationFactor(this.interpolation,g,s[w],s[w+1]),L=h[w].evaluate(e),ee=h[w+1].evaluate(e);return"interpolate"===this.operator?rs[this.type.kind.toLowerCase()](L,ee,I):"interpolate-hcl"===this.operator?fs.reverse(fs.interpolate(fs.forward(L),fs.forward(ee),I)):So.reverse(So.interpolate(So.forward(L),So.forward(ee),I))}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,e,this.input.serialize()];for(let h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s}}function wo(r,e,s,h){const g=h-s,x=r-s;return 0===g?0:1===e?x/g:(Math.pow(e,x)-1)/(Math.pow(e,g)-1)}class ms{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let h=null;const g=s.expectedType;g&&"value"!==g.kind&&(h=g);const x=[];for(const I of e.slice(1)){const L=s.parse(I,1+x.length,h,void 0,{typeAnnotation:"omit"});if(!L)return null;h=h||L.type,x.push(L)}const w=g&&x.some(I=>Pt(g,I.type));return new ms(w?Ln:h,x)}evaluate(e){let s,h=null,g=0;for(const x of this.args)if(g++,h=x.evaluate(e),h&&h instanceof Ke&&!h.available&&(s||(s=h.name),h=null,g===this.args.length&&(h=s)),null!==h)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class jo{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const h=[];for(let x=1;x<e.length-1;x+=2){const w=e[x];if("string"!=typeof w)return s.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);const I=s.parse(e[x+1],x+1);if(!I)return null;h.push([w,I])}const g=s.parse(e[e.length-1],e.length-1,s.expectedType,h);return g?new jo(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[s,h]of this.bindings)e.push(s,h.serialize());return e.push(this.result.serialize()),e}}class ss{constructor(e,s,h){this.type=e,this.index=s,this.input=h}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,en),g=s.parse(e[2],2,Ae(s.expectedType||Ln));return h&&g?new ss(g.type.itemType,h,g):null}evaluate(e){const s=this.index.evaluate(e),h=this.input.evaluate(e);if(s<0)throw new Rt(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Rt(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Rt(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class gs{constructor(e,s){this.type=qt,this.needle=e,this.haystack=s}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Ln),g=s.parse(e[2],2,Ln);return h&&g?fn(h.type,[qt,pn,en,yi,Ln])?new gs(h,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(h.type)} instead`):null}evaluate(e){const s=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!bi(s,["boolean","string","number","null"]))throw new Rt(`Expected first argument to be of type boolean, string, number or null, but found ${ye(at(s))} instead.`);if(!bi(h,["string","array"]))throw new Rt(`Expected second argument to be of type array or string, but found ${ye(at(h))} instead.`);return h.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class as{constructor(e,s,h){this.type=en,this.needle=e,this.haystack=s,this.fromIndex=h}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Ln),g=s.parse(e[2],2,Ln);if(!h||!g)return null;if(!fn(h.type,[qt,pn,en,yi,Ln]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(h.type)} instead`);if(4===e.length){const x=s.parse(e[3],3,en);return x?new as(h,g,x):null}return new as(h,g)}evaluate(e){const s=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!bi(s,["boolean","string","number","null"]))throw new Rt(`Expected first argument to be of type boolean, string, number or null, but found ${ye(at(s))} instead.`);if(!bi(h,["string","array"]))throw new Rt(`Expected second argument to be of type array or string, but found ${ye(at(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(e);return h.indexOf(s,g)}return h.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class zs{constructor(e,s,h,g,x,w){this.inputType=e,this.type=s,this.input=h,this.cases=g,this.outputs=x,this.otherwise=w}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return s.error("Expected an even number of arguments.");let h,g;s.expectedType&&"value"!==s.expectedType.kind&&(g=s.expectedType);const x={},w=[];for(let ee=2;ee<e.length-1;ee+=2){let oe=e[ee];const ae=e[ee+1];Array.isArray(oe)||(oe=[oe]);const me=s.concat(ee);if(0===oe.length)return me.error("Expected at least one branch label.");for(const we of oe){if("number"!=typeof we&&"string"!=typeof we)return me.error("Branch labels must be numbers or strings.");if("number"==typeof we&&Math.abs(we)>Number.MAX_SAFE_INTEGER)return me.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof we&&Math.floor(we)!==we)return me.error("Numeric branch labels must be integer values.");if(h){if(me.checkSubtype(h,at(we)))return null}else h=at(we);if(void 0!==x[String(we)])return me.error("Branch labels must be unique.");x[String(we)]=w.length}const Me=s.parse(ae,ee,g);if(!Me)return null;g=g||Me.type,w.push(Me)}const I=s.parse(e[1],1,Ln);if(!I)return null;const L=s.parse(e[e.length-1],e.length-1,g);return L?"value"!==I.type.kind&&s.concat(1).checkSubtype(h,I.type)?null:new zs(h,g,I,x,w,L):null}evaluate(e){const s=this.input.evaluate(e);return(at(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),h=[],g={};for(const w of s){const I=g[this.cases[w]];void 0===I?(g[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[I][1].push(w)}const x=w=>"number"===this.inputType.kind?Number(w):w;for(const[w,I]of h)e.push(1===I.length?x(I[0]):I.map(x)),e.push(this.outputs[w].serialize());return e.push(this.otherwise.serialize()),e}}class uo{constructor(e,s,h){this.type=e,this.branches=s,this.otherwise=h}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&"value"!==s.expectedType.kind&&(h=s.expectedType);const g=[];for(let w=1;w<e.length-1;w+=2){const I=s.parse(e[w],w,qt);if(!I)return null;const L=s.parse(e[w+1],w+1,h);if(!L)return null;g.push([I,L]),h=h||L.type}const x=s.parse(e[e.length-1],e.length-1,h);return x?new uo(h,g,x):null}evaluate(e){for(const[s,h]of this.branches)if(s.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,h]of this.branches)e(s),e(h);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class Ts{constructor(e,s,h,g){this.type=e,this.input=s,this.beginIndex=h,this.endIndex=g}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Ln),g=s.parse(e[2],2,en);if(!h||!g)return null;if(!fn(h.type,[Ae(Ln),pn,Ln]))return s.error(`Expected first argument to be of type array or string, but found ${ye(h.type)} instead`);if(4===e.length){const x=s.parse(e[3],3,en);return x?new Ts(h.type,h,g,x):null}return new Ts(h.type,h,g)}evaluate(e){const s=this.input.evaluate(e),h=this.beginIndex.evaluate(e);if(!bi(s,["string","array"]))throw new Rt(`Expected first argument to be of type array or string, but found ${ye(at(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(e);return s.slice(h,g)}return s.slice(h)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Vs(r,e){return"=="===r||"!="===r?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ho(r,e,s,h){return 0===h.compare(e,s)}function ls(r,e,s){const h="=="!==r&&"!="!==r;return class Wx{constructor(x,w,I){this.type=qt,this.lhs=x,this.rhs=w,this.collator=I,this.hasUntypedArgument="value"===x.type.kind||"value"===w.type.kind}static parse(x,w){if(3!==x.length&&4!==x.length)return w.error("Expected two or three arguments.");const I=x[0];let L=w.parse(x[1],1,Ln);if(!L)return null;if(!Vs(I,L.type))return w.concat(1).error(`"${I}" comparisons are not supported for type '${ye(L.type)}'.`);let ee=w.parse(x[2],2,Ln);if(!ee)return null;if(!Vs(I,ee.type))return w.concat(2).error(`"${I}" comparisons are not supported for type '${ye(ee.type)}'.`);if(L.type.kind!==ee.type.kind&&"value"!==L.type.kind&&"value"!==ee.type.kind)return w.error(`Cannot compare types '${ye(L.type)}' and '${ye(ee.type)}'.`);h&&("value"===L.type.kind&&"value"!==ee.type.kind?L=new an(ee.type,[L]):"value"!==L.type.kind&&"value"===ee.type.kind&&(ee=new an(L.type,[ee])));let oe=null;if(4===x.length){if("string"!==L.type.kind&&"string"!==ee.type.kind&&"value"!==L.type.kind&&"value"!==ee.type.kind)return w.error("Cannot use collator to compare non-string types.");if(oe=w.parse(x[3],3,Bt),!oe)return null}return new Wx(L,ee,oe)}evaluate(x){const w=this.lhs.evaluate(x),I=this.rhs.evaluate(x);if(h&&this.hasUntypedArgument){const L=at(w),ee=at(I);if(L.kind!==ee.kind||"string"!==L.kind&&"number"!==L.kind)throw new Rt(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${L.kind}, ${ee.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const L=at(w),ee=at(I);if("string"!==L.kind||"string"!==ee.kind)return e(x,w,I)}return this.collator?s(x,w,I,this.collator.evaluate(x)):e(x,w,I)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[r];return this.eachChild(w=>{x.push(w.serialize())}),x}}}const As=ls("==",function(r,e,s){return e===s},ho),Ks=ls("!=",function(r,e,s){return e!==s},function(r,e,s,h){return!ho(0,e,s,h)}),yr=ls("<",function(r,e,s){return e<s},function(r,e,s,h){return h.compare(e,s)<0}),pa=ls(">",function(r,e,s){return e>s},function(r,e,s,h){return h.compare(e,s)>0}),Fa=ls("<=",function(r,e,s){return e<=s},function(r,e,s,h){return h.compare(e,s)<=0}),kr=ls(">=",function(r,e,s){return e>=s},function(r,e,s,h){return h.compare(e,s)>=0});class te{constructor(e,s,h,g,x){this.type=pn,this.number=e,this.locale=s,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(e,s){if(3!==e.length)return s.error("Expected two arguments.");const h=s.parse(e[1],1,en);if(!h)return null;const g=e[2];if("object"!=typeof g||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=s.parse(g.locale,1,pn),!x))return null;let w=null;if(g.currency&&(w=s.parse(g.currency,1,pn),!w))return null;let I=null;if(g["min-fraction-digits"]&&(I=s.parse(g["min-fraction-digits"],1,en),!I))return null;let L=null;return g["max-fraction-digits"]&&(L=s.parse(g["max-fraction-digits"],1,en),!L)?null:new te(h,x,w,I,L)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ve{constructor(e){this.type=en,this.input=e}static parse(e,s){if(2!==e.length)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=s.parse(e[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?s.error(`Expected argument of type string or array, but found ${ye(h.type)} instead.`):new ve(h):null}evaluate(e){const s=this.input.evaluate(e);if("string"==typeof s||Array.isArray(s))return s.length;throw new Rt(`Expected value to be of type string or array, but found ${ye(at(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(s=>{e.push(s.serialize())}),e}}const ne={"==":As,"!=":Ks,">":pa,"<":yr,">=":kr,"<=":Fa,array:an,at:ss,boolean:an,case:uo,coalesce:ms,collator:ar,format:Cn,image:Un,in:gs,"index-of":as,interpolate:Or,"interpolate-hcl":Or,"interpolate-lab":Or,length:ve,let:jo,literal:rn,match:zs,number:an,"number-format":te,object:an,slice:Ts,step:Ds,string:an,"to-boolean":ui,"to-color":ui,"to-number":ui,"to-string":ui,var:xo,within:no};function De(r,[e,s,h,g]){e=e.evaluate(r),s=s.evaluate(r),h=h.evaluate(r);const x=g?g.evaluate(r):1,w=$e(e,s,h,x);if(w)throw new Rt(w);return new K(e/255*x,s/255*x,h/255*x,x)}function ut(r,e){return r in e}function Yt(r,e){const s=e[r];return void 0===s?null:s}function cn(r){return{type:r}}function Hn(r){return{result:"success",value:r}}function wi(r){return{result:"error",value:r}}function lr(r){return"data-driven"===r["property-type"]||"cross-faded-data-driven"===r["property-type"]}function Cr(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function ji(r){return!!r.expression&&r.expression.interpolated}function X(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function q(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function N(r){return r}function Se(r,e){const s="color"===e.type,h=r.stops&&"object"==typeof r.stops[0][0],g=h||!(h||void 0!==r.property),x=r.type||(ji(e)?"exponential":"interval");if(s&&((r=It({},r)).stops&&(r.stops=r.stops.map(ee=>[ee[0],K.parse(ee[1])])),r.default=K.parse(r.default?r.default:e.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!Yo[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let w,I,L;if("exponential"===x)w=$r;else if("interval"===x)w=hr;else if("categorical"===x){w=Fn,I=Object.create(null);for(const ee of r.stops)I[ee[0]]=ee[1];L=typeof r.stops[0][0]}else{if("identity"!==x)throw new Error(`Unknown function type "${x}"`);w=Is}if(h){const ee={},oe=[];for(let Me=0;Me<r.stops.length;Me++){const we=r.stops[Me],Je=we[0].zoom;void 0===ee[Je]&&(ee[Je]={zoom:Je,type:r.type,property:r.property,default:r.default,stops:[]},oe.push(Je)),ee[Je].stops.push([we[0].value,we[1]])}const ae=[];for(const Me of oe)ae.push([ee[Me].zoom,Se(ee[Me],e)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Or.interpolationFactor.bind(void 0,me),zoomStops:ae.map(Me=>Me[0]),evaluate:({zoom:Me},we)=>$r({stops:ae,base:r.base},e,Me).evaluate(Me,we)}}if(g){const ee="exponential"===x?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:Or.interpolationFactor.bind(void 0,ee),zoomStops:r.stops.map(oe=>oe[0]),evaluate:({zoom:oe})=>w(r,e,oe,I,L)}}return{kind:"source",evaluate(ee,oe){const ae=oe&&oe.properties?oe.properties[r.property]:void 0;return void 0===ae?Lt(r.default,e.default):w(r,e,ae,I,L)}}}function Lt(r,e,s){return void 0!==r?r:void 0!==e?e:void 0!==s?s:void 0}function Fn(r,e,s,h,g){return Lt(typeof s===g?h[s]:void 0,r.default,e.default)}function hr(r,e,s){if("number"!==X(s))return Lt(r.default,e.default);const h=r.stops.length;if(1===h||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];const g=Uo(r.stops.map(x=>x[0]),s);return r.stops[g][1]}function $r(r,e,s){const h=void 0!==r.base?r.base:1;if("number"!==X(s))return Lt(r.default,e.default);const g=r.stops.length;if(1===g||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[g-1][0])return r.stops[g-1][1];const x=Uo(r.stops.map(oe=>oe[0]),s),w=function(oe,ae,me,Me){const we=Me-me,Je=oe-me;return 0===we?0:1===ae?Je/we:(Math.pow(ae,Je)-1)/(Math.pow(ae,we)-1)}(s,h,r.stops[x][0],r.stops[x+1][0]),I=r.stops[x][1],L=r.stops[x+1][1];let ee=rs[e.type]||N;if(r.colorSpace&&"rgb"!==r.colorSpace){const oe=Yo[r.colorSpace];ee=(ae,me)=>oe.reverse(oe.interpolate(oe.forward(ae),oe.forward(me),w))}return"function"==typeof I.evaluate?{evaluate(...oe){const ae=I.evaluate.apply(void 0,oe),me=L.evaluate.apply(void 0,oe);if(void 0!==ae&&void 0!==me)return ee(ae,me,w)}}:ee(I,L,w)}function Is(r,e,s){return"color"===e.type?s=K.parse(s):"formatted"===e.type?s=Re.fromString(s.toString()):"resolvedImage"===e.type?s=Ke.fromString(s.toString()):X(s)===e.type||"enum"===e.type&&e.values[s]||(s=void 0),Lt(s,r.default,e.default)}pi.register(ne,{error:[{kind:"error"},[pn],(r,[e])=>{throw new Rt(e.evaluate(r))}],typeof:[pn,[Ln],(r,[e])=>ye(at(e.evaluate(r)))],"to-rgba":[Ae(en,4),[Ai],(r,[e])=>e.evaluate(r).toArray()],rgb:[Ai,[en,en,en],De],rgba:[Ai,[en,en,en,en],De],has:{type:qt,overloads:[[[pn],(r,[e])=>ut(e.evaluate(r),r.properties())],[[pn,Qn],(r,[e,s])=>ut(e.evaluate(r),s.evaluate(r))]]},get:{type:Ln,overloads:[[[pn],(r,[e])=>Yt(e.evaluate(r),r.properties())],[[pn,Qn],(r,[e,s])=>Yt(e.evaluate(r),s.evaluate(r))]]},"feature-state":[Ln,[pn],(r,[e])=>Yt(e.evaluate(r),r.featureState||{})],properties:[Qn,[],r=>r.properties()],"geometry-type":[pn,[],r=>r.geometryType()],id:[Ln,[],r=>r.id()],zoom:[en,[],r=>r.globals.zoom],"heatmap-density":[en,[],r=>r.globals.heatmapDensity||0],"line-progress":[en,[],r=>r.globals.lineProgress||0],accumulated:[Ln,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[en,cn(en),(r,e)=>{let s=0;for(const h of e)s+=h.evaluate(r);return s}],"*":[en,cn(en),(r,e)=>{let s=1;for(const h of e)s*=h.evaluate(r);return s}],"-":{type:en,overloads:[[[en,en],(r,[e,s])=>e.evaluate(r)-s.evaluate(r)],[[en],(r,[e])=>-e.evaluate(r)]]},"/":[en,[en,en],(r,[e,s])=>e.evaluate(r)/s.evaluate(r)],"%":[en,[en,en],(r,[e,s])=>e.evaluate(r)%s.evaluate(r)],ln2:[en,[],()=>Math.LN2],pi:[en,[],()=>Math.PI],e:[en,[],()=>Math.E],"^":[en,[en,en],(r,[e,s])=>Math.pow(e.evaluate(r),s.evaluate(r))],sqrt:[en,[en],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[en,[en],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[en,[en],(r,[e])=>Math.log(e.evaluate(r))],log2:[en,[en],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[en,[en],(r,[e])=>Math.sin(e.evaluate(r))],cos:[en,[en],(r,[e])=>Math.cos(e.evaluate(r))],tan:[en,[en],(r,[e])=>Math.tan(e.evaluate(r))],asin:[en,[en],(r,[e])=>Math.asin(e.evaluate(r))],acos:[en,[en],(r,[e])=>Math.acos(e.evaluate(r))],atan:[en,[en],(r,[e])=>Math.atan(e.evaluate(r))],min:[en,cn(en),(r,e)=>Math.min(...e.map(s=>s.evaluate(r)))],max:[en,cn(en),(r,e)=>Math.max(...e.map(s=>s.evaluate(r)))],abs:[en,[en],(r,[e])=>Math.abs(e.evaluate(r))],round:[en,[en],(r,[e])=>{const s=e.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[en,[en],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[en,[en],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[qt,[pn,Ln],(r,[e,s])=>r.properties()[e.value]===s.value],"filter-id-==":[qt,[Ln],(r,[e])=>r.id()===e.value],"filter-type-==":[qt,[pn],(r,[e])=>r.geometryType()===e.value],"filter-<":[qt,[pn,Ln],(r,[e,s])=>{const h=r.properties()[e.value],g=s.value;return typeof h==typeof g&&h<g}],"filter-id-<":[qt,[Ln],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s<h}],"filter->":[qt,[pn,Ln],(r,[e,s])=>{const h=r.properties()[e.value],g=s.value;return typeof h==typeof g&&h>g}],"filter-id->":[qt,[Ln],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s>h}],"filter-<=":[qt,[pn,Ln],(r,[e,s])=>{const h=r.properties()[e.value],g=s.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[qt,[Ln],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s<=h}],"filter->=":[qt,[pn,Ln],(r,[e,s])=>{const h=r.properties()[e.value],g=s.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[qt,[Ln],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s>=h}],"filter-has":[qt,[Ln],(r,[e])=>e.value in r.properties()],"filter-has-id":[qt,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[qt,[Ae(pn)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[qt,[Ae(Ln)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[qt,[pn,Ae(Ln)],(r,[e,s])=>s.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[qt,[pn,Ae(Ln)],(r,[e,s])=>function(h,g,x,w){for(;x<=w;){const I=x+w>>1;if(g[I]===h)return!0;g[I]>h?w=I-1:x=I+1}return!1}(r.properties()[e.value],s.value,0,s.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(r,[e,s])=>e.evaluate(r)&&s.evaluate(r)],[cn(qt),(r,e)=>{for(const s of e)if(!s.evaluate(r))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(r,[e,s])=>e.evaluate(r)||s.evaluate(r)],[cn(qt),(r,e)=>{for(const s of e)if(s.evaluate(r))return!0;return!1}]]},"!":[qt,[qt],(r,[e])=>!e.evaluate(r)],"is-supported-script":[qt,[pn],(r,[e])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(e.evaluate(r))}],upcase:[pn,[pn],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[pn,[pn],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[pn,cn(Ln),(r,e)=>e.map(s=>Nt(s.evaluate(r))).join("")],"resolved-locale":[pn,[Bt],(r,[e])=>e.evaluate(r).resolvedLocale()]});class To{constructor(e,s){var h;this.expression=e,this._warningHistory={},this._evaluator=new Rn,this._defaultValue=s?"color"===(h=s).type&&q(h.default)?new K(0,0,0,0):"color"===h.type?K.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=s&&"enum"===s.type?s.values:null}evaluateWithoutErrorHandling(e,s,h,g,x,w){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(e,s,h,g,x,w){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const I=this.expression.evaluate(this._evaluator);if(null==I||"number"==typeof I&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Rt(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,"undefined"!=typeof console&&console.warn(I.message)),this._defaultValue}}}function yn(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in ne}function ue(r,e){const s=new Kr(ne,[],e?function(g){const x={color:Ai,string:pn,number:en,enum:pn,boolean:qt,formatted:pt,resolvedImage:Ce};return"array"===g.type?Ae(x[g.value]||Ln,g.length):x[g.type]}(e):void 0),h=s.parse(r,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return h?Hn(new To(h,e)):wi(s.errors)}class M{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent="constant"!==e&&!ns(s.expression)}evaluateWithoutErrorHandling(e,s,h,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(e,s,h,g,x,w)}evaluate(e,s,h,g,x,w){return this._styleExpression.evaluate(e,s,h,g,x,w)}}class S{constructor(e,s,h,g){this.kind=e,this.zoomStops=h,this._styleExpression=s,this.isStateDependent="camera"!==e&&!ns(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(e,s,h,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(e,s,h,g,x,w)}evaluate(e,s,h,g,x,w){return this._styleExpression.evaluate(e,s,h,g,x,w)}interpolationFactor(e,s,h){return this.interpolationType?Or.interpolationFactor(this.interpolationType,e,s,h):0}}function H(r,e){const s=ue(r,e);if("error"===s.result)return s;const h=s.value.expression,g=Ar(h);if(!g&&!lr(e))return wi([new _n("","data expressions not supported")]);const x=is(h,["zoom"]);if(!x&&!Cr(e))return wi([new _n("","zoom expressions not supported")]);const w=Te(h);return w||x?w instanceof _n?wi([w]):w instanceof Or&&!ji(e)?wi([new _n("",'"interpolate" expressions cannot be used with this property')]):Hn(w?new S(g?"camera":"composite",s.value,w.labels,w instanceof Or?w.interpolation:void 0):new M(g?"constant":"source",s.value)):wi([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class de{constructor(e,s){this._parameters=e,this._specification=s,It(this,Se(this._parameters,this._specification))}static deserialize(e){return new de(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Te(r){let e=null;if(r instanceof jo)e=Te(r.result);else if(r instanceof ms){for(const s of r.args)if(e=Te(s),e)break}else(r instanceof Ds||r instanceof Or)&&r.input instanceof pi&&"zoom"===r.input.name&&(e=r);return e instanceof _n||r.eachChild(s=>{const h=Te(s);h instanceof _n?e=h:!e&&h?e=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ue(r){const e=r.key,s=r.value,h=r.valueSpec||{},g=r.objectElementValidators||{},x=r.style,w=r.styleSpec;let I=[];const L=X(s);if("object"!==L)return[new fe(e,s,`object expected, ${L} found`)];for(const ee in s){const oe=ee.split(".")[0],ae=h[oe]||h["*"];let me;if(g[oe])me=g[oe];else if(h[oe])me=ai;else if(g["*"])me=g["*"];else{if(!h["*"]){I.push(new fe(e,s[ee],`unknown property "${ee}"`));continue}me=ai}I=I.concat(me({key:(e&&`${e}.`)+ee,value:s[ee],valueSpec:ae,style:x,styleSpec:w,object:s,objectKey:ee},s))}for(const ee in h)g[ee]||h[ee].required&&void 0===h[ee].default&&void 0===s[ee]&&I.push(new fe(e,s,`missing required property "${ee}"`));return I}function rt(r){const e=r.value,s=r.valueSpec,h=r.style,g=r.styleSpec,x=r.key,w=r.arrayElementValidator||ai;if("array"!==X(e))return[new fe(x,e,`array expected, ${X(e)} found`)];if(s.length&&e.length!==s.length)return[new fe(x,e,`array length ${s.length} expected, length ${e.length} found`)];if(s["min-length"]&&e.length<s["min-length"])return[new fe(x,e,`array length at least ${s["min-length"]} expected, length ${e.length} found`)];let I={type:s.value,values:s.values};g.$version<7&&(I.function=s.function),"object"===X(s.value)&&(I=s.value);let L=[];for(let ee=0;ee<e.length;ee++)L=L.concat(w({array:e,arrayIndex:ee,value:e[ee],valueSpec:I,style:h,styleSpec:g,key:`${x}[${ee}]`}));return L}function Ot(r){const e=r.key,s=r.value,h=r.valueSpec;let g=X(s);return"number"===g&&s!=s&&(g="NaN"),"number"!==g?[new fe(e,s,`number expected, ${g} found`)]:"minimum"in h&&s<h.minimum?[new fe(e,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new fe(e,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function sn(r){const e=r.valueSpec,s=_t(r.value.type);let h,g,x,w={};const I="categorical"!==s&&void 0===r.value.property,L=!I,ee="array"===X(r.value.stops)&&"array"===X(r.value.stops[0])&&"object"===X(r.value.stops[0][0]),oe=Ue({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(Me){if("identity"===s)return[new fe(Me.key,Me.value,'identity function may not have a "stops" property')];let we=[];const Je=Me.value;return we=we.concat(rt({key:Me.key,value:Je,valueSpec:Me.valueSpec,style:Me.style,styleSpec:Me.styleSpec,arrayElementValidator:ae})),"array"===X(Je)&&0===Je.length&&we.push(new fe(Me.key,Je,"array must have at least one stop")),we},default:function(Me){return ai({key:Me.key,value:Me.value,valueSpec:e,style:Me.style,styleSpec:Me.styleSpec})}}});return"identity"===s&&I&&oe.push(new fe(r.key,r.value,'missing required property "property"')),"identity"===s||r.value.stops||oe.push(new fe(r.key,r.value,'missing required property "stops"')),"exponential"===s&&r.valueSpec.expression&&!ji(r.valueSpec)&&oe.push(new fe(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(L&&!lr(r.valueSpec)?oe.push(new fe(r.key,r.value,"property functions not supported")):I&&!Cr(r.valueSpec)&&oe.push(new fe(r.key,r.value,"zoom functions not supported"))),"categorical"!==s&&!ee||void 0!==r.value.property||oe.push(new fe(r.key,r.value,'"property" property is required')),oe;function ae(Me){let we=[];const Je=Me.value,Xe=Me.key;if("array"!==X(Je))return[new fe(Xe,Je,`array expected, ${X(Je)} found`)];if(2!==Je.length)return[new fe(Xe,Je,`array length 2 expected, length ${Je.length} found`)];if(ee){if("object"!==X(Je[0]))return[new fe(Xe,Je,`object expected, ${X(Je[0])} found`)];if(void 0===Je[0].zoom)return[new fe(Xe,Je,"object stop key must have zoom")];if(void 0===Je[0].value)return[new fe(Xe,Je,"object stop key must have value")];if(x&&x>_t(Je[0].zoom))return[new fe(Xe,Je[0].zoom,"stop zoom values must appear in ascending order")];_t(Je[0].zoom)!==x&&(x=_t(Je[0].zoom),g=void 0,w={}),we=we.concat(Ue({key:`${Xe}[0]`,value:Je[0],valueSpec:{zoom:{}},style:Me.style,styleSpec:Me.styleSpec,objectElementValidators:{zoom:Ot,value:me}}))}else we=we.concat(me({key:`${Xe}[0]`,value:Je[0],valueSpec:{},style:Me.style,styleSpec:Me.styleSpec},Je));return yn(mn(Je[1]))?we.concat([new fe(`${Xe}[1]`,Je[1],"expressions are not allowed in function stops.")]):we.concat(ai({key:`${Xe}[1]`,value:Je[1],valueSpec:e,style:Me.style,styleSpec:Me.styleSpec}))}function me(Me,we){const Je=X(Me.value),Xe=_t(Me.value),Mt=null!==Me.value?Me.value:we;if(h){if(Je!==h)return[new fe(Me.key,Mt,`${Je} stop domain type must match previous stop domain type ${h}`)]}else h=Je;if("number"!==Je&&"string"!==Je&&"boolean"!==Je)return[new fe(Me.key,Mt,"stop domain value must be a number, string, or boolean")];if("number"!==Je&&"categorical"!==s){let Gt=`number expected, ${Je} found`;return lr(e)&&void 0===s&&(Gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new fe(Me.key,Mt,Gt)]}return"categorical"!==s||"number"!==Je||isFinite(Xe)&&Math.floor(Xe)===Xe?"categorical"!==s&&"number"===Je&&void 0!==g&&Xe<g?[new fe(Me.key,Mt,"stop domain values must appear in ascending order")]:(g=Xe,"categorical"===s&&Xe in w?[new fe(Me.key,Mt,"stop domain values must be unique")]:(w[Xe]=!0,[])):[new fe(Me.key,Mt,`integer expected, found ${Xe}`)]}}function Mn(r){const e=("property"===r.expressionContext?H:ue)(mn(r.value),r.valueSpec);if("error"===e.result)return e.value.map(h=>new fe(`${r.key}${h.key}`,r.value,h.message));const s=e.value.expression||e.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!s.outputDefined())return[new fe(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!ns(s))return[new fe(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext&&!ns(s))return[new fe(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!is(s,["zoom","feature-state"]))return[new fe(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!Ar(s))return[new fe(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oi(r){const e=r.key,s=r.value,h=r.valueSpec,g=[];return Array.isArray(h.values)?-1===h.values.indexOf(_t(s))&&g.push(new fe(e,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):-1===Object.keys(h.values).indexOf(_t(s))&&g.push(new fe(e,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function vi(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!vi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Ni={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mi(r){if(null==r)return{filter:()=>!0,needGeometry:!1};vi(r)||(r=fr(r));const e=ue(r,Ni);if("error"===e.result)throw new Error(e.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,g)=>e.value.evaluate(s,h,{},g),needGeometry:Hi(r)}}function Ci(r,e){return r<e?-1:r>e?1:0}function Hi(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(let e=1;e<r.length;e++)if(Hi(r[e]))return!0;return!1}function fr(r){if(!r)return!0;const e=r[0];return r.length<=1?"any"!==e:"=="===e?Lr(r[1],r[2],"=="):"!="===e?Ko(Lr(r[1],r[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Lr(r[1],r[2],e):"any"===e?(s=r.slice(1),["any"].concat(s.map(fr))):"all"===e?["all"].concat(r.slice(1).map(fr)):"none"===e?["all"].concat(r.slice(1).map(fr).map(Ko)):"in"===e?io(r[1],r.slice(2)):"!in"===e?Ko(io(r[1],r.slice(2))):"has"===e?Zr(r[1]):"!has"===e?Ko(Zr(r[1])):"within"!==e||r;var s}function Lr(r,e,s){switch(r){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,r,e]}}function io(r,e){if(0===e.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",r,["literal",e.sort(Ci)]]:["filter-in-small",r,["literal",e]]}}function Zr(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Ko(r){return["!",r]}function _o(r){return vi(mn(r.value))?Mn(It({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):yo(r)}function yo(r){const e=r.value,s=r.key;if("array"!==X(e))return[new fe(s,e,`array expected, ${X(e)} found`)];const h=r.styleSpec;let g,x=[];if(e.length<1)return[new fe(s,e,"filter array must have at least 1 element")];switch(x=x.concat(oi({key:`${s}[0]`,value:e[0],valueSpec:h.filter_operator,style:r.style,styleSpec:r.styleSpec})),_t(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===_t(e[1])&&x.push(new fe(s,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&x.push(new fe(s,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(g=X(e[1]),"string"!==g&&x.push(new fe(`${s}[1]`,e[1],`string expected, ${g} found`)));for(let w=2;w<e.length;w++)g=X(e[w]),"$type"===_t(e[1])?x=x.concat(oi({key:`${s}[${w}]`,value:e[w],valueSpec:h.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==g&&"number"!==g&&"boolean"!==g&&x.push(new fe(`${s}[${w}]`,e[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<e.length;w++)x=x.concat(yo({key:`${s}[${w}]`,value:e[w],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":g=X(e[1]),2!==e.length?x.push(new fe(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==g&&x.push(new fe(`${s}[1]`,e[1],`string expected, ${g} found`));break;case"within":g=X(e[1]),2!==e.length?x.push(new fe(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==g&&x.push(new fe(`${s}[1]`,e[1],`object expected, ${g} found`))}return x}function Ao(r,e){const s=r.key,h=r.style,g=r.styleSpec,x=r.value,w=r.objectKey,I=g[`${e}_${r.layerType}`];if(!I)return[];const L=w.match(/^(.*)-transition$/);if("paint"===e&&L&&I[L[1]]&&I[L[1]].transition)return ai({key:s,value:x,valueSpec:g.transition,style:h,styleSpec:g});const ee=r.valueSpec||I[w];if(!ee)return[new fe(s,x,`unknown property "${w}"`)];let oe;if("string"===X(x)&&lr(ee)&&!ee.tokens&&(oe=/^{([^}]+)}$/.exec(x)))return[new fe(s,x,`"${w}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const ae=[];return"symbol"===r.layerType&&("text-field"===w&&h&&!h.glyphs&&ae.push(new fe(s,x,'use of "text-field" requires a style "glyphs" property')),"text-font"===w&&q(mn(x))&&"identity"===_t(x.type)&&ae.push(new fe(s,x,'"text-font" does not support identity functions'))),ae.concat(ai({key:r.key,value:x,valueSpec:ee,style:h,styleSpec:g,expressionContext:"property",propertyType:e,propertyKey:w}))}function Ps(r){return Ao(r,"paint")}function _s(r){return Ao(r,"layout")}function Ca(r){let e=[];const s=r.value,h=r.key,g=r.style,x=r.styleSpec;s.type||s.ref||e.push(new fe(h,s,'either "type" or "ref" is required'));let w=_t(s.type);const I=_t(s.ref);if(s.id){const L=_t(s.id);for(let ee=0;ee<r.arrayIndex;ee++){const oe=g.layers[ee];_t(oe.id)===L&&e.push(new fe(h,s.id,`duplicate layer id "${s.id}", previously used at line ${oe.id.__line__}`))}}if("ref"in s){let L;["type","source","source-layer","filter","layout"].forEach(ee=>{ee in s&&e.push(new fe(h,s[ee],`"${ee}" is prohibited for ref layers`))}),g.layers.forEach(ee=>{_t(ee.id)===I&&(L=ee)}),L?L.ref?e.push(new fe(h,s.ref,"ref cannot reference another ref layer")):w=_t(L.type):e.push(new fe(h,s.ref,`ref layer "${I}" not found`))}else if("background"!==w)if(s.source){const L=g.sources&&g.sources[s.source],ee=L&&_t(L.type);L?"vector"===ee&&"raster"===w?e.push(new fe(h,s.source,`layer "${s.id}" requires a raster source`)):"raster"===ee&&"raster"!==w?e.push(new fe(h,s.source,`layer "${s.id}" requires a vector source`)):"vector"!==ee||s["source-layer"]?"raster-dem"===ee&&"hillshade"!==w?e.push(new fe(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!s.paint||!s.paint["line-gradient"]||"geojson"===ee&&L.lineMetrics||e.push(new fe(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new fe(h,s,`layer "${s.id}" must specify a "source-layer"`)):e.push(new fe(h,s.source,`source "${s.source}" not found`))}else e.push(new fe(h,s,'missing required property "source"'));return e=e.concat(Ue({key:h,value:s,valueSpec:x.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ai({key:`${h}.type`,value:s.type,valueSpec:x.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"}),filter:_o,layout:L=>Ue({layer:s,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":ee=>_s(It({layerType:w},ee))}}),paint:L=>Ue({layer:s,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":ee=>Ps(It({layerType:w},ee))}})}})),e}function Jo(r){const e=r.value,s=r.key,h=X(e);return"string"!==h?[new fe(s,e,`string expected, ${h} found`)]:[]}const ys={promoteId:function({key:r,value:e}){if("string"===X(e))return Jo({key:r,value:e});{const s=[];for(const h in e)s.push(...Jo({key:`${r}.${h}`,value:e[h]}));return s}}};function fa(r){const e=r.value,s=r.key,h=r.styleSpec,g=r.style;if(!e.type)return[new fe(s,e,'"type" is required')];const x=_t(e.type);let w;switch(x){case"vector":case"raster":case"raster-dem":return w=Ue({key:s,value:e,valueSpec:h[`source_${x.replace("-","_")}`],style:r.style,styleSpec:h,objectElementValidators:ys}),w;case"geojson":if(w=Ue({key:s,value:e,valueSpec:h.source_geojson,style:g,styleSpec:h,objectElementValidators:ys}),e.cluster)for(const I in e.clusterProperties){const[L,ee]=e.clusterProperties[I],oe="string"==typeof L?[L,["accumulated"],["get",I]]:L;w.push(...Mn({key:`${s}.${I}.map`,value:ee,expressionContext:"cluster-map"})),w.push(...Mn({key:`${s}.${I}.reduce`,value:oe,expressionContext:"cluster-reduce"}))}return w;case"video":return Ue({key:s,value:e,valueSpec:h.source_video,style:g,styleSpec:h});case"image":return Ue({key:s,value:e,valueSpec:h.source_image,style:g,styleSpec:h});case"canvas":return[new fe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oi({key:`${s}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,styleSpec:h})}}function Os(r){const e=r.value,s=r.styleSpec,h=s.light,g=r.style;let x=[];const w=X(e);if(void 0===e)return x;if("object"!==w)return x=x.concat([new fe("light",e,`object expected, ${w} found`)]),x;for(const I in e){const L=I.match(/^(.*)-transition$/);x=x.concat(L&&h[L[1]]&&h[L[1]].transition?ai({key:I,value:e[I],valueSpec:s.transition,style:g,styleSpec:s}):h[I]?ai({key:I,value:e[I],valueSpec:h[I],style:g,styleSpec:s}):[new fe(I,e[I],`unknown property "${I}"`)])}return x}const jn={"*":()=>[],array:rt,boolean:function(r){const e=r.value,s=r.key,h=X(e);return"boolean"!==h?[new fe(s,e,`boolean expected, ${h} found`)]:[]},number:Ot,color:function(r){const e=r.key,s=r.value,h=X(s);return"string"!==h?[new fe(e,s,`color expected, ${h} found`)]:null===Ui(s)?[new fe(e,s,`color expected, "${s}" found`)]:[]},constants:tt,enum:oi,filter:_o,function:sn,layer:Ca,object:Ue,source:fa,light:Os,string:Jo,formatted:function(r){return 0===Jo(r).length?[]:Mn(r)},resolvedImage:function(r){return 0===Jo(r).length?[]:Mn(r)}};function ai(r){const e=r.value,s=r.valueSpec,h=r.styleSpec;return s.expression&&q(_t(e))?sn(r):s.expression&&yn(mn(e))?Mn(r):s.type&&jn[s.type]?jn[s.type](r):Ue(It({},r,{valueSpec:s.type?h[s.type]:s}))}function Oi(r){const e=r.value,s=r.key,h=Jo(r);return h.length||(-1===e.indexOf("{fontstack}")&&h.push(new fe(s,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&h.push(new fe(s,e,'"glyphs" url must include a "{range}" token'))),h}function Si(r,e=ie){let s=[];return s=s.concat(ai({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Oi,"*":()=>[]}})),r.constants&&(s=s.concat(tt({key:"constants",value:r.constants,style:r,styleSpec:e}))),Sr(s)}function Sr(r){return[].concat(r).sort((e,s)=>e.line-s.line)}function rr(r){return function(...e){return Sr(r.apply(this,e))}}Si.source=rr(fa),Si.light=rr(Os),Si.layer=rr(Ca),Si.filter=rr(_o),Si.paintProperty=rr(Ps),Si.layoutProperty=rr(_s);const Wr=Si,Js=Wr.light,Tr=Wr.paintProperty,Io=Wr.layoutProperty;function ma(r,e){let s=!1;if(e&&e.length)for(const h of e)r.fire(new R(new Error(h.message))),s=!0;return s}class Dr{constructor(e,s,h){const g=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const w=new Int32Array(this.arrayBuffer);e=w[0],this.d=(s=w[1])+2*(h=w[2]);for(let L=0;L<this.d*this.d;L++){const ee=w[3+L],oe=w[3+L+1];g.push(ee===oe?null:w.subarray(ee,oe))}const I=w[3+g.length+1];this.keys=w.subarray(w[3+g.length],I),this.bboxes=w.subarray(I),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let w=0;w<this.d*this.d;w++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=e,this.padding=h,this.scale=s/e,this.uid=0;const x=h/s*e;this.min=-x,this.max=e+x}insert(e,s,h,g,x){this._forEachCell(s,h,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,s,h,g,x,w){this.cells[x].push(w)}query(e,s,h,g,x){const w=this.min,I=this.max;if(e<=w&&s<=w&&I<=h&&I<=g&&!x)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(e,s,h,g,this._queryCell,L,{},x),L}}_queryCell(e,s,h,g,x,w,I,L){const ee=this.cells[x];if(null!==ee){const oe=this.keys,ae=this.bboxes;for(let me=0;me<ee.length;me++){const Me=ee[me];if(void 0===I[Me]){const we=4*Me;(L?L(ae[we+0],ae[we+1],ae[we+2],ae[we+3]):e<=ae[we+2]&&s<=ae[we+3]&&h>=ae[we+0]&&g>=ae[we+1])?(I[Me]=!0,w.push(oe[Me])):I[Me]=!1}}}}_forEachCell(e,s,h,g,x,w,I,L){const ee=this._convertToCellCoord(e),oe=this._convertToCellCoord(s),ae=this._convertToCellCoord(h),me=this._convertToCellCoord(g);for(let Me=ee;Me<=ae;Me++)for(let we=oe;we<=me;we++){const Je=this.d*we+Me;if((!L||L(this._convertFromCellCoord(Me),this._convertFromCellCoord(we),this._convertFromCellCoord(Me+1),this._convertFromCellCoord(we+1)))&&x.call(this,e,s,h,g,Je,w,I,L))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,s=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const g=new Int32Array(s+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=s;for(let w=0;w<e.length;w++){const I=e[w];g[3+w]=x,g.set(I,x),x+=I.length}return g[3+e.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+e.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(e,s){const h=e.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(e){return new Dr(e.buffer)}}const vo={};function An(r,e,s={}){Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),vo[r]={klass:e,omit:s.omit||[],shallow:s.shallow||[]}}An("Object",Object),An("TransferableGridIndex",Dr),An("Color",K),An("Error",Error),An("AJAXError",on),An("ResolvedImage",Ke),An("StylePropertyFunction",de),An("StyleExpression",To,{omit:["_evaluator"]}),An("ZoomDependentExpression",S),An("ZoomConstantExpression",M),An("CompoundExpression",pi,{omit:["_evaluate"]});for(const r in ne)ne[r]._classRegistryKey||An(`Expression_${r}`,ne[r]);function bo(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function ks(r,e){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(bo(r)||st(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const s=r;return e&&e.push(s.buffer),s}if(r instanceof ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const s=[];for(const h of r)s.push(ks(h,e));return s}if("object"==typeof r){const s=r.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const g=s.serialize?s.serialize(r,e):{};if(!s.serialize){for(const x in r){if(!r.hasOwnProperty(x)||vo[h].omit.indexOf(x)>=0)continue;const w=r[x];g[x]=vo[h].shallow.indexOf(x)>=0?w:ks(w,e)}r instanceof Error&&(g.message=r.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==h&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof r)}function Ea(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||bo(r)||st(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(Ea);if("object"==typeof r){const e=r.$name||"Object";if(!vo[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:s}=vo[e];if(!s)throw new Error(`can't deserialize unregistered class ${e}`);if(s.deserialize)return s.deserialize(r);const h=Object.create(s.prototype);for(const g of Object.keys(r)){if("$name"===g)continue;const x=r[g];h[g]=vo[e].shallow.indexOf(g)>=0?x:Ea(x)}return h}throw new Error("can't deserialize object of type "+typeof r)}class Ya{constructor(){this.first=!0}update(e,s){const h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}const In={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Da(r){for(const e of r)if(Ma(e.charCodeAt(0)))return!0;return!1}function Zl(r){for(const e of r)if(!La(e.charCodeAt(0)))return!1;return!0}function La(r){return!(In.Arabic(r)||In["Arabic Supplement"](r)||In["Arabic Extended-A"](r)||In["Arabic Presentation Forms-A"](r)||In["Arabic Presentation Forms-B"](r))}function Ma(r){return!(746!==r&&747!==r&&(r<4352||!(In["Bopomofo Extended"](r)||In.Bopomofo(r)||In["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||In["CJK Compatibility Ideographs"](r)||In["CJK Compatibility"](r)||In["CJK Radicals Supplement"](r)||In["CJK Strokes"](r)||!(!In["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||In["CJK Unified Ideographs Extension A"](r)||In["CJK Unified Ideographs"](r)||In["Enclosed CJK Letters and Months"](r)||In["Hangul Compatibility Jamo"](r)||In["Hangul Jamo Extended-A"](r)||In["Hangul Jamo Extended-B"](r)||In["Hangul Jamo"](r)||In["Hangul Syllables"](r)||In.Hiragana(r)||In["Ideographic Description Characters"](r)||In.Kanbun(r)||In["Kangxi Radicals"](r)||In["Katakana Phonetic Extensions"](r)||In.Katakana(r)&&12540!==r||!(!In["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!In["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||In["Unified Canadian Aboriginal Syllabics"](r)||In["Unified Canadian Aboriginal Syllabics Extended"](r)||In["Vertical Forms"](r)||In["Yijing Hexagram Symbols"](r)||In["Yi Syllables"](r)||In["Yi Radicals"](r))))}function cs(r){return!(Ma(r)||(e=r,In["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||In["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||In["Letterlike Symbols"](e)||In["Number Forms"](e)||In["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||In["Control Pictures"](e)&&9251!==e||In["Optical Character Recognition"](e)||In["Enclosed Alphanumerics"](e)||In["Geometric Shapes"](e)||In["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||In["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||In["CJK Symbols and Punctuation"](e)||In.Katakana(e)||In["Private Use Area"](e)||In["CJK Compatibility Forms"](e)||In["Small Form Variants"](e)||In["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Wl(r){return r>=1424&&r<=2303||In["Arabic Presentation Forms-A"](r)||In["Arabic Presentation Forms-B"](r)}function kc(r,e){return!(!e&&Wl(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||In.Khmer(r))}function gu(r){for(const e of r)if(Wl(e.charCodeAt(0)))return!0;return!1}const ql="deferred",Ka="loading",Il="loaded";let hl=null,Co="unavailable",ga=null;const Yl=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(Co="error"),hl&&hl(r)};function Sa(){Ta.fire(new U("pluginStateChange",{pluginStatus:Co,pluginURL:ga}))}const Ta=new B,Aa=function(){return Co},Ja=function(){if(Co!==ql||!ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Co=Ka,Sa(),ga&&Pi({url:ga},r=>{r?Yl(r):(Co=Il,Sa())})},Ho={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Co===Il||null!=Ho.applyArabicShaping,isLoading:()=>Co===Ka,setState(r){Co=r.pluginStatus,ga=r.pluginURL},isParsed:()=>null!=Ho.applyArabicShaping&&null!=Ho.processBidirectionalText&&null!=Ho.processStyledBidirectionalText,getPluginURL:()=>ga};class Vr{constructor(e,s){this.zoom=e,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ya,this.transition={})}isSupportedScript(e){return function(s,h){for(const g of s)if(!kc(g.charCodeAt(0),h))return!1;return!0}(e,Ho.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,s=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class _a{constructor(e,s){this.property=e,this.value=s,this.expression=function(h,g){if(q(h))return new de(h,g);if(yn(h)){const x=H(h,g);if("error"===x.result)throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=h;return"string"==typeof h&&"color"===g.type&&(x=K.parse(h)),{kind:"constant",evaluate:()=>x}}}(void 0===s?e.specification.default:s,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,s,h){return this.property.possiblyEvaluate(this,e,s,h)}}class z{constructor(e){this.property=e,this.value=new _a(e,void 0)}transitioned(e,s){return new A(this.property,this.value,s,He({},e.transition,this.transition),e.now)}untransitioned(){return new A(this.property,this.value,null,{},0)}}class P{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return bt(this._values[e].value.value)}setValue(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new z(this._values[e].property)),this._values[e].value=new _a(this._values[e].property,null===s?void 0:bt(s))}getTransition(e){return bt(this._values[e].transition)}setTransition(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new z(this._values[e].property)),this._values[e].transition=bt(s)||void 0}serialize(){const e={};for(const s of Object.keys(this._values)){const h=this.getValue(s);void 0!==h&&(e[s]=h);const g=this.getTransition(s);void 0!==g&&(e[`${s}-transition`]=g)}return e}transitioned(e,s){const h=new Q(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(e,s._values[g]);return h}untransitioned(){const e=new Q(this._properties);for(const s of Object.keys(this._values))e._values[s]=this._values[s].untransitioned();return e}}class A{constructor(e,s,h,g,x){this.property=e,this.value=s,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,e.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(e,s,h){const g=e.now||0,x=this.value.possiblyEvaluate(e,s,h),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(e,s,h);{const I=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(e,s,h),x,function(L){if(L<=0)return 0;if(L>=1)return 1;const ee=L*L,oe=ee*L;return 4*(L<.5?oe:3*(L-ee)+oe-.75)}(I))}}return x}}class Q{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,s,h){const g=new Ve(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(e,s,h);return g}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class se{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return bt(this._values[e].value)}setValue(e,s){this._values[e]=new _a(this._values[e].property,null===s?void 0:bt(s))}serialize(){const e={};for(const s of Object.keys(this._values)){const h=this.getValue(s);void 0!==h&&(e[s]=h)}return e}possiblyEvaluate(e,s,h){const g=new Ve(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(e,s,h);return g}}class be{constructor(e,s,h){this.property=e,this.value=s,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,s,h,g){return this.property.evaluate(this.value,this.parameters,e,s,h,g)}}class Ve{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Fe{constructor(e){this.specification=e}possiblyEvaluate(e,s){return e.expression.evaluate(s)}interpolate(e,s,h){const g=rs[this.specification.type];return g?g(e,s,h):e}}class Et{constructor(e,s){this.specification=e,this.overrides=s}possiblyEvaluate(e,s,h,g){return new be(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(s,null,{},h,g)}:e.expression,s)}interpolate(e,s,h){if("constant"!==e.value.kind||"constant"!==s.value.kind)return e;if(void 0===e.value.value||void 0===s.value.value)return new be(this,{kind:"constant",value:void 0},e.parameters);const g=rs[this.specification.type];return g?new be(this,{kind:"constant",value:g(e.value.value,s.value.value,h)},e.parameters):e}evaluate(e,s,h,g,x,w){return"constant"===e.kind?e.value:e.evaluate(s,h,g,x,w)}}class ei extends Et{possiblyEvaluate(e,s,h,g){if(void 0===e.value)return new be(this,{kind:"constant",value:void 0},s);if("constant"===e.expression.kind){const x=e.expression.evaluate(s,null,{},h,g),w="resolvedImage"===e.property.specification.type&&"string"!=typeof x?x.name:x,I=this._calculate(w,w,w,s);return new be(this,{kind:"constant",value:I},s)}if("camera"===e.expression.kind){const x=this._calculate(e.expression.evaluate({zoom:s.zoom-1}),e.expression.evaluate({zoom:s.zoom}),e.expression.evaluate({zoom:s.zoom+1}),s);return new be(this,{kind:"constant",value:x},s)}return new be(this,e.expression,s)}evaluate(e,s,h,g,x,w){if("source"===e.kind){const I=e.evaluate(s,h,g,x,w);return this._calculate(I,I,I,s)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(s.zoom)-1},h,g),e.evaluate({zoom:Math.floor(s.zoom)},h,g),e.evaluate({zoom:Math.floor(s.zoom)+1},h,g),s):e.value}_calculate(e,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:h,to:s}}interpolate(e){return e}}class Yi{constructor(e){this.specification=e}possiblyEvaluate(e,s,h,g){if(void 0!==e.value){if("constant"===e.expression.kind){const x=e.expression.evaluate(s,null,{},h,g);return this._calculate(x,x,x,s)}return this._calculate(e.expression.evaluate(new Vr(Math.floor(s.zoom-1),s)),e.expression.evaluate(new Vr(Math.floor(s.zoom),s)),e.expression.evaluate(new Vr(Math.floor(s.zoom+1),s)),s)}}_calculate(e,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:h,to:s}}interpolate(e){return e}}class Ei{constructor(e){this.specification=e}possiblyEvaluate(e,s,h,g){return!!e.expression.evaluate(s,null,{},h,g)}interpolate(){return!1}}class Bi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in e){const h=e[s];h.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new _a(h,void 0),x=this.defaultTransitionablePropertyValues[s]=new z(h);this.defaultTransitioningPropertyValues[s]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}An("DataDrivenProperty",Et),An("DataConstantProperty",Fe),An("CrossFadedDataDrivenProperty",ei),An("CrossFadedProperty",Yi),An("ColorRampProperty",Ei);const pr="-transition";class Eo extends B{constructor(e,s){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),s.layout&&(this._unevaluatedLayout=new se(s.layout)),s.paint)){this._transitionablePaint=new P(s.paint);for(const h in e.paint)this.setPaintProperty(h,e.paint[h],{validate:!1});for(const h in e.layout)this.setLayoutProperty(h,e.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ve(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,s,h={}){null!=s&&this._validate(Io,`layers.${this.id}.layout.${e}`,e,s,h)||("visibility"!==e?this._unevaluatedLayout.setValue(e,s):this.visibility=s)}getPaintProperty(e){return e.endsWith(pr)?this._transitionablePaint.getTransition(e.slice(0,-pr.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,s,h={}){if(null!=s&&this._validate(Tr,`layers.${this.id}.paint.${e}`,e,s,h))return!1;if(e.endsWith(pr))return this._transitionablePaint.setTransition(e.slice(0,-pr.length),s||void 0),!1;{const g=this._transitionablePaint._values[e],x="cross-faded-data-driven"===g.property.specification["property-type"],w=g.value.isDataDriven(),I=g.value;this._transitionablePaint.setValue(e,s),this._handleSpecialPaintPropertyUpdate(e);const L=this._transitionablePaint._values[e].value;return L.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(e,I,L)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,s,h){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,s){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,s)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),et(e,(s,h)=>!(void 0===s||"layout"===h&&!Object.keys(s).length||"paint"===h&&!Object.keys(s).length))}_validate(e,s,h,g,x={}){return(!x||!1!==x.validate)&&ma(this,e.call(Wr,{key:s,layerType:this.type,objectKey:h,value:g,styleSpec:ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const s=this.paint.get(e);if(s instanceof be&&lr(s.property.specification)&&("source"===s.value.kind||"composite"===s.value.kind)&&s.value.isStateDependent)return!0}return!1}}const Po={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class po{constructor(e,s){this._structArray=e,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,s){return e._trim(),s&&(e.isTransferred=!0,s.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const s=Object.create(this.prototype);return s.arrayBuffer=e.arrayBuffer,s.length=e.length,s.capacity=e.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function qr(r,e=1){let s=0,h=0;return{members:r.map(g=>{const x=Po[g.type].BYTES_PER_ELEMENT,w=s=Us(s,Math.max(e,x)),I=g.components||1;return h=Math.max(h,x),s+=x*I,{name:g.name,type:g.type,components:I,offset:w}}),size:Us(s,Math.max(h,e)),alignment:e}}function Us(r,e){return Math.ceil(r/e)*e}class ro extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const g=2*e;return this.int16[g+0]=s,this.int16[g+1]=h,e}}ro.prototype.bytesPerElement=4,An("StructArrayLayout2i4",ro);class Xs extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,g)}emplace(e,s,h,g,x){const w=4*e;return this.int16[w+0]=s,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=x,e}}Xs.prototype.bytesPerElement=8,An("StructArrayLayout4i8",Xs);class _ extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,g,x,w)}emplace(e,s,h,g,x,w,I){const L=6*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.int16[L+2]=g,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=I,e}}_.prototype.bytesPerElement=12,An("StructArrayLayout2i4i12",_);class i extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,g,x,w)}emplace(e,s,h,g,x,w,I){const L=4*e,ee=8*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.uint8[ee+4]=g,this.uint8[ee+5]=x,this.uint8[ee+6]=w,this.uint8[ee+7]=I,e}}i.prototype.bytesPerElement=8,An("StructArrayLayout2i4ub8",i);class c extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const g=2*e;return this.float32[g+0]=s,this.float32[g+1]=h,e}}c.prototype.bytesPerElement=8,An("StructArrayLayout2f8",c);class m extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w,I,L,ee,oe){const ae=this.length;return this.resize(ae+1),this.emplace(ae,e,s,h,g,x,w,I,L,ee,oe)}emplace(e,s,h,g,x,w,I,L,ee,oe,ae){const me=10*e;return this.uint16[me+0]=s,this.uint16[me+1]=h,this.uint16[me+2]=g,this.uint16[me+3]=x,this.uint16[me+4]=w,this.uint16[me+5]=I,this.uint16[me+6]=L,this.uint16[me+7]=ee,this.uint16[me+8]=oe,this.uint16[me+9]=ae,e}}m.prototype.bytesPerElement=20,An("StructArrayLayout10ui20",m);class v extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w,I,L,ee,oe,ae,me){const Me=this.length;return this.resize(Me+1),this.emplace(Me,e,s,h,g,x,w,I,L,ee,oe,ae,me)}emplace(e,s,h,g,x,w,I,L,ee,oe,ae,me,Me){const we=12*e;return this.int16[we+0]=s,this.int16[we+1]=h,this.int16[we+2]=g,this.int16[we+3]=x,this.uint16[we+4]=w,this.uint16[we+5]=I,this.uint16[we+6]=L,this.uint16[we+7]=ee,this.int16[we+8]=oe,this.int16[we+9]=ae,this.int16[we+10]=me,this.int16[we+11]=Me,e}}v.prototype.bytesPerElement=24,An("StructArrayLayout4i4ui4i24",v);class E extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,h)}emplace(e,s,h,g){const x=3*e;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=g,e}}E.prototype.bytesPerElement=12,An("StructArrayLayout3f12",E);class O extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint32[1*e+0]=s,e}}O.prototype.bytesPerElement=4,An("StructArrayLayout1ul4",O);class j extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w,I,L,ee){const oe=this.length;return this.resize(oe+1),this.emplace(oe,e,s,h,g,x,w,I,L,ee)}emplace(e,s,h,g,x,w,I,L,ee,oe){const ae=10*e,me=5*e;return this.int16[ae+0]=s,this.int16[ae+1]=h,this.int16[ae+2]=g,this.int16[ae+3]=x,this.int16[ae+4]=w,this.int16[ae+5]=I,this.uint32[me+3]=L,this.uint16[ae+8]=ee,this.uint16[ae+9]=oe,e}}j.prototype.bytesPerElement=20,An("StructArrayLayout6i1ul2ui20",j);class Y extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,g,x,w)}emplace(e,s,h,g,x,w,I){const L=6*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.int16[L+2]=g,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=I,e}}Y.prototype.bytesPerElement=12,An("StructArrayLayout2i2i2i12",Y);class re extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,e,s,h,g,x)}emplace(e,s,h,g,x,w){const I=4*e,L=8*e;return this.float32[I+0]=s,this.float32[I+1]=h,this.float32[I+2]=g,this.int16[L+6]=x,this.int16[L+7]=w,e}}re.prototype.bytesPerElement=16,An("StructArrayLayout2f1f2i16",re);class le extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,g)}emplace(e,s,h,g,x){const w=12*e,I=3*e;return this.uint8[w+0]=s,this.uint8[w+1]=h,this.float32[I+1]=g,this.float32[I+2]=x,e}}le.prototype.bytesPerElement=12,An("StructArrayLayout2ub2f12",le);class xe extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,h)}emplace(e,s,h,g){const x=3*e;return this.uint16[x+0]=s,this.uint16[x+1]=h,this.uint16[x+2]=g,e}}xe.prototype.bytesPerElement=6,An("StructArrayLayout3ui6",xe);class Ie extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt)}emplace(e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt,Gt){const Ht=24*e,Qt=12*e,hn=48*e;return this.int16[Ht+0]=s,this.int16[Ht+1]=h,this.uint16[Ht+2]=g,this.uint16[Ht+3]=x,this.uint32[Qt+2]=w,this.uint32[Qt+3]=I,this.uint32[Qt+4]=L,this.uint16[Ht+10]=ee,this.uint16[Ht+11]=oe,this.uint16[Ht+12]=ae,this.float32[Qt+7]=me,this.float32[Qt+8]=Me,this.uint8[hn+36]=we,this.uint8[hn+37]=Je,this.uint8[hn+38]=Xe,this.uint32[Qt+10]=Mt,this.int16[Ht+22]=Gt,e}}Ie.prototype.bytesPerElement=48,An("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ie);class Ze extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt,Gt,Ht,Qt,hn,ln,Yn,hi,Nn,qn,Pn,Xn){const $n=this.length;return this.resize($n+1),this.emplace($n,e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt,Gt,Ht,Qt,hn,ln,Yn,hi,Nn,qn,Pn,Xn)}emplace(e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je,Xe,Mt,Gt,Ht,Qt,hn,ln,Yn,hi,Nn,qn,Pn,Xn,$n){const wn=34*e,Mi=17*e;return this.int16[wn+0]=s,this.int16[wn+1]=h,this.int16[wn+2]=g,this.int16[wn+3]=x,this.int16[wn+4]=w,this.int16[wn+5]=I,this.int16[wn+6]=L,this.int16[wn+7]=ee,this.uint16[wn+8]=oe,this.uint16[wn+9]=ae,this.uint16[wn+10]=me,this.uint16[wn+11]=Me,this.uint16[wn+12]=we,this.uint16[wn+13]=Je,this.uint16[wn+14]=Xe,this.uint16[wn+15]=Mt,this.uint16[wn+16]=Gt,this.uint16[wn+17]=Ht,this.uint16[wn+18]=Qt,this.uint16[wn+19]=hn,this.uint16[wn+20]=ln,this.uint16[wn+21]=Yn,this.uint16[wn+22]=hi,this.uint32[Mi+12]=Nn,this.float32[Mi+13]=qn,this.float32[Mi+14]=Pn,this.float32[Mi+15]=Xn,this.float32[Mi+16]=$n,e}}Ze.prototype.bytesPerElement=68,An("StructArrayLayout8i15ui1ul4f68",Ze);class Pe extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.float32[1*e+0]=s,e}}Pe.prototype.bytesPerElement=4,An("StructArrayLayout1f4",Pe);class Ge extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,h)}emplace(e,s,h,g){const x=3*e;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=g,e}}Ge.prototype.bytesPerElement=6,An("StructArrayLayout3i6",Ge);class mt extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,h)}emplace(e,s,h,g){const x=4*e;return this.uint32[2*e+0]=s,this.uint16[x+2]=h,this.uint16[x+3]=g,e}}mt.prototype.bytesPerElement=8,An("StructArrayLayout1ul2ui8",mt);class vt extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const g=2*e;return this.uint16[g+0]=s,this.uint16[g+1]=h,e}}vt.prototype.bytesPerElement=4,An("StructArrayLayout2ui4",vt);class At extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint16[1*e+0]=s,e}}At.prototype.bytesPerElement=2,An("StructArrayLayout1ui2",At);class xt extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,g)}emplace(e,s,h,g,x){const w=4*e;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=x,e}}xt.prototype.bytesPerElement=16,An("StructArrayLayout4f16",xt);class $t extends po{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ct(this.anchorPointX,this.anchorPointY)}}$t.prototype.size=20;class Zt extends j{get(e){return new $t(this,e)}}An("CollisionBoxArray",Zt);class Kt extends po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Kt.prototype.size=48;class xn extends Ie{get(e){return new Kt(this,e)}}An("PlacedSymbolArray",xn);class On extends po{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}On.prototype.size=68;class Jt extends Ze{get(e){return new On(this,e)}}An("SymbolInstanceArray",Jt);class Wn extends Pe{getoffsetX(e){return this.float32[1*e+0]}}An("GlyphOffsetArray",Wn);class Gn extends Ge{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}An("SymbolLineVertexArray",Gn);class ki extends po{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ki.prototype.size=8;class nr extends mt{get(e){return new ki(this,e)}}An("FeatureIndexArray",nr);class Xi extends ro{}class dr extends ro{}class oo extends _{}class $i extends i{}class vr extends c{}class Er extends m{}class Ir extends v{}class vs extends E{}class Xo extends O{}class Qs extends Y{}class Na extends le{}class bs extends xe{}class Ia extends vt{}const pl=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:js}=pl;class gr{constructor(e=[]){this.segments=e}prepareSegment(e,s,h,g){let x=this.segments[this.segments.length-1];return e>gr.MAX_VERTEX_ARRAY_LENGTH&&Ut(`Max vertices per segment is ${gr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!x||x.vertexLength+e>gr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g)&&(x={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==g&&(x.sortKey=g),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const e of this.segments)for(const s in e.vaos)e.vaos[s].destroy()}static simpleSegment(e,s,h,g){return new gr([{vertexOffset:e,primitiveOffset:s,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function xr(r,e){return 256*(r=he(Math.floor(r),0,255))+he(Math.floor(e),0,255)}gr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,An("SegmentVector",gr);const fo=qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Oo={exports:{}},ea=function(r,e){var s,h,g,x,w,I,L,ee;for(h=r.length-(s=3&r.length),g=e,w=3432918353,I=461845907,ee=0;ee<h;)L=255&r.charCodeAt(ee)|(255&r.charCodeAt(++ee))<<8|(255&r.charCodeAt(++ee))<<16|(255&r.charCodeAt(++ee))<<24,++ee,g=27492+(65535&(x=5*(65535&(g=(g^=L=(65535&(L=(L=(65535&L)*w+(((L>>>16)*w&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,s){case 3:L^=(255&r.charCodeAt(ee+2))<<16;case 2:L^=(255&r.charCodeAt(ee+1))<<8;case 1:g^=L=(65535&(L=(L=(65535&(L^=255&r.charCodeAt(ee)))*w+(((L>>>16)*w&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295}return g^=r.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0},Ba=function(r,e){for(var s,h=r.length,g=e^h,x=0;h>=4;)s=1540483477*(65535&(s=255&r.charCodeAt(x)|(255&r.charCodeAt(++x))<<8|(255&r.charCodeAt(++x))<<16|(255&r.charCodeAt(++x))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++x;switch(h){case 3:g^=(255&r.charCodeAt(x+2))<<16;case 2:g^=(255&r.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&r.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};Oo.exports=ea,Oo.exports.murmur3=ea,Oo.exports.murmur2=Ba;var Rc=Oo.exports;class dc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,s,h,g){this.ids.push(_u(e)),this.positions.push(s,h,g)}getPositions(e){const s=_u(e);let h=0,g=this.ids.length-1;for(;h<g;){const w=h+g>>1;this.ids[w]>=s?g=w:h=w+1}const x=[];for(;this.ids[h]===s;)x.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return x}static serialize(e,s){const h=new Float64Array(e.ids),g=new Uint32Array(e.positions);return Xa(h,g,0,h.length-1),s&&s.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(e){const s=new dc;return s.ids=e.ids,s.positions=e.positions,s.indexed=!0,s}}function _u(r){const e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Rc(String(r))}function Xa(r,e,s,h){for(;s<h;){const g=r[s+h>>1];let x=s-1,w=h+1;for(;;){do{x++}while(r[x]<g);do{w--}while(r[w]>g);if(x>=w)break;hc(r,x,w),hc(e,3*x,3*w),hc(e,3*x+1,3*w+1),hc(e,3*x+2,3*w+2)}w-s<h-w?(Xa(r,e,s,w),s=w+1):(Xa(r,e,w+1,h),h=w)}}function hc(r,e,s){const h=r[e];r[e]=r[s],r[s]=h}An("FeaturePositionMap",dc);class Rs{constructor(e,s){this.gl=e.gl,this.location=s}}class za extends Rs{constructor(e,s){super(e,s),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class kh extends Rs{constructor(e,s){super(e,s),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ko extends Rs{constructor(e,s){super(e,s),this.current=K.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Rh=new Float32Array(16);function Fc(r){return[xr(255*r.r,255*r.g),xr(255*r.b,255*r.a)]}class Kl{constructor(e,s,h){this.value=e,this.uniformNames=s.map(g=>`u_${g}`),this.type=h}setUniform(e,s,h){e.set(h.constantOr(this.value))}getBinding(e,s,h){return"color"===this.type?new ko(e,s):new za(e,s)}}class Pa{constructor(e,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=e.tlbr}setUniform(e,s,h,g){const x="u_pattern_to"===g?this.patternTo:"u_pattern_from"===g?this.patternFrom:"u_pixel_ratio_to"===g?this.pixelRatioTo:"u_pixel_ratio_from"===g?this.pixelRatioFrom:null;x&&e.set(x)}getBinding(e,s,h){return"u_pattern"===h.substr(0,9)?new kh(e,s):new za(e,s)}}class Qa{constructor(e,s,h,g){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(e,s,h,g,x){const w=this.paintVertexArray.length,I=this.expression.evaluate(new Vr(0),s,{},g,[],x);this.paintVertexArray.resize(e),this._setPaintValue(w,e,I)}updatePaintArray(e,s,h,g){const x=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(e,s,x)}_setPaintValue(e,s,h){if("color"===this.type){const g=Fc(h);for(let x=e;x<s;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=e;g<s;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Va{constructor(e,s,h,g,x,w){this.expression=e,this.uniformNames=s.map(I=>`u_${I}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=s.map(I=>({name:`a_${I}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(e,s,h,g,x){const w=this.expression.evaluate(new Vr(this.zoom),s,{},g,[],x),I=this.expression.evaluate(new Vr(this.zoom+1),s,{},g,[],x),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,w,I)}updatePaintArray(e,s,h,g){const x=this.expression.evaluate({zoom:this.zoom},h,g),w=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(e,s,x,w)}_setPaintValue(e,s,h,g){if("color"===this.type){const x=Fc(h),w=Fc(g);for(let I=e;I<s;I++)this.paintVertexArray.emplace(I,x[0],x[1],w[0],w[1])}else{for(let x=e;x<s;x++)this.paintVertexArray.emplace(x,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=he(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(g)}getBinding(e,s,h){return new za(e,s)}}class fl{constructor(e,s,h,g,x,w){this.expression=e,this.type=s,this.useIntegerZoom=h,this.zoom=g,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(e,s,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(g,e,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(e,s,h,g,x){this._setPaintValues(e,s,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(e,s,h,g){if(!g||!h)return;const{min:x,mid:w,max:I}=h,L=g[x],ee=g[w],oe=g[I];if(L&&ee&&oe)for(let ae=e;ae<s;ae++)this.zoomInPaintVertexArray.emplace(ae,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],ee.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(ae,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],oe.tl[0],oe.tl[1],oe.br[0],oe.br[1],ee.pixelRatio,oe.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,fo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,fo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jl{constructor(e,s,h){this.binders={},this._buffers=[];const g=[];for(const x in e.paint._values){if(!h(x))continue;const w=e.paint.get(x);if(!(w instanceof be&&lr(w.property.specification)))continue;const I=_d(x,e.type),L=w.value,ee=w.property.specification.type,oe=w.property.useIntegerZoom,ae=w.property.specification["property-type"],me="cross-faded"===ae||"cross-faded-data-driven"===ae;if("constant"===L.kind)this.binders[x]=me?new Pa(L.value,I):new Kl(L.value,I,ee),g.push(`/u_${x}`);else if("source"===L.kind||me){const Me=Xl(x,ee,"source");this.binders[x]=me?new fl(L,ee,oe,s,Me,e.id):new Qa(L,I,ee,Me),g.push(`/a_${x}`)}else{const Me=Xl(x,ee,"composite");this.binders[x]=new Va(L,I,ee,oe,s,Me),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(e){const s=this.binders[e];return s instanceof Qa||s instanceof Va?s.maxValue:0}populatePaintArrays(e,s,h,g,x){for(const w in this.binders){const I=this.binders[w];(I instanceof Qa||I instanceof Va||I instanceof fl)&&I.populatePaintArray(e,s,h,g,x)}}setConstantPatternPositions(e,s){for(const h in this.binders){const g=this.binders[h];g instanceof Pa&&g.setConstantPatternPositions(e,s)}}updatePaintArrays(e,s,h,g,x){let w=!1;for(const I in e){const L=s.getPositions(I);for(const ee of L){const oe=h.feature(ee.index);for(const ae in this.binders){const me=this.binders[ae];if((me instanceof Qa||me instanceof Va||me instanceof fl)&&!0===me.expression.isStateDependent){const Me=g.paint.get(ae);me.expression=Me.value,me.updatePaintArray(ee.start,ee.end,oe,e[I],x),w=!0}}}}return w}defines(){const e=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Kl||h instanceof Pa)&&e.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return e}getBinderAttributes(){const e=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Qa||h instanceof Va)for(let g=0;g<h.paintVertexAttributes.length;g++)e.push(h.paintVertexAttributes[g].name);else if(h instanceof fl)for(let g=0;g<fo.members.length;g++)e.push(fo.members[g].name)}return e}getBinderUniforms(){const e=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Kl||h instanceof Pa||h instanceof Va)for(const g of h.uniformNames)e.push(g)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,s){const h=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Kl||x instanceof Pa||x instanceof Va)for(const w of x.uniformNames)if(s[w]){const I=x.getBinding(e,s[w],w);h.push({name:w,property:g,binding:I})}}return h}setUniforms(e,s,h,g){for(const{name:x,property:w,binding:I}of s)this.binders[w].setUniform(I,g,h.get(w),x)}updatePaintBuffers(e){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(e&&h instanceof fl){const g=2===e.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Qa||h instanceof Va)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(const s in this.binders){const h=this.binders[s];(h instanceof Qa||h instanceof Va||h instanceof fl)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const s=this.binders[e];(s instanceof Qa||s instanceof Va||s instanceof fl)&&s.destroy()}}}class ta{constructor(e,s,h=(()=>!0)){this.programConfigurations={};for(const g of e)this.programConfigurations[g.id]=new Jl(g,s,h);this.needsUpload=!1,this._featureMap=new dc,this._bufferOffset=0}populatePaintArrays(e,s,h,g,x,w){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(e,s,g,x,w);void 0!==s.id&&this._featureMap.add(s.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,s,h,g){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,s,x,g)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function _d(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function Xl(r,e,s){const g={"line-pattern":{source:Er,composite:Er},"fill-pattern":{source:Er,composite:Er},"fill-extrusion-pattern":{source:Er,composite:Er}}[r];return g&&g[s]||{color:{source:c,composite:xt},number:{source:Pe,composite:c}}[e][s]}An("ConstantBinder",Kl),An("CrossFadedConstantBinder",Pa),An("SourceExpressionBinder",Qa),An("CrossFadedCompositeBinder",fl),An("CompositeExpressionBinder",Va),An("ProgramConfiguration",Jl,{omit:["_buffers"]}),An("ProgramConfigurationSet",ta);var Ro=8192;const yu=Math.pow(2,14)-1,vu=-yu-1;function el(r){const e=Ro/r.extent,s=r.loadGeometry();for(let h=0;h<s.length;h++){const g=s[h];for(let x=0;x<g.length;x++){const w=g[x],I=Math.round(w.x*e),L=Math.round(w.y*e);w.x=he(I,vu,yu),w.y=he(L,vu,yu),(I<w.x||I>w.x+1||L<w.y||L>w.y+1)&&Ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function na(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?el(r):[]}}function Pl(r,e,s,h,g){r.emplaceBack(2*e+(h+1)/2,2*s+(g+1)/2)}class yd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Xi,this.indexArray=new bs,this.segments=new gr,this.programConfigurations=new ta(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){const g=this.layers[0],x=[];let w=null,I=!1;"circle"===g.type&&(w=g.layout.get("circle-sort-key"),I=!w.isConstant());for(const{feature:L,id:ee,index:oe,sourceLayerIndex:ae}of e){const me=this.layers[0]._featureFilter.needGeometry,Me=na(L,me);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),Me,h))continue;const we=I?w.evaluate(Me,{},h):void 0,Je={id:ee,properties:L.properties,type:L.type,sourceLayerIndex:ae,index:oe,geometry:me?Me.geometry:el(L),patterns:{},sortKey:we};x.push(Je)}I&&x.sort((L,ee)=>L.sortKey-ee.sortKey);for(const L of x){const{geometry:ee,index:oe,sourceLayerIndex:ae}=L,me=e[oe].feature;this.addFeature(L,ee,oe,h),s.featureIndex.insert(me,ee,oe,ae,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,js),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,h,g){for(const x of s)for(const w of x){const I=w.x,L=w.y;if(I<0||I>=Ro||L<0||L>=Ro)continue;const ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),oe=ee.vertexLength;Pl(this.layoutVertexArray,I,L,-1,-1),Pl(this.layoutVertexArray,I,L,1,-1),Pl(this.layoutVertexArray,I,L,1,1),Pl(this.layoutVertexArray,I,L,-1,1),this.indexArray.emplaceBack(oe,oe+1,oe+2),this.indexArray.emplaceBack(oe,oe+3,oe+2),ee.vertexLength+=4,ee.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{},g)}}function Ol(r,e){for(let s=0;s<r.length;s++)if(fc(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(fc(r,e[s]))return!0;return!!Nc(r,e)}function pc(r,e,s){return!!fc(r,e)||!!Fh(e,r,s)}function Lc(r,e){if(1===r.length)return bd(e,r[0]);for(let s=0;s<e.length;s++){const h=e[s];for(let g=0;g<h.length;g++)if(fc(r,h[g]))return!0}for(let s=0;s<r.length;s++)if(bd(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(Nc(r,e[s]))return!0;return!1}function Vm(r,e,s){if(r.length>1){if(Nc(r,e))return!0;for(let h=0;h<e.length;h++)if(Fh(e[h],r,s))return!0}for(let h=0;h<r.length;h++)if(Fh(r[h],e,s))return!0;return!1}function Nc(r,e){if(0===r.length||0===e.length)return!1;for(let s=0;s<r.length-1;s++){const h=r[s],g=r[s+1];for(let x=0;x<e.length-1;x++)if(ef(h,g,e[x],e[x+1]))return!0}return!1}function ef(r,e,s,h){return jt(r,s,h)!==jt(e,s,h)&&jt(r,e,s)!==jt(r,e,h)}function Fh(r,e,s){const h=s*s;if(1===e.length)return r.distSqr(e[0])<h;for(let g=1;g<e.length;g++)if(vd(r,e[g-1],e[g])<h)return!0;return!1}function vd(r,e,s){const h=e.distSqr(s);if(0===h)return r.distSqr(e);const g=((r.x-e.x)*(s.x-e.x)+(r.y-e.y)*(s.y-e.y))/h;return r.distSqr(g<0?e:g>1?s:s.sub(e)._mult(g)._add(e))}function bd(r,e){let s,h,g,x=!1;for(let w=0;w<r.length;w++){s=r[w];for(let I=0,L=s.length-1;I<s.length;L=I++)h=s[I],g=s[L],h.y>e.y!=g.y>e.y&&e.x<(g.x-h.x)*(e.y-h.y)/(g.y-h.y)+h.x&&(x=!x)}return x}function fc(r,e){let s=!1;for(let h=0,g=r.length-1;h<r.length;g=h++){const x=r[h],w=r[g];x.y>e.y!=w.y>e.y&&e.x<(w.x-x.x)*(e.y-x.y)/(w.y-x.y)+x.x&&(s=!s)}return s}function bu(r,e,s){const h=s[0],g=s[2];if(r.x<h.x&&e.x<h.x||r.x>g.x&&e.x>g.x||r.y<h.y&&e.y<h.y||r.y>g.y&&e.y>g.y)return!1;const x=jt(r,e,s[0]);return x!==jt(r,e,s[1])||x!==jt(r,e,s[2])||x!==jt(r,e,s[3])}function Ql(r,e,s){const h=e.paint.get(r).value;return"constant"===h.kind?h.value:s.programConfigurations.get(e.id).getMaxValue(r)}function ml(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function xu(r,e,s,h,g){if(!e[0]&&!e[1])return r;const x=ct.convert(e)._mult(g);"viewport"===s&&x._rotate(-h);const w=[];for(let I=0;I<r.length;I++)w.push(r[I].sub(x));return w}An("CircleBucket",yd,{omit:["layers"]});const Lh=new Bi({"circle-sort-key":new Et(ie.layout_circle["circle-sort-key"])});var Um={paint:new Bi({"circle-radius":new Et(ie.paint_circle["circle-radius"]),"circle-color":new Et(ie.paint_circle["circle-color"]),"circle-blur":new Et(ie.paint_circle["circle-blur"]),"circle-opacity":new Et(ie.paint_circle["circle-opacity"]),"circle-translate":new Fe(ie.paint_circle["circle-translate"]),"circle-translate-anchor":new Fe(ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fe(ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fe(ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Et(ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Et(ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Et(ie.paint_circle["circle-stroke-opacity"])}),layout:Lh},gl="undefined"!=typeof Float32Array?Float32Array:Array;function Bc(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function wu(r,e,s){var h=e[0],g=e[1],x=e[2],w=e[3],I=e[4],L=e[5],ee=e[6],oe=e[7],ae=e[8],me=e[9],Me=e[10],we=e[11],Je=e[12],Xe=e[13],Mt=e[14],Gt=e[15],Ht=s[0],Qt=s[1],hn=s[2],ln=s[3];return r[0]=Ht*h+Qt*I+hn*ae+ln*Je,r[1]=Ht*g+Qt*L+hn*me+ln*Xe,r[2]=Ht*x+Qt*ee+hn*Me+ln*Mt,r[3]=Ht*w+Qt*oe+hn*we+ln*Gt,r[4]=(Ht=s[4])*h+(Qt=s[5])*I+(hn=s[6])*ae+(ln=s[7])*Je,r[5]=Ht*g+Qt*L+hn*me+ln*Xe,r[6]=Ht*x+Qt*ee+hn*Me+ln*Mt,r[7]=Ht*w+Qt*oe+hn*we+ln*Gt,r[8]=(Ht=s[8])*h+(Qt=s[9])*I+(hn=s[10])*ae+(ln=s[11])*Je,r[9]=Ht*g+Qt*L+hn*me+ln*Xe,r[10]=Ht*x+Qt*ee+hn*Me+ln*Mt,r[11]=Ht*w+Qt*oe+hn*we+ln*Gt,r[12]=(Ht=s[12])*h+(Qt=s[13])*I+(hn=s[14])*ae+(ln=s[15])*Je,r[13]=Ht*g+Qt*L+hn*me+ln*Xe,r[14]=Ht*x+Qt*ee+hn*Me+ln*Mt,r[15]=Ht*w+Qt*oe+hn*we+ln*Gt,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var mc,Nh=wu;function tl(r,e,s){var h=e[0],g=e[1],x=e[2],w=e[3];return r[0]=s[0]*h+s[4]*g+s[8]*x+s[12]*w,r[1]=s[1]*h+s[5]*g+s[9]*x+s[13]*w,r[2]=s[2]*h+s[6]*g+s[10]*x+s[14]*w,r[3]=s[3]*h+s[7]*g+s[11]*x+s[15]*w,r}function Bh(r,e){const s=tl([],[r.x,r.y,0,1],e);return new ct(s[0]/s[3],s[1]/s[3])}mc=new gl(4),gl!=Float32Array&&(mc[0]=0,mc[1]=0,mc[2]=0,mc[3]=0);class Cu extends yd{}An("HeatmapBucket",Cu,{omit:["layers"]});var tf={paint:new Bi({"heatmap-radius":new Et(ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Et(ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fe(ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ei(ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fe(ie.paint_heatmap["heatmap-opacity"])})};function xd(r,{width:e,height:s},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==e*s*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${e*s*h}`)}else g=new Uint8Array(e*s*h);return r.width=e,r.height=s,r.data=g,r}function zh(r,{width:e,height:s},h){if(e===r.width&&s===r.height)return;const g=xd({},{width:e,height:s},h);ya(r,g,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,s)},h),r.width=e,r.height=s,r.data=g.data}function ya(r,e,s,h,g,x){if(0===g.width||0===g.height)return e;if(g.width>r.width||g.height>r.height||s.x>r.width-g.width||s.y>r.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>e.width||g.height>e.height||h.x>e.width-g.width||h.y>e.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=r.data,I=e.data;for(let L=0;L<g.height;L++){const ee=((s.y+L)*r.width+s.x)*x,oe=((h.y+L)*e.width+h.x)*x;for(let ae=0;ae<g.width*x;ae++)I[oe+ae]=w[ee+ae]}return e}class nl{constructor(e,s){xd(this,e,1,s)}resize(e){zh(this,e,1)}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,h,g,x){ya(e,s,h,g,x,1)}}class Fs{constructor(e,s){xd(this,e,4,s)}resize(e){zh(this,e,4)}replace(e,s){s?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Fs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,h,g,x){ya(e,s,h,g,x,4)}}function Vh(r){const e={},s=r.resolution||256,h=r.clips?r.clips.length:1,g=r.image||new Fs({width:s,height:h}),x=(w,I,L)=>{e[r.evaluationKey]=L;const ee=r.expression.evaluate(e);g.data[w+I+0]=Math.floor(255*ee.r/ee.a),g.data[w+I+1]=Math.floor(255*ee.g/ee.a),g.data[w+I+2]=Math.floor(255*ee.b/ee.a),g.data[w+I+3]=Math.floor(255*ee.a)};if(r.clips)for(let w=0,I=0;w<h;++w,I+=4*s)for(let L=0,ee=0;L<s;L++,ee+=4){const oe=L/(s-1),{start:ae,end:me}=r.clips[w];x(I,ee,ae*(1-oe)+me*oe)}else for(let w=0,I=0;w<s;w++,I+=4)x(0,I,w/(s-1));return g}An("AlphaImage",nl),An("RGBAImage",Fs);var nf={paint:new Bi({"hillshade-illumination-direction":new Fe(ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fe(ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fe(ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fe(ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fe(ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fe(ie.paint_hillshade["hillshade-accent-color"])})};const rf=qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:sf}=rf;var wd={exports:{}};function zc(r,e,s){s=s||2;var h,g,x,w,I,L,ee,oe=e&&e.length,ae=oe?e[0]*s:r.length,me=Uh(r,0,ae,s,!0),Me=[];if(!me||me.next===me.prev)return Me;if(oe&&(me=function(Je,Xe,Mt,Gt){var Ht,Qt,hn,ln=[];for(Ht=0,Qt=Xe.length;Ht<Qt;Ht++)(hn=Uh(Je,Xe[Ht]*Gt,Ht<Qt-1?Xe[Ht+1]*Gt:Je.length,Gt,!1))===hn.next&&(hn.steiner=!0),ln.push(Hh(hn));for(ln.sort(Cd),Ht=0;Ht<ln.length;Ht++)Mt=kl(Mt=il(ln[Ht],Mt),Mt.next);return Mt}(r,e,me,s)),r.length>80*s){h=x=r[0],g=w=r[1];for(var we=s;we<ae;we+=s)(I=r[we])<h&&(h=I),(L=r[we+1])<g&&(g=L),I>x&&(x=I),L>w&&(w=L);ee=0!==(ee=Math.max(x-h,w-g))?1/ee:0}return Vc(me,Me,s,h,g,ee),Me}function Uh(r,e,s,h,g){var x,w;if(g===Md(r,e,s,h)>0)for(x=e;x<s;x+=h)w=Ed(x,r[x],r[x+1],w);else for(x=s-h;x>=e;x-=h)w=Ed(x,r[x],r[x+1],w);return w&&_c(w,w.next)&&(jc(w),w=w.next),w}function kl(r,e){if(!r)return r;e||(e=r);var s,h=r;do{if(s=!1,h.steiner||!_c(h,h.next)&&0!==Do(h.prev,h,h.next))h=h.next;else{if(jc(h),(h=e=h.prev)===h.next)break;s=!0}}while(s||h!==e);return e}function Vc(r,e,s,h,g,x,w){if(r){!w&&x&&function(oe,ae,me,Me){var we=oe;do{null===we.z&&(we.z=Eu(we.x,we.y,ae,me,Me)),we.prevZ=we.prev,we.nextZ=we.next,we=we.next}while(we!==oe);we.prevZ.nextZ=null,we.prevZ=null,function(Je){var Xe,Mt,Gt,Ht,Qt,hn,ln,Yn,hi=1;do{for(Mt=Je,Je=null,Qt=null,hn=0;Mt;){for(hn++,Gt=Mt,ln=0,Xe=0;Xe<hi&&(ln++,Gt=Gt.nextZ);Xe++);for(Yn=hi;ln>0||Yn>0&&Gt;)0!==ln&&(0===Yn||!Gt||Mt.z<=Gt.z)?(Ht=Mt,Mt=Mt.nextZ,ln--):(Ht=Gt,Gt=Gt.nextZ,Yn--),Qt?Qt.nextZ=Ht:Je=Ht,Ht.prevZ=Qt,Qt=Ht;Mt=Gt}Qt.nextZ=null,hi*=2}while(hn>1)}(we)}(r,h,g,x);for(var I,L,ee=r;r.prev!==r.next;)if(I=r.prev,L=r.next,x?jm(r,h,g,x):af(r))e.push(I.i/s),e.push(r.i/s),e.push(L.i/s),jc(r),r=L.next,ee=L.next;else if((r=L)===ee){w?1===w?Vc(r=jh(kl(r),e,s),e,s,h,g,x,2):2===w&&gc(r,e,s,h,g,x):Vc(kl(r),e,s,h,g,x,1);break}}}function af(r){var e=r.prev,s=r,h=r.next;if(Do(e,s,h)>=0)return!1;for(var g=r.next.next;g!==r.prev;){if(Rl(e.x,e.y,s.x,s.y,h.x,h.y,g.x,g.y)&&Do(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function jm(r,e,s,h){var g=r.prev,x=r,w=r.next;if(Do(g,x,w)>=0)return!1;for(var I=g.x>x.x?g.x>w.x?g.x:w.x:x.x>w.x?x.x:w.x,L=g.y>x.y?g.y>w.y?g.y:w.y:x.y>w.y?x.y:w.y,ee=Eu(g.x<x.x?g.x<w.x?g.x:w.x:x.x<w.x?x.x:w.x,g.y<x.y?g.y<w.y?g.y:w.y:x.y<w.y?x.y:w.y,e,s,h),oe=Eu(I,L,e,s,h),ae=r.prevZ,me=r.nextZ;ae&&ae.z>=ee&&me&&me.z<=oe;){if(ae!==r.prev&&ae!==r.next&&Rl(g.x,g.y,x.x,x.y,w.x,w.y,ae.x,ae.y)&&Do(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,me!==r.prev&&me!==r.next&&Rl(g.x,g.y,x.x,x.y,w.x,w.y,me.x,me.y)&&Do(me.prev,me,me.next)>=0))return!1;me=me.nextZ}for(;ae&&ae.z>=ee;){if(ae!==r.prev&&ae!==r.next&&Rl(g.x,g.y,x.x,x.y,w.x,w.y,ae.x,ae.y)&&Do(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;me&&me.z<=oe;){if(me!==r.prev&&me!==r.next&&Rl(g.x,g.y,x.x,x.y,w.x,w.y,me.x,me.y)&&Do(me.prev,me,me.next)>=0)return!1;me=me.nextZ}return!0}function jh(r,e,s){var h=r;do{var g=h.prev,x=h.next.next;!_c(g,x)&&Du(g,h,h.next,x)&&Mu(g,x)&&Mu(x,g)&&(e.push(g.i/s),e.push(h.i/s),e.push(x.i/s),jc(h),jc(h.next),h=r=x),h=h.next}while(h!==r);return kl(h)}function gc(r,e,s,h,g,x){var w=r;do{for(var I=w.next.next;I!==w.prev;){if(w.i!==I.i&&Hm(w,I)){var L=lf(w,I);return w=kl(w,w.next),L=kl(L,L.next),Vc(w,e,s,h,g,x),void Vc(L,e,s,h,g,x)}I=I.next}w=w.next}while(w!==r)}function Cd(r,e){return r.x-e.x}function il(r,e){var s=function(x,w){var I,L=w,ee=x.x,oe=x.y,ae=-1/0;do{if(oe<=L.y&&oe>=L.next.y&&L.next.y!==L.y){var me=L.x+(oe-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(me<=ee&&me>ae){if(ae=me,me===ee){if(oe===L.y)return L;if(oe===L.next.y)return L.next}I=L.x<L.next.x?L:L.next}}L=L.next}while(L!==w);if(!I)return null;if(ee===ae)return I;var Me,we=I,Je=I.x,Xe=I.y,Mt=1/0;L=I;do{ee>=L.x&&L.x>=Je&&ee!==L.x&&Rl(oe<Xe?ee:ae,oe,Je,Xe,oe<Xe?ae:ee,oe,L.x,L.y)&&(Me=Math.abs(oe-L.y)/(ee-L.x),Mu(L,x)&&(Me<Mt||Me===Mt&&(L.x>I.x||L.x===I.x&&Uc(I,L)))&&(I=L,Mt=Me)),L=L.next}while(L!==we);return I}(r,e);if(!s)return e;var h=lf(s,r),g=kl(s,s.next);return kl(h,h.next),e===s?g:e}function Uc(r,e){return Do(r.prev,r,e.prev)<0&&Do(e.next,r,r.next)<0}function Eu(r,e,s,h,g){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*g)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-h)*g)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Hh(r){var e=r,s=r;do{(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next}while(e!==r);return s}function Rl(r,e,s,h,g,x,w,I){return(g-w)*(e-I)-(r-w)*(x-I)>=0&&(r-w)*(h-I)-(s-w)*(e-I)>=0&&(s-w)*(x-I)-(g-w)*(h-I)>=0}function Hm(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(s,h){var g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==h.i&&g.next.i!==h.i&&Du(g,g.next,s,h))return!0;g=g.next}while(g!==s);return!1}(r,e)&&(Mu(r,e)&&Mu(e,r)&&function(s,h){var g=s,x=!1,w=(s.x+h.x)/2,I=(s.y+h.y)/2;do{g.y>I!=g.next.y>I&&g.next.y!==g.y&&w<(g.next.x-g.x)*(I-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next}while(g!==s);return x}(r,e)&&(Do(r.prev,r,e.prev)||Do(r,e.prev,e))||_c(r,e)&&Do(r.prev,r,r.next)>0&&Do(e.prev,e,e.next)>0)}function Do(r,e,s){return(e.y-r.y)*(s.x-e.x)-(e.x-r.x)*(s.y-e.y)}function _c(r,e){return r.x===e.x&&r.y===e.y}function Du(r,e,s,h){var g=yc(Do(r,e,s)),x=yc(Do(r,e,h)),w=yc(Do(s,h,r)),I=yc(Do(s,h,e));return g!==x&&w!==I||!(0!==g||!ec(r,s,e))||!(0!==x||!ec(r,h,e))||!(0!==w||!ec(s,r,h))||!(0!==I||!ec(s,e,h))}function ec(r,e,s){return e.x<=Math.max(r.x,s.x)&&e.x>=Math.min(r.x,s.x)&&e.y<=Math.max(r.y,s.y)&&e.y>=Math.min(r.y,s.y)}function yc(r){return r>0?1:r<0?-1:0}function Mu(r,e){return Do(r.prev,r,r.next)<0?Do(r,e,r.next)>=0&&Do(r,r.prev,e)>=0:Do(r,e,r.prev)<0||Do(r,r.next,e)<0}function lf(r,e){var s=new Dd(r.i,r.x,r.y),h=new Dd(e.i,e.x,e.y),g=r.next,x=e.prev;return r.next=e,e.prev=r,s.next=g,g.prev=s,h.next=s,s.prev=h,x.next=h,h.prev=x,h}function Ed(r,e,s,h){var g=new Dd(r,e,s);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function jc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Dd(r,e,s){this.i=r,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Md(r,e,s,h){for(var g=0,x=e,w=s-h;x<s;x+=h)g+=(r[w]-r[x])*(r[x+1]+r[w+1]),w=x;return g}wd.exports=zc,wd.exports.default=zc,zc.deviation=function(r,e,s,h){var g=e&&e.length,x=Math.abs(Md(r,0,g?e[0]*s:r.length,s));if(g)for(var w=0,I=e.length;w<I;w++)x-=Math.abs(Md(r,e[w]*s,w<I-1?e[w+1]*s:r.length,s));var L=0;for(w=0;w<h.length;w+=3){var ee=h[w]*s,oe=h[w+1]*s,ae=h[w+2]*s;L+=Math.abs((r[ee]-r[ae])*(r[oe+1]-r[ee+1])-(r[ee]-r[oe])*(r[ae+1]-r[ee+1]))}return 0===x&&0===L?0:Math.abs((L-x)/x)},zc.flatten=function(r){for(var e=r[0][0].length,s={vertices:[],holes:[],dimensions:e},h=0,g=0;g<r.length;g++){for(var x=0;x<r[g].length;x++)for(var w=0;w<e;w++)s.vertices.push(r[g][x][w]);g>0&&s.holes.push(h+=r[g-1].length)}return s};var Gh=wd.exports;function $h(r,e,s,h,g){Hc(r,e,s||0,h||r.length-1,g||Sd)}function Hc(r,e,s,h,g){for(;h>s;){if(h-s>600){var x=h-s+1,w=e-s+1,I=Math.log(x),L=.5*Math.exp(2*I/3),ee=.5*Math.sqrt(I*L*(x-L)/x)*(w-x/2<0?-1:1);Hc(r,e,Math.max(s,Math.floor(e-w*L/x+ee)),Math.min(h,Math.floor(e+(x-w)*L/x+ee)),g)}var oe=r[e],ae=s,me=h;for(vc(r,s,e),g(r[h],oe)>0&&vc(r,s,h);ae<me;){for(vc(r,ae,me),ae++,me--;g(r[ae],oe)<0;)ae++;for(;g(r[me],oe)>0;)me--}0===g(r[s],oe)?vc(r,s,me):vc(r,++me,h),me<=e&&(s=me+1),e<=me&&(h=me-1)}}function vc(r,e,s){var h=r[e];r[e]=r[s],r[s]=h}function Sd(r,e){return r<e?-1:r>e?1:0}function Td(r,e){const s=r.length;if(s<=1)return[r];const h=[];let g,x;for(let w=0;w<s;w++){const I=un(r[w]);0!==I&&(r[w].area=Math.abs(I),void 0===x&&(x=I<0),x===I<0?(g&&h.push(g),g=[r[w]]):g.push(r[w]))}if(g&&h.push(g),e>1)for(let w=0;w<h.length;w++)h[w].length<=e||($h(h[w],e,1,h[w].length-1,Fo),h[w]=h[w].slice(0,e));return h}function Fo(r,e){return e.area-r.area}function Su(r,e,s){const h=s.patternDependencies;let g=!1;for(const x of e){const w=x.paint.get(`${r}-pattern`);w.isConstant()||(g=!0);const I=w.constantOr(null);I&&(g=!0,h[I.to]=!0,h[I.from]=!0)}return g}function Ad(r,e,s,h,g){const x=g.patternDependencies;for(const w of e){const I=w.paint.get(`${r}-pattern`).value;if("constant"!==I.kind){let L=I.evaluate({zoom:h-1},s,{},g.availableImages),ee=I.evaluate({zoom:h},s,{},g.availableImages),oe=I.evaluate({zoom:h+1},s,{},g.availableImages);L=L&&L.name?L.name:L,ee=ee&&ee.name?ee.name:ee,oe=oe&&oe.name?oe.name:oe,x[L]=!0,x[ee]=!0,x[oe]=!0,s.patterns[w.id]={min:L,mid:ee,max:oe}}}return s}class Gc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new dr,this.indexArray=new bs,this.indexArray2=new Ia,this.programConfigurations=new ta(e.layers,e.zoom),this.segments=new gr,this.segments2=new gr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.hasPattern=Su("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),w=[];for(const{feature:I,id:L,index:ee,sourceLayerIndex:oe}of e){const ae=this.layers[0]._featureFilter.needGeometry,me=na(I,ae);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),me,h))continue;const Me=x?g.evaluate(me,{},h,s.availableImages):void 0,we={id:L,properties:I.properties,type:I.type,sourceLayerIndex:oe,index:ee,geometry:ae?me.geometry:el(I),patterns:{},sortKey:Me};w.push(we)}x&&w.sort((I,L)=>I.sortKey-L.sortKey);for(const I of w){const{geometry:L,index:ee,sourceLayerIndex:oe}=I;if(this.hasPattern){const ae=Ad("fill",this.layers,I,this.zoom,s);this.patternFeatures.push(ae)}else this.addFeature(I,L,ee,h,{});s.featureIndex.insert(e[ee].feature,L,ee,oe,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}addFeatures(e,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sf),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,s,h,g,x){for(const w of Td(s,500)){let I=0;for(const Me of w)I+=Me.length;const L=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),ee=L.vertexLength,oe=[],ae=[];for(const Me of w){if(0===Me.length)continue;Me!==w[0]&&ae.push(oe.length/2);const we=this.segments2.prepareSegment(Me.length,this.layoutVertexArray,this.indexArray2),Je=we.vertexLength;this.layoutVertexArray.emplaceBack(Me[0].x,Me[0].y),this.indexArray2.emplaceBack(Je+Me.length-1,Je),oe.push(Me[0].x),oe.push(Me[0].y);for(let Xe=1;Xe<Me.length;Xe++)this.layoutVertexArray.emplaceBack(Me[Xe].x,Me[Xe].y),this.indexArray2.emplaceBack(Je+Xe-1,Je+Xe),oe.push(Me[Xe].x),oe.push(Me[Xe].y);we.vertexLength+=Me.length,we.primitiveLength+=Me.length}const me=Gh(oe,ae);for(let Me=0;Me<me.length;Me+=3)this.indexArray.emplaceBack(ee+me[Me],ee+me[Me+1],ee+me[Me+2]);L.vertexLength+=I,L.primitiveLength+=me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,g)}}An("FillBucket",Gc,{omit:["layers","patternFeatures"]});const Zh=new Bi({"fill-sort-key":new Et(ie.layout_fill["fill-sort-key"])});var cf={paint:new Bi({"fill-antialias":new Fe(ie.paint_fill["fill-antialias"]),"fill-opacity":new Et(ie.paint_fill["fill-opacity"]),"fill-color":new Et(ie.paint_fill["fill-color"]),"fill-outline-color":new Et(ie.paint_fill["fill-outline-color"]),"fill-translate":new Fe(ie.paint_fill["fill-translate"]),"fill-translate-anchor":new Fe(ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new ei(ie.paint_fill["fill-pattern"])}),layout:Zh};const uf=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:df}=uf;var Fl={},hf=ct,pf=$c;function $c(r,e,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=g,r.readFields(Zc,this,e)}function Zc(r,e,s){1==r?e.id=s.readVarint():2==r?function(h,g){for(var x=h.readVarint()+h.pos;h.pos<x;){var w=g._keys[h.readVarint()],I=g._values[h.readVarint()];g.properties[w]=I}}(s,e):3==r?e.type=s.readVarint():4==r&&(e._geometry=s.pos)}function Gs(r){for(var e,s,h=0,g=0,x=r.length,w=x-1;g<x;w=g++)h+=((s=r[w]).x-(e=r[g]).x)*(e.y+s.y);return h}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,s=r.readVarint()+r.pos,h=1,g=0,x=0,w=0,I=[];r.pos<s;){if(g<=0){var L=r.readVarint();h=7&L,g=L>>3}if(g--,1===h||2===h)x+=r.readSVarint(),w+=r.readSVarint(),1===h&&(e&&I.push(e),e=[]),e.push(new hf(x,w));else{if(7!==h)throw new Error("unknown command "+h);e&&e.push(e[0].clone())}}return e&&I.push(e),I},$c.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,s=1,h=0,g=0,x=0,w=1/0,I=-1/0,L=1/0,ee=-1/0;r.pos<e;){if(h<=0){var oe=r.readVarint();s=7&oe,h=oe>>3}if(h--,1===s||2===s)(g+=r.readSVarint())<w&&(w=g),g>I&&(I=g),(x+=r.readSVarint())<L&&(L=x),x>ee&&(ee=x);else if(7!==s)throw new Error("unknown command "+s)}return[w,L,I,ee]},$c.prototype.toGeoJSON=function(r,e,s){var h,g,x=this.extent*Math.pow(2,s),w=this.extent*r,I=this.extent*e,L=this.loadGeometry(),ee=$c.types[this.type];function oe(Me){for(var we=0;we<Me.length;we++){var Je=Me[we];Me[we]=[360*(Je.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(Je.y+I)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(h=0;h<L.length;h++)ae[h]=L[h][0];oe(L=ae);break;case 2:for(h=0;h<L.length;h++)oe(L[h]);break;case 3:for(L=function(Me){var we=Me.length;if(we<=1)return[Me];for(var Je,Xe,Mt=[],Gt=0;Gt<we;Gt++){var Ht=Gs(Me[Gt]);0!==Ht&&(void 0===Xe&&(Xe=Ht<0),Xe===Ht<0?(Je&&Mt.push(Je),Je=[Me[Gt]]):Je.push(Me[Gt]))}return Je&&Mt.push(Je),Mt}(L),h=0;h<L.length;h++)for(g=0;g<L[h].length;g++)oe(L[h][g])}1===L.length?L=L[0]:ee="Multi"+ee;var me={type:"Feature",geometry:{type:ee,coordinates:L},properties:this.properties};return"id"in this&&(me.id=this.id),me};var Id=pf,Pd=Od;function Od(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Ls,this,e),this.length=this._features.length}function Ls(r,e,s){15===r?e.version=s.readVarint():1===r?e.name=s.readString():5===r?e.extent=s.readVarint():2===r?e._features.push(s.pos):3===r?e._keys.push(s.readString()):4===r&&e._values.push(function(h){for(var g=null,x=h.readVarint()+h.pos;h.pos<x;){var w=h.readVarint()>>3;g=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}return g}(s))}Od.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new Id(this._pbf,e,this.extent,this._keys,this._values)};var Wc=Pd;function kd(r,e,s){if(3===r){var h=new Wc(s,s.readVarint()+s.pos);h.length&&(e[h.name]=h)}}Fl.VectorTile=function(r,e){this.layers=r.readFields(kd,{},e)},Fl.VectorTileFeature=pf,Fl.VectorTileLayer=Pd;const Wh=Fl.VectorTileFeature.types,Rd=Math.pow(2,13);function _l(r,e,s,h,g,x,w,I){r.emplaceBack(e,s,2*Math.floor(h*Rd)+w,g*Rd*2,x*Rd*2,Math.round(I))}class Fd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new oo,this.indexArray=new bs,this.programConfigurations=new ta(e.layers,e.zoom),this.segments=new gr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.features=[],this.hasPattern=Su("fill-extrusion",this.layers,s);for(const{feature:g,id:x,index:w,sourceLayerIndex:I}of e){const L=this.layers[0]._featureFilter.needGeometry,ee=na(g,L);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),ee,h))continue;const oe={id:x,sourceLayerIndex:I,index:w,geometry:L?ee.geometry:el(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Ad("fill-extrusion",this.layers,oe,this.zoom,s)):this.addFeature(oe,oe.geometry,w,h,{}),s.featureIndex.insert(g,oe.geometry,w,I,this.index,!0)}}addFeatures(e,s,h){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,s,h)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,df),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,h,g,x){for(const w of Td(s,500)){let I=0;for(const Me of w)I+=Me.length;let L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Me of w){if(0===Me.length||((r=Me).every(e=>e.x<0)||r.every(e=>e.x>Ro)||r.every(e=>e.y<0)||r.every(e=>e.y>Ro)))continue;let we=0;for(let Je=0;Je<Me.length;Je++){const Xe=Me[Je];if(Je>=1){const Mt=Me[Je-1];if(!qh(Xe,Mt)){L.vertexLength+4>gr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Gt=Xe.sub(Mt)._perp()._unit(),Ht=Mt.dist(Xe);we+Ht>32768&&(we=0),_l(this.layoutVertexArray,Xe.x,Xe.y,Gt.x,Gt.y,0,0,we),_l(this.layoutVertexArray,Xe.x,Xe.y,Gt.x,Gt.y,0,1,we),we+=Ht,_l(this.layoutVertexArray,Mt.x,Mt.y,Gt.x,Gt.y,0,0,we),_l(this.layoutVertexArray,Mt.x,Mt.y,Gt.x,Gt.y,0,1,we);const Qt=L.vertexLength;this.indexArray.emplaceBack(Qt,Qt+2,Qt+1),this.indexArray.emplaceBack(Qt+1,Qt+2,Qt+3),L.vertexLength+=4,L.primitiveLength+=2}}}}if(L.vertexLength+I>gr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),"Polygon"!==Wh[e.type])continue;const ee=[],oe=[],ae=L.vertexLength;for(const Me of w)if(0!==Me.length){Me!==w[0]&&oe.push(ee.length/2);for(let we=0;we<Me.length;we++){const Je=Me[we];_l(this.layoutVertexArray,Je.x,Je.y,0,0,1,1,0),ee.push(Je.x),ee.push(Je.y)}}const me=Gh(ee,oe);for(let Me=0;Me<me.length;Me+=3)this.indexArray.emplaceBack(ae+me[Me],ae+me[Me+2],ae+me[Me+1]);L.primitiveLength+=me.length/3,L.vertexLength+=I}var r;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,g)}}function qh(r,e){return r.x===e.x&&(r.x<0||r.x>Ro)||r.y===e.y&&(r.y<0||r.y>Ro)}An("FillExtrusionBucket",Fd,{omit:["layers","features"]});var Yh={paint:new Bi({"fill-extrusion-opacity":new Fe(ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Et(ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fe(ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fe(ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ei(ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Et(ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Et(ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fe(ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function qc(r,e){return r.x*e.x+r.y*e.y}function Kh(r,e){if(1===r.length){let s=0;const h=e[s++];let g;for(;!g||h.equals(g);)if(g=e[s++],!g)return 1/0;for(;s<e.length;s++){const x=e[s],w=r[0],I=g.sub(h),L=x.sub(h),ee=w.sub(h),oe=qc(I,I),ae=qc(I,L),me=qc(L,L),Me=qc(ee,I),we=qc(ee,L),Je=oe*me-ae*ae,Xe=(me*Me-ae*we)/Je,Mt=(oe*we-ae*Me)/Je,Gt=h.z*(1-Xe-Mt)+g.z*Xe+x.z*Mt;if(isFinite(Gt))return Gt}return 1/0}{let s=1/0;for(const h of e)s=Math.min(s,h.z);return s}}const Ld=qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mf}=Ld,gf=qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Yc}=gf,_f=Fl.VectorTileFeature.types,yf=Math.cos(Math.PI/180*37.5),tc=Math.pow(2,14)/.5;class Tu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new $i,this.layoutVertexArray2=new vr,this.indexArray=new bs,this.programConfigurations=new ta(e.layers,e.zoom),this.segments=new gr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.hasPattern=Su("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),w=[];for(const{feature:I,id:L,index:ee,sourceLayerIndex:oe}of e){const ae=this.layers[0]._featureFilter.needGeometry,me=na(I,ae);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),me,h))continue;const Me=x?g.evaluate(me,{},h):void 0,we={id:L,properties:I.properties,type:I.type,sourceLayerIndex:oe,index:ee,geometry:ae?me.geometry:el(I),patterns:{},sortKey:Me};w.push(we)}x&&w.sort((I,L)=>I.sortKey-L.sortKey);for(const I of w){const{geometry:L,index:ee,sourceLayerIndex:oe}=I;if(this.hasPattern){const ae=Ad("line",this.layers,I,this.zoom,s);this.patternFeatures.push(ae)}else this.addFeature(I,L,ee,h,{});s.featureIndex.insert(e[ee].feature,L,ee,oe,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}addFeatures(e,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Yc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,mf),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,s,h,g,x){const w=this.layers[0].layout,I=w.get("line-join").evaluate(e,{}),L=w.get("line-cap"),ee=w.get("line-miter-limit"),oe=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const ae of s)this.addLine(ae,e,I,L,ee,oe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,g)}addLine(e,s,h,g,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Mt=0;Mt<e.length-1;Mt++)this.totalDistance+=e[Mt].dist(e[Mt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I="Polygon"===_f[s.type];let L=e.length;for(;L>=2&&e[L-1].equals(e[L-2]);)L--;let ee=0;for(;ee<L-1&&e[ee].equals(e[ee+1]);)ee++;if(L<(I?3:2))return;"bevel"===h&&(x=1.05);const oe=this.overscaling<=16?122880/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let me,Me,we,Je,Xe;this.e1=this.e2=-1,I&&(me=e[L-2],Xe=e[ee].sub(me)._unit()._perp());for(let Mt=ee;Mt<L;Mt++){if(we=Mt===L-1?I?e[ee+1]:void 0:e[Mt+1],we&&e[Mt].equals(we))continue;Xe&&(Je=Xe),me&&(Me=me),me=e[Mt],Xe=we?we.sub(me)._unit()._perp():Je,Je=Je||Xe;let Gt=Je.add(Xe);0===Gt.x&&0===Gt.y||Gt._unit();const Ht=Je.x*Xe.x+Je.y*Xe.y,Qt=Gt.x*Xe.x+Gt.y*Xe.y,hn=0!==Qt?1/Qt:1/0,ln=2*Math.sqrt(2-2*Qt),Yn=Qt<yf&&Me&&we,hi=Je.x*Xe.y-Je.y*Xe.x>0;if(Yn&&Mt>ee){const Pn=me.dist(Me);if(Pn>2*oe){const Xn=me.sub(me.sub(Me)._mult(oe/Pn)._round());this.updateDistance(Me,Xn),this.addCurrentVertex(Xn,Je,0,0,ae),Me=Xn}}const Nn=Me&&we;let qn=Nn?h:I?"butt":g;if(Nn&&"round"===qn&&(hn<w?qn="miter":hn<=2&&(qn="fakeround")),"miter"===qn&&hn>x&&(qn="bevel"),"bevel"===qn&&(hn>2&&(qn="flipbevel"),hn<x&&(qn="miter")),Me&&this.updateDistance(Me,me),"miter"===qn)Gt._mult(hn),this.addCurrentVertex(me,Gt,0,0,ae);else if("flipbevel"===qn){if(hn>100)Gt=Xe.mult(-1);else{const Pn=hn*Je.add(Xe).mag()/Je.sub(Xe).mag();Gt._perp()._mult(Pn*(hi?-1:1))}this.addCurrentVertex(me,Gt,0,0,ae),this.addCurrentVertex(me,Gt.mult(-1),0,0,ae)}else if("bevel"===qn||"fakeround"===qn){const Pn=-Math.sqrt(hn*hn-1),Xn=hi?Pn:0,$n=hi?0:Pn;if(Me&&this.addCurrentVertex(me,Je,Xn,$n,ae),"fakeround"===qn){const wn=Math.round(180*ln/Math.PI/20);for(let Mi=1;Mi<wn;Mi++){let di=Mi/wn;if(.5!==di){const br=di-.5;di+=di*br*(di-1)*((1.0904+Ht*(Ht*(3.55645-1.43519*Ht)-3.2452))*br*br+(.848013+Ht*(.215638*Ht-1.06021)))}const cr=Xe.sub(Je)._mult(di)._add(Je)._unit()._mult(hi?-1:1);this.addHalfVertex(me,cr.x,cr.y,!1,hi,0,ae)}}we&&this.addCurrentVertex(me,Xe,-Xn,-$n,ae)}else if("butt"===qn)this.addCurrentVertex(me,Gt,0,0,ae);else if("square"===qn){const Pn=Me?1:-1;this.addCurrentVertex(me,Gt,Pn,Pn,ae)}else"round"===qn&&(Me&&(this.addCurrentVertex(me,Je,0,0,ae),this.addCurrentVertex(me,Je,1,1,ae,!0)),we&&(this.addCurrentVertex(me,Xe,-1,-1,ae,!0),this.addCurrentVertex(me,Xe,0,0,ae)));if(Yn&&Mt<L-1){const Pn=me.dist(we);if(Pn>2*oe){const Xn=me.add(we.sub(me)._mult(oe/Pn)._round());this.updateDistance(me,Xn),this.addCurrentVertex(Xn,Xe,0,0,ae),me=Xn}}}}addCurrentVertex(e,s,h,g,x,w=!1){const I=s.y*g-s.x,L=-s.y-s.x*g;this.addHalfVertex(e,s.x+s.y*h,s.y-s.x*h,w,!1,h,x),this.addHalfVertex(e,I,L,w,!0,-g,x),this.distance>tc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,s,h,g,x,w))}addHalfVertex({x:e,y:s},h,g,x,w,I,L){const ee=.5*(this.lineClips?this.scaledDistance*(tc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(x?1:0),(s<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(0===I?0:I<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const oe=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,oe),L.primitiveLength++),w?this.e2=oe:this.e1=oe}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,s){this.distance+=e.dist(s),this.updateScaledDistance()}}An("LineBucket",Tu,{omit:["layers","patternFeatures"]});const vf=new Bi({"line-cap":new Fe(ie.layout_line["line-cap"]),"line-join":new Et(ie.layout_line["line-join"]),"line-miter-limit":new Fe(ie.layout_line["line-miter-limit"]),"line-round-limit":new Fe(ie.layout_line["line-round-limit"]),"line-sort-key":new Et(ie.layout_line["line-sort-key"])});var Nd={paint:new Bi({"line-opacity":new Et(ie.paint_line["line-opacity"]),"line-color":new Et(ie.paint_line["line-color"]),"line-translate":new Fe(ie.paint_line["line-translate"]),"line-translate-anchor":new Fe(ie.paint_line["line-translate-anchor"]),"line-width":new Et(ie.paint_line["line-width"]),"line-gap-width":new Et(ie.paint_line["line-gap-width"]),"line-offset":new Et(ie.paint_line["line-offset"]),"line-blur":new Et(ie.paint_line["line-blur"]),"line-dasharray":new Yi(ie.paint_line["line-dasharray"]),"line-pattern":new ei(ie.paint_line["line-pattern"]),"line-gradient":new Ei(ie.paint_line["line-gradient"])}),layout:vf};const Bd=new class extends Et{possiblyEvaluate(r,e){return e=new Vr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,s,h){return e=He({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,s,h)}}(Nd.paint.properties["line-width"].specification);function Jh(r,e){return e>0?e+2*r:r}Bd.useIntegerZoom=!0;const Xh=qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bf=qr([{name:"a_projected_pos",components:3,type:"Float32"}],4);qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xf=qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qh=qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wf=qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ep(r,e,s){return r.sections.forEach(h=>{h.text=function(g,x,w){const I=x.layout.get("text-transform").evaluate(w,{});return"uppercase"===I?g=g.toLocaleUpperCase():"lowercase"===I&&(g=g.toLocaleLowerCase()),Ho.applyArabicShaping&&(g=Ho.applyArabicShaping(g)),g}(h.text,e,s)}),r}qr([{name:"triangle",components:3,type:"Uint16"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),qr([{type:"Float32",name:"offsetX"}]),qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const nc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var zd=Rr,Ll=function(r,e,s,h,g){var x,w,I=8*g-h-1,L=(1<<I)-1,ee=L>>1,oe=-7,ae=s?g-1:0,me=s?-1:1,Me=r[e+ae];for(ae+=me,x=Me&(1<<-oe)-1,Me>>=-oe,oe+=I;oe>0;x=256*x+r[e+ae],ae+=me,oe-=8);for(w=x&(1<<-oe)-1,x>>=-oe,oe+=h;oe>0;w=256*w+r[e+ae],ae+=me,oe-=8);if(0===x)x=1-ee;else{if(x===L)return w?NaN:1/0*(Me?-1:1);w+=Math.pow(2,h),x-=ee}return(Me?-1:1)*w*Math.pow(2,x-h)},Ua=function(r,e,s,h,g,x){var w,I,L,ee=8*x-g-1,oe=(1<<ee)-1,ae=oe>>1,me=23===g?Math.pow(2,-24)-Math.pow(2,-77):0,Me=h?0:x-1,we=h?1:-1,Je=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(I=isNaN(e)?1:0,w=oe):(w=Math.floor(Math.log(e)/Math.LN2),e*(L=Math.pow(2,-w))<1&&(w--,L*=2),(e+=w+ae>=1?me/L:me*Math.pow(2,1-ae))*L>=2&&(w++,L/=2),w+ae>=oe?(I=0,w=oe):w+ae>=1?(I=(e*L-1)*Math.pow(2,g),w+=ae):(I=e*Math.pow(2,ae-1)*Math.pow(2,g),w=0));g>=8;r[s+Me]=255&I,Me+=we,I/=256,g-=8);for(w=w<<g|I,ee+=g;ee>0;r[s+Me]=255&w,Me+=we,w/=256,ee-=8);r[s+Me-we]|=128*Je};function Rr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Rr.Varint=0,Rr.Fixed64=1,Rr.Bytes=2,Rr.Fixed32=5;var ic,Au=4294967296,Cf=1/Au,ja="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ha(r){return r.type===Rr.Bytes?r.readVarint()+r.pos:r.pos+1}function tp(r,e,s){var h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));s.realloc(h);for(var g=s.pos-1;g>=r;g--)s.buf[g+h]=s.buf[g]}function Iu(r,e){for(var s=0;s<r.length;s++)e.writeVarint(r[s])}function Kc(r,e){for(var s=0;s<r.length;s++)e.writeSVarint(r[s])}function np(r,e){for(var s=0;s<r.length;s++)e.writeFloat(r[s])}function ip(r,e){for(var s=0;s<r.length;s++)e.writeDouble(r[s])}function Vd(r,e){for(var s=0;s<r.length;s++)e.writeBoolean(r[s])}function Ud(r,e){for(var s=0;s<r.length;s++)e.writeFixed32(r[s])}function jd(r,e){for(var s=0;s<r.length;s++)e.writeSFixed32(r[s])}function Ef(r,e){for(var s=0;s<r.length;s++)e.writeFixed64(r[s])}function bc(r,e){for(var s=0;s<r.length;s++)e.writeSFixed64(r[s])}function xc(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function rc(r,e,s){r[s]=e,r[s+1]=e>>>8,r[s+2]=e>>>16,r[s+3]=e>>>24}function rp(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function Hd(r,e,s){1===r&&s.readMessage(Df,e)}function Df(r,e,s){if(3===r){const{id:h,bitmap:g,width:x,height:w,left:I,top:L,advance:ee}=s.readMessage(Mf,{});e.push({id:h,bitmap:new nl({width:x+6,height:w+6},g),metrics:{width:x,height:w,left:I,top:L,advance:ee}})}}function Mf(r,e,s){1===r?e.id=s.readVarint():2===r?e.bitmap=s.readBytes():3===r?e.width=s.readVarint():4===r?e.height=s.readVarint():5===r?e.left=s.readSVarint():6===r?e.top=s.readSVarint():7===r&&(e.advance=s.readVarint())}function op(r){let e=0,s=0;for(const w of r)e+=w.w*w.h,s=Math.max(s,w.w);r.sort((w,I)=>I.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),s),h:1/0}];let g=0,x=0;for(const w of r)for(let I=h.length-1;I>=0;I--){const L=h[I];if(!(w.w>L.w||w.h>L.h)){if(w.x=L.x,w.y=L.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===L.w&&w.h===L.h){const ee=h.pop();I<h.length&&(h[I]=ee)}else w.h===L.h?(L.x+=w.w,L.w-=w.w):w.w===L.w?(L.y+=w.h,L.h-=w.h):(h.push({x:L.x+w.w,y:L.y,w:L.w-w.w,h:w.h}),L.y+=w.h,L.h-=w.h);break}}return{w:g,h:x,fill:e/(g*x)||0}}Rr.prototype={destroy:function(){this.buf=null},readFields:function(r,e,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,x=this.pos;this.type=7&h,r(g,e,this),this.pos===x&&this.skip(h)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=xc(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=rp(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=xc(this.buf,this.pos)+xc(this.buf,this.pos+4)*Au;return this.pos+=8,r},readSFixed64:function(){var r=xc(this.buf,this.pos)+rp(this.buf,this.pos+4)*Au;return this.pos+=8,r},readFloat:function(){var r=Ll(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ll(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,s,h=this.buf;return e=127&(s=h[this.pos++]),s<128?e:(e|=(127&(s=h[this.pos++]))<<7,s<128?e:(e|=(127&(s=h[this.pos++]))<<14,s<128?e:(e|=(127&(s=h[this.pos++]))<<21,s<128?e:function(g,x,w){var I,L,ee=w.buf;if(I=(112&(L=ee[w.pos++]))>>4,L<128||(I|=(127&(L=ee[w.pos++]))<<3,L<128)||(I|=(127&(L=ee[w.pos++]))<<10,L<128)||(I|=(127&(L=ee[w.pos++]))<<17,L<128)||(I|=(127&(L=ee[w.pos++]))<<24,L<128)||(I|=(1&(L=ee[w.pos++]))<<31,L<128))return function Nl(r,e,s){return s?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}(g,I,x);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(s=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&ja?ja.decode(this.buf.subarray(e,r)):function(s,h,g){for(var x="",w=h;w<g;){var I,L,ee,oe=s[w],ae=null,me=oe>239?4:oe>223?3:oe>191?2:1;if(w+me>g)break;1===me?oe<128&&(ae=oe):2===me?128==(192&(I=s[w+1]))&&(ae=(31&oe)<<6|63&I)<=127&&(ae=null):3===me?(L=s[w+2],128==(192&(I=s[w+1]))&&128==(192&L)&&((ae=(15&oe)<<12|(63&I)<<6|63&L)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):4===me&&(L=s[w+2],ee=s[w+3],128==(192&(I=s[w+1]))&&128==(192&L)&&128==(192&ee)&&((ae=(15&oe)<<18|(63&I)<<12|(63&L)<<6|63&ee)<=65535||ae>=1114112)&&(ae=null)),null===ae?(ae=65533,me=1):ae>65535&&(ae-=65536,x+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),x+=String.fromCharCode(ae),w+=me}return x}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Rr.Bytes)return r.push(this.readVarint(e));var s=Ha(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Rr.Bytes)return r.push(this.readSVarint());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Rr.Bytes)return r.push(this.readBoolean());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Rr.Bytes)return r.push(this.readFloat());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Rr.Bytes)return r.push(this.readDouble());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Rr.Bytes)return r.push(this.readFixed32());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Rr.Bytes)return r.push(this.readSFixed32());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Rr.Bytes)return r.push(this.readFixed64());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Rr.Bytes)return r.push(this.readSFixed64());var e=Ha(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===Rr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Rr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Rr.Fixed32)this.pos+=4;else{if(e!==Rr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),rc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),rc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),rc(this.buf,-1&r,this.pos),rc(this.buf,Math.floor(r*Cf),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),rc(this.buf,-1&r,this.pos),rc(this.buf,Math.floor(r*Cf),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,s){var h,g,x,I;if(e>=0?(h=e%4294967296|0,g=e/4294967296|0):(g=~(-e/4294967296),4294967295^(h=~(-e%4294967296))?h=h+1|0:(h=0,g=g+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),x=h,(I=s).buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,I.buf[I.pos]=127&(x>>>=7),function(x,w){var I=(7&x)<<4;w.buf[w.pos++]|=I|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(g,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(h,g,x){for(var w,I,L=0;L<g.length;L++){if((w=g.charCodeAt(L))>55295&&w<57344){if(!I){w>56319||L+1===g.length?(h[x++]=239,h[x++]=191,h[x++]=189):I=w;continue}if(w<56320){h[x++]=239,h[x++]=191,h[x++]=189,I=w;continue}w=I-55296<<10|w-56320|65536,I=null}else I&&(h[x++]=239,h[x++]=191,h[x++]=189,I=null);w<128?h[x++]=w:(w<2048?h[x++]=w>>6|192:(w<65536?h[x++]=w>>12|224:(h[x++]=w>>18|240,h[x++]=w>>12&63|128),h[x++]=w>>6&63|128),h[x++]=63&w|128)}return x}(this.buf,r,this.pos);var s=this.pos-e;s>=128&&tp(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),Ua(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Ua(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,e){this.pos++;var s=this.pos;r(e,this);var h=this.pos-s;h>=128&&tp(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,e,s){this.writeTag(r,Rr.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,Iu,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,Kc,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,Vd,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,np,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,ip,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,Ud,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,jd,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,Ef,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,bc,e)},writeBytesField:function(r,e){this.writeTag(r,Rr.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Rr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Rr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Rr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Rr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Rr.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Rr.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Rr.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Rr.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Rr.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class Gd{constructor(e,{pixelRatio:s,version:h,stretchX:g,stretchY:x,content:w}){this.paddedRect=e,this.pixelRatio=s,this.stretchX=g,this.stretchY=x,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class sp{constructor(e,s){const h={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(e,h,x),this.addImages(s,g,x);const{w,h:I}=op(x),L=new Fs({width:w||1,height:I||1});for(const ee in e){const oe=e[ee],ae=h[ee].paddedRect;Fs.copy(oe.data,L,{x:0,y:0},{x:ae.x+1,y:ae.y+1},oe.data)}for(const ee in s){const oe=s[ee],ae=g[ee].paddedRect,me=ae.x+1,Me=ae.y+1,we=oe.data.width,Je=oe.data.height;Fs.copy(oe.data,L,{x:0,y:0},{x:me,y:Me},oe.data),Fs.copy(oe.data,L,{x:0,y:Je-1},{x:me,y:Me-1},{width:we,height:1}),Fs.copy(oe.data,L,{x:0,y:0},{x:me,y:Me+Je},{width:we,height:1}),Fs.copy(oe.data,L,{x:we-1,y:0},{x:me-1,y:Me},{width:1,height:Je}),Fs.copy(oe.data,L,{x:0,y:0},{x:me+we,y:Me},{width:1,height:Je})}this.image=L,this.iconPositions=h,this.patternPositions=g}addImages(e,s,h){for(const g in e){const x=e[g],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(w),s[g]=new Gd(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(e,s){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),s)}patchUpdatedImage(e,s,h){if(!e||!s||e.version===s.version)return;e.version=s.version;const[g,x]=e.tl;h.update(s.data,void 0,{x:g,y:x})}}An("ImagePosition",Gd),An("ImageAtlas",sp),f.WritingMode=void 0,(ic=f.WritingMode||(f.WritingMode={}))[ic.none=0]="none",ic[ic.horizontal=1]="horizontal",ic[ic.vertical=2]="vertical",ic[ic.horizontalOnly=3]="horizontalOnly";class wc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,s){const h=new wc;return h.scale=e||1,h.fontStack=s,h}static forImage(e){const s=new wc;return s.imageName=e,s}}class Bl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,s){const h=new Bl;for(let g=0;g<e.sections.length;g++){const x=e.sections[g];x.image?h.addImageSection(x):h.addTextSection(x,s)}return h}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let s="";for(let h=0;h<e.length;h++){const g=e.charCodeAt(h+1)||null,x=e.charCodeAt(h-1)||null;s+=g&&cs(g)&&!nc[e[h+1]]||x&&cs(x)&&!nc[e[h-1]]||!nc[e[h]]?e[h]:nc[e[h]]}return s}(this.text)}trim(){let e=0;for(let h=0;h<this.text.length&&Cc[this.text.charCodeAt(h)];h++)e++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=e&&Cc[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)}substring(e,s){const h=new Bl;return h.text=this.text.substring(e,s),h.sectionIndex=this.sectionIndex.slice(e,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,s)=>Math.max(e,this.sections[s].scale),0)}addTextSection(e,s){this.text+=e.text,this.sections.push(wc.forText(e.scale,e.fontStack||s));const h=this.sections.length-1;for(let g=0;g<e.text.length;++g)this.sectionIndex.push(h)}addImageSection(e){const s=e.image?e.image.name:"";if(0===s.length)return void Ut("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(wc.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ut("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Jc(r,e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je){const Xe=Bl.fromFeature(r,g);let Mt;ae===f.WritingMode.vertical&&Xe.verticalizePunctuation();const{processBidirectionalText:Gt,processStyledBidirectionalText:Ht}=Ho;if(Gt&&1===Xe.sections.length){Mt=[];const ln=Gt(Xe.toString(),Ou(Xe,ee,x,e,h,Me,we));for(const Yn of ln){const hi=new Bl;hi.text=Yn,hi.sections=Xe.sections;for(let Nn=0;Nn<Yn.length;Nn++)hi.sectionIndex.push(0);Mt.push(hi)}}else if(Ht){Mt=[];const ln=Ht(Xe.text,Xe.sectionIndex,Ou(Xe,ee,x,e,h,Me,we));for(const Yn of ln){const hi=new Bl;hi.text=Yn[0],hi.sectionIndex=Yn[1],hi.sections=Xe.sections,Mt.push(hi)}}else Mt=function(ln,Yn){const hi=[],Nn=ln.text;let qn=0;for(const Pn of Yn)hi.push(ln.substring(qn,Pn)),qn=Pn;return qn<Nn.length&&hi.push(ln.substring(qn,Nn.length)),hi}(Xe,Ou(Xe,ee,x,e,h,Me,we));const Qt=[],hn={positionedLines:Qt,text:Xe.toString(),top:oe[1],bottom:oe[1],left:oe[0],right:oe[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return function(ln,Yn,hi,Nn,qn,Pn,Xn,$n,wn,Mi,di,cr){let br=0,jr=-17,Nr=0,Go=0;const Mo="right"===$n?1:"left"===$n?0:.5;let Br=0;for(const Lo of qn){Lo.trim();const us=Lo.getMaxScale(),$s=24*(us-1),xs={positionedGlyphs:[],lineOffset:0};ln.positionedLines[Br]=xs;const oa=xs.positionedGlyphs;let Zs=0;if(!Lo.length()){jr+=Pn,++Br;continue}for(let No=0;No<Lo.length();No++){const or=Lo.getSection(No),ws=Lo.getSectionIndex(No),ds=Lo.getCharCode(No);let hs=0,sa=null,ba=null,Ga=null,bl=24;const xa=!(wn===f.WritingMode.horizontal||!di&&!Ma(ds)||di&&(Cc[ds]||($o=ds,In.Arabic($o)||In["Arabic Supplement"]($o)||In["Arabic Extended-A"]($o)||In["Arabic Presentation Forms-A"]($o)||In["Arabic Presentation Forms-B"]($o))));if(or.imageName){const aa=Nn[or.imageName];if(!aa)continue;Ga=or.imageName,ln.iconsInText=ln.iconsInText||!0,ba=aa.paddedRect;const Ws=aa.displaySize;or.scale=24*or.scale/cr,sa={width:Ws[0],height:Ws[1],left:1,top:-3,advance:xa?Ws[1]:Ws[0]},hs=$s+(24-Ws[1]*or.scale),bl=sa.advance;const ps=xa?Ws[0]*or.scale-24*us:Ws[1]*or.scale-24*us;ps>0&&ps>Zs&&(Zs=ps)}else{const aa=hi[or.fontStack],Ws=aa&&aa[ds];if(Ws&&Ws.rect)ba=Ws.rect,sa=Ws.metrics;else{const ps=Yn[or.fontStack],Vl=ps&&ps[ds];if(!Vl)continue;sa=Vl.metrics}hs=24*(us-or.scale)}xa?(ln.verticalizable=!0,oa.push({glyph:ds,imageName:Ga,x:br,y:jr+hs,vertical:xa,scale:or.scale,fontStack:or.fontStack,sectionIndex:ws,metrics:sa,rect:ba}),br+=bl*or.scale+Mi):(oa.push({glyph:ds,imageName:Ga,x:br,y:jr+hs,vertical:xa,scale:or.scale,fontStack:or.fontStack,sectionIndex:ws,metrics:sa,rect:ba}),br+=sa.advance*or.scale+Mi)}0!==oa.length&&(Nr=Math.max(br-Mi,Nr),ku(oa,0,oa.length-1,Mo,Zs)),br=0;const Hr=Pn*us+Zs;xs.lineOffset=Math.max(Zs,$s),jr+=Hr,Go=Math.max(Hr,Go),++Br}var $o;const ts=jr- -17,{horizontalAlign:zr,verticalAlign:ra}=Wd(Xn);(function(Lo,us,$s,xs,oa,Zs,Hr,No,or){const ws=(us-$s)*oa;let ds=0;ds=Zs!==Hr?-No*xs- -17:(-xs*or+.5)*Hr;for(const hs of Lo)for(const sa of hs.positionedGlyphs)sa.x+=ws,sa.y+=ds})(ln.positionedLines,Mo,zr,ra,Nr,Go,Pn,ts,qn.length),ln.top+=-ra*ts,ln.bottom=ln.top+ts,ln.left+=-zr*Nr,ln.right=ln.left+Nr}(hn,e,s,h,Mt,w,I,L,ae,ee,me,Je),!function(ln){for(const Yn of ln)if(0!==Yn.positionedGlyphs.length)return!1;return!0}(Qt)&&hn}const Cc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Sf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ap(r,e,s,h,g,x){if(e.imageName){const w=h[e.imageName];return w?w.displaySize[0]*e.scale*24/x+g:0}{const w=s[e.fontStack],I=w&&w[r];return I?I.metrics.advance*e.scale+g:0}}function $d(r,e,s,h){const g=Math.pow(r-e,2);return h?r<e?g/2:2*g:g+Math.abs(s)*s}function lp(r,e,s){let h=0;return 10===r&&(h-=1e4),s&&(h+=150),40!==r&&65288!==r||(h+=50),41!==e&&65289!==e||(h+=50),h}function zl(r,e,s,h,g,x){let w=null,I=$d(e,s,g,x);for(const L of h){const ee=$d(e-L.x,s,g,x)+L.badness;ee<=I&&(w=L,I=ee)}return{index:r,x:e,priorBreak:w,badness:I}}function Zd(r){return r?Zd(r.priorBreak).concat(r.index):[]}function Ou(r,e,s,h,g,x,w){if("point"!==x)return[];if(!r)return[];const I=[],L=function(me,Me,we,Je,Xe,Mt){let Gt=0;for(let Ht=0;Ht<me.length();Ht++){const Qt=me.getSection(Ht);Gt+=ap(me.getCharCode(Ht),Qt,Je,Xe,Me,Mt)}return Gt/Math.max(1,Math.ceil(Gt/we))}(r,e,s,h,g,w),ee=r.text.indexOf("\u200b")>=0;let oe=0;for(let me=0;me<r.length();me++){const Me=r.getSection(me),we=r.getCharCode(me);if(Cc[we]||(oe+=ap(we,Me,h,g,e,w)),me<r.length()-1){const Je=!((ae=we)<11904||!(In["Bopomofo Extended"](ae)||In.Bopomofo(ae)||In["CJK Compatibility Forms"](ae)||In["CJK Compatibility Ideographs"](ae)||In["CJK Compatibility"](ae)||In["CJK Radicals Supplement"](ae)||In["CJK Strokes"](ae)||In["CJK Symbols and Punctuation"](ae)||In["CJK Unified Ideographs Extension A"](ae)||In["CJK Unified Ideographs"](ae)||In["Enclosed CJK Letters and Months"](ae)||In["Halfwidth and Fullwidth Forms"](ae)||In.Hiragana(ae)||In["Ideographic Description Characters"](ae)||In["Kangxi Radicals"](ae)||In["Katakana Phonetic Extensions"](ae)||In.Katakana(ae)||In["Vertical Forms"](ae)||In["Yi Radicals"](ae)||In["Yi Syllables"](ae)));(Sf[we]||Je||Me.imageName)&&I.push(zl(me+1,oe,L,I,lp(we,r.getCharCode(me+1),Je&&ee),!1))}}var ae;return Zd(zl(r.length(),oe,L,I,0,!0))}function Wd(r){let e=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:e,verticalAlign:s}}function ku(r,e,s,h,g){if(!h&&!g)return;const x=r[s],w=(r[s].x+x.metrics.advance*x.scale)*h;for(let I=e;I<=s;I++)r[I].x-=w,r[I].y+=g}function Tf(r,e,s){const{horizontalAlign:h,verticalAlign:g}=Wd(s),x=e[0]-r.displaySize[0]*h,w=e[1]-r.displaySize[1]*g;return{image:r,top:w,bottom:w+r.displaySize[1],left:x,right:x+r.displaySize[0]}}function Ru(r,e,s,h,g,x){const w=r.image;let I;if(w.content){const Xe=w.content,Mt=w.pixelRatio||1;I=[Xe[0]/Mt,Xe[1]/Mt,w.displaySize[0]-Xe[2]/Mt,w.displaySize[1]-Xe[3]/Mt]}const L=e.left*x,ee=e.right*x;let oe,ae,me,Me;"width"===s||"both"===s?(Me=g[0]+L-h[3],ae=g[0]+ee+h[1]):(Me=g[0]+(L+ee-w.displaySize[0])/2,ae=Me+w.displaySize[0]);const we=e.top*x,Je=e.bottom*x;return"height"===s||"both"===s?(oe=g[1]+we-h[0],me=g[1]+Je+h[2]):(oe=g[1]+(we+Je-w.displaySize[1])/2,me=oe+w.displaySize[1]),{image:w,top:oe,right:ae,bottom:me,left:Me,collisionPadding:I}}const rl=128;function qd(r,e){const{expression:s}=e;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new Vr(r+1))};if("source"===s.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:g}=s;let x=0;for(;x<h.length&&h[x]<=r;)x++;x=Math.max(0,x-1);let w=x;for(;w<h.length&&h[w]<r+1;)w++;w=Math.min(h.length-1,w);const I=h[x],L=h[w];return"composite"===s.kind?{kind:"composite",minZoom:I,maxZoom:L,interpolationType:g}:{kind:"camera",minZoom:I,maxZoom:L,minSize:s.evaluate(new Vr(I)),maxSize:s.evaluate(new Vr(L)),interpolationType:g}}}class ol extends ct{constructor(e,s,h,g){super(e,s),this.angle=h,void 0!==g&&(this.segment=g)}clone(){return new ol(this.x,this.y,this.angle,this.segment)}}function Yd(r,e,s,h,g){if(void 0===e.segment)return!0;let x=e,w=e.segment+1,I=0;for(;I>-s/2;){if(w--,w<0)return!1;I-=r[w].dist(x),x=r[w]}I+=r[w].dist(r[w+1]),w++;const L=[];let ee=0;for(;I<s/2;){const oe=r[w],ae=r[w+1];if(!ae)return!1;let me=r[w-1].angleTo(oe)-oe.angleTo(ae);for(me=Math.abs((me+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:I,angleDelta:me}),ee+=me;I-L[0].distance>h;)ee-=L.shift().angleDelta;if(ee>g)return!1;w++,I+=oe.dist(ae)}return!0}function Xc(r){let e=0;for(let s=0;s<r.length-1;s++)e+=r[s].dist(r[s+1]);return e}function Qc(r,e,s){return r?.6*e*s:0}function Kd(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function Fu(r,e,s,h,g,x){const w=Qc(s,g,x),I=Kd(s,h)*x;let L=0;const ee=Xc(r)/2;for(let oe=0;oe<r.length-1;oe++){const ae=r[oe],me=r[oe+1],Me=ae.dist(me);if(L+Me>ee){const we=(ee-L)/Me,Je=Fr(ae.x,me.x,we),Xe=Fr(ae.y,me.y,we),Mt=new ol(Je,Xe,me.angleTo(ae),oe);return Mt._round(),!w||Yd(r,Mt,I,w,e)?Mt:void 0}L+=Me}}function cp(r,e,s,h,g,x,w,I,L){const ee=Qc(h,x,w),oe=Kd(h,g),ae=oe*w,me=0===r[0].x||r[0].x===L||0===r[0].y||r[0].y===L;return e-ae<e/4&&(e=ae+e/4),Lu(r,me?e/2*I%e:(oe/2+2*x)*w*I%e,e,ee,s,ae,me,!1,L)}function Lu(r,e,s,h,g,x,w,I,L){const ee=x/2,oe=Xc(r);let ae=0,me=e-s,Me=[];for(let we=0;we<r.length-1;we++){const Je=r[we],Xe=r[we+1],Mt=Je.dist(Xe),Gt=Xe.angleTo(Je);for(;me+s<ae+Mt;){me+=s;const Ht=(me-ae)/Mt,Qt=Fr(Je.x,Xe.x,Ht),hn=Fr(Je.y,Xe.y,Ht);if(Qt>=0&&Qt<L&&hn>=0&&hn<L&&me-ee>=0&&me+ee<=oe){const ln=new ol(Qt,hn,Gt,we);ln._round(),h&&!Yd(r,ln,x,h,g)||Me.push(ln)}}ae+=Mt}return I||Me.length||w||(Me=Lu(r,ae/2,s,h,g,x,w,!0,L)),Me}function Ec(r,e,s,h,g){const x=[];for(let w=0;w<r.length;w++){const I=r[w];let L;for(let ee=0;ee<I.length-1;ee++){let oe=I[ee],ae=I[ee+1];oe.x<e&&ae.x<e||(oe.x<e?oe=new ct(e,oe.y+(e-oe.x)/(ae.x-oe.x)*(ae.y-oe.y))._round():ae.x<e&&(ae=new ct(e,oe.y+(e-oe.x)/(ae.x-oe.x)*(ae.y-oe.y))._round()),oe.y<s&&ae.y<s||(oe.y<s?oe=new ct(oe.x+(s-oe.y)/(ae.y-oe.y)*(ae.x-oe.x),s)._round():ae.y<s&&(ae=new ct(oe.x+(s-oe.y)/(ae.y-oe.y)*(ae.x-oe.x),s)._round()),oe.x>=h&&ae.x>=h||(oe.x>=h?oe=new ct(h,oe.y+(h-oe.x)/(ae.x-oe.x)*(ae.y-oe.y))._round():ae.x>=h&&(ae=new ct(h,oe.y+(h-oe.x)/(ae.x-oe.x)*(ae.y-oe.y))._round()),oe.y>=g&&ae.y>=g||(oe.y>=g?oe=new ct(oe.x+(g-oe.y)/(ae.y-oe.y)*(ae.x-oe.x),g)._round():ae.y>=g&&(ae=new ct(oe.x+(g-oe.y)/(ae.y-oe.y)*(ae.x-oe.x),g)._round()),L&&oe.equals(L[L.length-1])||(L=[oe],x.push(L)),L.push(ae)))))}}return x}function up(r,e,s,h){const g=[],x=r.image,w=x.pixelRatio,I=x.paddedRect.w-2,L=x.paddedRect.h-2,ee=r.right-r.left,oe=r.bottom-r.top,ae=x.stretchX||[[0,I]],me=x.stretchY||[[0,L]],Me=(Pn,Xn)=>Pn+Xn[1]-Xn[0],we=ae.reduce(Me,0),Je=me.reduce(Me,0),Xe=I-we,Mt=L-Je;let Gt=0,Ht=we,Qt=0,hn=Je,ln=0,Yn=Xe,hi=0,Nn=Mt;if(x.content&&h){const Pn=x.content;Gt=eu(ae,0,Pn[0]),Qt=eu(me,0,Pn[1]),Ht=eu(ae,Pn[0],Pn[2]),hn=eu(me,Pn[1],Pn[3]),ln=Pn[0]-Gt,hi=Pn[1]-Qt,Yn=Pn[2]-Pn[0]-Ht,Nn=Pn[3]-Pn[1]-hn}const qn=(Pn,Xn,$n,wn)=>{const Mi=Nu(Pn.stretch-Gt,Ht,ee,r.left),di=tu(Pn.fixed-ln,Yn,Pn.stretch,we),cr=Nu(Xn.stretch-Qt,hn,oe,r.top),br=tu(Xn.fixed-hi,Nn,Xn.stretch,Je),jr=Nu($n.stretch-Gt,Ht,ee,r.left),Nr=tu($n.fixed-ln,Yn,$n.stretch,we),Go=Nu(wn.stretch-Qt,hn,oe,r.top),Mo=tu(wn.fixed-hi,Nn,wn.stretch,Je),Br=new ct(Mi,cr),$o=new ct(jr,cr),ts=new ct(jr,Go),zr=new ct(Mi,Go),ra=new ct(di/w,br/w),Lo=new ct(Nr/w,Mo/w),us=e*Math.PI/180;if(us){const oa=Math.sin(us),Zs=Math.cos(us),Hr=[Zs,-oa,oa,Zs];Br._matMult(Hr),$o._matMult(Hr),zr._matMult(Hr),ts._matMult(Hr)}const $s=Pn.stretch+Pn.fixed,xs=Xn.stretch+Xn.fixed;return{tl:Br,tr:$o,bl:zr,br:ts,tex:{x:x.paddedRect.x+1+$s,y:x.paddedRect.y+1+xs,w:$n.stretch+$n.fixed-$s,h:wn.stretch+wn.fixed-xs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ra,pixelOffsetBR:Lo,minFontScaleX:Yn/w/ee,minFontScaleY:Nn/w/oe,isSDF:s}};if(h&&(x.stretchX||x.stretchY)){const Pn=Jd(ae,Xe,we),Xn=Jd(me,Mt,Je);for(let $n=0;$n<Pn.length-1;$n++){const wn=Pn[$n],Mi=Pn[$n+1];for(let di=0;di<Xn.length-1;di++)g.push(qn(wn,Xn[di],Mi,Xn[di+1]))}}else g.push(qn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:L+1}));return g}function eu(r,e,s){let h=0;for(const g of r)h+=Math.max(e,Math.min(s,g[1]))-Math.max(e,Math.min(s,g[0]));return h}function Jd(r,e,s){const h=[{fixed:-1,stretch:0}];for(const[g,x]of r){const w=h[h.length-1];h.push({fixed:g-w.stretch,stretch:w.stretch}),h.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return h.push({fixed:e+1,stretch:s}),h}function Nu(r,e,s,h){return r/e*s+h}function tu(r,e,s,h){return r-e*s/h}An("Anchor",ol);class Dc{constructor(e,s,h,g,x,w,I,L,ee,oe){if(this.boxStartIndex=e.length,ee){let ae=w.top,me=w.bottom;const Me=w.collisionPadding;Me&&(ae-=Me[1],me+=Me[3]);let we=me-ae;we>0&&(we=Math.max(10,we),this.circleDiameter=we)}else{let ae=w.top*I-L,me=w.bottom*I+L,Me=w.left*I-L,we=w.right*I+L;const Je=w.collisionPadding;if(Je&&(Me-=Je[0]*I,ae-=Je[1]*I,we+=Je[2]*I,me+=Je[3]*I),oe){const Xe=new ct(Me,ae),Mt=new ct(we,ae),Gt=new ct(Me,me),Ht=new ct(we,me),Qt=oe*Math.PI/180;Xe._rotate(Qt),Mt._rotate(Qt),Gt._rotate(Qt),Ht._rotate(Qt),Me=Math.min(Xe.x,Mt.x,Gt.x,Ht.x),we=Math.max(Xe.x,Mt.x,Gt.x,Ht.x),ae=Math.min(Xe.y,Mt.y,Gt.y,Ht.y),me=Math.max(Xe.y,Mt.y,Gt.y,Ht.y)}e.emplaceBack(s.x,s.y,Me,ae,we,me,h,g,x)}this.boxEndIndex=e.length}}class dp{constructor(e=[],s=Gm){if(this.data=e,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:s,compare:h}=this,g=s[e];for(;e>0;){const x=e-1>>1,w=s[x];if(h(g,w)>=0)break;s[e]=w,e=x}s[e]=g}_down(e){const{data:s,compare:h}=this,g=this.length>>1,x=s[e];for(;e<g;){let w=1+(e<<1),I=s[w];const L=w+1;if(L<this.length&&h(s[L],I)<0&&(w=L,I=s[L]),h(I,x)>=0)break;s[e]=I,e=w}s[e]=x}}function Gm(r,e){return r<e?-1:r>e?1:0}function Xd(r,e=1,s=!1){let h=1/0,g=1/0,x=-1/0,w=-1/0;const I=r[0];for(let Me=0;Me<I.length;Me++){const we=I[Me];(!Me||we.x<h)&&(h=we.x),(!Me||we.y<g)&&(g=we.y),(!Me||we.x>x)&&(x=we.x),(!Me||we.y>w)&&(w=we.y)}const L=Math.min(x-h,w-g);let ee=L/2;const oe=new dp([],Af);if(0===L)return new ct(h,g);for(let Me=h;Me<x;Me+=L)for(let we=g;we<w;we+=L)oe.push(new oc(Me+ee,we+ee,ee,r));let ae=function(Me){let we=0,Je=0,Xe=0;const Mt=Me[0];for(let Gt=0,Ht=Mt.length,Qt=Ht-1;Gt<Ht;Qt=Gt++){const hn=Mt[Gt],ln=Mt[Qt],Yn=hn.x*ln.y-ln.x*hn.y;Je+=(hn.x+ln.x)*Yn,Xe+=(hn.y+ln.y)*Yn,we+=3*Yn}return new oc(Je/we,Xe/we,0,Me)}(r),me=oe.length;for(;oe.length;){const Me=oe.pop();(Me.d>ae.d||!ae.d)&&(ae=Me,s&&console.log("found best %d after %d probes",Math.round(1e4*Me.d)/1e4,me)),Me.max-ae.d<=e||(ee=Me.h/2,oe.push(new oc(Me.p.x-ee,Me.p.y-ee,ee,r)),oe.push(new oc(Me.p.x+ee,Me.p.y-ee,ee,r)),oe.push(new oc(Me.p.x-ee,Me.p.y+ee,ee,r)),oe.push(new oc(Me.p.x+ee,Me.p.y+ee,ee,r)),me+=4)}return s&&(console.log(`num probes: ${me}`),console.log(`best distance: ${ae.d}`)),ae.p}function Af(r,e){return e.max-r.max}function oc(r,e,s,h){this.p=new ct(r,e),this.h=s,this.d=function(g,x){let w=!1,I=1/0;for(let L=0;L<x.length;L++){const ee=x[L];for(let oe=0,ae=ee.length,me=ae-1;oe<ae;me=oe++){const Me=ee[oe],we=ee[me];Me.y>g.y!=we.y>g.y&&g.x<(we.x-Me.x)*(g.y-Me.y)/(we.y-Me.y)+Me.x&&(w=!w),I=Math.min(I,vd(g,Me,we))}}return(w?1:-1)*Math.sqrt(I)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const Qd=Number.POSITIVE_INFINITY;function hp(r,e){return e[1]!==Qd?function(s,h,g){let x=0,w=0;switch(h=Math.abs(h),g=Math.abs(g),s){case"top-right":case"top-left":case"top":w=g-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-g}switch(s){case"top-right":case"bottom-right":case"right":x=-h;break;case"top-left":case"bottom-left":case"left":x=h}return[x,w]}(r,e[0],e[1]):function(s,h){let g=0,x=0;h<0&&(h=0);const w=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-h;break;case"top":x=h-7}switch(s){case"top-right":case"bottom-right":g=-w;break;case"top-left":case"bottom-left":g=w;break;case"left":g=h;break;case"right":g=-h}return[g,x]}(r,e[0])}function ia(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function If(r,e,s,h,g,x,w,I,L,ee,oe){let ae=x.textMaxSize.evaluate(e,{});void 0===ae&&(ae=w);const me=r.layers[0].layout,Me=me.get("icon-offset").evaluate(e,{},oe),we=eh(s.horizontal),Je=w/24,Xe=r.tilePixelRatio*Je,Mt=r.tilePixelRatio*ae/24,Gt=r.tilePixelRatio*I,Ht=r.tilePixelRatio*me.get("symbol-spacing"),Qt=me.get("text-padding")*r.tilePixelRatio,hn=me.get("icon-padding")*r.tilePixelRatio,ln=me.get("text-max-angle")/180*Math.PI,Yn="viewport"!==me.get("text-rotation-alignment")&&"point"!==me.get("symbol-placement"),hi="map"===me.get("icon-rotation-alignment")&&"point"!==me.get("symbol-placement"),Nn=me.get("symbol-placement"),qn=Ht/2,Pn=me.get("icon-text-fit");let Xn;h&&"none"!==Pn&&(r.allowVerticalPlacement&&s.vertical&&(Xn=Ru(h,s.vertical,Pn,me.get("icon-text-fit-padding"),Me,Je)),we&&(h=Ru(h,we,Pn,me.get("icon-text-fit-padding"),Me,Je)));const $n=(wn,Mi)=>{Mi.x<0||Mi.x>=Ro||Mi.y<0||Mi.y>=Ro||function(di,cr,br,jr,Nr,Go,Mo,Br,$o,ts,zr,ra,Lo,us,$s,xs,oa,Zs,Hr,No,or,ws,ds,hs,sa){const ba=di.addToLineVertexArray(cr,br);let Ga,bl,xa,aa,Ws=0,ps=0,Vl=0,xp=0,ju=-1,lh=-1;const al={};let wp=Rc(""),Hu=0,Gu=0;if(void 0===Br._unevaluatedLayout.getValue("text-radial-offset")?[Hu,Gu]=Br.layout.get("text-offset").evaluate(or,{},hs).map(la=>24*la):(Hu=24*Br.layout.get("text-radial-offset").evaluate(or,{},hs),Gu=Qd),di.allowVerticalPlacement&&jr.vertical){const la=Br.layout.get("text-rotate").evaluate(or,{},hs)+90;xa=new Dc($o,cr,ts,zr,ra,jr.vertical,Lo,us,$s,la),Mo&&(aa=new Dc($o,cr,ts,zr,ra,Mo,oa,Zs,$s,la))}if(Nr){const la=Br.layout.get("icon-rotate").evaluate(or,{}),ll="none"!==Br.layout.get("icon-text-fit"),Ic=up(Nr,la,ds,ll),Pc=Mo?up(Mo,la,ds,ll):void 0;bl=new Dc($o,cr,ts,zr,ra,Nr,oa,Zs,!1,la),Ws=4*Ic.length;const ur=di.iconSizeData;let Ul=null;"source"===ur.kind?(Ul=[rl*Br.layout.get("icon-size").evaluate(or,{})],Ul[0]>yl&&Ut(`${di.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===ur.kind&&(Ul=[rl*ws.compositeIconSizes[0].evaluate(or,{},hs),rl*ws.compositeIconSizes[1].evaluate(or,{},hs)],(Ul[0]>yl||Ul[1]>yl)&&Ut(`${di.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),di.addSymbols(di.icon,Ic,Ul,No,Hr,or,f.WritingMode.none,cr,ba.lineStartIndex,ba.lineLength,-1,hs),ju=di.icon.placedSymbolArray.length-1,Pc&&(ps=4*Pc.length,di.addSymbols(di.icon,Pc,Ul,No,Hr,or,f.WritingMode.vertical,cr,ba.lineStartIndex,ba.lineLength,-1,hs),lh=di.icon.placedSymbolArray.length-1)}const $u=Object.keys(jr.horizontal);for(const la of $u){const ll=jr.horizontal[la];if(!Ga){wp=Rc(ll.text);const Pc=Br.layout.get("text-rotate").evaluate(or,{},hs);Ga=new Dc($o,cr,ts,zr,ra,ll,Lo,us,$s,Pc)}const Ic=1===ll.positionedLines.length;if(Vl+=pp(di,cr,ll,Go,Br,$s,or,xs,ba,jr.vertical?f.WritingMode.horizontal:f.WritingMode.horizontalOnly,Ic?$u:[la],al,ju,ws,hs),Ic)break}jr.vertical&&(xp+=pp(di,cr,jr.vertical,Go,Br,$s,or,xs,ba,f.WritingMode.vertical,["vertical"],al,lh,ws,hs));const Cp=Ga?Ga.boxStartIndex:di.collisionBoxArray.length,Ff=Ga?Ga.boxEndIndex:di.collisionBoxArray.length,Zu=xa?xa.boxStartIndex:di.collisionBoxArray.length,ch=xa?xa.boxEndIndex:di.collisionBoxArray.length,Lf=bl?bl.boxStartIndex:di.collisionBoxArray.length,uh=bl?bl.boxEndIndex:di.collisionBoxArray.length,Wu=aa?aa.boxStartIndex:di.collisionBoxArray.length,Ep=aa?aa.boxEndIndex:di.collisionBoxArray.length;let $a=-1;const qu=(la,ll)=>la&&la.circleDiameter?Math.max(la.circleDiameter,ll):ll;$a=qu(Ga,$a),$a=qu(xa,$a),$a=qu(bl,$a),$a=qu(aa,$a);const Yu=$a>-1?1:0;Yu&&($a*=sa/24),di.glyphOffsetArray.length>=sc.MAX_GLYPHS&&Ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==or.sortKey&&di.addToSortKeyRanges(di.symbolInstances.length,or.sortKey),di.symbolInstances.emplaceBack(cr.x,cr.y,al.right>=0?al.right:-1,al.center>=0?al.center:-1,al.left>=0?al.left:-1,al.vertical||-1,ju,lh,wp,Cp,Ff,Zu,ch,Lf,uh,Wu,Ep,ts,Vl,xp,Ws,ps,Yu,0,Lo,Hu,Gu,$a)}(r,Mi,wn,s,h,g,Xn,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,Xe,Qt,Yn,L,Gt,hn,hi,Me,e,x,ee,oe,w)};if("line"===Nn)for(const wn of Ec(e.geometry,0,0,Ro,Ro)){const Mi=cp(wn,Ht,ln,s.vertical||we,h,24,Mt,r.overscaling,Ro);for(const di of Mi){const cr=we;cr&&Pf(r,cr.text,qn,di)||$n(wn,di)}}else if("line-center"===Nn){for(const wn of e.geometry)if(wn.length>1){const Mi=Fu(wn,ln,s.vertical||we,h,24,Mt);Mi&&$n(wn,Mi)}}else if("Polygon"===e.type)for(const wn of Td(e.geometry,0)){const Mi=Xd(wn,16);$n(wn[0],new ol(Mi.x,Mi.y,0))}else if("LineString"===e.type)for(const wn of e.geometry)$n(wn,new ol(wn[0].x,wn[0].y,0));else if("Point"===e.type)for(const wn of e.geometry)for(const Mi of wn)$n([Mi],new ol(Mi.x,Mi.y,0))}const yl=32640;function pp(r,e,s,h,g,x,w,I,L,ee,oe,ae,me,Me,we){const Je=function(Gt,Ht,Qt,hn,ln,Yn,hi,Nn){const qn=hn.layout.get("text-rotate").evaluate(Yn,{})*Math.PI/180,Pn=[];for(const Xn of Ht.positionedLines)for(const $n of Xn.positionedGlyphs){if(!$n.rect)continue;const wn=$n.rect||{};let Mi=4,di=!0,cr=1,br=0;const jr=(ln||Nn)&&$n.vertical,Nr=$n.metrics.advance*$n.scale/2;if(Nn&&Ht.verticalizable){const Hr=24*($n.scale-1),No=(24-$n.metrics.width*$n.scale)/2;br=Xn.lineOffset/2-($n.imageName?-No:Hr)}if($n.imageName){const Hr=hi[$n.imageName];di=Hr.sdf,cr=Hr.pixelRatio,Mi=1/cr}const Go=ln?[$n.x+Nr,$n.y]:[0,0];let Mo=ln?[0,0]:[$n.x+Nr+Qt[0],$n.y+Qt[1]-br],Br=[0,0];jr&&(Br=Mo,Mo=[0,0]);const $o=($n.metrics.left-Mi)*$n.scale-Nr+Mo[0],ts=(-$n.metrics.top-Mi)*$n.scale+Mo[1],zr=$o+wn.w*$n.scale/cr,ra=ts+wn.h*$n.scale/cr,Lo=new ct($o,ts),us=new ct(zr,ts),$s=new ct($o,ra),xs=new ct(zr,ra);if(jr){const Hr=new ct(-Nr,Nr- -17),No=-Math.PI/2,or=12-Nr,ws=new ct(22-or,-($n.imageName?or:0)),ds=new ct(...Br);Lo._rotateAround(No,Hr)._add(ws)._add(ds),us._rotateAround(No,Hr)._add(ws)._add(ds),$s._rotateAround(No,Hr)._add(ws)._add(ds),xs._rotateAround(No,Hr)._add(ws)._add(ds)}if(qn){const Hr=Math.sin(qn),No=Math.cos(qn),or=[No,-Hr,Hr,No];Lo._matMult(or),us._matMult(or),$s._matMult(or),xs._matMult(or)}const oa=new ct(0,0),Zs=new ct(0,0);Pn.push({tl:Lo,tr:us,bl:$s,br:xs,tex:wn,writingMode:Ht.writingMode,glyphOffset:Go,sectionIndex:$n.sectionIndex,isSDF:di,pixelOffsetTL:oa,pixelOffsetBR:Zs,minFontScaleX:0,minFontScaleY:0})}return Pn}(0,s,I,g,x,w,h,r.allowVerticalPlacement),Xe=r.textSizeData;let Mt=null;"source"===Xe.kind?(Mt=[rl*g.layout.get("text-size").evaluate(w,{})],Mt[0]>yl&&Ut(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===Xe.kind&&(Mt=[rl*Me.compositeTextSizes[0].evaluate(w,{},we),rl*Me.compositeTextSizes[1].evaluate(w,{},we)],(Mt[0]>yl||Mt[1]>yl)&&Ut(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,Je,Mt,I,x,w,ee,e,L.lineStartIndex,L.lineLength,me,we);for(const Gt of oe)ae[Gt]=r.text.placedSymbolArray.length-1;return 4*Je.length}function eh(r){for(const e in r)return r[e];return null}function Pf(r,e,s,h){const g=r.compareText;if(e in g){const x=g[e];for(let w=x.length-1;w>=0;w--)if(h.dist(x[w])<s)return!0}else g[e]=[];return g[e].push(h),!1}const Of=Fl.VectorTileFeature.types,fp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bu(r,e,s,h,g,x,w,I,L,ee,oe,ae,me){const Me=I?Math.min(yl,Math.round(I[0])):0,we=I?Math.min(yl,Math.round(I[1])):0;r.emplaceBack(e,s,Math.round(32*h),Math.round(32*g),x,w,(Me<<1)+(L?1:0),we,16*ee,16*oe,256*ae,256*me)}function th(r,e,s){r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s)}function kf(r){for(const e of r.sections)if(gu(e.text))return!0;return!1}class Ki{constructor(e){this.layoutVertexArray=new Ir,this.indexArray=new bs,this.programConfigurations=e,this.segments=new gr,this.dynamicLayoutVertexArray=new vs,this.opacityVertexArray=new Xo,this.placedSymbolArray=new xn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,s,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,bf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,fp,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}An("SymbolBuffers",Ki);class zu{constructor(e,s,h){this.layoutVertexArray=new e,this.layoutAttributes=s,this.indexArray=new h,this.segments=new gr,this.collisionVertexArray=new Na}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,xf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}An("CollisionBuffers",zu);class sc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(w=>w.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bc([]),this.placementViewportMatrix=Bc([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qd(this.zoom,s["text-size"]),this.iconSizeData=qd(this.zoom,s["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap="never"!==nh(h,"text-overlap","text-allow-overlap")||"never"!==nh(h,"icon-overlap","icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!g.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>f.WritingMode[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=e.sourceID}createArrays(){this.text=new Ki(new ta(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Ki(new ta(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Wn,this.lineVertexArray=new Gn,this.symbolInstances=new Jt}calculateGlyphDependencies(e,s,h,g,x){for(let w=0;w<e.length;w++)if(s[e.charCodeAt(w)]=!0,(h||g)&&x){const I=nc[e.charAt(w)];I&&(s[I.charCodeAt(0)]=!0)}}populate(e,s,h){const g=this.layers[0],x=g.layout,w=x.get("text-font"),I=x.get("text-field"),L=x.get("icon-image"),ee=("constant"!==I.value.kind||I.value.value instanceof Re&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),oe="constant"!==L.value.kind||!!L.value.value||Object.keys(L.parameters).length>0,ae=x.get("symbol-sort-key");if(this.features=[],!ee&&!oe)return;const me=s.iconDependencies,Me=s.glyphDependencies,we=s.availableImages,Je=new Vr(this.zoom);for(const{feature:Xe,id:Mt,index:Gt,sourceLayerIndex:Ht}of e){const Qt=g._featureFilter.needGeometry,hn=na(Xe,Qt);if(!g._featureFilter.filter(Je,hn,h))continue;let ln,Yn;if(Qt||(hn.geometry=el(Xe)),ee){const Nn=g.getValueAndResolveTokens("text-field",hn,h,we),qn=Re.factory(Nn);kf(qn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Aa()||this.hasRTLText&&Ho.isParsed())&&(ln=ep(qn,g,hn))}if(oe){const Nn=g.getValueAndResolveTokens("icon-image",hn,h,we);Yn=Nn instanceof Ke?Nn:Ke.fromString(Nn)}if(!ln&&!Yn)continue;const hi=this.sortFeaturesByKey?ae.evaluate(hn,{},h):void 0;if(this.features.push({id:Mt,text:ln,icon:Yn,index:Gt,sourceLayerIndex:Ht,geometry:hn.geometry,properties:Xe.properties,type:Of[Xe.type],sortKey:hi}),Yn&&(me[Yn.name]=!0),ln){const Nn=w.evaluate(hn,{},h).join(","),qn="viewport"!==x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.WritingMode.vertical)>=0;for(const Pn of ln.sections)if(Pn.image)me[Pn.image.name]=!0;else{const Xn=Da(ln.toString()),$n=Pn.fontStack||Nn,wn=Me[$n]=Me[$n]||{};this.calculateGlyphDependencies(Pn.text,wn,qn,this.allowVerticalPlacement,Xn)}}}"line"===x.get("symbol-placement")&&(this.features=function(Xe){const Mt={},Gt={},Ht=[];let Qt=0;function hn(Nn){Ht.push(Xe[Nn]),Qt++}function ln(Nn,qn,Pn){const Xn=Gt[Nn];return delete Gt[Nn],Gt[qn]=Xn,Ht[Xn].geometry[0].pop(),Ht[Xn].geometry[0]=Ht[Xn].geometry[0].concat(Pn[0]),Xn}function Yn(Nn,qn,Pn){const Xn=Mt[qn];return delete Mt[qn],Mt[Nn]=Xn,Ht[Xn].geometry[0].shift(),Ht[Xn].geometry[0]=Pn[0].concat(Ht[Xn].geometry[0]),Xn}function hi(Nn,qn,Pn){const Xn=Pn?qn[0][qn[0].length-1]:qn[0][0];return`${Nn}:${Xn.x}:${Xn.y}`}for(let Nn=0;Nn<Xe.length;Nn++){const qn=Xe[Nn],Pn=qn.geometry,Xn=qn.text?qn.text.toString():null;if(!Xn){hn(Nn);continue}const $n=hi(Xn,Pn),wn=hi(Xn,Pn,!0);if($n in Gt&&wn in Mt&&Gt[$n]!==Mt[wn]){const Mi=Yn($n,wn,Pn),di=ln($n,wn,Ht[Mi].geometry);delete Mt[$n],delete Gt[wn],Gt[hi(Xn,Ht[di].geometry,!0)]=di,Ht[Mi].geometry=null}else $n in Gt?ln($n,wn,Pn):wn in Mt?Yn($n,wn,Pn):(hn(Nn),Mt[$n]=Qt-1,Gt[wn]=Qt-1)}return Ht.filter(Nn=>Nn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Xe,Mt)=>Xe.sortKey-Mt.sortKey)}update(e,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(e,s,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,s){const h=this.lineVertexArray.length;if(void 0!==e.segment){let g=e.dist(s[e.segment+1]),x=e.dist(s[e.segment]);const w={};for(let I=e.segment+1;I<s.length;I++)w[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:g},I<s.length-1&&(g+=s[I+1].dist(s[I]));for(let I=e.segment||0;I>=0;I--)w[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:x},I>0&&(x+=s[I-1].dist(s[I]));for(let I=0;I<s.length;I++){const L=w[I];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,s,h,g,x,w,I,L,ee,oe,ae,me){const Me=e.indexArray,we=e.layoutVertexArray,Je=e.segments.prepareSegment(4*s.length,we,Me,this.canOverlap?w.sortKey:void 0),Xe=this.glyphOffsetArray.length,Mt=Je.vertexLength,Gt=this.allowVerticalPlacement&&I===f.WritingMode.vertical?Math.PI/2:0,Ht=w.text&&w.text.sections;for(let Qt=0;Qt<s.length;Qt++){const{tl:hn,tr:ln,bl:Yn,br:hi,tex:Nn,pixelOffsetTL:qn,pixelOffsetBR:Pn,minFontScaleX:Xn,minFontScaleY:$n,glyphOffset:wn,isSDF:Mi,sectionIndex:di}=s[Qt],cr=Je.vertexLength,br=wn[1];Bu(we,L.x,L.y,hn.x,br+hn.y,Nn.x,Nn.y,h,Mi,qn.x,qn.y,Xn,$n),Bu(we,L.x,L.y,ln.x,br+ln.y,Nn.x+Nn.w,Nn.y,h,Mi,Pn.x,qn.y,Xn,$n),Bu(we,L.x,L.y,Yn.x,br+Yn.y,Nn.x,Nn.y+Nn.h,h,Mi,qn.x,Pn.y,Xn,$n),Bu(we,L.x,L.y,hi.x,br+hi.y,Nn.x+Nn.w,Nn.y+Nn.h,h,Mi,Pn.x,Pn.y,Xn,$n),th(e.dynamicLayoutVertexArray,L,Gt),Me.emplaceBack(cr,cr+1,cr+2),Me.emplaceBack(cr+1,cr+2,cr+3),Je.vertexLength+=4,Je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wn[0]),Qt!==s.length-1&&di===s[Qt+1].sectionIndex||e.programConfigurations.populatePaintArrays(we.length,w,w.index,{},me,Ht&&Ht[di])}e.placedSymbolArray.emplaceBack(L.x,L.y,Xe,this.glyphOffsetArray.length-Xe,Mt,ee,oe,L.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],I,0,!1,0,ae)}_addCollisionDebugVertex(e,s,h,g,x,w){return s.emplaceBack(0,0),e.emplaceBack(h.x,h.y,g,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(e,s,h,g,x,w,I){const L=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),ee=L.vertexLength,oe=x.layoutVertexArray,ae=x.collisionVertexArray,me=I.anchorX,Me=I.anchorY;this._addCollisionDebugVertex(oe,ae,w,me,Me,new ct(e,s)),this._addCollisionDebugVertex(oe,ae,w,me,Me,new ct(h,s)),this._addCollisionDebugVertex(oe,ae,w,me,Me,new ct(h,g)),this._addCollisionDebugVertex(oe,ae,w,me,Me,new ct(e,g)),L.vertexLength+=4;const we=x.indexArray;we.emplaceBack(ee,ee+1),we.emplaceBack(ee+1,ee+2),we.emplaceBack(ee+2,ee+3),we.emplaceBack(ee+3,ee),L.primitiveLength+=4}addDebugCollisionBoxes(e,s,h,g){for(let x=e;x<s;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,g?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zu(Qs,Qh.members,Ia),this.iconCollisionBox=new zu(Qs,Qh.members,Ia);for(let e=0;e<this.symbolInstances.length;e++){const s=this.symbolInstances.get(e);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(e,s,h,g,x,w,I,L,ee){const oe={};for(let ae=s;ae<h;ae++){const me=e.get(ae);oe.textBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},oe.textFeatureIndex=me.featureIndex;break}for(let ae=g;ae<x;ae++){const me=e.get(ae);oe.verticalTextBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},oe.verticalTextFeatureIndex=me.featureIndex;break}for(let ae=w;ae<I;ae++){const me=e.get(ae);oe.iconBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},oe.iconFeatureIndex=me.featureIndex;break}for(let ae=L;ae<ee;ae++){const me=e.get(ae);oe.verticalIconBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},oe.verticalIconFeatureIndex=me.featureIndex;break}return oe}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,s){const h=e.placedSymbolArray.get(s),g=h.vertexStartIndex+4*h.numGlyphs;for(let x=h.vertexStartIndex;x<g;x+=4)e.indexArray.emplaceBack(x,x+1,x+2),e.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const s=Math.sin(e),h=Math.cos(e),g=[],x=[],w=[];for(let I=0;I<this.symbolInstances.length;++I){w.push(I);const L=this.symbolInstances.get(I);g.push(0|Math.round(s*L.anchorX+h*L.anchorY)),x.push(L.featureIndex)}return w.sort((I,L)=>g[I]-g[L]||x[L]-x[I]),w}addToSortKeyRanges(e,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,x,w)=>{g>=0&&w.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}An("SymbolBucket",sc,{omit:["layers","collisionBoxArray","features","compareText"]}),sc.MAX_GLYPHS=65535,sc.addDynamicAttributes=th;const mp=new Bi({"symbol-placement":new Fe(ie.layout_symbol["symbol-placement"]),"symbol-spacing":new Fe(ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fe(ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Et(ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fe(ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fe(ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Fe(ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Fe(ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fe(ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fe(ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Et(ie.layout_symbol["icon-size"]),"icon-text-fit":new Fe(ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fe(ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Et(ie.layout_symbol["icon-image"]),"icon-rotate":new Et(ie.layout_symbol["icon-rotate"]),"icon-padding":new Fe(ie.layout_symbol["icon-padding"]),"icon-keep-upright":new Fe(ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Et(ie.layout_symbol["icon-offset"]),"icon-anchor":new Et(ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fe(ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fe(ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fe(ie.layout_symbol["text-rotation-alignment"]),"text-field":new Et(ie.layout_symbol["text-field"]),"text-font":new Et(ie.layout_symbol["text-font"]),"text-size":new Et(ie.layout_symbol["text-size"]),"text-max-width":new Et(ie.layout_symbol["text-max-width"]),"text-line-height":new Fe(ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Et(ie.layout_symbol["text-letter-spacing"]),"text-justify":new Et(ie.layout_symbol["text-justify"]),"text-radial-offset":new Et(ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fe(ie.layout_symbol["text-variable-anchor"]),"text-anchor":new Et(ie.layout_symbol["text-anchor"]),"text-max-angle":new Fe(ie.layout_symbol["text-max-angle"]),"text-writing-mode":new Fe(ie.layout_symbol["text-writing-mode"]),"text-rotate":new Et(ie.layout_symbol["text-rotate"]),"text-padding":new Fe(ie.layout_symbol["text-padding"]),"text-keep-upright":new Fe(ie.layout_symbol["text-keep-upright"]),"text-transform":new Et(ie.layout_symbol["text-transform"]),"text-offset":new Et(ie.layout_symbol["text-offset"]),"text-allow-overlap":new Fe(ie.layout_symbol["text-allow-overlap"]),"text-overlap":new Fe(ie.layout_symbol["text-overlap"]),"text-ignore-placement":new Fe(ie.layout_symbol["text-ignore-placement"]),"text-optional":new Fe(ie.layout_symbol["text-optional"])});var Mc={paint:new Bi({"icon-opacity":new Et(ie.paint_symbol["icon-opacity"]),"icon-color":new Et(ie.paint_symbol["icon-color"]),"icon-halo-color":new Et(ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Et(ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Et(ie.paint_symbol["icon-halo-blur"]),"icon-translate":new Fe(ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fe(ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Et(ie.paint_symbol["text-opacity"]),"text-color":new Et(ie.paint_symbol["text-color"],{runtimeType:Ai,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new Et(ie.paint_symbol["text-halo-color"]),"text-halo-width":new Et(ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Et(ie.paint_symbol["text-halo-blur"]),"text-translate":new Fe(ie.paint_symbol["text-translate"]),"text-translate-anchor":new Fe(ie.paint_symbol["text-translate-anchor"])}),layout:mp};class Oa{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:yi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(e.formattedSection))return s.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}An("FormatSectionOverride",Oa,{omit:["defaultValue"]});class nu extends Eo{constructor(e){super(e,Mc)}recalculate(e,s){if(super.recalculate(e,s),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const x of h)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,s,h,g){const x=this.layout.get(e).evaluate(s,{},h,g),w=this._unevaluatedLayout._values[e];return w.isDataDriven()||yn(w.value)||!x?x:(I=s.properties,x.replace(/{([^{}]+)}/g,(ee,oe)=>oe in I?String(I[oe]):""));var I}createBucket(e){return new sc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Mc.paint.overridableProperties){if(!nu.hasPaintOverride(this.layout,e))continue;const s=this.paint.get(e),h=new Oa(s),g=new To(h,s.property.specification);let x=null;x="constant"===s.value.kind||"source"===s.value.kind?new M("source",g):new S("composite",g,s.value.zoomStops,s.value._interpolationType),this.paint._values[e]=new be(s.property,x,s.parameters)}}_handleOverridablePaintPropertyUpdate(e,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&nu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,s){const h=e.get("text-field"),g=Mc.paint.properties[s];let x=!1;const w=I=>{for(const L of I)if(g.overrides&&g.overrides.hasOverride(L))return void(x=!0)};if("constant"===h.value.kind&&h.value.value instanceof Re)w(h.value.value.sections);else if("source"===h.value.kind){const I=ee=>{x||(ee instanceof rn&&at(ee.value)===pt?w(ee.value.sections):ee instanceof Cn?w(ee.sections):ee.eachChild(I))},L=h.value;L._styleExpression&&I(L._styleExpression.expression)}return x}}function nh(r,e,s){let h="never";const g=r.get(e);return g?h=g:r.get(s)&&(h="always"),h}var ih={paint:new Bi({"background-color":new Fe(ie.paint_background["background-color"]),"background-pattern":new Yi(ie.paint_background["background-pattern"]),"background-opacity":new Fe(ie.paint_background["background-opacity"])})},vl={paint:new Bi({"raster-opacity":new Fe(ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fe(ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fe(ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fe(ie.paint_raster["raster-brightness-max"]),"raster-saturation":new Fe(ie.paint_raster["raster-saturation"]),"raster-contrast":new Fe(ie.paint_raster["raster-contrast"]),"raster-resampling":new Fe(ie.paint_raster["raster-resampling"]),"raster-fade-duration":new Fe(ie.paint_raster["raster-fade-duration"])})};class Ur extends Eo{constructor(e){super(e,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const iu={circle:class extends Eo{constructor(r){super(r,Um)}createBucket(r){return new yd(r)}queryRadius(r){const e=r;return Ql("circle-radius",this,e)+Ql("circle-stroke-width",this,e)+ml(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,s,h,g,x,w,I){const L=xu(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),ee=this.paint.get("circle-radius").evaluate(e,s)+this.paint.get("circle-stroke-width").evaluate(e,s),oe="map"===this.paint.get("circle-pitch-alignment"),ae=oe?L:(we=I,L.map(Je=>Bh(Je,we))),me=oe?ee*w:ee;var we;for(const Me of h)for(const we of Me){const Je=oe?we:Bh(we,I);let Xe=me;const Mt=tl([],[we.x,we.y,0,1],I);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Xe*=Mt[3]/x.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Xe*=x.cameraToCenterDistance/Mt[3]),pc(ae,Je,Xe))return!0}return!1}},heatmap:class extends Eo{constructor(r){super(r,tf),this._updateColorRamp()}createBucket(r){return new Cu(r)}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Eo{constructor(r){super(r,nf)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Eo{constructor(r){super(r,cf)}recalculate(r,e){super.recalculate(r,e);const s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Gc(r)}queryRadius(){return ml(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,s,h,g,x,w){return Lc(xu(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Eo{constructor(r){super(r,Yh)}createBucket(r){return new Fd(r)}queryRadius(){return ml(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,e,s,h,g,x,w,I){const L=xu(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),ee=this.paint.get("fill-extrusion-height").evaluate(e,s),oe=this.paint.get("fill-extrusion-base").evaluate(e,s),ae=function(Me,we,Je,Xe){const Mt=[];for(const Gt of Me){const Ht=[Gt.x,Gt.y,0,1];tl(Ht,Ht,we),Mt.push(new ct(Ht[0]/Ht[3],Ht[1]/Ht[3]))}return Mt}(L,I),me=function(Me,we,Je,Xe){const Mt=[],Gt=[],Ht=Xe[8]*we,Qt=Xe[9]*we,hn=Xe[10]*we,ln=Xe[11]*we,Yn=Xe[8]*Je,hi=Xe[9]*Je,Nn=Xe[10]*Je,qn=Xe[11]*Je;for(const Pn of Me){const Xn=[],$n=[];for(const wn of Pn){const Mi=wn.x,di=wn.y,cr=Xe[0]*Mi+Xe[4]*di+Xe[12],br=Xe[1]*Mi+Xe[5]*di+Xe[13],jr=Xe[2]*Mi+Xe[6]*di+Xe[14],Nr=Xe[3]*Mi+Xe[7]*di+Xe[15],Go=jr+hn,Mo=Nr+ln,Br=cr+Yn,$o=br+hi,ts=jr+Nn,zr=Nr+qn,ra=new ct((cr+Ht)/Mo,(br+Qt)/Mo);ra.z=Go/Mo,Xn.push(ra);const Lo=new ct(Br/zr,$o/zr);Lo.z=ts/zr,$n.push(Lo)}Mt.push(Xn),Gt.push($n)}return[Mt,Gt]}(h,oe,ee,I);return function(Me,we,Je){let Xe=1/0;Lc(Je,we)&&(Xe=Kh(Je,we[0]));for(let Mt=0;Mt<we.length;Mt++){const Gt=we[Mt],Ht=Me[Mt];for(let Qt=0;Qt<Gt.length-1;Qt++){const hn=Gt[Qt],ln=[hn,Gt[Qt+1],Ht[Qt+1],Ht[Qt],hn];Ol(Je,ln)&&(Xe=Math.min(Xe,Kh(Je,ln)))}}return Xe!==1/0&&Xe}(me[0],me[1],ae)}},line:class extends Eo{constructor(r){super(r,Nd),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){"line-gradient"===r&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ds,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=Bd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Tu(r)}queryRadius(r){const e=r,s=Jh(Ql("line-width",this,e),Ql("line-gap-width",this,e)),h=Ql("line-offset",this,e);return s/2+Math.abs(h)+ml(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,s,h,g,x,w){const I=xu(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),L=w/2*Jh(this.paint.get("line-width").evaluate(e,s),this.paint.get("line-gap-width").evaluate(e,s)),ee=this.paint.get("line-offset").evaluate(e,s);return ee&&(h=function(oe,ae){const me=[];for(let Me=0;Me<oe.length;Me++){const we=oe[Me],Je=[];for(let Xe=0;Xe<we.length;Xe++){const Mt=we[Xe-1],Gt=we[Xe],Ht=we[Xe+1],Qt=0===Xe?new ct(0,0):Gt.sub(Mt)._unit()._perp(),hn=Xe===we.length-1?new ct(0,0):Ht.sub(Gt)._unit()._perp(),ln=Qt._add(hn)._unit(),Yn=ln.x*hn.x+ln.y*hn.y;0!==Yn&&ln._mult(1/Yn),Je.push(ln._mult(ae)._add(Gt))}me.push(Je)}return me}(h,ee*w)),function(oe,ae,me){for(let Me=0;Me<ae.length;Me++){const we=ae[Me];if(oe.length>=3)for(let Je=0;Je<we.length;Je++)if(fc(oe,we[Je]))return!0;if(Vm(oe,we,me))return!0}return!1}(I,h,L)}isTileClipped(){return!0}},symbol:nu,background:class extends Eo{constructor(r){super(r,ih)}},raster:class extends Eo{constructor(r){super(r,vl)}}};class rh{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Rf=6371008.8;class so{constructor(e,s){if(isNaN(e)||isNaN(s))throw new Error(`Invalid LngLat object: (${e}, ${s})`);if(this.lng=+e,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new so(ze(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const s=Math.PI/180,h=this.lat*s,g=e.lat*s,x=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((e.lng-this.lng)*s);return Rf*Math.acos(Math.min(x,1))}toBounds(e=0){const s=360*e/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new Sc(new so(this.lng-h,this.lat-s),new so(this.lng+h,this.lat+s))}static convert(e){if(e instanceof so)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new so(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new so(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Sc{constructor(e,s){e&&(s?this.setSouthWest(e).setNorthEast(s):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof so?new so(e.lng,e.lat):so.convert(e),this}setSouthWest(e){return this._sw=e instanceof so?new so(e.lng,e.lat):so.convert(e),this}extend(e){const s=this._sw,h=this._ne;let g,x;if(e instanceof so)g=e,x=e;else{if(!(e instanceof Sc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Sc.convert(e)):this.extend(so.convert(e)):this;if(g=e._sw,x=e._ne,!g||!x)return this}return s||h?(s.lng=Math.min(g.lng,s.lng),s.lat=Math.min(g.lat,s.lat),h.lng=Math.max(x.lng,h.lng),h.lat=Math.max(x.lat,h.lat)):(this._sw=new so(g.lng,g.lat),this._ne=new so(x.lng,x.lat)),this}getCenter(){return new so((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new so(this.getWest(),this.getNorth())}getSouthEast(){return new so(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:s,lat:h}=so.convert(e);let g=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(e){return e instanceof Sc?e:e&&new Sc(e)}}const ru=2*Math.PI*Rf;function Tc(r){return ru*Math.cos(r*Math.PI/180)}function ou(r){return(180+r)/360}function Ac(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function ac(r,e){return r/Tc(e)}function oh(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class su{constructor(e,s,h=0){this.x=+e,this.y=+s,this.z=+h}static fromLngLat(e,s=0){const h=so.convert(e);return new su(ou(h.lng),Ac(h.lat),ac(s,h.lat))}toLngLat(){return new so(360*this.x-180,oh(this.y))}toAltitude(){return this.z*Tc(oh(this.y))}meterInMercatorCoordinateUnits(){return 1/ru*(e=oh(this.y),1/Math.cos(e*Math.PI/180));var e}}function gp(r,e,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[r*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class sh{constructor(e,s,h){this.z=e,this.x=s,this.y=h,this.key=au(0,e,e,s,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,s,h){const g=(w=this.y,I=this.z,L=gp(256*(x=this.x),256*(w=Math.pow(2,I)-w-1),I),ee=gp(256*(x+1),256*(w+1),I),L[0]+","+L[1]+","+ee[0]+","+ee[1]);var x,w,I,L,ee;const oe=function(ae,me,Me){let we,Je="";for(let Xe=ae;Xe>0;Xe--)we=1<<Xe-1,Je+=(me&we?1:0)+(Me&we?2:0);return Je}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,oe).replace(/{bbox-epsg-3857}/g,g)}getTilePoint(e){const s=Math.pow(2,this.z);return new ct((e.x*s-this.x)*Ro,(e.y*s-this.y)*Ro)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _p{constructor(e,s){this.wrap=e,this.canonical=s,this.key=au(e,s.z,s.z,s.x,s.y)}}class va{constructor(e,s,h,g,x){this.overscaledZ=e,this.wrap=s,this.canonical=new sh(h,+g,+x),this.key=au(s,e,h,g,x)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const s=this.canonical.z-e;return e>this.canonical.z?new va(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new va(e,this.wrap,e,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(e,s){const h=this.canonical.z-e;return e>this.canonical.z?au(this.wrap*+s,e,this.canonical.z,this.canonical.x,this.canonical.y):au(this.wrap*+s,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const s=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>s&&e.canonical.y===this.canonical.y>>s}children(e){if(this.overscaledZ>=e)return[new va(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new va(s,this.wrap,s,h,g),new va(s,this.wrap,s,h+1,g),new va(s,this.wrap,s,h,g+1),new va(s,this.wrap,s,h+1,g+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new va(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new va(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _p(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new su(e.x-this.wrap,e.y))}}function au(r,e,s,h,g){(r*=2)<0&&(r=-1*r-1);const x=1<<s;return(x*x*r+x*g+h).toString(36)+s.toString(36)+e.toString(36)}An("CanonicalTileID",sh),An("OverscaledTileID",va,{omit:["posMatrix"]});class yp{constructor(e,s,h){if(this.uid=e,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&"mapbox"!==h&&"terrarium"!==h)return void Ut(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const g=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let x=0;x<g;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(g,x)]=this.data[this._idx(g-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,g)]=this.data[this._idx(x,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)]}get(e,s){const h=new Uint8Array(this.data.buffer),g=4*this._idx(e,s);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[g],h[g+1],h[g+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,s){if(e<-1||e>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(e+1)}_unpackMapbox(e,s,h){return(256*e*256+256*s+h)/10-1e4}_unpackTerrarium(e,s,h){return 256*e+s+h/256-32768}getPixels(){return new Fs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,s,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,x=s*this.dim+this.dim,w=h*this.dim,I=h*this.dim+this.dim;switch(s){case-1:g=x-1;break;case 1:x=g+1}switch(h){case-1:w=I-1;break;case 1:I=w+1}const L=-s*this.dim,ee=-h*this.dim;for(let oe=w;oe<I;oe++)for(let ae=g;ae<x;ae++)this.data[this._idx(ae,oe)]=e.data[this._idx(ae+L,oe+ee)]}}An("DEMData",yp);class lc{constructor(e){this._stringToNumber={},this._numberToString=[];for(let s=0;s<e.length;s++){const h=e[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Vu{constructor(e,s,h,g,x){this.type="Feature",this._vectorTileFeature=e,e._z=s,e._x=h,e._y=g,this.properties=e.properties,this.id=x}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const s in this)"_geometry"!==s&&"_vectorTileFeature"!==s&&(e[s]=this[s]);return e}}class Ti{constructor(e,s){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Dr(Ro,16,0),this.grid3D=new Dr(Ro,16,0),this.featureIndexArray=new nr,this.promoteId=s}insert(e,s,h,g,x,w){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,x);const L=w?this.grid3D:this.grid;for(let ee=0;ee<s.length;ee++){const oe=s[ee],ae=[1/0,1/0,-1/0,-1/0];for(let me=0;me<oe.length;me++){const Me=oe[me];ae[0]=Math.min(ae[0],Me.x),ae[1]=Math.min(ae[1],Me.y),ae[2]=Math.max(ae[2],Me.x),ae[3]=Math.max(ae[3],Me.y)}ae[0]<Ro&&ae[1]<Ro&&ae[2]>=0&&ae[3]>=0&&L.insert(I,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fl.VectorTile(new zd(this.rawTileData)).layers,this.sourceLayerCoder=new lc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,s,h,g){this.loadVTLayers();const x=e.params||{},w=Ro/e.tileSize/e.scale,I=mi(x.filter),L=e.queryGeometry,ee=e.queryPadding*w,oe=es(L),ae=this.grid.query(oe.minX-ee,oe.minY-ee,oe.maxX+ee,oe.maxY+ee),me=es(e.cameraQueryGeometry),Me=this.grid3D.query(me.minX-ee,me.minY-ee,me.maxX+ee,me.maxY+ee,(Xe,Mt,Gt,Ht)=>function(Qt,hn,ln,Yn,hi){for(const qn of Qt)if(hn<=qn.x&&ln<=qn.y&&Yn>=qn.x&&hi>=qn.y)return!0;const Nn=[new ct(hn,ln),new ct(hn,hi),new ct(Yn,hi),new ct(Yn,ln)];if(Qt.length>2)for(const qn of Nn)if(fc(Qt,qn))return!0;for(let qn=0;qn<Qt.length-1;qn++)if(bu(Qt[qn],Qt[qn+1],Nn))return!0;return!1}(e.cameraQueryGeometry,Xe-ee,Mt-ee,Gt+ee,Ht+ee));for(const Xe of Me)ae.push(Xe);ae.sort(sl);const we={};let Je;for(let Xe=0;Xe<ae.length;Xe++){const Mt=ae[Xe];if(Mt===Je)continue;Je=Mt;const Gt=this.featureIndexArray.get(Mt);let Ht=null;this.loadMatchingFeature(we,Gt.bucketIndex,Gt.sourceLayerIndex,Gt.featureIndex,I,x.layers,x.availableImages,s,h,g,(Qt,hn,ln)=>(Ht||(Ht=el(Qt)),hn.queryIntersectsFeature(L,Qt,ln,Ht,this.z,e.transform,w,e.pixelPosMatrix)))}return we}loadMatchingFeature(e,s,h,g,x,w,I,L,ee,oe,ae){const me=this.bucketLayerIDs[s];if(w&&!function(Xe,Mt){for(let Gt=0;Gt<Xe.length;Gt++)if(Mt.indexOf(Xe[Gt])>=0)return!0;return!1}(w,me))return;const Me=this.sourceLayerCoder.decode(h),we=this.vtLayers[Me].feature(g);if(x.needGeometry){const Xe=na(we,!0);if(!x.filter(new Vr(this.tileID.overscaledZ),Xe,this.tileID.canonical))return}else if(!x.filter(new Vr(this.tileID.overscaledZ),we))return;const Je=this.getId(we,Me);for(let Xe=0;Xe<me.length;Xe++){const Mt=me[Xe];if(w&&w.indexOf(Mt)<0)continue;const Gt=L[Mt];if(!Gt)continue;let Ht={};Je&&oe&&(Ht=oe.getState(Gt.sourceLayer||"_geojsonTileLayer",Je));const Qt=He({},ee[Mt]);Qt.paint=Wi(Qt.paint,Gt.paint,we,Ht,I),Qt.layout=Wi(Qt.layout,Gt.layout,we,Ht,I);const hn=!ae||ae(we,Gt,Ht);if(!hn)continue;const ln=new Vu(we,this.z,this.x,this.y,Je);ln.layer=Qt;let Yn=e[Mt];void 0===Yn&&(Yn=e[Mt]=[]),Yn.push({featureIndex:g,feature:ln,intersectionZ:hn})}}lookupSymbolFeatures(e,s,h,g,x,w,I,L){const ee={};this.loadVTLayers();const oe=mi(x);for(const ae of e)this.loadMatchingFeature(ee,h,g,ae,oe,w,I,L,s);return ee}hasLayer(e){for(const s of this.bucketLayerIDs)for(const h of s)if(e===h)return!0;return!1}getId(e,s){let h=e.id;return this.promoteId&&(h=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[s]],"boolean"==typeof h&&(h=Number(h))),h}}function Wi(r,e,s,h,g){return Ye(r,(x,w)=>{const I=e instanceof Ve?e.get(w):null;return I&&I.evaluate?I.evaluate(s,h,g):I})}function es(r){let e=1/0,s=1/0,h=-1/0,g=-1/0;for(const x of r)e=Math.min(e,x.x),s=Math.min(s,x.y),h=Math.max(h,x.x),g=Math.max(g,x.y);return{minX:e,minY:s,maxX:h,maxY:g}}function sl(r,e){return e-r}var vp;An("FeatureIndex",Ti,{omit:["rawTileData","sourceLayerCoder"]}),f.PerformanceMarkers=void 0,(vp=f.PerformanceMarkers||(f.PerformanceMarkers={})).create="create",vp.load="load",vp.fullLoad="fullLoad";let ah=null,Uu=[];const bp=1e3/30,$m={mark(r){performance.mark(r)},frame(r){const e=r;null!=ah&&Uu.push(e-ah),ah=e},clearMetrics(){ah=null,Uu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const r in f.PerformanceMarkers)performance.clearMarks(f.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",f.PerformanceMarkers.create,f.PerformanceMarkers.load),performance.measure("fullLoadTime",f.PerformanceMarkers.create,f.PerformanceMarkers.fullLoad);const r=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,s=Uu.length,h=1/(Uu.reduce((x,w)=>x+w,0)/s/1e3),g=Uu.filter(x=>x>bp).reduce((x,w)=>x+(w-bp)/bp,0);return{loadTime:r,fullLoadTime:e,fps:h,percentDroppedFrames:g/(s+g)*100}}};f.AJAXError=on,f.ARRAY_TYPE=gl,f.Actor=class{constructor(r,e,s){this.target=r,this.parent=e,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},gt(["receive","process"],this),this.invoker=new rh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Dt()?r:window}send(r,e,s,h,g=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[x]=s);const w=tn(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:r,hasCallback:!!s,targetMapId:h,mustQueue:g,sourceMapId:this.mapId,data:ks(e,w)},w),{cancel:()=>{s&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(r){const e=r.data,s=e.id;if(s&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[s];const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else Dt()||e.mustQueue?(this.tasks[s]=e,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,e)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){if("<response>"===e.type){const s=this.callbacks[r];delete this.callbacks[r],s&&(e.error?s(Ea(e.error)):s(null,Ea(e.data)))}else{let s=!1;const h=tn(this.globalScope)?void 0:[],g=e.hasCallback?(I,L)=>{s=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:I?ks(I):null,data:ks(L,h)},h)}:I=>{s=!0};let x=null;const w=Ea(e.data);if(this.parent[e.type])x=this.parent[e.type](e.sourceMapId,w,g);else if(this.parent.getWorkerSource){const I=e.type.split(".");x=this.parent.getWorkerSource(e.sourceMapId,I[0],w.source)[I[1]](w,g)}else g(new Error(`Could not find function ${e.type}`));!s&&x&&x.cancel&&(this.cancelCallbacks[r]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},f.AlphaImage=nl,f.CanonicalTileID=sh,f.CollisionBoxArray=Zt,f.CollisionCircleLayoutArray=class extends re{},f.Color=K,f.DEMData=yp,f.DataConstantProperty=Fe,f.DictionaryCoder=lc,f.EXTENT=Ro,f.ErrorEvent=R,f.EvaluationParameters=Vr,f.Event=U,f.Evented=B,f.FeatureIndex=Ti,f.FillBucket=Gc,f.FillExtrusionBucket=Fd,f.GeoJSONFeature=Vu,f.ImageAtlas=sp,f.ImagePosition=Gd,f.LineBucket=Tu,f.LineStripIndexArray=class extends At{},f.LngLat=so,f.LngLatBounds=Sc,f.MercatorCoordinate=su,f.ONE_EM=24,f.OverscaledTileID=va,f.PerformanceUtils=$m,f.PosArray=class extends ro{},f.Properties=Bi,f.QuadTriangleArray=class extends xe{},f.RGBAImage=Fs,f.RasterBoundsArray=class extends Xs{},f.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return 0===r.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},f.ResourceType=Ft,f.SegmentVector=gr,f.SymbolBucket=sc,f.Transitionable=P,f.TriangleIndexArray=bs,f.Uniform1f=za,f.Uniform1i=class extends Rs{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},f.Uniform2f=class extends Rs{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},f.Uniform3f=class extends Rs{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},f.Uniform4f=kh,f.UniformColor=ko,f.UniformMatrix4f=class extends Rs{constructor(r,e){super(r,e),this.current=Rh}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},f.UnwrappedTileID=_p,f.ValidationError=fe,f.ZoomHistory=Ya,f.addDynamicAttributes=th,f.asyncAll=function(r,e,s){if(!r.length)return s(null,[]);let h=r.length;const g=new Array(r.length);let x=null;r.forEach((w,I)=>{e(w,(L,ee)=>{L&&(x=L),g[I]=ee,0==--h&&s(x,g)})})},f.bezier=Oe,f.bindAll=gt,f.cacheEntryPossiblyAdded=function(r){Ii++,Ii>Dn&&(r.getActor().send("enforceCacheSizeLimit",zi),Ii=0)},f.clamp=he,f.clearTileCache=function(r){const e=caches.delete(Ct);r&&e.catch(r).then(()=>r())},f.clipLine=Ec,f.clone=function(r){var e=new gl(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},f.clone$1=bt,f.collisionCircleLayout=wf,f.config=Xt,f.create=function(){var r=new gl(16);return gl!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},f.createExpression=ue,f.createFilter=mi,f.createLayout=qr,f.createStyleLayer=function(r){return"custom"===r.type?new Ur(r):new iu[r.type](r)},f.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},f.ease=Le,f.emitValidationErrors=ma,f.enforceCacheSizeLimit=function(r){Tn(),vn&&vn.then(e=>{e.keys().then(s=>{for(let h=0;h<s.length-r;h++)e.delete(s[h])})})},f.evaluateSizeForFeature=function(r,{uSize:e,uSizeT:s},{lowerSize:h,upperSize:g}){return"source"===r.kind?h/rl:"composite"===r.kind?Fr(h/rl,g/rl,s):e},f.evaluateSizeForZoom=function(r,e){let s=0,h=0;if("constant"===r.kind)h=r.layoutSize;else if("source"!==r.kind){const{interpolationType:g,minZoom:x,maxZoom:w}=r,I=g?he(Or.interpolationFactor(g,e,x,w),0,1):0;"camera"===r.kind?h=Fr(r.minSize,r.maxSize,I):s=I}return{uSizeT:s,uSize:h}},f.evaluateVariableOffset=hp,f.evented=Ta,f.exported=yt,f.exported$1=ci,f.extend=He,f.filterObject=et,f.getAnchorAlignment=Wd,f.getAnchorJustification=ia,f.getArrayBuffer=Pi,f.getImage=Zn,f.getJSON=function(r,e){return Jn(He(r,{type:"json"}),e)},f.getOverlapMode=nh,f.getRTLTextPluginStatus=Aa,f.getReferrer=gn,f.getVideo=function(r,e){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){e(null,s)};for(let h=0;h<r.length;h++){const g=window.document.createElement("source");er(r[h])||(s.crossOrigin="Anonymous"),g.src=r[h],s.appendChild(g)}return{cancel:()=>{}}},f.identity=Bc,f.invert=function(r,e){var s=e[0],h=e[1],g=e[2],x=e[3],w=e[4],I=e[5],L=e[6],ee=e[7],oe=e[8],ae=e[9],me=e[10],Me=e[11],we=e[12],Je=e[13],Xe=e[14],Mt=e[15],Gt=s*I-h*w,Ht=s*L-g*w,Qt=s*ee-x*w,hn=h*L-g*I,ln=h*ee-x*I,Yn=g*ee-x*L,hi=oe*Je-ae*we,Nn=oe*Xe-me*we,qn=oe*Mt-Me*we,Pn=ae*Xe-me*Je,Xn=ae*Mt-Me*Je,$n=me*Mt-Me*Xe,wn=Gt*$n-Ht*Xn+Qt*Pn+hn*qn-ln*Nn+Yn*hi;return wn?(r[0]=(I*$n-L*Xn+ee*Pn)*(wn=1/wn),r[1]=(g*Xn-h*$n-x*Pn)*wn,r[2]=(Je*Yn-Xe*ln+Mt*hn)*wn,r[3]=(me*ln-ae*Yn-Me*hn)*wn,r[4]=(L*qn-w*$n-ee*Nn)*wn,r[5]=(s*$n-g*qn+x*Nn)*wn,r[6]=(Xe*Qt-we*Yn-Mt*Ht)*wn,r[7]=(oe*Yn-me*Qt+Me*Ht)*wn,r[8]=(w*Xn-I*qn+ee*hi)*wn,r[9]=(h*qn-s*Xn-x*hi)*wn,r[10]=(we*ln-Je*Qt+Mt*Gt)*wn,r[11]=(ae*Qt-oe*ln-Me*Gt)*wn,r[12]=(I*Nn-w*Pn-L*hi)*wn,r[13]=(s*Pn-h*Nn+g*hi)*wn,r[14]=(Je*Ht-we*hn-Xe*Gt)*wn,r[15]=(oe*hn-ae*Ht+me*Gt)*wn,r):null},f.isImageBitmap=st,f.isSafari=tn,f.keysDifference=function(r,e){const s=[];for(const h in r)h in e||s.push(h);return s},f.lazyLoadRTLTextPlugin=function(){Ho.isLoading()||Ho.isLoaded()||"deferred"!==Aa()||Ja()},f.makeRequest=Jn,f.mapObject=Ye,f.mercatorXfromLng=ou,f.mercatorYfromLat=Ac,f.mercatorZfromAltitude=ac,f.mul=Nh,f.multiply=wu,f.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},f.number=Fr,f.ortho=function(r,e,s,h,g,x,w){var I=1/(e-s),L=1/(h-g),ee=1/(x-w);return r[0]=-2*I,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*L,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*ee,r[11]=0,r[12]=(e+s)*I,r[13]=(g+h)*L,r[14]=(w+x)*ee,r[15]=1,r},f.parseCacheControl=ke,f.parseGlyphPBF=function(r){return new zd(r).readFields(Hd,[])},f.pbf=zd,f.performSymbolLayout=function(r,e,s,h,g,x,w){r.createArrays(),r.tilePixelRatio=Ro/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const I=r.layers[0].layout,L=r.layers[0]._unevaluatedLayout._values,ee={layoutIconSize:L["icon-size"].possiblyEvaluate(new Vr(r.zoom+1),w),layoutTextSize:L["text-size"].possiblyEvaluate(new Vr(r.zoom+1),w),textMaxSize:L["text-size"].possiblyEvaluate(new Vr(18))};if("composite"===r.textSizeData.kind){const{minZoom:we,maxZoom:Je}=r.textSizeData;ee.compositeTextSizes=[L["text-size"].possiblyEvaluate(new Vr(we),w),L["text-size"].possiblyEvaluate(new Vr(Je),w)]}if("composite"===r.iconSizeData.kind){const{minZoom:we,maxZoom:Je}=r.iconSizeData;ee.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new Vr(we),w),L["icon-size"].possiblyEvaluate(new Vr(Je),w)]}const oe=24*I.get("text-line-height"),ae="viewport"!==I.get("text-rotation-alignment")&&"point"!==I.get("symbol-placement"),me=I.get("text-keep-upright"),Me=I.get("text-size");for(const we of r.features){const Je=I.get("text-font").evaluate(we,{},w).join(","),Xe=Me.evaluate(we,{},w),Mt=ee.layoutTextSize.evaluate(we,{},w),Gt=ee.layoutIconSize.evaluate(we,{},w),Ht={horizontal:{},vertical:void 0},Qt=we.text;let hn,ln=[0,0];if(Qt){const Nn=Qt.toString(),qn=24*I.get("text-letter-spacing").evaluate(we,{},w),Pn=Zl(Nn)?qn:0,Xn=I.get("text-anchor").evaluate(we,{},w),$n=I.get("text-variable-anchor");if(!$n){const br=I.get("text-radial-offset").evaluate(we,{},w);ln=br?hp(Xn,[24*br,Qd]):I.get("text-offset").evaluate(we,{},w).map(jr=>24*jr)}let wn=ae?"center":I.get("text-justify").evaluate(we,{},w);const Mi=I.get("symbol-placement"),di="point"===Mi?24*I.get("text-max-width").evaluate(we,{},w):0,cr=()=>{r.allowVerticalPlacement&&Da(Nn)&&(Ht.vertical=Jc(Qt,e,s,g,Je,di,oe,Xn,"left",Pn,ln,f.WritingMode.vertical,!0,Mi,Mt,Xe))};if(!ae&&$n){const br="auto"===wn?$n.map(Nr=>ia(Nr)):[wn];let jr=!1;for(let Nr=0;Nr<br.length;Nr++){const Go=br[Nr];if(!Ht.horizontal[Go])if(jr)Ht.horizontal[Go]=Ht.horizontal[0];else{const Mo=Jc(Qt,e,s,g,Je,di,oe,"center",Go,Pn,ln,f.WritingMode.horizontal,!1,Mi,Mt,Xe);Mo&&(Ht.horizontal[Go]=Mo,jr=1===Mo.positionedLines.length)}}cr()}else{"auto"===wn&&(wn=ia(Xn));const br=Jc(Qt,e,s,g,Je,di,oe,Xn,wn,Pn,ln,f.WritingMode.horizontal,!1,Mi,Mt,Xe);br&&(Ht.horizontal[wn]=br),cr(),Da(Nn)&&ae&&me&&(Ht.vertical=Jc(Qt,e,s,g,Je,di,oe,Xn,wn,Pn,ln,f.WritingMode.vertical,!1,Mi,Mt,Xe))}}let Yn=!1;if(we.icon&&we.icon.name){const Nn=h[we.icon.name];Nn&&(hn=Tf(g[we.icon.name],I.get("icon-offset").evaluate(we,{},w),I.get("icon-anchor").evaluate(we,{},w)),Yn=!!Nn.sdf,void 0===r.sdfIcons?r.sdfIcons=Yn:r.sdfIcons!==Yn&&Ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Nn.pixelRatio!==r.pixelRatio||0!==I.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}const hi=eh(Ht.horizontal)||Ht.vertical;r.iconsInText=!!hi&&hi.iconsInText,(hi||hn)&&If(r,we,Ht,hn,h,ee,Mt,Gt,ln,Yn,w)}x&&r.generateCollisionDebugBuffers()},f.perspective=function(r,e,s,h,g){var x,w=1/Math.tan(e/2);return r[0]=w/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=w,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=g&&g!==1/0?(r[10]=(g+h)*(x=1/(h-g)),r[14]=2*g*h*x):(r[10]=-1,r[14]=-2*h),r},f.pick=function(r,e){const s={};for(let h=0;h<e.length;h++){const g=e[h];g in r&&(s[g]=r[g])}return s},f.plugin=Ho,f.pointGeometry=ct,f.polygonIntersectsPolygon=Ol,f.potpack=op,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=An,f.registerForPluginStateChange=function(r){return r({pluginStatus:Co,pluginURL:ga}),Ta.on("pluginStateChange",r),r},f.renderColorRamp=Vh,f.rotateX=function(r,e,s){var h=Math.sin(s),g=Math.cos(s),x=e[4],w=e[5],I=e[6],L=e[7],ee=e[8],oe=e[9],ae=e[10],me=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=x*g+ee*h,r[5]=w*g+oe*h,r[6]=I*g+ae*h,r[7]=L*g+me*h,r[8]=ee*g-x*h,r[9]=oe*g-w*h,r[10]=ae*g-I*h,r[11]=me*g-L*h,r},f.rotateZ=function(r,e,s){var h=Math.sin(s),g=Math.cos(s),x=e[0],w=e[1],I=e[2],L=e[3],ee=e[4],oe=e[5],ae=e[6],me=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=x*g+ee*h,r[1]=w*g+oe*h,r[2]=I*g+ae*h,r[3]=L*g+me*h,r[4]=ee*g-x*h,r[5]=oe*g-w*h,r[6]=ae*g-I*h,r[7]=me*g-L*h,r},f.scale=function(r,e,s){var h=s[0],g=s[1],x=s[2];return r[0]=e[0]*h,r[1]=e[1]*h,r[2]=e[2]*h,r[3]=e[3]*h,r[4]=e[4]*g,r[5]=e[5]*g,r[6]=e[6]*g,r[7]=e[7]*g,r[8]=e[8]*x,r[9]=e[9]*x,r[10]=e[10]*x,r[11]=e[11]*x,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},f.scale$1=function(r,e,s){return r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r[3]=e[3]*s,r},f.setCacheLimits=function(r,e){zi=r,Dn=e},f.setRTLTextPlugin=function(r,e,s=!1){if(Co===ql||Co===Ka||Co===Il)throw new Error("setRTLTextPlugin cannot be called multiple times.");ga=yt.resolveURL(r),Co=ql,hl=e,Sa(),s||Ja()},f.spec=ie,f.sphericalToCartesian=function([r,e,s]){return e+=90,e*=Math.PI/180,s*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(s),y:r*Math.sin(e)*Math.sin(s),z:r*Math.cos(s)}},f.toEvaluationFeature=na,f.transformMat4=tl,f.translate=function(r,e,s){var h,g,x,w,I,L,ee,oe,ae,me,Me,we,Je=s[0],Xe=s[1],Mt=s[2];return e===r?(r[12]=e[0]*Je+e[4]*Xe+e[8]*Mt+e[12],r[13]=e[1]*Je+e[5]*Xe+e[9]*Mt+e[13],r[14]=e[2]*Je+e[6]*Xe+e[10]*Mt+e[14],r[15]=e[3]*Je+e[7]*Xe+e[11]*Mt+e[15]):(g=e[1],x=e[2],w=e[3],I=e[4],L=e[5],ee=e[6],oe=e[7],ae=e[8],me=e[9],Me=e[10],we=e[11],r[0]=h=e[0],r[1]=g,r[2]=x,r[3]=w,r[4]=I,r[5]=L,r[6]=ee,r[7]=oe,r[8]=ae,r[9]=me,r[10]=Me,r[11]=we,r[12]=h*Je+I*Xe+ae*Mt+e[12],r[13]=g*Je+L*Xe+me*Mt+e[13],r[14]=x*Je+ee*Xe+Me*Mt+e[14],r[15]=w*Je+oe*Xe+we*Mt+e[15]),r},f.triggerPluginCompletionEvent=Yl,f.unicodeBlockLookup=In,f.uniqueId=function(){return Be++},f.validateCustomStyleLayer=function(r){const e=[],s=r.id;return void 0===s&&e.push({message:`layers.${s}: missing required property "id"`}),void 0===r.render&&e.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&e.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),e},f.validateLight=Js,f.validateStyle=Wr,f.vectorTile=Fl,f.warnOnce=Ut,f.wrap=ze}),l(0,function(f){function je(J){const F=typeof J;if("number"===F||"boolean"===F||"string"===F||null==J)return JSON.stringify(J);if(Array.isArray(J)){let Ee="[";for(const Re of J)Ee+=`${je(Re)},`;return`${Ee}]`}const K=Object.keys(J).sort();let ge="{";for(let Ee=0;Ee<K.length;Ee++)ge+=`${JSON.stringify(K[Ee])}:${je(J[K[Ee]])},`;return`${ge}}`}function qe(J){let F="";for(const K of f.refProperties)F+=`/${je(J[K])}`;return F}class Oe{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,K){for(const Ee of F){this._layerConfigs[Ee.id]=Ee;const Re=this._layers[Ee.id]=f.createStyleLayer(Ee);Re._featureFilter=f.createFilter(Re.filter),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of K)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const ge=function(Ee,Re){const Ke={};for(let nt=0;nt<Ee.length;nt++){const at=Re&&Re[Ee[nt].id]||qe(Ee[nt]);Re&&(Re[Ee[nt].id]=at);let Nt=Ke[at];Nt||(Nt=Ke[at]=[]),Nt.push(Ee[nt])}const $e=[];for(const nt in Ke)$e.push(Ke[nt]);return $e}(Object.values(this._layerConfigs),this.keyCache);for(const Ee of ge){const Re=Ee.map(rn=>this._layers[rn.id]),Ke=Re[0];if("none"===Ke.visibility)continue;const $e=Ke.source||"";let nt=this.familiesBySource[$e];nt||(nt=this.familiesBySource[$e]={});const at=Ke.sourceLayer||"_geojsonTileLayer";let Nt=nt[at];Nt||(Nt=nt[at]=[]),Nt.push(Re)}}}class Le{constructor(F){const K={},ge=[];for(const $e in F){const nt=F[$e],at=K[$e]={};for(const Nt in nt){const rn=nt[+Nt];if(!rn||0===rn.bitmap.width||0===rn.bitmap.height)continue;const Rt={x:0,y:0,w:rn.bitmap.width+2,h:rn.bitmap.height+2};ge.push(Rt),at[Nt]={rect:Rt,metrics:rn.metrics}}}const{w:Ee,h:Re}=f.potpack(ge),Ke=new f.AlphaImage({width:Ee||1,height:Re||1});for(const $e in F){const nt=F[$e];for(const at in nt){const Nt=nt[+at];if(!Nt||0===Nt.bitmap.width||0===Nt.bitmap.height)continue;const rn=K[$e][at].rect;f.AlphaImage.copy(Nt.bitmap,Ke,{x:0,y:0},{x:rn.x+1,y:rn.y+1},Nt.bitmap)}}this.image=Ke,this.positions=K}}f.register("GlyphAtlas",Le);class he{constructor(F){this.tileID=new f.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId}parse(F,K,ge,Ee,Re){this.status="parsing",this.data=F,this.collisionBoxArray=new f.CollisionBoxArray;const Ke=new f.DictionaryCoder(Object.keys(F.layers).sort()),$e=new f.FeatureIndex(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const nt={},at={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},Nt=K.familiesBySource[this.source];for(const xi in Nt){const Rn=F.layers[xi];if(!Rn)continue;1===Rn.version&&f.warnOnce(`Vector tile source "${this.source}" layer "${xi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pi=Ke.encode(xi),ar=[];for(let si=0;si<Rn.length;si++){const wr=Rn.feature(si),Ji=$e.getId(wr,xi);ar.push({feature:wr,id:Ji,index:si,sourceLayerIndex:pi})}for(const si of Nt[xi]){const wr=si[0];wr.minzoom&&this.zoom<Math.floor(wr.minzoom)||wr.maxzoom&&this.zoom>=wr.maxzoom||"none"!==wr.visibility&&(ze(si,this.zoom,ge),(nt[wr.id]=wr.createBucket({index:$e.bucketLayerIDs.length,layers:si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pi,sourceID:this.source})).populate(ar,at,this.tileID.canonical),$e.bucketLayerIDs.push(si.map(Ji=>Ji.id)))}}let rn,Rt,Vt,an;const Cn=f.mapObject(at.glyphDependencies,xi=>Object.keys(xi).map(Number));Object.keys(Cn).length?Ee.send("getGlyphs",{uid:this.uid,stacks:Cn},(xi,Rn)=>{rn||(rn=xi,Rt=Rn,ui.call(this))}):Rt={};const Un=Object.keys(at.iconDependencies);Un.length?Ee.send("getImages",{icons:Un,source:this.source,tileID:this.tileID,type:"icons"},(xi,Rn)=>{rn||(rn=xi,Vt=Rn,ui.call(this))}):Vt={};const Li=Object.keys(at.patternDependencies);function ui(){if(rn)return Re(rn);if(Rt&&Vt&&an){const xi=new Le(Rt),Rn=new f.ImageAtlas(Vt,an);for(const pi in nt){const ar=nt[pi];ar instanceof f.SymbolBucket?(ze(ar.layers,this.zoom,ge),f.performSymbolLayout(ar,Rt,xi.positions,Vt,Rn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ar.hasPattern&&(ar instanceof f.LineBucket||ar instanceof f.FillBucket||ar instanceof f.FillExtrusionBucket)&&(ze(ar.layers,this.zoom,ge),ar.addFeatures(at,this.tileID.canonical,Rn.patternPositions))}this.status="done",Re(null,{buckets:Object.values(nt).filter(pi=>!pi.isEmpty()),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xi.image,imageAtlas:Rn,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?Vt:null,glyphPositions:this.returnDependencies?xi.positions:null})}}Li.length?Ee.send("getImages",{icons:Li,source:this.source,tileID:this.tileID,type:"patterns"},(xi,Rn)=>{rn||(rn=xi,an=Rn,ui.call(this))}):an={},ui.call(this)}}function ze(J,F,K){const ge=new f.EvaluationParameters(F);for(const Ee of J)Ee.recalculate(ge,K)}function He(J,F){const K=f.getArrayBuffer(J.request,(ge,Ee,Re,Ke)=>{ge?F(ge):Ee&&F(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(Ee)),rawData:Ee,cacheControl:Re,expires:Ke})});return()=>{K.cancel(),F()}}class Be{constructor(F,K,ge,Ee){this.actor=F,this.layerIndex=K,this.availableImages=ge,this.loadVectorData=Ee||He,this.loading={},this.loaded={}}loadTile(F,K){const ge=F.uid;this.loading||(this.loading={});const Ee=!!(F&&F.request&&F.request.collectResourceTiming)&&new f.RequestPerformance(F.request),Re=this.loading[ge]=new he(F);Re.abort=this.loadVectorData(F,(Ke,$e)=>{if(delete this.loading[ge],Ke||!$e)return Re.status="done",this.loaded[ge]=Re,K(Ke);const nt=$e.rawData,at={};$e.expires&&(at.expires=$e.expires),$e.cacheControl&&(at.cacheControl=$e.cacheControl);const Nt={};if(Ee){const rn=Ee.finish();rn&&(Nt.resourceTiming=JSON.parse(JSON.stringify(rn)))}Re.vectorTile=$e.vectorTile,Re.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,(rn,Rt)=>{if(rn||!Rt)return K(rn);K(null,f.extend({rawTileData:nt.slice(0)},Rt,at,Nt))}),this.loaded=this.loaded||{},this.loaded[ge]=Re})}reloadTile(F,K){const ge=this.loaded,Ee=F.uid,Re=this;if(ge&&ge[Ee]){const Ke=ge[Ee];Ke.showCollisionBoxes=F.showCollisionBoxes;const $e=(nt,at)=>{const Nt=Ke.reloadCallback;Nt&&(delete Ke.reloadCallback,Ke.parse(Ke.vectorTile,Re.layerIndex,this.availableImages,Re.actor,Nt)),K(nt,at)};"parsing"===Ke.status?Ke.reloadCallback=$e:"done"===Ke.status&&(Ke.vectorTile?Ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,$e):$e())}}abortTile(F,K){const ge=this.loading,Ee=F.uid;ge&&ge[Ee]&&ge[Ee].abort&&(ge[Ee].abort(),delete ge[Ee]),K()}removeTile(F,K){const ge=this.loaded,Ee=F.uid;ge&&ge[Ee]&&delete ge[Ee],K()}}class gt{constructor(){this.loaded={}}loadTile(F,K){const{uid:ge,encoding:Ee,rawImageData:Re}=F,Ke=f.isImageBitmap(Re)?this.getImageData(Re):Re,$e=new f.DEMData(ge,Ke,Ee);this.loaded=this.loaded||{},this.loaded[ge]=$e,K(null,$e)}getImageData(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);const K=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:K.width,height:K.height},K.data)}removeTile(F){const K=this.loaded,ge=F.uid;K&&K[ge]&&delete K[ge]}}var Ye=function J(F,K){var ge,Ee=F&&F.type;if("FeatureCollection"===Ee)for(ge=0;ge<F.features.length;ge++)J(F.features[ge],K);else if("GeometryCollection"===Ee)for(ge=0;ge<F.geometries.length;ge++)J(F.geometries[ge],K);else if("Feature"===Ee)J(F.geometry,K);else if("Polygon"===Ee)et(F.coordinates,K);else if("MultiPolygon"===Ee)for(ge=0;ge<F.coordinates.length;ge++)et(F.coordinates[ge],K);return F};function et(J,F){if(0!==J.length){bt(J[0],F);for(var K=1;K<J.length;K++)bt(J[K],!F)}}function bt(J,F){for(var K=0,ge=0,Ee=0,Re=J.length,Ke=Re-1;Ee<Re;Ke=Ee++){var $e=(J[Ee][0]-J[Ke][0])*(J[Ke][1]+J[Ee][1]),nt=K+$e;ge+=Math.abs(K)>=Math.abs($e)?K-nt+$e:$e-nt+K,K=nt}K+ge>=0!=!!F&&J.reverse()}const We=f.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Ut{constructor(F){this._feature=F,this.extent=f.EXTENT,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))}loadGeometry(){if(1===this._feature.type){const F=[];for(const K of this._feature.geometry)F.push([new f.pointGeometry(K[0],K[1])]);return F}{const F=[];for(const K of this._feature.geometry){const ge=[];for(const Ee of K)ge.push(new f.pointGeometry(Ee[0],Ee[1]));F.push(ge)}return F}}toGeoJSON(F,K,ge){return We.call(this,F,K,ge)}}class jt{constructor(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=F.length,this._features=F}feature(F){return new Ut(this._features[F])}}var un={exports:{}},Dt=f.pointGeometry,ke=f.vectorTile.VectorTileFeature,ot=nn;function nn(J,F){this.options=F||{},this.features=J,this.length=J.length}function zt(J,F){this.id="number"==typeof J.id?J.id:void 0,this.type=J.type,this.rawGeometry=1===J.type?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=F||4096}nn.prototype.feature=function(J){return new zt(this.features[J],this.options.extent)},zt.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var F=0;F<J.length;F++){for(var K=J[F],ge=[],Ee=0;Ee<K.length;Ee++)ge.push(new Dt(K[Ee][0],K[Ee][1]));this.geometry.push(ge)}return this.geometry},zt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,F=1/0,K=-1/0,ge=1/0,Ee=-1/0,Re=0;Re<J.length;Re++)for(var Ke=J[Re],$e=0;$e<Ke.length;$e++){var nt=Ke[$e];F=Math.min(F,nt.x),K=Math.max(K,nt.x),ge=Math.min(ge,nt.y),Ee=Math.max(Ee,nt.y)}return[F,ge,K,Ee]},zt.prototype.toGeoJSON=ke.prototype.toGeoJSON;var tn=f.pbf,st=ot;function yt(J){var F=new tn;return function(K,ge){for(var Ee in K.layers)ge.writeMessage(3,ct,K.layers[Ee])}(J,F),F.finish()}function ct(J,F){var K;F.writeVarintField(15,J.version||1),F.writeStringField(1,J.name||""),F.writeVarintField(5,J.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<J.length;K++)ge.feature=J.feature(K),F.writeMessage(2,Tt,ge);var Ee=ge.keys;for(K=0;K<Ee.length;K++)F.writeStringField(3,Ee[K]);var Re=ge.values;for(K=0;K<Re.length;K++)F.writeMessage(4,zi,Re[K])}function Tt(J,F){var K=J.feature;void 0!==K.id&&F.writeVarintField(1,K.id),F.writeMessage(2,Xt,J),F.writeVarintField(3,K.type),F.writeMessage(4,fi,K)}function Xt(J,F){var K=J.feature,ge=J.keys,Ee=J.values,Re=J.keycache,Ke=J.valuecache;for(var $e in K.properties){var nt=K.properties[$e],at=Re[$e];if(null!==nt){void 0===at&&(ge.push($e),Re[$e]=at=ge.length-1),F.writeVarint(at);var Nt=typeof nt;"string"!==Nt&&"boolean"!==Nt&&"number"!==Nt&&(nt=JSON.stringify(nt));var rn=Nt+":"+nt,Rt=Ke[rn];void 0===Rt&&(Ee.push(nt),Ke[rn]=Rt=Ee.length-1),F.writeVarint(Rt)}}}function Ct(J,F){return(F<<3)+(7&J)}function vn(J){return J<<1^J>>31}function fi(J,F){for(var K=J.loadGeometry(),ge=J.type,Ee=0,Re=0,Ke=K.length,$e=0;$e<Ke;$e++){var nt=K[$e],at=1;1===ge&&(at=nt.length),F.writeVarint(Ct(1,at));for(var Nt=3===ge?nt.length-1:nt.length,rn=0;rn<Nt;rn++){1===rn&&1!==ge&&F.writeVarint(Ct(2,Nt-1));var Rt=nt[rn].x-Ee,Vt=nt[rn].y-Re;F.writeVarint(vn(Rt)),F.writeVarint(vn(Vt)),Ee+=Rt,Re+=Vt}3===ge&&F.writeVarint(Ct(7,1))}}function zi(J,F){var K=typeof J;"string"===K?F.writeStringField(1,J):"boolean"===K?F.writeBooleanField(7,J):"number"===K&&(J%1!=0?F.writeDoubleField(3,J):J<0?F.writeSVarintField(6,J):F.writeVarintField(5,J))}un.exports=yt,un.exports.fromVectorTileJs=yt,un.exports.fromGeojsonVt=function(J,F){F=F||{};var K={};for(var ge in J)K[ge]=new st(J[ge].features,F),K[ge].name=ge,K[ge].version=F.version,K[ge].extent=F.extent;return yt({layers:K})},un.exports.GeoJSONWrapper=st;var Dn=un.exports;function Tn(J,F,K,ge,Ee,Re){if(Ee-ge<=K)return;const Ke=ge+Ee>>1;Ii(J,F,Ke,ge,Ee,Re%2),Tn(J,F,K,ge,Ke-1,Re+1),Tn(J,F,K,Ke+1,Ee,Re+1)}function Ii(J,F,K,ge,Ee,Re){for(;Ee>ge;){if(Ee-ge>600){const at=Ee-ge+1,Nt=K-ge+1,rn=Math.log(at),Rt=.5*Math.exp(2*rn/3),Vt=.5*Math.sqrt(rn*Rt*(at-Rt)/at)*(Nt-at/2<0?-1:1);Ii(J,F,K,Math.max(ge,Math.floor(K-Nt*Rt/at+Vt)),Math.min(Ee,Math.floor(K+(at-Nt)*Rt/at+Vt)),Re)}const Ke=F[2*K+Re];let $e=ge,nt=Ee;for(ci(J,F,ge,K),F[2*Ee+Re]>Ke&&ci(J,F,ge,Ee);$e<nt;){for(ci(J,F,$e,nt),$e++,nt--;F[2*$e+Re]<Ke;)$e++;for(;F[2*nt+Re]>Ke;)nt--}F[2*ge+Re]===Ke?ci(J,F,ge,nt):(nt++,ci(J,F,nt,Ee)),nt<=K&&(ge=nt+1),K<=nt&&(Ee=nt-1)}}function ci(J,F,K,ge){ir(J,K,ge),ir(F,2*K,2*ge),ir(F,2*K+1,2*ge+1)}function ir(J,F,K){const ge=J[F];J[F]=J[K],J[K]=ge}function _i(J,F,K,ge){const Ee=J-K,Re=F-ge;return Ee*Ee+Re*Re}const kn=J=>J[0],ii=J=>J[1];class ft{constructor(F,K=kn,ge=ii,Ee=64,Re=Float64Array){this.nodeSize=Ee,this.points=F;const Ke=F.length<65536?Uint16Array:Uint32Array,$e=this.ids=new Ke(F.length),nt=this.coords=new Re(2*F.length);for(let at=0;at<F.length;at++)$e[at]=at,nt[2*at]=K(F[at]),nt[2*at+1]=ge(F[at]);Tn($e,nt,Ee,0,$e.length-1,0)}range(F,K,ge,Ee){return function(Re,Ke,$e,nt,at,Nt,rn){const Rt=[0,Re.length-1,0],Vt=[];let an,Cn;for(;Rt.length;){const Un=Rt.pop(),Li=Rt.pop(),ui=Rt.pop();if(Li-ui<=rn){for(let pi=ui;pi<=Li;pi++)an=Ke[2*pi],Cn=Ke[2*pi+1],an>=$e&&an<=at&&Cn>=nt&&Cn<=Nt&&Vt.push(Re[pi]);continue}const xi=Math.floor((ui+Li)/2);an=Ke[2*xi],Cn=Ke[2*xi+1],an>=$e&&an<=at&&Cn>=nt&&Cn<=Nt&&Vt.push(Re[xi]);const Rn=(Un+1)%2;(0===Un?$e<=an:nt<=Cn)&&(Rt.push(ui),Rt.push(xi-1),Rt.push(Rn)),(0===Un?at>=an:Nt>=Cn)&&(Rt.push(xi+1),Rt.push(Li),Rt.push(Rn))}return Vt}(this.ids,this.coords,F,K,ge,Ee,this.nodeSize)}within(F,K,ge){return function(Ee,Re,Ke,$e,nt,at){const Nt=[0,Ee.length-1,0],rn=[],Rt=nt*nt;for(;Nt.length;){const Vt=Nt.pop(),an=Nt.pop(),Cn=Nt.pop();if(an-Cn<=at){for(let Rn=Cn;Rn<=an;Rn++)_i(Re[2*Rn],Re[2*Rn+1],Ke,$e)<=Rt&&rn.push(Ee[Rn]);continue}const Un=Math.floor((Cn+an)/2),Li=Re[2*Un],ui=Re[2*Un+1];_i(Li,ui,Ke,$e)<=Rt&&rn.push(Ee[Un]);const xi=(Vt+1)%2;(0===Vt?Ke-nt<=Li:$e-nt<=ui)&&(Nt.push(Cn),Nt.push(Un-1),Nt.push(xi)),(0===Vt?Ke+nt>=Li:$e+nt>=ui)&&(Nt.push(Un+1),Nt.push(an),Nt.push(xi))}return rn}(this.ids,this.coords,F,K,ge,this.nodeSize)}}const Ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},on=Math.fround||(gn=new Float32Array(1),J=>(gn[0]=+J,gn[0]));var gn;class zn{constructor(F){this.options=ht(Object.create(Ft),F),this.trees=new Array(this.options.maxZoom+1)}load(F){const{log:K,minZoom:ge,maxZoom:Ee,nodeSize:Re}=this.options;K&&console.time("total time");const Ke=`prepare ${F.length} points`;K&&console.time(Ke),this.points=F;let $e=[];for(let nt=0;nt<F.length;nt++)F[nt].geometry&&$e.push(Pi(F[nt],nt));this.trees[Ee+1]=new ft($e,$,U,Re,Float32Array),K&&console.timeEnd(Ke);for(let nt=Ee;nt>=ge;nt--){const at=+Date.now();$e=this._cluster($e,nt),this.trees[nt]=new ft($e,$,U,Re,Float32Array),K&&console.log("z%d: %d clusters in %dms",nt,$e.length,+Date.now()-at)}return K&&console.timeEnd("total time"),this}getClusters(F,K){let ge=((F[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,F[1]));let Re=180===F[2]?180:((F[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)ge=-180,Re=180;else if(ge>Re){const Nt=this.getClusters([ge,Ee,180,Ke],K),rn=this.getClusters([-180,Ee,Re,Ke],K);return Nt.concat(rn)}const $e=this.trees[this._limitZoom(K)],nt=$e.range(Kn(ge),ri(Ke),Kn(Re),ri(Ee)),at=[];for(const Nt of nt){const rn=$e.points[Nt];at.push(rn.numPoints?er(rn):this.points[rn.index])}return at}getChildren(F){const K=this._getOriginId(F),ge=this._getOriginZoom(F),Ee="No cluster with the specified id.",Re=this.trees[ge];if(!Re)throw new Error(Ee);const Ke=Re.points[K];if(!Ke)throw new Error(Ee);const $e=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),nt=Re.within(Ke.x,Ke.y,$e),at=[];for(const Nt of nt){const rn=Re.points[Nt];rn.parentId===F&&at.push(rn.numPoints?er(rn):this.points[rn.index])}if(0===at.length)throw new Error(Ee);return at}getLeaves(F,K,ge){const Ee=[];return this._appendLeaves(Ee,F,K=K||10,ge=ge||0,0),Ee}getTile(F,K,ge){const Ee=this.trees[this._limitZoom(F)],Re=Math.pow(2,F),{extent:Ke,radius:$e}=this.options,nt=$e/Ke,at=(ge-nt)/Re,Nt=(ge+1+nt)/Re,rn={features:[]};return this._addTileFeatures(Ee.range((K-nt)/Re,at,(K+1+nt)/Re,Nt),Ee.points,K,ge,Re,rn),0===K&&this._addTileFeatures(Ee.range(1-nt/Re,at,1,Nt),Ee.points,Re,ge,Re,rn),K===Re-1&&this._addTileFeatures(Ee.range(0,at,nt/Re,Nt),Ee.points,-1,ge,Re,rn),rn.features.length?rn:null}getClusterExpansionZoom(F){let K=this._getOriginZoom(F)-1;for(;K<=this.options.maxZoom;){const ge=this.getChildren(F);if(K++,1!==ge.length)break;F=ge[0].properties.cluster_id}return K}_appendLeaves(F,K,ge,Ee,Re){const Ke=this.getChildren(K);for(const $e of Ke){const nt=$e.properties;if(nt&&nt.cluster?Re+nt.point_count<=Ee?Re+=nt.point_count:Re=this._appendLeaves(F,nt.cluster_id,ge,Ee,Re):Re<Ee?Re++:F.push($e),F.length===ge)break}return Re}_addTileFeatures(F,K,ge,Ee,Re,Ke){for(const $e of F){const nt=K[$e],at=nt.numPoints;let Nt,rn,Rt;if(at)Nt=sr(nt),rn=nt.x,Rt=nt.y;else{const Cn=this.points[nt.index];Nt=Cn.properties,rn=Kn(Cn.geometry.coordinates[0]),Rt=ri(Cn.geometry.coordinates[1])}const Vt={type:1,geometry:[[Math.round(this.options.extent*(rn*Re-ge)),Math.round(this.options.extent*(Rt*Re-Ee))]],tags:Nt};let an;at?an=nt.id:this.options.generateId?an=nt.index:this.points[nt.index].id&&(an=this.points[nt.index].id),void 0!==an&&(Vt.id=an),Ke.features.push(Vt)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(+F,this.options.maxZoom+1))}_cluster(F,K){const ge=[],{radius:Ee,extent:Re,reduce:Ke,minPoints:$e}=this.options,nt=Ee/(Re*Math.pow(2,K));for(let at=0;at<F.length;at++){const Nt=F[at];if(Nt.zoom<=K)continue;Nt.zoom=K;const rn=this.trees[K+1],Rt=rn.within(Nt.x,Nt.y,nt),Vt=Nt.numPoints||1;let an=Vt;for(const Cn of Rt){const Un=rn.points[Cn];Un.zoom>K&&(an+=Un.numPoints||1)}if(an>Vt&&an>=$e){let Cn=Nt.x*Vt,Un=Nt.y*Vt,Li=Ke&&Vt>1?this._map(Nt,!0):null;const ui=(at<<5)+(K+1)+this.points.length;for(const xi of Rt){const Rn=rn.points[xi];if(Rn.zoom<=K)continue;Rn.zoom=K;const pi=Rn.numPoints||1;Cn+=Rn.x*pi,Un+=Rn.y*pi,Rn.parentId=ui,Ke&&(Li||(Li=this._map(Nt,!0)),Ke(Li,this._map(Rn)))}Nt.parentId=ui,ge.push(Jn(Cn/an,Un/an,ui,an,Li))}else if(ge.push(Nt),an>1)for(const Cn of Rt){const Un=rn.points[Cn];Un.zoom<=K||(Un.zoom=K,ge.push(Un))}}return ge}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,K){if(F.numPoints)return K?ht({},F.properties):F.properties;const ge=this.points[F.index].properties,Ee=this.options.map(ge);return K&&Ee===ge?ht({},Ee):Ee}}function Jn(J,F,K,ge,Ee){return{x:on(J),y:on(F),zoom:1/0,id:K,parentId:-1,numPoints:ge,properties:Ee}}function Pi(J,F){const[K,ge]=J.geometry.coordinates;return{x:on(Kn(K)),y:on(ri(ge)),zoom:1/0,index:F,parentId:-1}}function er(J){return{type:"Feature",id:J.id,properties:sr(J),geometry:{type:"Point",coordinates:[(F=J.x,360*(F-.5)),Zn(J.y)]}};var F}function sr(J){const F=J.numPoints,K=F>=1e4?`${Math.round(F/1e3)}k`:F>=1e3?Math.round(F/100)/10+"k":F;return ht(ht({},J.properties),{cluster:!0,cluster_id:J.id,point_count:F,point_count_abbreviated:K})}function Kn(J){return J/360+.5}function ri(J){const F=Math.sin(J*Math.PI/180),K=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return K<0?0:K>1?1:K}function Zn(J){const F=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function ht(J,F){for(const K in F)J[K]=F[K];return J}function $(J){return J.x}function U(J){return J.y}function R(J,F,K,ge){for(var Ee,Re=ge,Ke=K-F>>1,$e=K-F,nt=J[F],at=J[F+1],Nt=J[K],rn=J[K+1],Rt=F+3;Rt<K;Rt+=3){var Vt=B(J[Rt],J[Rt+1],nt,at,Nt,rn);if(Vt>Re)Ee=Rt,Re=Vt;else if(Vt===Re){var an=Math.abs(Rt-Ke);an<$e&&(Ee=Rt,$e=an)}}Re>ge&&(Ee-F>3&&R(J,F,Ee,ge),J[Ee+2]=Re,K-Ee>3&&R(J,Ee,K,ge))}function B(J,F,K,ge,Ee,Re){var Ke=Ee-K,$e=Re-ge;if(0!==Ke||0!==$e){var nt=((J-K)*Ke+(F-ge)*$e)/(Ke*Ke+$e*$e);nt>1?(K=Ee,ge=Re):nt>0&&(K+=Ke*nt,ge+=$e*nt)}return(Ke=J-K)*Ke+($e=F-ge)*$e}function ie(J,F,K,ge){var Ee={id:void 0===J?null:J,type:F,geometry:K,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var Ke=Re.geometry,$e=Re.type;if("Point"===$e||"MultiPoint"===$e||"LineString"===$e)fe(Re,Ke);else if("Polygon"===$e||"MultiLineString"===$e)for(var nt=0;nt<Ke.length;nt++)fe(Re,Ke[nt]);else if("MultiPolygon"===$e)for(nt=0;nt<Ke.length;nt++)for(var at=0;at<Ke[nt].length;at++)fe(Re,Ke[nt][at])}(Ee),Ee}function fe(J,F){for(var K=0;K<F.length;K+=3)J.minX=Math.min(J.minX,F[K]),J.minY=Math.min(J.minY,F[K+1]),J.maxX=Math.max(J.maxX,F[K]),J.maxY=Math.max(J.maxY,F[K+1])}function tt(J,F,K,ge){if(F.geometry){var Ee=F.geometry.coordinates,Re=F.geometry.type,Ke=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),$e=[],nt=F.id;if(K.promoteId?nt=F.properties[K.promoteId]:K.generateId&&(nt=ge||0),"Point"===Re)It(Ee,$e);else if("MultiPoint"===Re)for(var at=0;at<Ee.length;at++)It(Ee[at],$e);else if("LineString"===Re)_t(Ee,$e,Ke,!1);else if("MultiLineString"===Re){if(K.lineMetrics){for(at=0;at<Ee.length;at++)_t(Ee[at],$e=[],Ke,!1),J.push(ie(nt,"LineString",$e,F.properties));return}mn(Ee,$e,Ke,!1)}else if("Polygon"===Re)mn(Ee,$e,Ke,!0);else{if("MultiPolygon"!==Re){if("GeometryCollection"===Re){for(at=0;at<F.geometry.geometries.length;at++)tt(J,{id:nt,geometry:F.geometry.geometries[at],properties:F.properties},K,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(at=0;at<Ee.length;at++){var Nt=[];mn(Ee[at],Nt,Ke,!0),$e.push(Nt)}}J.push(ie(nt,Re,$e,F.properties))}}function It(J,F){F.push(_n(J[0])),F.push(Vn(J[1])),F.push(0)}function _t(J,F,K,ge){for(var Ee,Re,Ke=0,$e=0;$e<J.length;$e++){var nt=_n(J[$e][0]),at=Vn(J[$e][1]);F.push(nt),F.push(at),F.push(0),$e>0&&(Ke+=ge?(Ee*at-nt*Re)/2:Math.sqrt(Math.pow(nt-Ee,2)+Math.pow(at-Re,2))),Ee=nt,Re=at}var Nt=F.length-3;F[2]=1,R(F,0,Nt,K),F[Nt+2]=1,F.size=Math.abs(Ke),F.start=0,F.end=F.size}function mn(J,F,K,ge){for(var Ee=0;Ee<J.length;Ee++){var Re=[];_t(J[Ee],Re,K,ge),F.push(Re)}}function _n(J){return J/360+.5}function Vn(J){var F=Math.sin(J*Math.PI/180),K=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return K<0?0:K>1?1:K}function yi(J,F,K,ge,Ee,Re,Ke,$e){if(ge/=F,Re>=(K/=F)&&Ke<ge)return J;if(Ke<K||Re>=ge)return null;for(var nt=[],at=0;at<J.length;at++){var Nt=J[at],rn=Nt.geometry,Rt=Nt.type,Vt=0===Ee?Nt.minX:Nt.minY,an=0===Ee?Nt.maxX:Nt.maxY;if(Vt>=K&&an<ge)nt.push(Nt);else if(!(an<K||Vt>=ge)){var Cn=[];if("Point"===Rt||"MultiPoint"===Rt)en(rn,Cn,K,ge,Ee);else if("LineString"===Rt)pn(rn,Cn,K,ge,Ee,!1,$e.lineMetrics);else if("MultiLineString"===Rt)Ai(rn,Cn,K,ge,Ee,!1);else if("Polygon"===Rt)Ai(rn,Cn,K,ge,Ee,!0);else if("MultiPolygon"===Rt)for(var Un=0;Un<rn.length;Un++){var Li=[];Ai(rn[Un],Li,K,ge,Ee,!0),Li.length&&Cn.push(Li)}if(Cn.length){if($e.lineMetrics&&"LineString"===Rt){for(Un=0;Un<Cn.length;Un++)nt.push(ie(Nt.id,Rt,Cn[Un],Nt.tags));continue}"LineString"!==Rt&&"MultiLineString"!==Rt||(1===Cn.length?(Rt="LineString",Cn=Cn[0]):Rt="MultiLineString"),"Point"!==Rt&&"MultiPoint"!==Rt||(Rt=3===Cn.length?"Point":"MultiPoint"),nt.push(ie(Nt.id,Rt,Cn,Nt.tags))}}}return nt.length?nt:null}function en(J,F,K,ge,Ee){for(var Re=0;Re<J.length;Re+=3){var Ke=J[Re+Ee];Ke>=K&&Ke<=ge&&(F.push(J[Re]),F.push(J[Re+1]),F.push(J[Re+2]))}}function pn(J,F,K,ge,Ee,Re,Ke){for(var $e,nt,at=qt(J),Nt=0===Ee?Ln:Bt,rn=J.start,Rt=0;Rt<J.length-3;Rt+=3){var Vt=J[Rt],an=J[Rt+1],Cn=J[Rt+2],Un=J[Rt+3],Li=J[Rt+4],ui=0===Ee?Vt:an,xi=0===Ee?Un:Li,Rn=!1;Ke&&($e=Math.sqrt(Math.pow(Vt-Un,2)+Math.pow(an-Li,2))),ui<K?xi>K&&(nt=Nt(at,Vt,an,Un,Li,K),Ke&&(at.start=rn+$e*nt)):ui>ge?xi<ge&&(nt=Nt(at,Vt,an,Un,Li,ge),Ke&&(at.start=rn+$e*nt)):Qn(at,Vt,an,Cn),xi<K&&ui>=K&&(nt=Nt(at,Vt,an,Un,Li,K),Rn=!0),xi>ge&&ui<=ge&&(nt=Nt(at,Vt,an,Un,Li,ge),Rn=!0),!Re&&Rn&&(Ke&&(at.end=rn+$e*nt),F.push(at),at=qt(J)),Ke&&(rn+=$e)}var pi=J.length-3;Vt=J[pi],an=J[pi+1],Cn=J[pi+2],(ui=0===Ee?Vt:an)>=K&&ui<=ge&&Qn(at,Vt,an,Cn),pi=at.length-3,Re&&pi>=3&&(at[pi]!==at[0]||at[pi+1]!==at[1])&&Qn(at,at[0],at[1],at[2]),at.length&&F.push(at)}function qt(J){var F=[];return F.size=J.size,F.start=J.start,F.end=J.end,F}function Ai(J,F,K,ge,Ee,Re){for(var Ke=0;Ke<J.length;Ke++)pn(J[Ke],F,K,ge,Ee,Re,!1)}function Qn(J,F,K,ge){J.push(F),J.push(K),J.push(ge)}function Ln(J,F,K,ge,Ee,Re){var Ke=(Re-F)/(ge-F);return J.push(Re),J.push(K+(Ee-K)*Ke),J.push(1),Ke}function Bt(J,F,K,ge,Ee,Re){var Ke=(Re-K)/(Ee-K);return J.push(F+(ge-F)*Ke),J.push(Re),J.push(1),Ke}function pt(J,F){for(var K=[],ge=0;ge<J.length;ge++){var Ee,Re=J[ge],Ke=Re.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)Ee=Ce(Re.geometry,F);else if("MultiLineString"===Ke||"Polygon"===Ke){Ee=[];for(var $e=0;$e<Re.geometry.length;$e++)Ee.push(Ce(Re.geometry[$e],F))}else if("MultiPolygon"===Ke)for(Ee=[],$e=0;$e<Re.geometry.length;$e++){for(var nt=[],at=0;at<Re.geometry[$e].length;at++)nt.push(Ce(Re.geometry[$e][at],F));Ee.push(nt)}K.push(ie(Re.id,Ke,Ee,Re.tags))}return K}function Ce(J,F){var K=[];K.size=J.size,void 0!==J.start&&(K.start=J.start,K.end=J.end);for(var ge=0;ge<J.length;ge+=3)K.push(J[ge]+F,J[ge+1],J[ge+2]);return K}function Ae(J,F){if(J.transformed)return J;var K,ge,Ee,Re=1<<J.z,Ke=J.x,$e=J.y;for(K=0;K<J.features.length;K++){var nt=J.features[K],at=nt.geometry,Nt=nt.type;if(nt.geometry=[],1===Nt)for(ge=0;ge<at.length;ge+=2)nt.geometry.push(ye(at[ge],at[ge+1],F,Re,Ke,$e));else for(ge=0;ge<at.length;ge++){var rn=[];for(Ee=0;Ee<at[ge].length;Ee+=2)rn.push(ye(at[ge][Ee],at[ge][Ee+1],F,Re,Ke,$e));nt.geometry.push(rn)}}return J.transformed=!0,J}function ye(J,F,K,ge,Ee,Re){return[Math.round(K*(J*ge-Ee)),Math.round(K*(F*ge-Re))]}function lt(J,F,K,ge,Ee){for(var Re=F===Ee.maxZoom?0:Ee.tolerance/((1<<F)*Ee.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:ge,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<J.length;$e++){Ke.numFeatures++,Pt(Ke,J[$e],Re,Ee);var nt=J[$e].minX,at=J[$e].minY,Nt=J[$e].maxX,rn=J[$e].maxY;nt<Ke.minX&&(Ke.minX=nt),at<Ke.minY&&(Ke.minY=at),Nt>Ke.maxX&&(Ke.maxX=Nt),rn>Ke.maxY&&(Ke.maxY=rn)}return Ke}function Pt(J,F,K,ge){var Ee=F.geometry,Re=F.type,Ke=[];if("Point"===Re||"MultiPoint"===Re)for(var $e=0;$e<Ee.length;$e+=3)Ke.push(Ee[$e]),Ke.push(Ee[$e+1]),J.numPoints++,J.numSimplified++;else if("LineString"===Re)fn(Ke,Ee,J,K,!1,!1);else if("MultiLineString"===Re||"Polygon"===Re)for($e=0;$e<Ee.length;$e++)fn(Ke,Ee[$e],J,K,"Polygon"===Re,0===$e);else if("MultiPolygon"===Re)for(var nt=0;nt<Ee.length;nt++){var at=Ee[nt];for($e=0;$e<at.length;$e++)fn(Ke,at[$e],J,K,!0,0===$e)}if(Ke.length){var Nt=F.tags||null;if("LineString"===Re&&ge.lineMetrics){for(var rn in Nt={},F.tags)Nt[rn]=F.tags[rn];Nt.mapbox_clip_start=Ee.start/Ee.size,Nt.mapbox_clip_end=Ee.end/Ee.size}var Rt={geometry:Ke,type:"Polygon"===Re||"MultiPolygon"===Re?3:"LineString"===Re||"MultiLineString"===Re?2:1,tags:Nt};null!==F.id&&(Rt.id=F.id),J.features.push(Rt)}}function fn(J,F,K,ge,Ee,Re){var Ke=ge*ge;if(ge>0&&F.size<(Ee?Ke:ge))K.numPoints+=F.length/3;else{for(var $e=[],nt=0;nt<F.length;nt+=3)(0===ge||F[nt+2]>Ke)&&(K.numSimplified++,$e.push(F[nt]),$e.push(F[nt+1])),K.numPoints++;Ee&&function(at,Nt){for(var rn=0,Rt=0,Vt=at.length,an=Vt-2;Rt<Vt;an=Rt,Rt+=2)rn+=(at[Rt]-at[an])*(at[Rt+1]+at[an+1]);if(rn>0===Nt)for(Rt=0,Vt=at.length;Rt<Vt/2;Rt+=2){var Cn=at[Rt],Un=at[Rt+1];at[Rt]=at[Vt-2-Rt],at[Rt+1]=at[Vt-1-Rt],at[Vt-2-Rt]=Cn,at[Vt-1-Rt]=Un}}($e,Re),J.push($e)}}function bi(J,F){var K=(F=this.options=function(Ee,Re){for(var Ke in Re)Ee[Ke]=Re[Ke];return Ee}(Object.create(this.options),F)).debug;if(K&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee,Re,Ke,$e,nt,at,ge=function(Ee,Re){var Ke=[];if("FeatureCollection"===Ee.type)for(var $e=0;$e<Ee.features.length;$e++)tt(Ke,Ee.features[$e],Re,$e);else tt(Ke,"Feature"===Ee.type?Ee:{geometry:Ee},Re);return Ke}(J,F);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=Ee=ge,nt=yi(Ee,1,-1-(Ke=(Re=F).buffer/Re.extent),Ke,0,-1,2,Re),at=yi(Ee,1,1-Ke,2+Ke,0,-1,2,Re),(nt||at)&&($e=yi(Ee,1,-Ke,1+Ke,0,-1,2,Re)||[],nt&&($e=pt(nt,1).concat($e)),at&&($e=$e.concat(pt(at,-1)))),(ge=$e).length&&this.splitTile(ge,0,0,0),K&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ui(J,F,K){return 32*((1<<J)*K+F)+J}function tr(J,F){const K=J.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);const ge=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ge)return F(null,null);const Ee=new jt(ge.features);let Re=Dn(Ee);0===Re.byteOffset&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),F(null,{vectorTile:Ee,rawData:Re.buffer})}bi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bi.prototype.splitTile=function(J,F,K,ge,Ee,Re,Ke){for(var $e=[J,F,K,ge],nt=this.options,at=nt.debug;$e.length;){ge=$e.pop(),K=$e.pop(),F=$e.pop(),J=$e.pop();var Nt=1<<F,rn=Ui(F,K,ge),Rt=this.tiles[rn];if(!Rt&&(at>1&&console.time("creation"),Rt=this.tiles[rn]=lt(J,F,K,ge,nt),this.tileCoords.push({z:F,x:K,y:ge}),at)){at>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,K,ge,Rt.numFeatures,Rt.numPoints,Rt.numSimplified),console.timeEnd("creation"));var Vt="z"+F;this.stats[Vt]=(this.stats[Vt]||0)+1,this.total++}if(Rt.source=J,Ee){if(F===nt.maxZoom||F===Ee)continue;var an=1<<Ee-F;if(K!==Math.floor(Re/an)||ge!==Math.floor(Ke/an))continue}else if(F===nt.indexMaxZoom||Rt.numPoints<=nt.indexMaxPoints)continue;if(Rt.source=null,0!==J.length){at>1&&console.time("clipping");var Cn,Un,Li,ui,xi,Rn,pi=.5*nt.buffer/nt.extent,ar=.5-pi,si=.5+pi,wr=1+pi;Cn=Un=Li=ui=null,xi=yi(J,Nt,K-pi,K+si,0,Rt.minX,Rt.maxX,nt),Rn=yi(J,Nt,K+ar,K+wr,0,Rt.minX,Rt.maxX,nt),J=null,xi&&(Cn=yi(xi,Nt,ge-pi,ge+si,1,Rt.minY,Rt.maxY,nt),Un=yi(xi,Nt,ge+ar,ge+wr,1,Rt.minY,Rt.maxY,nt),xi=null),Rn&&(Li=yi(Rn,Nt,ge-pi,ge+si,1,Rt.minY,Rt.maxY,nt),ui=yi(Rn,Nt,ge+ar,ge+wr,1,Rt.minY,Rt.maxY,nt),Rn=null),at>1&&console.timeEnd("clipping"),$e.push(Cn||[],F+1,2*K,2*ge),$e.push(Un||[],F+1,2*K,2*ge+1),$e.push(Li||[],F+1,2*K+1,2*ge),$e.push(ui||[],F+1,2*K+1,2*ge+1)}}},bi.prototype.getTile=function(J,F,K){var ge=this.options,Ee=ge.extent,Re=ge.debug;if(J<0||J>24)return null;var Ke=1<<J,$e=Ui(J,F=(F%Ke+Ke)%Ke,K);if(this.tiles[$e])return Ae(this.tiles[$e],Ee);Re>1&&console.log("drilling down to z%d-%d-%d",J,F,K);for(var nt,at=J,Nt=F,rn=K;!nt&&at>0;)at--,Nt=Math.floor(Nt/2),rn=Math.floor(rn/2),nt=this.tiles[Ui(at,Nt,rn)];return nt&&nt.source?(Re>1&&console.log("found parent tile z%d-%d-%d",at,Nt,rn),Re>1&&console.time("drilling down"),this.splitTile(nt.source,at,Nt,rn,J,F,K),Re>1&&console.timeEnd("drilling down"),this.tiles[$e]?Ae(this.tiles[$e],Ee):null):null};class St extends Be{constructor(F,K,ge,Ee){super(F,K,ge,tr),Ee&&(this.loadGeoJSON=Ee)}loadData(F,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=K,this._pendingLoadDataParams=F,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const F=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ge=!!(K&&K.request&&K.request.collectResourceTiming)&&new f.RequestPerformance(K.request);this.loadGeoJSON(K,(Ee,Re)=>{if(Ee||!Re)return F(Ee);if("object"!=typeof Re)return F(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{Ye(Re,!0);try{if(K.filter){const $e=f.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===$e.result)throw new Error($e.value.map(at=>`${at.key}: ${at.message}`).join(", "));const nt=Re.features.filter(at=>$e.value.evaluate({zoom:0},at));Re={type:"FeatureCollection",features:nt}}this._geoJSONIndex=K.cluster?new zn(function({superclusterOptions:$e,clusterProperties:nt}){if(!nt||!$e)return $e;const at={},Nt={},rn={accumulated:null,zoom:0},Rt={properties:null},Vt=Object.keys(nt);for(const an of Vt){const[Cn,Un]=nt[an],Li=f.createExpression(Un),ui=f.createExpression("string"==typeof Cn?[Cn,["accumulated"],["get",an]]:Cn);at[an]=Li.value,Nt[an]=ui.value}return $e.map=an=>{Rt.properties=an;const Cn={};for(const Un of Vt)Cn[Un]=at[Un].evaluate(rn,Rt);return Cn},$e.reduce=(an,Cn)=>{Rt.properties=Cn;for(const Un of Vt)rn.accumulated=an[Un],an[Un]=Nt[Un].evaluate(rn,Rt)},$e}(K)).load(Re.features):new bi($e=Re,K.geojsonVtOptions)}catch($e){return F($e)}this.loaded={};const Ke={};if(ge){const $e=ge.finish();$e&&(Ke.resourceTiming={},Ke.resourceTiming[K.source]=JSON.parse(JSON.stringify($e)))}F(null,Ke)}var $e})}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(F,K){const ge=this.loaded;return ge&&ge[F.uid]?super.reloadTile(F,K):this.loadTile(F,K)}loadGeoJSON(F,K){if(F.request)f.getJSON(F.request,K);else{if("string"!=typeof F.data)return K(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`));try{return K(null,JSON.parse(F.data))}catch(ge){return K(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`))}}}removeSource(F,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),K()}getClusterExpansionZoom(F,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(F.clusterId))}catch(ge){K(ge)}}getClusterChildren(F,K){try{K(null,this._geoJSONIndex.getChildren(F.clusterId))}catch(ge){K(ge)}}getClusterLeaves(F,K){try{K(null,this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset))}catch(ge){K(ge)}}}class it{constructor(F){this.self=F,this.actor=new f.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Be,geojson:St},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(K,ge)=>{if(this.workerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.workerSourceTypes[K]=ge},this.self.registerRTLTextPlugin=K=>{if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=K.applyArabicShaping,f.plugin.processBidirectionalText=K.processBidirectionalText,f.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}}setReferrer(F,K){this.referrer=K}setImages(F,K,ge){this.availableImages[F]=K;for(const Ee in this.workerSources[F]){const Re=this.workerSources[F][Ee];for(const Ke in Re)Re[Ke].availableImages=K}ge()}setLayers(F,K,ge){this.getLayerIndex(F).replace(K),ge()}updateLayers(F,K,ge){this.getLayerIndex(F).update(K.layers,K.removedIds),ge()}loadTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).loadTile(K,ge)}loadDEMTile(F,K,ge){this.getDEMWorkerSource(F,K.source).loadTile(K,ge)}reloadTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).reloadTile(K,ge)}abortTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).abortTile(K,ge)}removeTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).removeTile(K,ge)}removeDEMTile(F,K){this.getDEMWorkerSource(F,K.source).removeTile(K)}removeSource(F,K,ge){if(!this.workerSources[F]||!this.workerSources[F][K.type]||!this.workerSources[F][K.type][K.source])return;const Ee=this.workerSources[F][K.type][K.source];delete this.workerSources[F][K.type][K.source],void 0!==Ee.removeSource?Ee.removeSource(K,ge):ge()}loadWorkerSource(F,K,ge){try{this.self.importScripts(K.url),ge()}catch(Ee){ge(Ee.toString())}}syncRTLPluginState(F,K,ge){try{f.plugin.setState(K);const Ee=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&null!=Ee){this.self.importScripts(Ee);const Re=f.plugin.isParsed();ge(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ee}`),Re)}}catch(Ee){ge(Ee.toString())}}getAvailableImages(F){let K=this.availableImages[F];return K||(K=[]),K}getLayerIndex(F){let K=this.layerIndexes[F];return K||(K=this.layerIndexes[F]=new Oe),K}getWorkerSource(F,K,ge){return this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][K]||(this.workerSources[F][K]={}),this.workerSources[F][K][ge]||(this.workerSources[F][K][ge]=new this.workerSourceTypes[K]({send:(Re,Ke,$e)=>{this.actor.send(Re,Ke,$e,F)}},this.getLayerIndex(F),this.getAvailableImages(F))),this.workerSources[F][K][ge]}getDEMWorkerSource(F,K){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][K]||(this.demWorkerSources[F][K]=new gt),this.demWorkerSources[F][K]}enforceCacheSizeLimit(F,K){f.enforceCacheSizeLimit(K)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new it(self)),it}),l(0,function(f){var je=qe;function qe(_){return i=_,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,E=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(E);try{v=new Worker(O),m=!0}catch(j){m=!1}return v&&v.terminate(),URL.revokeObjectURL(O),m}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var E=v.getImageData(0,0,1,1);return E&&E.width===m.width}()||(void 0===Oe[c=i&&i.failIfMajorPerformanceCaveat]&&(Oe[c]=function(m){var v,O,j,Y,E=(O=m,j=document.createElement("canvas"),(Y=Object.create(qe.webGLContextAttributes)).failIfMajorPerformanceCaveat=O,j.getContext("webgl",Y)||j.getContext("experimental-webgl",Y));if(!E)return!1;try{v=E.createShader(E.VERTEX_SHADER)}catch(O){return!1}return!(!v||E.isContextLost())&&(E.shaderSource(v,"void main() {}"),E.compileShader(v),!0===E.getShaderParameter(v,E.COMPILE_STATUS))}(c)),!Oe[c]||document.documentMode));var i,c}var Oe={};function Le(_,i){if(Array.isArray(_)){if(!Array.isArray(i)||_.length!==i.length)return!1;for(let c=0;c<_.length;c++)if(!Le(_[c],i[c]))return!1;return!0}if("object"==typeof _&&null!==_&&null!==i){if("object"!=typeof i||Object.keys(_).length!==Object.keys(i).length)return!1;for(const c in _)if(!Le(_[c],i[c]))return!1;return!0}return _===i}qe.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class he{static testProp(i){if(!he.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in he.docStyle)return i[c];return i[0]}static create(i,c,m){const v=window.document.createElement(i);return void 0!==c&&(v.className=c),m&&m.appendChild(v),v}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){he.docStyle&&he.selectProp&&(he.userSelect=he.docStyle[he.selectProp],he.docStyle[he.selectProp]="none")}static enableDrag(){he.docStyle&&he.selectProp&&(he.docStyle[he.selectProp]=he.userSelect)}static setTransform(i,c){i.style[he.transformProp]=c}static addEventListener(i,c,m,v={}){i.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(i,c,m,v={}){i.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",he.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",he.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",he.suppressClickInternal,!0)},0)}static mousePos(i,c){const m=i.getBoundingClientRect();return new f.pointGeometry(c.clientX-m.left-i.clientLeft,c.clientY-m.top-i.clientTop)}static touchPos(i,c){const m=i.getBoundingClientRect(),v=[];for(let E=0;E<c.length;E++)v.push(new f.pointGeometry(c[E].clientX-m.left-i.clientLeft,c[E].clientY-m.top-i.clientTop));return v}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}he.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,he.selectProp=he.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),he.transformProp=he.testProp(["transform","WebkitTransform"]);class ze{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,m){const v=function(E){const O=E.match(He);if(!O)throw new Error(`Unable to parse URL "${E}"`);return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}(i);return v.path+=`${c}${m}`,function(E){const O=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${O}`}(v)}setTransformRequest(i){this._transformRequestFn=i}}const He=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Be(_){var i=new f.ARRAY_TYPE(3);return i[0]=_[0],i[1]=_[1],i[2]=_[2],i}var gt,Ye=function(_,i,c){return _[0]=i[0]-c[0],_[1]=i[1]-c[1],_[2]=i[2]-c[2],_};gt=new f.ARRAY_TYPE(3),f.ARRAY_TYPE!=Float32Array&&(gt[0]=0,gt[1]=0,gt[2]=0);var _,et=function(_){var i=_[0],c=_[1];return i*i+c*c};_=new f.ARRAY_TYPE(2),f.ARRAY_TYPE!=Float32Array&&(_[0]=0,_[1]=0);class bt{constructor(i,c,m,v){this.context=i,this.format=m,this.texture=i.gl.createTexture(),this.update(c,v)}update(i,c,m){const{width:v,height:E}=i,O=!(this.size&&this.size[0]===v&&this.size[1]===E||m),{context:j}=this,{gl:Y}=j;if(this.useMipmap=Boolean(c&&c.useMipmap),Y.bindTexture(Y.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===Y.RGBA&&(!c||!1!==c.premultiply)),O)this.size=[v,E],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||f.isImageBitmap(i)?Y.texImage2D(Y.TEXTURE_2D,0,this.format,this.format,Y.UNSIGNED_BYTE,i):Y.texImage2D(Y.TEXTURE_2D,0,this.format,v,E,0,this.format,Y.UNSIGNED_BYTE,i.data);else{const{x:re,y:le}=m||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||f.isImageBitmap(i)?Y.texSubImage2D(Y.TEXTURE_2D,0,re,le,Y.RGBA,Y.UNSIGNED_BYTE,i):Y.texSubImage2D(Y.TEXTURE_2D,0,re,le,v,E,Y.RGBA,Y.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Y.generateMipmap(Y.TEXTURE_2D)}bind(i,c,m){const{context:v}=this,{gl:E}=v;E.bindTexture(E.TEXTURE_2D,this.texture),m!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=E.LINEAR),i!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,i),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,m||i),this.filter=i),c!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,c),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function We(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ut extends f.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new f.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new f.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new f.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,c){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(i,c){return!(i&&(4!==i.length||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const m={};for(const v of i){this.images[v]||this.fire(new f.Event("styleimagemissing",{id:v}));const E=this.images[v];E?m[v]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:f.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],m=this.getImage(i);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new f.ImagePosition(v,m);this.patterns[i]={bin:v,position:E}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new bt(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const E in this.patterns)i.push(this.patterns[E].bin);const{w:c,h:m}=f.potpack(i),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const E in this.patterns){const{bin:O}=this.patterns[E],j=O.x+1,Y=O.y+1,re=this.images[E].data,le=re.width,xe=re.height;f.RGBAImage.copy(re,v,{x:0,y:0},{x:j,y:Y},{width:le,height:xe}),f.RGBAImage.copy(re,v,{x:0,y:xe-1},{x:j,y:Y-1},{width:le,height:1}),f.RGBAImage.copy(re,v,{x:0,y:0},{x:j,y:Y+xe},{width:le,height:1}),f.RGBAImage.copy(re,v,{x:le-1,y:0},{x:j-1,y:Y},{width:1,height:xe}),f.RGBAImage.copy(re,v,{x:0,y:0},{x:j+le,y:Y},{width:1,height:xe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.images[c];We(m)&&this.updateImage(c,m)}}}const jt=1e20;function un(_,i,c,m,v,E,O,j,Y){for(let re=i;re<i+m;re++)Dt(_,c*E+re,E,v,O,j,Y);for(let re=c;re<c+v;re++)Dt(_,re*E+i,1,m,O,j,Y)}function Dt(_,i,c,m,v,E,O){E[0]=0,O[0]=-jt,O[1]=jt,v[0]=_[i];for(let j=1,Y=0,re=0;j<m;j++){v[j]=_[i+j*c];const le=j*j;do{const xe=E[Y];re=(v[j]-v[xe]+le-xe*xe)/(j-xe)/2}while(re<=O[Y]&&--Y>-1);Y++,E[Y]=j,O[Y]=re,O[Y+1]=jt}for(let j=0,Y=0;j<m;j++){for(;O[Y+1]<j;)Y++;const re=E[Y],le=j-re;_[i+j*c]=v[re]+le*le}}class ke{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const m=[];for(const v in i)for(const E of i[v])m.push({stack:v,id:E});f.asyncAll(m,({stack:v,id:E},O)=>{let j=this.entries[v];j||(j=this.entries[v]={glyphs:{},requests:{},ranges:{}});let Y=j.glyphs[E];if(void 0!==Y)return void O(null,{stack:v,id:E,glyph:Y});if(Y=this._tinySDF(j,v,E),Y)return j.glyphs[E]=Y,void O(null,{stack:v,id:E,glyph:Y});const re=Math.floor(E/256);if(256*re>65535)return void O(new Error("glyphs > 65535 not supported"));if(j.ranges[re])return void O(null,{stack:v,id:E,glyph:Y});let le=j.requests[re];le||(le=j.requests[re]=[],ke.loadGlyphRange(v,re,this.url,this.requestManager,(xe,Ie)=>{if(Ie){for(const Ze in Ie)this._doesCharSupportLocalGlyph(+Ze)||(j.glyphs[+Ze]=Ie[+Ze]);j.ranges[re]=!0}for(const Ze of le)Ze(xe,Ie);delete j.requests[re]})),le.push((xe,Ie)=>{xe?O(xe):Ie&&O(null,{stack:v,id:E,glyph:Ie[E]||null})})},(v,E)=>{if(v)c(v);else if(E){const O={};for(const{stack:j,id:Y,glyph:re}of E)(O[j]||(O[j]={}))[Y]=re&&{id:re.id,bitmap:re.bitmap.clone(),metrics:re.metrics};c(null,O)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(f.unicodeBlockLookup["CJK Unified Ideographs"](i)||f.unicodeBlockLookup["Hangul Syllables"](i)||f.unicodeBlockLookup.Hiragana(i)||f.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let E=i.tinySDF;if(!E){let j="400";/bold/i.test(c)?j="900":/medium/i.test(c)?j="500":/light/i.test(c)&&(j="200"),E=i.tinySDF=new ke.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:v,fontWeight:j})}const O=E.draw(String.fromCharCode(m));return{id:m,bitmap:new f.AlphaImage({width:O.width||30,height:O.height||30},O.data),metrics:{width:O.glyphWidth||24,height:O.glyphHeight||24,left:O.glyphLeft||0,top:O.glyphTop-27||-8,advance:O.glyphAdvance||24}}}}ke.loadGlyphRange=function(_,i,c,m,v){const E=256*i,O=E+255,j=m.transformRequest(c.replace("{fontstack}",_).replace("{range}",`${E}-${O}`),f.ResourceType.Glyphs);f.getArrayBuffer(j,(Y,re)=>{if(Y)v(Y);else if(re){const le={};for(const xe of f.parseGlyphPBF(re))le[xe.id]=xe;v(null,le)}})},ke.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:O="normal"}={}){this.buffer=i,this.cutoff=m,this.radius=c;const j=this.size=_+4*i,Y=this._createCanvas(j),re=this.ctx=Y.getContext("2d",{willReadFrequently:!0});re.font=`${O} ${E} ${_}px ${v}`,re.textBaseline="alphabetic",re.textAlign="left",re.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(_),O=Math.ceil(c),j=Math.min(this.size-this.buffer,Math.ceil(E-v)),Y=Math.min(this.size-this.buffer,O+Math.ceil(m)),re=j+2*this.buffer,le=Y+2*this.buffer,xe=Math.max(re*le,0),Ie=new Uint8ClampedArray(xe),Ze={data:Ie,width:re,height:le,glyphWidth:j,glyphHeight:Y,glyphTop:O,glyphLeft:0,glyphAdvance:i};if(0===j||0===Y)return Ze;const{ctx:Pe,buffer:Ge,gridInner:mt,gridOuter:vt}=this;Pe.clearRect(Ge,Ge,j,Y),Pe.fillText(_,Ge,Ge+O);const At=Pe.getImageData(Ge,Ge,j,Y);vt.fill(jt,0,xe),mt.fill(0,0,xe);for(let xt=0;xt<Y;xt++)for(let $t=0;$t<j;$t++){const Zt=At.data[4*(xt*j+$t)+3]/255;if(0===Zt)continue;const Kt=(xt+Ge)*re+$t+Ge;if(1===Zt)vt[Kt]=0,mt[Kt]=jt;else{const xn=.5-Zt;vt[Kt]=xn>0?xn*xn:0,mt[Kt]=xn<0?xn*xn:0}}un(vt,0,0,re,le,re,this.f,this.v,this.z),un(mt,Ge,Ge,j,Y,re,this.f,this.v,this.z);for(let xt=0;xt<xe;xt++){const $t=Math.sqrt(vt[xt])-Math.sqrt(mt[xt]);Ie[xt]=Math.round(255-255*($t/this.radius+this.cutoff))}return Ze}};const ot=new f.Properties({anchor:new f.DataConstantProperty(f.spec.light.anchor),position:new class{constructor(){this.specification=f.spec.light.position}possiblyEvaluate(_,i){return f.sphericalToCartesian(_.expression.evaluate(i))}interpolate(_,i,c){return{x:f.number(_.x,i.x,c),y:f.number(_.y,i.y,c),z:f.number(_.z,i.z,c)}}},color:new f.DataConstantProperty(f.spec.light.color),intensity:new f.DataConstantProperty(f.spec.light.intensity)}),nn="-transition";class zt extends f.Evented{constructor(i){super(),this._transitionable=new f.Transitionable(ot),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(f.validateLight,i,c))for(const m in i){const v=i[m];m.endsWith(nn)?this._transitionable.setTransition(m.slice(0,-nn.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||!1!==m.validate)&&f.emitValidationErrors(this,i.call(f.validateStyle,f.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:f.spec})))}}class tn{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const m=i.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,c)),this.dashEntry[m]}getDashRanges(i,c,m){const v=[];let E=i.length%2==1?-i[i.length-1]*m:0,O=i[0]*m,j=!0;v.push({left:E,right:O,isDash:j,zeroLength:0===i[0]});let Y=i[0];for(let re=1;re<i.length;re++){j=!j;const le=i[re];E=Y*m,Y+=le,O=Y*m,v.push({left:E,right:O,isDash:j,zeroLength:0===le})}return v}addRoundDash(i,c,m){const v=c/2;for(let E=-m;E<=m;E++){const O=this.width*(this.nextRow+m+E);let j=0,Y=i[j];for(let re=0;re<this.width;re++){re/Y.right>1&&(Y=i[++j]);const le=Math.abs(re-Y.left),xe=Math.abs(re-Y.right),Ie=Math.min(le,xe);let Ze;const Pe=E/m*(v+1);if(Y.isDash){const Ge=v-Math.abs(Pe);Ze=Math.sqrt(Ie*Ie+Ge*Ge)}else Ze=v-Math.sqrt(Ie*Ie+Pe*Pe);this.data[O+re]=Math.max(0,Math.min(255,Ze+128))}}}addRegularDash(i){for(let j=i.length-1;j>=0;--j){const Y=i[j],re=i[j+1];Y.zeroLength?i.splice(j,1):re&&re.isDash===Y.isDash&&(re.left=Y.left,i.splice(j,1))}const c=i[0],m=i[i.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let E=0,O=i[E];for(let j=0;j<this.width;j++){j/O.right>1&&(O=i[++E]);const Y=Math.abs(j-O.left),re=Math.abs(j-O.right),le=Math.min(Y,re);this.data[v+j]=Math.max(0,Math.min(255,(O.isDash?le:-le)+128))}}addDash(i,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return f.warnOnce("LineAtlas out of space"),null;let E=0;for(let j=0;j<i.length;j++)E+=i[j];if(0!==E){const j=this.width/E,Y=this.getDashRanges(i,this.width,j);c?this.addRoundDash(Y,j,m):this.addRegularDash(Y)}const O={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:E};return this.nextRow+=v,this.dirty=!0,O}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class st{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const E=new st.Actor(m[v],c,this.id);E.name=`Worker ${v}`,this.actors.push(E)}}broadcast(i,c,m){f.asyncAll(this.actors,(v,E)=>{v.send(i,c,E)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function yt(_,i,c){const m=function(v,E){if(v)return c(v);if(E){const O=f.pick(f.extend(E,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(O.vectorLayers=E.vector_layers,O.vectorLayerIds=O.vectorLayers.map(j=>j.id)),c(null,O)}};return _.url?f.getJSON(i.transformRequest(_.url,f.ResourceType.Source),m):f.exported.frame(()=>m(null,_))}st.Actor=f.Actor;class ct{constructor(i,c,m){this.bounds=f.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),m=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*c),v=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*c),E=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*c),O=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=m&&i.x<E&&i.y>=v&&i.y<O}}class Tt extends f.Evented{constructor(i,c,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(c,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=yt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new f.ErrorEvent(i)):c&&(f.extend(this,c),c.bounds&&(this.tileBounds=new ct(c.bounds,this.minzoom,this.maxzoom)),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return f.extend({},this._options)}loadTile(i,c){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,f.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(O,j){return delete i.request,i.aborted?c(null):O&&404!==O.status?c(O):(j&&j.resourceTiming&&(i.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&i.setExpiryData(j),i.loadVectorData(j,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state?"loading"===i.state?i.reloadCallback=c:i.request=i.actor.send("reloadTile",v,E.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",v,E.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Xt extends f.Evented{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},c),f.extend(this,f.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=yt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new f.ErrorEvent(i)):c&&(f.extend(this,c),c.bounds&&(this.tileBounds=new ct(c.bounds,this.minzoom,this.maxzoom)),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return f.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=f.getImage(this.map._requestManager.transformRequest(m,f.ResourceType.Tile),(v,E,O)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(v)i.state="errored",c(v);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(O);const j=this.map.painter.context,Y=j.gl;i.texture=this.map.painter.getTileTexture(E.width),i.texture?i.texture.update(E,{useMipmap:!0}):(i.texture=new bt(j,E,Y.RGBA,{useMipmap:!0}),i.texture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&Y.texParameterf(Y.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),i.state="loaded",f.cacheEntryPossiblyAdded(this.dispatcher),c(null)}})}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let Ct;class vn extends Xt{constructor(i,c,m,v){super(i,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,c){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function v(E,O){E&&(i.state="errored",c(E)),O&&(i.dem=O,i.needsHillshadePrepare=!0,i.state="loaded",c(null))}i.request=f.getImage(this.map._requestManager.transformRequest(m,f.ResourceType.Tile),function(E,O){if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(E)i.state="errored",c(E);else if(O){this.map._refreshExpiredTiles&&i.setExpiryData(O),delete O.cacheControl,delete O.expires;const j=f.isImageBitmap(O)&&(null==Ct&&(Ct="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),Ct)?O:f.exported.getImageData(O,1),Y={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:j,encoding:this.encoding};i.actor&&"expired"!==i.state||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",Y,v.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const c=i.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,E=0===c.x?i.wrap-1:i.wrap,O=(c.x+1+m)%m,j=c.x+1===m?i.wrap+1:i.wrap,Y={};return Y[new f.OverscaledTileID(i.overscaledZ,E,c.z,v,c.y).key]={backfilled:!1},Y[new f.OverscaledTileID(i.overscaledZ,j,c.z,O,c.y).key]={backfilled:!1},c.y>0&&(Y[new f.OverscaledTileID(i.overscaledZ,E,c.z,v,c.y-1).key]={backfilled:!1},Y[new f.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},Y[new f.OverscaledTileID(i.overscaledZ,j,c.z,O,c.y-1).key]={backfilled:!1}),c.y+1<m&&(Y[new f.OverscaledTileID(i.overscaledZ,E,c.z,v,c.y+1).key]={backfilled:!1},Y[new f.OverscaledTileID(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},Y[new f.OverscaledTileID(i.overscaledZ,j,c.z,O,c.y+1).key]={backfilled:!1}),Y}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class fi extends f.Evented{constructor(i,c,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,void 0!==c.maxzoom&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const E=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(void 0!==c.buffer?c.buffer:128)*E,tolerance:(void 0!==c.tolerance?c.tolerance:.375)*E,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:void 0!==c.clusterMaxZoom?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(c.clusterRadius||50)*E,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},c),this}getClusterChildren(i,c){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},c),this}getClusterLeaves(i,c,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:c,offset:m},v),this}_updateWorkerData(i){const c=f.extend({},this.workerOptions),m=this._data;"string"==typeof m?(c.request=this.map._requestManager.transformRequest(f.exported.resolveURL(m),f.ResourceType.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(m),this._pendingLoads++,this.fire(new f.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,c,(v,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return;let O=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(O=E.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:c.source},null),v)return void this.fire(new f.ErrorEvent(v));const j={dataType:"source",sourceDataType:i};this._collectResourceTiming&&O&&O.length>0&&f.extend(j,{resourceTiming:O}),this.fire(new f.Event("data",j))})}loaded(){return 0===this._pendingLoads}loadTile(i,c){const m=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const v={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(m,v,(E,O)=>(delete i.request,i.unloadVectorData(),i.aborted?c(null):E?c(E):(i.loadVectorData(O,this.map.painter,"reloadTile"===m),c(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return f.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var zi=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Dn extends f.Evented{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i,c){this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),(m,v)=>{this._loaded=!0,m?this.fire(new f.ErrorEvent(m)):v&&(this.image=v,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const c=i.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(v){let E=1/0,O=1/0,j=-1/0,Y=-1/0;for(const Ie of v)E=Math.min(E,Ie.x),O=Math.min(O,Ie.y),j=Math.max(j,Ie.x),Y=Math.max(Y,Ie.y);const re=Math.max(j-E,Y-O),le=Math.max(0,Math.floor(-Math.log(re)/Math.LN2)),xe=Math.pow(2,le);return new f.CanonicalTileID(le,Math.floor((E+j)/2*xe),Math.floor((O+Y)/2*xe))}(c),this.minzoom=this.maxzoom=this.tileID.z;const m=c.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new f.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,zi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new bt(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Tn extends Dn{constructor(i,c,m,v){super(i,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,f.ResourceType.Source).url);f.getVideo(this.urls,(c,m)=>{this._loaded=!0,c?this.fire(new f.ErrorEvent(c)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,zi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new bt(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ii extends Dn{constructor(i,c,m,v){super(i,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&4===c.coordinates.length&&!c.coordinates.some(E=>!Array.isArray(E)||2!==E.length||E.some(O=>"number"!=typeof O))||this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&"boolean"!=typeof c.animate&&this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?"string"==typeof c.canvas||c.canvas instanceof HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=void 0===c.animate||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const c=this.map.painter.context,m=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,zi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new bt(c,this.canvas,m.RGBA,{premultiply:!0});for(const v in this.tiles){const E=this.tiles[v];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ci={vector:Tt,raster:Xt,"raster-dem":vn,geojson:fi,video:Tn,image:Dn,canvas:Ii};function ir(_,i){const c=f.create();return f.translate(c,c,[1,1,0]),f.scale(c,c,[.5*_.width,.5*_.height,1]),f.multiply(c,c,_.calculatePosMatrix(i.toUnwrapped()))}function _i(_,i,c,m,v,E){const O=function(xe,Ie,Ze){if(xe)for(const Pe of xe){const Ge=Ie[Pe];if(Ge&&Ge.source===Ze&&"fill-extrusion"===Ge.type)return!0}else for(const Pe in Ie){const Ge=Ie[Pe];if(Ge.source===Ze&&"fill-extrusion"===Ge.type)return!0}return!1}(v&&v.layers,i,_.id),j=E.maxPitchScaleFactor(),Y=_.tilesIn(m,j,O);Y.sort(kn);const re=[];for(const xe of Y)re.push({wrappedTileID:xe.tileID.wrapped().key,queryResults:xe.tile.queryRenderedFeatures(i,c,_._state,xe.queryGeometry,xe.cameraQueryGeometry,xe.scale,v,E,j,ir(_.transform,xe.tileID))});const le=function(xe){const Ie={},Ze={};for(const Pe of xe){const Ge=Pe.queryResults,mt=Pe.wrappedTileID,vt=Ze[mt]=Ze[mt]||{};for(const At in Ge){const xt=Ge[At],$t=vt[At]=vt[At]||{},Zt=Ie[At]=Ie[At]||[];for(const Kt of xt)$t[Kt.featureIndex]||($t[Kt.featureIndex]=!0,Zt.push(Kt))}}return Ie}(re);for(const xe in le)le[xe].forEach(Ie=>{const Ze=Ie.feature,Pe=_.getFeatureState(Ze.layer["source-layer"],Ze.id);Ze.source=Ze.layer.source,Ze.layer["source-layer"]&&(Ze.sourceLayer=Ze.layer["source-layer"]),Ze.state=Pe});return le}function kn(_,i){const c=_.tileID,m=i.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}class ii{constructor(i,c){this.tileID=i,this.uid=f.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<f.exported.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(i,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(v,E){const O={};if(!E)return O;for(const j of v){const Y=j.layerIds.map(re=>E.getLayer(re)).filter(Boolean);if(0!==Y.length){j.layers=Y,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map(re=>Y.filter(le=>le.id===re)[0]));for(const re of Y)O[re.id]=j}}return O}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof f.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof f.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,f.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(E))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new f.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bt(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bt(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,m,v,E,O,j,Y,re,le){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:E,scale:O,tileSize:this.tileSize,pixelPosMatrix:le,transform:Y,params:j,queryPadding:this.queryPadding*re},i,c,m):{}}querySourceFeatures(i,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),E=c?c.sourceLayer:"",O=v._geojsonTileLayer||v[E];if(!O)return;const j=f.createFilter(c&&c.filter),{z:Y,x:re,y:le}=this.tileID.canonical,xe={z:Y,x:re,y:le};for(let Ie=0;Ie<O.length;Ie++){const Ze=O.feature(Ie);if(j.needGeometry){const mt=f.toEvaluationFeature(Ze,!0);if(!j.filter(new f.EvaluationParameters(this.tileID.overscaledZ),mt,this.tileID.canonical))continue}else if(!j.filter(new f.EvaluationParameters(this.tileID.overscaledZ),Ze))continue;const Pe=m.getId(Ze,E),Ge=new f.GeoJSONFeature(Ze,Y,re,le,Pe);Ge.tile=xe,i.push(Ge)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const m=f.parseCacheControl(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const E=this.expirationTime-c;E?this.expirationTime=m+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(i).length)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const E=this.buckets[v],O=E.layers[0].sourceLayer||"_geojsonTileLayer",j=m[O],Y=i[O];if(!j||!Y||0===Object.keys(Y).length)continue;E.update(Y,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const re=c&&c.style&&c.style.getLayer(v);re&&(this.queryPadding=Math.max(this.queryPadding,re.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<f.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=f.exported.now()+i}setDependencies(i,c){const m={};for(const v of c)m[v]=!0;this.dependencies[i]=m}hasDependency(i,c){for(const m of i){const v=this.dependencies[m];if(v)for(const E of c)if(v[E])return!0}return!1}}class ft{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,m){const v=i.wrapped().key;void 0===this.data[v]&&(this.data[v]=[]);const E={value:c,timeout:void 0};if(void 0!==m&&(E.timeout=setTimeout(()=>{this.remove(i,E)},m)),this.data[v].push(E),this.order.push(v),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const m=i.wrapped().key,v=void 0===c?0:this.data[m].indexOf(c),E=this.data[m][v];return this.data[m].splice(v,1),E.timeout&&clearTimeout(E.timeout),0===this.data[m].length&&delete this.data[m],this.onRemove(E.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const m in this.data)for(const v of this.data[m])i(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,m){const v=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},f.extend(this.stateChanges[i][v],m),null===this.deletedStates[i]){this.deletedStates[i]={};for(const E in this.state[i])E!==v&&(this.deletedStates[i][E]=null)}else if(this.deletedStates[i]&&null===this.deletedStates[i][v]){this.deletedStates[i][v]={};for(const E in this.state[i][v])m[E]||(this.deletedStates[i][v][E]=null)}else for(const E in m)this.deletedStates[i]&&this.deletedStates[i][v]&&null===this.deletedStates[i][v][E]&&delete this.deletedStates[i][v][E]}removeFeatureState(i,c,m){if(null===this.deletedStates[i])return;const v=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&void 0!==c)null!==this.deletedStates[i][v]&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(void 0!==c)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,c){const m=String(c),v=f.extend({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(null===this.deletedStates[i])return{};if(this.deletedStates[i]){const E=this.deletedStates[i][c];if(null===E)return{};for(const O in E)delete v[O]}return v}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const O in this.stateChanges[v])this.state[v][O]||(this.state[v][O]={}),f.extend(this.state[v][O],this.stateChanges[v][O]),E[O]=this.state[v][O];m[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(null===this.deletedStates[v])for(const O in this.state[v])E[O]={},this.state[v][O]={};else for(const O in this.deletedStates[v]){if(null===this.deletedStates[v][O])this.state[v][O]={};else for(const j of Object.keys(this.deletedStates[v][O]))delete this.state[v][O][j];E[O]=this.state[v][O]}m[v]=m[v]||{},f.extend(m[v],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(m).length)for(const v in i)i[v].setFeatureState(m,c)}}class on extends f.Evented{constructor(i,c,m){super(),this.id=i,this.dispatcher=m,this.on("data",v=>{"source"===v.dataType&&"metadata"===v.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===v.dataType&&"content"===v.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(v,E,O,j){const Y=new ci[E.type](v,E,O,j);if(Y.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${Y.id}`);return f.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(i,c,m,this),this._tiles={},this._cache=new ft(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ft}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const c=this._tiles[i];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new f.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(i),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(gn).map(i=>i.key)}getRenderableIds(i){const c=[];for(const m in this._tiles)this._isIdRenderable(m,i)&&c.push(this._tiles[m]);return i?c.sort((m,v)=>{const E=m.tileID,O=v.tileID,j=new f.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),Y=new f.pointGeometry(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-O.overscaledZ||Y.y-j.y||Y.x-j.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(gn).map(m=>m.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)"errored"!==this._tiles[i].state&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const m=this._tiles[i];m&&("loading"!==m.state&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,i,c)))}_tileLoaded(i,c,m,v){if(v)return i.state="errored",void(404!==v.status?this._source.fire(new f.ErrorEvent(v,{tile:i})):this.update(this.transform));i.timeAdded=f.exported.now(),"expired"===m&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),"raster-dem"===this.getSource().type&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new f.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const E=c[v];if(i.neighboringTiles&&i.neighboringTiles[E]){const O=this.getTileByID(E);m(i,O),m(O,i)}}function m(v,E){v.needsHillshadePrepare=!0;let O=E.tileID.canonical.x-v.tileID.canonical.x;const j=E.tileID.canonical.y-v.tileID.canonical.y,Y=Math.pow(2,v.tileID.canonical.z),re=E.tileID.key;0===O&&0===j||Math.abs(j)>1||(Math.abs(O)>1&&(1===Math.abs(O+Y)?O+=Y:1===Math.abs(O-Y)&&(O-=Y)),E.dem&&v.dem&&(v.dem.backfillBorder(E.dem,O,j),v.neighboringTiles&&v.neighboringTiles[re]&&(v.neighboringTiles[re].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,m,v){for(const E in this._tiles){let O=this._tiles[E];if(v[E]||!O.hasData()||O.tileID.overscaledZ<=c||O.tileID.overscaledZ>m)continue;let j=O.tileID;for(;O&&O.tileID.overscaledZ>c+1;){const re=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[re.key],O&&O.hasData()&&(j=re)}let Y=j;for(;Y.overscaledZ>c;)if(Y=Y.scaledTo(Y.overscaledZ-1),i[Y.key]){v[j.key]=j;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const m=this._loadedParentTiles[i.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=i.overscaledZ-1;m>=c;m--){const v=i.scaledTo(m),E=this._getLoadedTile(v);if(E)return E}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(c*m*5),E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(E)}handleWrapJump(i){const c=Math.round((i-(void 0===this._prevLng?i:this._prevLng))/360);if(this._prevLng=i,c){const m={};for(const v in this._tiles){const E=this._tiles[v];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),m[E.tileID.key]=E}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let c;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?c=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new f.OverscaledTileID(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(c=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(c=c.filter(Y=>this._source.hasTile(Y)))):c=[];const m=i.coveringZoomLevel(this._source),v=Math.max(m-on.maxOverzooming,this._source.minzoom),E=Math.max(m+on.maxUnderzooming,this._source.minzoom),O=this._updateRetainedTiles(c,m);if(zn(this._source.type)){const Y={},re={},le=Object.keys(O);for(const xe of le){const Ie=O[xe],Ze=this._tiles[xe];if(!Ze||Ze.fadeEndTime&&Ze.fadeEndTime<=f.exported.now())continue;const Pe=this.findLoadedParent(Ie,v);Pe&&(this._addTile(Pe.tileID),Y[Pe.tileID.key]=Pe.tileID),re[xe]=Ie}this._retainLoadedChildren(re,m,E,O);for(const xe in Y)O[xe]||(this._coveredTiles[xe]=!0,O[xe]=Y[xe])}for(const Y in O)this._tiles[Y].clearFadeHold();const j=f.keysDifference(this._tiles,O);for(const Y of j){const re=this._tiles[Y];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const m={},v={},E=Math.max(c-on.maxOverzooming,this._source.minzoom),O=Math.max(c+on.maxUnderzooming,this._source.minzoom),j={};for(const Y of i){const re=this._addTile(Y);m[Y.key]=Y,re.hasData()||c<this._source.maxzoom&&(j[Y.key]=Y)}this._retainLoadedChildren(j,c,O,m);for(const Y of i){let re=this._tiles[Y.key];if(re.hasData())continue;if(c+1>this._source.maxzoom){const xe=Y.children(this._source.maxzoom)[0],Ie=this.getTile(xe);if(Ie&&Ie.hasData()){m[xe.key]=xe;continue}}else{const xe=Y.children(this._source.maxzoom);if(m[xe[0].key]&&m[xe[1].key]&&m[xe[2].key]&&m[xe[3].key])continue}let le=re.wasRequested();for(let xe=Y.overscaledZ-1;xe>=E;--xe){const Ie=Y.scaledTo(xe);if(v[Ie.key]||(v[Ie.key]=!0,re=this.getTile(Ie),!re&&le&&(re=this._addTile(Ie)),re&&(m[Ie.key]=Ie,le=re.wasRequested(),re.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let m,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const E=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(E),m)break;v=E}for(const E of c)this._loadedParentTiles[E]=m}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const m=c;return c||(c=new ii(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,m||this._source.fire(new f.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const m=c.getExpiryTimeout();m&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},m))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,m){const v=[],E=this.transform;if(!E)return v;const O=m?E.getCameraQueryGeometry(i):i,j=i.map(Pe=>E.pointCoordinate(Pe)),Y=O.map(Pe=>E.pointCoordinate(Pe)),re=this.getIds();let le=1/0,xe=1/0,Ie=-1/0,Ze=-1/0;for(const Pe of Y)le=Math.min(le,Pe.x),xe=Math.min(xe,Pe.y),Ie=Math.max(Ie,Pe.x),Ze=Math.max(Ze,Pe.y);for(let Pe=0;Pe<re.length;Pe++){const Ge=this._tiles[re[Pe]];if(Ge.holdingForFade())continue;const mt=Ge.tileID,vt=Math.pow(2,E.zoom-Ge.tileID.overscaledZ),At=c*Ge.queryPadding*f.EXTENT/Ge.tileSize/vt,xt=[mt.getTilePoint(new f.MercatorCoordinate(le,xe)),mt.getTilePoint(new f.MercatorCoordinate(Ie,Ze))];if(xt[0].x-At<f.EXTENT&&xt[0].y-At<f.EXTENT&&xt[1].x+At>=0&&xt[1].y+At>=0){const $t=j.map(Kt=>mt.getTilePoint(Kt)),Zt=Y.map(Kt=>mt.getTilePoint(Kt));v.push({tile:Ge,tileID:mt,queryGeometry:$t,cameraQueryGeometry:Zt,scale:vt})}}return v}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(m=>this._tiles[m].tileID);for(const m of c)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(zn(this._source.type))for(const i in this._tiles){const c=this._tiles[i];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=f.exported.now())return!0}return!1}setFeatureState(i,c,m){this._state.updateState(i=i||"_geojsonTileLayer",c,m)}removeFeatureState(i,c,m){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,m)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,m){const v=this._tiles[i];v&&v.setDependencies(c,m)}reloadTilesForDependencies(i,c){for(const m in this._tiles)this._tiles[m].hasDependency(i,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(i,c))}}function gn(_,i){const c=Math.abs(2*_.wrap)-+(_.wrap<0),m=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||m-c||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function zn(_){return"raster"===_||"image"===_||"video"===_}on.maxOverzooming=10,on.maxUnderzooming=3;const Jn="mapboxgl_preloaded_worker_pool";class Pi{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Pi.workerCount;)this.workers.push(new Worker(Xs.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Jn]}numActive(){return Object.keys(this.active).length}}const er=Math.floor(f.exported.hardwareConcurrency/2);let sr;function Kn(){return sr||(sr=new Pi),sr}function ri(_,i){const c={};for(const m in _)"ref"!==m&&(c[m]=_[m]);return f.refProperties.forEach(m=>{m in i&&(c[m]=i[m])}),c}function Zn(_){_=_.slice();const i=Object.create(null);for(let c=0;c<_.length;c++)i[_[c].id]=_[c];for(let c=0;c<_.length;c++)"ref"in _[c]&&(_[c]=ri(_[c],i[_[c].ref]));return _}Pi.workerCount=Math.max(Math.min(er,6),1);const ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $(_,i,c){c.push({command:ht.addSource,args:[_,i[_]]})}function U(_,i,c){i.push({command:ht.removeSource,args:[_]}),c[_]=!0}function R(_,i,c,m){U(_,c,m),$(_,i,c)}function B(_,i,c){let m;for(m in _[c])if(Object.prototype.hasOwnProperty.call(_[c],m)&&"data"!==m&&!Le(_[c][m],i[c][m]))return!1;for(m in i[c])if(Object.prototype.hasOwnProperty.call(i[c],m)&&"data"!==m&&!Le(_[c][m],i[c][m]))return!1;return!0}function ie(_,i,c,m,v,E){let O;for(O in i=i||{},_=_||{})Object.prototype.hasOwnProperty.call(_,O)&&(Le(_[O],i[O])||c.push({command:E,args:[m,O,i[O],v]}));for(O in i)Object.prototype.hasOwnProperty.call(i,O)&&!Object.prototype.hasOwnProperty.call(_,O)&&(Le(_[O],i[O])||c.push({command:E,args:[m,O,i[O],v]}))}function fe(_){return _.id}function tt(_,i){return _[i.id]=i,_}class It{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=f.clamp(i,0,1);let c=1,m=this._distances[c];const v=i*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const E=c-1,O=this._distances[E],j=m-O,Y=j>0?(v-O)/j:0;return this.points[E].mult(1-Y).add(this.points[c].mult(Y))}}function _t(_,i){let c=!0;return"always"===_||"never"!==_&&"never"!==i||(c=!1),c}class mn{constructor(i,c,m){const v=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(c/m);for(let O=0;O<this.xCellCount*this.yCellCount;O++)v.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,m,v,E){this._forEachCell(c,m,v,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(E)}insertCircle(i,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,c,m,v,E,O){this.boxCells[E].push(O)}_insertCircleCell(i,c,m,v,E,O){this.circleCells[E].push(O)}_query(i,c,m,v,E,O,j){if(m<0||i>this.width||v<0||c>this.height)return[];const Y=[];if(i<=0&&c<=0&&this.width<=m&&this.height<=v){if(E)return[{key:null,x1:i,y1:c,x2:m,y2:v}];for(let re=0;re<this.boxKeys.length;re++)Y.push({key:this.boxKeys[re],x1:this.bboxes[4*re],y1:this.bboxes[4*re+1],x2:this.bboxes[4*re+2],y2:this.bboxes[4*re+3]});for(let re=0;re<this.circleKeys.length;re++){const le=this.circles[3*re],xe=this.circles[3*re+1],Ie=this.circles[3*re+2];Y.push({key:this.circleKeys[re],x1:le-Ie,y1:xe-Ie,x2:le+Ie,y2:xe+Ie})}}else this._forEachCell(i,c,m,v,this._queryCell,Y,{hitTest:E,overlapMode:O,seenUids:{box:{},circle:{}}},j);return Y}query(i,c,m,v){return this._query(i,c,m,v,!1,null)}hitTest(i,c,m,v,E,O){return this._query(i,c,m,v,!0,E,O).length>0}hitTestCircle(i,c,m,v,E){const O=i-m,j=i+m,Y=c-m,re=c+m;if(j<0||O>this.width||re<0||Y>this.height)return!1;const le=[];return this._forEachCell(O,Y,j,re,this._queryCellCircle,le,{hitTest:!0,overlapMode:v,circle:{x:i,y:c,radius:m},seenUids:{box:{},circle:{}}},E),le.length>0}_queryCell(i,c,m,v,E,O,j,Y){const{seenUids:re,hitTest:le,overlapMode:xe}=j,Ie=this.boxCells[E];if(null!==Ie){const Pe=this.bboxes;for(const Ge of Ie)if(!re.box[Ge]){re.box[Ge]=!0;const mt=4*Ge,vt=this.boxKeys[Ge];if(i<=Pe[mt+2]&&c<=Pe[mt+3]&&m>=Pe[mt+0]&&v>=Pe[mt+1]&&(!Y||Y(vt))&&(!le||!_t(xe,vt.overlapMode))&&(O.push({key:vt,x1:Pe[mt],y1:Pe[mt+1],x2:Pe[mt+2],y2:Pe[mt+3]}),le))return!0}}const Ze=this.circleCells[E];if(null!==Ze){const Pe=this.circles;for(const Ge of Ze)if(!re.circle[Ge]){re.circle[Ge]=!0;const mt=3*Ge,vt=this.circleKeys[Ge];if(this._circleAndRectCollide(Pe[mt],Pe[mt+1],Pe[mt+2],i,c,m,v)&&(!Y||Y(vt))&&(!le||!_t(xe,vt.overlapMode))){const At=Pe[mt],xt=Pe[mt+1],$t=Pe[mt+2];if(O.push({key:vt,x1:At-$t,y1:xt-$t,x2:At+$t,y2:xt+$t}),le)return!0}}}return!1}_queryCellCircle(i,c,m,v,E,O,j,Y){const{circle:re,seenUids:le,overlapMode:xe}=j,Ie=this.boxCells[E];if(null!==Ie){const Pe=this.bboxes;for(const Ge of Ie)if(!le.box[Ge]){le.box[Ge]=!0;const mt=4*Ge,vt=this.boxKeys[Ge];if(this._circleAndRectCollide(re.x,re.y,re.radius,Pe[mt+0],Pe[mt+1],Pe[mt+2],Pe[mt+3])&&(!Y||Y(vt))&&!_t(xe,vt.overlapMode))return O.push(!0),!0}}const Ze=this.circleCells[E];if(null!==Ze){const Pe=this.circles;for(const Ge of Ze)if(!le.circle[Ge]){le.circle[Ge]=!0;const mt=3*Ge,vt=this.circleKeys[Ge];if(this._circlesCollide(Pe[mt],Pe[mt+1],Pe[mt+2],re.x,re.y,re.radius)&&(!Y||Y(vt))&&!_t(xe,vt.overlapMode))return O.push(!0),!0}}}_forEachCell(i,c,m,v,E,O,j,Y){const re=this._convertToXCellCoord(i),le=this._convertToYCellCoord(c),xe=this._convertToXCellCoord(m),Ie=this._convertToYCellCoord(v);for(let Ze=re;Ze<=xe;Ze++)for(let Pe=le;Pe<=Ie;Pe++)if(E.call(this,i,c,m,v,this.xCellCount*Pe+Ze,O,j,Y))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,m,v,E,O){const j=v-i,Y=E-c,re=m+O;return re*re>j*j+Y*Y}_circleAndRectCollide(i,c,m,v,E,O,j){const Y=(O-v)/2,re=Math.abs(i-(v+Y));if(re>Y+m)return!1;const le=(j-E)/2,xe=Math.abs(c-(E+le));if(xe>le+m)return!1;if(re<=Y||xe<=le)return!0;const Ie=re-Y,Ze=xe-le;return Ie*Ie+Ze*Ze<=m*m}}function _n(_,i,c,m,v){const E=f.create();return i?(f.scale(E,E,[1/v,1/v,1]),c||f.rotateZ(E,E,m.angle)):f.multiply(E,m.labelPlaneMatrix,_),E}function Vn(_,i,c,m,v){if(i){const E=f.clone(_);return f.scale(E,E,[v,v,1]),c||f.rotateZ(E,E,-m.angle),E}return m.glCoordMatrix}function yi(_,i){const c=[_.x,_.y,0,1];ye(c,c,i);const m=c[3];return{point:new f.pointGeometry(c[0]/m,c[1]/m),signedDistanceFromCamera:m}}function en(_,i){return.5+_/i*.5}function pn(_,i){const c=_[0]/_[3],m=_[1]/_[3];return c>=-i[0]&&c<=i[0]&&m>=-i[1]&&m<=i[1]}function qt(_,i,c,m,v,E,O,j,Y){const re=m?_.textSizeData:_.iconSizeData,le=f.evaluateSizeForZoom(re,c.transform.zoom),xe=[256/c.width*2+1,256/c.height*2+1],Ie=m?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Ie.clear();const Ze=_.lineVertexArray,Pe=m?_.text.placedSymbolArray:_.icon.placedSymbolArray,Ge=c.transform.width/c.transform.height;let mt=!1;for(let vt=0;vt<Pe.length;vt++){const At=Pe.get(vt);if(At.hidden||At.writingMode===f.WritingMode.vertical&&!mt){Ae(At.numGlyphs,Ie);continue}mt=!1;const xt=[At.anchorX,At.anchorY,0,1];if(f.transformMat4(xt,xt,i),!pn(xt,xe)){Ae(At.numGlyphs,Ie);continue}const $t=en(c.transform.cameraToCenterDistance,xt[3]),Zt=f.evaluateSizeForFeature(re,le,At),Kt=O?Zt/$t:Zt*$t,xn=new f.pointGeometry(At.anchorX,At.anchorY),On=yi(xn,v).point,Jt={},Wn=Ln(At,Kt,!1,j,i,v,E,_.glyphOffsetArray,Ze,Ie,On,xn,Jt,Ge,Y);mt=Wn.useVertical,(Wn.notEnoughRoom||mt||Wn.needsFlipping&&Ln(At,Kt,!0,j,i,v,E,_.glyphOffsetArray,Ze,Ie,On,xn,Jt,Ge,Y).notEnoughRoom)&&Ae(At.numGlyphs,Ie)}m?_.text.dynamicLayoutVertexBuffer.updateData(Ie):_.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function Ai(_,i,c,m,v,E,O,j,Y,re,le,xe){const Ie=j.glyphStartIndex+j.numGlyphs,Ze=j.lineStartIndex,Pe=j.lineStartIndex+j.lineLength,Ge=i.getoffsetX(j.glyphStartIndex),mt=i.getoffsetX(Ie-1),vt=pt(_*Ge,c,m,v,E,O,j.segment,Ze,Pe,Y,re,le,xe);if(!vt)return null;const At=pt(_*mt,c,m,v,E,O,j.segment,Ze,Pe,Y,re,le,xe);return At?{first:vt,last:At}:null}function Qn(_,i,c,m){return _===f.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*m?{useVertical:!0}:(_===f.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Ln(_,i,c,m,v,E,O,j,Y,re,le,xe,Ie,Ze,Pe){const Ge=i/24,mt=_.lineOffsetX*Ge,vt=_.lineOffsetY*Ge;let At;if(_.numGlyphs>1){const xt=_.glyphStartIndex+_.numGlyphs,$t=_.lineStartIndex,Zt=_.lineStartIndex+_.lineLength,Kt=Ai(Ge,j,mt,vt,c,le,xe,_,Y,E,Ie,Pe);if(!Kt)return{notEnoughRoom:!0};const xn=yi(Kt.first.point,O).point,On=yi(Kt.last.point,O).point;if(m&&!c){const Jt=Qn(_.writingMode,xn,On,Ze);if(Jt)return Jt}At=[Kt.first];for(let Jt=_.glyphStartIndex+1;Jt<xt-1;Jt++)At.push(pt(Ge*j.getoffsetX(Jt),mt,vt,c,le,xe,_.segment,$t,Zt,Y,E,Ie,Pe));At.push(Kt.last)}else{if(m&&!c){const $t=yi(xe,v).point,Zt=_.lineStartIndex+_.segment+1,Kt=new f.pointGeometry(Y.getx(Zt),Y.gety(Zt)),xn=yi(Kt,v),On=xn.signedDistanceFromCamera>0?xn.point:Bt(xe,Kt,$t,1,v),Jt=Qn(_.writingMode,$t,On,Ze);if(Jt)return Jt}const xt=pt(Ge*j.getoffsetX(_.glyphStartIndex),mt,vt,c,le,xe,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,Y,E,Ie,Pe);if(!xt)return{notEnoughRoom:!0};At=[xt]}for(const xt of At)f.addDynamicAttributes(re,xt.point,xt.angle);return{}}function Bt(_,i,c,m,v){const E=yi(_.add(_.sub(i)._unit()),v).point,O=c.sub(E);return c.add(O._mult(m/O.mag()))}function pt(_,i,c,m,v,E,O,j,Y,re,le,xe,Ie){const Ze=m?_-i:_+i;let Pe=Ze>0?1:-1,Ge=0;m&&(Pe*=-1,Ge=Math.PI),Pe<0&&(Ge+=Math.PI);let mt=Pe>0?j+O:j+O+1,vt=v,At=v,xt=0,$t=0;const Zt=Math.abs(Ze),Kt=[];for(;xt+$t<=Zt;){if(mt+=Pe,mt<j||mt>=Y)return null;if(At=vt,Kt.push(vt),vt=xe[mt],void 0===vt){const Gn=new f.pointGeometry(re.getx(mt),re.gety(mt)),ki=yi(Gn,le);if(ki.signedDistanceFromCamera>0)vt=xe[mt]=ki.point;else{const nr=mt-Pe;vt=Bt(0===xt?E:new f.pointGeometry(re.getx(nr),re.gety(nr)),Gn,At,Zt-xt+1,le)}}xt+=$t,$t=At.dist(vt)}const xn=(Zt-xt)/$t,On=vt.sub(At),Jt=On.mult(xn)._add(At);Jt._add(On._unit()._perp()._mult(c*Pe));const Wn=Ge+Math.atan2(vt.y-At.y,vt.x-At.x);return Kt.push(Jt),{point:Jt,angle:Ie?Wn:0,path:Kt}}const Ce=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ae(_,i){for(let c=0;c<_;c++){const m=i.length;i.resize(m+4),i.float32.set(Ce,3*m)}}function ye(_,i,c){const m=i[0],v=i[1];return _[0]=c[0]*m+c[4]*v+c[12],_[1]=c[1]*m+c[5]*v+c[13],_[3]=c[3]*m+c[7]*v+c[15],_}const lt=100;class Pt{constructor(i,c=new mn(i.width+200,i.height+200,25),m=new mn(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=m,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+lt,this.screenBottomBoundary=i.height+lt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,c,m,v,E){const O=this.projectAndGetPerspectiveRatio(v,i.anchorPointX,i.anchorPointY),j=m*O.perspectiveRatio,Y=i.x1*j+O.point.x,re=i.y1*j+O.point.y,le=i.x2*j+O.point.x,xe=i.y2*j+O.point.y;return!this.isInsideGrid(Y,re,le,xe)||"always"!==c&&this.grid.hitTest(Y,re,le,xe,c,E)?{box:[],offscreen:!1}:{box:[Y,re,le,xe],offscreen:this.isOffscreen(Y,re,le,xe)}}placeCollisionCircles(i,c,m,v,E,O,j,Y,re,le,xe,Ie,Ze){const Pe=[],Ge=new f.pointGeometry(c.anchorX,c.anchorY),mt=yi(Ge,O),vt=en(this.transform.cameraToCenterDistance,mt.signedDistanceFromCamera),At=(le?E/vt:E*vt)/f.ONE_EM,xt=yi(Ge,j).point,$t=Ai(At,v,c.lineOffsetX*At,c.lineOffsetY*At,!1,xt,Ge,c,m,j,{},!1);let Zt=!1,Kt=!1,xn=!0;if($t){const On=.5*Ie*vt+Ze,Jt=new f.pointGeometry(-100,-100),Wn=new f.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Gn=new It,ki=$t.first,nr=$t.last;let Xi=[];for(let $i=ki.path.length-1;$i>=1;$i--)Xi.push(ki.path[$i]);for(let $i=1;$i<nr.path.length;$i++)Xi.push(nr.path[$i]);const dr=2.5*On;if(Y){const $i=Xi.map(vr=>yi(vr,Y));Xi=$i.some(vr=>vr.signedDistanceFromCamera<=0)?[]:$i.map(vr=>vr.point)}let oo=[];if(Xi.length>0){const $i=Xi[0].clone(),vr=Xi[0].clone();for(let Er=1;Er<Xi.length;Er++)$i.x=Math.min($i.x,Xi[Er].x),$i.y=Math.min($i.y,Xi[Er].y),vr.x=Math.max(vr.x,Xi[Er].x),vr.y=Math.max(vr.y,Xi[Er].y);oo=$i.x>=Jt.x&&vr.x<=Wn.x&&$i.y>=Jt.y&&vr.y<=Wn.y?[Xi]:vr.x<Jt.x||$i.x>Wn.x||vr.y<Jt.y||$i.y>Wn.y?[]:f.clipLine([Xi],Jt.x,Jt.y,Wn.x,Wn.y)}for(const $i of oo){Gn.reset($i,.25*On);let vr=0;vr=Gn.length<=.5*On?1:Math.ceil(Gn.paddedLength/dr)+1;for(let Er=0;Er<vr;Er++){const Ir=Er/Math.max(vr-1,1),vs=Gn.lerp(Ir),Xo=vs.x+lt,Qs=vs.y+lt;Pe.push(Xo,Qs,On,0);const Na=Xo-On,bs=Qs-On,Ia=Xo+On,pl=Qs+On;if(xn=xn&&this.isOffscreen(Na,bs,Ia,pl),Kt=Kt||this.isInsideGrid(Na,bs,Ia,pl),"always"!==i&&this.grid.hitTestCircle(Xo,Qs,On,i,xe)&&(Zt=!0,!re))return{circles:[],offscreen:!1,collisionDetected:Zt}}}}return{circles:!re&&Zt||!Kt?[]:Pe,offscreen:xn,collisionDetected:Zt}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const c=[];let m=1/0,v=1/0,E=-1/0,O=-1/0;for(const le of i){const xe=new f.pointGeometry(le.x+lt,le.y+lt);m=Math.min(m,xe.x),v=Math.min(v,xe.y),E=Math.max(E,xe.x),O=Math.max(O,xe.y),c.push(xe)}const j=this.grid.query(m,v,E,O).concat(this.ignoredGrid.query(m,v,E,O)),Y={},re={};for(const le of j){const xe=le.key;if(void 0===Y[xe.bucketInstanceId]&&(Y[xe.bucketInstanceId]={}),Y[xe.bucketInstanceId][xe.featureIndex])continue;const Ie=[new f.pointGeometry(le.x1,le.y1),new f.pointGeometry(le.x2,le.y1),new f.pointGeometry(le.x2,le.y2),new f.pointGeometry(le.x1,le.y2)];f.polygonIntersectsPolygon(c,Ie)&&(Y[xe.bucketInstanceId][xe.featureIndex]=!0,void 0===re[xe.bucketInstanceId]&&(re[xe.bucketInstanceId]=[]),re[xe.bucketInstanceId].push(xe.featureIndex))}return re}insertCollisionBox(i,c,m,v,E,O){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:E,collisionGroupID:O,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,m,v,E,O){const j=m?this.ignoredGrid:this.grid,Y={bucketInstanceId:v,featureIndex:E,collisionGroupID:O,overlapMode:c};for(let re=0;re<i.length;re+=4)j.insertCircle(Y,i[re],i[re+1],i[re+2])}projectAndGetPerspectiveRatio(i,c,m){const v=[c,m,0,1];return ye(v,v,i),{point:new f.pointGeometry((v[0]/v[3]+1)/2*this.transform.width+lt,(-v[1]/v[3]+1)/2*this.transform.height+lt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(i,c,m,v){return m<lt||i>=this.screenRightBoundary||v<lt||c>this.screenBottomBoundary}isInsideGrid(i,c,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=f.identity([]);return f.translate(i,i,[-100,-100,0]),i}}function fn(_,i,c){return i*(f.EXTENT/(_.tileSize*Math.pow(2,c-_.tileID.overscaledZ)))}class bi{constructor(i,c,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return 0===this.opacity&&!this.placed}}class Ui{constructor(i,c,m,v,E){this.text=new bi(i?i.text:null,c,m,E),this.icon=new bi(i?i.icon:null,c,v,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tr{constructor(i,c,m){this.text=i,this.icon=c,this.skipFade=m}}class St{constructor(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]}}class it{constructor(i,c,m,v,E){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=E}}class J{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[i]}}function F(_,i,c,m,v){const{horizontalAlign:E,verticalAlign:O}=f.getAnchorAlignment(_),j=-(E-.5)*i,Y=-(O-.5)*c,re=f.evaluateVariableOffset(_,m);return new f.pointGeometry(j+re[0]*v,Y+re[1]*v)}function K(_,i,c,m,v,E){const{x1:O,x2:j,y1:Y,y2:re,anchorPointX:le,anchorPointY:xe}=_,Ie=new f.pointGeometry(i,c);return m&&Ie._rotate(v?E:-E),{x1:O+Ie.x,y1:Y+Ie.y,x2:j+Ie.x,y2:re+Ie.y,anchorPointX:le,anchorPointY:xe}}class ge{constructor(i,c,m,v){this.transform=i.clone(),this.collisionIndex=new Pt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new J(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,m,v){const E=m.getBucket(c),O=m.latestFeatureIndex;if(!E||!O||c.id!==E.layerIds[0])return;const j=m.collisionBoxArray,Y=E.layers[0].layout,re=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),le=m.tileSize/f.EXTENT,xe=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),Ie="map"===Y.get("text-pitch-alignment"),Ze="map"===Y.get("text-rotation-alignment"),Pe=fn(m,1,this.transform.zoom),Ge=_n(xe,Ie,Ze,this.transform,Pe);let mt=null;if(Ie){const At=Vn(xe,Ie,Ze,this.transform,Pe);mt=f.multiply([],this.transform.labelPlaneMatrix,At)}this.retainedQueryData[E.bucketInstanceId]=new it(E.bucketInstanceId,O,E.sourceLayerIndex,E.index,m.tileID);const vt={bucket:E,layout:Y,posMatrix:xe,textLabelPlaneMatrix:Ge,labelToScreenMatrix:mt,scale:re,textPixelRatio:le,holdingForFade:m.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(v)for(const At of E.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:$t,symbolInstanceEnd:Zt}=At;i.push({sortKey:xt,symbolInstanceStart:$t,symbolInstanceEnd:Zt,parameters:vt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(i,c,m,v,E,O,j,Y,re,le,xe,Ie,Ze,Pe,Ge){const mt=[Ie.textOffset0,Ie.textOffset1],vt=F(i,m,v,mt,E),At=this.collisionIndex.placeCollisionBox(K(c,vt.x,vt.y,O,j,this.transform.angle),xe,Y,re,le.predicate);if((!Ge||0!==this.collisionIndex.placeCollisionBox(K(Ge,vt.x,vt.y,O,j,this.transform.angle),xe,Y,re,le.predicate).box.length)&&At.box.length>0){let xt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID].text&&(xt=this.prevPlacement.variableOffsets[Ie.crossTileID].anchor),this.variableOffsets[Ie.crossTileID]={textOffset:mt,width:m,height:v,anchor:i,textBoxScale:E,prevAnchor:xt},this.markUsedJustification(Ze,i,Ie,Pe),Ze.allowVerticalPlacement&&(this.markUsedOrientation(Ze,Pe,Ie),this.placedOrientations[Ie.crossTileID]=Pe),{shift:vt,placedGlyphBoxes:At}}}placeLayerBucketPart(i,c,m){const{bucket:v,layout:E,posMatrix:O,textLabelPlaneMatrix:j,labelToScreenMatrix:Y,textPixelRatio:re,holdingForFade:le,collisionBoxArray:xe,partiallyEvaluatedTextSize:Ie,collisionGroup:Ze}=i.parameters,Pe=E.get("text-optional"),Ge=E.get("icon-optional"),mt=f.getOverlapMode(E,"text-overlap","text-allow-overlap"),vt="always"===mt,At=f.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),xt="always"===At,$t="map"===E.get("text-rotation-alignment"),Zt="map"===E.get("text-pitch-alignment"),Kt="none"!==E.get("icon-text-fit"),xn="viewport-y"===E.get("symbol-z-order"),On=vt&&(xt||!v.hasIconData()||Ge),Jt=xt&&(vt||!v.hasTextData()||Pe);!v.collisionArrays&&xe&&v.deserializeCollisionBoxes(xe);const Wn=(Gn,ki)=>{if(c[Gn.crossTileID])return;if(le)return void(this.placements[Gn.crossTileID]=new tr(!1,!1,!1));let nr=!1,Xi=!1,dr=!0,oo=null,$i={box:null,offscreen:null},vr={box:null,offscreen:null},Er=null,Ir=null,vs=null,Xo=0,Qs=0,Na=0;ki.textFeatureIndex?Xo=ki.textFeatureIndex:Gn.useRuntimeCollisionCircles&&(Xo=Gn.featureIndex),ki.verticalTextFeatureIndex&&(Qs=ki.verticalTextFeatureIndex);const bs=ki.textBox;if(bs){const js=xr=>{let fo=f.WritingMode.horizontal;if(v.allowVerticalPlacement&&!xr&&this.prevPlacement){const Oo=this.prevPlacement.placedOrientations[Gn.crossTileID];Oo&&(this.placedOrientations[Gn.crossTileID]=Oo,fo=Oo,this.markUsedOrientation(v,fo,Gn))}return fo},gr=(xr,fo)=>{if(v.allowVerticalPlacement&&Gn.numVerticalGlyphVertices>0&&ki.verticalTextBox){for(const Oo of v.writingModes)if(Oo===f.WritingMode.vertical?($i=fo(),vr=$i):$i=xr(),$i&&$i.box&&$i.box.length)break}else $i=xr()};if(E.get("text-variable-anchor")){let xr=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Gn.crossTileID]){const Xr=this.prevPlacement.variableOffsets[Gn.crossTileID];xr.indexOf(Xr.anchor)>0&&(xr=xr.filter(Hs=>Hs!==Xr.anchor),xr.unshift(Xr.anchor))}const fo=(Xr,Hs,ea)=>{const Ba=Xr.x2-Xr.x1,Rc=Xr.y2-Xr.y1,dc=Gn.textBoxScale,_u=Kt&&"never"===At?Hs:null;let Xa={box:[],offscreen:!1};const hc="never"!==mt?2*xr.length:xr.length;for(let Rs=0;Rs<hc;++Rs){const za=this.attemptAnchorPlacement(xr[Rs%xr.length],Xr,Ba,Rc,dc,$t,Zt,re,O,Ze,Rs>=xr.length?mt:"never",Gn,v,ea,_u);if(za&&(Xa=za.placedGlyphBoxes,Xa&&Xa.box&&Xa.box.length)){nr=!0,oo=za.shift;break}}return Xa};gr(()=>fo(bs,ki.iconBox,f.WritingMode.horizontal),()=>{const Xr=ki.verticalTextBox;return v.allowVerticalPlacement&&!($i&&$i.box&&$i.box.length)&&Gn.numVerticalGlyphVertices>0&&Xr?fo(Xr,ki.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),$i&&(nr=$i.box,dr=$i.offscreen);const Oo=js($i&&$i.box);if(!nr&&this.prevPlacement){const Xr=this.prevPlacement.variableOffsets[Gn.crossTileID];Xr&&(this.variableOffsets[Gn.crossTileID]=Xr,this.markUsedJustification(v,Xr.anchor,Gn,Oo))}}else{const xr=(fo,Oo)=>{const Xr=this.collisionIndex.placeCollisionBox(fo,mt,re,O,Ze.predicate);return Xr&&Xr.box&&Xr.box.length&&(this.markUsedOrientation(v,Oo,Gn),this.placedOrientations[Gn.crossTileID]=Oo),Xr};gr(()=>xr(bs,f.WritingMode.horizontal),()=>{const fo=ki.verticalTextBox;return v.allowVerticalPlacement&&Gn.numVerticalGlyphVertices>0&&fo?xr(fo,f.WritingMode.vertical):{box:null,offscreen:null}}),js($i&&$i.box&&$i.box.length)}}if(Er=$i,nr=Er&&Er.box&&Er.box.length>0,dr=Er&&Er.offscreen,Gn.useRuntimeCollisionCircles){const js=v.text.placedSymbolArray.get(Gn.centerJustifiedTextSymbolIndex),gr=f.evaluateSizeForFeature(v.textSizeData,Ie,js),xr=E.get("text-padding");Ir=this.collisionIndex.placeCollisionCircles(mt,js,v.lineVertexArray,v.glyphOffsetArray,gr,O,j,Y,m,Zt,Ze.predicate,Gn.collisionCircleDiameter,xr),nr=vt||Ir.circles.length>0&&!Ir.collisionDetected,dr=dr&&Ir.offscreen}if(ki.iconFeatureIndex&&(Na=ki.iconFeatureIndex),ki.iconBox){const js=gr=>{const xr=Kt&&oo?K(gr,oo.x,oo.y,$t,Zt,this.transform.angle):gr;return this.collisionIndex.placeCollisionBox(xr,At,re,O,Ze.predicate)};vr&&vr.box&&vr.box.length&&ki.verticalIconBox?(vs=js(ki.verticalIconBox),Xi=vs.box.length>0):(vs=js(ki.iconBox),Xi=vs.box.length>0),dr=dr&&vs.offscreen}const Ia=Pe||0===Gn.numHorizontalGlyphVertices&&0===Gn.numVerticalGlyphVertices,pl=Ge||0===Gn.numIconVertices;if(Ia||pl?pl?Ia||(Xi=Xi&&nr):nr=Xi&&nr:Xi=nr=Xi&&nr,nr&&Er&&Er.box&&this.collisionIndex.insertCollisionBox(Er.box,mt,E.get("text-ignore-placement"),v.bucketInstanceId,vr&&vr.box&&Qs?Qs:Xo,Ze.ID),Xi&&vs&&this.collisionIndex.insertCollisionBox(vs.box,At,E.get("icon-ignore-placement"),v.bucketInstanceId,Na,Ze.ID),Ir&&(nr&&this.collisionIndex.insertCollisionCircles(Ir.circles,mt,E.get("text-ignore-placement"),v.bucketInstanceId,Xo,Ze.ID),m)){const js=v.bucketInstanceId;let gr=this.collisionCircleArrays[js];void 0===gr&&(gr=this.collisionCircleArrays[js]=new St);for(let xr=0;xr<Ir.circles.length;xr+=4)gr.circles.push(Ir.circles[xr+0]),gr.circles.push(Ir.circles[xr+1]),gr.circles.push(Ir.circles[xr+2]),gr.circles.push(Ir.collisionDetected?1:0)}this.placements[Gn.crossTileID]=new tr(nr||On,Xi||Jt,dr||v.justReloaded),c[Gn.crossTileID]=!0};if(xn){const Gn=v.getSortedSymbolIndexes(this.transform.angle);for(let ki=Gn.length-1;ki>=0;--ki){const nr=Gn[ki];Wn(v.symbolInstances.get(nr),v.collisionArrays[nr])}}else for(let Gn=i.symbolInstanceStart;Gn<i.symbolInstanceEnd;Gn++)Wn(v.symbolInstances.get(Gn),v.collisionArrays[Gn]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Gn=this.collisionCircleArrays[v.bucketInstanceId];f.invert(Gn.invProjMatrix,O),Gn.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,c,m,v){let E;E=v===f.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(c)];const O=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const j of O)j>=0&&(i.text.placedSymbolArray.get(j).crossTileID=E>=0&&j!==E?0:m.crossTileID)}markUsedOrientation(i,c,m){const v=c===f.WritingMode.horizontal||c===f.WritingMode.horizontalOnly?c:0,E=c===f.WritingMode.vertical?c:0,O=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const j of O)i.text.placedSymbolArray.get(j).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,E=c?c.opacities:{},O=c?c.variableOffsets:{},j=c?c.placedOrientations:{};for(const Y in this.placements){const re=this.placements[Y],le=E[Y];le?(this.opacities[Y]=new Ui(le,v,re.text,re.icon),m=m||re.text!==le.text.placed||re.icon!==le.icon.placed):(this.opacities[Y]=new Ui(null,v,re.text,re.icon,re.skipFade),m=m||re.text||re.icon)}for(const Y in E){const re=E[Y];if(!this.opacities[Y]){const le=new Ui(re,v,!1,!1);le.isHidden()||(this.opacities[Y]=le,m=m||re.text.placed||re.icon.placed)}}for(const Y in O)this.variableOffsets[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.variableOffsets[Y]=O[Y]);for(const Y in j)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=j[Y]);m?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const m={};for(const v of c){const E=v.getBucket(i);E&&v.latestFeatureIndex&&i.id===E.layerIds[0]&&this.updateBucketOpacities(E,m,v.collisionBoxArray)}}updateBucketOpacities(i,c,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,E=new Ui(null,0,!1,!1,!0),O=v.get("text-allow-overlap"),j=v.get("icon-allow-overlap"),Y=v.get("text-variable-anchor"),re="map"===v.get("text-rotation-alignment"),le="map"===v.get("text-pitch-alignment"),xe="none"!==v.get("icon-text-fit"),Ie=new Ui(null,0,O&&(j||!i.hasIconData()||v.get("icon-optional")),j&&(O||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const Ze=(Pe,Ge,mt)=>{for(let vt=0;vt<Ge/4;vt++)Pe.opacityVertexArray.emplaceBack(mt)};for(let Pe=0;Pe<i.symbolInstances.length;Pe++){const Ge=i.symbolInstances.get(Pe),{numHorizontalGlyphVertices:mt,numVerticalGlyphVertices:vt,crossTileID:At}=Ge;let xt=this.opacities[At];c[At]?xt=E:xt||(xt=Ie,this.opacities[At]=xt),c[At]=!0;const $t=Ge.numIconVertices>0,Zt=this.placedOrientations[Ge.crossTileID],Kt=Zt===f.WritingMode.vertical,xn=Zt===f.WritingMode.horizontal||Zt===f.WritingMode.horizontalOnly;if(mt>0||vt>0){const On=Rt(xt.text);Ze(i.text,mt,Kt?Vt:On),Ze(i.text,vt,xn?Vt:On);const Jt=xt.text.isHidden();[Ge.rightJustifiedTextSymbolIndex,Ge.centerJustifiedTextSymbolIndex,Ge.leftJustifiedTextSymbolIndex].forEach(ki=>{ki>=0&&(i.text.placedSymbolArray.get(ki).hidden=Jt||Kt?1:0)}),Ge.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Ge.verticalPlacedTextSymbolIndex).hidden=Jt||xn?1:0);const Wn=this.variableOffsets[Ge.crossTileID];Wn&&this.markUsedJustification(i,Wn.anchor,Ge,Zt);const Gn=this.placedOrientations[Ge.crossTileID];Gn&&(this.markUsedJustification(i,"left",Ge,Gn),this.markUsedOrientation(i,Gn,Ge))}if($t){const On=Rt(xt.icon),Jt=!(xe&&Ge.verticalPlacedIconSymbolIndex&&Kt);Ge.placedIconSymbolIndex>=0&&(Ze(i.icon,Ge.numIconVertices,Jt?On:Vt),i.icon.placedSymbolArray.get(Ge.placedIconSymbolIndex).hidden=xt.icon.isHidden()),Ge.verticalPlacedIconSymbolIndex>=0&&(Ze(i.icon,Ge.numVerticalIconVertices,Jt?Vt:On),i.icon.placedSymbolArray.get(Ge.verticalPlacedIconSymbolIndex).hidden=xt.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const On=i.collisionArrays[Pe];if(On){let Jt=new f.pointGeometry(0,0);if(On.textBox||On.verticalTextBox){let Gn=!0;if(Y){const ki=this.variableOffsets[At];ki?(Jt=F(ki.anchor,ki.width,ki.height,ki.textOffset,ki.textBoxScale),re&&Jt._rotate(le?this.transform.angle:-this.transform.angle)):Gn=!1}On.textBox&&Ee(i.textCollisionBox.collisionVertexArray,xt.text.placed,!Gn||Kt,Jt.x,Jt.y),On.verticalTextBox&&Ee(i.textCollisionBox.collisionVertexArray,xt.text.placed,!Gn||xn,Jt.x,Jt.y)}const Wn=Boolean(!xn&&On.verticalIconBox);On.iconBox&&Ee(i.iconCollisionBox.collisionVertexArray,xt.icon.placed,Wn,xe?Jt.x:0,xe?Jt.y:0),On.verticalIconBox&&Ee(i.iconCollisionBox.collisionVertexArray,xt.icon.placed,!Wn,xe?Jt.x:0,xe?Jt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Pe.invProjMatrix,i.placementViewportMatrix=Pe.viewportMatrix,i.collisionCircleArray=Pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Ee(_,i,c,m,v){_.emplaceBack(i?1:0,c?1:0,m||0,v||0),_.emplaceBack(i?1:0,c?1:0,m||0,v||0),_.emplaceBack(i?1:0,c?1:0,m||0,v||0),_.emplaceBack(i?1:0,c?1:0,m||0,v||0)}const Re=Math.pow(2,25),Ke=Math.pow(2,24),$e=Math.pow(2,17),nt=Math.pow(2,16),at=Math.pow(2,9),Nt=Math.pow(2,8),rn=Math.pow(2,1);function Rt(_){if(0===_.opacity&&!_.placed)return 0;if(1===_.opacity&&_.placed)return 4294967295;const i=_.placed?1:0,c=Math.floor(127*_.opacity);return c*Re+i*Ke+c*$e+i*nt+c*at+i*Nt+c*rn+i}const Vt=0;class an{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,m,v,E){const O=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(O,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((j,Y)=>j.sortKey-Y.sortKey));this._currentPartIndex<O.length;)if(c.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,E())return!0;return!1}}class Cn{constructor(i,c,m,v,E,O,j){this.placement=new ge(i,E,O,j),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,m){const v=f.exported.now(),E=()=>{const O=f.exported.now()-v;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=c[i[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if("symbol"===O.type&&(!O.minzoom||O.minzoom<=j)&&(!O.maxzoom||O.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new an(O)),this._inProgressLayer.continuePlacement(m[O.source],this.placement,this._showCollisionBoxes,O,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Un=512/f.EXTENT/2;class Li{constructor(i,c,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<c.length;v++){const E=c.get(v),O=E.key;this.indexedSymbolInstances[O]||(this.indexedSymbolInstances[O]=[]),this.indexedSymbolInstances[O].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,i)})}}getScaledCoordinates(i,c){const m=Un/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*f.EXTENT+i.anchorX)*m),y:Math.floor((c.canonical.y*f.EXTENT+i.anchorY)*m)}}findMatches(i,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<i.length;E++){const O=i.get(E);if(O.crossTileID)continue;const j=this.indexedSymbolInstances[O.key];if(!j)continue;const Y=this.getScaledCoordinates(O,c);for(const re of j)if(Math.abs(re.coord.x-Y.x)<=v&&Math.abs(re.coord.y-Y.y)<=v&&!m[re.crossTileID]){m[re.crossTileID]=!0,O.crossTileID=re.crossTileID;break}}}}class ui{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(0!==c)for(const m in this.indexes){const v=this.indexes[m],E={};for(const O in v){const j=v[O];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+c),E[j.tileID.key]=j}this.indexes[m]=E}this.lng=i}addBucket(i,c,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const E in this.indexes){const O=this.indexes[E];if(Number(E)>i.overscaledZ)for(const j in O){const Y=O[j];Y.tileID.isChildOf(i)&&Y.findMatches(c.symbolInstances,i,v)}else{const j=O[i.scaledTo(Number(E)).key];j&&j.findMatches(c.symbolInstances,i,v)}}for(let E=0;E<c.symbolInstances.length;E++){const O=c.symbolInstances.get(E);O.crossTileID||(O.crossTileID=m.generate(),v[O.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Li(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const m in c.indexedSymbolInstances)for(const v of c.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const E in v)i[v[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[E]),delete v[E],c=!0)}return c}}class Rn{constructor(){this.layerIndexes={},this.crossTileIDs=new ui,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,m){let v=this.layerIndexes[i.id];void 0===v&&(v=this.layerIndexes[i.id]=new xi);let E=!1;const O={};v.handleWrapJump(m);for(const j of c){const Y=j.getBucket(i);Y&&i.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(j.tileID,Y,this.crossTileIDs)&&(E=!0),O[Y.bucketInstanceId]=!0)}return v.removeStaleBuckets(O)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const pi=(_,i)=>f.emitValidationErrors(_,i&&i.filter(c=>"source.canvas"!==c.identifier)),ar=f.pick(ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),si=f.pick(ht,["setCenter","setZoom","setBearing","setPitch"]),wr=function(){const _={},i=f.spec.$version;for(const c in f.spec.$root){const m=f.spec.$root[c];if(m.required){let v=null;v="version"===c?i:"array"===m.type?[]:{},null!=v&&(_[c]=v)}}return _}();class Ji extends f.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new st(Kn(),this),this.imageManager=new Ut,this.imageManager.setEventedParent(this),this.glyphManager=new ke(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new tn(256,512),this.crossTileSymbolIndex=new Rn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());const m=this;this._rtlTextPluginCallback=Ji.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(E,O)=>{if(f.triggerPluginCompletionEvent(E),O&&O.every(j=>j))for(const j in m.sourceCaches)m.sourceCaches[j].reload()})}),this.on("data",v=>{if("source"!==v.dataType||"metadata"!==v.sourceDataType)return;const E=this.sourceCaches[v.sourceId];if(!E)return;const O=E.getSource();if(O&&O.vectorLayerIds)for(const j in this._layers){const Y=this._layers[j];Y.source===O.id&&this._validateLayer(Y)}})}loadURL(i,c={}){this.fire(new f.Event("dataloading",{dataType:"style"}));const m="boolean"!=typeof c.validate||c.validate,v=this.map._requestManager.transformRequest(i,f.ResourceType.Style);this._request=f.getJSON(v,(E,O)=>{this._request=null,E?this.fire(new f.ErrorEvent(E)):O&&this._load(O,m)})}loadJSON(i,c={}){this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.exported.frame(()=>{this._request=null,this._load(i,!1!==c.validate)})}loadEmpty(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(wr,!1)}_load(i,c){if(c&&pi(this,f.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const m=Zn(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=f.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new zt(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(c,m,v,E){let O,j,Y;const re=v>1?"@2x":"";let le=f.getJSON(m.transformRequest(m.normalizeSpriteURL(c,re,".json"),f.ResourceType.SpriteJSON),(Ze,Pe)=>{le=null,Y||(Y=Ze,O=Pe,Ie())}),xe=f.getImage(m.transformRequest(m.normalizeSpriteURL(c,re,".png"),f.ResourceType.SpriteImage),(Ze,Pe)=>{xe=null,Y||(Y=Ze,j=Pe,Ie())});function Ie(){if(Y)E(Y);else if(O&&j){const Ze=f.exported.getImageData(j),Pe={};for(const Ge in O){const{width:mt,height:vt,x:At,y:xt,sdf:$t,pixelRatio:Zt,stretchX:Kt,stretchY:xn,content:On}=O[Ge],Jt=new f.RGBAImage({width:mt,height:vt});f.RGBAImage.copy(Ze,Jt,{x:At,y:xt},{x:0,y:0},{width:mt,height:vt}),Pe[Ge]={data:Jt,pixelRatio:Zt,sdf:$t,stretchX:Kt,stretchY:xn,content:On}}E(null,Pe)}}return{cancel(){le&&(le.cancel(),le=null),xe&&(xe.cancel(),xe=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(c,m)=>{if(this._spriteRequest=null,c)this.fire(new f.ErrorEvent(c));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const m=i.sourceLayer;if(!m)return;const v=c.getSource();("geojson"===v.type||v.vectorLayerIds&&-1===v.vectorLayerIds.indexOf(m))&&this.fire(new f.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const m of i){const v=this._layers[m];"custom"!==v.type&&c.push(v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(v.length||E.length)&&this._updateWorkerLayers(v,E);for(const O in this._updatedSources){const j=this._updatedSources[O];"reload"===j?this._reloadSource(O):"clear"===j&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const E=this.sourceCaches[v];m[v]=E.used,E.used=!1}for(const v of this._order){const E=this._layers[v];E.recalculate(i,this._availableImages),!E.isHidden(i.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const v in m){const E=this.sourceCaches[v];m[v]!==E.used&&E.fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new f.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),pi(this,f.validateStyle(i)))return!1;(i=f.clone$1(i)).layers=Zn(i.layers);const c=function(v,E){if(!v)return[{command:ht.setStyle,args:[E]}];let O=[];try{if(!Le(v.version,E.version))return[{command:ht.setStyle,args:[E]}];Le(v.center,E.center)||O.push({command:ht.setCenter,args:[E.center]}),Le(v.zoom,E.zoom)||O.push({command:ht.setZoom,args:[E.zoom]}),Le(v.bearing,E.bearing)||O.push({command:ht.setBearing,args:[E.bearing]}),Le(v.pitch,E.pitch)||O.push({command:ht.setPitch,args:[E.pitch]}),Le(v.sprite,E.sprite)||O.push({command:ht.setSprite,args:[E.sprite]}),Le(v.glyphs,E.glyphs)||O.push({command:ht.setGlyphs,args:[E.glyphs]}),Le(v.transition,E.transition)||O.push({command:ht.setTransition,args:[E.transition]}),Le(v.light,E.light)||O.push({command:ht.setLight,args:[E.light]});const j={},Y=[];!function(le,xe,Ie,Ze){let Pe;for(Pe in xe=xe||{},le=le||{})Object.prototype.hasOwnProperty.call(le,Pe)&&(Object.prototype.hasOwnProperty.call(xe,Pe)||U(Pe,Ie,Ze));for(Pe in xe)Object.prototype.hasOwnProperty.call(xe,Pe)&&(Object.prototype.hasOwnProperty.call(le,Pe)?Le(le[Pe],xe[Pe])||("geojson"===le[Pe].type&&"geojson"===xe[Pe].type&&B(le,xe,Pe)?Ie.push({command:ht.setGeoJSONSourceData,args:[Pe,xe[Pe].data]}):R(Pe,xe,Ie,Ze)):$(Pe,xe,Ie))}(v.sources,E.sources,Y,j);const re=[];v.layers&&v.layers.forEach(le=>{j[le.source]?O.push({command:ht.removeLayer,args:[le.id]}):re.push(le)}),O=O.concat(Y),function(le,xe,Ie){xe=xe||[];const Ze=(le=le||[]).map(fe),Pe=xe.map(fe),Ge=le.reduce(tt,{}),mt=xe.reduce(tt,{}),vt=Ze.slice(),At=Object.create(null);let xt,$t,Zt,Kt,xn,On,Jt;for(xt=0,$t=0;xt<Ze.length;xt++)Zt=Ze[xt],Object.prototype.hasOwnProperty.call(mt,Zt)?$t++:(Ie.push({command:ht.removeLayer,args:[Zt]}),vt.splice(vt.indexOf(Zt,$t),1));for(xt=0,$t=0;xt<Pe.length;xt++)Zt=Pe[Pe.length-1-xt],vt[vt.length-1-xt]!==Zt&&(Object.prototype.hasOwnProperty.call(Ge,Zt)?(Ie.push({command:ht.removeLayer,args:[Zt]}),vt.splice(vt.lastIndexOf(Zt,vt.length-$t),1)):$t++,On=vt[vt.length-xt],Ie.push({command:ht.addLayer,args:[mt[Zt],On]}),vt.splice(vt.length-xt,0,Zt),At[Zt]=!0);for(xt=0;xt<Pe.length;xt++)if(Zt=Pe[xt],Kt=Ge[Zt],xn=mt[Zt],!At[Zt]&&!Le(Kt,xn))if(Le(Kt.source,xn.source)&&Le(Kt["source-layer"],xn["source-layer"])&&Le(Kt.type,xn.type)){for(Jt in ie(Kt.layout,xn.layout,Ie,Zt,null,ht.setLayoutProperty),ie(Kt.paint,xn.paint,Ie,Zt,null,ht.setPaintProperty),Le(Kt.filter,xn.filter)||Ie.push({command:ht.setFilter,args:[Zt,xn.filter]}),Le(Kt.minzoom,xn.minzoom)&&Le(Kt.maxzoom,xn.maxzoom)||Ie.push({command:ht.setLayerZoomRange,args:[Zt,xn.minzoom,xn.maxzoom]}),Kt)Object.prototype.hasOwnProperty.call(Kt,Jt)&&"layout"!==Jt&&"paint"!==Jt&&"filter"!==Jt&&"metadata"!==Jt&&"minzoom"!==Jt&&"maxzoom"!==Jt&&(0===Jt.indexOf("paint.")?ie(Kt[Jt],xn[Jt],Ie,Zt,Jt.slice(6),ht.setPaintProperty):Le(Kt[Jt],xn[Jt])||Ie.push({command:ht.setLayerProperty,args:[Zt,Jt,xn[Jt]]}));for(Jt in xn)Object.prototype.hasOwnProperty.call(xn,Jt)&&!Object.prototype.hasOwnProperty.call(Kt,Jt)&&"layout"!==Jt&&"paint"!==Jt&&"filter"!==Jt&&"metadata"!==Jt&&"minzoom"!==Jt&&"maxzoom"!==Jt&&(0===Jt.indexOf("paint.")?ie(Kt[Jt],xn[Jt],Ie,Zt,Jt.slice(6),ht.setPaintProperty):Le(Kt[Jt],xn[Jt])||Ie.push({command:ht.setLayerProperty,args:[Zt,Jt,xn[Jt]]}))}else Ie.push({command:ht.removeLayer,args:[Zt]}),On=vt[vt.lastIndexOf(Zt)+1],Ie.push({command:ht.addLayer,args:[xn,On]})}(re,E.layers,O)}catch(j){console.warn("Unable to compute style diff:",j),O=[{command:ht.setStyle,args:[E]}]}return O}(this.serialize(),i).filter(v=>!(v.command in si));if(0===c.length)return!1;const m=c.filter(v=>!(v.command in ar));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return c.forEach(v=>{"setTransition"!==v.command&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new f.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new f.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,m={}){if(this._checkLoaded(),void 0!==this.sourceCaches[i])throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(f.validateStyle.source,`sources.${i}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[i]=new on(i,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i})),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),void 0===this.sourceCaches[i])throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new f.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){this._checkLoaded(),this.sourceCaches[i].getSource().setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new f.ErrorEvent(new Error(`Layer "${v}" already exists on this map.`)));let E;if("custom"===i.type){if(pi(this,f.validateCustomStyleLayer(i)))return;E=f.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(v,i.source),i=f.clone$1(i),i=f.extend(i,{source:v})),this._validate(f.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;E=f.createStyleLayer(i),this._validateLayer(E),E.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[E.id]=E.serialize()}const O=c?this._order.indexOf(c):this._order.length;if(c&&-1===O)this.fire(new f.ErrorEvent(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(O,0,v),this._layerOrderChanged=!0,this._layers[v]=E,this._removedLayers[v]&&E.source&&"custom"!==E.type){const j=this._removedLayers[v];delete this._removedLayers[v],j.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new f.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&-1===v?this.fire(new f.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new f.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===m||(null!=c&&(v.minzoom=c),null!=m&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new f.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!Le(v.filter,c))return null==c?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(f.validateStyle.filter,`layers.${v.id}.filter`,c,null,m)||(v.filter=f.clone$1(c),this._updateLayer(v)))}else this.fire(new f.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return f.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?Le(E.getLayoutProperty(c),m)||(E.setLayoutProperty(c,m,v),this._updateLayer(E)):this.fire(new f.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const m=this.getLayer(i);if(m)return m.getLayoutProperty(c);this.fire(new f.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?Le(E.getPaintProperty(c),m)||(E.setPaintProperty(c,m,v)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new f.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const m=i.source,v=i.sourceLayer,E=this.sourceCaches[m];if(void 0===E)return void this.fire(new f.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const O=E.getSource().type;"geojson"===O&&v?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==O||v?(void 0===i.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(v,i.id,c)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const m=i.source,v=this.sourceCaches[m];if(void 0===v)return void this.fire(new f.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const E=v.getSource().type,O="vector"===E?i.sourceLayer:void 0;"vector"!==E||O?c&&"string"!=typeof i.id&&"number"!=typeof i.id?this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(O,i.id,c):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,m=i.sourceLayer,v=this.sourceCaches[c];if(void 0!==v)return"vector"!==v.getSource().type||m?(void 0===i.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new f.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>void 0!==i)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&"raster"!==this.sourceCaches[i.source].getSource().type&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=O=>"fill-extrusion"===this._layers[O].type,m={},v=[];for(let O=this._order.length-1;O>=0;O--){const j=this._order[O];if(c(j)){m[j]=O;for(const Y of i){const re=Y[j];if(re)for(const le of re)v.push(le)}}}v.sort((O,j)=>j.intersectionZ-O.intersectionZ);const E=[];for(let O=this._order.length-1;O>=0;O--){const j=this._order[O];if(c(j))for(let Y=v.length-1;Y>=0;Y--){const re=v[Y].feature;if(m[re.layer.id]<O)break;E.push(re),v.pop()}else for(const Y of i){const re=Y[j];if(re)for(const le of re)E.push(le.feature)}}return E}queryRenderedFeatures(i,c,m){c&&c.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of c.layers){const j=this._layers[O];if(!j)return this.fire(new f.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];v[j.source]=!0}}const E=[];c.availableImages=this._availableImages;for(const O in this.sourceCaches)c.layers&&!v[O]||E.push(_i(this.sourceCaches[O],this._layers,this._serializedLayers,i,c,m));return this.placement&&E.push(function(O,j,Y,re,le,xe,Ie){const Ze={},Pe=xe.queryRenderedSymbols(re),Ge=[];for(const mt of Object.keys(Pe).map(Number))Ge.push(Ie[mt]);Ge.sort(kn);for(const mt of Ge){const vt=mt.featureIndex.lookupSymbolFeatures(Pe[mt.bucketInstanceId],j,mt.bucketIndex,mt.sourceLayerIndex,le.filter,le.layers,le.availableImages,O);for(const At in vt){const xt=Ze[At]=Ze[At]||[],$t=vt[At];$t.sort((Zt,Kt)=>{const xn=mt.featureSortOrder;if(xn){const On=xn.indexOf(Zt.featureIndex);return xn.indexOf(Kt.featureIndex)-On}return Kt.featureIndex-Zt.featureIndex});for(const Zt of $t)xt.push(Zt)}}for(const mt in Ze)Ze[mt].forEach(vt=>{const At=vt.feature,xt=Y[O[mt].source].getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=xt});return Ze}(this._layers,this._serializedLayers,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(i,c){c&&c.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[i];return m?function(v,E){const O=v.getRenderableIds().map(re=>v.getTileByID(re)),j=[],Y={};for(let re=0;re<O.length;re++){const le=O[re],xe=le.tileID.canonical.key;Y[xe]||(Y[xe]=!0,le.querySourceFeatures(j,E))}return j}(m,c):[]}addSourceType(i,c,m){return Ji.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(Ji.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const O in i)if(!Le(i[O],m[O])){v=!0;break}if(!v)return;const E={now:f.exported.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(E)}_validate(i,c,m,v,E={}){return(!E||!1!==E.validate)&&pi(this,i.call(f.validateStyle,f.extend({key:c,style:this.serialize(),value:m,styleSpec:f.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const c=this.sourceCaches[i];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,m,v,E=!1){let O=!1,j=!1;const Y={};for(const re of this._order){const le=this._layers[re];if("symbol"!==le.type)continue;if(!Y[le.source]){const Ie=this.sourceCaches[le.source];Y[le.source]=Ie.getRenderableIds(!0).map(Ze=>Ie.getTileByID(Ze)).sort((Ze,Pe)=>Pe.tileID.overscaledZ-Ze.tileID.overscaledZ||(Ze.tileID.isLessThan(Pe.tileID)?-1:1))}const xe=this.crossTileSymbolIndex.addLayer(le,Y[le.source],i.center.lng);O=O||xe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||0===m)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.exported.now(),i.zoom))&&(this.pauseablePlacement=new Cn(i,this._order,E,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.exported.now()),j=!0),O&&this.pauseablePlacement.placement.setStale()),j||O)for(const re of this._order){const le=this._layers[re];"symbol"===le.type&&this.placement.updateLayerOpacities(le,Y[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,m){this.glyphManager.getGlyphs(c.stacks,m)}getResource(i,c,m){return f.makeRequest(c,m)}}Ji.getSourceType=function(_){return ci[_]},Ji.setSourceType=function(_,i){ci[_]=i},Ji.registerForPluginStateChange=f.registerForPluginStateChange;var Bo=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),zo={prelude:Ri("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),background:Ri("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ri("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ri("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Ri("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ri("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Ri("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ri("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ri("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ri("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Ri("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Ri("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Ri("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Ri("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Ri("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Ri("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Ri("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ri("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ri("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:Ri("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:Ri("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Ri("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Ri("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ri("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:Ri("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Ri("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")};function Ri(_,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/attribute ([\w]+) ([\w]+)/g),v=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=E?E.concat(v):v,j={};return{fragmentSource:_=_.replace(c,(Y,re,le,xe,Ie)=>(j[Ie]=!0,"define"===re?`\n#ifndef HAS_UNIFORM_u_${Ie}\nvarying ${le} ${xe} ${Ie};\n#else\nuniform ${le} ${xe} u_${Ie};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Ie}\n    ${le} ${xe} ${Ie} = u_${Ie};\n#endif\n`)),vertexSource:i=i.replace(c,(Y,re,le,xe,Ie)=>{const Ze="float"===xe?"vec2":"vec4",Pe=Ie.match(/color/)?"color":Ze;return j[Ie]?"define"===re?`\n#ifndef HAS_UNIFORM_u_${Ie}\nuniform lowp float u_${Ie}_t;\nattribute ${le} ${Ze} a_${Ie};\nvarying ${le} ${xe} ${Ie};\n#else\nuniform ${le} ${xe} u_${Ie};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${Ie} = a_${Ie};\n#else\n    ${le} ${xe} ${Ie} = u_${Ie};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${Ie} = unpack_mix_${Pe}(a_${Ie}, u_${Ie}_t);\n#else\n    ${le} ${xe} ${Ie} = u_${Ie};\n#endif\n`:"define"===re?`\n#ifndef HAS_UNIFORM_u_${Ie}\nuniform lowp float u_${Ie}_t;\nattribute ${le} ${Ze} a_${Ie};\n#else\nuniform ${le} ${xe} u_${Ie};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${le} ${xe} ${Ie} = a_${Ie};\n#else\n    ${le} ${xe} ${Ie} = u_${Ie};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${le} ${xe} ${Ie} = unpack_mix_${Pe}(a_${Ie}, u_${Ie}_t);\n#else\n    ${le} ${xe} ${Ie} = u_${Ie};\n#endif\n`}),staticAttributes:m,staticUniforms:O}}class co{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,m,v,E,O,j,Y){this.context=i;let re=this.boundPaintVertexBuffers.length!==v.length;for(let le=0;!re&&le<v.length;le++)this.boundPaintVertexBuffers[le]!==v[le]&&(re=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===m&&!re&&this.boundIndexBuffer===E&&this.boundVertexOffset===O&&this.boundDynamicVertexBuffer===j&&this.boundDynamicVertexBuffer2===Y?(i.bindVertexArrayOES.set(this.vao),j&&j.bind(),E&&E.dynamicDraw&&E.bind(),Y&&Y.bind()):this.freshBind(c,m,v,E,O,j,Y)}freshBind(i,c,m,v,E,O,j){let Y;const re=i.numAttributes,le=this.context,xe=le.gl;if(le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=le.extVertexArrayObject.createVertexArrayOES(),le.bindVertexArrayOES.set(this.vao),Y=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=j;else{Y=le.currentNumAttributes||0;for(let Ie=re;Ie<Y;Ie++)xe.disableVertexAttribArray(Ie)}c.enableAttributes(xe,i);for(const Ie of m)Ie.enableAttributes(xe,i);O&&O.enableAttributes(xe,i),j&&j.enableAttributes(xe,i),c.bind(),c.setVertexAttribPointers(xe,i,E);for(const Ie of m)Ie.bind(),Ie.setVertexAttribPointers(xe,i,E);O&&(O.bind(),O.setVertexAttribPointers(xe,i,E)),v&&v.bind(),j&&(j.bind(),j.setVertexAttribPointers(xe,i,E)),le.currentNumAttributes=re}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Vo(_){const i=[];for(let c=0;c<_.length;c++){if(null===_[c])continue;const m=_[c].split(" ");i.push(m.pop())}return i}class _r{constructor(i,c,m,v,E,O){const j=i.gl;this.program=j.createProgram();const Y=Vo(m.staticAttributes),re=v?v.getBinderAttributes():[],le=Y.concat(re),xe=m.staticUniforms?Vo(m.staticUniforms):[],Ie=v?v.getBinderUniforms():[],Ze=xe.concat(Ie),Pe=[];for(const Zt of Ze)Pe.indexOf(Zt)<0&&Pe.push(Zt);const Ge=v?v.defines():[];O&&Ge.push("#define OVERDRAW_INSPECTOR;");const mt=Ge.concat(zo.prelude.fragmentSource,m.fragmentSource).join("\n"),vt=Ge.concat(zo.prelude.vertexSource,m.vertexSource).join("\n"),At=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(At,mt),j.compileShader(At),j.attachShader(this.program,At);const xt=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(xt,vt),j.compileShader(xt),j.attachShader(this.program,xt),this.attributes={};const $t={};this.numAttributes=le.length;for(let Zt=0;Zt<this.numAttributes;Zt++)le[Zt]&&(j.bindAttribLocation(this.program,Zt,le[Zt]),this.attributes[le[Zt]]=Zt);j.linkProgram(this.program),j.deleteShader(xt),j.deleteShader(At);for(let Zt=0;Zt<Pe.length;Zt++){const Kt=Pe[Zt];if(Kt&&!$t[Kt]){const xn=j.getUniformLocation(this.program,Kt);xn&&($t[Kt]=xn)}}this.fixedUniforms=E(i,$t),this.binderUniforms=v?v.getUniforms(i,$t):[]}draw(i,c,m,v,E,O,j,Y,re,le,xe,Ie,Ze,Pe,Ge,mt){const vt=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(E),i.setCullFace(O);for(const xt in this.fixedUniforms)this.fixedUniforms[xt].set(j[xt]);Pe&&Pe.setUniforms(i,this.binderUniforms,Ie,{zoom:Ze});const At={[vt.LINES]:2,[vt.TRIANGLES]:3,[vt.LINE_STRIP]:1}[c];for(const xt of xe.get()){const $t=xt.vaos||(xt.vaos={});($t[Y]||($t[Y]=new co)).bind(i,this,re,Pe?Pe.getPaintVertexBuffers():[],le,xt.vertexOffset,Ge,mt),vt.drawElements(c,xt.primitiveLength*At,vt.UNSIGNED_SHORT,xt.primitiveOffset*At*2)}}}function Zi(_,i,c){const m=1/fn(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,O=E*(c.tileID.canonical.x+c.tileID.wrap*v),j=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[O>>16,j>>16],u_pixel_coord_lower:[65535&O,65535&j]}}const to=(_,i,c,m)=>{const v=i.style.light,E=v.properties.get("position"),O=[E.x,E.y,E.z],j=(re=new f.ARRAY_TYPE(9),f.ARRAY_TYPE!=Float32Array&&(re[1]=0,re[2]=0,re[3]=0,re[5]=0,re[6]=0,re[7]=0),re[0]=1,re[4]=1,re[8]=1,re);var re;"viewport"===v.properties.get("anchor")&&function(re,le){var xe=Math.sin(le),Ie=Math.cos(le);re[0]=Ie,re[1]=xe,re[2]=0,re[3]=-xe,re[4]=Ie,re[5]=0,re[6]=0,re[7]=0,re[8]=1}(j,-i.transform.angle),function(re,le,xe){var Ie=le[0],Ze=le[1],Pe=le[2];re[0]=Ie*xe[0]+Ze*xe[3]+Pe*xe[6],re[1]=Ie*xe[1]+Ze*xe[4]+Pe*xe[7],re[2]=Ie*xe[2]+Ze*xe[5]+Pe*xe[8]}(O,O,j);const Y=v.properties.get("color");return{u_matrix:_,u_lightpos:O,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+c,u_opacity:m}},qo=(_,i,c,m,v,E,O)=>f.extend(to(_,i,c,m),Zi(E,i,O),{u_height_factor:-Math.pow(2,v.overscaledZ)/O.tileSize/8}),Pr=_=>({u_matrix:_}),Yr=(_,i,c,m)=>f.extend(Pr(_),Zi(c,i,m)),Es=(_,i)=>({u_matrix:_,u_world:i}),qs=(_,i,c,m,v)=>f.extend(Yr(_,i,c,m),{u_world:v}),no=(_,i,c,m)=>{const v=_.transform;let E,O;if("map"===m.paint.get("circle-pitch-alignment")){const j=fn(c,1,v.zoom);E=!0,O=[j,j]}else E=!1,O=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+("map"===m.paint.get("circle-pitch-scale")),u_matrix:_.translatePosMatrix(i.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:O}},Ar=(_,i,c)=>{const m=fn(c,1,i.zoom),v=Math.pow(2,i.zoom-c.tileID.overscaledZ),E=c.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[i.pixelsToGLUnits[0]/(m*v),i.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:E}},ns=(_,i,c=1)=>({u_matrix:_,u_color:i,u_overlay:0,u_overlay_scale:c}),is=_=>({u_matrix:_}),xo=(_,i,c,m)=>({u_matrix:_,u_extrude_scale:fn(i,1,c),u_intensity:m});function Kr(_,i){const c=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new f.MercatorCoordinate(0,m/c).toLngLat().lat,new f.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}const Gr=(_,i,c)=>{const m=_.transform;return{u_matrix:Ns(_,i,c),u_ratio:1/fn(i,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Uo=(_,i,c,m)=>f.extend(Gr(_,i,c),{u_image:0,u_image_height:m}),Ds=(_,i,c,m)=>{const v=_.transform,E=rs(i,v);return{u_matrix:Ns(_,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:1/fn(i,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[E,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Fr=(_,i,c,m,v)=>{const E=_.lineAtlas,O=rs(i,_.transform),j="round"===c.layout.get("line-cap"),Y=E.getDash(m.from,j),re=E.getDash(m.to,j),le=Y.width*v.fromScale,xe=re.width*v.toScale;return f.extend(Gr(_,i,c),{u_patternscale_a:[O/le,-Y.height/2],u_patternscale_b:[O/xe,-re.height/2],u_sdfgamma:E.width/(256*Math.min(le,xe)*_.pixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:re.y,u_mix:v.t})};function rs(_,i){return 1/fn(_,1,i.tileZoom)}function Ns(_,i,c){return _.translatePosMatrix(i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Ms=(_,i,c,m,v)=>{return{u_matrix:_,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(O=v.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(E=v.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ss(v.paint.get("raster-hue-rotate"))};var E,O};function Ss(_){_*=Math.PI/180;const i=Math.sin(_),c=Math.cos(_);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Jr=(_,i,c,m,v,E,O,j,Y,re)=>{const le=v.transform;return{u_is_size_zoom_constant:+("constant"===_||"source"===_),u_is_size_feature_constant:+("constant"===_||"camera"===_),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_pitch:le.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:le.width/le.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:O,u_coord_matrix:j,u_is_text:+Y,u_pitch_with_map:+m,u_texsize:re,u_texture:0}},da=(_,i,c,m,v,E,O,j,Y,re,le)=>{const xe=v.transform;return f.extend(Jr(_,i,c,m,v,E,O,j,Y,re),{u_gamma_scale:m?Math.cos(xe._pitch)*xe.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+le})},Bs=(_,i,c,m,v,E,O,j,Y,re)=>f.extend(da(_,i,c,m,v,E,O,j,!0,Y,!0),{u_texsize_icon:re,u_texture_icon:1}),wa=(_,i,c)=>({u_matrix:_,u_opacity:i,u_color:c}),ha=(_,i,c,m,v,E)=>f.extend(function(O,j,Y,re){const le=Y.imageManager.getPattern(O.from.toString()),xe=Y.imageManager.getPattern(O.to.toString()),{width:Ie,height:Ze}=Y.imageManager.getPixelSize(),Pe=Math.pow(2,re.tileID.overscaledZ),Ge=re.tileSize*Math.pow(2,Y.transform.tileZoom)/Pe,mt=Ge*(re.tileID.canonical.x+re.tileID.wrap*Pe),vt=Ge*re.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:le.tl,u_pattern_br_a:le.br,u_pattern_tl_b:xe.tl,u_pattern_br_b:xe.br,u_texsize:[Ie,Ze],u_mix:j.t,u_pattern_size_a:le.displaySize,u_pattern_size_b:xe.displaySize,u_scale_a:j.fromScale,u_scale_b:j.toScale,u_tile_units_to_pixels:1/fn(re,1,Y.transform.tileZoom),u_pixel_coord_upper:[mt>>16,vt>>16],u_pixel_coord_lower:[65535&mt,65535&vt]}}(m,E,c,v),{u_matrix:_,u_opacity:i}),Ys={fillExtrusion:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_lightpos:new f.Uniform3f(_,i.u_lightpos),u_lightintensity:new f.Uniform1f(_,i.u_lightintensity),u_lightcolor:new f.Uniform3f(_,i.u_lightcolor),u_vertical_gradient:new f.Uniform1f(_,i.u_vertical_gradient),u_opacity:new f.Uniform1f(_,i.u_opacity)}),fillExtrusionPattern:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_lightpos:new f.Uniform3f(_,i.u_lightpos),u_lightintensity:new f.Uniform1f(_,i.u_lightintensity),u_lightcolor:new f.Uniform3f(_,i.u_lightcolor),u_vertical_gradient:new f.Uniform1f(_,i.u_vertical_gradient),u_height_factor:new f.Uniform1f(_,i.u_height_factor),u_image:new f.Uniform1i(_,i.u_image),u_texsize:new f.Uniform2f(_,i.u_texsize),u_pixel_coord_upper:new f.Uniform2f(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(_,i.u_pixel_coord_lower),u_scale:new f.Uniform3f(_,i.u_scale),u_fade:new f.Uniform1f(_,i.u_fade),u_opacity:new f.Uniform1f(_,i.u_opacity)}),fill:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix)}),fillPattern:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_image:new f.Uniform1i(_,i.u_image),u_texsize:new f.Uniform2f(_,i.u_texsize),u_pixel_coord_upper:new f.Uniform2f(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(_,i.u_pixel_coord_lower),u_scale:new f.Uniform3f(_,i.u_scale),u_fade:new f.Uniform1f(_,i.u_fade)}),fillOutline:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_world:new f.Uniform2f(_,i.u_world)}),fillOutlinePattern:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_world:new f.Uniform2f(_,i.u_world),u_image:new f.Uniform1i(_,i.u_image),u_texsize:new f.Uniform2f(_,i.u_texsize),u_pixel_coord_upper:new f.Uniform2f(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(_,i.u_pixel_coord_lower),u_scale:new f.Uniform3f(_,i.u_scale),u_fade:new f.Uniform1f(_,i.u_fade)}),circle:(_,i)=>({u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(_,i.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(_,i.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(_,i.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(_,i.u_matrix)}),collisionBox:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(_,i.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(_,i.u_extrude_scale),u_overscale_factor:new f.Uniform1f(_,i.u_overscale_factor)}),collisionCircle:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_inv_matrix:new f.UniformMatrix4f(_,i.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new f.UniformColor(_,i.u_color),u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_overlay:new f.Uniform1i(_,i.u_overlay),u_overlay_scale:new f.Uniform1f(_,i.u_overlay_scale)}),clippingMask:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix)}),heatmap:(_,i)=>({u_extrude_scale:new f.Uniform1f(_,i.u_extrude_scale),u_intensity:new f.Uniform1f(_,i.u_intensity),u_matrix:new f.UniformMatrix4f(_,i.u_matrix)}),heatmapTexture:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_world:new f.Uniform2f(_,i.u_world),u_image:new f.Uniform1i(_,i.u_image),u_color_ramp:new f.Uniform1i(_,i.u_color_ramp),u_opacity:new f.Uniform1f(_,i.u_opacity)}),hillshade:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_image:new f.Uniform1i(_,i.u_image),u_latrange:new f.Uniform2f(_,i.u_latrange),u_light:new f.Uniform2f(_,i.u_light),u_shadow:new f.UniformColor(_,i.u_shadow),u_highlight:new f.UniformColor(_,i.u_highlight),u_accent:new f.UniformColor(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_image:new f.Uniform1i(_,i.u_image),u_dimension:new f.Uniform2f(_,i.u_dimension),u_zoom:new f.Uniform1f(_,i.u_zoom),u_unpack:new f.Uniform4f(_,i.u_unpack)}),line:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_ratio:new f.Uniform1f(_,i.u_ratio),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_ratio:new f.Uniform1f(_,i.u_ratio),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(_,i.u_units_to_pixels),u_image:new f.Uniform1i(_,i.u_image),u_image_height:new f.Uniform1f(_,i.u_image_height)}),linePattern:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_texsize:new f.Uniform2f(_,i.u_texsize),u_ratio:new f.Uniform1f(_,i.u_ratio),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_image:new f.Uniform1i(_,i.u_image),u_units_to_pixels:new f.Uniform2f(_,i.u_units_to_pixels),u_scale:new f.Uniform3f(_,i.u_scale),u_fade:new f.Uniform1f(_,i.u_fade)}),lineSDF:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_ratio:new f.Uniform1f(_,i.u_ratio),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(_,i.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(_,i.u_patternscale_a),u_patternscale_b:new f.Uniform2f(_,i.u_patternscale_b),u_sdfgamma:new f.Uniform1f(_,i.u_sdfgamma),u_image:new f.Uniform1i(_,i.u_image),u_tex_y_a:new f.Uniform1f(_,i.u_tex_y_a),u_tex_y_b:new f.Uniform1f(_,i.u_tex_y_b),u_mix:new f.Uniform1f(_,i.u_mix)}),raster:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_tl_parent:new f.Uniform2f(_,i.u_tl_parent),u_scale_parent:new f.Uniform1f(_,i.u_scale_parent),u_buffer_scale:new f.Uniform1f(_,i.u_buffer_scale),u_fade_t:new f.Uniform1f(_,i.u_fade_t),u_opacity:new f.Uniform1f(_,i.u_opacity),u_image0:new f.Uniform1i(_,i.u_image0),u_image1:new f.Uniform1i(_,i.u_image1),u_brightness_low:new f.Uniform1f(_,i.u_brightness_low),u_brightness_high:new f.Uniform1f(_,i.u_brightness_high),u_saturation_factor:new f.Uniform1f(_,i.u_saturation_factor),u_contrast_factor:new f.Uniform1f(_,i.u_contrast_factor),u_spin_weights:new f.Uniform3f(_,i.u_spin_weights)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new f.Uniform1i(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(_,i.u_is_size_feature_constant),u_size_t:new f.Uniform1f(_,i.u_size_t),u_size:new f.Uniform1f(_,i.u_size),u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_pitch:new f.Uniform1f(_,i.u_pitch),u_rotate_symbol:new f.Uniform1i(_,i.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(_,i.u_aspect_ratio),u_fade_change:new f.Uniform1f(_,i.u_fade_change),u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(_,i.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(_,i.u_coord_matrix),u_is_text:new f.Uniform1i(_,i.u_is_text),u_pitch_with_map:new f.Uniform1i(_,i.u_pitch_with_map),u_texsize:new f.Uniform2f(_,i.u_texsize),u_texture:new f.Uniform1i(_,i.u_texture)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new f.Uniform1i(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(_,i.u_is_size_feature_constant),u_size_t:new f.Uniform1f(_,i.u_size_t),u_size:new f.Uniform1f(_,i.u_size),u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_pitch:new f.Uniform1f(_,i.u_pitch),u_rotate_symbol:new f.Uniform1i(_,i.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(_,i.u_aspect_ratio),u_fade_change:new f.Uniform1f(_,i.u_fade_change),u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(_,i.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(_,i.u_coord_matrix),u_is_text:new f.Uniform1i(_,i.u_is_text),u_pitch_with_map:new f.Uniform1i(_,i.u_pitch_with_map),u_texsize:new f.Uniform2f(_,i.u_texsize),u_texture:new f.Uniform1i(_,i.u_texture),u_gamma_scale:new f.Uniform1f(_,i.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(_,i.u_is_halo)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new f.Uniform1i(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(_,i.u_is_size_feature_constant),u_size_t:new f.Uniform1f(_,i.u_size_t),u_size:new f.Uniform1f(_,i.u_size),u_camera_to_center_distance:new f.Uniform1f(_,i.u_camera_to_center_distance),u_pitch:new f.Uniform1f(_,i.u_pitch),u_rotate_symbol:new f.Uniform1i(_,i.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(_,i.u_aspect_ratio),u_fade_change:new f.Uniform1f(_,i.u_fade_change),u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(_,i.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(_,i.u_coord_matrix),u_is_text:new f.Uniform1i(_,i.u_is_text),u_pitch_with_map:new f.Uniform1i(_,i.u_pitch_with_map),u_texsize:new f.Uniform2f(_,i.u_texsize),u_texsize_icon:new f.Uniform2f(_,i.u_texsize_icon),u_texture:new f.Uniform1i(_,i.u_texture),u_texture_icon:new f.Uniform1i(_,i.u_texture_icon),u_gamma_scale:new f.Uniform1f(_,i.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(_,i.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(_,i.u_is_halo)}),background:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_opacity:new f.Uniform1f(_,i.u_opacity),u_color:new f.UniformColor(_,i.u_color)}),backgroundPattern:(_,i)=>({u_matrix:new f.UniformMatrix4f(_,i.u_matrix),u_opacity:new f.Uniform1f(_,i.u_opacity),u_image:new f.Uniform1i(_,i.u_image),u_pattern_tl_a:new f.Uniform2f(_,i.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(_,i.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(_,i.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(_,i.u_pattern_br_b),u_texsize:new f.Uniform2f(_,i.u_texsize),u_mix:new f.Uniform1f(_,i.u_mix),u_pattern_size_a:new f.Uniform2f(_,i.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(_,i.u_pattern_size_b),u_scale_a:new f.Uniform1f(_,i.u_scale_a),u_scale_b:new f.Uniform1f(_,i.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(_,i.u_tile_units_to_pixels)})};class os{constructor(i,c,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const go={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ra{constructor(i,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const E=i.gl;this.buffer=E.createBuffer(),i.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];void 0!==v&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,m){for(let v=0;v<this.attributes.length;v++){const E=this.attributes[v],O=c.attributes[E.name];void 0!==O&&i.vertexAttribPointer(O,E.components,i[go[E.type]],!1,this.itemSize,E.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fi{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qa extends Fi{getDefault(){return f.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class So extends Fi{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class fs extends Fi{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Yo extends Fi{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Or extends Fi{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class wo extends Fi{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ms extends Fi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class jo extends Fi{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class ss extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class gs extends Fi{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class as extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class zs extends Fi{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class uo extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Ts extends Fi{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Vs extends Fi{getDefault(){return f.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ho extends Fi{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class ls extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class As extends Fi{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Ks extends Fi{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class yr extends Fi{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class pa extends Fi{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Fa extends Fi{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class kr extends Fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class te extends Fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ve extends Fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ne extends Fi{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class De extends Fi{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ut extends Fi{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Yt extends Fi{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class cn extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Hn extends Fi{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class wi extends Fi{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class lr extends wi{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Cr extends wi{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ji{constructor(i,c,m,v){this.context=i,this.width=c,this.height=m;const E=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new lr(i,E),v&&(this.depthAttachment=new Cr(i,E))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class X{constructor(i,c,m){this.blendFunction=i,this.blendColor=c,this.mask=m}}X.Replace=[1,0],X.disabled=new X(X.Replace,f.Color.transparent,[!1,!1,!1,!1]),X.unblended=new X(X.Replace,f.Color.transparent,[!0,!0,!0,!0]),X.alphaBlended=new X([1,771],f.Color.transparent,[!0,!0,!0,!0]);class q{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qa(this),this.clearDepth=new So(this),this.clearStencil=new fs(this),this.colorMask=new Yo(this),this.depthMask=new Or(this),this.stencilMask=new wo(this),this.stencilFunc=new ms(this),this.stencilOp=new jo(this),this.stencilTest=new ss(this),this.depthRange=new gs(this),this.depthTest=new as(this),this.depthFunc=new zs(this),this.blend=new uo(this),this.blendFunc=new Ts(this),this.blendColor=new Vs(this),this.blendEquation=new ho(this),this.cullFace=new ls(this),this.cullFaceSide=new As(this),this.frontFace=new Ks(this),this.program=new yr(this),this.activeTexture=new pa(this),this.viewport=new Fa(this),this.bindFramebuffer=new kr(this),this.bindRenderbuffer=new te(this),this.bindTexture=new ve(this),this.bindVertexBuffer=new ne(this),this.bindElementBuffer=new De(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ut(this),this.pixelStoreUnpack=new Yt(this),this.pixelStoreUnpackPremultiplyAlpha=new cn(this),this.pixelStoreUnpackFlipY=new Hn(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new os(this,i,c)}createVertexBuffer(i,c,m){return new Ra(this,i,c,m)}createRenderbuffer(i,c,m){const v=this.gl,E=v.createRenderbuffer();return this.bindRenderbuffer.set(E),v.renderbufferStorage(v.RENDERBUFFER,i,c,m),this.bindRenderbuffer.set(null),E}createFramebuffer(i,c,m){return new ji(this,i,c,m)}clear({color:i,depth:c}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==c&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m.clear(v)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){Le(i.blendFunction,X.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class N{constructor(i,c,m){this.func=i,this.mask=c,this.range=m}}N.ReadOnly=!1,N.ReadWrite=!0,N.disabled=new N(519,N.ReadOnly,[0,1]);class Lt{constructor(i,c,m,v,E,O){this.test=i,this.ref=c,this.mask=m,this.fail=v,this.depthFail=E,this.pass=O}}Lt.disabled=new Lt({func:519,mask:0},0,0,7680,7680,7680);class Fn{constructor(i,c,m){this.enable=i,this.mode=c,this.frontFace=m}}let hr;function $r(_,i,c,m,v,E,O){const j=_.context,Y=j.gl,re=_.useProgram("collisionBox"),le=[];let xe=0,Ie=0;for(let xt=0;xt<m.length;xt++){const $t=m[xt],Zt=i.getTile($t),Kt=Zt.getBucket(c);if(!Kt)continue;let xn=$t.posMatrix;0===v[0]&&0===v[1]||(xn=_.translatePosMatrix($t.posMatrix,Zt,v,E));const On=O?Kt.textCollisionBox:Kt.iconCollisionBox,Jt=Kt.collisionCircleArray;if(Jt.length>0){const Wn=f.create(),Gn=xn;f.mul(Wn,Kt.placementInvProjMatrix,_.transform.glCoordMatrix),f.mul(Wn,Wn,Kt.placementViewportMatrix),le.push({circleArray:Jt,circleOffset:Ie,transform:Gn,invTransform:Wn}),xe+=Jt.length/4,Ie=xe}On&&re.draw(j,Y.LINES,N.disabled,Lt.disabled,_.colorModeForRenderPass(),Fn.disabled,Ar(xn,_.transform,Zt),c.id,On.layoutVertexBuffer,On.indexBuffer,On.segments,null,_.transform.zoom,null,null,On.collisionVertexBuffer)}if(!O||!le.length)return;const Ze=_.useProgram("collisionCircle"),Pe=new f.CollisionCircleLayoutArray;Pe.resize(4*xe),Pe._trim();let Ge=0;for(const xt of le)for(let $t=0;$t<xt.circleArray.length/4;$t++){const Zt=4*$t,Kt=xt.circleArray[Zt+0],xn=xt.circleArray[Zt+1],On=xt.circleArray[Zt+2],Jt=xt.circleArray[Zt+3];Pe.emplace(Ge++,Kt,xn,On,Jt,0),Pe.emplace(Ge++,Kt,xn,On,Jt,1),Pe.emplace(Ge++,Kt,xn,On,Jt,2),Pe.emplace(Ge++,Kt,xn,On,Jt,3)}(!hr||hr.length<2*xe)&&(hr=function(xt){const $t=2*xt,Zt=new f.QuadTriangleArray;Zt.resize($t),Zt._trim();for(let Kt=0;Kt<$t;Kt++){const xn=6*Kt;Zt.uint16[xn+0]=4*Kt+0,Zt.uint16[xn+1]=4*Kt+1,Zt.uint16[xn+2]=4*Kt+2,Zt.uint16[xn+3]=4*Kt+2,Zt.uint16[xn+4]=4*Kt+3,Zt.uint16[xn+5]=4*Kt+0}return Zt}(xe));const mt=j.createIndexBuffer(hr,!0),vt=j.createVertexBuffer(Pe,f.collisionCircleLayout.members,!0);for(const xt of le){const $t={u_matrix:xt.transform,u_inv_matrix:xt.invTransform,u_camera_to_center_distance:(At=_.transform).cameraToCenterDistance,u_viewport_size:[At.width,At.height]};Ze.draw(j,Y.TRIANGLES,N.disabled,Lt.disabled,_.colorModeForRenderPass(),Fn.disabled,$t,c.id,vt,mt,f.SegmentVector.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,_.transform.zoom,null,null,null)}var At;vt.destroy(),mt.destroy()}Fn.disabled=new Fn(!1,1029,2305),Fn.backCCW=new Fn(!0,1029,2305);const Is=f.identity(new Float32Array(16));function To(_,i,c,m,v,E){const{horizontalAlign:O,verticalAlign:j}=f.getAnchorAlignment(_),Y=-(O-.5)*i,re=-(j-.5)*c,le=f.evaluateVariableOffset(_,m);return new f.pointGeometry((Y/v+le[0])*E,(re/v+le[1])*E)}function yn(_,i,c,m,v,E,O,j,Y,re){const le=_.text.placedSymbolArray,xe=_.text.dynamicLayoutVertexArray,Ie=_.icon.dynamicLayoutVertexArray,Ze={};xe.clear();for(let Pe=0;Pe<le.length;Pe++){const Ge=le.get(Pe),mt=_.allowVerticalPlacement&&!Ge.placedOrientation,vt=Ge.hidden||!Ge.crossTileID||mt?null:m[Ge.crossTileID];if(vt){const At=new f.pointGeometry(Ge.anchorX,Ge.anchorY),xt=yi(At,c?O:E),$t=en(v.cameraToCenterDistance,xt.signedDistanceFromCamera);let Zt=f.evaluateSizeForFeature(_.textSizeData,Y,Ge)*$t/f.ONE_EM;c&&(Zt*=_.tilePixelRatio/j);const{width:Kt,height:xn,anchor:On,textOffset:Jt,textBoxScale:Wn}=vt,Gn=To(On,Kt,xn,Jt,Wn,Zt),ki=c?yi(At.add(Gn),E).point:xt.point.add(i?Gn.rotate(-v.angle):Gn),nr=_.allowVerticalPlacement&&Ge.placedOrientation===f.WritingMode.vertical?Math.PI/2:0;for(let Xi=0;Xi<Ge.numGlyphs;Xi++)f.addDynamicAttributes(xe,ki,nr);re&&Ge.associatedIconIndex>=0&&(Ze[Ge.associatedIconIndex]={shiftedAnchor:ki,angle:nr})}else Ae(Ge.numGlyphs,xe)}if(re){Ie.clear();const Pe=_.icon.placedSymbolArray;for(let Ge=0;Ge<Pe.length;Ge++){const mt=Pe.get(Ge);if(mt.hidden)Ae(mt.numGlyphs,Ie);else{const vt=Ze[Ge];if(vt)for(let At=0;At<mt.numGlyphs;At++)f.addDynamicAttributes(Ie,vt.shiftedAnchor,vt.angle);else Ae(mt.numGlyphs,Ie)}}_.icon.dynamicLayoutVertexBuffer.updateData(Ie)}_.text.dynamicLayoutVertexBuffer.updateData(xe)}function ue(_,i,c){return c.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function M(_,i,c,m,v,E,O,j,Y,re,le,xe){const Ie=_.context,Ze=Ie.gl,Pe=_.transform,Ge="map"===j,mt="map"===Y,vt="viewport"!==j&&"point"!==c.layout.get("symbol-placement"),At=Ge&&!mt&&!vt,xt=!c.layout.get("symbol-sort-key").isConstant();let $t=!1;const Zt=_.depthModeForSublayer(0,N.ReadOnly),Kt=c.layout.get("text-variable-anchor"),xn=[];for(const On of m){const Jt=i.getTile(On),Wn=Jt.getBucket(c);if(!Wn)continue;const Gn=v?Wn.text:Wn.icon;if(!Gn||!Gn.segments.get().length)continue;const ki=Gn.programConfigurations.get(c.id),nr=v||Wn.sdfIcons,Xi=v?Wn.textSizeData:Wn.iconSizeData,dr=mt||0!==Pe.pitch,oo=_.useProgram(ue(nr,v,Wn),ki),$i=f.evaluateSizeForZoom(Xi,Pe.zoom);let vr,Er,Ir,vs,Xo=[0,0],Qs=null;if(v){if(Er=Jt.glyphAtlasTexture,Ir=Ze.LINEAR,vr=Jt.glyphAtlasTexture.size,Wn.iconsInText){Xo=Jt.imageAtlasTexture.size,Qs=Jt.imageAtlasTexture;const ea="composite"===Xi.kind||"camera"===Xi.kind;vs=dr||_.options.rotating||_.options.zooming||ea?Ze.LINEAR:Ze.NEAREST}}else{const ea=1!==c.layout.get("icon-size").constantOr(0)||Wn.iconsNeedLinear;Er=Jt.imageAtlasTexture,Ir=nr||_.options.rotating||_.options.zooming||ea||dr?Ze.LINEAR:Ze.NEAREST,vr=Jt.imageAtlasTexture.size}const Na=fn(Jt,1,_.transform.zoom),bs=_n(On.posMatrix,mt,Ge,_.transform,Na),Ia=Vn(On.posMatrix,mt,Ge,_.transform,Na),pl=Kt&&Wn.hasTextData(),js="none"!==c.layout.get("icon-text-fit")&&pl&&Wn.hasIconData();if(vt){const ea="map"===c.layout.get("text-rotation-alignment");qt(Wn,On.posMatrix,_,v,bs,Ia,mt,re,ea)}const gr=_.translatePosMatrix(On.posMatrix,Jt,E,O),xr=vt||v&&Kt||js?Is:bs,fo=_.translatePosMatrix(Ia,Jt,E,O,!0),Oo=nr&&0!==c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1);let Xr;Xr=nr?Wn.iconsInText?Bs(Xi.kind,$i,At,mt,_,gr,xr,fo,vr,Xo):da(Xi.kind,$i,At,mt,_,gr,xr,fo,v,vr,!0):Jr(Xi.kind,$i,At,mt,_,gr,xr,fo,v,vr);const Hs={program:oo,buffers:Gn,uniformValues:Xr,atlasTexture:Er,atlasTextureIcon:Qs,atlasInterpolation:Ir,atlasInterpolationIcon:vs,isSDF:nr,hasHalo:Oo};if(xt&&Wn.canOverlap){$t=!0;const ea=Gn.segments.get();for(const Ba of ea)xn.push({segments:new f.SegmentVector([Ba]),sortKey:Ba.sortKey,state:Hs})}else xn.push({segments:Gn.segments,sortKey:0,state:Hs})}$t&&xn.sort((On,Jt)=>On.sortKey-Jt.sortKey);for(const On of xn){const Jt=On.state;if(Ie.activeTexture.set(Ze.TEXTURE0),Jt.atlasTexture.bind(Jt.atlasInterpolation,Ze.CLAMP_TO_EDGE),Jt.atlasTextureIcon&&(Ie.activeTexture.set(Ze.TEXTURE1),Jt.atlasTextureIcon&&Jt.atlasTextureIcon.bind(Jt.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE)),Jt.isSDF){const Wn=Jt.uniformValues;Jt.hasHalo&&(Wn.u_is_halo=1,S(Jt.buffers,On.segments,c,_,Jt.program,Zt,le,xe,Wn)),Wn.u_is_halo=0}S(Jt.buffers,On.segments,c,_,Jt.program,Zt,le,xe,Jt.uniformValues)}}function S(_,i,c,m,v,E,O,j,Y){const re=m.context;v.draw(re,re.gl.TRIANGLES,E,O,j,Fn.disabled,Y,c.id,_.layoutVertexBuffer,_.indexBuffer,i,c.paint,m.transform.zoom,_.programConfigurations.get(c.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function H(_,i,c,m,v,E,O){const j=_.context.gl,Y=c.paint.get("fill-pattern"),re=Y&&Y.constantOr(1),le=c.getCrossfadeParameters();let xe,Ie,Ze,Pe,Ge;O?(Ie=re&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=j.LINES):(Ie=re?"fillPattern":"fill",xe=j.TRIANGLES);for(const mt of m){const vt=i.getTile(mt);if(re&&!vt.patternsLoaded())continue;const At=vt.getBucket(c);if(!At)continue;const xt=At.programConfigurations.get(c.id),$t=_.useProgram(Ie,xt);re&&(_.context.activeTexture.set(j.TEXTURE0),vt.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),xt.updatePaintBuffers(le));const Zt=Y.constantOr(null);if(Zt&&vt.imageAtlas){const xn=vt.imageAtlas,On=xn.patternPositions[Zt.to.toString()],Jt=xn.patternPositions[Zt.from.toString()];On&&Jt&&xt.setConstantPatternPositions(On,Jt)}const Kt=_.translatePosMatrix(mt.posMatrix,vt,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(O){Pe=At.indexBuffer2,Ge=At.segments2;const xn=[j.drawingBufferWidth,j.drawingBufferHeight];Ze="fillOutlinePattern"===Ie&&re?qs(Kt,_,le,vt,xn):Es(Kt,xn)}else Pe=At.indexBuffer,Ge=At.segments,Ze=re?Yr(Kt,_,le,vt):Pr(Kt);$t.draw(_.context,xe,v,_.stencilModeForClipping(mt),E,Fn.disabled,Ze,c.id,At.layoutVertexBuffer,Pe,Ge,c.paint,_.transform.zoom,xt)}}function de(_,i,c,m,v,E,O){const j=_.context,Y=j.gl,re=c.paint.get("fill-extrusion-pattern"),le=re.constantOr(1),xe=c.getCrossfadeParameters(),Ie=c.paint.get("fill-extrusion-opacity");for(const Ze of m){const Pe=i.getTile(Ze),Ge=Pe.getBucket(c);if(!Ge)continue;const mt=Ge.programConfigurations.get(c.id),vt=_.useProgram(le?"fillExtrusionPattern":"fillExtrusion",mt);le&&(_.context.activeTexture.set(Y.TEXTURE0),Pe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),mt.updatePaintBuffers(xe));const At=re.constantOr(null);if(At&&Pe.imageAtlas){const Kt=Pe.imageAtlas,xn=Kt.patternPositions[At.to.toString()],On=Kt.patternPositions[At.from.toString()];xn&&On&&mt.setConstantPatternPositions(xn,On)}const xt=_.translatePosMatrix(Ze.posMatrix,Pe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),$t=c.paint.get("fill-extrusion-vertical-gradient"),Zt=le?qo(xt,_,$t,Ie,Ze,xe,Pe):to(xt,_,$t,Ie);vt.draw(j,j.gl.TRIANGLES,v,E,O,Fn.backCCW,Zt,c.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,c.paint,_.transform.zoom,mt)}}function Te(_,i,c,m,v,E){const O=_.context,j=O.gl,Y=i.fbo;if(!Y)return;const re=_.useProgram("hillshade");O.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,Y.colorAttachment.get());const le=((xe,Ie,Ze)=>{const Pe=Ze.paint.get("hillshade-shadow-color"),Ge=Ze.paint.get("hillshade-highlight-color"),mt=Ze.paint.get("hillshade-accent-color");let vt=Ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ze.paint.get("hillshade-illumination-anchor")&&(vt-=xe.transform.angle);const At=!xe.options.moving;return{u_matrix:xe.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),At),u_image:0,u_latrange:Kr(0,Ie.tileID),u_light:[Ze.paint.get("hillshade-exaggeration"),vt],u_shadow:Pe,u_highlight:Ge,u_accent:mt}})(_,i,c);re.draw(O,j.TRIANGLES,m,v,E,Fn.disabled,le,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Ue(_,i,c,m,v,E){const O=_.context,j=O.gl,Y=i.dem;if(Y&&Y.data){const re=Y.dim,le=Y.stride,xe=Y.getPixels();if(O.activeTexture.set(j.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||_.getTileTexture(le),i.demTexture){const Ze=i.demTexture;Ze.update(xe,{premultiply:!1}),Ze.bind(j.NEAREST,j.CLAMP_TO_EDGE)}else i.demTexture=new bt(O,xe,j.RGBA,{premultiply:!1}),i.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);O.activeTexture.set(j.TEXTURE0);let Ie=i.fbo;if(!Ie){const Ze=new bt(O,{width:re,height:re,data:null},j.RGBA);Ze.bind(j.LINEAR,j.CLAMP_TO_EDGE),Ie=i.fbo=O.createFramebuffer(re,re,!0),Ie.colorAttachment.set(Ze.texture)}O.bindFramebuffer.set(Ie.framebuffer),O.viewport.set([0,0,re,re]),_.useProgram("hillshadePrepare").draw(O,j.TRIANGLES,m,v,E,Fn.disabled,((Ze,Pe)=>{const Ge=Pe.stride,mt=f.create();return f.ortho(mt,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(mt,mt,[0,-f.EXTENT,0]),{u_matrix:mt,u_image:1,u_dimension:[Ge,Ge],u_zoom:Ze.overscaledZ,u_unpack:Pe.getUnpackVector()}})(i.tileID,Y),c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function rt(_,i,c,m,v){const E=m.paint.get("raster-fade-duration");if(E>0){const O=f.exported.now(),j=(O-_.timeAdded)/E,Y=i?(O-i.timeAdded)/E:-1,re=c.getSource(),le=v.coveringZoomLevel({tileSize:re.tileSize,roundZoom:re.roundZoom}),xe=!i||Math.abs(i.tileID.overscaledZ-le)>Math.abs(_.tileID.overscaledZ-le),Ie=xe&&_.refreshedUponExpiration?1:f.clamp(xe?j:1-Y,0,1);return _.refreshedUponExpiration&&j>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const Ot=new f.Color(1,0,0,1),sn=new f.Color(0,1,0,1),Mn=new f.Color(0,0,1,1),oi=new f.Color(1,0,1,1),vi=new f.Color(0,1,1,1);function Ni(_,i,c,m){Ci(_,0,i+c/2,_.transform.width,c,m)}function mi(_,i,c,m){Ci(_,i-c/2,0,c,_.transform.height,m)}function Ci(_,i,c,m,v,E){const O=_.context,j=O.gl;j.enable(j.SCISSOR_TEST),j.scissor(i*_.pixelRatio,c*_.pixelRatio,m*_.pixelRatio,v*_.pixelRatio),O.clear({color:E}),j.disable(j.SCISSOR_TEST)}function Hi(_,i,c){const m=_.context,v=m.gl,E=c.posMatrix,O=_.useProgram("debug"),j=N.disabled,Y=Lt.disabled,re=_.colorModeForRenderPass();m.activeTexture.set(v.TEXTURE0),_.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),O.draw(m,v.LINE_STRIP,j,Y,re,Fn.disabled,ns(E,f.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);const xe=i.getTileByID(c.key).latestRawTileData,Ie=Math.floor((xe&&xe.byteLength||0)/1024),Ze=i.getTile(c).tileSize,Pe=512/Math.min(Ze,512)*(c.overscaledZ/_.transform.zoom)*.5;let Ge=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ge+=` => ${c.overscaledZ}`),function(mt,vt){mt.initDebugOverlayCanvas();const At=mt.debugOverlayCanvas,xt=mt.context.gl,$t=mt.debugOverlayCanvas.getContext("2d");$t.clearRect(0,0,At.width,At.height),$t.shadowColor="white",$t.shadowBlur=2,$t.lineWidth=1.5,$t.strokeStyle="white",$t.textBaseline="top",$t.font="bold 36px Open Sans, sans-serif",$t.fillText(vt,5,5),$t.strokeText(vt,5,5),mt.debugOverlayTexture.update(At),mt.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}(_,`${Ge} ${Ie}kb`),O.draw(m,v.TRIANGLES,j,Y,X.alphaBlended,Fn.disabled,ns(E,f.Color.transparent,Pe),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}const fr={symbol:function(_,i,c,m,v){if("translucent"!==_.renderPass)return;const E=Lt.disabled,O=_.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(j,Y,re,le,xe,Ie,Ze){const Pe=Y.transform,Ge="map"===xe,mt="map"===Ie;for(const vt of j){const At=le.getTile(vt),xt=At.getBucket(re);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const $t=f.evaluateSizeForZoom(xt.textSizeData,Pe.zoom),Zt=fn(At,1,Y.transform.zoom),Kt=_n(vt.posMatrix,mt,Ge,Y.transform,Zt),xn="none"!==re.layout.get("icon-text-fit")&&xt.hasIconData();if($t){const On=Math.pow(2,Pe.zoom-At.tileID.overscaledZ);yn(xt,Ge,mt,Ze,Pe,Kt,vt.posMatrix,On,$t,xn)}}}(m,_,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v),0!==c.paint.get("icon-opacity").constantOr(1)&&M(_,i,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),E,O),0!==c.paint.get("text-opacity").constantOr(1)&&M(_,i,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),E,O),i.map.showCollisionBoxes&&($r(_,i,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),$r(_,i,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(_,i,c,m){if("translucent"!==_.renderPass)return;const v=c.paint.get("circle-opacity"),E=c.paint.get("circle-stroke-width"),O=c.paint.get("circle-stroke-opacity"),j=!c.layout.get("circle-sort-key").isConstant();if(0===v.constantOr(1)&&(0===E.constantOr(1)||0===O.constantOr(1)))return;const Y=_.context,re=Y.gl,le=_.depthModeForSublayer(0,N.ReadOnly),xe=Lt.disabled,Ie=_.colorModeForRenderPass(),Ze=[];for(let Pe=0;Pe<m.length;Pe++){const Ge=m[Pe],mt=i.getTile(Ge),vt=mt.getBucket(c);if(!vt)continue;const At=vt.programConfigurations.get(c.id),xt={programConfiguration:At,program:_.useProgram("circle",At),layoutVertexBuffer:vt.layoutVertexBuffer,indexBuffer:vt.indexBuffer,uniformValues:no(_,Ge,mt,c)};if(j){const $t=vt.segments.get();for(const Zt of $t)Ze.push({segments:new f.SegmentVector([Zt]),sortKey:Zt.sortKey,state:xt})}else Ze.push({segments:vt.segments,sortKey:0,state:xt})}j&&Ze.sort((Pe,Ge)=>Pe.sortKey-Ge.sortKey);for(const Pe of Ze){const{programConfiguration:Ge,program:mt,layoutVertexBuffer:vt,indexBuffer:At,uniformValues:xt}=Pe.state;mt.draw(Y,re.TRIANGLES,le,xe,Ie,Fn.disabled,xt,c.id,vt,At,Pe.segments,c.paint,_.transform.zoom,Ge)}},heatmap:function(_,i,c,m){if(0!==c.paint.get("heatmap-opacity"))if("offscreen"===_.renderPass){const v=_.context,E=v.gl,O=Lt.disabled,j=new X([E.ONE,E.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(Y,re,le){const xe=Y.gl;Y.activeTexture.set(xe.TEXTURE1),Y.viewport.set([0,0,re.width/4,re.height/4]);let Ie=le.heatmapFbo;if(Ie)xe.bindTexture(xe.TEXTURE_2D,Ie.colorAttachment.get()),Y.bindFramebuffer.set(Ie.framebuffer);else{const Ze=xe.createTexture();xe.bindTexture(xe.TEXTURE_2D,Ze),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MAG_FILTER,xe.LINEAR),Ie=le.heatmapFbo=Y.createFramebuffer(re.width/4,re.height/4,!1),function(Pe,Ge,mt,vt){const At=Pe.gl;At.texImage2D(At.TEXTURE_2D,0,At.RGBA,Ge.width/4,Ge.height/4,0,At.RGBA,Pe.extRenderToTextureHalfFloat?Pe.extTextureHalfFloat.HALF_FLOAT_OES:At.UNSIGNED_BYTE,null),vt.colorAttachment.set(mt)}(Y,re,Ze,Ie)}})(v,_,c),v.clear({color:f.Color.transparent});for(let Y=0;Y<m.length;Y++){const re=m[Y];if(i.hasRenderableParent(re))continue;const le=i.getTile(re),xe=le.getBucket(c);if(!xe)continue;const Ie=xe.programConfigurations.get(c.id),Ze=_.useProgram("heatmap",Ie),{zoom:Pe}=_.transform;Ze.draw(v,E.TRIANGLES,N.disabled,O,j,Fn.disabled,xo(re.posMatrix,le,Pe,c.paint.get("heatmap-intensity")),c.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,c.paint,_.transform.zoom,Ie)}v.viewport.set([0,0,_.width,_.height])}else"translucent"===_.renderPass&&(_.context.setColorMode(_.colorModeForRenderPass()),function(v,E){const O=v.context,j=O.gl,Y=E.heatmapFbo;if(!Y)return;O.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,Y.colorAttachment.get()),O.activeTexture.set(j.TEXTURE1);let re=E.colorRampTexture;re||(re=E.colorRampTexture=new bt(O,E.colorRamp,j.RGBA)),re.bind(j.LINEAR,j.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(O,j.TRIANGLES,N.disabled,Lt.disabled,v.colorModeForRenderPass(),Fn.disabled,((le,xe,Ie,Ze)=>{const Pe=f.create();f.ortho(Pe,0,le.width,le.height,0,0,1);const Ge=le.context.gl;return{u_matrix:Pe,u_world:[Ge.drawingBufferWidth,Ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:xe.paint.get("heatmap-opacity")}})(v,E),E.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,E.paint,v.transform.zoom)}(_,c))},line:function(_,i,c,m){if("translucent"!==_.renderPass)return;const v=c.paint.get("line-opacity"),E=c.paint.get("line-width");if(0===v.constantOr(1)||0===E.constantOr(1))return;const O=_.depthModeForSublayer(0,N.ReadOnly),j=_.colorModeForRenderPass(),Y=c.paint.get("line-dasharray"),re=c.paint.get("line-pattern"),le=re.constantOr(1),xe=c.paint.get("line-gradient"),Ie=c.getCrossfadeParameters(),Ze=le?"linePattern":Y?"lineSDF":xe?"lineGradient":"line",Pe=_.context,Ge=Pe.gl;let mt=!0;for(const vt of m){const At=i.getTile(vt);if(le&&!At.patternsLoaded())continue;const xt=At.getBucket(c);if(!xt)continue;const $t=xt.programConfigurations.get(c.id),Zt=_.context.program.get(),Kt=_.useProgram(Ze,$t),xn=mt||Kt.program!==Zt,On=re.constantOr(null);if(On&&At.imageAtlas){const Wn=At.imageAtlas,Gn=Wn.patternPositions[On.to.toString()],ki=Wn.patternPositions[On.from.toString()];Gn&&ki&&$t.setConstantPatternPositions(Gn,ki)}const Jt=le?Ds(_,At,c,Ie):Y?Fr(_,At,c,Y,Ie):xe?Uo(_,At,c,xt.lineClipsArray.length):Gr(_,At,c);if(le)Pe.activeTexture.set(Ge.TEXTURE0),At.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),$t.updatePaintBuffers(Ie);else if(Y&&(xn||_.lineAtlas.dirty))Pe.activeTexture.set(Ge.TEXTURE0),_.lineAtlas.bind(Pe);else if(xe){const Wn=xt.gradients[c.id];let Gn=Wn.texture;if(c.gradientVersion!==Wn.version){let ki=256;if(c.stepInterpolant){const nr=i.getSource().maxzoom,Xi=vt.canonical.z===nr?Math.ceil(1<<_.transform.maxZoom-vt.canonical.z):1;ki=f.clamp(f.nextPowerOfTwo(xt.maxLineLength/f.EXTENT*1024*Xi),256,Pe.maxTextureSize)}Wn.gradient=f.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:ki,image:Wn.gradient||void 0,clips:xt.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new bt(Pe,Wn.gradient,Ge.RGBA),Wn.version=c.gradientVersion,Gn=Wn.texture}Pe.activeTexture.set(Ge.TEXTURE0),Gn.bind(c.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}Kt.draw(Pe,Ge.TRIANGLES,O,_.stencilModeForClipping(vt),j,Fn.disabled,Jt,c.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,c.paint,_.transform.zoom,$t,xt.layoutVertexBuffer2),mt=!1}},fill:function(_,i,c,m){const v=c.paint.get("fill-color"),E=c.paint.get("fill-opacity");if(0===E.constantOr(1))return;const O=_.colorModeForRenderPass(),j=c.paint.get("fill-pattern"),Y=_.opaquePassEnabledForLayer()&&!j.constantOr(1)&&1===v.constantOr(f.Color.transparent).a&&1===E.constantOr(0)?"opaque":"translucent";if(_.renderPass===Y){const re=_.depthModeForSublayer(1,"opaque"===_.renderPass?N.ReadWrite:N.ReadOnly);H(_,i,c,m,re,O,!1)}if("translucent"===_.renderPass&&c.paint.get("fill-antialias")){const re=_.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,N.ReadOnly);H(_,i,c,m,re,O,!0)}},"fill-extrusion":function(_,i,c,m){const v=c.paint.get("fill-extrusion-opacity");if(0!==v&&"translucent"===_.renderPass){const E=new N(_.context.gl.LEQUAL,N.ReadWrite,_.depthRangeFor3D);if(1!==v||c.paint.get("fill-extrusion-pattern").constantOr(1))de(_,i,c,m,E,Lt.disabled,X.disabled),de(_,i,c,m,E,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const O=_.colorModeForRenderPass();de(_,i,c,m,E,Lt.disabled,O)}}},hillshade:function(_,i,c,m){if("offscreen"!==_.renderPass&&"translucent"!==_.renderPass)return;const v=_.context,E=_.depthModeForSublayer(0,N.ReadOnly),O=_.colorModeForRenderPass(),[j,Y]="translucent"===_.renderPass?_.stencilConfigForOverlap(m):[{},m];for(const re of Y){const le=i.getTile(re);le.needsHillshadePrepare&&"offscreen"===_.renderPass?Ue(_,le,c,E,Lt.disabled,O):"translucent"===_.renderPass&&Te(_,le,c,E,j[re.overscaledZ],O)}v.viewport.set([0,0,_.width,_.height])},raster:function(_,i,c,m){if("translucent"!==_.renderPass||0===c.paint.get("raster-opacity")||!m.length)return;const v=_.context,E=v.gl,O=i.getSource(),j=_.useProgram("raster"),Y=_.colorModeForRenderPass(),[re,le]=O instanceof Dn?[{},m]:_.stencilConfigForOverlap(m),xe=le[le.length-1].overscaledZ,Ie=!_.options.moving;for(const Ze of le){const Pe=_.depthModeForSublayer(Ze.overscaledZ-xe,1===c.paint.get("raster-opacity")?N.ReadWrite:N.ReadOnly,E.LESS),Ge=i.getTile(Ze),mt=_.transform.calculatePosMatrix(Ze.toUnwrapped(),Ie);Ge.registerFadeDuration(c.paint.get("raster-fade-duration"));const vt=i.findLoadedParent(Ze,0),At=rt(Ge,vt,i,c,_.transform);let xt,$t;const Zt="nearest"===c.paint.get("raster-resampling")?E.NEAREST:E.LINEAR;v.activeTexture.set(E.TEXTURE0),Ge.texture.bind(Zt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),v.activeTexture.set(E.TEXTURE1),vt?(vt.texture.bind(Zt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),xt=Math.pow(2,vt.tileID.overscaledZ-Ge.tileID.overscaledZ),$t=[Ge.tileID.canonical.x*xt%1,Ge.tileID.canonical.y*xt%1]):Ge.texture.bind(Zt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const Kt=Ms(mt,$t||[0,0],xt||1,At,c);O instanceof Dn?j.draw(v,E.TRIANGLES,Pe,Lt.disabled,Y,Fn.disabled,Kt,c.id,O.boundsBuffer,_.quadTriangleIndexBuffer,O.boundsSegments):j.draw(v,E.TRIANGLES,Pe,re[Ze.overscaledZ],Y,Fn.disabled,Kt,c.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,i,c){const m=c.paint.get("background-color"),v=c.paint.get("background-opacity");if(0===v)return;const E=_.context,O=E.gl,j=_.transform,Y=j.tileSize,re=c.paint.get("background-pattern");if(_.isPatternMissing(re))return;const le=!re&&1===m.a&&1===v&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==le)return;const xe=Lt.disabled,Ie=_.depthModeForSublayer(0,"opaque"===le?N.ReadWrite:N.ReadOnly),Ze=_.colorModeForRenderPass(),Pe=_.useProgram(re?"backgroundPattern":"background"),Ge=j.coveringTiles({tileSize:Y});re&&(E.activeTexture.set(O.TEXTURE0),_.imageManager.bind(_.context));const mt=c.getCrossfadeParameters();for(const vt of Ge){const At=_.transform.calculatePosMatrix(vt.toUnwrapped()),xt=re?ha(At,v,_,re,{tileID:vt,tileSize:Y},mt):wa(At,v,m);Pe.draw(E,O.TRIANGLES,Ie,xe,Ze,Fn.disabled,xt,c.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}},debug:function(_,i,c){for(let m=0;m<c.length;m++)Hi(_,i,c[m])},custom:function(_,i,c){const m=_.context,v=c.implementation;if("offscreen"===_.renderPass){const E=v.prerender;E&&(_.setCustomLayerDefaults(),m.setColorMode(_.colorModeForRenderPass()),E.call(v,m.gl,_.transform.customLayerMatrix()),m.setDirty(),_.setBaseState())}else if("translucent"===_.renderPass){_.setCustomLayerDefaults(),m.setColorMode(_.colorModeForRenderPass()),m.setStencilMode(Lt.disabled);const E="3d"===v.renderingMode?new N(_.context.gl.LEQUAL,N.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,N.ReadOnly);m.setDepthMode(E),v.render(m.gl,_.transform.customLayerMatrix()),m.setDirty(),_.setBaseState(),m.bindFramebuffer.set(null)}}};class Lr{constructor(i,c){this.context=new q(i),this.transform=c,this._tileTextures={},this.setup(),this.numSublayers=on.maxUnderzooming+on.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rn,this.gpuTimers={}}resize(i,c,m){if(this.width=i*m,this.height=c*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,c=new f.PosArray;c.emplaceBack(0,0),c.emplaceBack(f.EXTENT,0),c.emplaceBack(0,f.EXTENT),c.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,Bo.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);const m=new f.PosArray;m.emplaceBack(0,0),m.emplaceBack(f.EXTENT,0),m.emplaceBack(0,f.EXTENT),m.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=i.createVertexBuffer(m,Bo.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);const v=new f.RasterBoundsArray;v.emplaceBack(0,0,0,0),v.emplaceBack(f.EXTENT,0,f.EXTENT,0),v.emplaceBack(0,f.EXTENT,0,f.EXTENT),v.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,zi.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);const E=new f.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(E,Bo.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);const O=new f.LineStripIndexArray;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(O);const j=new f.TriangleIndexArray;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(j),this.emptyTexture=new bt(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const Y=this.context.gl;this.stencilClearMode=new Lt({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=f.create();f.ortho(m,0,this.width,this.height,0,0,1),f.scale(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,N.disabled,this.stencilClearMode,X.disabled,Fn.disabled,is(m),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const m=this.context,v=m.gl;this.nextStencilID+c.length>256&&this.clearStencil(),m.setColorMode(X.disabled),m.setDepthMode(N.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of c){const j=this._tileClippingMaskIDs[O.key]=this.nextStencilID++;E.draw(m,v.TRIANGLES,N.disabled,new Lt({func:v.ALWAYS,mask:0},j,255,v.KEEP,v.KEEP,v.REPLACE),X.disabled,Fn.disabled,is(O.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Lt({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Lt({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,m=i.sort((O,j)=>j.overscaledZ-O.overscaledZ),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const O={};for(let j=0;j<E;j++)O[j+v]=new Lt({func:c.GEQUAL,mask:255},j+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[O,m]}return[{[v]:Lt.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;if(this._showOverdrawInspector){const c=1/8;return new X([i.CONSTANT_COLOR,i.ONE],new f.Color(c,c,c,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?X.unblended:X.alphaBlended}depthModeForSublayer(i,c,m){if(!this.opaquePassEnabledForLayer())return N.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new N(m||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(f.exported.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches;for(const Y in v){const re=v[Y];re.used&&re.prepare(this.context)}const E={},O={},j={};for(const Y in v){const re=v[Y];E[Y]=re.getVisibleCoordinates(),O[Y]=E[Y].slice().reverse(),j[Y]=re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<m.length;Y++)if(this.style._layers[m[Y]].is3D()){this.opaquePassCutoff=Y;break}this.renderPass="offscreen";for(const Y of m){const re=this.style._layers[Y];if(!re.hasOffscreenPass()||re.isHidden(this.transform.zoom))continue;const le=O[re.source];("custom"===re.type||le.length)&&this.renderLayer(this,v[re.source],re,le)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[m[this.currentLayer]],re=v[Y.source],le=E[Y.source];this._renderTileClippingMasks(Y,le),this.renderLayer(this,re,Y,le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const Y=this.style._layers[m[this.currentLayer]],re=v[Y.source],le=("symbol"===Y.type?j:O)[Y.source];this._renderTileClippingMasks(Y,E[Y.source]),this.renderLayer(this,re,Y,le)}if(this.options.showTileBoundaries){let Y,re;Object.values(this.style._layers).forEach(le=>{le.source&&!le.isHidden(this.transform.zoom)&&(le.source!==(re&&re.id)&&(re=this.style.sourceCaches[le.source]),(!Y||Y.getSource().maxzoom<re.getSource().maxzoom)&&(Y=re))}),Y&&fr.debug(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&function(Y){const re=Y.transform.padding;Ni(Y,Y.transform.height-(re.top||0),3,Ot),Ni(Y,re.bottom||0,3,sn),mi(Y,re.left||0,3,Mn),mi(Y,Y.transform.width-(re.right||0),3,oi);const le=Y.transform.centerPoint;var xe,Ie,Ze,Pe;Ci(xe=Y,(Ie=le.x)-1,(Ze=Y.transform.height-le.y)-10,2,20,Pe=vi),Ci(xe,Ie-10,Ze-1,20,2,Pe)}(this),this.context.setDefault()}renderLayer(i,c,m,v){m.isHidden(this.transform.zoom)||("background"===m.type||"custom"===m.type||v.length)&&(this.id=m.id,this.gpuTimingStart(m),fr[m.type](i,c,m,v,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),m.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const m in i){const v=i[m],E=this.context.extTimerQuery,O=E.getQueryObjectEXT(v.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(v.query),c[m]=O}return c}translatePosMatrix(i,c,m,v,E){if(!m[0]&&!m[1])return i;const O=E?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(O){const re=Math.sin(O),le=Math.cos(O);m=[m[0]*le-m[1]*re,m[0]*re+m[1]*le]}const j=[E?m[0]:fn(c,m[0],this.transform.zoom),E?m[1]:fn(c,m[1],this.transform.zoom),0],Y=new Float32Array(16);return f.translate(Y,i,j),Y}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!c||!m}useProgram(i,c){this.cache=this.cache||{};const m=`${i}${c?c.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[m]||(this.cache[m]=new _r(this.context,i,zo[i],c,Ys[i],this._showOverdrawInspector)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new bt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class io{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,m){const v=Math.pow(2,m),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>f.transformMat4([],j,i)).map(j=>f.scale$1([],j,1/j[3]/c*v)),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const Y=function(Ie,Ze){var Pe=Ze[0],Ge=Ze[1],mt=Ze[2],vt=Pe*Pe+Ge*Ge+mt*mt;return vt>0&&(vt=1/Math.sqrt(vt)),Ie[0]=Ze[0]*vt,Ie[1]=Ze[1]*vt,Ie[2]=Ze[2]*vt,Ie}([],(Ie=[],Ze=Ye([],E[j[0]],E[j[1]]),Pe=Ye([],E[j[2]],E[j[1]]),Ge=Ze[0],At=Pe[0],Ie[0]=(mt=Ze[1])*($t=Pe[2])-(vt=Ze[2])*(xt=Pe[1]),Ie[1]=vt*At-Ge*$t,Ie[2]=Ge*xt-mt*At,Ie)),re=-((le=Y)[0]*(xe=E[j[1]])[0]+le[1]*xe[1]+le[2]*xe[2]);var Ie,Ze,Pe,Ge,mt,vt,At,xt,$t,le,xe;return Y.concat(re)});return new io(E,O)}}class Zr{constructor(i,c){var m,v,E;this.min=i,this.max=c,this.center=function(m,v,E){return m[0]=.5*v[0],m[1]=.5*v[1],m[2]=.5*v[2],m}([],((m=[])[0]=(v=this.min)[0]+(E=this.max)[0],m[1]=v[1]+E[1],m[2]=v[2]+E[2],m))}quadrant(i){const c=[i%2==0,i<2],m=Be(this.min),v=Be(this.max);for(let E=0;E<c.length;E++)m[E]=c[E]?this.min[E]:this.center[E],v[E]=c[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new Zr(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let m=!0;for(let v=0;v<i.planes.length;v++){const E=i.planes[v];let O=0;for(let j=0;j<c.length;j++)f.dot(E,c[j])>=0&&O++;if(0===O)return 0;O!==c.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let E=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let j=0;j<i.points.length;j++){const Y=i.points[j][v]-this.min[v];E=Math.min(E,Y),O=Math.max(O,Y)}if(O<0||E>this.max[v]-this.min[v])return 0}return 1}}class Ko{constructor(i=0,c=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=m,this.right=v}interpolate(i,c,m){return null!=c.top&&null!=i.top&&(this.top=f.number(i.top,c.top,m)),null!=c.bottom&&null!=i.bottom&&(this.bottom=f.number(i.bottom,c.bottom,m)),null!=c.left&&null!=i.left&&(this.left=f.number(i.left,c.left,m)),null!=c.right&&null!=i.right&&(this.right=f.number(i.right,c.right,m)),this}getCenter(i,c){const m=f.clamp((this.left+i-this.right)/2,0,i),v=f.clamp((this.top+c-this.bottom)/2,0,c);return new f.pointGeometry(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class _o{constructor(i,c,m,v,E){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===E||!!E,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=null==m?0:m,this._maxPitch=null==v?60:v,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ko,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new _o(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new f.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-f.wrap(i,-180,180)*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new f.ARRAY_TYPE(4),f.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(m,v,E){var O=v[0],j=v[1],Y=v[2],re=v[3],le=Math.sin(E),xe=Math.cos(E);m[0]=O*xe+Y*le,m[1]=j*xe+re*le,m[2]=O*-le+Y*xe,m[3]=j*-le+re*xe}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=f.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,m){this._unmodified=!1,this._edgeInsets.interpolate(i,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new f.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const m=this.pointCoordinate(new f.pointGeometry(0,0)),v=this.pointCoordinate(new f.pointGeometry(this.width,0)),E=this.pointCoordinate(new f.pointGeometry(this.width,this.height)),O=this.pointCoordinate(new f.pointGeometry(0,this.height)),j=Math.floor(Math.min(m.x,v.x,E.x,O.x)),Y=Math.floor(Math.max(m.x,v.x,E.x,O.x)),re=1;for(let le=j-re;le<=Y+re;le++)0!==le&&c.push(new f.UnwrappedTileID(le,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const m=c;if(void 0!==i.minzoom&&c<i.minzoom)return[];void 0!==i.maxzoom&&c>i.maxzoom&&(c=i.maxzoom);const v=f.MercatorCoordinate.fromLngLat(this.center),E=Math.pow(2,c),O=[E*v.x,E*v.y,0],j=io.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c);let Y=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Y=c);const re=Pe=>({aabb:new Zr([Pe*E,0,0],[(Pe+1)*E,E,0]),zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}),le=[],xe=[],Ie=c,Ze=i.reparseOverscaled?m:c;if(this._renderWorldCopies)for(let Pe=1;Pe<=3;Pe++)le.push(re(-Pe)),le.push(re(Pe));for(le.push(re(0));le.length>0;){const Pe=le.pop(),Ge=Pe.x,mt=Pe.y;let vt=Pe.fullyVisible;if(!vt){const Kt=Pe.aabb.intersects(j);if(0===Kt)continue;vt=2===Kt}const At=Pe.aabb.distanceX(O),xt=Pe.aabb.distanceY(O),$t=Math.max(Math.abs(At),Math.abs(xt)),Zt=3+(1<<Ie-Pe.zoom)-2;if(Pe.zoom===Ie||$t>Zt&&Pe.zoom>=Y)xe.push({tileID:new f.OverscaledTileID(Pe.zoom===Ie?Ze:Pe.zoom,Pe.wrap,Pe.zoom,Ge,mt),distanceSq:et([O[0]-.5-Ge,O[1]-.5-mt])});else for(let Kt=0;Kt<4;Kt++){const xn=(Ge<<1)+Kt%2,On=(mt<<1)+(Kt>>1);le.push({aabb:Pe.aabb.quadrant(Kt),zoom:Pe.zoom+1,x:xn,y:On,wrap:Pe.wrap,fullyVisible:vt})}}return xe.sort((Pe,Ge)=>Pe.distanceSq-Ge.distanceSq).map(Pe=>Pe.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=f.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.pointGeometry(f.mercatorXfromLng(i.lng)*this.worldSize,f.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new f.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,c){const m=this.pointCoordinate(c),v=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(i),O=new f.MercatorCoordinate(E.x-(m.x-v.x),E.y-(m.y-v.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return f.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const c=[i.x,i.y,0,1],m=[i.x,i.y,1,1];f.transformMat4(c,c,this.pixelMatrixInverse),f.transformMat4(m,m,this.pixelMatrixInverse);const v=c[3],E=m[3],O=c[1]/v,j=m[1]/E,Y=c[2]/v,re=m[2]/E,le=Y===re?0:(0-Y)/(re-Y);return new f.MercatorCoordinate(f.number(c[0]/v,m[0]/E,le)/this.worldSize,f.number(O,j,le)/this.worldSize)}coordinatePoint(i){const c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return f.transformMat4(c,c,this.pixelMatrix),new f.pointGeometry(c[0]/c[3],c[1]/c[3])}getBounds(){return(new f.LngLatBounds).extend(this.pointLocation(new f.pointGeometry(0,0))).extend(this.pointLocation(new f.pointGeometry(this.width,0))).extend(this.pointLocation(new f.pointGeometry(this.width,this.height))).extend(this.pointLocation(new f.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const m=i.key,v=c?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const E=i.canonical,O=this.worldSize/this.zoomScale(E.z),j=E.x+Math.pow(2,E.z)*i.wrap,Y=f.identity(new Float64Array(16));return f.translate(Y,Y,[j*O,E.y*O,0]),f.scale(Y,Y,[O/f.EXTENT,O/f.EXTENT,1]),f.multiply(Y,c?this.alignedProjMatrix:this.projMatrix,Y),v[m]=new Float32Array(Y),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,m,v,E=-90,O=90,j=-180,Y=180;const re=this.size,le=this._unmodified;if(this.latRange){const Ze=this.latRange;E=f.mercatorYfromLat(Ze[1])*this.worldSize,O=f.mercatorYfromLat(Ze[0])*this.worldSize,i=O-E<re.y?re.y/(O-E):0}if(this.lngRange){const Ze=this.lngRange;j=f.mercatorXfromLng(Ze[0])*this.worldSize,Y=f.mercatorXfromLng(Ze[1])*this.worldSize,c=Y-j<re.x?re.x/(Y-j):0}const xe=this.point,Ie=Math.max(c||0,i||0);if(Ie)return this.center=this.unproject(new f.pointGeometry(c?(Y+j)/2:xe.x,i?(O+E)/2:xe.y)),this.zoom+=this.scaleZoom(Ie),this._unmodified=le,void(this._constraining=!1);if(this.latRange){const Ze=xe.y,Pe=re.y/2;Ze-Pe<E&&(v=E+Pe),Ze+Pe>O&&(v=O-Pe)}if(this.lngRange){const Ze=xe.x,Pe=re.x/2;Ze-Pe<j&&(m=j+Pe),Ze+Pe>Y&&(m=Y-Pe)}void 0===m&&void 0===v||(this.center=this.unproject(new f.pointGeometry(void 0!==m?m:xe.x,void 0!==v?v:xe.y))),this._unmodified=le,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const c=Math.PI/2+this._pitch,m=this._fov*(.5+i.y/this.height),v=Math.sin(m)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-c-m,.01,Math.PI-.01)),E=this.point,O=E.x,j=E.y,Y=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),re=this.height/50;let le=new Float64Array(16);f.perspective(le,this._fov,this.width/this.height,re,Y),le[8]=2*-i.x/this.width,le[9]=2*i.y/this.height,f.scale(le,le,[1,-1,1]),f.translate(le,le,[0,0,-this.cameraToCenterDistance]),f.rotateX(le,le,this._pitch),f.rotateZ(le,le,this.angle),f.translate(le,le,[-O,-j,0]),this.mercatorMatrix=f.scale([],le,[this.worldSize,this.worldSize,this.worldSize]),f.scale(le,le,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=le,this.invProjMatrix=f.invert([],this.projMatrix);const xe=this.width%2/2,Ie=this.height%2/2,Ze=Math.cos(this.angle),Pe=Math.sin(this.angle),Ge=O-Math.round(O)+Ze*xe+Pe*Ie,mt=j-Math.round(j)+Ze*Ie+Pe*xe,vt=new Float64Array(le);if(f.translate(vt,vt,[Ge>.5?Ge-1:Ge,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=vt,le=f.create(),f.scale(le,le,[this.width/2,-this.height/2,1]),f.translate(le,le,[1,-1,0]),this.labelPlaneMatrix=le,le=f.create(),f.scale(le,le,[1,-1,1]),f.translate(le,le,[-1,-1,0]),f.scale(le,le,[2/this.width,2/this.height,1]),this.glCoordMatrix=le,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),le=f.invert(new Float64Array(16),this.pixelMatrix),!le)throw new Error("failed to invert matrix");this.pixelMatrixInverse=le,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new f.pointGeometry(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return f.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.pointGeometry(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(1===i.length)return[i[0],c];{let m=c.x,v=c.y,E=c.x,O=c.y;for(const j of i)m=Math.min(m,j.x),v=Math.min(v,j.y),E=Math.max(E,j.x),O=Math.max(O,j.y);return[new f.pointGeometry(m,v),new f.pointGeometry(E,v),new f.pointGeometry(E,O),new f.pointGeometry(m,O),new f.pointGeometry(m,v)]}}}class yo{constructor(i){this._hashName=i&&encodeURIComponent(i),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,m){let v=!1,E=null;const O=()=>{E=null,v&&(c(),E=setTimeout(O,300),v=!1)};return()=>(v=!0,E||O(),E)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,v),O=Math.round(c.lng*E)/E,j=Math.round(c.lat*E)/E,Y=this._map.getBearing(),re=this._map.getPitch();let le="";if(le+=i?`/${O}/${j}/${m}`:`${m}/${j}/${O}`,(Y||re)&&(le+="/"+Math.round(10*Y)/10),re&&(le+=`/${Math.round(re)}`),this._hashName){const xe=this._hashName;let Ie=!1;const Ze=window.location.hash.slice(1).split("&").map(Pe=>{const Ge=Pe.split("=")[0];return Ge===xe?(Ie=!0,`${Ge}=${le}`):Pe}).filter(Pe=>Pe);return Ie||Ze.push(`${xe}=${le}`),`#${Ze.join("&")}`}return`#${le}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch(c){}}}const Ao={linearity:.3,easing:f.bezier(0,0,.3,1)},Ps=f.extend({deceleration:2500,maxSpeed:1400},Ao),_s=f.extend({deceleration:20,maxSpeed:1400},Ao),Ca=f.extend({deceleration:1e3,maxSpeed:360},Ao),Jo=f.extend({deceleration:1e3,maxSpeed:90},Ao);class ys{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=f.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new f.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const E=Os(c.pan.mag(),m,f.extend({},Ps,i||{}));v.offset=c.pan.mult(E.amount/c.pan.mag()),v.center=this._map.transform.center,fa(v,E)}if(c.zoom){const E=Os(c.zoom,m,_s);v.zoom=this._map.transform.zoom+E.amount,fa(v,E)}if(c.bearing){const E=Os(c.bearing,m,Ca);v.bearing=this._map.transform.bearing+f.clamp(E.amount,-179,179),fa(v,E)}if(c.pitch){const E=Os(c.pitch,m,Jo);v.pitch=this._map.transform.pitch+E.amount,fa(v,E)}if(v.zoom||v.bearing){const E=void 0===c.pinchAround?c.around:c.pinchAround;v.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),f.extend(v,{noMoveStart:!0})}}function fa(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Os(_,i,c){const{maxSpeed:m,linearity:v,deceleration:E}=c,O=f.clamp(_*v/(i/1e3),-m,m),j=Math.abs(O)/(E*v);return{easing:c.easing,duration:1e3*j,amount:O*(j/2)}}class jn extends f.Event{constructor(i,c,m,v={}){const E=he.mousePos(c.getCanvasContainer(),m),O=c.unproject(E);super(i,f.extend({point:E,lngLat:O,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ai extends f.Event{constructor(i,c,m){const v="touchend"===i?m.changedTouches:m.touches,E=he.touchPos(c.getCanvasContainer(),v),O=E.map(Y=>c.unproject(Y)),j=E.reduce((Y,re,le,xe)=>Y.add(re.div(xe.length)),new f.pointGeometry(0,0));super(i,{points:E,point:j,lngLats:O,lngLat:c.unproject(j),originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Oi extends f.Event{constructor(i,c,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Si{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Oi(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new jn(i.type,this._map,i))}mouseup(i){this._map.fire(new jn(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new jn(i.type,this._map,i))}dblclick(i){return this._firePreventable(new jn(i.type,this._map,i))}mouseover(i){this._map.fire(new jn(i.type,this._map,i))}mouseout(i){this._map.fire(new jn(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ai(i.type,this._map,i))}touchmove(i){this._map.fire(new ai(i.type,this._map,i))}touchend(i){this._map.fire(new ai(i.type,this._map,i))}touchcancel(i){this._map.fire(new ai(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new jn(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new jn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new jn(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rr{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&0===i.button&&(he.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=he.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const E=Math.min(v.x,m.x),O=Math.max(v.x,m.x),j=Math.min(v.y,m.y),Y=Math.max(v.y,m.y);he.setTransform(this._box,`translate(${E}px,${j}px)`),this._box.style.width=O-E+"px",this._box.style.height=Y-j+"px"}mouseupWindow(i,c){if(!this._active||0!==i.button)return;const m=this._startPos,v=c;if(this.reset(),he.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:E=>E.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(he.remove(this._box),this._box=null),he.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new f.Event(i,{originalEvent:c}))}}function Wr(_,i){const c={};for(let m=0;m<_.length;m++)c[_[m].identifier]=i[m];return c}class Js{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const E=new f.pointGeometry(0,0);for(const O of v)E._add(O);return E.div(v.length)}(c),this.touches=Wr(m,c)))}touchmove(i,c,m){if(this.aborted||!this.centroid)return;const v=Wr(m,c);for(const E in this.touches){const O=this.touches[E],j=v[E];(!j||j.dist(O)>30)&&(this.aborted=!0)}}touchend(i,c,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===m.length){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Tr{constructor(i){this.singleTap=new Js(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,m){this.singleTap.touchstart(i,c,m)}touchmove(i,c,m){this.singleTap.touchmove(i,c,m)}touchend(i,c,m){const v=this.singleTap.touchend(i,c,m);if(v){const E=i.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(v)<30;if(E&&O||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Io{constructor(){this._zoomIn=new Tr({numTouches:1,numTaps:2}),this._zoomOut=new Tr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,m){this._zoomIn.touchstart(i,c,m),this._zoomOut.touchstart(i,c,m)}touchmove(i,c,m){this._zoomIn.touchmove(i,c,m),this._zoomOut.touchmove(i,c,m)}touchend(i,c,m){const v=this._zoomIn.touchend(i,c,m),E=this._zoomOut.touchend(i,c,m);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(v)},{originalEvent:i})}):E?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(E)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ma={0:1,2:2};class Dr{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const m=he.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(i,c){const m=this._lastPoint;if(m)if(i.preventDefault(),function(v,E){const O=ma[E];return void 0===v.buttons||(v.buttons&O)!==O}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}mouseupWindow(i){this._lastPoint&&he.mouseButton(i)===this._eventButton&&(this._moved&&he.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vo extends Dr{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return 0===c&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class An extends Dr{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const m=.8*(c.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class bo extends Dr{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const m=-.5*(c.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class ks{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new f.pointGeometry(0,0)}touchstart(i,c,m){return this._calculateTransform(i,c,m)}touchmove(i,c,m){if(this._active&&!(m.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,m)}touchend(i,c,m){this._calculateTransform(i,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,m){m.length>0&&(this._active=!0);const v=Wr(m,c),E=new f.pointGeometry(0,0),O=new f.pointGeometry(0,0);let j=0;for(const re in v){const le=v[re],xe=this._touches[re];xe&&(E._add(le),O._add(le.sub(xe)),j++,v[re]=le)}if(this._touches=v,j<this._minTouches||!O.mag())return;const Y=O.div(j);return this._sum._add(Y),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(j),panDelta:Y}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ea{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,m){return{}}touchstart(i,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,E]=this._firstTwoTouches,O=Ya(m,c,v),j=Ya(m,c,E);if(!O||!j)return;const Y=this._aroundCenter?null:O.add(j).div(2);return this._move([O,j],Y,i)}touchend(i,c,m){if(!this._firstTwoTouches)return;const[v,E]=this._firstTwoTouches,O=Ya(m,c,v),j=Ya(m,c,E);O&&j||(this._active&&he.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ya(_,i,c){for(let m=0;m<_.length;m++)if(_[m].identifier===c)return i[m]}function In(_,i){return Math.log(_/i)/Math.LN2}class Da extends Ea{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(In(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:In(this._distance,m),pinchAround:c}}}function Zl(_,i){return 180*_.angleWith(i)/Math.PI}class La extends Ea{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zl(this._vector,m),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,m=Zl(i,this._startVector);return Math.abs(m)<c}}function Ma(_){return Math.abs(_.y)>Math.abs(_.x)}class cs extends Ea{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Ma(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,m){const v=i[0].sub(this._lastPoints[0]),E=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,E,m.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+E.y)/2*-.5}}gestureBeginsVertically(i,c,m){if(void 0!==this._valid)return this._valid;const v=i.mag()>=2,E=c.mag()>=2;if(!v&&!E)return;if(!v||!E)return void 0===this._firstMove&&(this._firstMove=m),m-this._firstMove<100&&void 0;const O=i.y>0==c.y>0;return Ma(i)&&Ma(c)&&O}}const Wl={panStep:100,bearingStep:15,pitchStep:10};class kc{constructor(){const i=Wl;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,m=0,v=0,E=0,O=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),E=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),E=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),O=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:j=>{const Y=j.getZoom();j.easeTo({duration:300,easeId:"keyboardHandler",easing:gu,zoom:c?Math.round(Y)+c*(i.shiftKey?2:1):Y,bearing:j.getBearing()+m*this._bearingStep,pitch:j.getPitch()+v*this._pitchStep,offset:[-E*this._panStep,-O*this._panStep],center:j.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gu(_){return _*(2-_)}const ql=4.000244140625;class Ka{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,f.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=f.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==c&&c%ql==0?this._type="wheel":0!==c&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=he.mousePos(this._el,i);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(c)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(0!==this._delta){const j="wheel"===this._type&&Math.abs(this._delta)>ql?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&0!==Y&&(Y=1/Y);const re="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(re*Y))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c="number"==typeof this._targetZoom?this._targetZoom:i.zoom,m=this._startZoom,v=this._easing;let E,O=!1;if("wheel"===this._type&&m&&v){const j=Math.min((f.exported.now()-this._lastWheelEventTime)/200,1),Y=v(j);E=f.number(m,c,Y),j<1?this._frameId||(this._frameId=!0):O=!0}else E=c,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:E-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=f.ease;if(this._prevEase){const m=this._prevEase,v=(f.exported.now()-m.start)/m.duration,E=m.easing(v+.01)-m.easing(v),O=.27/Math.sqrt(E*E+1e-4)*.01,j=Math.sqrt(.0729-O*O);c=f.bezier(O,j,.25,1)}return this._prevEase={start:f.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Il{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hl{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Co{constructor(){this._tap=new Tr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,c,m))}touchmove(i,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],E=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(i,c,m)}touchend(i,c,m){this._tapTime?this._swipePoint&&0===m.length&&this.reset():this._tap.touchend(i,c,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ga{constructor(i,c,m){this._el=i,this._mousePan=c,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Yl{constructor(i,c,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Sa{constructor(i,c,m,v){this._el=i,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ta=_=>_.zoom||_.drag||_.pitch||_.rotate;class Aa extends f.Event{}function Ja(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Ho{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ys(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),f.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,E,O]of this._listeners)he.addEventListener(v,E,v===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[i,c,m]of this._listeners)he.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Si(c,i));const v=c.boxZoom=new rr(c,i);this._add("boxZoom",v);const E=new Io,O=new hl;c.doubleClickZoom=new Il(O,E),this._add("tapZoom",E),this._add("clickZoom",O);const j=new Co;this._add("tapDragZoom",j);const Y=c.touchPitch=new cs;this._add("touchPitch",Y);const re=new An(i),le=new bo(i);c.dragRotate=new Yl(i,re,le),this._add("mouseRotate",re,["mousePitch"]),this._add("mousePitch",le,["mouseRotate"]);const xe=new vo(i),Ie=new ks(i);c.dragPan=new ga(m,xe,Ie),this._add("mousePan",xe),this._add("touchPan",Ie,["touchZoom","touchRotate"]);const Ze=new La,Pe=new Da;c.touchZoomRotate=new Sa(m,Pe,Ze,j),this._add("touchRotate",Ze,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]);const Ge=c.scrollZoom=new Ka(c,this);this._add("scrollZoom",Ge,["mousePan"]);const mt=c.keyboard=new kc;this._add("keyboard",mt),this._add("blockableMapEvent",new Sr(c));for(const vt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[vt]&&c[vt].enable(i[vt])}_add(i,c,m){this._handlers.push({handlerName:i,handler:c,allowed:m}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ta(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,m){for(const v in i)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const m of i)this._el.contains(m.target)&&c.push(m);return c}handleEvent(i,c){if("blur"===i.type)return void this.stop(!0);this._updatingCamera=!0;const m="renderFrame"===i.type?void 0:i,v={needsRenderFrame:!1},E={},O={},j=i.touches,Y=j?this._getMapTouches(j):void 0,re=Y?he.touchPos(this._el,Y):he.mousePos(this._el,i);for(const{handlerName:Ie,handler:Ze,allowed:Pe}of this._handlers){if(!Ze.isEnabled())continue;let Ge;this._blockedByActive(O,Pe,Ie)?Ze.reset():Ze[c||i.type]&&(Ge=Ze[c||i.type](i,re,Y),this.mergeHandlerResult(v,E,Ge,Ie,m),Ge&&Ge.needsRenderFrame&&this._triggerRenderFrame()),(Ge||Ze.isActive())&&(O[Ie]=Ze)}const le={};for(const Ie in this._previousActiveHandlers)O[Ie]||(le[Ie]=m);this._previousActiveHandlers=O,(Object.keys(le).length||Ja(v))&&(this._changes.push([v,E,le]),this._triggerRenderFrame()),(Object.keys(O).length||Ja(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:xe}=v;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))}mergeHandlerResult(i,c,m,v,E){if(!m)return;f.extend(i,m);const O={handlerName:v,originalEvent:m.originalEvent||E};void 0!==m.zoomDelta&&(c.zoom=O),void 0!==m.panDelta&&(c.drag=O),void 0!==m.pitchDelta&&(c.pitch=O),void 0!==m.bearingDelta&&(c.rotate=O)}_applyChanges(){const i={},c={},m={};for(const[v,E,O]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new f.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),void 0!==v.around&&(i.around=v.around),void 0!==v.pinchAround&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),f.extend(c,E),f.extend(m,O);this._updateMapTransform(i,c,m),this._changes=[]}_updateMapTransform(i,c,m){const v=this._map,E=v.transform;if(!Ja(i))return this._fireEvents(c,m,!0);let{panDelta:O,zoomDelta:j,bearingDelta:Y,pitchDelta:re,around:le,pinchAround:xe}=i;void 0!==xe&&(le=xe),v._stop(!0),le=le||v.transform.centerPoint;const Ie=E.pointLocation(O?le.sub(O):le);Y&&(E.bearing+=Y),re&&(E.pitch+=re),j&&(E.zoom+=j),E.setLocationAtPoint(Ie,le),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,m,!0)}_fireEvents(i,c,m){const v=Ta(this._eventsInProgress),E=Ta(i),O={};for(const le in i){const{originalEvent:xe}=i[le];this._eventsInProgress[le]||(O[`${le}start`]=xe),this._eventsInProgress[le]=i[le]}!v&&E&&this._fireEvent("movestart",E.originalEvent);for(const le in O)this._fireEvent(le,O[le]);E&&this._fireEvent("move",E.originalEvent);for(const le in i){const{originalEvent:xe}=i[le];this._fireEvent(le,xe)}const j={};let Y;for(const le in this._eventsInProgress){const{handlerName:xe,originalEvent:Ie}=this._eventsInProgress[le];this._handlersById[xe].isActive()||(delete this._eventsInProgress[le],Y=c[xe]||Ie,j[`${le}end`]=Y)}for(const le in j)this._fireEvent(le,j[le]);const re=Ta(this._eventsInProgress);if(m&&(v||E)&&!re){this._updatingCamera=!0;const le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=Ie=>0!==Ie&&-this._bearingSnap<Ie&&Ie<this._bearingSnap;le?(xe(le.bearing||this._map.getBearing())&&(le.bearing=0),this._map.easeTo(le,{originalEvent:Y})):(this._map.fire(new f.Event("moveend",{originalEvent:Y})),xe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new f.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Aa("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Vr={extend:(_,...i)=>f.extend(_,...i),run(_){_()},logToElement(_,i=!1,c="log"){const m=window.document.getElementById(c);m&&(i&&(m.innerHTML=""),m.innerHTML+=`<br>${_}`)}};class _a extends f.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}getCenter(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,m){return i=f.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,f.extend({offset:i},c),m)}panTo(i,c,m){return this.easeTo(f.extend({center:i},c),m)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,m){return this.easeTo(f.extend({zoom:i},c),m)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,m){return this.easeTo(f.extend({bearing:i},c),m)}resetNorth(i,c){return this.rotateTo(0,f.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=f.LngLatBounds.convert(i);const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,c)}_cameraForBoxAndBearing(i,c,m,v){const E={top:0,bottom:0,right:0,left:0};if("number"==typeof(v=f.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding){const Zt=v.padding;v.padding={top:Zt,bottom:Zt,right:Zt,left:Zt}}v.padding=f.extend(E,v.padding);const O=this.transform,j=O.padding,Y=O.project(f.LngLat.convert(i)),re=O.project(f.LngLat.convert(c)),le=Y.rotate(-m*Math.PI/180),xe=re.rotate(-m*Math.PI/180),Ie=new f.pointGeometry(Math.max(le.x,xe.x),Math.max(le.y,xe.y)),Ze=new f.pointGeometry(Math.min(le.x,xe.x),Math.min(le.y,xe.y)),Pe=Ie.sub(Ze),Ge=(O.width-(j.left+j.right+v.padding.left+v.padding.right))/Pe.x,mt=(O.height-(j.top+j.bottom+v.padding.top+v.padding.bottom))/Pe.y;if(mt<0||Ge<0)return void f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const vt=Math.min(O.scaleZoom(O.scale*Math.min(Ge,mt)),v.maxZoom),At=f.pointGeometry.convert(v.offset),xt=new f.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),$t=At.add(xt).mult(O.scale/O.zoomScale(vt));return{center:O.unproject(Y.add(re).div(2).sub($t)),zoom:vt,bearing:m}}fitBounds(i,c,m){return this._fitInternal(this.cameraForBounds(i,c),c,m)}fitScreenCoordinates(i,c,m,v,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.pointGeometry.convert(i)),this.transform.pointLocation(f.pointGeometry.convert(c)),m,v),v,E)}_fitInternal(i,c,m){return i?(delete(c=f.extend(i,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(i,c){this.stop();const m=this.transform;let v=!1,E=!1,O=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(v=!0,m.zoom=+i.zoom),void 0!==i.center&&(m.center=f.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(E=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(O=!0,m.pitch=+i.pitch),null==i.padding||m.isPaddingEqual(i.padding)||(m.padding=i.padding),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),v&&this.fire(new f.Event("zoomstart",c)).fire(new f.Event("zoom",c)).fire(new f.Event("zoomend",c)),E&&this.fire(new f.Event("rotatestart",c)).fire(new f.Event("rotate",c)).fire(new f.Event("rotateend",c)),O&&this.fire(new f.Event("pitchstart",c)).fire(new f.Event("pitch",c)).fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))}easeTo(i,c){this._stop(!1,i.easeId),(!1===(i=f.extend({offset:[0,0],duration:500,easing:f.ease},i)).animate||!i.essential&&f.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,v=this.getZoom(),E=this.getBearing(),O=this.getPitch(),j=this.getPadding(),Y="zoom"in i?+i.zoom:v,re="bearing"in i?this._normalizeBearing(i.bearing,E):E,le="pitch"in i?+i.pitch:O,xe="padding"in i?i.padding:m.padding,Ie=f.pointGeometry.convert(i.offset);let Ze=m.centerPoint.add(Ie);const Pe=m.pointLocation(Ze),Ge=f.LngLat.convert(i.center||Pe);this._normalizeCenter(Ge);const mt=m.project(Pe),vt=m.project(Ge).sub(mt),At=m.zoomScale(Y-v);let xt,$t;i.around&&(xt=f.LngLat.convert(i.around),$t=m.locationPoint(xt));const Zt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==v,this._rotating=this._rotating||E!==re,this._pitching=this._pitching||le!==O,this._padding=!m.isPaddingEqual(xe),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Zt),this._ease(Kt=>{if(this._zooming&&(m.zoom=f.number(v,Y,Kt)),this._rotating&&(m.bearing=f.number(E,re,Kt)),this._pitching&&(m.pitch=f.number(O,le,Kt)),this._padding&&(m.interpolatePadding(j,xe,Kt),Ze=m.centerPoint.add(Ie)),xt)m.setLocationAtPoint(xt,$t);else{const xn=m.zoomScale(m.zoom-v),On=Y>v?Math.min(2,At):Math.max(.5,At),Jt=Math.pow(On,1-Kt),Wn=m.unproject(mt.add(vt.mult(Kt*Jt)).mult(xn));m.setLocationAtPoint(m.renderWorldCopies?Wn.wrap():Wn,Ze)}this._fireMoveEvents(c)},Kt=>{this._afterEase(c,Kt)},i),this}_prepareEase(i,c,m={}){this._moving=!0,c||m.moving||this.fire(new f.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new f.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new f.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new f.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new f.Event("move",i)),this._zooming&&this.fire(new f.Event("zoom",i)),this._rotating&&this.fire(new f.Event("rotate",i)),this._pitching&&this.fire(new f.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new f.Event("zoomend",i)),v&&this.fire(new f.Event("rotateend",i)),E&&this.fire(new f.Event("pitchend",i)),this.fire(new f.Event("moveend",i))}flyTo(i,c){if(!i.essential&&f.exported.prefersReducedMotion){const dr=f.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(dr,c)}this.stop(),i=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},i);const m=this.transform,v=this.getZoom(),E=this.getBearing(),O=this.getPitch(),j=this.getPadding(),Y="zoom"in i?f.clamp(+i.zoom,m.minZoom,m.maxZoom):v,re="bearing"in i?this._normalizeBearing(i.bearing,E):E,le="pitch"in i?+i.pitch:O,xe="padding"in i?i.padding:m.padding,Ie=m.zoomScale(Y-v),Ze=f.pointGeometry.convert(i.offset);let Pe=m.centerPoint.add(Ze);const Ge=m.pointLocation(Pe),mt=f.LngLat.convert(i.center||Ge);this._normalizeCenter(mt);const vt=m.project(Ge),At=m.project(mt).sub(vt);let xt=i.curve;const $t=Math.max(m.width,m.height),Zt=$t/Ie,Kt=At.mag();if("minZoom"in i){const dr=f.clamp(Math.min(i.minZoom,v,Y),m.minZoom,m.maxZoom),oo=$t/m.zoomScale(dr-v);xt=Math.sqrt(oo/Kt*2)}const xn=xt*xt;function On(dr){const oo=(Zt*Zt-$t*$t+(dr?-1:1)*xn*xn*Kt*Kt)/(2*(dr?Zt:$t)*xn*Kt);return Math.log(Math.sqrt(oo*oo+1)-oo)}function Jt(dr){return(Math.exp(dr)-Math.exp(-dr))/2}function Wn(dr){return(Math.exp(dr)+Math.exp(-dr))/2}const Gn=On(0);let ki=function(dr){return Wn(Gn)/Wn(Gn+xt*dr)},nr=function(dr){return $t*((Wn(Gn)*(Jt(oo=Gn+xt*dr)/Wn(oo))-Jt(Gn))/xn)/Kt;var oo},Xi=(On(1)-Gn)/xt;if(Math.abs(Kt)<1e-6||!isFinite(Xi)){if(Math.abs($t-Zt)<1e-6)return this.easeTo(i,c);const dr=Zt<$t?-1:1;Xi=Math.abs(Math.log(Zt/$t))/xt,nr=function(){return 0},ki=function(oo){return Math.exp(dr*xt*oo)}}return i.duration="duration"in i?+i.duration:1e3*Xi/("screenSpeed"in i?+i.screenSpeed/xt:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=E!==re,this._pitching=le!==O,this._padding=!m.isPaddingEqual(xe),this._prepareEase(c,!1),this._ease(dr=>{const oo=dr*Xi,$i=1/ki(oo);m.zoom=1===dr?Y:v+m.scaleZoom($i),this._rotating&&(m.bearing=f.number(E,re,dr)),this._pitching&&(m.pitch=f.number(O,le,dr)),this._padding&&(m.interpolatePadding(j,xe,dr),Pe=m.centerPoint.add(Ze));const vr=1===dr?mt:m.unproject(vt.add(At.mult(nr(oo))).mult($i));m.setLocationAtPoint(m.renderWorldCopies?vr.wrap():vr,Pe),this._fireMoveEvents(c)},()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,c,m){!1===m.animate||0===m.duration?(i(1),c()):(this._easeStart=f.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((f.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=f.wrap(i,-180,180);const m=Math.abs(i-c);return Math.abs(i-360-c)<m&&(i-=360),Math.abs(i+360-c)<m&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const m=i.lng-c.center.lng;i.lng+=m>180?-360:m<-180?360:0}}class z{constructor(i={}){this.options=i,f.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=he.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=he.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){he.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const m=this._map._getUIString(`AttributionControl.${c}`);i.title=m,i.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>"string"!=typeof v?"":v)):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const E=c[v];if(E.used){const O=E.getSource();O.attribution&&i.indexOf(O.attribution)<0&&i.push(O.attribution)}}i=i.filter(v=>String(v).trim()),i.sort((v,E)=>v.length-E.length),i=i.filter((v,E)=>{for(let O=E+1;O<i.length;O++)if(i[O].indexOf(v)>=0)return!1;return!0});const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class P{constructor(i={}){this.options=i,f.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=he.create("div","maplibregl-ctrl mapboxgl-ctrl");const c=he.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){he.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&c.classList.add("maplibregl-compact","mapboxgl-compact"):c.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class A{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Q={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},se={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},be={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ve{constructor(i,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new An({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new bo({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),he.addEventListener(c,"mousedown",this.mousedown),he.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),he.addEventListener(c,"touchmove",this.touchmove),he.addEventListener(c,"touchend",this.touchend),he.addEventListener(c,"touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),he.disableDrag()}move(i,c){const m=this.map,v=this.mouseRotate.mousemoveWindow(i,c);if(v&&v.bearingDelta&&m.setBearing(m.getBearing()+v.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(i,c);E&&E.pitchDelta&&m.setPitch(m.getPitch()+E.pitchDelta)}}off(){const i=this.element;he.removeEventListener(i,"mousedown",this.mousedown),he.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),he.removeEventListener(i,"touchmove",this.touchmove),he.removeEventListener(i,"touchend",this.touchend),he.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){he.enableDrag(),he.removeEventListener(window,"mousemove",this.mousemove),he.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(f.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),he.mousePos(this.element,i)),he.addEventListener(window,"mousemove",this.mousemove),he.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,he.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=he.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=he.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Fe(_,i,c){if(_=new f.LngLat(_.lng,_.lat),i){const m=new f.LngLat(_.lng-360,_.lat),v=new f.LngLat(_.lng+360,_.lat),E=c.locationPoint(_).distSqr(i);c.locationPoint(m).distSqr(i)<E?_=m:c.locationPoint(v).distSqr(i)<E&&(_=v)}for(;Math.abs(_.lng-c.center.lng)>180;){const m=c.locationPoint(_);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;_.lng>c.center.lng?_.lng-=360:_.lng+=360}return _}const Et={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ei(_,i,c){const m=_.classList;for(const v in Et)m.remove(`maplibregl-${c}-anchor-${v}`,`mapboxgl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${i}`,`mapboxgl-${c}-anchor-${i}`)}class Yi extends f.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=f.extend({element:i},c)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=f.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=he.create("div"),this._element.setAttribute("aria-label","Map marker");const m=he.createNS("http://www.w3.org/2000/svg","svg"),v=41,E=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${E}px`),m.setAttributeNS(null,"viewBox",`0 0 ${E} ${v}`);const O=he.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"stroke","none"),O.setAttributeNS(null,"stroke-width","1"),O.setAttributeNS(null,"fill","none"),O.setAttributeNS(null,"fill-rule","evenodd");const j=he.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill-rule","nonzero");const Y=he.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const re=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const At of re){const xt=he.createNS("http://www.w3.org/2000/svg","ellipse");xt.setAttributeNS(null,"opacity","0.04"),xt.setAttributeNS(null,"cx","10.5"),xt.setAttributeNS(null,"cy","5.80029008"),xt.setAttributeNS(null,"rx",At.rx),xt.setAttributeNS(null,"ry",At.ry),Y.appendChild(xt)}const le=he.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"fill",this._color);const xe=he.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),le.appendChild(xe);const Ie=he.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"fill","#000000");const Ze=he.createNS("http://www.w3.org/2000/svg","path");Ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ie.appendChild(Ze);const Pe=he.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");const Ge=he.createNS("http://www.w3.org/2000/svg","g");Ge.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=he.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const vt=he.createNS("http://www.w3.org/2000/svg","circle");vt.setAttributeNS(null,"fill","#FFFFFF"),vt.setAttributeNS(null,"cx","5.5"),vt.setAttributeNS(null,"cy","5.5"),vt.setAttributeNS(null,"r","5.4999962"),Ge.appendChild(mt),Ge.appendChild(vt),j.appendChild(Y),j.appendChild(le),j.appendChild(Ie),j.appendChild(Pe),j.appendChild(Ge),m.appendChild(j),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(m),this._offset=f.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),ei(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),he.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=f.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const c=38.1,m=13.5,v=Math.sqrt(Math.pow(m,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-c],"bottom-left":[v,-1*(c-m+v)],"bottom-right":[-v,-1*(c-m+v)],left:[m,-1*(c-m)],right:[-m,-1*(c-m)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,m=i.charCode||i.keyCode;"Space"!==c&&"Enter"!==c&&32!==m&&13!==m||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Fe(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?c=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?m="rotateX(0deg)":"map"===this._pitchAlignment&&(m=`rotateX(${this._map.getPitch()}deg)`),i&&"moveend"!==i.type||(this._pos=this._pos.round()),he.setTransform(this._element,`${Et[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${c}`)}getOffset(){return this._offset}setOffset(i){return this._offset=f.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new f.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ei={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bi,pr=0,Eo=!1;const Po={maxWidth:100,unit:"metric"};function po(_,i,c){const m=c&&c.maxWidth||100,v=_._container.clientHeight/2,E=_.unproject([0,v]),O=_.unproject([m,v]),j=E.distanceTo(O);if(c&&"imperial"===c.unit){const Y=3.2808*j;Y>5280?mr(i,m,Y/5280,_._getUIString("ScaleControl.Miles")):mr(i,m,Y,_._getUIString("ScaleControl.Feet"))}else c&&"nautical"===c.unit?mr(i,m,j/1852,_._getUIString("ScaleControl.NauticalMiles")):j>=1e3?mr(i,m,j/1e3,_._getUIString("ScaleControl.Kilometers")):mr(i,m,j,_._getUIString("ScaleControl.Meters"))}function mr(_,i,c,m){const v=function(E){const O=Math.pow(10,`${Math.floor(E)}`.length-1);let j=E/O;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:function(Y){const re=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10));return Math.round(Y*re)/re}(j),O*j}(c);_.style.width=i*(v/c)+"px",_.innerHTML=`${v}&nbsp;${m}`}const qr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Us=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ro(_){if(_){if("number"==typeof _){const i=Math.round(Math.sqrt(.5*Math.pow(_,2)));return{center:new f.pointGeometry(0,0),top:new f.pointGeometry(0,_),"top-left":new f.pointGeometry(i,i),"top-right":new f.pointGeometry(-i,i),bottom:new f.pointGeometry(0,-_),"bottom-left":new f.pointGeometry(i,-i),"bottom-right":new f.pointGeometry(-i,-i),left:new f.pointGeometry(_,0),right:new f.pointGeometry(-_,0)}}if(_ instanceof f.pointGeometry||Array.isArray(_)){const i=f.pointGeometry.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:f.pointGeometry.convert(_.center||[0,0]),top:f.pointGeometry.convert(_.top||[0,0]),"top-left":f.pointGeometry.convert(_["top-left"]||[0,0]),"top-right":f.pointGeometry.convert(_["top-right"]||[0,0]),bottom:f.pointGeometry.convert(_.bottom||[0,0]),"bottom-left":f.pointGeometry.convert(_["bottom-left"]||[0,0]),"bottom-right":f.pointGeometry.convert(_["bottom-right"]||[0,0]),left:f.pointGeometry.convert(_.left||[0,0]),right:f.pointGeometry.convert(_.right||[0,0])}}return ro(new f.pointGeometry(0,0))}const Xs={supported:je,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:class extends _a{constructor(_){var i;if(f.PerformanceUtils.mark(f.PerformanceMarkers.create),null!=(_=f.extend({},se,_)).minZoom&&null!=_.maxZoom&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=_.minPitch&&null!=_.maxPitch&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=_.minPitch&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=_.maxPitch&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new _o(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._interactive=_.interactive,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new A,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},Q,_.locale),this._clickTolerance=_.clickTolerance,this._pixelRatio=null!==(i=_.pixelRatio)&&void 0!==i?i:devicePixelRatio,this._requestManager=new ze(_.transformRequest),"string"==typeof _.container){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ho(this,_),this._hash=_.hash&&new yo("string"==typeof _.hash&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,f.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new z({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new P,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update("style"===c.dataType),this.fire(new f.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new f.Event(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new f.Event("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(_,i){if(void 0===i&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=_.onAdd(this);this._controls.push(_);const m=this._controlPositions[i];return-1!==i.indexOf("bottom")?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}resize(_){const i=this._containerDimensions(),c=i[0],m=i[1];this._resizeCanvas(c,m,this.getPixelRatio()),this.transform.resize(c,m),this.painter.resize(c,m,this.getPixelRatio());const v=!this._moving;return v&&(this.stop(),this.fire(new f.Event("movestart",_)).fire(new f.Event("move",_))),this.fire(new f.Event("resize",_)),v&&this.fire(new f.Event("moveend",_)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(_){const[i,c]=this._containerDimensions();this._pixelRatio=_,this._resizeCanvas(i,c,_),this.painter.resize(i,c,_)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(f.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=null==_?-2:_)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=null==_?22:_)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=null==_?0:_)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=null==_?60:_)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(f.LngLat.convert(_))}unproject(_){return this.transform.pointLocation(f.pointGeometry.convert(_))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(_,i,c){if("mouseenter"===_||"mouseover"===_){let m=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{const O=this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[];O.length?m||(m=!0,c.call(this,new jn(_,this,E.originalEvent,{features:O}))):m=!1},mouseout:()=>{m=!1}}}}if("mouseleave"===_||"mouseout"===_){let m=!1;return{layer:i,listener:c,delegates:{mousemove:O=>{(this.getLayer(i)?this.queryRenderedFeatures(O.point,{layers:[i]}):[]).length?m=!0:m&&(m=!1,c.call(this,new jn(_,this,O.originalEvent)))},mouseout:O=>{m&&(m=!1,c.call(this,new jn(_,this,O.originalEvent)))}}}}{const m=v=>{const E=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];E.length&&(v.features=E,c.call(this,v),delete v.features)};return{layer:i,listener:c,delegates:{[_]:m}}}}on(_,i,c){if(void 0===c)return super.on(_,i);const m=this._createDelegatedListener(_,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(_,i,c){if(void 0===c)return super.once(_,i);const m=this._createDelegatedListener(_,i,c);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(_,i,c){return void 0===c?super.off(_,i):(this._delegatedListeners&&this._delegatedListeners[_]&&(m=>{const v=this._delegatedListeners[_];for(let E=0;E<v.length;E++){const O=v[E];if(O.layer===i&&O.listener===c){for(const j in O.delegates)this.off(j,O.delegates[j]);return v.splice(E,1),this}}})(),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let c;if(void 0!==i||void 0===_||_ instanceof f.pointGeometry||Array.isArray(_)||(i=_,_=void 0),i=i||{},(_=_||[[0,0],[this.transform.width,this.transform.height]])instanceof f.pointGeometry||"number"==typeof _[0])c=[f.pointGeometry.convert(_)];else{const m=f.pointGeometry.convert(_[0]),v=f.pointGeometry.convert(_[1]);c=[m,new f.pointGeometry(v.x,m.y),v,new f.pointGeometry(m.x,v.y),m]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return!1!==(i=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(null==i)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),_?(this.style=new Ji(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof _?this.style.loadURL(_):this.style.loadJSON(_),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ji(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if("string"==typeof _){const c=this._requestManager.transformRequest(_,f.ResourceType.Style);f.getJSON(c,(m,v)=>{m?this.fire(new f.ErrorEvent(m)):v&&this._updateDiff(v,i)})}else"object"==typeof _&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_)&&this._update(!0)}catch(c){f.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(void 0!==i)return i.loaded();this.fire(new f.ErrorEvent(new Error(`There is no source with ID '${_}'`)))}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const c=_[i]._tiles;for(const m in c){const v=c[m];if("loaded"!==v.state&&"errored"!==v.state)return!1}}return!0}addSourceType(_,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,i,c)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,i,{pixelRatio:c=1,sdf:m=!1,stretchX:v,stretchY:E,content:O}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||f.isImageBitmap(i)){const{width:j,height:Y,data:re}=f.exported.getImageData(i);this.style.addImage(_,{data:new f.RGBAImage({width:j,height:Y},re),pixelRatio:c,stretchX:v,stretchY:E,content:O,sdf:m,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:j,height:Y,data:re}=i,le=i;this.style.addImage(_,{data:new f.RGBAImage({width:j,height:Y},new Uint8Array(re)),pixelRatio:c,stretchX:v,stretchY:E,content:O,sdf:m,version:0,userImage:le}),le.onAdd&&le.onAdd(this,_)}}}updateImage(_,i){const c=this.style.getImage(_);if(!c)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||f.isImageBitmap(i)?f.exported.getImageData(i):i,{width:v,height:E,data:O}=m;if(void 0===v||void 0===E)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||E!==c.data.height)return this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(i instanceof HTMLImageElement||f.isImageBitmap(i));c.data.replace(O,j),this.style.updateImage(_,c)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,i){f.getImage(this._requestManager.transformRequest(_,f.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,i,c){return this.style.setLayerZoomRange(_,i,c),this._update(!0)}setFilter(_,i,c={}){return this.style.setFilter(_,i,c),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,c,m={}){return this.style.setPaintProperty(_,i,c,m),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,c,m={}){return this.style.setLayoutProperty(_,i,c,m),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=he.create("div","maplibregl-canvas-container mapboxgl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=he.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1],this.getPixelRatio());const m=this._controlContainer=he.create("div","maplibregl-control-container mapboxgl-control-container",_),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{v[E]=he.create("div",`maplibregl-ctrl-${E} mapboxgl-ctrl-${E}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,c){this._canvas.width=c*_,this._canvas.height=c*i,this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _=f.extend({},je.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);i?(this.painter=new Lr(i,this.transform),f.exported$1.testSupport(i)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){let i,c=0;const m=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,i),c=f.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,j=f.exported.now();this.style.zoomHistory.update(O,j);const Y=new f.EvaluationParameters(O,{now:j,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=Y.crossFadingFactor();1===re&&re===this._crossFadingFactor||(v=!0,this._crossFadingFactor=re),this.style.update(Y)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,f.PerformanceUtils.mark(f.PerformanceMarkers.load),this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const O=f.exported.now()-c;m.endQueryEXT(m.TIME_ELAPSED_EXT,i),setTimeout(()=>{const j=m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(i),this.fire(new f.Event("gpu-timing-frame",{cpuTime:O,gpuTime:j}))},50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout(()=>{const j=this.painter.queryGpuTimers(O);this.fire(new f.Event("gpu-timing-layer",{layerTimes:j}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new f.Event("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,f.PerformanceUtils.mark(f.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),he.remove(this._canvasContainer),he.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),f.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new f.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=f.exported.frame(_=>{f.PerformanceUtils.frame(_),this._frame=null,this._render(_)}))}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}_setCacheLimits(_,i){f.setCacheLimits(_,i)}},NavigationControl:class{constructor(_){this.options=f.extend({},be,_),this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map.getZoom(),i=_===this._map.getMaxZoom(),c=_===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const _=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=_}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ve(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){he.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const c=he.create("button",_,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(_,i){const c=this._map._getUIString(`NavigationControl.${i}`);_.title=c,_.setAttribute("aria-label",c)}},GeolocateControl:class extends f.Evented{constructor(_){super(),this.options=f.extend({},Ei,_),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(_){var i;return this._map=_,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Bi?i(Bi):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(c=>{Bi="denied"!==c.state,i(Bi)}):(Bi=!!window.navigator.geolocation,i(Bi)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),he.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pr=0,Eo=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),c=_.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(_),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",_)),this._finish()}}_updateCamera(_){const i=new f.LngLat(_.coords.longitude,_.coords.latitude),c=_.coords.accuracy,m=this._map.getBearing(),v=f.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),v,{geolocateSource:!0})}_updateMarker(_){if(_){const i=new f.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map._container.clientHeight/2,i=this._map.unproject([0,_]),c=this._map.unproject([1,_]),m=i.distanceTo(c),v=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(_){if(this._map){if(this.options.trackUserLocation)if(1===_.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===_.code&&Eo)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=he.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===_){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Yi(this._dotElement),this._circleElement=he.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new f.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pr--,Eo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pr++,pr>1?(_={maximumAge:6e5,timeout:0},Eo=!0):(_=this.options.positionOptions,Eo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:z,LogoControl:P,ScaleControl:class{constructor(_){this.options=f.extend({},Po,_),f.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){po(this._map,this._container,this.options)}onAdd(_){return this._map=_,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){he.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(_){this.options.unit=_,po(this._map,this._container,this.options)}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){he.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=he.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends f.Evented{constructor(_){super(),this.options=f.extend(Object.create(qr),_),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&he.remove(this._content),this._container&&(he.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=f.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=_;m=c.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=he.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=he.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(_){this._update(_.point)}_onMouseMove(_){this._update(_.point)}_onDrag(_){this._update(_.point)}_update(_){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=he.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=he.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fe(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!_))return;const i=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat);let c=this.options.anchor;const m=ro(this.options.offset);if(!c){const E=this._container.offsetWidth,O=this._container.offsetHeight;let j;j=i.y+m.bottom.y<O?["top"]:i.y>this._map.transform.height-O?["bottom"]:[],i.x<E/2?j.push("left"):i.x>this._map.transform.width-E/2&&j.push("right"),c=0===j.length?"bottom":j.join("-")}const v=i.add(m[c]).round();he.setTransform(this._container,`${Et[c]} translate(${v.x}px,${v.y}px)`),ei(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Us);_&&_.focus()}_onClose(){this.remove()}},Marker:Yi,Style:Ji,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.pointGeometry,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,AJAXError:f.AJAXError,config:f.config,CanvasSource:Ii,GeoJSONSource:fi,ImageSource:Dn,RasterDEMTileSource:vn,RasterTileSource:Xt,VectorTileSource:Tt,VideoSource:Tn,prewarm:function(){Kn().acquire(Jn)},clearPrewarmedResources:function(){const _=sr;_&&(_.isPreloaded()&&1===_.numActive()?(_.release(Jn),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Pi.workerCount},set workerCount(_){Pi.workerCount=_},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){f.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){f.clearTileCache(_)},workerUrl:"",addProtocol(_,i){f.config.REGISTERED_PROTOCOLS[_]=i},removeProtocol(_){delete f.config.REGISTERED_PROTOCOLS[_]}};return Vr.extend(Xs,{isSafari:f.isSafari,getPerformanceMetrics:f.PerformanceUtils.getPerformanceMetrics}),Xs}),D}()},1777:(Sn,wt,V)=>{"use strict";V.d(wt,{l3:()=>W,_j:()=>D,LC:()=>l,ZN:()=>Ut,jt:()=>je,pV:()=>gt,F4:()=>ze,IO:()=>et,vP:()=>Oe,SB:()=>he,oB:()=>Le,eR:()=>He,X$:()=>f,ZE:()=>jt,k1:()=>un});class D{}class l{}const W="*";function f(Dt,ke){return{type:7,name:Dt,definitions:ke,options:{}}}function je(Dt,ke=null){return{type:4,styles:ke,timings:Dt}}function Oe(Dt,ke=null){return{type:2,steps:Dt,options:ke}}function Le(Dt){return{type:6,styles:Dt,offset:null}}function he(Dt,ke,ot){return{type:0,name:Dt,styles:ke,options:ot}}function ze(Dt){return{type:5,steps:Dt}}function He(Dt,ke,ot=null){return{type:1,expr:Dt,animation:ke,options:ot}}function gt(Dt=null){return{type:9,options:Dt}}function et(Dt,ke,ot=null){return{type:11,selector:Dt,animation:ke,options:ot}}function We(Dt){Promise.resolve(null).then(Dt)}class Ut{constructor(ke=0,ot=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ke+ot}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ke=>ke()),this._onDoneFns=[])}onStart(ke){this._onStartFns.push(ke)}onDone(ke){this._onDoneFns.push(ke)}onDestroy(ke){this._onDestroyFns.push(ke)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){We(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ke=>ke()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ke=>ke()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ke){this._position=this.totalTime?ke*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ke){const ot="start"==ke?this._onStartFns:this._onDoneFns;ot.forEach(nn=>nn()),ot.length=0}}class jt{constructor(ke){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ke;let ot=0,nn=0,zt=0;const tn=this.players.length;0==tn?We(()=>this._onFinish()):this.players.forEach(st=>{st.onDone(()=>{++ot==tn&&this._onFinish()}),st.onDestroy(()=>{++nn==tn&&this._onDestroy()}),st.onStart(()=>{++zt==tn&&this._onStart()})}),this.totalTime=this.players.reduce((st,yt)=>Math.max(st,yt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ke=>ke()),this._onDoneFns=[])}init(){this.players.forEach(ke=>ke.init())}onStart(ke){this._onStartFns.push(ke)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ke=>ke()),this._onStartFns=[])}onDone(ke){this._onDoneFns.push(ke)}onDestroy(ke){this._onDestroyFns.push(ke)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ke=>ke.play())}pause(){this.players.forEach(ke=>ke.pause())}restart(){this.players.forEach(ke=>ke.restart())}finish(){this._onFinish(),this.players.forEach(ke=>ke.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ke=>ke.destroy()),this._onDestroyFns.forEach(ke=>ke()),this._onDestroyFns=[])}reset(){this.players.forEach(ke=>ke.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ke){const ot=ke*this.totalTime;this.players.forEach(nn=>{const zt=nn.totalTime?Math.min(1,ot/nn.totalTime):1;nn.setPosition(zt)})}getPosition(){const ke=this.players.reduce((ot,nn)=>null===ot||nn.totalTime>ot.totalTime?nn:ot,null);return null!=ke?ke.getPosition():0}beforeDestroy(){this.players.forEach(ke=>{ke.beforeDestroy&&ke.beforeDestroy()})}triggerCallback(ke){const ot="start"==ke?this._onStartFns:this._onDoneFns;ot.forEach(nn=>nn()),ot.length=0}}const un="!"},5664:(Sn,wt,V)=>{"use strict";V.d(wt,{rt:()=>pt,s1:()=>vn,$s:()=>ct,Em:()=>fi,tE:()=>pn,qV:()=>Pi,qm:()=>Bt,ic:()=>Dn,Kd:()=>_n,X6:()=>$,yG:()=>U});var D=V(9808),l=V(5e3),W=V(7579),f=V(727),je=V(1135),qe=V(9646),Oe=V(1159),Le=V(8505),he=V(8372),ze=V(9300),He=V(4004),Be=V(5698),gt=V(5684),Ye=V(1884),et=V(2722),bt=V(3191),We=V(925),Ut=V(7144);function ke(Ce,Ae){return(Ce.getAttribute(Ae)||"").match(/\S+/g)||[]}const ot="cdk-describedby-message-container",nn="cdk-describedby-message",zt="cdk-describedby-host";let tn=0;const st=new Map;let yt=null,ct=(()=>{class Ce{constructor(ye){this._document=ye}describe(ye,lt,Pt){if(!this._canBeDescribed(ye,lt))return;const fn=Tt(lt,Pt);"string"!=typeof lt?(Xt(lt),st.set(fn,{messageElement:lt,referenceCount:0})):st.has(fn)||this._createMessageElement(lt,Pt),this._isElementDescribedByMessage(ye,fn)||this._addMessageReference(ye,fn)}removeDescription(ye,lt,Pt){if(!lt||!this._isElementNode(ye))return;const fn=Tt(lt,Pt);if(this._isElementDescribedByMessage(ye,fn)&&this._removeMessageReference(ye,fn),"string"==typeof lt){const bi=st.get(fn);bi&&0===bi.referenceCount&&this._deleteMessageElement(fn)}yt&&0===yt.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const ye=this._document.querySelectorAll(`[${zt}]`);for(let lt=0;lt<ye.length;lt++)this._removeCdkDescribedByReferenceIds(ye[lt]),ye[lt].removeAttribute(zt);yt&&this._deleteMessagesContainer(),st.clear()}_createMessageElement(ye,lt){const Pt=this._document.createElement("div");Xt(Pt),Pt.textContent=ye,lt&&Pt.setAttribute("role",lt),this._createMessagesContainer(),yt.appendChild(Pt),st.set(Tt(ye,lt),{messageElement:Pt,referenceCount:0})}_deleteMessageElement(ye){var lt;const Pt=st.get(ye);null===(lt=null==Pt?void 0:Pt.messageElement)||void 0===lt||lt.remove(),st.delete(ye)}_createMessagesContainer(){if(!yt){const ye=this._document.getElementById(ot);null==ye||ye.remove(),yt=this._document.createElement("div"),yt.id=ot,yt.style.visibility="hidden",yt.classList.add("cdk-visually-hidden"),this._document.body.appendChild(yt)}}_deleteMessagesContainer(){yt&&(yt.remove(),yt=null)}_removeCdkDescribedByReferenceIds(ye){const lt=ke(ye,"aria-describedby").filter(Pt=>0!=Pt.indexOf(nn));ye.setAttribute("aria-describedby",lt.join(" "))}_addMessageReference(ye,lt){const Pt=st.get(lt);(function un(Ce,Ae,ye){const lt=ke(Ce,Ae);lt.some(Pt=>Pt.trim()==ye.trim())||(lt.push(ye.trim()),Ce.setAttribute(Ae,lt.join(" ")))})(ye,"aria-describedby",Pt.messageElement.id),ye.setAttribute(zt,""),Pt.referenceCount++}_removeMessageReference(ye,lt){const Pt=st.get(lt);Pt.referenceCount--,function Dt(Ce,Ae,ye){const Pt=ke(Ce,Ae).filter(fn=>fn!=ye.trim());Pt.length?Ce.setAttribute(Ae,Pt.join(" ")):Ce.removeAttribute(Ae)}(ye,"aria-describedby",Pt.messageElement.id),ye.removeAttribute(zt)}_isElementDescribedByMessage(ye,lt){const Pt=ke(ye,"aria-describedby"),fn=st.get(lt),bi=fn&&fn.messageElement.id;return!!bi&&-1!=Pt.indexOf(bi)}_canBeDescribed(ye,lt){if(!this._isElementNode(ye))return!1;if(lt&&"object"==typeof lt)return!0;const Pt=null==lt?"":`${lt}`.trim(),fn=ye.getAttribute("aria-label");return!(!Pt||fn&&fn.trim()===Pt)}_isElementNode(ye){return ye.nodeType===this._document.ELEMENT_NODE}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(D.K0))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();function Tt(Ce,Ae){return"string"==typeof Ce?`${Ae||""}/${Ce}`:Ce}function Xt(Ce){Ce.id||(Ce.id=`${nn}-${tn++}`)}class Ct{constructor(Ae){this._items=Ae,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new W.x,this._typeaheadSubscription=f.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=ye=>ye.disabled,this._pressedLetters=[],this.tabOut=new W.x,this.change=new W.x,Ae instanceof l.n_E&&Ae.changes.subscribe(ye=>{if(this._activeItem){const Pt=ye.toArray().indexOf(this._activeItem);Pt>-1&&Pt!==this._activeItemIndex&&(this._activeItemIndex=Pt)}})}skipPredicate(Ae){return this._skipPredicateFn=Ae,this}withWrap(Ae=!0){return this._wrap=Ae,this}withVerticalOrientation(Ae=!0){return this._vertical=Ae,this}withHorizontalOrientation(Ae){return this._horizontal=Ae,this}withAllowedModifierKeys(Ae){return this._allowedModifierKeys=Ae,this}withTypeAhead(Ae=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Le.b)(ye=>this._pressedLetters.push(ye)),(0,he.b)(Ae),(0,ze.h)(()=>this._pressedLetters.length>0),(0,He.U)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const lt=this._getItemsArray();for(let Pt=1;Pt<lt.length+1;Pt++){const fn=(this._activeItemIndex+Pt)%lt.length,bi=lt[fn];if(!this._skipPredicateFn(bi)&&0===bi.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(fn);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Ae=!0){return this._homeAndEnd=Ae,this}setActiveItem(Ae){const ye=this._activeItem;this.updateActiveItem(Ae),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(Ae){const ye=Ae.keyCode,Pt=["altKey","ctrlKey","metaKey","shiftKey"].every(fn=>!Ae[fn]||this._allowedModifierKeys.indexOf(fn)>-1);switch(ye){case Oe.Mf:return void this.tabOut.next();case Oe.JH:if(this._vertical&&Pt){this.setNextItemActive();break}return;case Oe.LH:if(this._vertical&&Pt){this.setPreviousItemActive();break}return;case Oe.SV:if(this._horizontal&&Pt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Oe.oh:if(this._horizontal&&Pt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Oe.Sd:if(this._homeAndEnd&&Pt){this.setFirstItemActive();break}return;case Oe.uR:if(this._homeAndEnd&&Pt){this.setLastItemActive();break}return;default:return void((Pt||(0,Oe.Vb)(Ae,"shiftKey"))&&(Ae.key&&1===Ae.key.length?this._letterKeyStream.next(Ae.key.toLocaleUpperCase()):(ye>=Oe.A&&ye<=Oe.Z||ye>=Oe.xE&&ye<=Oe.aO)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],Ae.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Ae){const ye=this._getItemsArray(),lt="number"==typeof Ae?Ae:ye.indexOf(Ae),Pt=ye[lt];this._activeItem=null==Pt?null:Pt,this._activeItemIndex=lt}_setActiveItemByDelta(Ae){this._wrap?this._setActiveInWrapMode(Ae):this._setActiveInDefaultMode(Ae)}_setActiveInWrapMode(Ae){const ye=this._getItemsArray();for(let lt=1;lt<=ye.length;lt++){const Pt=(this._activeItemIndex+Ae*lt+ye.length)%ye.length;if(!this._skipPredicateFn(ye[Pt]))return void this.setActiveItem(Pt)}}_setActiveInDefaultMode(Ae){this._setActiveItemByIndex(this._activeItemIndex+Ae,Ae)}_setActiveItemByIndex(Ae,ye){const lt=this._getItemsArray();if(lt[Ae]){for(;this._skipPredicateFn(lt[Ae]);)if(!lt[Ae+=ye])return;this.setActiveItem(Ae)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class vn extends Ct{setActiveItem(Ae){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Ae),this.activeItem&&this.activeItem.setActiveStyles()}}class fi extends Ct{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Ae){return this._origin=Ae,this}setActiveItem(Ae){super.setActiveItem(Ae),this.activeItem&&this.activeItem.focus(this._origin)}}let Dn=(()=>{class Ce{constructor(ye){this._platform=ye}isDisabled(ye){return ye.hasAttribute("disabled")}isVisible(ye){return function Ii(Ce){return!!(Ce.offsetWidth||Ce.offsetHeight||"function"==typeof Ce.getClientRects&&Ce.getClientRects().length)}(ye)&&"visible"===getComputedStyle(ye).visibility}isTabbable(ye){if(!this._platform.isBrowser)return!1;const lt=function Tn(Ce){try{return Ce.frameElement}catch(Ae){return null}}(function zn(Ce){return Ce.ownerDocument&&Ce.ownerDocument.defaultView||window}(ye));if(lt&&(-1===Ft(lt)||!this.isVisible(lt)))return!1;let Pt=ye.nodeName.toLowerCase(),fn=Ft(ye);return ye.hasAttribute("contenteditable")?-1!==fn:!("iframe"===Pt||"object"===Pt||this._platform.WEBKIT&&this._platform.IOS&&!function on(Ce){let Ae=Ce.nodeName.toLowerCase(),ye="input"===Ae&&Ce.type;return"text"===ye||"password"===ye||"select"===Ae||"textarea"===Ae}(ye))&&("audio"===Pt?!!ye.hasAttribute("controls")&&-1!==fn:"video"===Pt?-1!==fn&&(null!==fn||this._platform.FIREFOX||ye.hasAttribute("controls")):ye.tabIndex>=0)}isFocusable(ye,lt){return function gn(Ce){return!function ir(Ce){return function kn(Ce){return"input"==Ce.nodeName.toLowerCase()}(Ce)&&"hidden"==Ce.type}(Ce)&&(function ci(Ce){let Ae=Ce.nodeName.toLowerCase();return"input"===Ae||"select"===Ae||"button"===Ae||"textarea"===Ae}(Ce)||function _i(Ce){return function ii(Ce){return"a"==Ce.nodeName.toLowerCase()}(Ce)&&Ce.hasAttribute("href")}(Ce)||Ce.hasAttribute("contenteditable")||ft(Ce))}(ye)&&!this.isDisabled(ye)&&((null==lt?void 0:lt.ignoreVisibility)||this.isVisible(ye))}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(We.t4))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();function ft(Ce){if(!Ce.hasAttribute("tabindex")||void 0===Ce.tabIndex)return!1;let Ae=Ce.getAttribute("tabindex");return!(!Ae||isNaN(parseInt(Ae,10)))}function Ft(Ce){if(!ft(Ce))return null;const Ae=parseInt(Ce.getAttribute("tabindex")||"",10);return isNaN(Ae)?-1:Ae}class Jn{constructor(Ae,ye,lt,Pt,fn=!1){this._element=Ae,this._checker=ye,this._ngZone=lt,this._document=Pt,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,fn||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Ae){this._enabled=Ae,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ae,this._startAnchor),this._toggleAnchorTabIndex(Ae,this._endAnchor))}destroy(){const Ae=this._startAnchor,ye=this._endAnchor;Ae&&(Ae.removeEventListener("focus",this.startAnchorListener),Ae.remove()),ye&&(ye.removeEventListener("focus",this.endAnchorListener),ye.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusInitialElement(Ae)))})}focusFirstTabbableElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusFirstTabbableElement(Ae)))})}focusLastTabbableElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusLastTabbableElement(Ae)))})}_getRegionBoundary(Ae){const ye=this._element.querySelectorAll(`[cdk-focus-region-${Ae}], [cdkFocusRegion${Ae}], [cdk-focus-${Ae}]`);return"start"==Ae?ye.length?ye[0]:this._getFirstTabbableElement(this._element):ye.length?ye[ye.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Ae){const ye=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ye){if(!this._checker.isFocusable(ye)){const lt=this._getFirstTabbableElement(ye);return null==lt||lt.focus(Ae),!!lt}return ye.focus(Ae),!0}return this.focusFirstTabbableElement(Ae)}focusFirstTabbableElement(Ae){const ye=this._getRegionBoundary("start");return ye&&ye.focus(Ae),!!ye}focusLastTabbableElement(Ae){const ye=this._getRegionBoundary("end");return ye&&ye.focus(Ae),!!ye}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Ae){if(this._checker.isFocusable(Ae)&&this._checker.isTabbable(Ae))return Ae;const ye=Ae.children;for(let lt=0;lt<ye.length;lt++){const Pt=ye[lt].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ye[lt]):null;if(Pt)return Pt}return null}_getLastTabbableElement(Ae){if(this._checker.isFocusable(Ae)&&this._checker.isTabbable(Ae))return Ae;const ye=Ae.children;for(let lt=ye.length-1;lt>=0;lt--){const Pt=ye[lt].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ye[lt]):null;if(Pt)return Pt}return null}_createAnchor(){const Ae=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Ae),Ae.classList.add("cdk-visually-hidden"),Ae.classList.add("cdk-focus-trap-anchor"),Ae.setAttribute("aria-hidden","true"),Ae}_toggleAnchorTabIndex(Ae,ye){Ae?ye.setAttribute("tabindex","0"):ye.removeAttribute("tabindex")}toggleAnchors(Ae){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ae,this._startAnchor),this._toggleAnchorTabIndex(Ae,this._endAnchor))}_executeOnStable(Ae){this._ngZone.isStable?Ae():this._ngZone.onStable.pipe((0,Be.q)(1)).subscribe(Ae)}}let Pi=(()=>{class Ce{constructor(ye,lt,Pt){this._checker=ye,this._ngZone=lt,this._document=Pt}create(ye,lt=!1){return new Jn(ye,this._checker,this._ngZone,this._document,lt)}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(Dn),l.LFG(l.R0b),l.LFG(D.K0))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();function $(Ce){return 0===Ce.buttons||0===Ce.offsetX&&0===Ce.offsetY}function U(Ce){const Ae=Ce.touches&&Ce.touches[0]||Ce.changedTouches&&Ce.changedTouches[0];return!(!Ae||-1!==Ae.identifier||null!=Ae.radiusX&&1!==Ae.radiusX||null!=Ae.radiusY&&1!==Ae.radiusY)}const R=new l.OlP("cdk-input-modality-detector-options"),B={ignoreKeys:[Oe.zL,Oe.jx,Oe.b2,Oe.MW,Oe.JU]},fe=(0,We.i$)({passive:!0,capture:!0});let tt=(()=>{class Ce{constructor(ye,lt,Pt,fn){this._platform=ye,this._mostRecentTarget=null,this._modality=new je.X(null),this._lastTouchMs=0,this._onKeydown=bi=>{var Ui,tr;(null===(tr=null===(Ui=this._options)||void 0===Ui?void 0:Ui.ignoreKeys)||void 0===tr?void 0:tr.some(St=>St===bi.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,We.sA)(bi))},this._onMousedown=bi=>{Date.now()-this._lastTouchMs<650||(this._modality.next($(bi)?"keyboard":"mouse"),this._mostRecentTarget=(0,We.sA)(bi))},this._onTouchstart=bi=>{U(bi)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,We.sA)(bi))},this._options=Object.assign(Object.assign({},B),fn),this.modalityDetected=this._modality.pipe((0,gt.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ye.x)()),ye.isBrowser&&lt.runOutsideAngular(()=>{Pt.addEventListener("keydown",this._onKeydown,fe),Pt.addEventListener("mousedown",this._onMousedown,fe),Pt.addEventListener("touchstart",this._onTouchstart,fe)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fe),document.removeEventListener("mousedown",this._onMousedown,fe),document.removeEventListener("touchstart",this._onTouchstart,fe))}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(We.t4),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(R,8))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();const It=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function _t(){return null}}),mn=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let _n=(()=>{class Ce{constructor(ye,lt,Pt,fn){this._ngZone=lt,this._defaultOptions=fn,this._document=Pt,this._liveElement=ye||this._createLiveElement()}announce(ye,...lt){const Pt=this._defaultOptions;let fn,bi;return 1===lt.length&&"number"==typeof lt[0]?bi=lt[0]:[fn,bi]=lt,this.clear(),clearTimeout(this._previousTimeout),fn||(fn=Pt&&Pt.politeness?Pt.politeness:"polite"),null==bi&&Pt&&(bi=Pt.duration),this._liveElement.setAttribute("aria-live",fn),this._ngZone.runOutsideAngular(()=>new Promise(Ui=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ye,Ui(),"number"==typeof bi&&(this._previousTimeout=setTimeout(()=>this.clear(),bi))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var ye;clearTimeout(this._previousTimeout),null===(ye=this._liveElement)||void 0===ye||ye.remove(),this._liveElement=null}_createLiveElement(){const ye="cdk-live-announcer-element",lt=this._document.getElementsByClassName(ye),Pt=this._document.createElement("div");for(let fn=0;fn<lt.length;fn++)lt[fn].remove();return Pt.classList.add(ye),Pt.classList.add("cdk-visually-hidden"),Pt.setAttribute("aria-atomic","true"),Pt.setAttribute("aria-live","polite"),this._document.body.appendChild(Pt),Pt}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(It,8),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(mn,8))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();const yi=new l.OlP("cdk-focus-monitor-default-options"),en=(0,We.i$)({passive:!0,capture:!0});let pn=(()=>{class Ce{constructor(ye,lt,Pt,fn,bi){this._ngZone=ye,this._platform=lt,this._inputModalityDetector=Pt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new W.x,this._rootNodeFocusAndBlurListener=Ui=>{const tr=(0,We.sA)(Ui),St="focus"===Ui.type?this._onFocus:this._onBlur;for(let it=tr;it;it=it.parentElement)St.call(this,Ui,it)},this._document=fn,this._detectionMode=(null==bi?void 0:bi.detectionMode)||0}monitor(ye,lt=!1){const Pt=(0,bt.fI)(ye);if(!this._platform.isBrowser||1!==Pt.nodeType)return(0,qe.of)(null);const fn=(0,We.kV)(Pt)||this._getDocument(),bi=this._elementInfo.get(Pt);if(bi)return lt&&(bi.checkChildren=!0),bi.subject;const Ui={checkChildren:lt,subject:new W.x,rootNode:fn};return this._elementInfo.set(Pt,Ui),this._registerGlobalListeners(Ui),Ui.subject}stopMonitoring(ye){const lt=(0,bt.fI)(ye),Pt=this._elementInfo.get(lt);Pt&&(Pt.subject.complete(),this._setClasses(lt),this._elementInfo.delete(lt),this._removeGlobalListeners(Pt))}focusVia(ye,lt,Pt){const fn=(0,bt.fI)(ye);fn===this._getDocument().activeElement?this._getClosestElementsInfo(fn).forEach(([Ui,tr])=>this._originChanged(Ui,lt,tr)):(this._setOrigin(lt),"function"==typeof fn.focus&&fn.focus(Pt))}ngOnDestroy(){this._elementInfo.forEach((ye,lt)=>this.stopMonitoring(lt))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ye){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ye)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(ye){return 1===this._detectionMode||!!(null==ye?void 0:ye.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(ye,lt){ye.classList.toggle("cdk-focused",!!lt),ye.classList.toggle("cdk-touch-focused","touch"===lt),ye.classList.toggle("cdk-keyboard-focused","keyboard"===lt),ye.classList.toggle("cdk-mouse-focused","mouse"===lt),ye.classList.toggle("cdk-program-focused","program"===lt)}_setOrigin(ye,lt=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ye,this._originFromTouchInteraction="touch"===ye&&lt,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ye,lt){const Pt=this._elementInfo.get(lt),fn=(0,We.sA)(ye);!Pt||!Pt.checkChildren&&lt!==fn||this._originChanged(lt,this._getFocusOrigin(fn),Pt)}_onBlur(ye,lt){const Pt=this._elementInfo.get(lt);!Pt||Pt.checkChildren&&ye.relatedTarget instanceof Node&&lt.contains(ye.relatedTarget)||(this._setClasses(lt),this._emitOrigin(Pt.subject,null))}_emitOrigin(ye,lt){this._ngZone.run(()=>ye.next(lt))}_registerGlobalListeners(ye){if(!this._platform.isBrowser)return;const lt=ye.rootNode,Pt=this._rootNodeFocusListenerCount.get(lt)||0;Pt||this._ngZone.runOutsideAngular(()=>{lt.addEventListener("focus",this._rootNodeFocusAndBlurListener,en),lt.addEventListener("blur",this._rootNodeFocusAndBlurListener,en)}),this._rootNodeFocusListenerCount.set(lt,Pt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,et.R)(this._stopInputModalityDetector)).subscribe(fn=>{this._setOrigin(fn,!0)}))}_removeGlobalListeners(ye){const lt=ye.rootNode;if(this._rootNodeFocusListenerCount.has(lt)){const Pt=this._rootNodeFocusListenerCount.get(lt);Pt>1?this._rootNodeFocusListenerCount.set(lt,Pt-1):(lt.removeEventListener("focus",this._rootNodeFocusAndBlurListener,en),lt.removeEventListener("blur",this._rootNodeFocusAndBlurListener,en),this._rootNodeFocusListenerCount.delete(lt))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ye,lt,Pt){this._setClasses(ye,lt),this._emitOrigin(Pt.subject,lt),this._lastFocusOrigin=lt}_getClosestElementsInfo(ye){const lt=[];return this._elementInfo.forEach((Pt,fn)=>{(fn===ye||Pt.checkChildren&&fn.contains(ye))&&lt.push([fn,Pt])}),lt}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(l.R0b),l.LFG(We.t4),l.LFG(tt),l.LFG(D.K0,8),l.LFG(yi,8))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();const Ai="cdk-high-contrast-black-on-white",Qn="cdk-high-contrast-white-on-black",Ln="cdk-high-contrast-active";let Bt=(()=>{class Ce{constructor(ye,lt){this._platform=ye,this._document=lt}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const lt=this._document.defaultView||window,Pt=lt&&lt.getComputedStyle?lt.getComputedStyle(ye):null,fn=(Pt&&Pt.backgroundColor||"").replace(/ /g,"");switch(ye.remove(),fn){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(Ln),ye.remove(Ai),ye.remove(Qn),this._hasCheckedHighContrastMode=!0;const lt=this.getHighContrastMode();1===lt?(ye.add(Ln),ye.add(Ai)):2===lt&&(ye.add(Ln),ye.add(Qn))}}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(We.t4),l.LFG(D.K0))},Ce.\u0275prov=l.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})(),pt=(()=>{class Ce{constructor(ye){ye._applyBodyHighContrastModeCssClasses()}}return Ce.\u0275fac=function(ye){return new(ye||Ce)(l.LFG(Bt))},Ce.\u0275mod=l.oAB({type:Ce}),Ce.\u0275inj=l.cJS({imports:[[We.ud,Ut.Q8]]}),Ce})()},226:(Sn,wt,V)=>{"use strict";V.d(wt,{vT:()=>he,Is:()=>Oe});var D=V(5e3),l=V(9808);const W=new D.OlP("cdk-dir-doc",{providedIn:"root",factory:function f(){return(0,D.f3M)(l.K0)}}),je=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Oe=(()=>{class ze{constructor(Be){if(this.value="ltr",this.change=new D.vpe,Be){const Ye=Be.documentElement?Be.documentElement.dir:null;this.value=function qe(ze){const He=(null==ze?void 0:ze.toLowerCase())||"";return"auto"===He&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?je.test(navigator.language)?"rtl":"ltr":"rtl"===He?"rtl":"ltr"}((Be.body?Be.body.dir:null)||Ye||"ltr")}}ngOnDestroy(){this.change.complete()}}return ze.\u0275fac=function(Be){return new(Be||ze)(D.LFG(W,8))},ze.\u0275prov=D.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})(),he=(()=>{class ze{}return ze.\u0275fac=function(Be){return new(Be||ze)},ze.\u0275mod=D.oAB({type:ze}),ze.\u0275inj=D.cJS({}),ze})()},3191:(Sn,wt,V)=>{"use strict";V.d(wt,{Eq:()=>je,Ig:()=>l,HM:()=>qe,fI:()=>Oe,su:()=>W});var D=V(5e3);function l(he){return null!=he&&"false"!=`${he}`}function W(he,ze=0){return function f(he){return!isNaN(parseFloat(he))&&!isNaN(Number(he))}(he)?Number(he):ze}function je(he){return Array.isArray(he)?he:[he]}function qe(he){return null==he?"":"string"==typeof he?he:`${he}px`}function Oe(he){return he instanceof D.SBq?he.nativeElement:he}},449:(Sn,wt,V)=>{"use strict";V.d(wt,{Ov:()=>Le,A8:()=>ze});var D=V(7579),l=V(5e3);class Le{constructor(gt=!1,Ye,et=!0){this._multiple=gt,this._emitChanges=et,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new D.x,Ye&&Ye.length&&(gt?Ye.forEach(bt=>this._markSelected(bt)):this._markSelected(Ye[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...gt){this._verifyValueAssignment(gt),gt.forEach(Ye=>this._markSelected(Ye)),this._emitChangeEvent()}deselect(...gt){this._verifyValueAssignment(gt),gt.forEach(Ye=>this._unmarkSelected(Ye)),this._emitChangeEvent()}toggle(gt){this.isSelected(gt)?this.deselect(gt):this.select(gt)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(gt){return this._selection.has(gt)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(gt){this._multiple&&this.selected&&this._selected.sort(gt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(gt){this.isSelected(gt)||(this._multiple||this._unmarkAll(),this._selection.add(gt),this._emitChanges&&this._selectedToEmit.push(gt))}_unmarkSelected(gt){this.isSelected(gt)&&(this._selection.delete(gt),this._emitChanges&&this._deselectedToEmit.push(gt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(gt=>this._unmarkSelected(gt))}_verifyValueAssignment(gt){}}let ze=(()=>{class Be{constructor(){this._listeners=[]}notify(Ye,et){for(let bt of this._listeners)bt(Ye,et)}listen(Ye){return this._listeners.push(Ye),()=>{this._listeners=this._listeners.filter(et=>Ye!==et)}}ngOnDestroy(){this._listeners=[]}}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})()},1159:(Sn,wt,V)=>{"use strict";V.d(wt,{A:()=>ci,zL:()=>Le,jx:()=>Oe,JH:()=>un,uR:()=>et,K5:()=>je,hY:()=>He,Sd:()=>bt,oh:()=>We,b2:()=>Vo,MW:()=>_t,aO:()=>fi,SV:()=>jt,JU:()=>qe,L_:()=>Be,Mf:()=>W,LH:()=>Ut,Z:()=>It,xE:()=>zt,Vb:()=>_r});const W=9,je=13,qe=16,Oe=17,Le=18,He=27,Be=32,et=35,bt=36,We=37,Ut=38,jt=39,un=40,zt=48,fi=57,ci=65,It=90,_t=91,Vo=224;function _r(Zi,...to){return to.length?to.some(qo=>Zi[qo]):Zi.altKey||Zi.shiftKey||Zi.ctrlKey||Zi.metaKey}},7144:(Sn,wt,V)=>{"use strict";V.d(wt,{wD:()=>Le,Q8:()=>he});var D=V(3191),l=V(5e3),W=V(8306),f=V(7579),je=V(8372);let qe=(()=>{class ze{create(Be){return"undefined"==typeof MutationObserver?null:new MutationObserver(Be)}}return ze.\u0275fac=function(Be){return new(Be||ze)},ze.\u0275prov=l.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})(),Oe=(()=>{class ze{constructor(Be){this._mutationObserverFactory=Be,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Be,gt)=>this._cleanupObserver(gt))}observe(Be){const gt=(0,D.fI)(Be);return new W.y(Ye=>{const bt=this._observeElement(gt).subscribe(Ye);return()=>{bt.unsubscribe(),this._unobserveElement(gt)}})}_observeElement(Be){if(this._observedElements.has(Be))this._observedElements.get(Be).count++;else{const gt=new f.x,Ye=this._mutationObserverFactory.create(et=>gt.next(et));Ye&&Ye.observe(Be,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Be,{observer:Ye,stream:gt,count:1})}return this._observedElements.get(Be).stream}_unobserveElement(Be){this._observedElements.has(Be)&&(this._observedElements.get(Be).count--,this._observedElements.get(Be).count||this._cleanupObserver(Be))}_cleanupObserver(Be){if(this._observedElements.has(Be)){const{observer:gt,stream:Ye}=this._observedElements.get(Be);gt&&gt.disconnect(),Ye.complete(),this._observedElements.delete(Be)}}}return ze.\u0275fac=function(Be){return new(Be||ze)(l.LFG(qe))},ze.\u0275prov=l.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})(),Le=(()=>{class ze{constructor(Be,gt,Ye){this._contentObserver=Be,this._elementRef=gt,this._ngZone=Ye,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Be){this._disabled=(0,D.Ig)(Be),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Be){this._debounce=(0,D.su)(Be),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Be=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Be.pipe((0,je.b)(this.debounce)):Be).subscribe(this.event)})}_unsubscribe(){var Be;null===(Be=this._currentSubscription)||void 0===Be||Be.unsubscribe()}}return ze.\u0275fac=function(Be){return new(Be||ze)(l.Y36(Oe),l.Y36(l.SBq),l.Y36(l.R0b))},ze.\u0275dir=l.lG2({type:ze,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),ze})(),he=(()=>{class ze{}return ze.\u0275fac=function(Be){return new(Be||ze)},ze.\u0275mod=l.oAB({type:ze}),ze.\u0275inj=l.cJS({providers:[qe]}),ze})()},9776:(Sn,wt,V)=>{"use strict";V.d(wt,{pI:()=>er,xu:()=>Pi,aV:()=>gn,U8:()=>ri});var D=V(8962),l=V(9808),W=V(5e3),f=V(3191),je=V(925),qe=V(226),Oe=V(7429),Le=V(7579),he=V(727),ze=V(6451),He=V(4482),Be=V(5403),Ye=V(5698),et=V(2722),bt=V(1159);const We=(0,je.Mq)();class Ut{constructor($,U){this._viewportRuler=$,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=U}attach(){}enable(){if(this._canBeEnabled()){const $=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=$.style.left||"",this._previousHTMLStyles.top=$.style.top||"",$.style.left=(0,f.HM)(-this._previousScrollPosition.left),$.style.top=(0,f.HM)(-this._previousScrollPosition.top),$.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const $=this._document.documentElement,R=$.style,B=this._document.body.style,ie=R.scrollBehavior||"",fe=B.scrollBehavior||"";this._isEnabled=!1,R.left=this._previousHTMLStyles.left,R.top=this._previousHTMLStyles.top,$.classList.remove("cdk-global-scrollblock"),We&&(R.scrollBehavior=B.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),We&&(R.scrollBehavior=ie,B.scrollBehavior=fe)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const U=this._document.body,R=this._viewportRuler.getViewportSize();return U.scrollHeight>R.height||U.scrollWidth>R.width}}class un{constructor($,U,R,B){this._scrollDispatcher=$,this._ngZone=U,this._viewportRuler=R,this._config=B,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach($){this._overlayRef=$}enable(){if(this._scrollSubscription)return;const $=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=$.subscribe(()=>{const U=this._viewportRuler.getViewportScrollPosition().top;Math.abs(U-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=$.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Dt{enable(){}disable(){}attach(){}}function ke(ht,$){return $.some(U=>ht.bottom<U.top||ht.top>U.bottom||ht.right<U.left||ht.left>U.right)}function ot(ht,$){return $.some(U=>ht.top<U.top||ht.bottom>U.bottom||ht.left<U.left||ht.right>U.right)}class nn{constructor($,U,R,B){this._scrollDispatcher=$,this._viewportRuler=U,this._ngZone=R,this._config=B,this._scrollSubscription=null}attach($){this._overlayRef=$}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const U=this._overlayRef.overlayElement.getBoundingClientRect(),{width:R,height:B}=this._viewportRuler.getViewportSize();ke(U,[{width:R,height:B,bottom:B,right:R,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let zt=(()=>{class ht{constructor(U,R,B,ie){this._scrollDispatcher=U,this._viewportRuler=R,this._ngZone=B,this.noop=()=>new Dt,this.close=fe=>new un(this._scrollDispatcher,this._ngZone,this._viewportRuler,fe),this.block=()=>new Ut(this._viewportRuler,this._document),this.reposition=fe=>new nn(this._scrollDispatcher,this._viewportRuler,this._ngZone,fe),this._document=ie}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(D.mF),W.LFG(D.rL),W.LFG(W.R0b),W.LFG(l.K0))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})();class tn{constructor($){if(this.scrollStrategy=new Dt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,$){const U=Object.keys($);for(const R of U)void 0!==$[R]&&(this[R]=$[R])}}}class ct{constructor($,U){this.connectionPair=$,this.scrollableViewProperties=U}}class Ct{constructor($,U,R,B,ie,fe,tt,It,_t){this._portalOutlet=$,this._host=U,this._pane=R,this._config=B,this._ngZone=ie,this._keyboardDispatcher=fe,this._document=tt,this._location=It,this._outsideClickDispatcher=_t,this._backdropElement=null,this._backdropClick=new Le.x,this._attachments=new Le.x,this._detachments=new Le.x,this._locationChanges=he.w0.EMPTY,this._backdropClickHandler=mn=>this._backdropClick.next(mn),this._keydownEvents=new Le.x,this._outsidePointerEvents=new Le.x,B.scrollStrategy&&(this._scrollStrategy=B.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=B.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach($){let U=this._portalOutlet.attach($);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ye.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),U}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const $=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),$}dispose(){var $;const U=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===($=this._host)||void 0===$||$.remove(),this._previousHostParent=this._pane=this._host=null,U&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy($){$!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=$,this.hasAttached()&&($.attach(this),this.updatePosition()))}updateSize($){this._config=Object.assign(Object.assign({},this._config),$),this._updateElementSize()}setDirection($){this._config=Object.assign(Object.assign({},this._config),{direction:$}),this._updateElementDirection()}addPanelClass($){this._pane&&this._toggleClasses(this._pane,$,!0)}removePanelClass($){this._pane&&this._toggleClasses(this._pane,$,!1)}getDirection(){const $=this._config.direction;return $?"string"==typeof $?$:$.value:"ltr"}updateScrollStrategy($){$!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=$,this.hasAttached()&&($.attach(this),$.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const $=this._pane.style;$.width=(0,f.HM)(this._config.width),$.height=(0,f.HM)(this._config.height),$.minWidth=(0,f.HM)(this._config.minWidth),$.minHeight=(0,f.HM)(this._config.minHeight),$.maxWidth=(0,f.HM)(this._config.maxWidth),$.maxHeight=(0,f.HM)(this._config.maxHeight)}_togglePointerEvents($){this._pane.style.pointerEvents=$?"":"none"}_attachBackdrop(){const $="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add($)})}):this._backdropElement.classList.add($)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const $=this._backdropElement;if(!$)return;let U;const R=()=>{$&&($.removeEventListener("click",this._backdropClickHandler),$.removeEventListener("transitionend",R),this._disposeBackdrop($)),this._config.backdropClass&&this._toggleClasses($,this._config.backdropClass,!1),clearTimeout(U)};$.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{$.addEventListener("transitionend",R)}),$.style.pointerEvents="none",U=this._ngZone.runOutsideAngular(()=>setTimeout(R,500))}_toggleClasses($,U,R){const B=(0,f.Eq)(U||[]).filter(ie=>!!ie);B.length&&(R?$.classList.add(...B):$.classList.remove(...B))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const $=this._ngZone.onStable.pipe((0,et.R)((0,ze.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),$.unsubscribe())})})}_disposeScrollStrategy(){const $=this._scrollStrategy;$&&($.disable(),$.detach&&$.detach())}_disposeBackdrop($){$&&($.remove(),this._backdropElement===$&&(this._backdropElement=null))}}let vn=(()=>{class ht{constructor(U,R){this._platform=R,this._document=U}ngOnDestroy(){var U;null===(U=this._containerElement)||void 0===U||U.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const U="cdk-overlay-container";if(this._platform.isBrowser||(0,je.Oy)()){const B=this._document.querySelectorAll(`.${U}[platform="server"], .${U}[platform="test"]`);for(let ie=0;ie<B.length;ie++)B[ie].remove()}const R=this._document.createElement("div");R.classList.add(U),(0,je.Oy)()?R.setAttribute("platform","test"):this._platform.isBrowser||R.setAttribute("platform","server"),this._document.body.appendChild(R),this._containerElement=R}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(l.K0),W.LFG(je.t4))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})();const fi="cdk-overlay-connected-position-bounding-box",zi=/([A-Za-z%]+)$/;class Dn{constructor($,U,R,B,ie){this._viewportRuler=U,this._document=R,this._platform=B,this._overlayContainer=ie,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Le.x,this._resizeSubscription=he.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin($)}get positions(){return this._preferredPositions}attach($){this._validatePositions(),$.hostElement.classList.add(fi),this._overlayRef=$,this._boundingBox=$.hostElement,this._pane=$.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const $=this._originRect,U=this._overlayRect,R=this._viewportRect,B=this._containerRect,ie=[];let fe;for(let tt of this._preferredPositions){let It=this._getOriginPoint($,B,tt),_t=this._getOverlayPoint(It,U,tt),mn=this._getOverlayFit(_t,U,R,tt);if(mn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(tt,It);this._canFitWithFlexibleDimensions(mn,_t,R)?ie.push({position:tt,origin:It,overlayRect:U,boundingBoxRect:this._calculateBoundingBoxRect(It,tt)}):(!fe||fe.overlayFit.visibleArea<mn.visibleArea)&&(fe={overlayFit:mn,overlayPoint:_t,originPoint:It,position:tt,overlayRect:U})}if(ie.length){let tt=null,It=-1;for(const _t of ie){const mn=_t.boundingBoxRect.width*_t.boundingBoxRect.height*(_t.position.weight||1);mn>It&&(It=mn,tt=_t)}return this._isPushed=!1,void this._applyPosition(tt.position,tt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(fe.position,fe.originPoint);this._applyPosition(fe.position,fe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Tn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(fi),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const $=this._lastPosition||this._preferredPositions[0],U=this._getOriginPoint(this._originRect,this._containerRect,$);this._applyPosition($,U)}}withScrollableContainers($){return this._scrollables=$,this}withPositions($){return this._preferredPositions=$,-1===$.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin($){return this._viewportMargin=$,this}withFlexibleDimensions($=!0){return this._hasFlexibleDimensions=$,this}withGrowAfterOpen($=!0){return this._growAfterOpen=$,this}withPush($=!0){return this._canPush=$,this}withLockedPosition($=!0){return this._positionLocked=$,this}setOrigin($){return this._origin=$,this}withDefaultOffsetX($){return this._offsetX=$,this}withDefaultOffsetY($){return this._offsetY=$,this}withTransformOriginOn($){return this._transformOriginSelector=$,this}_getOriginPoint($,U,R){let B,ie;if("center"==R.originX)B=$.left+$.width/2;else{const fe=this._isRtl()?$.right:$.left,tt=this._isRtl()?$.left:$.right;B="start"==R.originX?fe:tt}return U.left<0&&(B-=U.left),ie="center"==R.originY?$.top+$.height/2:"top"==R.originY?$.top:$.bottom,U.top<0&&(ie-=U.top),{x:B,y:ie}}_getOverlayPoint($,U,R){let B,ie;return B="center"==R.overlayX?-U.width/2:"start"===R.overlayX?this._isRtl()?-U.width:0:this._isRtl()?0:-U.width,ie="center"==R.overlayY?-U.height/2:"top"==R.overlayY?0:-U.height,{x:$.x+B,y:$.y+ie}}_getOverlayFit($,U,R,B){const ie=ci(U);let{x:fe,y:tt}=$,It=this._getOffset(B,"x"),_t=this._getOffset(B,"y");It&&(fe+=It),_t&&(tt+=_t);let Vn=0-tt,yi=tt+ie.height-R.height,en=this._subtractOverflows(ie.width,0-fe,fe+ie.width-R.width),pn=this._subtractOverflows(ie.height,Vn,yi),qt=en*pn;return{visibleArea:qt,isCompletelyWithinViewport:ie.width*ie.height===qt,fitsInViewportVertically:pn===ie.height,fitsInViewportHorizontally:en==ie.width}}_canFitWithFlexibleDimensions($,U,R){if(this._hasFlexibleDimensions){const B=R.bottom-U.y,ie=R.right-U.x,fe=Ii(this._overlayRef.getConfig().minHeight),tt=Ii(this._overlayRef.getConfig().minWidth),_t=$.fitsInViewportHorizontally||null!=tt&&tt<=ie;return($.fitsInViewportVertically||null!=fe&&fe<=B)&&_t}return!1}_pushOverlayOnScreen($,U,R){if(this._previousPushAmount&&this._positionLocked)return{x:$.x+this._previousPushAmount.x,y:$.y+this._previousPushAmount.y};const B=ci(U),ie=this._viewportRect,fe=Math.max($.x+B.width-ie.width,0),tt=Math.max($.y+B.height-ie.height,0),It=Math.max(ie.top-R.top-$.y,0),_t=Math.max(ie.left-R.left-$.x,0);let mn=0,_n=0;return mn=B.width<=ie.width?_t||-fe:$.x<this._viewportMargin?ie.left-R.left-$.x:0,_n=B.height<=ie.height?It||-tt:$.y<this._viewportMargin?ie.top-R.top-$.y:0,this._previousPushAmount={x:mn,y:_n},{x:$.x+mn,y:$.y+_n}}_applyPosition($,U){if(this._setTransformOrigin($),this._setOverlayElementStyles(U,$),this._setBoundingBoxStyles(U,$),$.panelClass&&this._addPanelClasses($.panelClass),this._lastPosition=$,this._positionChanges.observers.length){const R=this._getScrollVisibility(),B=new ct($,R);this._positionChanges.next(B)}this._isInitialRender=!1}_setTransformOrigin($){if(!this._transformOriginSelector)return;const U=this._boundingBox.querySelectorAll(this._transformOriginSelector);let R,B=$.overlayY;R="center"===$.overlayX?"center":this._isRtl()?"start"===$.overlayX?"right":"left":"start"===$.overlayX?"left":"right";for(let ie=0;ie<U.length;ie++)U[ie].style.transformOrigin=`${R} ${B}`}_calculateBoundingBoxRect($,U){const R=this._viewportRect,B=this._isRtl();let ie,fe,tt,mn,_n,Vn;if("top"===U.overlayY)fe=$.y,ie=R.height-fe+this._viewportMargin;else if("bottom"===U.overlayY)tt=R.height-$.y+2*this._viewportMargin,ie=R.height-tt+this._viewportMargin;else{const yi=Math.min(R.bottom-$.y+R.top,$.y),en=this._lastBoundingBoxSize.height;ie=2*yi,fe=$.y-yi,ie>en&&!this._isInitialRender&&!this._growAfterOpen&&(fe=$.y-en/2)}if("end"===U.overlayX&&!B||"start"===U.overlayX&&B)Vn=R.width-$.x+this._viewportMargin,mn=$.x-this._viewportMargin;else if("start"===U.overlayX&&!B||"end"===U.overlayX&&B)_n=$.x,mn=R.right-$.x;else{const yi=Math.min(R.right-$.x+R.left,$.x),en=this._lastBoundingBoxSize.width;mn=2*yi,_n=$.x-yi,mn>en&&!this._isInitialRender&&!this._growAfterOpen&&(_n=$.x-en/2)}return{top:fe,left:_n,bottom:tt,right:Vn,width:mn,height:ie}}_setBoundingBoxStyles($,U){const R=this._calculateBoundingBoxRect($,U);!this._isInitialRender&&!this._growAfterOpen&&(R.height=Math.min(R.height,this._lastBoundingBoxSize.height),R.width=Math.min(R.width,this._lastBoundingBoxSize.width));const B={};if(this._hasExactPosition())B.top=B.left="0",B.bottom=B.right=B.maxHeight=B.maxWidth="",B.width=B.height="100%";else{const ie=this._overlayRef.getConfig().maxHeight,fe=this._overlayRef.getConfig().maxWidth;B.height=(0,f.HM)(R.height),B.top=(0,f.HM)(R.top),B.bottom=(0,f.HM)(R.bottom),B.width=(0,f.HM)(R.width),B.left=(0,f.HM)(R.left),B.right=(0,f.HM)(R.right),B.alignItems="center"===U.overlayX?"center":"end"===U.overlayX?"flex-end":"flex-start",B.justifyContent="center"===U.overlayY?"center":"bottom"===U.overlayY?"flex-end":"flex-start",ie&&(B.maxHeight=(0,f.HM)(ie)),fe&&(B.maxWidth=(0,f.HM)(fe))}this._lastBoundingBoxSize=R,Tn(this._boundingBox.style,B)}_resetBoundingBoxStyles(){Tn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Tn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles($,U){const R={},B=this._hasExactPosition(),ie=this._hasFlexibleDimensions,fe=this._overlayRef.getConfig();if(B){const mn=this._viewportRuler.getViewportScrollPosition();Tn(R,this._getExactOverlayY(U,$,mn)),Tn(R,this._getExactOverlayX(U,$,mn))}else R.position="static";let tt="",It=this._getOffset(U,"x"),_t=this._getOffset(U,"y");It&&(tt+=`translateX(${It}px) `),_t&&(tt+=`translateY(${_t}px)`),R.transform=tt.trim(),fe.maxHeight&&(B?R.maxHeight=(0,f.HM)(fe.maxHeight):ie&&(R.maxHeight="")),fe.maxWidth&&(B?R.maxWidth=(0,f.HM)(fe.maxWidth):ie&&(R.maxWidth="")),Tn(this._pane.style,R)}_getExactOverlayY($,U,R){let B={top:"",bottom:""},ie=this._getOverlayPoint(U,this._overlayRect,$);return this._isPushed&&(ie=this._pushOverlayOnScreen(ie,this._overlayRect,R)),"bottom"===$.overlayY?B.bottom=this._document.documentElement.clientHeight-(ie.y+this._overlayRect.height)+"px":B.top=(0,f.HM)(ie.y),B}_getExactOverlayX($,U,R){let fe,B={left:"",right:""},ie=this._getOverlayPoint(U,this._overlayRect,$);return this._isPushed&&(ie=this._pushOverlayOnScreen(ie,this._overlayRect,R)),fe=this._isRtl()?"end"===$.overlayX?"left":"right":"end"===$.overlayX?"right":"left","right"===fe?B.right=this._document.documentElement.clientWidth-(ie.x+this._overlayRect.width)+"px":B.left=(0,f.HM)(ie.x),B}_getScrollVisibility(){const $=this._getOriginRect(),U=this._pane.getBoundingClientRect(),R=this._scrollables.map(B=>B.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ot($,R),isOriginOutsideView:ke($,R),isOverlayClipped:ot(U,R),isOverlayOutsideView:ke(U,R)}}_subtractOverflows($,...U){return U.reduce((R,B)=>R-Math.max(B,0),$)}_getNarrowedViewportRect(){const $=this._document.documentElement.clientWidth,U=this._document.documentElement.clientHeight,R=this._viewportRuler.getViewportScrollPosition();return{top:R.top+this._viewportMargin,left:R.left+this._viewportMargin,right:R.left+$-this._viewportMargin,bottom:R.top+U-this._viewportMargin,width:$-2*this._viewportMargin,height:U-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset($,U){return"x"===U?null==$.offsetX?this._offsetX:$.offsetX:null==$.offsetY?this._offsetY:$.offsetY}_validatePositions(){}_addPanelClasses($){this._pane&&(0,f.Eq)($).forEach(U=>{""!==U&&-1===this._appliedPanelClasses.indexOf(U)&&(this._appliedPanelClasses.push(U),this._pane.classList.add(U))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach($=>{this._pane.classList.remove($)}),this._appliedPanelClasses=[])}_getOriginRect(){const $=this._origin;if($ instanceof W.SBq)return $.nativeElement.getBoundingClientRect();if($ instanceof Element)return $.getBoundingClientRect();const U=$.width||0,R=$.height||0;return{top:$.y,bottom:$.y+R,left:$.x,right:$.x+U,height:R,width:U}}}function Tn(ht,$){for(let U in $)$.hasOwnProperty(U)&&(ht[U]=$[U]);return ht}function Ii(ht){if("number"!=typeof ht&&null!=ht){const[$,U]=ht.split(zi);return U&&"px"!==U?null:parseFloat($)}return ht||null}function ci(ht){return{top:Math.floor(ht.top),right:Math.floor(ht.right),bottom:Math.floor(ht.bottom),left:Math.floor(ht.left),width:Math.floor(ht.width),height:Math.floor(ht.height)}}const ir="cdk-global-overlay-wrapper";class _i{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach($){const U=$.getConfig();this._overlayRef=$,this._width&&!U.width&&$.updateSize({width:this._width}),this._height&&!U.height&&$.updateSize({height:this._height}),$.hostElement.classList.add(ir),this._isDisposed=!1}top($=""){return this._bottomOffset="",this._topOffset=$,this._alignItems="flex-start",this}left($=""){return this._rightOffset="",this._leftOffset=$,this._justifyContent="flex-start",this}bottom($=""){return this._topOffset="",this._bottomOffset=$,this._alignItems="flex-end",this}right($=""){return this._leftOffset="",this._rightOffset=$,this._justifyContent="flex-end",this}width($=""){return this._overlayRef?this._overlayRef.updateSize({width:$}):this._width=$,this}height($=""){return this._overlayRef?this._overlayRef.updateSize({height:$}):this._height=$,this}centerHorizontally($=""){return this.left($),this._justifyContent="center",this}centerVertically($=""){return this.top($),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const $=this._overlayRef.overlayElement.style,U=this._overlayRef.hostElement.style,R=this._overlayRef.getConfig(),{width:B,height:ie,maxWidth:fe,maxHeight:tt}=R,It=!("100%"!==B&&"100vw"!==B||fe&&"100%"!==fe&&"100vw"!==fe),_t=!("100%"!==ie&&"100vh"!==ie||tt&&"100%"!==tt&&"100vh"!==tt);$.position=this._cssPosition,$.marginLeft=It?"0":this._leftOffset,$.marginTop=_t?"0":this._topOffset,$.marginBottom=this._bottomOffset,$.marginRight=this._rightOffset,It?U.justifyContent="flex-start":"center"===this._justifyContent?U.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?U.justifyContent="flex-end":"flex-end"===this._justifyContent&&(U.justifyContent="flex-start"):U.justifyContent=this._justifyContent,U.alignItems=_t?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const $=this._overlayRef.overlayElement.style,U=this._overlayRef.hostElement,R=U.style;U.classList.remove(ir),R.justifyContent=R.alignItems=$.marginTop=$.marginBottom=$.marginLeft=$.marginRight=$.position="",this._overlayRef=null,this._isDisposed=!0}}let kn=(()=>{class ht{constructor(U,R,B,ie){this._viewportRuler=U,this._document=R,this._platform=B,this._overlayContainer=ie}global(){return new _i}flexibleConnectedTo(U){return new Dn(U,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(D.rL),W.LFG(l.K0),W.LFG(je.t4),W.LFG(vn))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})(),ii=(()=>{class ht{constructor(U){this._attachedOverlays=[],this._document=U}ngOnDestroy(){this.detach()}add(U){this.remove(U),this._attachedOverlays.push(U)}remove(U){const R=this._attachedOverlays.indexOf(U);R>-1&&this._attachedOverlays.splice(R,1),0===this._attachedOverlays.length&&this.detach()}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(l.K0))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})(),ft=(()=>{class ht extends ii{constructor(U){super(U),this._keydownListener=R=>{const B=this._attachedOverlays;for(let ie=B.length-1;ie>-1;ie--)if(B[ie]._keydownEvents.observers.length>0){B[ie]._keydownEvents.next(R);break}}}add(U){super.add(U),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(l.K0))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})(),Ft=(()=>{class ht extends ii{constructor(U,R){super(U),this._platform=R,this._cursorStyleIsSet=!1,this._pointerDownListener=B=>{this._pointerDownEventTarget=(0,je.sA)(B)},this._clickListener=B=>{const ie=(0,je.sA)(B),fe="click"===B.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:ie;this._pointerDownEventTarget=null;const tt=this._attachedOverlays.slice();for(let It=tt.length-1;It>-1;It--){const _t=tt[It];if(!(_t._outsidePointerEvents.observers.length<1)&&_t.hasAttached()){if(_t.overlayElement.contains(ie)||_t.overlayElement.contains(fe))break;_t._outsidePointerEvents.next(B)}}}}add(U){if(super.add(U),!this._isAttached){const R=this._document.body;R.addEventListener("pointerdown",this._pointerDownListener,!0),R.addEventListener("click",this._clickListener,!0),R.addEventListener("auxclick",this._clickListener,!0),R.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=R.style.cursor,R.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const U=this._document.body;U.removeEventListener("pointerdown",this._pointerDownListener,!0),U.removeEventListener("click",this._clickListener,!0),U.removeEventListener("auxclick",this._clickListener,!0),U.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(U.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(l.K0),W.LFG(je.t4))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht})(),on=0,gn=(()=>{class ht{constructor(U,R,B,ie,fe,tt,It,_t,mn,_n,Vn){this.scrollStrategies=U,this._overlayContainer=R,this._componentFactoryResolver=B,this._positionBuilder=ie,this._keyboardDispatcher=fe,this._injector=tt,this._ngZone=It,this._document=_t,this._directionality=mn,this._location=_n,this._outsideClickDispatcher=Vn}create(U){const R=this._createHostElement(),B=this._createPaneElement(R),ie=this._createPortalOutlet(B),fe=new tn(U);return fe.direction=fe.direction||this._directionality.value,new Ct(ie,R,B,fe,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(U){const R=this._document.createElement("div");return R.id="cdk-overlay-"+on++,R.classList.add("cdk-overlay-pane"),U.appendChild(R),R}_createHostElement(){const U=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(U),U}_createPortalOutlet(U){return this._appRef||(this._appRef=this._injector.get(W.z2F)),new Oe.u0(U,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return ht.\u0275fac=function(U){return new(U||ht)(W.LFG(zt),W.LFG(vn),W.LFG(W._Vd),W.LFG(kn),W.LFG(ft),W.LFG(W.zs3),W.LFG(W.R0b),W.LFG(l.K0),W.LFG(qe.Is),W.LFG(l.Ye),W.LFG(Ft))},ht.\u0275prov=W.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const zn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Jn=new W.OlP("cdk-connected-overlay-scroll-strategy");let Pi=(()=>{class ht{constructor(U){this.elementRef=U}}return ht.\u0275fac=function(U){return new(U||ht)(W.Y36(W.SBq))},ht.\u0275dir=W.lG2({type:ht,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),ht})(),er=(()=>{class ht{constructor(U,R,B,ie,fe){this._overlay=U,this._dir=fe,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=he.w0.EMPTY,this._attachSubscription=he.w0.EMPTY,this._detachSubscription=he.w0.EMPTY,this._positionSubscription=he.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new W.vpe,this.positionChange=new W.vpe,this.attach=new W.vpe,this.detach=new W.vpe,this.overlayKeydown=new W.vpe,this.overlayOutsideClick=new W.vpe,this._templatePortal=new Oe.UE(R,B),this._scrollStrategyFactory=ie,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(U){this._offsetX=U,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(U){this._offsetY=U,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(U){this._hasBackdrop=(0,f.Ig)(U)}get lockPosition(){return this._lockPosition}set lockPosition(U){this._lockPosition=(0,f.Ig)(U)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(U){this._flexibleDimensions=(0,f.Ig)(U)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(U){this._growAfterOpen=(0,f.Ig)(U)}get push(){return this._push}set push(U){this._push=(0,f.Ig)(U)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(U){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),U.origin&&this.open&&this._position.apply()),U.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=zn);const U=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=U.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=U.detachments().subscribe(()=>this.detach.emit()),U.keydownEvents().subscribe(R=>{this.overlayKeydown.next(R),R.keyCode===bt.hY&&!this.disableClose&&!(0,bt.Vb)(R)&&(R.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(R=>{this.overlayOutsideClick.next(R)})}_buildConfig(){const U=this._position=this.positionStrategy||this._createPositionStrategy(),R=new tn({direction:this._dir,positionStrategy:U,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(R.width=this.width),(this.height||0===this.height)&&(R.height=this.height),(this.minWidth||0===this.minWidth)&&(R.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(R.minHeight=this.minHeight),this.backdropClass&&(R.backdropClass=this.backdropClass),this.panelClass&&(R.panelClass=this.panelClass),R}_updatePositionStrategy(U){const R=this.positions.map(B=>({originX:B.originX,originY:B.originY,overlayX:B.overlayX,overlayY:B.overlayY,offsetX:B.offsetX||this.offsetX,offsetY:B.offsetY||this.offsetY,panelClass:B.panelClass||void 0}));return U.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(R).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const U=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(U),U}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Pi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(U=>{this.backdropClick.emit(U)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function gt(ht,$=!1){return(0,He.e)((U,R)=>{let B=0;U.subscribe(new Be.Q(R,ie=>{const fe=ht(ie,B++);(fe||$)&&R.next(ie),!fe&&R.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(U=>{this.positionChange.emit(U),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return ht.\u0275fac=function(U){return new(U||ht)(W.Y36(gn),W.Y36(W.Rgc),W.Y36(W.s_b),W.Y36(Jn),W.Y36(qe.Is,8))},ht.\u0275dir=W.lG2({type:ht,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[W.TTD]}),ht})();const Kn={provide:Jn,deps:[gn],useFactory:function sr(ht){return()=>ht.scrollStrategies.reposition()}};let ri=(()=>{class ht{}return ht.\u0275fac=function(U){return new(U||ht)},ht.\u0275mod=W.oAB({type:ht}),ht.\u0275inj=W.cJS({providers:[gn,Kn],imports:[[qe.vT,Oe.eL,D.Cl],D.Cl]}),ht})()},925:(Sn,wt,V)=>{"use strict";V.d(wt,{t4:()=>f,ud:()=>je,sA:()=>un,kV:()=>Ut,Oy:()=>Dt,_i:()=>et,qK:()=>Le,i$:()=>He,Mq:()=>Ye});var D=V(5e3),l=V(9808);let W;try{W="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(ke){W=!1}let qe,f=(()=>{class ke{constructor(nn){this._platformId=nn,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!W)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ke.\u0275fac=function(nn){return new(nn||ke)(D.LFG(D.Lbi))},ke.\u0275prov=D.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})(),je=(()=>{class ke{}return ke.\u0275fac=function(nn){return new(nn||ke)},ke.\u0275mod=D.oAB({type:ke}),ke.\u0275inj=D.cJS({}),ke})();const Oe=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Le(){if(qe)return qe;if("object"!=typeof document||!document)return qe=new Set(Oe),qe;let ke=document.createElement("input");return qe=new Set(Oe.filter(ot=>(ke.setAttribute("type",ot),ke.type===ot))),qe}let he,Be,gt,bt;function He(ke){return function ze(){if(null==he&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>he=!0}))}finally{he=he||!1}return he}()?ke:!!ke.capture}function Ye(){if(null==gt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gt=!1,gt;if("scrollBehavior"in document.documentElement.style)gt=!0;else{const ke=Element.prototype.scrollTo;gt=!!ke&&!/\{\s*\[native code\]\s*\}/.test(ke.toString())}}return gt}function et(){if("object"!=typeof document||!document)return 0;if(null==Be){const ke=document.createElement("div"),ot=ke.style;ke.dir="rtl",ot.width="1px",ot.overflow="auto",ot.visibility="hidden",ot.pointerEvents="none",ot.position="absolute";const nn=document.createElement("div"),zt=nn.style;zt.width="2px",zt.height="1px",ke.appendChild(nn),document.body.appendChild(ke),Be=0,0===ke.scrollLeft&&(ke.scrollLeft=1,Be=0===ke.scrollLeft?1:2),ke.remove()}return Be}function Ut(ke){if(function We(){if(null==bt){const ke="undefined"!=typeof document?document.head:null;bt=!(!ke||!ke.createShadowRoot&&!ke.attachShadow)}return bt}()){const ot=ke.getRootNode?ke.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ot instanceof ShadowRoot)return ot}return null}function un(ke){return ke.composedPath?ke.composedPath()[0]:ke.target}function Dt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},7429:(Sn,wt,V)=>{"use strict";V.d(wt,{ig:()=>bt,C5:()=>he,u0:()=>Ye,eL:()=>un,UE:()=>ze,bH:()=>We});var D=V(5e3);class Le{attach(ot){return this._attachedHost=ot,ot.attach(this)}detach(){let ot=this._attachedHost;null!=ot&&(this._attachedHost=null,ot.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ot){this._attachedHost=ot}}class he extends Le{constructor(ot,nn,zt,tn){super(),this.component=ot,this.viewContainerRef=nn,this.injector=zt,this.componentFactoryResolver=tn}}class ze extends Le{constructor(ot,nn,zt){super(),this.templateRef=ot,this.viewContainerRef=nn,this.context=zt}get origin(){return this.templateRef.elementRef}attach(ot,nn=this.context){return this.context=nn,super.attach(ot)}detach(){return this.context=void 0,super.detach()}}class He extends Le{constructor(ot){super(),this.element=ot instanceof D.SBq?ot.nativeElement:ot}}class Ye extends class Be{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ot){return ot instanceof he?(this._attachedPortal=ot,this.attachComponentPortal(ot)):ot instanceof ze?(this._attachedPortal=ot,this.attachTemplatePortal(ot)):this.attachDomPortal&&ot instanceof He?(this._attachedPortal=ot,this.attachDomPortal(ot)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ot){this._disposeFn=ot}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(ot,nn,zt,tn,st){super(),this.outletElement=ot,this._componentFactoryResolver=nn,this._appRef=zt,this._defaultInjector=tn,this.attachDomPortal=yt=>{const ct=yt.element,Tt=this._document.createComment("dom-portal");ct.parentNode.insertBefore(Tt,ct),this.outletElement.appendChild(ct),this._attachedPortal=yt,super.setDisposeFn(()=>{Tt.parentNode&&Tt.parentNode.replaceChild(ct,Tt)})},this._document=st}attachComponentPortal(ot){const zt=(ot.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ot.component);let tn;return ot.viewContainerRef?(tn=ot.viewContainerRef.createComponent(zt,ot.viewContainerRef.length,ot.injector||ot.viewContainerRef.injector),this.setDisposeFn(()=>tn.destroy())):(tn=zt.create(ot.injector||this._defaultInjector),this._appRef.attachView(tn.hostView),this.setDisposeFn(()=>{this._appRef.detachView(tn.hostView),tn.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(tn)),this._attachedPortal=ot,tn}attachTemplatePortal(ot){let nn=ot.viewContainerRef,zt=nn.createEmbeddedView(ot.templateRef,ot.context);return zt.rootNodes.forEach(tn=>this.outletElement.appendChild(tn)),zt.detectChanges(),this.setDisposeFn(()=>{let tn=nn.indexOf(zt);-1!==tn&&nn.remove(tn)}),this._attachedPortal=ot,zt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ot){return ot.hostView.rootNodes[0]}}let bt=(()=>{class ke extends ze{constructor(nn,zt){super(nn,zt)}}return ke.\u0275fac=function(nn){return new(nn||ke)(D.Y36(D.Rgc),D.Y36(D.s_b))},ke.\u0275dir=D.lG2({type:ke,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[D.qOj]}),ke})(),We=(()=>{class ke extends bt{}return ke.\u0275fac=function(){let ot;return function(zt){return(ot||(ot=D.n5z(ke)))(zt||ke)}}(),ke.\u0275dir=D.lG2({type:ke,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[D._Bn([{provide:bt,useExisting:ke}]),D.qOj]}),ke})(),un=(()=>{class ke{}return ke.\u0275fac=function(nn){return new(nn||ke)},ke.\u0275mod=D.oAB({type:ke}),ke.\u0275inj=D.cJS({}),ke})()},8962:(Sn,wt,V)=>{"use strict";V.d(wt,{PQ:()=>zn,ZD:()=>ht,mF:()=>gn,Cl:()=>$,rL:()=>Pi});var D=V(3191),l=V(5e3),W=V(4408),f=V(727);const je={schedule(U){let R=requestAnimationFrame,B=cancelAnimationFrame;const{delegate:ie}=je;ie&&(R=ie.requestAnimationFrame,B=ie.cancelAnimationFrame);const fe=R(tt=>{B=void 0,U(tt)});return new f.w0(()=>null==B?void 0:B(fe))},requestAnimationFrame(...U){const{delegate:R}=je;return((null==R?void 0:R.requestAnimationFrame)||requestAnimationFrame)(...U)},cancelAnimationFrame(...U){const{delegate:R}=je;return((null==R?void 0:R.cancelAnimationFrame)||cancelAnimationFrame)(...U)},delegate:void 0};var Oe=V(7565);new class Le extends Oe.v{flush(R){this._active=!0;const B=this._scheduled;this._scheduled=void 0;const{actions:ie}=this;let fe;R=R||ie.shift();do{if(fe=R.execute(R.state,R.delay))break}while((R=ie[0])&&R.id===B&&ie.shift());if(this._active=!1,fe){for(;(R=ie[0])&&R.id===B&&ie.shift();)R.unsubscribe();throw fe}}}(class qe extends W.o{constructor(R,B){super(R,B),this.scheduler=R,this.work=B}requestAsyncId(R,B,ie=0){return null!==ie&&ie>0?super.requestAsyncId(R,B,ie):(R.actions.push(this),R._scheduled||(R._scheduled=je.requestAnimationFrame(()=>R.flush(void 0))))}recycleAsyncId(R,B,ie=0){if(null!=ie&&ie>0||null==ie&&this.delay>0)return super.recycleAsyncId(R,B,ie);R.actions.some(fe=>fe.id===B)||(je.cancelAnimationFrame(B),R._scheduled=void 0)}});let Be,He=1;const gt={};function Ye(U){return U in gt&&(delete gt[U],!0)}const et={setImmediate(U){const R=He++;return gt[R]=!0,Be||(Be=Promise.resolve()),Be.then(()=>Ye(R)&&U()),R},clearImmediate(U){Ye(U)}},{setImmediate:We,clearImmediate:Ut}=et,jt={setImmediate(...U){const{delegate:R}=jt;return((null==R?void 0:R.setImmediate)||We)(...U)},clearImmediate(U){const{delegate:R}=jt;return((null==R?void 0:R.clearImmediate)||Ut)(U)},delegate:void 0};new class Dt extends Oe.v{flush(R){this._active=!0;const B=this._scheduled;this._scheduled=void 0;const{actions:ie}=this;let fe;R=R||ie.shift();do{if(fe=R.execute(R.state,R.delay))break}while((R=ie[0])&&R.id===B&&ie.shift());if(this._active=!1,fe){for(;(R=ie[0])&&R.id===B&&ie.shift();)R.unsubscribe();throw fe}}}(class un extends W.o{constructor(R,B){super(R,B),this.scheduler=R,this.work=B}requestAsyncId(R,B,ie=0){return null!==ie&&ie>0?super.requestAsyncId(R,B,ie):(R.actions.push(this),R._scheduled||(R._scheduled=jt.setImmediate(R.flush.bind(R,void 0))))}recycleAsyncId(R,B,ie=0){if(null!=ie&&ie>0||null==ie&&this.delay>0)return super.recycleAsyncId(R,B,ie);R.actions.some(fe=>fe.id===B)||(jt.clearImmediate(B),R._scheduled=void 0)}});var nn=V(7579),zt=V(9646),tn=V(8306),st=V(4968),yt=V(4986),ct=V(4482),Tt=V(8421),Xt=V(5403),vn=V(5963);function fi(U,R=yt.z){return function Ct(U){return(0,ct.e)((R,B)=>{let ie=!1,fe=null,tt=null,It=!1;const _t=()=>{if(null==tt||tt.unsubscribe(),tt=null,ie){ie=!1;const _n=fe;fe=null,B.next(_n)}It&&B.complete()},mn=()=>{tt=null,It&&B.complete()};R.subscribe(new Xt.Q(B,_n=>{ie=!0,fe=_n,tt||(0,Tt.Xf)(U(_n)).subscribe(tt=new Xt.Q(B,_t,mn))},()=>{It=!0,(!ie||!tt||tt.closed)&&B.complete()}))})}(()=>(0,vn.H)(U,R))}var zi=V(9300),Dn=V(2722),Tn=V(9808),Ii=V(925),ci=V(226);let gn=(()=>{class U{constructor(B,ie,fe){this._ngZone=B,this._platform=ie,this._scrolled=new nn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=fe}register(B){this.scrollContainers.has(B)||this.scrollContainers.set(B,B.elementScrolled().subscribe(()=>this._scrolled.next(B)))}deregister(B){const ie=this.scrollContainers.get(B);ie&&(ie.unsubscribe(),this.scrollContainers.delete(B))}scrolled(B=20){return this._platform.isBrowser?new tn.y(ie=>{this._globalSubscription||this._addGlobalListener();const fe=B>0?this._scrolled.pipe(fi(B)).subscribe(ie):this._scrolled.subscribe(ie);return this._scrolledCount++,()=>{fe.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,zt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((B,ie)=>this.deregister(ie)),this._scrolled.complete()}ancestorScrolled(B,ie){const fe=this.getAncestorScrollContainers(B);return this.scrolled(ie).pipe((0,zi.h)(tt=>!tt||fe.indexOf(tt)>-1))}getAncestorScrollContainers(B){const ie=[];return this.scrollContainers.forEach((fe,tt)=>{this._scrollableContainsElement(tt,B)&&ie.push(tt)}),ie}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(B,ie){let fe=(0,D.fI)(ie),tt=B.getElementRef().nativeElement;do{if(fe==tt)return!0}while(fe=fe.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const B=this._getWindow();return(0,st.R)(B.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(l.R0b),l.LFG(Ii.t4),l.LFG(Tn.K0,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),zn=(()=>{class U{constructor(B,ie,fe,tt){this.elementRef=B,this.scrollDispatcher=ie,this.ngZone=fe,this.dir=tt,this._destroyed=new nn.x,this._elementScrolled=new tn.y(It=>this.ngZone.runOutsideAngular(()=>(0,st.R)(this.elementRef.nativeElement,"scroll").pipe((0,Dn.R)(this._destroyed)).subscribe(It)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(B){const ie=this.elementRef.nativeElement,fe=this.dir&&"rtl"==this.dir.value;null==B.left&&(B.left=fe?B.end:B.start),null==B.right&&(B.right=fe?B.start:B.end),null!=B.bottom&&(B.top=ie.scrollHeight-ie.clientHeight-B.bottom),fe&&0!=(0,Ii._i)()?(null!=B.left&&(B.right=ie.scrollWidth-ie.clientWidth-B.left),2==(0,Ii._i)()?B.left=B.right:1==(0,Ii._i)()&&(B.left=B.right?-B.right:B.right)):null!=B.right&&(B.left=ie.scrollWidth-ie.clientWidth-B.right),this._applyScrollToOptions(B)}_applyScrollToOptions(B){const ie=this.elementRef.nativeElement;(0,Ii.Mq)()?ie.scrollTo(B):(null!=B.top&&(ie.scrollTop=B.top),null!=B.left&&(ie.scrollLeft=B.left))}measureScrollOffset(B){const ie="left",tt=this.elementRef.nativeElement;if("top"==B)return tt.scrollTop;if("bottom"==B)return tt.scrollHeight-tt.clientHeight-tt.scrollTop;const It=this.dir&&"rtl"==this.dir.value;return"start"==B?B=It?"right":ie:"end"==B&&(B=It?ie:"right"),It&&2==(0,Ii._i)()?B==ie?tt.scrollWidth-tt.clientWidth-tt.scrollLeft:tt.scrollLeft:It&&1==(0,Ii._i)()?B==ie?tt.scrollLeft+tt.scrollWidth-tt.clientWidth:-tt.scrollLeft:B==ie?tt.scrollLeft:tt.scrollWidth-tt.clientWidth-tt.scrollLeft}}return U.\u0275fac=function(B){return new(B||U)(l.Y36(l.SBq),l.Y36(gn),l.Y36(l.R0b),l.Y36(ci.Is,8))},U.\u0275dir=l.lG2({type:U,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),U})(),Pi=(()=>{class U{constructor(B,ie,fe){this._platform=B,this._change=new nn.x,this._changeListener=tt=>{this._change.next(tt)},this._document=fe,ie.runOutsideAngular(()=>{if(B.isBrowser){const tt=this._getWindow();tt.addEventListener("resize",this._changeListener),tt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const B=this._getWindow();B.removeEventListener("resize",this._changeListener),B.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const B={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),B}getViewportRect(){const B=this.getViewportScrollPosition(),{width:ie,height:fe}=this.getViewportSize();return{top:B.top,left:B.left,bottom:B.top+fe,right:B.left+ie,height:fe,width:ie}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const B=this._document,ie=this._getWindow(),fe=B.documentElement,tt=fe.getBoundingClientRect();return{top:-tt.top||B.body.scrollTop||ie.scrollY||fe.scrollTop||0,left:-tt.left||B.body.scrollLeft||ie.scrollX||fe.scrollLeft||0}}change(B=20){return B>0?this._change.pipe(fi(B)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const B=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:B.innerWidth,height:B.innerHeight}:{width:0,height:0}}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(Ii.t4),l.LFG(l.R0b),l.LFG(Tn.K0,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),ht=(()=>{class U{}return U.\u0275fac=function(B){return new(B||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({}),U})(),$=(()=>{class U{}return U.\u0275fac=function(B){return new(B||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({imports:[[ci.vT,Ii.ud,ht],ci.vT,ht]}),U})()},9808:(Sn,wt,V)=>{"use strict";V.d(wt,{mr:()=>jt,Ov:()=>rs,ez:()=>jo,K0:()=>Oe,Do:()=>Dt,V_:()=>ze,Ye:()=>ke,S$:()=>We,mk:()=>Ji,sg:()=>Ri,O5:()=>_r,PC:()=>ns,RF:()=>Pr,n9:()=>Yr,ED:()=>Es,tP:()=>is,b0:()=>un,lw:()=>Le,EM:()=>As,JF:()=>kr,NF:()=>uo,w_:()=>qe,bD:()=>ss,q:()=>W,Mx:()=>wr,HT:()=>je});var D=V(5e3);let l=null;function W(){return l}function je(te){l||(l=te)}class qe{}const Oe=new D.OlP("DocumentToken");let Le=(()=>{class te{historyGo(ne){throw new Error("Not implemented")}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275prov=D.Yz7({token:te,factory:function(){return function he(){return(0,D.LFG)(He)}()},providedIn:"platform"}),te})();const ze=new D.OlP("Location Initialized");let He=(()=>{class te extends Le{constructor(ne){super(),this._doc=ne,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(ne){const De=W().getGlobalEventTarget(this._doc,"window");return De.addEventListener("popstate",ne,!1),()=>De.removeEventListener("popstate",ne)}onHashChange(ne){const De=W().getGlobalEventTarget(this._doc,"window");return De.addEventListener("hashchange",ne,!1),()=>De.removeEventListener("hashchange",ne)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(ne){this.location.pathname=ne}pushState(ne,De,ut){Be()?this._history.pushState(ne,De,ut):this.location.hash=ut}replaceState(ne,De,ut){Be()?this._history.replaceState(ne,De,ut):this.location.hash=ut}forward(){this._history.forward()}back(){this._history.back()}historyGo(ne=0){this._history.go(ne)}getState(){return this._history.state}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Oe))},te.\u0275prov=D.Yz7({token:te,factory:function(){return function gt(){return new He((0,D.LFG)(Oe))}()},providedIn:"platform"}),te})();function Be(){return!!window.history.pushState}function Ye(te,ve){if(0==te.length)return ve;if(0==ve.length)return te;let ne=0;return te.endsWith("/")&&ne++,ve.startsWith("/")&&ne++,2==ne?te+ve.substring(1):1==ne?te+ve:te+"/"+ve}function et(te){const ve=te.match(/#|\?|$/),ne=ve&&ve.index||te.length;return te.slice(0,ne-("/"===te[ne-1]?1:0))+te.slice(ne)}function bt(te){return te&&"?"!==te[0]?"?"+te:te}let We=(()=>{class te{historyGo(ne){throw new Error("Not implemented")}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275prov=D.Yz7({token:te,factory:function(){return function Ut(te){const ve=(0,D.LFG)(Oe).location;return new un((0,D.LFG)(Le),ve&&ve.origin||"")}()},providedIn:"root"}),te})();const jt=new D.OlP("appBaseHref");let un=(()=>{class te extends We{constructor(ne,De){if(super(),this._platformLocation=ne,this._removeListenerFns=[],null==De&&(De=this._platformLocation.getBaseHrefFromDOM()),null==De)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=De}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ne){this._removeListenerFns.push(this._platformLocation.onPopState(ne),this._platformLocation.onHashChange(ne))}getBaseHref(){return this._baseHref}prepareExternalUrl(ne){return Ye(this._baseHref,ne)}path(ne=!1){const De=this._platformLocation.pathname+bt(this._platformLocation.search),ut=this._platformLocation.hash;return ut&&ne?`${De}${ut}`:De}pushState(ne,De,ut,Yt){const cn=this.prepareExternalUrl(ut+bt(Yt));this._platformLocation.pushState(ne,De,cn)}replaceState(ne,De,ut,Yt){const cn=this.prepareExternalUrl(ut+bt(Yt));this._platformLocation.replaceState(ne,De,cn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ne=0){var De,ut;null===(ut=(De=this._platformLocation).historyGo)||void 0===ut||ut.call(De,ne)}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Le),D.LFG(jt,8))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})(),Dt=(()=>{class te extends We{constructor(ne,De){super(),this._platformLocation=ne,this._baseHref="",this._removeListenerFns=[],null!=De&&(this._baseHref=De)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ne){this._removeListenerFns.push(this._platformLocation.onPopState(ne),this._platformLocation.onHashChange(ne))}getBaseHref(){return this._baseHref}path(ne=!1){let De=this._platformLocation.hash;return null==De&&(De="#"),De.length>0?De.substring(1):De}prepareExternalUrl(ne){const De=Ye(this._baseHref,ne);return De.length>0?"#"+De:De}pushState(ne,De,ut,Yt){let cn=this.prepareExternalUrl(ut+bt(Yt));0==cn.length&&(cn=this._platformLocation.pathname),this._platformLocation.pushState(ne,De,cn)}replaceState(ne,De,ut,Yt){let cn=this.prepareExternalUrl(ut+bt(Yt));0==cn.length&&(cn=this._platformLocation.pathname),this._platformLocation.replaceState(ne,De,cn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ne=0){var De,ut;null===(ut=(De=this._platformLocation).historyGo)||void 0===ut||ut.call(De,ne)}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Le),D.LFG(jt,8))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})(),ke=(()=>{class te{constructor(ne,De){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=ne;const ut=this._platformStrategy.getBaseHref();this._platformLocation=De,this._baseHref=et(zt(ut)),this._platformStrategy.onPopState(Yt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Yt.state,type:Yt.type})})}path(ne=!1){return this.normalize(this._platformStrategy.path(ne))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(ne,De=""){return this.path()==this.normalize(ne+bt(De))}normalize(ne){return te.stripTrailingSlash(function nn(te,ve){return te&&ve.startsWith(te)?ve.substring(te.length):ve}(this._baseHref,zt(ne)))}prepareExternalUrl(ne){return ne&&"/"!==ne[0]&&(ne="/"+ne),this._platformStrategy.prepareExternalUrl(ne)}go(ne,De="",ut=null){this._platformStrategy.pushState(ut,"",ne,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(ne+bt(De)),ut)}replaceState(ne,De="",ut=null){this._platformStrategy.replaceState(ut,"",ne,De),this._notifyUrlChangeListeners(this.prepareExternalUrl(ne+bt(De)),ut)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(ne=0){var De,ut;null===(ut=(De=this._platformStrategy).historyGo)||void 0===ut||ut.call(De,ne)}onUrlChange(ne){this._urlChangeListeners.push(ne),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(De=>{this._notifyUrlChangeListeners(De.url,De.state)}))}_notifyUrlChangeListeners(ne="",De){this._urlChangeListeners.forEach(ut=>ut(ne,De))}subscribe(ne,De,ut){return this._subject.subscribe({next:ne,error:De,complete:ut})}}return te.normalizeQueryParams=bt,te.joinWithSlash=Ye,te.stripTrailingSlash=et,te.\u0275fac=function(ne){return new(ne||te)(D.LFG(We),D.LFG(Le))},te.\u0275prov=D.Yz7({token:te,factory:function(){return function ot(){return new ke((0,D.LFG)(We),(0,D.LFG)(Le))}()},providedIn:"root"}),te})();function zt(te){return te.replace(/\/index.html$/,"")}var yt=(()=>((yt=yt||{})[yt.Zero=0]="Zero",yt[yt.One=1]="One",yt[yt.Two=2]="Two",yt[yt.Few=3]="Few",yt[yt.Many=4]="Many",yt[yt.Other=5]="Other",yt))();const Pi=D.kL8;class Rn{}let ar=(()=>{class te extends Rn{constructor(ne){super(),this.locale=ne}getPluralCategory(ne,De){switch(Pi(De||this.locale)(ne)){case yt.Zero:return"zero";case yt.One:return"one";case yt.Two:return"two";case yt.Few:return"few";case yt.Many:return"many";default:return"other"}}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(D.soG))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})();function wr(te,ve){ve=encodeURIComponent(ve);for(const ne of te.split(";")){const De=ne.indexOf("="),[ut,Yt]=-1==De?[ne,""]:[ne.slice(0,De),ne.slice(De+1)];if(ut.trim()===ve)return decodeURIComponent(Yt)}return null}let Ji=(()=>{class te{constructor(ne,De,ut,Yt){this._iterableDiffers=ne,this._keyValueDiffers=De,this._ngEl=ut,this._renderer=Yt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(ne){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof ne?ne.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(ne){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof ne?ne.split(/\s+/):ne,this._rawClass&&((0,D.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const ne=this._iterableDiffer.diff(this._rawClass);ne&&this._applyIterableChanges(ne)}else if(this._keyValueDiffer){const ne=this._keyValueDiffer.diff(this._rawClass);ne&&this._applyKeyValueChanges(ne)}}_applyKeyValueChanges(ne){ne.forEachAddedItem(De=>this._toggleClass(De.key,De.currentValue)),ne.forEachChangedItem(De=>this._toggleClass(De.key,De.currentValue)),ne.forEachRemovedItem(De=>{De.previousValue&&this._toggleClass(De.key,!1)})}_applyIterableChanges(ne){ne.forEachAddedItem(De=>{if("string"!=typeof De.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,D.AaK)(De.item)}`);this._toggleClass(De.item,!0)}),ne.forEachRemovedItem(De=>this._toggleClass(De.item,!1))}_applyClasses(ne){ne&&(Array.isArray(ne)||ne instanceof Set?ne.forEach(De=>this._toggleClass(De,!0)):Object.keys(ne).forEach(De=>this._toggleClass(De,!!ne[De])))}_removeClasses(ne){ne&&(Array.isArray(ne)||ne instanceof Set?ne.forEach(De=>this._toggleClass(De,!1)):Object.keys(ne).forEach(De=>this._toggleClass(De,!1)))}_toggleClass(ne,De){(ne=ne.trim())&&ne.split(/\s+/g).forEach(ut=>{De?this._renderer.addClass(this._ngEl.nativeElement,ut):this._renderer.removeClass(this._ngEl.nativeElement,ut)})}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.ZZ4),D.Y36(D.aQg),D.Y36(D.SBq),D.Y36(D.Qsj))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),te})();class zo{constructor(ve,ne,De,ut){this.$implicit=ve,this.ngForOf=ne,this.index=De,this.count=ut}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ri=(()=>{class te{constructor(ne,De,ut){this._viewContainer=ne,this._template=De,this._differs=ut,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ne){this._ngForOf=ne,this._ngForOfDirty=!0}set ngForTrackBy(ne){this._trackByFn=ne}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(ne){ne&&(this._template=ne)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ne=this._ngForOf;!this._differ&&ne&&(this._differ=this._differs.find(ne).create(this.ngForTrackBy))}if(this._differ){const ne=this._differ.diff(this._ngForOf);ne&&this._applyChanges(ne)}}_applyChanges(ne){const De=this._viewContainer;ne.forEachOperation((ut,Yt,cn)=>{if(null==ut.previousIndex)De.createEmbeddedView(this._template,new zo(ut.item,this._ngForOf,-1,-1),null===cn?void 0:cn);else if(null==cn)De.remove(null===Yt?void 0:Yt);else if(null!==Yt){const Hn=De.get(Yt);De.move(Hn,cn),co(Hn,ut)}});for(let ut=0,Yt=De.length;ut<Yt;ut++){const Hn=De.get(ut).context;Hn.index=ut,Hn.count=Yt,Hn.ngForOf=this._ngForOf}ne.forEachIdentityChange(ut=>{co(De.get(ut.currentIndex),ut)})}static ngTemplateContextGuard(ne,De){return!0}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),te})();function co(te,ve){te.context.$implicit=ve.item}let _r=(()=>{class te{constructor(ne,De){this._viewContainer=ne,this._context=new Zi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=De}set ngIf(ne){this._context.$implicit=this._context.ngIf=ne,this._updateView()}set ngIfThen(ne){to("ngIfThen",ne),this._thenTemplateRef=ne,this._thenViewRef=null,this._updateView()}set ngIfElse(ne){to("ngIfElse",ne),this._elseTemplateRef=ne,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ne,De){return!0}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),te})();class Zi{constructor(){this.$implicit=null,this.ngIf=null}}function to(te,ve){if(ve&&!ve.createEmbeddedView)throw new Error(`${te} must be a TemplateRef, but received '${(0,D.AaK)(ve)}'.`)}class qo{constructor(ve,ne){this._viewContainerRef=ve,this._templateRef=ne,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ve){ve&&!this._created?this.create():!ve&&this._created&&this.destroy()}}let Pr=(()=>{class te{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(ne){this._ngSwitch=ne,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(ne){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(ne)}_matchCase(ne){const De=ne==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||De,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),De}_updateDefaultCases(ne){if(this._defaultViews&&ne!==this._defaultUsed){this._defaultUsed=ne;for(let De=0;De<this._defaultViews.length;De++)this._defaultViews[De].enforceState(ne)}}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),te})(),Yr=(()=>{class te{constructor(ne,De,ut){this.ngSwitch=ut,ut._addCase(),this._view=new qo(ne,De)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Pr,9))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),te})(),Es=(()=>{class te{constructor(ne,De,ut){ut._addDefault(new qo(ne,De))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Pr,9))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitchDefault",""]]}),te})(),ns=(()=>{class te{constructor(ne,De,ut){this._ngEl=ne,this._differs=De,this._renderer=ut,this._ngStyle=null,this._differ=null}set ngStyle(ne){this._ngStyle=ne,!this._differ&&ne&&(this._differ=this._differs.find(ne).create())}ngDoCheck(){if(this._differ){const ne=this._differ.diff(this._ngStyle);ne&&this._applyChanges(ne)}}_setStyle(ne,De){const[ut,Yt]=ne.split(".");null!=(De=null!=De&&Yt?`${De}${Yt}`:De)?this._renderer.setStyle(this._ngEl.nativeElement,ut,De):this._renderer.removeStyle(this._ngEl.nativeElement,ut)}_applyChanges(ne){ne.forEachRemovedItem(De=>this._setStyle(De.key,null)),ne.forEachAddedItem(De=>this._setStyle(De.key,De.currentValue)),ne.forEachChangedItem(De=>this._setStyle(De.key,De.currentValue))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.SBq),D.Y36(D.aQg),D.Y36(D.Qsj))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),te})(),is=(()=>{class te{constructor(ne){this._viewContainerRef=ne,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(ne){if(ne.ngTemplateOutlet){const De=this._viewContainerRef;this._viewRef&&De.remove(De.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?De.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&ne.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[D.TTD]}),te})();class Gr{createSubscription(ve,ne){return ve.subscribe({next:ne,error:De=>{throw De}})}dispose(ve){ve.unsubscribe()}onDestroy(ve){ve.unsubscribe()}}class Uo{createSubscription(ve,ne){return ve.then(ne,De=>{throw De})}dispose(ve){}onDestroy(ve){}}const Ds=new Uo,Fr=new Gr;let rs=(()=>{class te{constructor(ne){this._ref=ne,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(ne){return this._obj?ne!==this._obj?(this._dispose(),this.transform(ne)):this._latestValue:(ne&&this._subscribe(ne),this._latestValue)}_subscribe(ne){this._obj=ne,this._strategy=this._selectStrategy(ne),this._subscription=this._strategy.createSubscription(ne,De=>this._updateLatestValue(ne,De))}_selectStrategy(ne){if((0,D.QGY)(ne))return Ds;if((0,D.F4k)(ne))return Fr;throw function Kr(te,ve){return new D.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(ne,De){ne===this._obj&&(this._latestValue=De,this._ref.markForCheck())}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.sBO,16))},te.\u0275pipe=D.Yjl({name:"async",type:te,pure:!1}),te})(),jo=(()=>{class te{}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275mod=D.oAB({type:te}),te.\u0275inj=D.cJS({providers:[{provide:Rn,useClass:ar}]}),te})();const ss="browser";function uo(te){return te===ss}let As=(()=>{class te{}return te.\u0275prov=(0,D.Yz7)({token:te,providedIn:"root",factory:()=>new Ks((0,D.LFG)(Oe),window)}),te})();class Ks{constructor(ve,ne){this.document=ve,this.window=ne,this.offset=()=>[0,0]}setOffset(ve){this.offset=Array.isArray(ve)?()=>ve:ve}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ve){this.supportsScrolling()&&this.window.scrollTo(ve[0],ve[1])}scrollToAnchor(ve){if(!this.supportsScrolling())return;const ne=function pa(te,ve){const ne=te.getElementById(ve)||te.getElementsByName(ve)[0];if(ne)return ne;if("function"==typeof te.createTreeWalker&&te.body&&(te.body.createShadowRoot||te.body.attachShadow)){const De=te.createTreeWalker(te.body,NodeFilter.SHOW_ELEMENT);let ut=De.currentNode;for(;ut;){const Yt=ut.shadowRoot;if(Yt){const cn=Yt.getElementById(ve)||Yt.querySelector(`[name="${ve}"]`);if(cn)return cn}ut=De.nextNode()}}return null}(this.document,ve);ne&&(this.scrollToElement(ne),this.attemptFocus(ne))}setHistoryScrollRestoration(ve){if(this.supportScrollRestoration()){const ne=this.window.history;ne&&ne.scrollRestoration&&(ne.scrollRestoration=ve)}}scrollToElement(ve){const ne=ve.getBoundingClientRect(),De=ne.left+this.window.pageXOffset,ut=ne.top+this.window.pageYOffset,Yt=this.offset();this.window.scrollTo(De-Yt[0],ut-Yt[1])}attemptFocus(ve){return ve.focus(),this.document.activeElement===ve}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ve=yr(this.window.history)||yr(Object.getPrototypeOf(this.window.history));return!(!ve||!ve.writable&&!ve.set)}catch(ve){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ve){return!1}}}function yr(te){return Object.getOwnPropertyDescriptor(te,"scrollRestoration")}class kr{}},520:(Sn,wt,V)=>{"use strict";V.d(wt,{eN:()=>Ct,JF:()=>Zn});var D=V(9808),l=V(5e3),W=V(9646),f=V(8306),je=V(4351),qe=V(9300),Oe=V(4004);class Le{}class he{}class ze{constructor(R){this.normalizedNames=new Map,this.lazyUpdate=null,R?this.lazyInit="string"==typeof R?()=>{this.headers=new Map,R.split("\n").forEach(B=>{const ie=B.indexOf(":");if(ie>0){const fe=B.slice(0,ie),tt=fe.toLowerCase(),It=B.slice(ie+1).trim();this.maybeSetNormalizedName(fe,tt),this.headers.has(tt)?this.headers.get(tt).push(It):this.headers.set(tt,[It])}})}:()=>{this.headers=new Map,Object.keys(R).forEach(B=>{let ie=R[B];const fe=B.toLowerCase();"string"==typeof ie&&(ie=[ie]),ie.length>0&&(this.headers.set(fe,ie),this.maybeSetNormalizedName(B,fe))})}:this.headers=new Map}has(R){return this.init(),this.headers.has(R.toLowerCase())}get(R){this.init();const B=this.headers.get(R.toLowerCase());return B&&B.length>0?B[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(R){return this.init(),this.headers.get(R.toLowerCase())||null}append(R,B){return this.clone({name:R,value:B,op:"a"})}set(R,B){return this.clone({name:R,value:B,op:"s"})}delete(R,B){return this.clone({name:R,value:B,op:"d"})}maybeSetNormalizedName(R,B){this.normalizedNames.has(B)||this.normalizedNames.set(B,R)}init(){this.lazyInit&&(this.lazyInit instanceof ze?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(R=>this.applyUpdate(R)),this.lazyUpdate=null))}copyFrom(R){R.init(),Array.from(R.headers.keys()).forEach(B=>{this.headers.set(B,R.headers.get(B)),this.normalizedNames.set(B,R.normalizedNames.get(B))})}clone(R){const B=new ze;return B.lazyInit=this.lazyInit&&this.lazyInit instanceof ze?this.lazyInit:this,B.lazyUpdate=(this.lazyUpdate||[]).concat([R]),B}applyUpdate(R){const B=R.name.toLowerCase();switch(R.op){case"a":case"s":let ie=R.value;if("string"==typeof ie&&(ie=[ie]),0===ie.length)return;this.maybeSetNormalizedName(R.name,B);const fe=("a"===R.op?this.headers.get(B):void 0)||[];fe.push(...ie),this.headers.set(B,fe);break;case"d":const tt=R.value;if(tt){let It=this.headers.get(B);if(!It)return;It=It.filter(_t=>-1===tt.indexOf(_t)),0===It.length?(this.headers.delete(B),this.normalizedNames.delete(B)):this.headers.set(B,It)}else this.headers.delete(B),this.normalizedNames.delete(B)}}forEach(R){this.init(),Array.from(this.normalizedNames.keys()).forEach(B=>R(this.normalizedNames.get(B),this.headers.get(B)))}}class He{encodeKey(R){return et(R)}encodeValue(R){return et(R)}decodeKey(R){return decodeURIComponent(R)}decodeValue(R){return decodeURIComponent(R)}}const gt=/%(\d[a-f0-9])/gi,Ye={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function et(U){return encodeURIComponent(U).replace(gt,(R,B)=>{var ie;return null!==(ie=Ye[B])&&void 0!==ie?ie:R})}function bt(U){return`${U}`}class We{constructor(R={}){if(this.updates=null,this.cloneFrom=null,this.encoder=R.encoder||new He,R.fromString){if(R.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Be(U,R){const B=new Map;return U.length>0&&U.replace(/^\?/,"").split("&").forEach(fe=>{const tt=fe.indexOf("="),[It,_t]=-1==tt?[R.decodeKey(fe),""]:[R.decodeKey(fe.slice(0,tt)),R.decodeValue(fe.slice(tt+1))],mn=B.get(It)||[];mn.push(_t),B.set(It,mn)}),B}(R.fromString,this.encoder)}else R.fromObject?(this.map=new Map,Object.keys(R.fromObject).forEach(B=>{const ie=R.fromObject[B];this.map.set(B,Array.isArray(ie)?ie:[ie])})):this.map=null}has(R){return this.init(),this.map.has(R)}get(R){this.init();const B=this.map.get(R);return B?B[0]:null}getAll(R){return this.init(),this.map.get(R)||null}keys(){return this.init(),Array.from(this.map.keys())}append(R,B){return this.clone({param:R,value:B,op:"a"})}appendAll(R){const B=[];return Object.keys(R).forEach(ie=>{const fe=R[ie];Array.isArray(fe)?fe.forEach(tt=>{B.push({param:ie,value:tt,op:"a"})}):B.push({param:ie,value:fe,op:"a"})}),this.clone(B)}set(R,B){return this.clone({param:R,value:B,op:"s"})}delete(R,B){return this.clone({param:R,value:B,op:"d"})}toString(){return this.init(),this.keys().map(R=>{const B=this.encoder.encodeKey(R);return this.map.get(R).map(ie=>B+"="+this.encoder.encodeValue(ie)).join("&")}).filter(R=>""!==R).join("&")}clone(R){const B=new We({encoder:this.encoder});return B.cloneFrom=this.cloneFrom||this,B.updates=(this.updates||[]).concat(R),B}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(R=>this.map.set(R,this.cloneFrom.map.get(R))),this.updates.forEach(R=>{switch(R.op){case"a":case"s":const B=("a"===R.op?this.map.get(R.param):void 0)||[];B.push(bt(R.value)),this.map.set(R.param,B);break;case"d":if(void 0===R.value){this.map.delete(R.param);break}{let ie=this.map.get(R.param)||[];const fe=ie.indexOf(bt(R.value));-1!==fe&&ie.splice(fe,1),ie.length>0?this.map.set(R.param,ie):this.map.delete(R.param)}}}),this.cloneFrom=this.updates=null)}}class jt{constructor(){this.map=new Map}set(R,B){return this.map.set(R,B),this}get(R){return this.map.has(R)||this.map.set(R,R.defaultValue()),this.map.get(R)}delete(R){return this.map.delete(R),this}has(R){return this.map.has(R)}keys(){return this.map.keys()}}function Dt(U){return"undefined"!=typeof ArrayBuffer&&U instanceof ArrayBuffer}function ke(U){return"undefined"!=typeof Blob&&U instanceof Blob}function ot(U){return"undefined"!=typeof FormData&&U instanceof FormData}class zt{constructor(R,B,ie,fe){let tt;if(this.url=B,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=R.toUpperCase(),function un(U){switch(U){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fe?(this.body=void 0!==ie?ie:null,tt=fe):tt=ie,tt&&(this.reportProgress=!!tt.reportProgress,this.withCredentials=!!tt.withCredentials,tt.responseType&&(this.responseType=tt.responseType),tt.headers&&(this.headers=tt.headers),tt.context&&(this.context=tt.context),tt.params&&(this.params=tt.params)),this.headers||(this.headers=new ze),this.context||(this.context=new jt),this.params){const It=this.params.toString();if(0===It.length)this.urlWithParams=B;else{const _t=B.indexOf("?");this.urlWithParams=B+(-1===_t?"?":_t<B.length-1?"&":"")+It}}else this.params=new We,this.urlWithParams=B}serializeBody(){return null===this.body?null:Dt(this.body)||ke(this.body)||ot(this.body)||function nn(U){return"undefined"!=typeof URLSearchParams&&U instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof We?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:ke(this.body)?this.body.type||null:Dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof We?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(R={}){var B;const ie=R.method||this.method,fe=R.url||this.url,tt=R.responseType||this.responseType,It=void 0!==R.body?R.body:this.body,_t=void 0!==R.withCredentials?R.withCredentials:this.withCredentials,mn=void 0!==R.reportProgress?R.reportProgress:this.reportProgress;let _n=R.headers||this.headers,Vn=R.params||this.params;const yi=null!==(B=R.context)&&void 0!==B?B:this.context;return void 0!==R.setHeaders&&(_n=Object.keys(R.setHeaders).reduce((en,pn)=>en.set(pn,R.setHeaders[pn]),_n)),R.setParams&&(Vn=Object.keys(R.setParams).reduce((en,pn)=>en.set(pn,R.setParams[pn]),Vn)),new zt(ie,fe,It,{params:Vn,headers:_n,context:yi,reportProgress:mn,responseType:tt,withCredentials:_t})}}var tn=(()=>((tn=tn||{})[tn.Sent=0]="Sent",tn[tn.UploadProgress=1]="UploadProgress",tn[tn.ResponseHeader=2]="ResponseHeader",tn[tn.DownloadProgress=3]="DownloadProgress",tn[tn.Response=4]="Response",tn[tn.User=5]="User",tn))();class st{constructor(R,B=200,ie="OK"){this.headers=R.headers||new ze,this.status=void 0!==R.status?R.status:B,this.statusText=R.statusText||ie,this.url=R.url||null,this.ok=this.status>=200&&this.status<300}}class yt extends st{constructor(R={}){super(R),this.type=tn.ResponseHeader}clone(R={}){return new yt({headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class ct extends st{constructor(R={}){super(R),this.type=tn.Response,this.body=void 0!==R.body?R.body:null}clone(R={}){return new ct({body:void 0!==R.body?R.body:this.body,headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class Tt extends st{constructor(R){super(R,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${R.url||"(unknown url)"}`:`Http failure response for ${R.url||"(unknown url)"}: ${R.status} ${R.statusText}`,this.error=R.error||null}}function Xt(U,R){return{body:R,headers:U.headers,context:U.context,observe:U.observe,params:U.params,reportProgress:U.reportProgress,responseType:U.responseType,withCredentials:U.withCredentials}}let Ct=(()=>{class U{constructor(B){this.handler=B}request(B,ie,fe={}){let tt;if(B instanceof zt)tt=B;else{let mn,_n;mn=fe.headers instanceof ze?fe.headers:new ze(fe.headers),fe.params&&(_n=fe.params instanceof We?fe.params:new We({fromObject:fe.params})),tt=new zt(B,ie,void 0!==fe.body?fe.body:null,{headers:mn,context:fe.context,params:_n,reportProgress:fe.reportProgress,responseType:fe.responseType||"json",withCredentials:fe.withCredentials})}const It=(0,W.of)(tt).pipe((0,je.b)(mn=>this.handler.handle(mn)));if(B instanceof zt||"events"===fe.observe)return It;const _t=It.pipe((0,qe.h)(mn=>mn instanceof ct));switch(fe.observe||"body"){case"body":switch(tt.responseType){case"arraybuffer":return _t.pipe((0,Oe.U)(mn=>{if(null!==mn.body&&!(mn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return mn.body}));case"blob":return _t.pipe((0,Oe.U)(mn=>{if(null!==mn.body&&!(mn.body instanceof Blob))throw new Error("Response is not a Blob.");return mn.body}));case"text":return _t.pipe((0,Oe.U)(mn=>{if(null!==mn.body&&"string"!=typeof mn.body)throw new Error("Response is not a string.");return mn.body}));default:return _t.pipe((0,Oe.U)(mn=>mn.body))}case"response":return _t;default:throw new Error(`Unreachable: unhandled observe type ${fe.observe}}`)}}delete(B,ie={}){return this.request("DELETE",B,ie)}get(B,ie={}){return this.request("GET",B,ie)}head(B,ie={}){return this.request("HEAD",B,ie)}jsonp(B,ie){return this.request("JSONP",B,{params:(new We).append(ie,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(B,ie={}){return this.request("OPTIONS",B,ie)}patch(B,ie,fe={}){return this.request("PATCH",B,Xt(fe,ie))}post(B,ie,fe={}){return this.request("POST",B,Xt(fe,ie))}put(B,ie,fe={}){return this.request("PUT",B,Xt(fe,ie))}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(Le))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();class vn{constructor(R,B){this.next=R,this.interceptor=B}handle(R){return this.interceptor.intercept(R,this.next)}}const fi=new l.OlP("HTTP_INTERCEPTORS");let zi=(()=>{class U{intercept(B,ie){return ie.handle(B)}}return U.\u0275fac=function(B){return new(B||U)},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();const ii=/^\)\]\}',?\n/;let Ft=(()=>{class U{constructor(B){this.xhrFactory=B}handle(B){if("JSONP"===B.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new f.y(ie=>{const fe=this.xhrFactory.build();if(fe.open(B.method,B.urlWithParams),B.withCredentials&&(fe.withCredentials=!0),B.headers.forEach((pn,qt)=>fe.setRequestHeader(pn,qt.join(","))),B.headers.has("Accept")||fe.setRequestHeader("Accept","application/json, text/plain, */*"),!B.headers.has("Content-Type")){const pn=B.detectContentTypeHeader();null!==pn&&fe.setRequestHeader("Content-Type",pn)}if(B.responseType){const pn=B.responseType.toLowerCase();fe.responseType="json"!==pn?pn:"text"}const tt=B.serializeBody();let It=null;const _t=()=>{if(null!==It)return It;const pn=1223===fe.status?204:fe.status,qt=fe.statusText||"OK",Ai=new ze(fe.getAllResponseHeaders()),Qn=function ft(U){return"responseURL"in U&&U.responseURL?U.responseURL:/^X-Request-URL:/m.test(U.getAllResponseHeaders())?U.getResponseHeader("X-Request-URL"):null}(fe)||B.url;return It=new yt({headers:Ai,status:pn,statusText:qt,url:Qn}),It},mn=()=>{let{headers:pn,status:qt,statusText:Ai,url:Qn}=_t(),Ln=null;204!==qt&&(Ln=void 0===fe.response?fe.responseText:fe.response),0===qt&&(qt=Ln?200:0);let Bt=qt>=200&&qt<300;if("json"===B.responseType&&"string"==typeof Ln){const pt=Ln;Ln=Ln.replace(ii,"");try{Ln=""!==Ln?JSON.parse(Ln):null}catch(Ce){Ln=pt,Bt&&(Bt=!1,Ln={error:Ce,text:Ln})}}Bt?(ie.next(new ct({body:Ln,headers:pn,status:qt,statusText:Ai,url:Qn||void 0})),ie.complete()):ie.error(new Tt({error:Ln,headers:pn,status:qt,statusText:Ai,url:Qn||void 0}))},_n=pn=>{const{url:qt}=_t(),Ai=new Tt({error:pn,status:fe.status||0,statusText:fe.statusText||"Unknown Error",url:qt||void 0});ie.error(Ai)};let Vn=!1;const yi=pn=>{Vn||(ie.next(_t()),Vn=!0);let qt={type:tn.DownloadProgress,loaded:pn.loaded};pn.lengthComputable&&(qt.total=pn.total),"text"===B.responseType&&!!fe.responseText&&(qt.partialText=fe.responseText),ie.next(qt)},en=pn=>{let qt={type:tn.UploadProgress,loaded:pn.loaded};pn.lengthComputable&&(qt.total=pn.total),ie.next(qt)};return fe.addEventListener("load",mn),fe.addEventListener("error",_n),fe.addEventListener("timeout",_n),fe.addEventListener("abort",_n),B.reportProgress&&(fe.addEventListener("progress",yi),null!==tt&&fe.upload&&fe.upload.addEventListener("progress",en)),fe.send(tt),ie.next({type:tn.Sent}),()=>{fe.removeEventListener("error",_n),fe.removeEventListener("abort",_n),fe.removeEventListener("load",mn),fe.removeEventListener("timeout",_n),B.reportProgress&&(fe.removeEventListener("progress",yi),null!==tt&&fe.upload&&fe.upload.removeEventListener("progress",en)),fe.readyState!==fe.DONE&&fe.abort()}})}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(D.JF))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();const on=new l.OlP("XSRF_COOKIE_NAME"),gn=new l.OlP("XSRF_HEADER_NAME");class zn{}let Jn=(()=>{class U{constructor(B,ie,fe){this.doc=B,this.platform=ie,this.cookieName=fe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const B=this.doc.cookie||"";return B!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,D.Mx)(B,this.cookieName),this.lastCookieString=B),this.lastToken}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(D.K0),l.LFG(l.Lbi),l.LFG(on))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),Pi=(()=>{class U{constructor(B,ie){this.tokenService=B,this.headerName=ie}intercept(B,ie){const fe=B.url.toLowerCase();if("GET"===B.method||"HEAD"===B.method||fe.startsWith("http://")||fe.startsWith("https://"))return ie.handle(B);const tt=this.tokenService.getToken();return null!==tt&&!B.headers.has(this.headerName)&&(B=B.clone({headers:B.headers.set(this.headerName,tt)})),ie.handle(B)}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(zn),l.LFG(gn))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),er=(()=>{class U{constructor(B,ie){this.backend=B,this.injector=ie,this.chain=null}handle(B){if(null===this.chain){const ie=this.injector.get(fi,[]);this.chain=ie.reduceRight((fe,tt)=>new vn(fe,tt),this.backend)}return this.chain.handle(B)}}return U.\u0275fac=function(B){return new(B||U)(l.LFG(he),l.LFG(l.zs3))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),ri=(()=>{class U{static disable(){return{ngModule:U,providers:[{provide:Pi,useClass:zi}]}}static withOptions(B={}){return{ngModule:U,providers:[B.cookieName?{provide:on,useValue:B.cookieName}:[],B.headerName?{provide:gn,useValue:B.headerName}:[]]}}}return U.\u0275fac=function(B){return new(B||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({providers:[Pi,{provide:fi,useExisting:Pi,multi:!0},{provide:zn,useClass:Jn},{provide:on,useValue:"XSRF-TOKEN"},{provide:gn,useValue:"X-XSRF-TOKEN"}]}),U})(),Zn=(()=>{class U{}return U.\u0275fac=function(B){return new(B||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({providers:[Ct,{provide:Le,useClass:er},Ft,{provide:he,useExisting:Ft}],imports:[[ri.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),U})()},5e3:(Sn,wt,V)=>{"use strict";V.d(wt,{deG:()=>xe,tb:()=>xx,AFp:()=>yx,ip1:()=>$0,CZH:()=>Qp,hGG:()=>_1,z2F:()=>zm,sBO:()=>Zw,Sil:()=>W0,_Vd:()=>Za,EJc:()=>Cx,SBq:()=>Ch,qLn:()=>tc,vpe:()=>$l,tBr:()=>Jl,XFs:()=>Kn,OlP:()=>le,zs3:()=>cl,ZZ4:()=>iy,aQg:()=>ry,soG:()=>ty,YKP:()=>gi,h0i:()=>ti,PXZ:()=>zw,R0b:()=>Tl,FiY:()=>ta,Lbi:()=>bx,g9A:()=>vx,n_E:()=>Y_,Qsj:()=>km,FYo:()=>qi,JOm:()=>ja,q3G:()=>Fo,tp0:()=>Xl,Rgc:()=>Nm,dDg:()=>Mx,GfV:()=>W_,s_b:()=>J_,ifc:()=>tt,eFA:()=>Ax,G48:()=>$w,Gpc:()=>He,f3M:()=>Fc,_c5:()=>u1,VLi:()=>Lw,c2e:()=>wx,zSh:()=>Bf,wAp:()=>Gi,vHH:()=>et,EiD:()=>vc,mCW:()=>gc,qzn:()=>nl,JVY:()=>Vh,pB0:()=>wd,eBb:()=>rf,L6k:()=>nf,LAX:()=>sf,cg1:()=>gm,kL8:()=>w_,yhl:()=>Fs,dqk:()=>Vn,sIi:()=>ph,CqO:()=>Ag,QGY:()=>im,F4k:()=>Tg,RDi:()=>ls,AaK:()=>Le,z3N:()=>ya,qOj:()=>Gf,TTD:()=>Yo,_Bn:()=>$_,xp6:()=>zu,uIk:()=>Wf,Tol:()=>Xg,Gre:()=>h_,ekj:()=>cm,Suo:()=>Jb,Xpm:()=>ye,lG2:()=>it,Yz7:()=>_i,cJS:()=>ii,oAB:()=>Ui,Yjl:()=>J,Y36:()=>mh,_UZ:()=>Dg,GkF:()=>Mg,BQk:()=>nm,ynx:()=>tm,qZA:()=>em,TgZ:()=>Qf,EpF:()=>Sg,n5z:()=>Xs,Ikx:()=>fm,LFG:()=>ko,$8M:()=>i,$Z:()=>Eg,NdJ:()=>rm,CRH:()=>Xb,kcU:()=>Tr,O4$:()=>Wr,oxw:()=>Og,ALo:()=>Ah,lcZ:()=>Ih,Hsn:()=>Rg,F$t:()=>kg,Q6J:()=>Jf,DdM:()=>Ml,VKq:()=>cc,WLB:()=>Dh,kEZ:()=>dl,rFY:()=>$p,iGM:()=>Yb,MAs:()=>Ny,Jf7:()=>nc,CHM:()=>M,oJD:()=>Su,LSH:()=>Gc,Akn:()=>wl,Udp:()=>lm,WFA:()=>om,d8E:()=>mm,YNc:()=>Ly,_uU:()=>o_,Oqu:()=>hm,hij:()=>Op,Gf:()=>Kb});var D=V(7579),l=V(727),W=V(8306),f=V(6451),je=V(3099);function qe(t){for(let n in t)if(t[n]===qe)return n;throw Error("Could not find renamed property on target object.")}function Oe(t,n){for(const o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=n[o])}function Le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const o=n.indexOf("\n");return-1===o?n:n.substring(0,o)}function he(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const ze=qe({__forward_ref__:qe});function He(t){return t.__forward_ref__=He,t.toString=function(){return Le(this())},t}function Be(t){return gt(t)?t():t}function gt(t){return"function"==typeof t&&t.hasOwnProperty(ze)&&t.__forward_ref__===He}class et extends Error{constructor(n,o){super(function bt(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,o)),this.code=n}}function We(t){return"string"==typeof t?t:null==t?"":String(t)}function Ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():We(t)}function ke(t,n){const o=n?` in ${n}`:"";throw new et(-201,`No provider for ${Ut(t)} found${o}`)}function Dn(t,n){null==t&&function Tn(t,n,o,u){throw new Error(`ASSERTION ERROR: ${t}`+(null==u?"":` [Expected=> ${o} ${u} ${n} <=Actual]`))}(n,t,null,"!=")}function _i(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ii(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return Ft(t,Jn)||Ft(t,er)}function Ft(t,n){return t.hasOwnProperty(n)?t[n]:null}function zn(t){return t&&(t.hasOwnProperty(Pi)||t.hasOwnProperty(sr))?t[Pi]:null}const Jn=qe({\u0275prov:qe}),Pi=qe({\u0275inj:qe}),er=qe({ngInjectableDef:qe}),sr=qe({ngInjectorDef:qe});var Kn=(()=>((Kn=Kn||{})[Kn.Default=0]="Default",Kn[Kn.Host=1]="Host",Kn[Kn.Self=2]="Self",Kn[Kn.SkipSelf=4]="SkipSelf",Kn[Kn.Optional=8]="Optional",Kn))();let ri;function ht(t){const n=ri;return ri=t,n}function $(t,n,o){const u=ft(t);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Kn.Optional?null:void 0!==n?n:void ke(Le(t),"Injector")}function R(t){return{toString:t}.toString()}var B=(()=>((B=B||{})[B.OnPush=0]="OnPush",B[B.Default=1]="Default",B))(),tt=(()=>{return(t=tt||(tt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",tt;var t})();const It="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,mn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vn=It||"undefined"!=typeof global&&global||_t||mn,pn={},qt=[],Ai=qe({\u0275cmp:qe}),Qn=qe({\u0275dir:qe}),Ln=qe({\u0275pipe:qe}),Bt=qe({\u0275mod:qe}),pt=qe({\u0275fac:qe}),Ce=qe({__NG_ELEMENT_ID__:qe});let Ae=0;function ye(t){return R(()=>{const o={},u={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===B.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||qt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||tt.Emulated,id:"c",styles:t.styles||qt,_:null,setInput:null,schemas:t.schemas||null,tView:null},p=t.directives,b=t.features,T=t.pipes;return u.id+=Ae++,u.inputs=St(t.inputs,o),u.outputs=St(t.outputs),b&&b.forEach(k=>k(u)),u.directiveDefs=p?()=>("function"==typeof p?p():p).map(Pt):null,u.pipeDefs=T?()=>("function"==typeof T?T():T).map(fn):null,u})}function Pt(t){return F(t)||function K(t){return t[Qn]||null}(t)}function fn(t){return function ge(t){return t[Ln]||null}(t)}const bi={};function Ui(t){return R(()=>{const n={type:t.type,bootstrap:t.bootstrap||qt,declarations:t.declarations||qt,imports:t.imports||qt,exports:t.exports||qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(bi[t.id]=t.type),n})}function St(t,n){if(null==t)return pn;const o={};for(const u in t)if(t.hasOwnProperty(u)){let p=t[u],b=p;Array.isArray(p)&&(b=p[1],p=p[0]),o[p]=u,n&&(n[p]=b)}return o}const it=ye;function J(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function F(t){return t[Ai]||null}function Ee(t,n){const o=t[Bt]||null;if(!o&&!0===n)throw new Error(`Type ${Le(t)} does not have '\u0275mod' property.`);return o}function Pr(t){return Array.isArray(t)&&"object"==typeof t[1]}function Yr(t){return Array.isArray(t)&&!0===t[1]}function Es(t){return 0!=(8&t.flags)}function qs(t){return 2==(2&t.flags)}function no(t){return 1==(1&t.flags)}function Ar(t){return null!==t.template}function ns(t){return 0!=(512&t[2])}function So(t,n){return t.hasOwnProperty(pt)?t[pt]:null}class fs{constructor(n,o,u){this.previousValue=n,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Yo(){return Or}function Or(t){return t.type.prototype.ngOnChanges&&(t.setInput=ms),wo}function wo(){const t=ss(this),n=null==t?void 0:t.current;if(n){const o=t.previous;if(o===pn)t.previous=n;else for(let u in n)o[u]=n[u];t.current=null,this.ngOnChanges(n)}}function ms(t,n,o,u){const p=ss(t)||function gs(t,n){return t[jo]=n}(t,{previous:pn,current:null}),b=p.current||(p.current={}),T=p.previous,k=this.declaredInputs[o],G=T[k];b[k]=new fs(G&&G.currentValue,n,T===pn),t[u]=n}Yo.ngInherit=!0;const jo="__ngSimpleChanges__";function ss(t){return t[jo]||null}const Ts="http://www.w3.org/2000/svg";let ho;function ls(t){ho=t}function As(){return void 0!==ho?ho:"undefined"!=typeof document?document:void 0}function yr(t){return!!t.listen}const pa={createRenderer:(t,n)=>As()};function kr(t){for(;Array.isArray(t);)t=t[0];return t}function ne(t,n){return kr(n[t])}function De(t,n){return kr(n[t.index])}function Yt(t,n){return t.data[n]}function cn(t,n){return t[n]}function Hn(t,n){const o=n[t];return Pr(o)?o:o[0]}function wi(t){return 4==(4&t[2])}function lr(t){return 128==(128&t[2])}function ji(t,n){return null==n?null:t[n]}function X(t){t[18]=0}function q(t,n){t[5]+=n;let o=t,u=t[3];for(;null!==u&&(1===n&&1===o[5]||-1===n&&0===o[5]);)u[5]+=n,o=u,u=u[3]}const N={lFrame:ys(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $r(){return N.bindingsEnabled}function yn(){return N.lFrame.lView}function ue(){return N.lFrame.tView}function M(t){return N.lFrame.contextLView=t,t[8]}function S(){let t=H();for(;null!==t&&64===t.type;)t=t.parent;return t}function H(){return N.lFrame.currentTNode}function Te(t,n){const o=N.lFrame;o.currentTNode=t,o.isParent=n}function Ue(){return N.lFrame.isParent}function rt(){N.lFrame.isParent=!1}function Mn(){return N.isInCheckNoChangesMode}function oi(t){N.isInCheckNoChangesMode=t}function vi(){const t=N.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ci(){return N.lFrame.bindingIndex++}function Hi(t){const n=N.lFrame,o=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,o}function io(t,n){const o=N.lFrame;o.bindingIndex=o.bindingRootIndex=t,Ko(n)}function Ko(t){N.lFrame.currentDirectiveIndex=t}function _o(t){const n=N.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function yo(){return N.lFrame.currentQueryIndex}function Ao(t){N.lFrame.currentQueryIndex=t}function Ps(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function _s(t,n,o){if(o&Kn.SkipSelf){let p=n,b=t;for(;!(p=p.parent,null!==p||o&Kn.Host||(p=Ps(b),null===p||(b=b[15],10&p.type))););if(null===p)return!1;n=p,t=b}const u=N.lFrame=Jo();return u.currentTNode=n,u.lView=t,!0}function Ca(t){const n=Jo(),o=t[1];N.lFrame=n,n.currentTNode=o.firstChild,n.lView=t,n.tView=o,n.contextLView=t,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function Jo(){const t=N.lFrame,n=null===t?null:t.child;return null===n?ys(t):n}function ys(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function fa(){const t=N.lFrame;return N.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Os=fa;function jn(){const t=fa();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Si(){return N.lFrame.selectedIndex}function Sr(t){N.lFrame.selectedIndex=t}function rr(){const t=N.lFrame;return Yt(t.tView,t.selectedIndex)}function Wr(){N.lFrame.currentNamespace=Ts}function Tr(){!function Io(){N.lFrame.currentNamespace=null}()}function vo(t,n){for(let o=n.directiveStart,u=n.directiveEnd;o<u;o++){const b=t.data[o].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:k,ngAfterViewInit:G,ngAfterViewChecked:ce,ngOnDestroy:_e}=b;T&&(t.contentHooks||(t.contentHooks=[])).push(-o,T),k&&((t.contentHooks||(t.contentHooks=[])).push(o,k),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(o,k)),G&&(t.viewHooks||(t.viewHooks=[])).push(-o,G),ce&&((t.viewHooks||(t.viewHooks=[])).push(o,ce),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(o,ce)),null!=_e&&(t.destroyHooks||(t.destroyHooks=[])).push(o,_e)}}function An(t,n,o){Ea(t,n,3,o)}function bo(t,n,o,u){(3&t[2])===o&&Ea(t,n,o,u)}function ks(t,n){let o=t[2];(3&o)===n&&(o&=2047,o+=1,t[2]=o)}function Ea(t,n,o,u){const b=null!=u?u:-1,T=n.length-1;let k=0;for(let G=void 0!==u?65535&t[18]:0;G<T;G++)if("number"==typeof n[G+1]){if(k=n[G],null!=u&&k>=u)break}else n[G]<0&&(t[18]+=65536),(k<b||-1==b)&&(Ya(t,o,n,G),t[18]=(4294901760&t[18])+G+2),G++}function Ya(t,n,o,u){const p=o[u]<0,b=o[u+1],k=t[p?-o[u]:o[u]];if(p){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{b.call(k)}finally{}}}else try{b.call(k)}finally{}}class Da{constructor(n,o,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function Ka(t,n,o){const u=yr(t);let p=0;for(;p<o.length;){const b=o[p];if("number"==typeof b){if(0!==b)break;p++;const T=o[p++],k=o[p++],G=o[p++];u?t.setAttribute(n,k,G,T):n.setAttributeNS(T,k,G)}else{const T=b,k=o[++p];hl(T)?u&&t.setProperty(n,T,k):u?t.setAttribute(n,T,k):n.setAttribute(T,k),p++}}return p}function Il(t){return 3===t||4===t||6===t}function hl(t){return 64===t.charCodeAt(0)}function Co(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let o=-1;for(let u=0;u<n.length;u++){const p=n[u];"number"==typeof p?o=p:0===o||ga(t,o,p,null,-1===o||2===o?n[++u]:null)}}return t}function ga(t,n,o,u,p){let b=0,T=t.length;if(-1===n)T=-1;else for(;b<t.length;){const k=t[b++];if("number"==typeof k){if(k===n){T=-1;break}if(k>n){T=b-1;break}}}for(;b<t.length;){const k=t[b];if("number"==typeof k)break;if(k===o){if(null===u)return void(null!==p&&(t[b+1]=p));if(u===t[b+1])return void(t[b+2]=p)}b++,null!==u&&b++,null!==p&&b++}-1!==T&&(t.splice(T,0,n),b=T+1),t.splice(b++,0,o),null!==u&&t.splice(b++,0,u),null!==p&&t.splice(b++,0,p)}function Yl(t){return-1!==t}function Sa(t){return 32767&t}function Aa(t,n){let o=function Ta(t){return t>>16}(t),u=n;for(;o>0;)u=u[15],o--;return u}let Ja=!0;function Ho(t){const n=Ja;return Ja=t,n}let P=0;function Q(t,n){const o=be(t,n);if(-1!==o)return o;const u=n[1];u.firstCreatePass&&(t.injectorIndex=n.length,se(u.data,t),se(n,null),se(u.blueprint,null));const p=Ve(t,n),b=t.injectorIndex;if(Yl(p)){const T=Sa(p),k=Aa(p,n),G=k[1].data;for(let ce=0;ce<8;ce++)n[b+ce]=k[T+ce]|G[T+ce]}return n[b+8]=p,b}function se(t,n){t.push(0,0,0,0,0,0,0,0,n)}function be(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ve(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,u=null,p=n;for(;null!==p;){const b=p[1],T=b.type;if(u=2===T?b.declTNode:1===T?p[6]:null,null===u)return-1;if(o++,p=p[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Fe(t,n,o){!function A(t,n,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Ce)&&(u=o[Ce]),null==u&&(u=o[Ce]=P++);const p=255&u;n.data[t+(p>>5)]|=1<<p}(t,n,o)}function ei(t,n,o){if(o&Kn.Optional)return t;ke(n,"NodeInjector")}function Yi(t,n,o,u){if(o&Kn.Optional&&void 0===u&&(u=null),0==(o&(Kn.Self|Kn.Host))){const p=t[9],b=ht(void 0);try{return p?p.get(n,u,o&Kn.Optional):$(n,u,o&Kn.Optional)}finally{ht(b)}}return ei(u,n,o)}function Ei(t,n,o,u=Kn.Default,p){if(null!==t){const b=function mr(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Ce)?t[Ce]:void 0;return"number"==typeof n?n>=0?255&n:pr:n}(o);if("function"==typeof b){if(!_s(n,t,u))return u&Kn.Host?ei(p,o,u):Yi(n,o,u,p);try{const T=b(u);if(null!=T||u&Kn.Optional)return T;ke(o)}finally{Os()}}else if("number"==typeof b){let T=null,k=be(t,n),G=-1,ce=u&Kn.Host?n[16][6]:null;for((-1===k||u&Kn.SkipSelf)&&(G=-1===k?Ve(t,n):n[k+8],-1!==G&&Us(u,!1)?(T=n[1],k=Sa(G),n=Aa(G,n)):k=-1);-1!==k;){const _e=n[1];if(qr(b,k,_e.data)){const Ne=Eo(k,n,o,T,u,ce);if(Ne!==Bi)return Ne}G=n[k+8],-1!==G&&Us(u,n[1].data[k+8]===ce)&&qr(b,k,n)?(T=_e,k=Sa(G),n=Aa(G,n)):k=-1}}}return Yi(n,o,u,p)}const Bi={};function pr(){return new ro(S(),yn())}function Eo(t,n,o,u,p,b){const T=n[1],k=T.data[t+8],_e=Po(k,T,o,null==u?qs(k)&&Ja:u!=T&&0!=(3&k.type),p&Kn.Host&&b===k);return null!==_e?po(n,T,_e,k):Bi}function Po(t,n,o,u,p){const b=t.providerIndexes,T=n.data,k=1048575&b,G=t.directiveStart,_e=b>>20,dt=p?k+_e:t.directiveEnd;for(let kt=u?k:k+_e;kt<dt;kt++){const dn=T[kt];if(kt<G&&o===dn||kt>=G&&dn.type===o)return kt}if(p){const kt=T[G];if(kt&&Ar(kt)&&kt.type===o)return G}return null}function po(t,n,o,u){let p=t[o];const b=n.data;if(function Zl(t){return t instanceof Da}(p)){const T=p;T.resolving&&function jt(t,n){const o=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new et(-200,`Circular dependency in DI detected for ${t}${o}`)}(Ut(b[o]));const k=Ho(T.canSeeViewProviders);T.resolving=!0;const G=T.injectImpl?ht(T.injectImpl):null;_s(t,u,Kn.Default);try{p=t[o]=T.factory(void 0,b,t,u),n.firstCreatePass&&o>=u.directiveStart&&function Dr(t,n,o){const{ngOnChanges:u,ngOnInit:p,ngDoCheck:b}=n.type.prototype;if(u){const T=Or(n);(o.preOrderHooks||(o.preOrderHooks=[])).push(t,T),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,T)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-t,p),b&&((o.preOrderHooks||(o.preOrderHooks=[])).push(t,b),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,b))}(o,b[o],n)}finally{null!==G&&ht(G),Ho(k),T.resolving=!1,Os()}}return p}function qr(t,n,o){return!!(o[n+(t>>5)]&1<<t)}function Us(t,n){return!(t&Kn.Self||t&Kn.Host&&n)}class ro{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,u){return Ei(this._tNode,this._lView,n,u,o)}}function Xs(t){return R(()=>{const n=t.prototype.constructor,o=n[pt]||_(n),u=Object.prototype;let p=Object.getPrototypeOf(t.prototype).constructor;for(;p&&p!==u;){const b=p[pt]||_(p);if(b&&b!==o)return b;p=Object.getPrototypeOf(p)}return b=>new b})}function _(t){return gt(t)?()=>{const n=_(Be(t));return n&&n()}:So(t)}function i(t){return function Et(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const o=t.attrs;if(o){const u=o.length;let p=0;for(;p<u;){const b=o[p];if(Il(b))break;if(0===b)p+=2;else if("number"==typeof b)for(p++;p<u&&"string"==typeof o[p];)p++;else{if(b===n)return o[p+1];p+=2}}}return null}(S(),t)}const m="__parameters__";function j(t,n,o){return R(()=>{const u=function O(t){return function(...o){if(t){const u=t(...o);for(const p in u)this[p]=u[p]}}}(n);function p(...b){if(this instanceof p)return u.apply(this,b),this;const T=new p(...b);return k.annotation=T,k;function k(G,ce,_e){const Ne=G.hasOwnProperty(m)?G[m]:Object.defineProperty(G,m,{value:[]})[m];for(;Ne.length<=_e;)Ne.push(null);return(Ne[_e]=Ne[_e]||[]).push(T),G}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=t,p.annotationCls=p,p})}class le{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=_i({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const xe=new le("AnalyzeForEntryComponents");function Jt(t,n){void 0===n&&(n=t);for(let o=0;o<t.length;o++){let u=t[o];Array.isArray(u)?(n===t&&(n=t.slice(0,o)),Jt(u,n)):n!==t&&n.push(u)}return n}function Wn(t,n){t.forEach(o=>Array.isArray(o)?Wn(o,n):n(o))}function Gn(t,n,o){n>=t.length?t.push(o):t.splice(n,0,o)}function ki(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function nr(t,n){const o=[];for(let u=0;u<t;u++)o.push(n);return o}function Ir(t,n,o){let u=Xo(t,n);return u>=0?t[1|u]=o:(u=~u,function oo(t,n,o,u){let p=t.length;if(p==n)t.push(o,u);else if(1===p)t.push(u,t[0]),t[0]=o;else{for(p--,t.push(t[p-1],t[p]);p>n;)t[p]=t[p-2],p--;t[n]=o,t[n+1]=u}}(t,u,n,o)),u}function vs(t,n){const o=Xo(t,n);if(o>=0)return t[1|o]}function Xo(t,n){return function Na(t,n,o){let u=0,p=t.length>>o;for(;p!==u;){const b=u+(p-u>>1),T=t[b<<o];if(n===T)return b<<o;T>n?p=b:u=b+1}return~(p<<o)}(t,n,1)}const Hs={},ea="__NG_DI_FLAG__",Ba="ngTempTokenPath",dc=/\n/gm,Xa="__source",hc=qe({provide:String,useValue:qe});let Rs;function za(t){const n=Rs;return Rs=t,n}function kh(t,n=Kn.Default){if(void 0===Rs)throw new et(203,"");return null===Rs?$(t,void 0,n):Rs.get(t,n&Kn.Optional?null:void 0,n)}function ko(t,n=Kn.Default){return(function Zn(){return ri}()||kh)(Be(t),n)}const Fc=ko;function Kl(t){const n=[];for(let o=0;o<t.length;o++){const u=Be(t[o]);if(Array.isArray(u)){if(0===u.length)throw new et(900,"");let p,b=Kn.Default;for(let T=0;T<u.length;T++){const k=u[T],G=Qa(k);"number"==typeof G?-1===G?p=k.token:b|=G:p=k}n.push(ko(p,b))}else n.push(ko(u))}return n}function Pa(t,n){return t[ea]=n,t.prototype[ea]=n,t}function Qa(t){return t[ea]}const Jl=Pa(j("Inject",t=>({token:t})),-1),ta=Pa(j("Optional"),8),Xl=Pa(j("SkipSelf"),4);let bu,gl;function ml(t){var n;return(null===(n=function Ql(){if(void 0===bu&&(bu=null,Vn.trustedTypes))try{bu=Vn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return bu}())||void 0===n?void 0:n.createHTML(t))||t}function wu(t){var n;return(null===(n=function Bc(){if(void 0===gl&&(gl=null,Vn.trustedTypes))try{gl=Vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return gl}())||void 0===n?void 0:n.createHTML(t))||t}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bh extends tl{getTypeName(){return"HTML"}}class Cu extends tl{getTypeName(){return"Style"}}class tf extends tl{getTypeName(){return"Script"}}class xd extends tl{getTypeName(){return"URL"}}class zh extends tl{getTypeName(){return"ResourceURL"}}function ya(t){return t instanceof tl?t.changingThisBreaksApplicationSecurity:t}function nl(t,n){const o=Fs(t);if(null!=o&&o!==n){if("ResourceURL"===o&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===n}function Fs(t){return t instanceof tl&&t.getTypeName()||null}function Vh(t){return new Bh(t)}function nf(t){return new Cu(t)}function rf(t){return new tf(t)}function sf(t){return new xd(t)}function wd(t){return new zh(t)}class Uh{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const o=(new window.DOMParser).parseFromString(ml(n),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(n):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class kl{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(n){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=ml(n),o;const u=this.inertDocument.createElement("body");return u.innerHTML=ml(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(n){const o=n.attributes;for(let p=o.length-1;0<p;p--){const T=o.item(p).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&n.removeAttribute(T)}let u=n.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const af=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gc(t){return(t=String(t)).match(af)||t.match(jh)?t:"unsafe:"+t}function il(t){const n={};for(const o of t.split(","))n[o]=!0;return n}function Uc(...t){const n={};for(const o of t)for(const u in o)o.hasOwnProperty(u)&&(n[u]=!0);return n}const Eu=il("area,br,col,hr,img,wbr"),Hh=il("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Rl=il("rp,rt"),Du=Uc(Eu,Uc(Hh,il("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Uc(Rl,il("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Uc(Rl,Hh)),ec=il("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yc=il("srcset"),Ed=Uc(ec,yc,il("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),il("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jc=il("script,style,template");class Dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let o=n.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let p=this.checkClobberedElement(o,o.nextSibling);if(p){o=p;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(n){const o=n.nodeName.toLowerCase();if(!Du.hasOwnProperty(o))return this.sanitizedSomething=!0,!jc.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=n.attributes;for(let p=0;p<u.length;p++){const b=u.item(p),T=b.name,k=T.toLowerCase();if(!Ed.hasOwnProperty(k)){this.sanitizedSomething=!0;continue}let G=b.value;ec[k]&&(G=gc(G)),yc[k]&&(t=G,G=(t=String(t)).split(",").map(n=>gc(n.trim())).join(", ")),this.buf.push(" ",T,'="',$h(G),'"')}var t;return this.buf.push(">"),!0}endElement(n){const o=n.nodeName.toLowerCase();Du.hasOwnProperty(o)&&!Eu.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(n){this.buf.push($h(n))}checkClobberedElement(n,o){if(o&&(n.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return o}}const Md=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gh=/([^\#-~ |!])/g;function $h(t){return t.replace(/&/g,"&amp;").replace(Md,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Gh,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hc;function vc(t,n){let o=null;try{Hc=Hc||function zc(t){const n=new kl(t);return function Vc(){try{return!!(new window.DOMParser).parseFromString(ml(""),"text/html")}catch(t){return!1}}()?new Uh(n):n}(t);let u=n?String(n):"";o=Hc.getInertBodyElement(u);let p=5,b=u;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,u=b,b=o.innerHTML,o=Hc.getInertBodyElement(u)}while(u!==b);return ml((new Dd).sanitizeChildren(Sd(o)||o))}finally{if(o){const u=Sd(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Sd(t){return"content"in t&&function Td(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Fo=(()=>((Fo=Fo||{})[Fo.NONE=0]="NONE",Fo[Fo.HTML=1]="HTML",Fo[Fo.STYLE=2]="STYLE",Fo[Fo.SCRIPT=3]="SCRIPT",Fo[Fo.URL=4]="URL",Fo[Fo.RESOURCE_URL=5]="RESOURCE_URL",Fo))();function Su(t){const n=Zc();return n?wu(n.sanitize(Fo.HTML,t)||""):nl(t,"HTML")?wu(ya(t)):vc(As(),We(t))}function Gc(t){const n=Zc();return n?n.sanitize(Fo.URL,t)||"":nl(t,"URL")?ya(t):gc(We(t))}function Zc(){const t=yn();return t&&t[12]}const Od="__ngContext__";function Ls(t,n){t[Od]=n}function kd(t){const n=function Wc(t){return t[Od]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Yc(t){return t.ngOriginalError}function yf(t,...n){t.error(...n)}class tc{constructor(){this._console=console}handleError(n){const o=this._findOriginalError(n),u=function _f(t){return t&&t.ngErrorLogger||yf}(n);u(this._console,"ERROR",n),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&Yc(n);for(;o&&Yc(o);)o=Yc(o);return o||null}}const ep=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vn))();function nc(t){return t.ownerDocument.defaultView}function Ua(t){return t instanceof Function?t():t}var ja=(()=>((ja=ja||{})[ja.Important=1]="Important",ja[ja.DashCase=2]="DashCase",ja))();function Nl(t,n){return undefined(t,n)}function Kc(t){const n=t[3];return Yr(n)?n[3]:n}function Vd(t){return jd(t[13])}function Ud(t){return jd(t[4])}function jd(t){for(;null!==t&&!Yr(t);)t=t[4];return t}function bc(t,n,o,u,p){if(null!=u){let b,T=!1;Yr(u)?b=u:Pr(u)&&(T=!0,u=u[0]);const k=kr(u);0===t&&null!==o?null==p?Zd(n,o,k):zl(n,o,k,p||null,!0):1===t&&null!==o?zl(n,o,k,p||null,!0):2===t?function cp(t,n,o){const u=ku(t,n);u&&function Wd(t,n,o,u){yr(t)?t.removeChild(n,o,u):n.removeChild(o)}(t,u,n,o)}(n,k,T):3===t&&n.destroyNode(k),null!=b&&function Jd(t,n,o,u,p){const b=o[7];b!==kr(o)&&bc(n,t,u,b,p);for(let k=10;k<o.length;k++){const G=o[k];Ec(G[1],G,t,n,u,b)}}(n,t,b,o,p)}}function Hd(t,n,o){return yr(t)?t.createElement(n,o):null===o?t.createElement(n):t.createElementNS(o,n)}function wc(t,n){const o=t[9],u=o.indexOf(n),p=n[3];1024&n[2]&&(n[2]&=-1025,q(p,-1)),o.splice(u,1)}function Bl(t,n){if(t.length<=10)return;const o=10+n,u=t[o];if(u){const p=u[17];null!==p&&p!==t&&wc(p,u),n>0&&(t[o-1][4]=u[4]);const b=ki(t,10+n);!function Df(t,n){Ec(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(u[1],u);const T=b[19];null!==T&&T.detachView(b[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Jc(t,n){if(!(256&n[2])){const o=n[11];yr(o)&&o.destroyNode&&Ec(t,n,o,3,null,null),function Gd(t){let n=t[13];if(!n)return Cc(t[1],t);for(;n;){let o=null;if(Pr(n))o=n[13];else{const u=n[10];u&&(o=u)}if(!o){for(;n&&!n[4]&&n!==t;)Pr(n)&&Cc(n[1],n),n=n[3];null===n&&(n=t),Pr(n)&&Cc(n[1],n),o=n&&n[4]}n=o}}(n)}}function Cc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function ap(t,n){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let u=0;u<o.length;u+=2){const p=n[o[u]];if(!(p instanceof Da)){const b=o[u+1];if(Array.isArray(b))for(let T=0;T<b.length;T+=2){const k=p[b[T]],G=b[T+1];try{G.call(k)}finally{}}else try{b.call(p)}finally{}}}}(t,n),function Sf(t,n){const o=t.cleanup,u=n[7];let p=-1;if(null!==o)for(let b=0;b<o.length-1;b+=2)if("string"==typeof o[b]){const T=o[b+1],k="function"==typeof T?T(n):kr(n[T]),G=u[p=o[b+2]],ce=o[b+3];"boolean"==typeof ce?k.removeEventListener(o[b],G,ce):ce>=0?u[p=ce]():u[p=-ce].unsubscribe(),b+=2}else{const T=u[p=o[b+1]];o[b].call(T)}if(null!==u){for(let b=p+1;b<u.length;b++)u[b]();n[7]=null}}(t,n),1===n[1].type&&yr(n[11])&&n[11].destroy();const o=n[17];if(null!==o&&Yr(n[3])){o!==n[3]&&wc(o,n);const u=n[19];null!==u&&u.detachView(t)}}}function $d(t,n,o){return function lp(t,n,o){let u=n;for(;null!==u&&40&u.type;)u=(n=u).parent;if(null===u)return o[0];if(2&u.flags){const p=t.data[u.directiveStart].encapsulation;if(p===tt.None||p===tt.Emulated)return null}return De(u,o)}(t,n.parent,o)}function zl(t,n,o,u,p){yr(t)?t.insertBefore(n,o,u,p):n.insertBefore(o,u,p)}function Zd(t,n,o){yr(t)?t.appendChild(n,o):n.appendChild(o)}function Ou(t,n,o,u,p){null!==u?zl(t,n,o,u,p):Zd(t,n,o)}function ku(t,n){return yr(t)?t.parentNode(n):n.parentNode}function Ru(t,n,o){return qd(t,n,o)}let qd=function rl(t,n,o){return 40&t.type?De(t,o):null};function Xc(t,n,o,u){const p=$d(t,u,n),b=n[11],k=Ru(u.parent||n[6],u,n);if(null!=p)if(Array.isArray(o))for(let G=0;G<o.length;G++)Ou(b,p,o[G],k,!1);else Ou(b,p,o,k,!1)}function Qc(t,n){if(null!==n){const o=n.type;if(3&o)return De(n,t);if(4&o)return Fu(-1,t[n.index]);if(8&o){const u=n.child;if(null!==u)return Qc(t,u);{const p=t[n.index];return Yr(p)?Fu(-1,p):kr(p)}}if(32&o)return Nl(n,t)()||kr(t[n.index]);{const u=Kd(t,n);return null!==u?Array.isArray(u)?u[0]:Qc(Kc(t[16]),u):Qc(t,n.next)}}return null}function Kd(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Fu(t,n){const o=10+t+1;if(o<n.length){const u=n[o],p=u[1].firstChild;if(null!==p)return Qc(u,p)}return n[7]}function Lu(t,n,o,u,p,b,T){for(;null!=o;){const k=u[o.index],G=o.type;if(T&&0===n&&(k&&Ls(kr(k),u),o.flags|=4),64!=(64&o.flags))if(8&G)Lu(t,n,o.child,u,p,b,!1),bc(n,t,p,k,b);else if(32&G){const ce=Nl(o,u);let _e;for(;_e=ce();)bc(n,t,p,_e,b);bc(n,t,p,k,b)}else 16&G?eu(t,n,u,o,p,b):bc(n,t,p,k,b);o=T?o.projectionNext:o.next}}function Ec(t,n,o,u,p,b){Lu(o,u,t.firstChild,n,p,b,!1)}function eu(t,n,o,u,p,b){const T=o[16],G=T[6].projection[u.projection];if(Array.isArray(G))for(let ce=0;ce<G.length;ce++)bc(n,t,p,G[ce],b);else Lu(t,n,G,T[3],p,b,!0)}function tu(t,n,o){yr(t)?t.setAttribute(n,"style",o):n.style.cssText=o}function Dc(t,n,o){yr(t)?""===o?t.removeAttribute(n,"class"):t.setAttribute(n,"class",o):n.className=o}function dp(t,n,o){let u=t.length;for(;;){const p=t.indexOf(n,o);if(-1===p)return p;if(0===p||t.charCodeAt(p-1)<=32){const b=n.length;if(p+b===u||t.charCodeAt(p+b)<=32)return p}o=p+1}}const Xd="ng-template";function Af(t,n,o){let u=0;for(;u<t.length;){let p=t[u++];if(o&&"class"===p){if(p=t[u],-1!==dp(p.toLowerCase(),n,0))return!0}else if(1===p){for(;u<t.length&&"string"==typeof(p=t[u++]);)if(p.toLowerCase()===n)return!0;return!1}}return!1}function oc(t){return 4===t.type&&t.value!==Xd}function Qd(t,n,o){return n===(4!==t.type||o?t.value:Xd)}function hp(t,n,o){let u=4;const p=t.attrs||[],b=function eh(t){for(let n=0;n<t.length;n++)if(Il(t[n]))return n;return t.length}(p);let T=!1;for(let k=0;k<n.length;k++){const G=n[k];if("number"!=typeof G){if(!T)if(4&u){if(u=2|1&u,""!==G&&!Qd(t,G,o)||""===G&&1===n.length){if(ia(u))return!1;T=!0}}else{const ce=8&u?G:n[++k];if(8&u&&null!==t.attrs){if(!Af(t.attrs,ce,o)){if(ia(u))return!1;T=!0}continue}const Ne=If(8&u?"class":G,p,oc(t),o);if(-1===Ne){if(ia(u))return!1;T=!0;continue}if(""!==ce){let dt;dt=Ne>b?"":p[Ne+1].toLowerCase();const kt=8&u?dt:null;if(kt&&-1!==dp(kt,ce,0)||2&u&&ce!==dt){if(ia(u))return!1;T=!0}}}}else{if(!T&&!ia(u)&&!ia(G))return!1;if(T&&ia(G))continue;T=!1,u=G|1&u}}return ia(u)||T}function ia(t){return 0==(1&t)}function If(t,n,o,u){if(null===n)return-1;let p=0;if(u||!o){let b=!1;for(;p<n.length;){const T=n[p];if(T===t)return p;if(3===T||6===T)b=!0;else{if(1===T||2===T){let k=n[++p];for(;"string"==typeof k;)k=n[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=b?1:2}return-1}return function Pf(t,n){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const u=t[o];if("number"==typeof u)return-1;if(u===n)return o;o++}return-1}(n,t)}function yl(t,n,o=!1){for(let u=0;u<n.length;u++)if(hp(t,n[u],o))return!0;return!1}function Of(t,n){e:for(let o=0;o<n.length;o++){const u=n[o];if(t.length===u.length){for(let p=0;p<t.length;p++)if(t[p]!==u[p])continue e;return!0}}return!1}function fp(t,n){return t?":not("+n.trim()+")":n}function Bu(t){let n=t[0],o=1,u=2,p="",b=!1;for(;o<t.length;){let T=t[o];if("string"==typeof T)if(2&u){const k=t[++o];p+="["+T+(k.length>0?'="'+k+'"':"")+"]"}else 8&u?p+="."+T:4&u&&(p+=" "+T);else""!==p&&!ia(T)&&(n+=fp(b,p),p=""),u=T,b=b||!ia(u);o++}return""!==p&&(n+=fp(b,p)),n}const Ki={};function zu(t){sc(ue(),yn(),Si()+t,Mn())}function sc(t,n,o,u){if(!u)if(3==(3&n[2])){const b=t.preOrderCheckHooks;null!==b&&An(n,b,o)}else{const b=t.preOrderHooks;null!==b&&bo(n,b,0,o)}Sr(o)}function Mc(t,n){return t<<17|n<<2}function Oa(t){return t>>17&32767}function ih(t){return 2|t}function vl(t){return(131068&t)>>2}function Ur(t,n){return-131069&t|n<<2}function rh(t){return 1|t}function Mt(t,n){const o=t.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const p=o[u],b=o[u+1];if(-1!==b){const T=t.data[b];Ao(p),T.contentQueries(2,n[b],b)}}}function Qt(t,n,o,u,p,b,T,k,G,ce){const _e=n.blueprint.slice();return _e[0]=p,_e[2]=140|u,X(_e),_e[3]=_e[15]=t,_e[8]=o,_e[10]=T||t&&t[10],_e[11]=k||t&&t[11],_e[12]=G||t&&t[12]||null,_e[9]=ce||t&&t[9]||null,_e[6]=b,_e[16]=2==n.type?t[16]:_e,_e}function hn(t,n,o,u,p){let b=t.data[n];if(null===b)b=function ln(t,n,o,u,p){const b=H(),T=Ue(),G=t.data[n]=function Mo(t,n,o,u,p,b){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?b:b&&b.parent,o,n,u,p);return null===t.firstChild&&(t.firstChild=G),null!==b&&(T?null==b.child&&null!==G.parent&&(b.child=G):null===b.next&&(b.next=G)),G}(t,n,o,u,p),function fr(){return N.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=o,b.value=u,b.attrs=p;const T=function de(){const t=N.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();b.injectorIndex=null===T?-1:T.injectorIndex}return Te(b,!0),b}function Yn(t,n,o,u){if(0===o)return-1;const p=n.length;for(let b=0;b<o;b++)n.push(u),t.blueprint.push(u),t.data.push(null);return p}function hi(t,n,o){Ca(n);try{const u=t.viewQuery;null!==u&&Yu(1,u,o);const p=t.template;null!==p&&Pn(t,n,p,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Mt(t,n),t.staticViewQueries&&Yu(2,t.viewQuery,o);const b=t.components;null!==b&&function Ht(t,n){for(let o=0;o<n.length;o++)Cp(t,n[o])}(n,b)}catch(u){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),u}finally{n[2]&=-5,jn()}}function Nn(t,n,o,u){const p=n[2];if(256==(256&p))return;Ca(n);const b=Mn();try{X(n),function mi(t){return N.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&Pn(t,n,o,2,u);const T=3==(3&p);if(!b)if(T){const ce=t.preOrderCheckHooks;null!==ce&&An(n,ce,null)}else{const ce=t.preOrderHooks;null!==ce&&bo(n,ce,0,null),ks(n,0)}if(function Hu(t){for(let n=Vd(t);null!==n;n=Ud(n)){if(!n[2])continue;const o=n[9];for(let u=0;u<o.length;u++){const p=o[u],b=p[3];0==(1024&p[2])&&q(b,1),p[2]|=1024}}}(n),function wp(t){for(let n=Vd(t);null!==n;n=Ud(n))for(let o=10;o<n.length;o++){const u=n[o],p=u[1];lr(u)&&Nn(p,u,p.template,u[8])}}(n),null!==t.contentQueries&&Mt(t,n),!b)if(T){const ce=t.contentCheckHooks;null!==ce&&An(n,ce)}else{const ce=t.contentHooks;null!==ce&&bo(n,ce,1),ks(n,1)}!function Xe(t,n){const o=t.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const p=o[u];if(p<0)Sr(~p);else{const b=p,T=o[++u],k=o[++u];io(T,b),k(2,n[b])}}}finally{Sr(-1)}}(t,n);const k=t.components;null!==k&&function Gt(t,n){for(let o=0;o<n.length;o++)Gu(t,n[o])}(n,k);const G=t.viewQuery;if(null!==G&&Yu(2,G,u),!b)if(T){const ce=t.viewCheckHooks;null!==ce&&An(n,ce)}else{const ce=t.viewHooks;null!==ce&&bo(n,ce,2),ks(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),b||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,q(n[3],-1))}finally{jn()}}function qn(t,n,o,u){const p=n[10],b=!Mn(),T=wi(n);try{b&&!T&&p.begin&&p.begin(),T&&hi(t,n,u),Nn(t,n,o,u)}finally{b&&!T&&p.end&&p.end()}}function Pn(t,n,o,u,p){const b=Si(),T=2&u;try{Sr(-1),T&&n.length>20&&sc(t,n,20,Mn()),o(u,p)}finally{Sr(b)}}function Xn(t,n,o){if(Es(n)){const p=n.directiveEnd;for(let b=n.directiveStart;b<p;b++){const T=t.data[b];T.contentQueries&&T.contentQueries(1,o[b],b)}}}function $n(t,n,o){!$r()||(function ws(t,n,o,u){const p=o.directiveStart,b=o.directiveEnd;t.firstCreatePass||Q(o,n),Ls(u,n);const T=o.initialInputs;for(let k=p;k<b;k++){const G=t.data[k],ce=Ar(G);ce&&Ws(n,o,G);const _e=po(n,t,k,o);Ls(_e,n),null!==T&&xp(0,k-p,_e,G,0,T),ce&&(Hn(o.index,n)[8]=_e)}}(t,n,o,De(o,n)),128==(128&o.flags)&&function ds(t,n,o){const u=o.directiveStart,p=o.directiveEnd,T=o.index,k=function Zr(){return N.lFrame.currentDirectiveIndex}();try{Sr(T);for(let G=u;G<p;G++){const ce=t.data[G],_e=n[G];Ko(G),(null!==ce.hostBindings||0!==ce.hostVars||null!==ce.hostAttrs)&&hs(ce,_e)}}finally{Sr(-1),Ko(k)}}(t,n,o))}function wn(t,n,o=De){const u=n.localNames;if(null!==u){let p=n.index+1;for(let b=0;b<u.length;b+=2){const T=u[b+1],k=-1===T?o(n,t):t[T];t[p++]=k}}}function Mi(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=di(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function di(t,n,o,u,p,b,T,k,G,ce){const _e=20+u,Ne=_e+p,dt=function cr(t,n){const o=[];for(let u=0;u<n;u++)o.push(u<t?null:Ki);return o}(_e,Ne),kt="function"==typeof ce?ce():ce;return dt[1]={type:t,blueprint:dt,template:o,queries:null,viewQuery:k,declTNode:n,data:dt.slice().fill(null,_e),bindingStartIndex:_e,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:G,consts:kt,incompleteFirstPass:!1}}function Go(t,n,o,u){const p=Ic(n);null===o?p.push(u):(p.push(o),t.firstCreatePass&&Pc(t).push(u,p.length-1))}function Br(t,n,o){for(let u in t)if(t.hasOwnProperty(u)){const p=t[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(n,p):o[u]=[n,p]}return o}function zr(t,n,o,u,p,b,T,k){const G=De(n,o);let _e,ce=n.inputs;!k&&null!=ce&&(_e=ce[u])?(Zm(t,o,_e,u,p),qs(n)&&function ra(t,n){const o=Hn(n,t);16&o[2]||(o[2]|=64)}(o,n.index)):3&n.type&&(u=function ts(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(u),p=null!=T?T(p,n.value||"",u):p,yr(b)?b.setProperty(G,u,p):hl(u)||(G.setProperty?G.setProperty(u,p):G[u]=p))}function Hr(t,n,o,u){let p=!1;if($r()){const b=function sa(t,n,o){const u=t.directiveRegistry;let p=null;if(u)for(let b=0;b<u.length;b++){const T=u[b];yl(o,T.selectors,!1)&&(p||(p=[]),Fe(Q(o,n),t,T.type),Ar(T)?(ba(t,o),p.unshift(T)):p.push(T))}return p}(t,n,o),T=null===u?null:{"":-1};if(null!==b){p=!0,xa(o,t.data.length,b.length);for(let _e=0;_e<b.length;_e++){const Ne=b[_e];Ne.providersResolver&&Ne.providersResolver(Ne)}let k=!1,G=!1,ce=Yn(t,n,b.length,null);for(let _e=0;_e<b.length;_e++){const Ne=b[_e];o.mergedAttrs=Co(o.mergedAttrs,Ne.hostAttrs),aa(t,o,n,ce,Ne),bl(ce,Ne,T),null!==Ne.contentQueries&&(o.flags|=8),(null!==Ne.hostBindings||null!==Ne.hostAttrs||0!==Ne.hostVars)&&(o.flags|=128);const dt=Ne.type.prototype;!k&&(dt.ngOnChanges||dt.ngOnInit||dt.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(o.index),k=!0),!G&&(dt.ngOnChanges||dt.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(o.index),G=!0),ce++}!function $o(t,n){const u=n.directiveEnd,p=t.data,b=n.attrs,T=[];let k=null,G=null;for(let ce=n.directiveStart;ce<u;ce++){const _e=p[ce],Ne=_e.inputs,dt=null===b||oc(n)?null:ju(Ne,b);T.push(dt),k=Br(Ne,ce,k),G=Br(_e.outputs,ce,G)}null!==k&&(k.hasOwnProperty("class")&&(n.flags|=16),k.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=T,n.inputs=k,n.outputs=G}(t,o)}T&&function Ga(t,n,o){if(n){const u=t.localNames=[];for(let p=0;p<n.length;p+=2){const b=o[n[p+1]];if(null==b)throw new et(-301,`Export of name '${n[p+1]}' not found!`);u.push(n[p],b)}}}(o,u,T)}return o.mergedAttrs=Co(o.mergedAttrs,o.attrs),p}function No(t,n,o,u,p,b){const T=b.hostBindings;if(T){let k=t.hostBindingOpCodes;null===k&&(k=t.hostBindingOpCodes=[]);const G=~n.index;(function or(t){let n=t.length;for(;n>0;){const o=t[--n];if("number"==typeof o&&o<0)return o}return 0})(k)!=G&&k.push(G),k.push(u,p,T)}}function hs(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function ba(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function bl(t,n,o){if(o){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)o[n.exportAs[u]]=t;Ar(n)&&(o[""]=t)}}function xa(t,n,o){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+o,t.providerIndexes=n}function aa(t,n,o,u,p){t.data[u]=p;const b=p.factory||(p.factory=So(p.type)),T=new Da(b,Ar(p),null);t.blueprint[u]=T,o[u]=T,No(t,n,0,u,Yn(t,o,p.hostVars,Ki),p)}function Ws(t,n,o){const u=De(n,t),p=Mi(o),b=t[10],T=Zu(t,Qt(t,p,null,o.onPush?64:16,u,n,b,b.createRenderer(u,o),null,null));t[n.index]=T}function ps(t,n,o,u,p,b){const T=De(t,n);!function Vl(t,n,o,u,p,b,T){if(null==b)yr(t)?t.removeAttribute(n,p,o):n.removeAttribute(p);else{const k=null==T?We(b):T(b,u||"",p);yr(t)?t.setAttribute(n,p,k,o):o?n.setAttributeNS(o,p,k):n.setAttribute(p,k)}}(n[11],T,b,t.value,o,u,p)}function xp(t,n,o,u,p,b){const T=b[n];if(null!==T){const k=u.setInput;for(let G=0;G<T.length;){const ce=T[G++],_e=T[G++],Ne=T[G++];null!==k?u.setInput(o,Ne,ce,_e):o[_e]=Ne}}}function ju(t,n){let o=null,u=0;for(;u<n.length;){const p=n[u];if(0!==p)if(5!==p){if("number"==typeof p)break;t.hasOwnProperty(p)&&(null===o&&(o=[]),o.push(p,t[p],n[u+1])),u+=2}else u+=2;else u+=4}return o}function al(t,n,o,u){return new Array(t,!0,!1,n,null,0,u,o,null,null)}function Gu(t,n){const o=Hn(n,t);if(lr(o)){const u=o[1];80&o[2]?Nn(u,o,u.template,o[8]):o[5]>0&&$u(o)}}function $u(t){for(let u=Vd(t);null!==u;u=Ud(u))for(let p=10;p<u.length;p++){const b=u[p];if(1024&b[2]){const T=b[1];Nn(T,b,T.template,b[8])}else b[5]>0&&$u(b)}const o=t[1].components;if(null!==o)for(let u=0;u<o.length;u++){const p=Hn(o[u],t);lr(p)&&p[5]>0&&$u(p)}}function Cp(t,n){const o=Hn(n,t),u=o[1];(function Ff(t,n){for(let o=n.length;o<t.blueprint.length;o++)n.push(t.blueprint[o])})(u,o),hi(u,o,o[8])}function Zu(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function ch(t){for(;t;){t[2]|=64;const n=Kc(t);if(ns(t)&&!n)return t;t=n}return null}function Wu(t,n,o){const u=n[10];u.begin&&u.begin();try{Nn(t,n,t.template,o)}catch(p){throw Ul(n,p),p}finally{u.end&&u.end()}}function Ep(t){!function uh(t){for(let n=0;n<t.components.length;n++){const o=t.components[n],u=kd(o),p=u[1];qn(p,u,p.template,o)}}(t[8])}function Yu(t,n,o){Ao(0),n(t,o)}const ll=(()=>Promise.resolve(null))();function Ic(t){return t[7]||(t[7]=[])}function Pc(t){return t.cleanup||(t.cleanup=[])}function ur(t,n,o){return(null===t||Ar(t))&&(o=function te(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(o[n.index])),o[11]}function Ul(t,n){const o=t[9],u=o?o.get(tc,null):null;u&&u.handleError(n)}function Zm(t,n,o,u,p){for(let b=0;b<o.length;){const T=o[b++],k=o[b++],G=n[T],ce=t.data[T];null!==ce.setInput?ce.setInput(G,p,u,k):G[k]=p}}function jl(t,n,o){const u=ne(n,t);!function rc(t,n,o){yr(t)?t.setValue(n,o):n.textContent=o}(t[11],u,o)}function dh(t,n,o){let u=o?t.styles:null,p=o?t.classes:null,b=0;if(null!==n)for(let T=0;T<n.length;T++){const k=n[T];"number"==typeof k?b=k:1==b?p=he(p,k):2==b&&(u=he(u,k+": "+n[++T]+";"))}o?t.styles=u:t.stylesWithoutHost=u,o?t.classes=p:t.classesWithoutHost=p}const Nf=new le("INJECTOR",-1);class qm{get(n,o=Hs){if(o===Hs){const u=new Error(`NullInjectorError: No provider for ${Le(n)}!`);throw u.name="NullInjectorError",u}return o}}const Bf=new le("Set Injector scope."),hh={},sy={};let zf;function Ym(){return void 0===zf&&(zf=new qm),zf}function Km(t,n=null,o=null,u){const p=Jm(t,n,o,u);return p._resolveInjectorDefTypes(),p}function Jm(t,n=null,o=null,u){return new ay(t,o,n||Ym(),u)}class ay{constructor(n,o,u,p=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const b=[];o&&Wn(o,k=>this.processProvider(k,n,o)),Wn([n],k=>this.processInjectorType(k,[],b)),this.records.set(Nf,Ku(void 0,this));const T=this.records.get(Bf);this.scope=null!=T?T.value:null,this.source=p||("object"==typeof n?null:Le(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,o=Hs,u=Kn.Default){this.assertNotDestroyed();const p=za(this),b=ht(void 0);try{if(!(u&Kn.SkipSelf)){let k=this.records.get(n);if(void 0===k){const G=function my(t){return"function"==typeof t||"object"==typeof t&&t instanceof le}(n)&&ft(n);k=G&&this.injectableDefInScope(G)?Ku(Vf(n),hh):null,this.records.set(n,k)}if(null!=k)return this.hydrate(n,k)}return(u&Kn.Self?Ym():this.parent).get(n,o=u&Kn.Optional&&o===Hs?null:o)}catch(T){if("NullInjectorError"===T.name){if((T[Ba]=T[Ba]||[]).unshift(Le(n)),p)throw T;return function Va(t,n,o,u){const p=t[Ba];throw n[Xa]&&p.unshift(n[Xa]),t.message=function fl(t,n,o,u=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let p=Le(n);if(Array.isArray(n))p=n.map(Le).join(" -> ");else if("object"==typeof n){let b=[];for(let T in n)if(n.hasOwnProperty(T)){let k=n[T];b.push(T+":"+("string"==typeof k?JSON.stringify(k):Le(k)))}p=`{${b.join(", ")}}`}return`${o}${u?"("+u+")":""}[${p}]: ${t.replace(dc,"\n  ")}`}("\n"+t.message,p,o,u),t.ngTokenPath=p,t[Ba]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{ht(b),za(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((u,p)=>n.push(Le(p))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new et(205,"")}processInjectorType(n,o,u){if(!(n=Be(n)))return!1;let p=zn(n);const b=null==p&&n.ngModule||void 0,T=void 0===b?n:b,k=-1!==u.indexOf(T);if(void 0!==b&&(p=zn(b)),null==p)return!1;if(null!=p.imports&&!k){let _e;u.push(T);try{Wn(p.imports,Ne=>{this.processInjectorType(Ne,o,u)&&(void 0===_e&&(_e=[]),_e.push(Ne))})}finally{}if(void 0!==_e)for(let Ne=0;Ne<_e.length;Ne++){const{ngModule:dt,providers:kt}=_e[Ne];Wn(kt,dn=>this.processProvider(dn,dt,kt||qt))}}this.injectorDefTypes.add(T);const G=So(T)||(()=>new T);this.records.set(T,Ku(G,hh));const ce=p.providers;if(null!=ce&&!k){const _e=n;Wn(ce,Ne=>this.processProvider(Ne,_e,ce))}return void 0!==b&&void 0!==n.providers}processProvider(n,o,u){let p=Ju(n=Be(n))?n:Be(n&&n.provide);const b=function cy(t,n,o){return Mp(t)?Ku(void 0,t.useValue):Ku(Dp(t),hh)}(n);if(Ju(n)||!0!==n.multi)this.records.get(p);else{let T=this.records.get(p);T||(T=Ku(void 0,hh,!0),T.factory=()=>Kl(T.multi),this.records.set(p,T)),p=n,T.multi.push(n)}this.records.set(p,b)}hydrate(n,o){return o.value===hh&&(o.value=sy,o.value=o.factory()),"object"==typeof o.value&&o.value&&function fy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(n){if(!n.providedIn)return!1;const o=Be(n.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Vf(t){const n=ft(t),o=null!==n?n.factory:So(t);if(null!==o)return o;if(t instanceof le)throw new et(204,"");if(t instanceof Function)return function ly(t){const n=t.length;if(n>0)throw nr(n,"?"),new et(204,"");const o=function on(t){const n=t&&(t[Jn]||t[er]);if(n){const o=function gn(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),n}return null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new et(204,"")}function Dp(t,n,o){let u;if(Ju(t)){const p=Be(t);return So(p)||Vf(p)}if(Mp(t))u=()=>Be(t.useValue);else if(function dy(t){return!(!t||!t.useFactory)}(t))u=()=>t.useFactory(...Kl(t.deps||[]));else if(function uy(t){return!(!t||!t.useExisting)}(t))u=()=>ko(Be(t.useExisting));else{const p=Be(t&&(t.useClass||t.provide));if(!function py(t){return!!t.deps}(t))return So(p)||Vf(p);u=()=>new p(...Kl(t.deps))}return u}function Ku(t,n,o=!1){return{factory:t,value:n,multi:o?[]:void 0}}function Mp(t){return null!==t&&"object"==typeof t&&hc in t}function Ju(t){return"function"==typeof t}let cl=(()=>{class t{static create(o,u){var p;if(Array.isArray(o))return Km({name:""},u,o,"");{const b=null!==(p=o.name)&&void 0!==p?p:"";return Km({name:b},o.parent,o.providers,b)}}}return t.THROW_IF_NOT_FOUND=Hs,t.NULL=new qm,t.\u0275prov=_i({token:t,providedIn:"any",factory:()=>ko(Nf)}),t.__NG_ELEMENT_ID__=-1,t})();function Ey(t,n){vo(kd(t)[1],S())}function Gf(t){let n=function Hf(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const u=[t];for(;n;){let p;if(Ar(t))p=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new et(903,"");p=n.\u0275dir}if(p){if(o){u.push(p);const T=t;T.inputs=$f(t.inputs),T.declaredInputs=$f(t.declaredInputs),T.outputs=$f(t.outputs);const k=p.hostBindings;k&&My(t,k);const G=p.viewQuery,ce=p.contentQueries;if(G&&lg(t,G),ce&&cg(t,ce),Oe(t.inputs,p.inputs),Oe(t.declaredInputs,p.declaredInputs),Oe(t.outputs,p.outputs),Ar(p)&&p.data.animation){const _e=t.data;_e.animation=(_e.animation||[]).concat(p.data.animation)}}const b=p.features;if(b)for(let T=0;T<b.length;T++){const k=b[T];k&&k.ngInherit&&k(t),k===Gf&&(o=!1)}}n=Object.getPrototypeOf(n)}!function Dy(t){let n=0,o=null;for(let u=t.length-1;u>=0;u--){const p=t[u];p.hostVars=n+=p.hostVars,p.hostAttrs=Co(p.hostAttrs,o=Co(o,p.hostAttrs))}}(u)}function $f(t){return t===pn?{}:t===qt?[]:t}function lg(t,n){const o=t.viewQuery;t.viewQuery=o?(u,p)=>{n(u,p),o(u,p)}:n}function cg(t,n){const o=t.contentQueries;t.contentQueries=o?(u,p,b)=>{n(u,p,b),o(u,p,b)}:n}function My(t,n){const o=t.hostBindings;t.hostBindings=o?(u,p)=>{n(u,p),o(u,p)}:n}let Sp=null;function Xu(){if(!Sp){const t=Vn.Symbol;if(t&&t.iterator)Sp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<n.length;++o){const u=n[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Sp=u)}}}return Sp}function ph(t){return!!Zf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xu()in t)}function Zf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Hl(t,n,o){return t[n]=o}function ca(t,n,o){return!Object.is(t[n],o)&&(t[n]=o,!0)}function cu(t,n,o,u){const p=ca(t,n,o);return ca(t,n+1,u)||p}function Wf(t,n,o,u){const p=yn();return ca(p,Ci(),n)&&(ue(),ps(rr(),p,t,n,o,u)),Wf}function ed(t,n,o,u){return ca(t,Ci(),o)?n+We(o)+u:Ki}function Ly(t,n,o,u,p,b,T,k){const G=yn(),ce=ue(),_e=t+20,Ne=ce.firstCreatePass?function vb(t,n,o,u,p,b,T,k,G){const ce=n.consts,_e=hn(n,t,4,T||null,ji(ce,k));Hr(n,o,_e,ji(ce,G)),vo(n,_e);const Ne=_e.tViews=di(2,_e,u,p,b,n.directiveRegistry,n.pipeRegistry,null,n.schemas,ce);return null!==n.queries&&(n.queries.template(n,_e),Ne.queries=n.queries.embeddedTView(_e)),_e}(_e,ce,G,n,o,u,p,b,T):ce.data[_e];Te(Ne,!1);const dt=G[11].createComment("");Xc(ce,G,dt,Ne),Ls(dt,G),Zu(G,G[_e]=al(dt,G,dt,Ne)),no(Ne)&&$n(ce,G,Ne),null!=T&&wn(G,Ne,k)}function Ny(t){return cn(function sn(){return N.lFrame.contextLView}(),20+t)}function mh(t,n=Kn.Default){const o=yn();return null===o?ko(t,n):Ei(S(),o,Be(t),n)}function Eg(){throw new Error("invalid")}function Jf(t,n,o){const u=yn();return ca(u,Ci(),n)&&zr(ue(),rr(),u,t,n,u[11],o,!1),Jf}function Xf(t,n,o,u,p){const T=p?"class":"style";Zm(t,o,n.inputs[T],T,u)}function Qf(t,n,o,u){const p=yn(),b=ue(),T=20+t,k=p[11],G=p[T]=Hd(k,n,function ma(){return N.lFrame.currentNamespace}()),ce=b.firstCreatePass?function nv(t,n,o,u,p,b,T){const k=n.consts,ce=hn(n,t,2,p,ji(k,b));return Hr(n,o,ce,ji(k,T)),null!==ce.attrs&&dh(ce,ce.attrs,!1),null!==ce.mergedAttrs&&dh(ce,ce.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,ce),ce}(T,b,p,0,n,o,u):b.data[T];Te(ce,!0);const _e=ce.mergedAttrs;null!==_e&&Ka(k,G,_e);const Ne=ce.classes;null!==Ne&&Dc(k,G,Ne);const dt=ce.styles;null!==dt&&tu(k,G,dt),64!=(64&ce.flags)&&Xc(b,p,G,ce),0===function Lt(){return N.lFrame.elementDepthCount}()&&Ls(G,p),function Fn(){N.lFrame.elementDepthCount++}(),no(ce)&&($n(b,p,ce),Xn(b,ce,p)),null!==u&&wn(p,ce)}function em(){let t=S();Ue()?rt():(t=t.parent,Te(t,!1));const n=t;!function hr(){N.lFrame.elementDepthCount--}();const o=ue();o.firstCreatePass&&(vo(o,t),Es(t)&&o.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Wl(t){return 0!=(16&t.flags)}(n)&&Xf(o,n,yn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kc(t){return 0!=(32&t.flags)}(n)&&Xf(o,n,yn(),n.stylesWithoutHost,!1)}function Dg(t,n,o,u){Qf(t,n,o,u),em()}function tm(t,n,o){const u=yn(),p=ue(),b=t+20,T=p.firstCreatePass?function iv(t,n,o,u,p){const b=n.consts,T=ji(b,u),k=hn(n,t,8,"ng-container",T);return null!==T&&dh(k,T,!0),Hr(n,o,k,ji(b,p)),null!==n.queries&&n.queries.elementStart(n,k),k}(b,p,u,n,o):p.data[b];Te(T,!0);const k=u[b]=u[11].createComment("");Xc(p,u,k,T),Ls(k,u),no(T)&&($n(p,u,T),Xn(p,T,u)),null!=o&&wn(u,T)}function nm(){let t=S();const n=ue();Ue()?rt():(t=t.parent,Te(t,!1)),n.firstCreatePass&&(vo(n,t),Es(t)&&n.queries.elementEnd(t))}function Mg(t,n,o){tm(t,n,o),nm()}function Sg(){return yn()}function im(t){return!!t&&"function"==typeof t.then}function Tg(t){return!!t&&"function"==typeof t.subscribe}const Ag=Tg;function rm(t,n,o,u){const p=yn(),b=ue(),T=S();return Ig(b,p,p[11],T,t,n,!!o,u),rm}function om(t,n){const o=S(),u=yn(),p=ue();return Ig(p,u,ur(_o(p.data),o,u),o,t,n,!1),om}function Ig(t,n,o,u,p,b,T,k){const G=no(u),_e=t.firstCreatePass&&Pc(t),Ne=n[8],dt=Ic(n);let kt=!0;if(3&u.type||k){const ni=De(u,n),Di=k?k(ni):ni,bn=dt.length,Vi=k?Mr=>k(kr(Mr[u.index])):u.index;if(yr(o)){let Mr=null;if(!k&&G&&(Mr=function rv(t,n,o,u){const p=t.cleanup;if(null!=p)for(let b=0;b<p.length-1;b+=2){const T=p[b];if(T===o&&p[b+1]===u){const k=n[7],G=p[b+2];return k.length>G?k[G]:null}"string"==typeof T&&(b+=2)}return null}(t,n,p,u.index)),null!==Mr)(Mr.__ngLastListenerFn__||Mr).__ngNextListenerFn__=b,Mr.__ngLastListenerFn__=b,kt=!1;else{b=sm(u,n,Ne,b,!1);const eo=o.listen(Di,p,b);dt.push(b,eo),_e&&_e.push(p,Vi,bn,bn+1)}}else b=sm(u,n,Ne,b,!0),Di.addEventListener(p,b,T),dt.push(b),_e&&_e.push(p,Vi,bn,T)}else b=sm(u,n,Ne,b,!1);const dn=u.outputs;let Bn;if(kt&&null!==dn&&(Bn=dn[p])){const ni=Bn.length;if(ni)for(let Di=0;Di<ni;Di+=2){const Al=n[Bn[Di]][Bn[Di+1]].subscribe(b),Oh=dt.length;dt.push(b,Al),_e&&_e.push(p,u.index,Oh,-(Oh+1))}}}function Pg(t,n,o,u){try{return!1!==o(u)}catch(p){return Ul(t,p),!1}}function sm(t,n,o,u,p){return function b(T){if(T===Function)return u;const k=2&t.flags?Hn(t.index,n):n;0==(32&n[2])&&ch(k);let G=Pg(n,0,u,T),ce=b.__ngNextListenerFn__;for(;ce;)G=Pg(n,0,ce,T)&&G,ce=ce.__ngNextListenerFn__;return p&&!1===G&&(T.preventDefault(),T.returnValue=!1),G}}function Og(t=1){return function ai(t){return(N.lFrame.contextLView=function Oi(t,n){for(;t>0;)n=n[15],t--;return n}(t,N.lFrame.contextLView))[8]}(t)}function ov(t,n){let o=null;const u=function pp(t){const n=t.attrs;if(null!=n){const o=n.indexOf(5);if(0==(1&o))return n[o+1]}return null}(t);for(let p=0;p<n.length;p++){const b=n[p];if("*"!==b){if(null===u?yl(t,b,!0):Of(u,b))return p}else o=p}return o}function kg(t){const n=yn()[16][6];if(!n.projection){const u=n.projection=nr(t?t.length:1,null),p=u.slice();let b=n.child;for(;null!==b;){const T=t?ov(b,t):0;null!==T&&(p[T]?p[T].projectionNext=b:u[T]=b,p[T]=b),b=b.next}}}function Rg(t,n=0,o){const u=yn(),p=ue(),b=hn(p,20+t,16,null,o||null);null===b.projection&&(b.projection=n),rt(),64!=(64&b.flags)&&function up(t,n,o){eu(n[11],0,n,o,$d(t,o,n),Ru(o.parent||n[6],o,n))}(p,u,b)}function $g(t,n,o,u,p){const b=t[o+1],T=null===n;let k=u?Oa(b):vl(b),G=!1;for(;0!==k&&(!1===G||T);){const _e=t[k+1];av(t[k],n)&&(G=!0,t[k+1]=u?rh(_e):ih(_e)),k=u?Oa(_e):vl(_e)}G&&(t[o+1]=u?ih(b):rh(b))}function av(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Xo(t,n)>=0}const Cs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zg(t){return t.substring(Cs.key,Cs.keyEnd)}function lv(t){return t.substring(Cs.value,Cs.valueEnd)}function Wg(t,n){const o=Cs.textEnd;return o===n?-1:(n=Cs.keyEnd=function uv(t,n,o){for(;n<o&&t.charCodeAt(n)>32;)n++;return n}(t,Cs.key=n,o),cd(t,n,o))}function Ip(t,n){const o=Cs.textEnd;let u=Cs.key=cd(t,n,o);return o===u?-1:(u=Cs.keyEnd=function dv(t,n,o){let u;for(;n<o&&(45===(u=t.charCodeAt(n))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)n++;return n}(t,u,o),u=hv(t,u,o),u=Cs.value=cd(t,u,o),u=Cs.valueEnd=function Kg(t,n,o){let u=-1,p=-1,b=-1,T=n,k=T;for(;T<o;){const G=t.charCodeAt(T++);if(59===G)return k;34===G||39===G?k=T=uu(t,G,T,o):n===T-4&&85===b&&82===p&&76===u&&40===G?k=T=uu(t,41,T,o):G>32&&(k=T),b=p,p=u,u=-33&G}return k}(t,u,o),hv(t,u,o))}function Yg(t){Cs.key=0,Cs.keyEnd=0,Cs.value=0,Cs.valueEnd=0,Cs.textEnd=t.length}function cd(t,n,o){for(;n<o&&t.charCodeAt(n)<=32;)n++;return n}function hv(t,n,o,u){return(n=cd(t,n,o))<o&&n++,n}function uu(t,n,o,u){let p=-1,b=o;for(;b<u;){const T=t.charCodeAt(b++);if(T==n&&92!==p)return b;p=92==T&&92===p?0:T}throw new Error}function lm(t,n,o){return Cl(t,n,o,!1),lm}function cm(t,n){return Cl(t,n,null,!0),cm}function wl(t){El(t_,Jg,t,!1)}function Jg(t,n){for(let o=function qg(t){return Yg(t),Ip(t,cd(t,0,Cs.textEnd))}(n);o>=0;o=Ip(n,o))t_(t,Zg(n),lv(n))}function Xg(t){El(Ir,Gl,t,!0)}function Gl(t,n){for(let o=function cv(t){return Yg(t),Wg(t,cd(t,0,Cs.textEnd))}(n);o>=0;o=Wg(n,o))Ir(t,Zg(n),!0)}function Cl(t,n,o,u){const p=yn(),b=ue(),T=Hi(2);b.firstUpdatePass&&um(b,t,T,u),n!==Ki&&ca(p,T,n)&&n_(b,b.data[Si()],p,p[11],t,p[T+1]=function _v(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Le(ya(t)))),t}(n,o),u,T)}function El(t,n,o,u){const p=ue(),b=Hi(2);p.firstUpdatePass&&um(p,null,b,u);const T=yn();if(o!==Ki&&ca(T,b,o)){const k=p.data[Si()];if(r_(k,u)&&!pv(p,b)){let G=u?k.classesWithoutHost:k.stylesWithoutHost;null!==G&&(o=he(G,o||"")),Xf(p,k,T,o,u)}else!function gv(t,n,o,u,p,b,T,k){p===Ki&&(p=qt);let G=0,ce=0,_e=0<p.length?p[0]:null,Ne=0<b.length?b[0]:null;for(;null!==_e||null!==Ne;){const dt=G<p.length?p[G+1]:void 0,kt=ce<b.length?b[ce+1]:void 0;let Bn,dn=null;_e===Ne?(G+=2,ce+=2,dt!==kt&&(dn=Ne,Bn=kt)):null===Ne||null!==_e&&_e<Ne?(G+=2,dn=_e):(ce+=2,dn=Ne,Bn=kt),null!==dn&&n_(t,n,o,u,dn,Bn,T,k),_e=G<p.length?p[G]:null,Ne=ce<b.length?b[ce]:null}}(p,k,T,T[11],T[b+1],T[b+1]=function mv(t,n,o){if(null==o||""===o)return qt;const u=[],p=ya(o);if(Array.isArray(p))for(let b=0;b<p.length;b++)t(u,p[b],!0);else if("object"==typeof p)for(const b in p)p.hasOwnProperty(b)&&t(u,b,p[b]);else"string"==typeof p&&n(u,p);return u}(t,n,o),u,b)}}function pv(t,n){return n>=t.expandoStartIndex}function um(t,n,o,u){const p=t.data;if(null===p[o+1]){const b=p[Si()],T=pv(t,o);r_(b,u)&&null===n&&!T&&(n=!1),n=function Qg(t,n,o,u){const p=_o(t);let b=u?n.residualClasses:n.residualStyles;if(null===p)0===(u?n.classBindings:n.styleBindings)&&(o=gh(o=dm(null,t,n,o,u),n.attrs,u),b=null);else{const T=n.directiveStylingLast;if(-1===T||t[T]!==p)if(o=dm(p,t,n,o,u),null===b){let G=function fv(t,n,o){const u=o?n.classBindings:n.styleBindings;if(0!==vl(u))return t[Oa(u)]}(t,n,u);void 0!==G&&Array.isArray(G)&&(G=dm(null,t,n,G[1],u),G=gh(G,n.attrs,u),function Fb(t,n,o,u){t[Oa(o?n.classBindings:n.styleBindings)]=u}(t,n,u,G))}else b=function e_(t,n,o){let u;const p=n.directiveEnd;for(let b=1+n.directiveStylingLast;b<p;b++)u=gh(u,t[b].hostAttrs,o);return gh(u,n.attrs,o)}(t,n,u)}return void 0!==b&&(u?n.residualClasses=b:n.residualStyles=b),o}(p,b,n,u),function sv(t,n,o,u,p,b){let T=b?n.classBindings:n.styleBindings,k=Oa(T),G=vl(T);t[u]=o;let _e,ce=!1;if(Array.isArray(o)){const Ne=o;_e=Ne[1],(null===_e||Xo(Ne,_e)>0)&&(ce=!0)}else _e=o;if(p)if(0!==G){const dt=Oa(t[k+1]);t[u+1]=Mc(dt,k),0!==dt&&(t[dt+1]=Ur(t[dt+1],u)),t[k+1]=function nh(t,n){return 131071&t|n<<17}(t[k+1],u)}else t[u+1]=Mc(k,0),0!==k&&(t[k+1]=Ur(t[k+1],u)),k=u;else t[u+1]=Mc(G,0),0===k?k=u:t[G+1]=Ur(t[G+1],u),G=u;ce&&(t[u+1]=ih(t[u+1])),$g(t,_e,u,!0),$g(t,_e,u,!1),function Gg(t,n,o,u,p){const b=p?t.residualClasses:t.residualStyles;null!=b&&"string"==typeof n&&Xo(b,n)>=0&&(o[u+1]=rh(o[u+1]))}(n,_e,t,u,b),T=Mc(k,G),b?n.classBindings=T:n.styleBindings=T}(p,b,n,o,T,u)}}function dm(t,n,o,u,p){let b=null;const T=o.directiveEnd;let k=o.directiveStylingLast;for(-1===k?k=o.directiveStart:k++;k<T&&(b=n[k],u=gh(u,b.hostAttrs,p),b!==t);)k++;return null!==t&&(o.directiveStylingLast=k),u}function gh(t,n,o){const u=o?1:2;let p=-1;if(null!==n)for(let b=0;b<n.length;b++){const T=n[b];"number"==typeof T?p=T:p===u&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ir(t,T,!!o||n[++b]))}return void 0===t?null:t}function t_(t,n,o){Ir(t,n,ya(o))}function n_(t,n,o,u,p,b,T,k){if(!(3&n.type))return;const G=t.data,ce=G[k+1];Pp(function iu(t){return 1==(1&t)}(ce)?i_(G,n,o,p,vl(ce),T):void 0)||(Pp(b)||function nu(t){return 2==(2&t)}(ce)&&(b=i_(G,null,o,p,k,T)),function Nu(t,n,o,u,p){const b=yr(t);if(n)p?b?t.addClass(o,u):o.classList.add(u):b?t.removeClass(o,u):o.classList.remove(u);else{let T=-1===u.indexOf("-")?void 0:ja.DashCase;if(null==p)b?t.removeStyle(o,u,T):o.style.removeProperty(u);else{const k="string"==typeof p&&p.endsWith("!important");k&&(p=p.slice(0,-10),T|=ja.Important),b?t.setStyle(o,u,p,T):o.style.setProperty(u,p,k?"important":"")}}}(u,T,ne(Si(),o),p,b))}function i_(t,n,o,u,p,b){const T=null===n;let k;for(;p>0;){const G=t[p],ce=Array.isArray(G),_e=ce?G[1]:G,Ne=null===_e;let dt=o[p+1];dt===Ki&&(dt=Ne?qt:void 0);let kt=Ne?vs(dt,u):_e===u?dt:void 0;if(ce&&!Pp(kt)&&(kt=vs(G,u)),Pp(kt)&&(k=kt,T))return k;const dn=t[p+1];p=T?Oa(dn):vl(dn)}if(null!==n){let G=b?n.residualClasses:n.residualStyles;null!=G&&(k=vs(G,u))}return k}function Pp(t){return void 0!==t}function r_(t,n){return 0!=(t.flags&(n?16:32))}function o_(t,n=""){const o=yn(),u=ue(),p=t+20,b=u.firstCreatePass?hn(u,p,1,n,null):u.data[p],T=o[p]=function xc(t,n){return yr(t)?t.createText(n):t.createTextNode(n)}(o[11],n);Xc(u,o,T,b),Te(b,!1)}function hm(t){return Op("",t,""),hm}function Op(t,n,o){const u=yn(),p=ed(u,t,n,o);return p!==Ki&&jl(u,Si(),p),Op}function h_(t,n,o){El(Ir,Gl,ed(yn(),t,n,o),!0)}function fm(t,n,o){const u=yn();return ca(u,Ci(),n)&&zr(ue(),rr(),u,t,n,u[11],o,!0),fm}function mm(t,n,o){const u=yn();if(ca(u,Ci(),n)){const b=ue(),T=rr();zr(b,T,u,t,n,ur(_o(b.data),T,u),o,!0)}return mm}const du=void 0;var Fv=["en",[["a","p"],["AM","PM"],du],[["AM","PM"],du,du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",du,"{1} 'at' {0}",du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rv(t){const o=Math.floor(Math.abs(t)),u=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ud={};function gm(t){const n=function Lv(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=C_(n);if(o)return o;const u=n.split("-")[0];if(o=C_(u),o)return o;if("en"===u)return Fv;throw new Error(`Missing locale data for the locale "${t}".`)}function w_(t){return gm(t)[Gi.PluralCase]}function C_(t){return t in ud||(ud[t]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[t]),ud[t]}var Gi=(()=>((Gi=Gi||{})[Gi.LocaleId=0]="LocaleId",Gi[Gi.DayPeriodsFormat=1]="DayPeriodsFormat",Gi[Gi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gi[Gi.DaysFormat=3]="DaysFormat",Gi[Gi.DaysStandalone=4]="DaysStandalone",Gi[Gi.MonthsFormat=5]="MonthsFormat",Gi[Gi.MonthsStandalone=6]="MonthsStandalone",Gi[Gi.Eras=7]="Eras",Gi[Gi.FirstDayOfWeek=8]="FirstDayOfWeek",Gi[Gi.WeekendRange=9]="WeekendRange",Gi[Gi.DateFormat=10]="DateFormat",Gi[Gi.TimeFormat=11]="TimeFormat",Gi[Gi.DateTimeFormat=12]="DateTimeFormat",Gi[Gi.NumberSymbols=13]="NumberSymbols",Gi[Gi.NumberFormats=14]="NumberFormats",Gi[Gi.CurrencyCode=15]="CurrencyCode",Gi[Gi.CurrencySymbol=16]="CurrencySymbol",Gi[Gi.CurrencyName=17]="CurrencyName",Gi[Gi.Currencies=18]="Currencies",Gi[Gi.Directionality=19]="Directionality",Gi[Gi.PluralCase=20]="PluralCase",Gi[Gi.ExtraData=21]="ExtraData",Gi))();const Rp="en-US";let D_=Rp;function Sm(t,n,o,u,p){if(t=Be(t),Array.isArray(t))for(let b=0;b<t.length;b++)Sm(t[b],n,o,u,p);else{const b=ue(),T=yn();let k=Ju(t)?t:Be(t.provide),G=Dp(t);const ce=S(),_e=1048575&ce.providerIndexes,Ne=ce.directiveStart,dt=ce.providerIndexes>>20;if(Ju(t)||!t.multi){const kt=new Da(G,p,mh),dn=Am(k,n,p?_e:_e+dt,Ne);-1===dn?(Fe(Q(ce,T),b,k),wh(b,t,n.length),n.push(k),ce.directiveStart++,ce.directiveEnd++,p&&(ce.providerIndexes+=1048576),o.push(kt),T.push(kt)):(o[dn]=kt,T[dn]=kt)}else{const kt=Am(k,n,_e+dt,Ne),dn=Am(k,n,_e,_e+dt),Bn=kt>=0&&o[kt],ni=dn>=0&&o[dn];if(p&&!ni||!p&&!Bn){Fe(Q(ce,T),b,k);const Di=function E0(t,n,o,u,p){const b=new Da(t,o,mh);return b.multi=[],b.index=n,b.componentProviders=0,Tm(b,p,u&&!o),b}(p?C0:w0,o.length,p,u,G);!p&&ni&&(o[dn].providerFactory=Di),wh(b,t,n.length,0),n.push(k),ce.directiveStart++,ce.directiveEnd++,p&&(ce.providerIndexes+=1048576),o.push(Di),T.push(Di)}else wh(b,t,kt>-1?kt:dn,Tm(o[p?dn:kt],G,!p&&u));!p&&u&&ni&&o[dn].componentProviders++}}}function wh(t,n,o,u){const p=Ju(n),b=function hy(t){return!!t.useClass}(n);if(p||b){const G=(b?Be(n.useClass):n).prototype.ngOnDestroy;if(G){const ce=t.destroyHooks||(t.destroyHooks=[]);if(!p&&n.multi){const _e=ce.indexOf(o);-1===_e?ce.push(o,[u,G]):ce[_e+1].push(u,G)}else ce.push(o,G)}}}function Tm(t,n,o){return o&&t.componentProviders++,t.multi.push(n)-1}function Am(t,n,o,u){for(let p=o;p<u;p++)if(n[p]===t)return p;return-1}function w0(t,n,o,u){return Im(this.multi,[])}function C0(t,n,o,u){const p=this.multi;let b;if(this.providerFactory){const T=this.providerFactory.componentProviders,k=po(o,o[1],this.providerFactory.index,u);b=k.slice(0,T),Im(p,b);for(let G=T;G<k.length;G++)b.push(k[G])}else b=[],Im(p,b);return b}function Im(t,n){for(let o=0;o<t.length;o++)n.push((0,t[o])());return n}function $_(t,n=[]){return o=>{o.providersResolver=(u,p)=>function x0(t,n,o){const u=ue();if(u.firstCreatePass){const p=Ar(t);Sm(o,u.data,u.blueprint,p,!0),Sm(n,u.data,u.blueprint,p,!1)}}(u,p?p(t):t,n)}}class Z_{}class M0{resolveComponentFactory(n){throw function D0(t){const n=Error(`No component factory found for ${Le(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Za=(()=>{class t{}return t.NULL=new M0,t})();function S0(){return md(S(),yn())}function md(t,n){return new Ch(De(t,n))}let Ch=(()=>{class t{constructor(o){this.nativeElement=o}}return t.__NG_ELEMENT_ID__=S0,t})();function T0(t){return t instanceof Ch?t.nativeElement:t}class qi{}let km=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Hb(){const t=yn(),o=Hn(S().index,t);return function A0(t){return t[11]}(Pr(o)?o:t)}(),t})(),I0=(()=>{class t{}return t.\u0275prov=_i({token:t,providedIn:"root",factory:()=>null}),t})();class W_{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const P0=new W_("13.1.3"),Rm={};function Gp(t,n,o,u,p=!1){for(;null!==o;){const b=n[o.index];if(null!==b&&u.push(kr(b)),Yr(b))for(let k=10;k<b.length;k++){const G=b[k],ce=G[1].firstChild;null!==ce&&Gp(G[1],G,ce,u)}const T=o.type;if(8&T)Gp(t,n,o.child,u);else if(32&T){const k=Nl(o,n);let G;for(;G=k();)u.push(G)}else if(16&T){const k=Kd(n,o);if(Array.isArray(k))u.push(...k);else{const G=Kc(n[16]);Gp(G[1],G,k,u,!0)}}o=p?o.projectionNext:o.next}return u}class Eh{constructor(n,o){this._lView=n,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,o=n[1];return Gp(o,n,o.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Yr(n)){const o=n[8],u=o?o.indexOf(this):-1;u>-1&&(Bl(n,u),ki(o,u))}this._attachedToViewContainer=!1}Jc(this._lView[1],this._lView)}onDestroy(n){Go(this._lView[1],this._lView,null,n)}markForCheck(){ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function $a(t,n,o){oi(!0);try{Wu(t,n,o)}finally{oi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new et(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function op(t,n){Ec(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new et(902,"");this._appRef=n}}class O0 extends Eh{constructor(n){super(n),this._view=n}detectChanges(){Ep(this._view)}checkNoChanges(){!function qu(t){oi(!0);try{Ep(t)}finally{oi(!1)}}(this._view)}get context(){return null}}class k0 extends Za{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const o=F(n);return new Z(o,this.ngModule)}}function d(t){const n=[];for(let o in t)t.hasOwnProperty(o)&&n.push({propName:t[o],templateName:o});return n}const a=new le("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ep});class Z extends Z_{constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=function th(t){return t.map(Bu).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return d(this.componentDef.inputs)}get outputs(){return d(this.componentDef.outputs)}create(n,o,u,p){const b=(p=p||this.ngModule)?function y(t,n){return{get:(o,u,p)=>{const b=t.get(o,Rm,p);return b!==Rm||u===Rm?b:n.get(o,u,p)}}}(n,p.injector):n,T=b.get(qi,pa),k=b.get(I0,null),G=T.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",_e=u?function Nr(t,n,o){if(yr(t))return t.selectRootElement(n,o===tt.ShadowDom);let u="string"==typeof n?t.querySelector(n):n;return u.textContent="",u}(G,u,this.componentDef.encapsulation):Hd(T.createRenderer(null,this.componentDef),ce,function C(t){const n=t.toLowerCase();return"svg"===n?Ts:"math"===n?"http://www.w3.org/1998/MathML/":null}(ce)),Ne=this.componentDef.onPush?576:528,dt=function lu(t,n){return{components:[],scheduler:t||ep,clean:ll,playerHandler:n||null,flags:0}}(),kt=di(0,null,null,1,0,null,null,null,null,null),dn=Qt(null,kt,dt,Ne,null,null,T,G,k,b);let Bn,ni;Ca(dn);try{const Di=function sg(t,n,o,u,p,b){const T=o[1];o[20]=t;const G=hn(T,20,2,"#host",null),ce=G.mergedAttrs=n.hostAttrs;null!==ce&&(dh(G,ce,!0),null!==t&&(Ka(p,t,ce),null!==G.classes&&Dc(p,t,G.classes),null!==G.styles&&tu(p,t,G.styles)));const _e=u.createRenderer(t,n),Ne=Qt(o,Mi(n),null,n.onPush?64:16,o[20],G,u,_e,b||null,null);return T.firstCreatePass&&(Fe(Q(G,o),T,n.type),ba(T,G),xa(G,o.length,1)),Zu(o,Ne),o[20]=Ne}(_e,this.componentDef,dn,T,G);if(_e)if(u)Ka(G,_e,["ng-version",P0.full]);else{const{attrs:bn,classes:Vi}=function kf(t){const n=[],o=[];let u=1,p=2;for(;u<t.length;){let b=t[u];if("string"==typeof b)2===p?""!==b&&n.push(b,t[++u]):8===p&&o.push(b);else{if(!ia(p))break;p=b}u++}return{attrs:n,classes:o}}(this.componentDef.selectors[0]);bn&&Ka(G,_e,bn),Vi&&Vi.length>0&&Dc(G,_e,Vi.join(" "))}if(ni=Yt(kt,20),void 0!==o){const bn=ni.projection=[];for(let Vi=0;Vi<this.ngContentSelectors.length;Vi++){const Mr=o[Vi];bn.push(null!=Mr?Array.from(Mr):null)}}Bn=function ag(t,n,o,u,p){const b=o[1],T=function Zs(t,n,o){const u=S();t.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),aa(t,u,n,Yn(t,n,1,null),o));const p=po(n,t,u.directiveStart,u);Ls(p,n);const b=De(u,n);return b&&Ls(b,n),p}(b,o,n);if(u.components.push(T),t[8]=T,p&&p.forEach(G=>G(T,n)),n.contentQueries){const G=S();n.contentQueries(1,T,G.directiveStart)}const k=S();return!b.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Sr(k.index),No(o[1],k,0,k.directiveStart,k.directiveEnd,n),hs(n,T)),T}(Di,this.componentDef,dn,dt,[Ey]),hi(kt,dn,null)}finally{jn()}return new Wt(this.componentType,Bn,md(ni,dn),dn,ni)}}class Wt extends class Pm{}{constructor(n,o,u,p,b){super(),this.location=u,this._rootLView=p,this._tNode=b,this.instance=o,this.hostView=this.changeDetectorRef=new O0(p),this.componentType=n}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class ti{}class gi{}const li=new Map;class ua extends ti{constructor(n,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const u=Ee(n);this._bootstrapComponents=Ua(u.bootstrap),this._r3Injector=Jm(n,o,[{provide:ti,useValue:this},{provide:Za,useValue:this.componentFactoryResolver}],Le(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,o=cl.THROW_IF_NOT_FOUND,u=Kn.Default){return n===cl||n===ti||n===Nf?this:this._r3Injector.get(n,o,u)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Dl extends gi{constructor(n){super(),this.moduleType=n,null!==Ee(n)&&function mo(t){const n=new Set;!function o(u){const p=Ee(u,!0),b=p.id;null!==b&&(function Qr(t,n,o){if(n&&n!==o)throw new Error(`Duplicate module registered for ${t} - ${Le(n)} vs ${Le(n.name)}`)}(b,li.get(b),u),li.set(b,u));const T=Ua(p.imports);for(const k of T)n.has(k)||(n.add(k),o(k))}(t)}(n)}create(n){return new ua(this.moduleType,n)}}function Ml(t,n,o){const u=vi()+t,p=yn();return p[u]===Ki?Hl(p,u,o?n.call(o):n()):function fh(t,n){return t[n]}(p,u)}function cc(t,n,o,u){return Mh(yn(),vi(),t,n,o,u)}function Dh(t,n,o,u,p){return function Zp(t,n,o,u,p,b,T){const k=n+o;return cu(t,k,p,b)?Hl(t,k+2,T?u.call(T,p,b):u(p,b)):pu(t,k+2)}(yn(),vi(),t,n,o,u,p)}function dl(t,n,o,u,p,b){return function Wp(t,n,o,u,p,b,T,k){const G=n+o;return function Tp(t,n,o,u,p){const b=cu(t,n,o,u);return ca(t,n+2,p)||b}(t,G,p,b,T)?Hl(t,G+3,k?u.call(k,p,b,T):u(p,b,T)):pu(t,G+3)}(yn(),vi(),t,n,o,u,p,b)}function $p(t,n,o,u){return function Th(t,n,o,u,p,b){let T=n+o,k=!1;for(let G=0;G<p.length;G++)ca(t,T++,p[G])&&(k=!0);return k?Hl(t,T,u.apply(b,p)):pu(t,T)}(yn(),vi(),t,n,o,u)}function pu(t,n){const o=t[n];return o===Ki?void 0:o}function Mh(t,n,o,u,p,b){const T=n+o;return ca(t,T,p)?Hl(t,T+1,b?u.call(b,p):u(p)):pu(t,T+1)}function Ah(t,n){const o=ue();let u;const p=t+20;o.firstCreatePass?(u=function qp(t,n){if(n)for(let o=n.length-1;o>=0;o--){const u=n[o];if(t===u.name)return u}}(n,o.pipeRegistry),o.data[p]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(p,u.onDestroy)):u=o.data[p];const b=u.factory||(u.factory=So(u.type)),T=ht(mh);try{const k=Ho(!1),G=b();return Ho(k),function bb(t,n,o,u){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),n[o]=u}(o,yn(),p,G),G}finally{ht(T)}}function Ih(t,n,o){const u=t+20,p=yn(),b=cn(p,u);return function Oc(t,n){return t[1].data[n].pure}(p,u)?Mh(p,vi(),n,b.transform,o,b):b.transform(o)}function Jp(t){return n=>{setTimeout(t,void 0,n)}}const $l=class q_ extends D.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,o,u){var p,b,T;let k=n,G=o||(()=>null),ce=u;if(n&&"object"==typeof n){const Ne=n;k=null===(p=Ne.next)||void 0===p?void 0:p.bind(Ne),G=null===(b=Ne.error)||void 0===b?void 0:b.bind(Ne),ce=null===(T=Ne.complete)||void 0===T?void 0:T.bind(Ne)}this.__isAsync&&(G=Jp(G),k&&(k=Jp(k)),ce&&(ce=Jp(ce)));const _e=super.subscribe({next:k,error:G,complete:ce});return n instanceof l.w0&&n.add(_e),_e}};function qx(){return this._results[Xu()]()}class Y_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Xu(),u=Y_.prototype;u[o]||(u[o]=qx)}get changes(){return this._changes||(this._changes=new $l)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){const u=this;u.dirty=!1;const p=Jt(n);(this._changesDetected=!function On(t,n,o){if(t.length!==n.length)return!1;for(let u=0;u<t.length;u++){let p=t[u],b=n[u];if(o&&(p=o(p),b=o(b)),b!==p)return!1}return!0}(u._results,p,o))&&(u._results=p,u.length=p.length,u.last=p[this.length-1],u.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Nm=(()=>{class t{}return t.__NG_ELEMENT_ID__=Jx,t})();const Yx=Nm,Kx=class extends Yx{constructor(n,o,u){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(n){const o=this._declarationTContainer.tViews,u=Qt(this._declarationLView,o,n,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(u[19]=b.createEmbeddedView(o)),hi(o,u,n),new Eh(u)}};function Jx(){return K_(S(),yn())}function K_(t,n){return 4&t.type?new Kx(n,t,md(t,n)):null}let J_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xx,t})();function Xx(){return Zb(S(),yn())}const Qx=J_,Gb=class extends Qx{constructor(n,o,u){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=u}get element(){return md(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ve(this._hostTNode,this._hostLView);if(Yl(n)){const o=Aa(n,this._hostLView),u=Sa(n);return new ro(o[1].data[u+8],o)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const o=$b(this._lContainer);return null!==o&&o[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,o,u){const p=n.createEmbeddedView(o||{});return this.insert(p,u),p}createComponent(n,o,u,p,b){const T=n&&!function Kt(t){return"function"==typeof t}(n);let k;if(T)k=o;else{const Ne=o||{};k=Ne.index,u=Ne.injector,p=Ne.projectableNodes,b=Ne.ngModuleRef}const G=T?n:new Z(F(n)),ce=u||this.parentInjector;if(!b&&null==G.ngModule&&ce){const Ne=ce.get(ti,null);Ne&&(b=Ne)}const _e=G.create(ce,p,void 0,b);return this.insert(_e.hostView,k),_e}insert(n,o){const u=n._lView,p=u[1];if(function Cr(t){return Yr(t[3])}(u)){const _e=this.indexOf(n);if(-1!==_e)this.detach(_e);else{const Ne=u[3],dt=new Gb(Ne,Ne[6],Ne[3]);dt.detach(dt.indexOf(n))}}const b=this._adjustIndex(o),T=this._lContainer;!function sp(t,n,o,u){const p=10+u,b=o.length;u>0&&(o[p-1][4]=n),u<b-10?(n[4]=o[p],Gn(o,10+u,n)):(o.push(n),n[4]=null),n[3]=o;const T=n[17];null!==T&&o!==T&&function Pu(t,n){const o=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===o?t[9]=[n]:o.push(n)}(T,n);const k=n[19];null!==k&&k.insertView(t),n[2]|=128}(p,u,T,b);const k=Fu(b,T),G=u[11],ce=ku(G,T[7]);return null!==ce&&function Mf(t,n,o,u,p,b){u[0]=p,u[6]=n,Ec(t,u,o,1,p,b)}(p,T[6],G,u,ce,k),n.attachToViewContainerRef(),Gn(R0(T),b,n),n}move(n,o){return this.insert(n,o)}indexOf(n){const o=$b(this._lContainer);return null!==o?o.indexOf(n):-1}remove(n){const o=this._adjustIndex(n,-1),u=Bl(this._lContainer,o);u&&(ki(R0(this._lContainer),o),Jc(u[1],u))}detach(n){const o=this._adjustIndex(n,-1),u=Bl(this._lContainer,o);return u&&null!=ki(R0(this._lContainer),o)?new Eh(u):null}_adjustIndex(n,o=0){return null==n?this.length+o:n}};function $b(t){return t[8]}function R0(t){return t[8]||(t[8]=[])}function Zb(t,n){let o;const u=n[t.index];if(Yr(u))o=u;else{let p;if(8&t.type)p=kr(u);else{const b=n[11];p=b.createComment("");const T=De(t,n);zl(b,ku(b,T),p,function Tf(t,n){return yr(t)?t.nextSibling(n):n.nextSibling}(b,T),!1)}n[t.index]=o=al(u,n,p,t),Zu(n,o)}return new Gb(o,t,n)}class F0{constructor(n){this.queryList=n,this.matches=null}clone(){return new F0(this.queryList)}setDirty(){this.queryList.setDirty()}}class L0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const o=n.queries;if(null!==o){const u=null!==n.contentQueries?n.contentQueries[0]:o.length,p=[];for(let b=0;b<u;b++){const T=o.getByIndex(b);p.push(this.queries[T.indexInDeclarationView].clone())}return new L0(p)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)null!==tx(n,o).matches&&this.queries[o].setDirty()}}class Wb{constructor(n,o,u=null){this.predicate=n,this.flags=o,this.read=u}}class N0{constructor(n=[]){this.queries=n}elementStart(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let u=0;u<this.length;u++){const p=null!==o?o.length:0,b=this.getByIndex(u).embeddedTView(n,p);b&&(b.indexInDeclarationView=u,null!==o?o.push(b):o=[b])}return null!==o?new N0(o):null}template(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class B0{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new B0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let p=0;p<u.length;p++){const b=u[p];this.matchTNodeWithReadOption(n,o,nw(o,b)),this.matchTNodeWithReadOption(n,o,Po(o,n,b,!1,!1))}else u===Nm?4&o.type&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,Po(o,n,u,!1,!1))}matchTNodeWithReadOption(n,o,u){if(null!==u){const p=this.metadata.read;if(null!==p)if(p===Ch||p===J_||p===Nm&&4&o.type)this.addMatch(o.index,-2);else{const b=Po(o,n,p,!1,!1);null!==b&&this.addMatch(o.index,b)}else this.addMatch(o.index,u)}}addMatch(n,o){null===this.matches?this.matches=[n,o]:this.matches.push(n,o)}}function nw(t,n){const o=t.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===n)return o[u+1];return null}function rw(t,n,o,u){return-1===o?function iw(t,n){return 11&t.type?md(t,n):4&t.type?K_(t,n):null}(n,t):-2===o?function ow(t,n,o){return o===Ch?md(n,t):o===Nm?K_(n,t):o===J_?Zb(n,t):void 0}(t,n,u):po(t,t[1],o,n)}function qb(t,n,o,u){const p=n[19].queries[u];if(null===p.matches){const b=t.data,T=o.matches,k=[];for(let G=0;G<T.length;G+=2){const ce=T[G];k.push(ce<0?null:rw(n,b[ce],T[G+1],o.metadata.read))}p.matches=k}return p.matches}function z0(t,n,o,u){const p=t.queries.getByIndex(o),b=p.matches;if(null!==b){const T=qb(t,n,p,o);for(let k=0;k<b.length;k+=2){const G=b[k];if(G>0)u.push(T[k/2]);else{const ce=b[k+1],_e=n[-G];for(let Ne=10;Ne<_e.length;Ne++){const dt=_e[Ne];dt[17]===dt[3]&&z0(dt[1],dt,ce,u)}if(null!==_e[9]){const Ne=_e[9];for(let dt=0;dt<Ne.length;dt++){const kt=Ne[dt];z0(kt[1],kt,ce,u)}}}}}return u}function Yb(t){const n=yn(),o=ue(),u=yo();Ao(u+1);const p=tx(o,u);if(t.dirty&&wi(n)===(2==(2&p.metadata.flags))){if(null===p.matches)t.reset([]);else{const b=p.crossesNgTemplate?z0(o,n,u,[]):qb(o,n,p,u);t.reset(b,T0),t.notifyOnChanges()}return!0}return!1}function Kb(t,n,o){const u=ue();u.firstCreatePass&&(ex(u,new Wb(t,n,o),-1),2==(2&n)&&(u.staticViewQueries=!0)),Qb(u,yn(),n)}function Jb(t,n,o,u){const p=ue();if(p.firstCreatePass){const b=S();ex(p,new Wb(n,o,u),b.index),function aw(t,n){const o=t.contentQueries||(t.contentQueries=[]);n!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,n)}(p,t),2==(2&o)&&(p.staticContentQueries=!0)}Qb(p,yn(),o)}function Xb(){return function sw(t,n){return t[19].queries[n].queryList}(yn(),yo())}function Qb(t,n,o){const u=new Y_(4==(4&o));Go(t,n,u,u.destroy),null===n[19]&&(n[19]=new L0),n[19].queries.push(new F0(u))}function ex(t,n,o){null===t.queries&&(t.queries=new N0),t.queries.track(new B0(n,o))}function tx(t,n){return t.queries.getByIndex(n)}function ey(...t){}const $0=new le("Application Initializer");let Qp=(()=>{class t{constructor(o){this.appInits=o,this.resolve=ey,this.reject=ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const b=this.appInits[p]();if(im(b))o.push(b);else if(Ag(b)){const T=new Promise((k,G)=>{b.subscribe({complete:k,error:G})});o.push(T)}}Promise.all(o).then(()=>{u()}).catch(p=>{this.reject(p)}),0===o.length&&u(),this.initialized=!0}}return t.\u0275fac=function(o){return new(o||t)(ko($0,8))},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();const yx=new le("AppId"),Mw={provide:yx,useFactory:function Dw(){return`${Z0()}${Z0()}${Z0()}`},deps:[]};function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vx=new le("Platform Initializer"),bx=new le("Platform ID"),xx=new le("appBootstrapListener");let wx=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();const ty=new le("LocaleId"),Cx=new le("DefaultCurrencyCode");class Sw{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}}let W0=(()=>{class t{compileModuleSync(o){return new Dl(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),b=Ua(Ee(o).declarations).reduce((T,k)=>{const G=F(k);return G&&T.push(new Z(G)),T},[]);return new Sw(u,b)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();const Aw=(()=>Promise.resolve(0))();function q0(t){"undefined"==typeof Zone?Aw.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Tl{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $l(!1),this.onMicrotaskEmpty=new $l(!1),this.onStable=new $l(!1),this.onError=new $l(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&o,p.shouldCoalesceRunChangeDetection=u,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Iw(){let t=Vn.requestAnimationFrame,n=Vn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o);const u=n[Zone.__symbol__("OriginalDelegate")];u&&(n=u)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function kw(t){const n=()=>{!function Ow(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,K0(t),t.isCheckStableRunning=!0,Y0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),K0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,p,b,T,k)=>{try{return Ex(t),o.invokeTask(p,b,T,k)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||t.shouldCoalesceRunChangeDetection)&&n(),Dx(t)}},onInvoke:(o,u,p,b,T,k,G)=>{try{return Ex(t),o.invoke(p,b,T,k,G)}finally{t.shouldCoalesceRunChangeDetection&&n(),Dx(t)}},onHasTask:(o,u,p,b)=>{o.hasTask(p,b),u===p&&("microTask"==b.change?(t._hasPendingMicrotasks=b.microTask,K0(t),Y0(t)):"macroTask"==b.change&&(t.hasPendingMacrotasks=b.macroTask))},onHandleError:(o,u,p,b)=>(o.handleError(p,b),t.runOutsideAngular(()=>t.onError.emit(b)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Tl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,o,u){return this._inner.run(n,o,u)}runTask(n,o,u,p){const b=this._inner,T=b.scheduleEventTask("NgZoneEvent: "+p,n,Pw,ey,ey);try{return b.runTask(T,o,u)}finally{b.cancelTask(T)}}runGuarded(n,o,u){return this._inner.runGuarded(n,o,u)}runOutsideAngular(n){return this._outer.run(n)}}const Pw={};function Y0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function K0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ex(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dx(t){t._nesting--,Y0(t)}class Rw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $l,this.onMicrotaskEmpty=new $l,this.onStable=new $l,this.onError=new $l}run(n,o,u){return n.apply(o,u)}runGuarded(n,o,u){return n.apply(o,u)}runOutsideAngular(n){return n()}runTask(n,o,u,p){return n.apply(o,u)}}let Mx=(()=>{class t{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tl.assertNotInAngularZone(),q0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())q0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,p){let b=-1;u&&u>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==b),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:b,updateCb:p})}whenStable(o,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,p){return[]}}return t.\u0275fac=function(o){return new(o||t)(ko(Tl))},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})(),Sx=(()=>{class t{constructor(){this._applications=new Map,J0.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return J0.findTestabilityInTree(this,o,u)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();class Fw{addToWindow(n){}findTestabilityInTree(n,o,u){return null}}function Lw(t){J0=t}let uc,J0=new Fw;const Tx=new le("AllowMultipleToken");class zw{constructor(n,o){this.name=n,this.token=o}}function Ax(t,n,o=[]){const u=`Platform: ${n}`,p=new le(u);return(b=[])=>{let T=Ix();if(!T||T.injector.get(Tx,!1))if(t)t(o.concat(b).concat({provide:p,useValue:!0}));else{const k=o.concat(b).concat({provide:p,useValue:!0},{provide:Bf,useValue:"platform"});!function Vw(t){if(uc&&!uc.destroyed&&!uc.injector.get(Tx,!1))throw new et(400,"");uc=t.get(Px);const n=t.get(vx,null);n&&n.forEach(o=>o())}(cl.create({providers:k,name:u}))}return function Uw(t){const n=Ix();if(!n)throw new et(401,"");return n}()}}function Ix(){return uc&&!uc.destroyed?uc:null}let Px=(()=>{class t{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const k=function jw(t,n){let o;return o="noop"===t?new Rw:("zone.js"===t?void 0:t)||new Tl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),G=[{provide:Tl,useValue:k}];return k.run(()=>{const ce=cl.create({providers:G,parent:this.injector,name:o.moduleType.name}),_e=o.create(ce),Ne=_e.injector.get(tc,null);if(!Ne)throw new et(402,"");return k.runOutsideAngular(()=>{const dt=k.onError.subscribe({next:kt=>{Ne.handleError(kt)}});_e.onDestroy(()=>{X0(this._modules,_e),dt.unsubscribe()})}),function Hw(t,n,o){try{const u=o();return im(u)?u.catch(p=>{throw n.runOutsideAngular(()=>t.handleError(p)),p}):u}catch(u){throw n.runOutsideAngular(()=>t.handleError(u)),u}}(Ne,k,()=>{const dt=_e.injector.get(Qp);return dt.runInitializers(),dt.donePromise.then(()=>(function zv(t){Dn(t,"Expected localeId to be defined"),"string"==typeof t&&(D_=t.toLowerCase().replace(/_/g,"-"))}(_e.injector.get(ty,Rp)||Rp),this._moduleDoBootstrap(_e),_e))})})}bootstrapModule(o,u=[]){const p=Ox({},u);return function Nw(t,n,o){const u=new Dl(o);return Promise.resolve(u)}(0,0,o).then(b=>this.bootstrapModuleFactory(b,p))}_moduleDoBootstrap(o){const u=o.injector.get(zm);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new et(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new et(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(o){return new(o||t)(ko(cl))},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();function Ox(t,n){return Array.isArray(n)?n.reduce(Ox,t):Object.assign(Object.assign({},t),n)}let zm=(()=>{class t{constructor(o,u,p,b,T){this._zone=o,this._injector=u,this._exceptionHandler=p,this._componentFactoryResolver=b,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const k=new W.y(ce=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ce.next(this._stable),ce.complete()})}),G=new W.y(ce=>{let _e;this._zone.runOutsideAngular(()=>{_e=this._zone.onStable.subscribe(()=>{Tl.assertNotInAngularZone(),q0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ce.next(!0))})})});const Ne=this._zone.onUnstable.subscribe(()=>{Tl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ce.next(!1)}))});return()=>{_e.unsubscribe(),Ne.unsubscribe()}});this.isStable=(0,f.T)(k,G.pipe((0,je.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new et(405,"");let p;p=o instanceof Z_?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(p.componentType);const b=function Bw(t){return t.isBoundToModule}(p)?void 0:this._injector.get(ti),k=p.create(cl.NULL,[],u||p.selector,b),G=k.location.nativeElement,ce=k.injector.get(Mx,null),_e=ce&&k.injector.get(Sx);return ce&&_e&&_e.registerApplication(G,ce),k.onDestroy(()=>{this.detachView(k.hostView),X0(this.components,k),_e&&_e.unregisterApplication(G)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new et(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;X0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(xx,[]).concat(this._bootstrapListeners).forEach(p=>p(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(o){return new(o||t)(ko(Tl),ko(cl),ko(tc),ko(Za),ko(Qp))},t.\u0275prov=_i({token:t,factory:t.\u0275fac}),t})();function X0(t,n){const o=t.indexOf(n);o>-1&&t.splice(o,1)}let Rx=!0;function $w(){Rx=!1}let Zw=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ww,t})();function Ww(t){return function qw(t,n,o){if(qs(t)&&!o){const u=Hn(t.index,n);return new Eh(u,u)}return 47&t.type?new Eh(n[16],n):null}(S(),yn(),16==(16&t))}class Ux{constructor(){}supports(n){return ph(n)}create(n){return new e1(n)}}const Qw=(t,n)=>n;class e1{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Qw}forEachItem(n){let o;for(o=this._itHead;null!==o;o=o._next)n(o)}forEachOperation(n){let o=this._itHead,u=this._removalsHead,p=0,b=null;for(;o||u;){const T=!u||o&&o.currentIndex<Hx(u,p,b)?o:u,k=Hx(T,p,b),G=T.currentIndex;if(T===u)p--,u=u._nextRemoved;else if(o=o._next,null==T.previousIndex)p++;else{b||(b=[]);const ce=k-p,_e=G-p;if(ce!=_e){for(let dt=0;dt<ce;dt++){const kt=dt<b.length?b[dt]:b[dt]=0,dn=kt+dt;_e<=dn&&dn<ce&&(b[dt]=kt+1)}b[T.previousIndex]=_e-ce}}k!==G&&n(T,k,G)}}forEachPreviousItem(n){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachMovedItem(n){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}forEachIdentityChange(n){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)n(o)}diff(n){if(null==n&&(n=[]),!ph(n))throw new et(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let p,b,T,o=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let k=0;k<this.length;k++)b=n[k],T=this._trackByFn(k,b),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,b,T,k)),Object.is(o.item,b)||this._addIdentityChange(o,b)):(o=this._mismatch(o,b,T,k),u=!0),o=o._next}else p=0,function Oy(t,n){if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else{const o=t[Xu()]();let u;for(;!(u=o.next()).done;)n(u.value)}}(n,k=>{T=this._trackByFn(p,k),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,k,T,p)),Object.is(o.item,k)||this._addIdentityChange(o,k)):(o=this._mismatch(o,k,T,p),u=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,o,u,p){let b;return null===n?b=this._itTail:(b=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._reinsertAfter(n,b,p)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,p))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._moveAfter(n,b,p)):n=this._addAfter(new t1(o,u),b,p),n}_verifyReinsertion(n,o,u,p){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==b?n=this._reinsertAfter(b,n._prev,p):n.currentIndex!=p&&(n.currentIndex=p,this._addToMoves(n,p)),n}_truncate(n){for(;null!==n;){const o=n._next;this._addToRemovals(this._unlink(n)),n=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const p=n._prevRemoved,b=n._nextRemoved;return null===p?this._removalsHead=b:p._nextRemoved=b,null===b?this._removalsTail=p:b._prevRemoved=p,this._insertAfter(n,o,u),this._addToMoves(n,u),n}_moveAfter(n,o,u){return this._unlink(n),this._insertAfter(n,o,u),this._addToMoves(n,u),n}_addAfter(n,o,u){return this._insertAfter(n,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,o,u){const p=null===o?this._itHead:o._next;return n._next=p,n._prev=o,null===p?this._itTail=n:p._prev=n,null===o?this._itHead=n:o._next=n,null===this._linkedRecords&&(this._linkedRecords=new jx),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const o=n._prev,u=n._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,n}_addToMoves(n,o){return n.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jx),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,o){return n.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class t1{constructor(n,o){this.item=n,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n1{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const o=n._prevDup,u=n._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class jx{constructor(){this.map=new Map}put(n){const o=n.trackById;let u=this.map.get(o);u||(u=new n1,this.map.set(o,u)),u.add(n)}get(n,o){const p=this.map.get(n);return p?p.get(n,o):null}remove(n){const o=n.trackById;return this.map.get(o).remove(n)&&this.map.delete(o),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hx(t,n,o){const u=t.previousIndex;if(null===u)return u;let p=0;return o&&u<o.length&&(p=o[u]),u+n+p}class Gx{constructor(){}supports(n){return n instanceof Map||Zf(n)}create(){return new r1}}class r1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let o;for(o=this._mapHead;null!==o;o=o._next)n(o)}forEachPreviousItem(n){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)n(o)}forEachChangedItem(n){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}diff(n){if(n){if(!(n instanceof Map||Zf(n)))throw new et(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const b=this._getOrCreateRecordForKey(p,u);o=this._insertBeforeOrAppend(o,b)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,o){if(n){const u=n._prev;return o._next=n,o._prev=u,n._prev=o,u&&(u._next=o),n===this._mapHead&&(this._mapHead=o),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(n,o){if(this._records.has(n)){const p=this._records.get(n);this._maybeAddToChanges(p,o);const b=p._prev,T=p._next;return b&&(b._next=T),T&&(T._prev=b),p._next=null,p._prev=null,p}const u=new o1(n);return this._records.set(n,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,o){Object.is(o,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=o,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,o){n instanceof Map?n.forEach(o):Object.keys(n).forEach(u=>o(n[u],u))}}class o1{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $x(){return new iy([new Ux])}let iy=(()=>{class t{constructor(o){this.factories=o}static create(o,u){if(null!=u){const p=u.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:u=>t.create(o,u||$x()),deps:[[t,new Xl,new ta]]}}find(o){const u=this.factories.find(p=>p.supports(o));if(null!=u)return u;throw new et(901,"")}}return t.\u0275prov=_i({token:t,providedIn:"root",factory:$x}),t})();function Zx(){return new ry([new Gx])}let ry=(()=>{class t{constructor(o){this.factories=o}static create(o,u){if(u){const p=u.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:u=>t.create(o,u||Zx()),deps:[[t,new Xl,new ta]]}}find(o){const u=this.factories.find(b=>b.supports(o));if(u)return u;throw new et(901,"")}}return t.\u0275prov=_i({token:t,providedIn:"root",factory:Zx}),t})();const s1=[new Gx],l1=new iy([new Ux]),c1=new ry(s1),u1=Ax(null,"core",[{provide:bx,useValue:"unknown"},{provide:Px,deps:[cl]},{provide:Sx,deps:[]},{provide:wx,deps:[]}]),m1=[{provide:zm,useClass:zm,deps:[Tl,cl,tc,Za,Qp]},{provide:a,deps:[Tl],useFactory:function g1(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(o){n.push(o)}}},{provide:Qp,useClass:Qp,deps:[[new ta,$0]]},{provide:W0,useClass:W0,deps:[]},Mw,{provide:iy,useFactory:function d1(){return l1},deps:[]},{provide:ry,useFactory:function h1(){return c1},deps:[]},{provide:ty,useFactory:function p1(t){return t||function f1(){return"undefined"!=typeof $localize&&$localize.locale||Rp}()},deps:[[new Jl(ty),new ta,new Xl]]},{provide:Cx,useValue:"USD"}];let _1=(()=>{class t{constructor(o){}}return t.\u0275fac=function(o){return new(o||t)(ko(zm))},t.\u0275mod=Ui({type:t}),t.\u0275inj=ii({providers:m1}),t})()},3075:(Sn,wt,V)=>{"use strict";V.d(wt,{Zs:()=>As,Fj:()=>Ye,sg:()=>Ms,u5:()=>Hn,Cf:()=>We,JU:()=>Le,a5:()=>zn,JJ:()=>Kn,F:()=>Bo,On:()=>Yr,kI:()=>un});var D=V(5e3),l=V(9808),W=V(2076),f=V(4128),je=V(4004);let qe=(()=>{class X{constructor(N,Se){this._renderer=N,this._elementRef=Se,this.onChange=Lt=>{},this.onTouched=()=>{}}setProperty(N,Se){this._renderer.setProperty(this._elementRef.nativeElement,N,Se)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(D.Qsj),D.Y36(D.SBq))},X.\u0275dir=D.lG2({type:X}),X})(),Oe=(()=>{class X extends qe{}return X.\u0275fac=function(){let q;return function(Se){return(q||(q=D.n5z(X)))(Se||X)}}(),X.\u0275dir=D.lG2({type:X,features:[D.qOj]}),X})();const Le=new D.OlP("NgValueAccessor"),He={provide:Le,useExisting:(0,D.Gpc)(()=>Ye),multi:!0},gt=new D.OlP("CompositionEventMode");let Ye=(()=>{class X extends qe{constructor(N,Se,Lt){super(N,Se),this._compositionMode=Lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Be(){const X=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(X.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(gt,8))},X.\u0275dir=D.lG2({type:X,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,Se){1&N&&D.NdJ("input",function(Fn){return Se._handleInput(Fn.target.value)})("blur",function(){return Se.onTouched()})("compositionstart",function(){return Se._compositionStart()})("compositionend",function(Fn){return Se._compositionEnd(Fn.target.value)})},features:[D._Bn([He]),D.qOj]}),X})();function et(X){return null==X||0===X.length}function bt(X){return null!=X&&"number"==typeof X.length}const We=new D.OlP("NgValidators"),Ut=new D.OlP("NgAsyncValidators"),jt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class un{static min(q){return function Dt(X){return q=>{if(et(q.value)||et(X))return null;const N=parseFloat(q.value);return!isNaN(N)&&N<X?{min:{min:X,actual:q.value}}:null}}(q)}static max(q){return function ke(X){return q=>{if(et(q.value)||et(X))return null;const N=parseFloat(q.value);return!isNaN(N)&&N>X?{max:{max:X,actual:q.value}}:null}}(q)}static required(q){return ot(q)}static requiredTrue(q){return nn(q)}static email(q){return function zt(X){return et(X.value)||jt.test(X.value)?null:{email:!0}}(q)}static minLength(q){return function tn(X){return q=>et(q.value)||!bt(q.value)?null:q.value.length<X?{minlength:{requiredLength:X,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function st(X){return q=>bt(q.value)&&q.value.length>X?{maxlength:{requiredLength:X,actualLength:q.value.length}}:null}(q)}static pattern(q){return function yt(X){if(!X)return ct;let q,N;return"string"==typeof X?(N="","^"!==X.charAt(0)&&(N+="^"),N+=X,"$"!==X.charAt(X.length-1)&&(N+="$"),q=new RegExp(N)):(N=X.toString(),q=X),Se=>{if(et(Se.value))return null;const Lt=Se.value;return q.test(Lt)?null:{pattern:{requiredPattern:N,actualValue:Lt}}}}(q)}static nullValidator(q){return null}static compose(q){return Dn(q)}static composeAsync(q){return Ii(q)}}function ot(X){return et(X.value)?{required:!0}:null}function nn(X){return!0===X.value?null:{required:!0}}function ct(X){return null}function Tt(X){return null!=X}function Xt(X){const q=(0,D.QGY)(X)?(0,W.D)(X):X;return(0,D.CqO)(q),q}function Ct(X){let q={};return X.forEach(N=>{q=null!=N?Object.assign(Object.assign({},q),N):q}),0===Object.keys(q).length?null:q}function vn(X,q){return q.map(N=>N(X))}function zi(X){return X.map(q=>function fi(X){return!X.validate}(q)?q:N=>q.validate(N))}function Dn(X){if(!X)return null;const q=X.filter(Tt);return 0==q.length?null:function(N){return Ct(vn(N,q))}}function Tn(X){return null!=X?Dn(zi(X)):null}function Ii(X){if(!X)return null;const q=X.filter(Tt);return 0==q.length?null:function(N){const Se=vn(N,q).map(Xt);return(0,f.D)(Se).pipe((0,je.U)(Ct))}}function ci(X){return null!=X?Ii(zi(X)):null}function ir(X,q){return null===X?[q]:Array.isArray(X)?[...X,q]:[X,q]}function _i(X){return X._rawValidators}function kn(X){return X._rawAsyncValidators}function ii(X){return X?Array.isArray(X)?X:[X]:[]}function ft(X,q){return Array.isArray(X)?X.includes(q):X===q}function Ft(X,q){const N=ii(q);return ii(X).forEach(Lt=>{ft(N,Lt)||N.push(Lt)}),N}function on(X,q){return ii(q).filter(N=>!ft(X,N))}class gn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=Tn(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=ci(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q){this.control&&this.control.reset(q)}hasError(q,N){return!!this.control&&this.control.hasError(q,N)}getError(q,N){return this.control?this.control.getError(q,N):null}}class zn extends gn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jn extends gn{get formDirective(){return null}get path(){return null}}let Kn=(()=>{class X extends class Pi{constructor(q){this._cd=q}is(q){var N,Se,Lt;return"submitted"===q?!!(null===(N=this._cd)||void 0===N?void 0:N.submitted):!!(null===(Lt=null===(Se=this._cd)||void 0===Se?void 0:Se.control)||void 0===Lt?void 0:Lt[q])}}{constructor(N){super(N)}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(zn,2))},X.\u0275dir=D.lG2({type:X,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,Se){2&N&&D.ekj("ng-untouched",Se.is("untouched"))("ng-touched",Se.is("touched"))("ng-pristine",Se.is("pristine"))("ng-dirty",Se.is("dirty"))("ng-valid",Se.is("valid"))("ng-invalid",Se.is("invalid"))("ng-pending",Se.is("pending"))},features:[D.qOj]}),X})();function qt(X,q){Bt(X,q),q.valueAccessor.writeValue(X.value),function Ce(X,q){q.valueAccessor.registerOnChange(N=>{X._pendingValue=N,X._pendingChange=!0,X._pendingDirty=!0,"change"===X.updateOn&&ye(X,q)})}(X,q),function lt(X,q){const N=(Se,Lt)=>{q.valueAccessor.writeValue(Se),Lt&&q.viewToModelUpdate(Se)};X.registerOnChange(N),q._registerOnDestroy(()=>{X._unregisterOnChange(N)})}(X,q),function Ae(X,q){q.valueAccessor.registerOnTouched(()=>{X._pendingTouched=!0,"blur"===X.updateOn&&X._pendingChange&&ye(X,q),"submit"!==X.updateOn&&X.markAsTouched()})}(X,q),function Ln(X,q){if(q.valueAccessor.setDisabledState){const N=Se=>{q.valueAccessor.setDisabledState(Se)};X.registerOnDisabledChange(N),q._registerOnDestroy(()=>{X._unregisterOnDisabledChange(N)})}}(X,q)}function Ai(X,q,N=!0){const Se=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(Se),q.valueAccessor.registerOnTouched(Se)),pt(X,q),X&&(q._invokeOnDestroyCallbacks(),X._registerOnCollectionChange(()=>{}))}function Qn(X,q){X.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(q)})}function Bt(X,q){const N=_i(X);null!==q.validator?X.setValidators(ir(N,q.validator)):"function"==typeof N&&X.setValidators([N]);const Se=kn(X);null!==q.asyncValidator?X.setAsyncValidators(ir(Se,q.asyncValidator)):"function"==typeof Se&&X.setAsyncValidators([Se]);const Lt=()=>X.updateValueAndValidity();Qn(q._rawValidators,Lt),Qn(q._rawAsyncValidators,Lt)}function pt(X,q){let N=!1;if(null!==X){if(null!==q.validator){const Lt=_i(X);if(Array.isArray(Lt)&&Lt.length>0){const Fn=Lt.filter(hr=>hr!==q.validator);Fn.length!==Lt.length&&(N=!0,X.setValidators(Fn))}}if(null!==q.asyncValidator){const Lt=kn(X);if(Array.isArray(Lt)&&Lt.length>0){const Fn=Lt.filter(hr=>hr!==q.asyncValidator);Fn.length!==Lt.length&&(N=!0,X.setAsyncValidators(Fn))}}}const Se=()=>{};return Qn(q._rawValidators,Se),Qn(q._rawAsyncValidators,Se),N}function ye(X,q){X._pendingDirty&&X.markAsDirty(),X.setValue(X._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(X._pendingValue),X._pendingChange=!1}function Pt(X,q){Bt(X,q)}function it(X,q){X._syncPendingControls(),q.forEach(N=>{const Se=N.control;"submit"===Se.updateOn&&Se._pendingChange&&(N.viewToModelUpdate(Se._pendingValue),Se._pendingChange=!1)})}function F(X,q){const N=X.indexOf(q);N>-1&&X.splice(N,1)}const Ee="VALID",Re="INVALID",Ke="PENDING",$e="DISABLED";function at(X){return(Vt(X)?X.validators:X)||null}function Nt(X){return Array.isArray(X)?Tn(X):X||null}function rn(X,q){return(Vt(q)?q.asyncValidators:X)||null}function Rt(X){return Array.isArray(X)?ci(X):X||null}function Vt(X){return null!=X&&!Array.isArray(X)&&"object"==typeof X}const an=X=>X instanceof pi,Cn=X=>X instanceof ar;function Li(X){return an(X)?X.value:X.getRawValue()}function ui(X,q){const N=Cn(X),Se=X.controls;if(!(N?Object.keys(Se):Se).length)throw new D.vHH(1e3,"");if(!Se[q])throw new D.vHH(1001,"")}function xi(X,q){Cn(X),X._forEachChild((Se,Lt)=>{if(void 0===q[Lt])throw new D.vHH(1002,"")})}class Rn{constructor(q,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=q,this._rawAsyncValidators=N,this._composedValidatorFn=Nt(this._rawValidators),this._composedAsyncValidatorFn=Rt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===Ee}get invalid(){return this.status===Re}get pending(){return this.status==Ke}get disabled(){return this.status===$e}get enabled(){return this.status!==$e}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._rawValidators=q,this._composedValidatorFn=Nt(q)}setAsyncValidators(q){this._rawAsyncValidators=q,this._composedAsyncValidatorFn=Rt(q)}addValidators(q){this.setValidators(Ft(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(Ft(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(on(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(on(q,this._rawAsyncValidators))}hasValidator(q){return ft(this._rawValidators,q)}hasAsyncValidator(q){return ft(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=Ke,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const N=this._parentMarkedDirty(q.onlySelf);this.status=$e,this.errors=null,this._forEachChild(Se=>{Se.disable(Object.assign(Object.assign({},q),{onlySelf:!0}))}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},q),{skipPristineCheck:N})),this._onDisabledChange.forEach(Se=>Se(!0))}enable(q={}){const N=this._parentMarkedDirty(q.onlySelf);this.status=Ee,this._forEachChild(Se=>{Se.enable(Object.assign(Object.assign({},q),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},q),{skipPristineCheck:N})),this._onDisabledChange.forEach(Se=>Se(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ee||this.status===Ke)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$e:Ee}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=Ke,this._hasOwnPendingAsyncValidator=!0;const N=Xt(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(Se=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Se,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,N={}){this.errors=q,this._updateControlsErrors(!1!==N.emitEvent)}get(q){return function nt(X,q,N){if(null==q||(Array.isArray(q)||(q=q.split(N)),Array.isArray(q)&&0===q.length))return null;let Se=X;return q.forEach(Lt=>{Se=Cn(Se)?Se.controls.hasOwnProperty(Lt)?Se.controls[Lt]:null:(X=>X instanceof si)(Se)&&Se.at(Lt)||null}),Se}(this,q,".")}getError(q,N){const Se=N?this.get(N):this;return Se&&Se.errors?Se.errors[q]:null}hasError(q,N){return!!this.getError(q,N)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new D.vpe,this.statusChanges=new D.vpe}_calculateStatus(){return this._allControlsDisabled()?$e:this.errors?Re:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ke)?Ke:this._anyControlsHaveStatus(Re)?Re:Ee}_anyControlsHaveStatus(q){return this._anyControls(N=>N.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_isBoxedValue(q){return"object"==typeof q&&null!==q&&2===Object.keys(q).length&&"value"in q&&"disabled"in q}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){Vt(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pi extends Rn{constructor(q=null,N,Se){super(at(N),rn(Se,N)),this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(q,N={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(Se=>Se(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(q,N={}){this.setValue(q,N)}reset(q=null,N={}){this._applyFormState(q),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){F(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){F(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){this._isBoxedValue(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}}class ar extends Rn{constructor(q,N,Se){super(at(N),rn(Se,N)),this.controls=q,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,N){return this.controls[q]?this.controls[q]:(this.controls[q]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(q,N,Se={}){this.registerControl(q,N),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}removeControl(q,N={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(q,N,Se={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],N&&this.registerControl(q,N),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,N={}){xi(this,q),Object.keys(q).forEach(Se=>{ui(this,Se),this.controls[Se].setValue(q[Se],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(q,N={}){null!=q&&(Object.keys(q).forEach(Se=>{this.controls[Se]&&this.controls[Se].patchValue(q[Se],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(q={},N={}){this._forEachChild((Se,Lt)=>{Se.reset(q[Lt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(q,N,Se)=>(q[Se]=Li(N),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(N,Se)=>!!Se._syncPendingControls()||N);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(N=>{const Se=this.controls[N];Se&&q(Se,N)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const N of Object.keys(this.controls)){const Se=this.controls[N];if(this.contains(N)&&q(Se))return!0}return!1}_reduceValue(){return this._reduceChildren({},(q,N,Se)=>((N.enabled||this.disabled)&&(q[Se]=N.value),q))}_reduceChildren(q,N){let Se=q;return this._forEachChild((Lt,Fn)=>{Se=N(Se,Lt,Fn)}),Se}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class si extends Rn{constructor(q,N,Se){super(at(N),rn(Se,N)),this.controls=q,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[q]}push(q,N={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(q,N,Se={}){this.controls.splice(q,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:Se.emitEvent})}removeAt(q,N={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(q,N,Se={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),N&&(this.controls.splice(q,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,N={}){xi(this,q),q.forEach((Se,Lt)=>{ui(this,Lt),this.at(Lt).setValue(Se,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(q,N={}){null!=q&&(q.forEach((Se,Lt)=>{this.at(Lt)&&this.at(Lt).patchValue(Se,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(q=[],N={}){this._forEachChild((Se,Lt)=>{Se.reset(q[Lt],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(q=>Li(q))}clear(q={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_syncPendingControls(){let q=this.controls.reduce((N,Se)=>!!Se._syncPendingControls()||N,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((N,Se)=>{q(N,Se)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(N=>N.enabled&&q(N))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}}const wr={provide:Jn,useExisting:(0,D.Gpc)(()=>Bo)},Ji=(()=>Promise.resolve(null))();let Bo=(()=>{class X extends Jn{constructor(N,Se){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new D.vpe,this.form=new ar({},Tn(N),ci(Se))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(N){Ji.then(()=>{const Se=this._findContainer(N.path);N.control=Se.registerControl(N.name,N.control),qt(N.control,N),N.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(N)})}getControl(N){return this.form.get(N.path)}removeControl(N){Ji.then(()=>{const Se=this._findContainer(N.path);Se&&Se.removeControl(N.name),F(this._directives,N)})}addFormGroup(N){Ji.then(()=>{const Se=this._findContainer(N.path),Lt=new ar({});Pt(Lt,N),Se.registerControl(N.name,Lt),Lt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(N){Ji.then(()=>{const Se=this._findContainer(N.path);Se&&Se.removeControl(N.name)})}getFormGroup(N){return this.form.get(N.path)}updateModel(N,Se){Ji.then(()=>{this.form.get(N.path).setValue(Se)})}setValue(N){this.control.setValue(N)}onSubmit(N){return this.submitted=!0,it(this.form,this._directives),this.ngSubmit.emit(N),!1}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(N){return N.pop(),N.length?this.form.get(N):this.form}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(We,10),D.Y36(Ut,10))},X.\u0275dir=D.lG2({type:X,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(N,Se){1&N&&D.NdJ("submit",function(Fn){return Se.onSubmit(Fn)})("reset",function(){return Se.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([wr]),D.qOj]}),X})();const qo={provide:zn,useExisting:(0,D.Gpc)(()=>Yr)},Pr=(()=>Promise.resolve(null))();let Yr=(()=>{class X extends zn{constructor(N,Se,Lt,Fn){super(),this.control=new pi,this._registered=!1,this.update=new D.vpe,this._parent=N,this._setValidators(Se),this._setAsyncValidators(Lt),this.valueAccessor=function J(X,q){if(!q)return null;let N,Se,Lt;return Array.isArray(q),q.forEach(Fn=>{Fn.constructor===Ye?N=Fn:function St(X){return Object.getPrototypeOf(X.constructor)===Oe}(Fn)?Se=Fn:Lt=Fn}),Lt||Se||N||null}(0,Fn)}ngOnChanges(N){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in N&&this._updateDisabled(N),function tr(X,q){if(!X.hasOwnProperty("model"))return!1;const N=X.model;return!!N.isFirstChange()||!Object.is(q,N.currentValue)}(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function pn(X,q){return[...q.path,X]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Pr.then(()=>{this.control.setValue(N,{emitViewToModelChange:!1})})}_updateDisabled(N){const Se=N.isDisabled.currentValue,Lt=""===Se||Se&&"false"!==Se;Pr.then(()=>{Lt&&!this.control.disabled?this.control.disable():!Lt&&this.control.disabled&&this.control.enable()})}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(Jn,9),D.Y36(We,10),D.Y36(Ut,10),D.Y36(Le,10))},X.\u0275dir=D.lG2({type:X,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[D._Bn([qo]),D.qOj,D.TTD]}),X})(),is=(()=>{class X{}return X.\u0275fac=function(N){return new(N||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({}),X})();const Ns={provide:Jn,useExisting:(0,D.Gpc)(()=>Ms)};let Ms=(()=>{class X extends Jn{constructor(N,Se){super(),this.validators=N,this.asyncValidators=Se,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.vpe,this._setValidators(N),this._setAsyncValidators(Se)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const Se=this.form.get(N.path);return qt(Se,N),Se.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),Se}getControl(N){return this.form.get(N.path)}removeControl(N){Ai(N.control||null,N,!1),F(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,Se){this.form.get(N.path).setValue(Se)}onSubmit(N){return this.submitted=!0,it(this.form,this.directives),this.ngSubmit.emit(N),!1}onReset(){this.resetForm()}resetForm(N){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const Se=N.control,Lt=this.form.get(N.path);Se!==Lt&&(Ai(Se||null,N),an(Lt)&&(qt(Lt,N),N.control=Lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const Se=this.form.get(N.path);Pt(Se,N),Se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const Se=this.form.get(N.path);Se&&function fn(X,q){return pt(X,q)}(Se,N)&&Se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bt(this.form,this),this._oldForm&&pt(this._oldForm,this)}_checkFormPresent(){}}return X.\u0275fac=function(N){return new(N||X)(D.Y36(We,10),D.Y36(Ut,10))},X.\u0275dir=D.lG2({type:X,selectors:[["","formGroup",""]],hostBindings:function(N,Se){1&N&&D.NdJ("submit",function(Fn){return Se.onSubmit(Fn)})("reset",function(){return Se.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([Ns]),D.qOj,D.TTD]}),X})();const Vs={provide:We,useExisting:(0,D.Gpc)(()=>ls),multi:!0},ho={provide:We,useExisting:(0,D.Gpc)(()=>As),multi:!0};let ls=(()=>{class X{constructor(){this._required=!1}get required(){return this._required}set required(N){this._required=null!=N&&!1!==N&&"false"!=`${N}`,this._onChange&&this._onChange()}validate(N){return this.required?ot(N):null}registerOnValidatorChange(N){this._onChange=N}}return X.\u0275fac=function(N){return new(N||X)},X.\u0275dir=D.lG2({type:X,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(N,Se){2&N&&D.uIk("required",Se.required?"":null)},inputs:{required:"required"},features:[D._Bn([Vs])]}),X})(),As=(()=>{class X extends ls{validate(N){return this.required?nn(N):null}}return X.\u0275fac=function(){let q;return function(Se){return(q||(q=D.n5z(X)))(Se||X)}}(),X.\u0275dir=D.lG2({type:X,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(N,Se){2&N&&D.uIk("required",Se.required?"":null)},features:[D._Bn([ho]),D.qOj]}),X})(),cn=(()=>{class X{}return X.\u0275fac=function(N){return new(N||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({imports:[[is]]}),X})(),Hn=(()=>{class X{}return X.\u0275fac=function(N){return new(N||X)},X.\u0275mod=D.oAB({type:X}),X.\u0275inj=D.cJS({imports:[cn]}),X})()},7423:(Sn,wt,V)=>{"use strict";V.d(wt,{zs:()=>Be,lW:()=>He,ot:()=>gt});var D=V(5e3),l=V(508),W=V(6360),f=V(5664);const je=["mat-button",""],qe=["*"],he=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ze=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(Ye){this._elementRef=Ye}})));let He=(()=>{class Ye extends ze{constructor(bt,We,Ut){super(bt),this._focusMonitor=We,this._animationMode=Ut,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const jt of he)this._hasHostAttributes(jt)&&this._getHostElement().classList.add(jt);bt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(bt,We){bt?this._focusMonitor.focusVia(this._getHostElement(),bt,We):this._getHostElement().focus(We)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...bt){return bt.some(We=>this._getHostElement().hasAttribute(We))}}return Ye.\u0275fac=function(bt){return new(bt||Ye)(D.Y36(D.SBq),D.Y36(f.tE),D.Y36(W.Qb,8))},Ye.\u0275cmp=D.Xpm({type:Ye,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(bt,We){if(1&bt&&D.Gf(l.wG,5),2&bt){let Ut;D.iGM(Ut=D.CRH())&&(We.ripple=Ut.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(bt,We){2&bt&&(D.uIk("disabled",We.disabled||null),D.ekj("_mat-animation-noopable","NoopAnimations"===We._animationMode)("mat-button-disabled",We.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[D.qOj],attrs:je,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(bt,We){1&bt&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1),D._UZ(3,"span",2)),2&bt&&(D.xp6(2),D.ekj("mat-button-ripple-round",We.isRoundButton||We.isIconButton),D.Q6J("matRippleDisabled",We._isRippleDisabled())("matRippleCentered",We.isIconButton)("matRippleTrigger",We._getHostElement()))},directives:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ye})(),Be=(()=>{class Ye extends He{constructor(bt,We,Ut,jt){super(We,bt,Ut),this._ngZone=jt,this._haltDisabledEvents=un=>{this.disabled&&(un.preventDefault(),un.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return Ye.\u0275fac=function(bt){return new(bt||Ye)(D.Y36(f.tE),D.Y36(D.SBq),D.Y36(W.Qb,8),D.Y36(D.R0b,8))},Ye.\u0275cmp=D.Xpm({type:Ye,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(bt,We){2&bt&&(D.uIk("tabindex",We.disabled?-1:We.tabIndex||0)("disabled",We.disabled||null)("aria-disabled",We.disabled.toString()),D.ekj("_mat-animation-noopable","NoopAnimations"===We._animationMode)("mat-button-disabled",We.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[D.qOj],attrs:je,ngContentSelectors:qe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(bt,We){1&bt&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1),D._UZ(3,"span",2)),2&bt&&(D.xp6(2),D.ekj("mat-button-ripple-round",We.isRoundButton||We.isIconButton),D.Q6J("matRippleDisabled",We._isRippleDisabled())("matRippleCentered",We.isIconButton)("matRippleTrigger",We._getHostElement()))},directives:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ye})(),gt=(()=>{class Ye{}return Ye.\u0275fac=function(bt){return new(bt||Ye)},Ye.\u0275mod=D.oAB({type:Ye}),Ye.\u0275inj=D.cJS({imports:[[l.si,l.BQ],l.BQ]}),Ye})()},508:(Sn,wt,V)=>{"use strict";V.d(wt,{rD:()=>ft,K7:()=>_n,HF:()=>tt,BQ:()=>ot,X2:()=>Ft,uc:()=>zn,ey:()=>qt,Ng:()=>Ln,nP:()=>ie,us:()=>fe,wG:()=>R,si:()=>B,CB:()=>Ai,jH:()=>Qn,pj:()=>yt,Kr:()=>ct,Id:()=>st,FD:()=>Xt,dB:()=>Ct,sb:()=>Tt,E0:()=>on});var D=V(5e3),l=V(226),f=V(9808),je=V(925),qe=V(5664),Oe=V(3191),Le=V(7579),he=V(8306),ze=V(8675),He=V(6360),Be=V(1159);function et(Bt,pt){if(1&Bt&&D._UZ(0,"mat-pseudo-checkbox",4),2&Bt){const Ce=D.oxw();D.Q6J("state",Ce.selected?"checked":"unchecked")("disabled",Ce.disabled)}}function bt(Bt,pt){if(1&Bt&&(D.TgZ(0,"span",5),D._uU(1),D.qZA()),2&Bt){const Ce=D.oxw();D.xp6(1),D.hij("(",Ce.group.label,")")}}const We=["*"],ke=new D.OlP("mat-sanity-checks",{providedIn:"root",factory:function Dt(){return!0}});let ot=(()=>{class Bt{constructor(Ce,Ae,ye){this._sanityChecks=Ae,this._document=ye,this._hasDoneGlobalChecks=!1,Ce._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Ce){return!(0,je.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Ce])}}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)(D.LFG(qe.qm),D.LFG(ke,8),D.LFG(f.K0))},Bt.\u0275mod=D.oAB({type:Bt}),Bt.\u0275inj=D.cJS({imports:[[l.vT],l.vT]}),Bt})();function st(Bt){return class extends Bt{constructor(...pt){super(...pt),this._disabled=!1}get disabled(){return this._disabled}set disabled(pt){this._disabled=(0,Oe.Ig)(pt)}}}function yt(Bt,pt){return class extends Bt{constructor(...Ce){super(...Ce),this.defaultColor=pt,this.color=pt}get color(){return this._color}set color(Ce){const Ae=Ce||this.defaultColor;Ae!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Ae&&this._elementRef.nativeElement.classList.add(`mat-${Ae}`),this._color=Ae)}}}function ct(Bt){return class extends Bt{constructor(...pt){super(...pt),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(pt){this._disableRipple=(0,Oe.Ig)(pt)}}}function Tt(Bt,pt=0){return class extends Bt{constructor(...Ce){super(...Ce),this._tabIndex=pt,this.defaultTabIndex=pt}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Ce){this._tabIndex=null!=Ce?(0,Oe.su)(Ce):this.defaultTabIndex}}}function Xt(Bt){return class extends Bt{constructor(...pt){super(...pt),this.stateChanges=new Le.x,this.errorState=!1}updateErrorState(){const pt=this.errorState,lt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);lt!==pt&&(this.errorState=lt,this.stateChanges.next())}}}function Ct(Bt){return class extends Bt{constructor(...pt){super(...pt),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new he.y(Ce=>{this._isInitialized?this._notifySubscriber(Ce):this._pendingSubscribers.push(Ce)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(pt){pt.next(),pt.complete()}}}let ft=(()=>{class Bt{isErrorState(Ce,Ae){return!!(Ce&&Ce.invalid&&(Ce.touched||Ae&&Ae.submitted))}}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275prov=D.Yz7({token:Bt,factory:Bt.\u0275fac,providedIn:"root"}),Bt})(),Ft=(()=>{class Bt{}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275dir=D.lG2({type:Bt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Bt})();function on(Bt,pt,Ce="mat"){Bt.changes.pipe((0,ze.O)(Bt)).subscribe(({length:Ae})=>{gn(pt,`${Ce}-2-line`,!1),gn(pt,`${Ce}-3-line`,!1),gn(pt,`${Ce}-multi-line`,!1),2===Ae||3===Ae?gn(pt,`${Ce}-${Ae}-line`,!0):Ae>3&&gn(pt,`${Ce}-multi-line`,!0)})}function gn(Bt,pt,Ce){Bt.nativeElement.classList.toggle(pt,Ce)}let zn=(()=>{class Bt{}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275mod=D.oAB({type:Bt}),Bt.\u0275inj=D.cJS({imports:[[ot],ot]}),Bt})();class Jn{constructor(pt,Ce,Ae){this._renderer=pt,this.element=Ce,this.config=Ae,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Pi={enterDuration:225,exitDuration:150},sr=(0,je.i$)({passive:!0}),Kn=["mousedown","touchstart"],ri=["mouseup","mouseleave","touchend","touchcancel"];class Zn{constructor(pt,Ce,Ae,ye){this._target=pt,this._ngZone=Ce,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,ye.isBrowser&&(this._containerElement=(0,Oe.fI)(Ae))}fadeInRipple(pt,Ce,Ae={}){const ye=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),lt=Object.assign(Object.assign({},Pi),Ae.animation);Ae.centered&&(pt=ye.left+ye.width/2,Ce=ye.top+ye.height/2);const Pt=Ae.radius||function $(Bt,pt,Ce){const Ae=Math.max(Math.abs(Bt-Ce.left),Math.abs(Bt-Ce.right)),ye=Math.max(Math.abs(pt-Ce.top),Math.abs(pt-Ce.bottom));return Math.sqrt(Ae*Ae+ye*ye)}(pt,Ce,ye),fn=pt-ye.left,bi=Ce-ye.top,Ui=lt.enterDuration,tr=document.createElement("div");tr.classList.add("mat-ripple-element"),tr.style.left=fn-Pt+"px",tr.style.top=bi-Pt+"px",tr.style.height=2*Pt+"px",tr.style.width=2*Pt+"px",null!=Ae.color&&(tr.style.backgroundColor=Ae.color),tr.style.transitionDuration=`${Ui}ms`,this._containerElement.appendChild(tr),function ht(Bt){window.getComputedStyle(Bt).getPropertyValue("opacity")}(tr),tr.style.transform="scale(1)";const St=new Jn(this,tr,Ae);return St.state=0,this._activeRipples.add(St),Ae.persistent||(this._mostRecentTransientRipple=St),this._runTimeoutOutsideZone(()=>{const it=St===this._mostRecentTransientRipple;St.state=1,!Ae.persistent&&(!it||!this._isPointerDown)&&St.fadeOut()},Ui),St}fadeOutRipple(pt){const Ce=this._activeRipples.delete(pt);if(pt===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Ce)return;const Ae=pt.element,ye=Object.assign(Object.assign({},Pi),pt.config.animation);Ae.style.transitionDuration=`${ye.exitDuration}ms`,Ae.style.opacity="0",pt.state=2,this._runTimeoutOutsideZone(()=>{pt.state=3,Ae.remove()},ye.exitDuration)}fadeOutAll(){this._activeRipples.forEach(pt=>pt.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(pt=>{pt.config.persistent||pt.fadeOut()})}setupTriggerEvents(pt){const Ce=(0,Oe.fI)(pt);!Ce||Ce===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Ce,this._registerEvents(Kn))}handleEvent(pt){"mousedown"===pt.type?this._onMousedown(pt):"touchstart"===pt.type?this._onTouchStart(pt):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(ri),this._pointerUpEventsRegistered=!0)}_onMousedown(pt){const Ce=(0,qe.X6)(pt),Ae=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Ce&&!Ae&&(this._isPointerDown=!0,this.fadeInRipple(pt.clientX,pt.clientY,this._target.rippleConfig))}_onTouchStart(pt){if(!this._target.rippleDisabled&&!(0,qe.yG)(pt)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Ce=pt.changedTouches;for(let Ae=0;Ae<Ce.length;Ae++)this.fadeInRipple(Ce[Ae].clientX,Ce[Ae].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(pt=>{!pt.config.persistent&&(1===pt.state||pt.config.terminateOnPointerUp&&0===pt.state)&&pt.fadeOut()}))}_runTimeoutOutsideZone(pt,Ce=0){this._ngZone.runOutsideAngular(()=>setTimeout(pt,Ce))}_registerEvents(pt){this._ngZone.runOutsideAngular(()=>{pt.forEach(Ce=>{this._triggerElement.addEventListener(Ce,this,sr)})})}_removeTriggerEvents(){this._triggerElement&&(Kn.forEach(pt=>{this._triggerElement.removeEventListener(pt,this,sr)}),this._pointerUpEventsRegistered&&ri.forEach(pt=>{this._triggerElement.removeEventListener(pt,this,sr)}))}}const U=new D.OlP("mat-ripple-global-options");let R=(()=>{class Bt{constructor(Ce,Ae,ye,lt,Pt){this._elementRef=Ce,this._animationMode=Pt,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=lt||{},this._rippleRenderer=new Zn(this,Ae,Ce,ye)}get disabled(){return this._disabled}set disabled(Ce){Ce&&this.fadeOutAllNonPersistent(),this._disabled=Ce,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Ce){this._trigger=Ce,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Ce,Ae=0,ye){return"number"==typeof Ce?this._rippleRenderer.fadeInRipple(Ce,Ae,Object.assign(Object.assign({},this.rippleConfig),ye)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Ce))}}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)(D.Y36(D.SBq),D.Y36(D.R0b),D.Y36(je.t4),D.Y36(U,8),D.Y36(He.Qb,8))},Bt.\u0275dir=D.lG2({type:Bt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Ce,Ae){2&Ce&&D.ekj("mat-ripple-unbounded",Ae.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Bt})(),B=(()=>{class Bt{}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275mod=D.oAB({type:Bt}),Bt.\u0275inj=D.cJS({imports:[[ot,je.ud],ot]}),Bt})(),ie=(()=>{class Bt{constructor(Ce){this._animationMode=Ce,this.state="unchecked",this.disabled=!1}}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)(D.Y36(He.Qb,8))},Bt.\u0275cmp=D.Xpm({type:Bt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Ce,Ae){2&Ce&&D.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Ae.state)("mat-pseudo-checkbox-checked","checked"===Ae.state)("mat-pseudo-checkbox-disabled",Ae.disabled)("_mat-animation-noopable","NoopAnimations"===Ae._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Ce,Ae){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Bt})(),fe=(()=>{class Bt{}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275mod=D.oAB({type:Bt}),Bt.\u0275inj=D.cJS({imports:[[ot]]}),Bt})();const tt=new D.OlP("MAT_OPTION_PARENT_COMPONENT"),_n=new D.OlP("MatOptgroup");let yi=0;class en{constructor(pt,Ce=!1){this.source=pt,this.isUserInput=Ce}}let pn=(()=>{class Bt{constructor(Ce,Ae,ye,lt){this._element=Ce,this._changeDetectorRef=Ae,this._parent=ye,this.group=lt,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+yi++,this.onSelectionChange=new D.vpe,this._stateChanges=new Le.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Ce){this._disabled=(0,Oe.Ig)(Ce)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Ce,Ae){const ye=this._getHostElement();"function"==typeof ye.focus&&ye.focus(Ae)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Ce){(Ce.keyCode===Be.K5||Ce.keyCode===Be.L_)&&!(0,Be.Vb)(Ce)&&(this._selectViaInteraction(),Ce.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Ce=this.viewValue;Ce!==this._mostRecentViewValue&&(this._mostRecentViewValue=Ce,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Ce=!1){this.onSelectionChange.emit(new en(this,Ce))}}return Bt.\u0275fac=function(Ce){D.$Z()},Bt.\u0275dir=D.lG2({type:Bt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Bt})(),qt=(()=>{class Bt extends pn{constructor(Ce,Ae,ye,lt){super(Ce,Ae,ye,lt)}}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)(D.Y36(D.SBq),D.Y36(D.sBO),D.Y36(tt,8),D.Y36(_n,8))},Bt.\u0275cmp=D.Xpm({type:Bt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Ce,Ae){1&Ce&&D.NdJ("click",function(){return Ae._selectViaInteraction()})("keydown",function(lt){return Ae._handleKeydown(lt)}),2&Ce&&(D.Ikx("id",Ae.id),D.uIk("tabindex",Ae._getTabIndex())("aria-selected",Ae._getAriaSelected())("aria-disabled",Ae.disabled.toString()),D.ekj("mat-selected",Ae.selected)("mat-option-multiple",Ae.multiple)("mat-active",Ae.active)("mat-option-disabled",Ae.disabled))},exportAs:["matOption"],features:[D.qOj],ngContentSelectors:We,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Ce,Ae){1&Ce&&(D.F$t(),D.YNc(0,et,1,2,"mat-pseudo-checkbox",0),D.TgZ(1,"span",1),D.Hsn(2),D.qZA(),D.YNc(3,bt,2,1,"span",2),D._UZ(4,"div",3)),2&Ce&&(D.Q6J("ngIf",Ae.multiple),D.xp6(3),D.Q6J("ngIf",Ae.group&&Ae.group._inert),D.xp6(1),D.Q6J("matRippleTrigger",Ae._getHostElement())("matRippleDisabled",Ae.disabled||Ae.disableRipple))},directives:[ie,f.O5,R],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Bt})();function Ai(Bt,pt,Ce){if(Ce.length){let Ae=pt.toArray(),ye=Ce.toArray(),lt=0;for(let Pt=0;Pt<Bt+1;Pt++)Ae[Pt].group&&Ae[Pt].group===ye[lt]&&lt++;return lt}return 0}function Qn(Bt,pt,Ce,Ae){return Bt<Ce?Bt:Bt+pt>Ce+Ae?Math.max(0,Bt-Ae+pt):Ce}let Ln=(()=>{class Bt{}return Bt.\u0275fac=function(Ce){return new(Ce||Bt)},Bt.\u0275mod=D.oAB({type:Bt}),Bt.\u0275inj=D.cJS({imports:[[B,f.ez,ot,fe]]}),Bt})()},7322:(Sn,wt,V)=>{"use strict";V.d(wt,{G_:()=>ri,KE:()=>Zn,Eo:()=>Dn,lN:()=>ht,R9:()=>zn});var D=V(7144),l=V(9808),W=V(5e3),f=V(508),je=V(3191),qe=V(7579),Oe=V(6451),Le=V(4968),he=V(8675),ze=V(2722),He=V(5698),Be=V(1777),gt=V(6360),Ye=V(226),et=V(925);const bt=["connectionContainer"],We=["inputContainer"],Ut=["label"];function jt($,U){1&$&&(W.ynx(0),W.TgZ(1,"div",14),W._UZ(2,"div",15),W._UZ(3,"div",16),W._UZ(4,"div",17),W.qZA(),W.TgZ(5,"div",18),W._UZ(6,"div",15),W._UZ(7,"div",16),W._UZ(8,"div",17),W.qZA(),W.BQk())}function un($,U){if(1&$){const R=W.EpF();W.TgZ(0,"div",19),W.NdJ("cdkObserveContent",function(){return W.CHM(R),W.oxw().updateOutlineGap()}),W.Hsn(1,1),W.qZA()}if(2&$){const R=W.oxw();W.Q6J("cdkObserveContentDisabled","outline"!=R.appearance)}}function Dt($,U){if(1&$&&(W.ynx(0),W.Hsn(1,2),W.TgZ(2,"span"),W._uU(3),W.qZA(),W.BQk()),2&$){const R=W.oxw(2);W.xp6(3),W.Oqu(R._control.placeholder)}}function ke($,U){1&$&&W.Hsn(0,3,["*ngSwitchCase","true"])}function ot($,U){1&$&&(W.TgZ(0,"span",23),W._uU(1," *"),W.qZA())}function nn($,U){if(1&$){const R=W.EpF();W.TgZ(0,"label",20,21),W.NdJ("cdkObserveContent",function(){return W.CHM(R),W.oxw().updateOutlineGap()}),W.YNc(2,Dt,4,1,"ng-container",12),W.YNc(3,ke,1,0,"ng-content",12),W.YNc(4,ot,2,0,"span",22),W.qZA()}if(2&$){const R=W.oxw();W.ekj("mat-empty",R._control.empty&&!R._shouldAlwaysFloat())("mat-form-field-empty",R._control.empty&&!R._shouldAlwaysFloat())("mat-accent","accent"==R.color)("mat-warn","warn"==R.color),W.Q6J("cdkObserveContentDisabled","outline"!=R.appearance)("id",R._labelId)("ngSwitch",R._hasLabel()),W.uIk("for",R._control.id)("aria-owns",R._control.id),W.xp6(2),W.Q6J("ngSwitchCase",!1),W.xp6(1),W.Q6J("ngSwitchCase",!0),W.xp6(1),W.Q6J("ngIf",!R.hideRequiredMarker&&R._control.required&&!R._control.disabled)}}function zt($,U){1&$&&(W.TgZ(0,"div",24),W.Hsn(1,4),W.qZA())}function tn($,U){if(1&$&&(W.TgZ(0,"div",25),W._UZ(1,"span",26),W.qZA()),2&$){const R=W.oxw();W.xp6(1),W.ekj("mat-accent","accent"==R.color)("mat-warn","warn"==R.color)}}function st($,U){if(1&$&&(W.TgZ(0,"div"),W.Hsn(1,5),W.qZA()),2&$){const R=W.oxw();W.Q6J("@transitionMessages",R._subscriptAnimationState)}}function yt($,U){if(1&$&&(W.TgZ(0,"div",30),W._uU(1),W.qZA()),2&$){const R=W.oxw(2);W.Q6J("id",R._hintLabelId),W.xp6(1),W.Oqu(R.hintLabel)}}function ct($,U){if(1&$&&(W.TgZ(0,"div",27),W.YNc(1,yt,2,2,"div",28),W.Hsn(2,6),W._UZ(3,"div",29),W.Hsn(4,7),W.qZA()),2&$){const R=W.oxw();W.Q6J("@transitionMessages",R._subscriptAnimationState),W.xp6(1),W.Q6J("ngIf",R.hintLabel)}}const Tt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Xt=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],vn=new W.OlP("MatError"),zi={transitionMessages:(0,Be.X$)("transitionMessages",[(0,Be.SB)("enter",(0,Be.oB)({opacity:1,transform:"translateY(0%)"})),(0,Be.eR)("void => enter",[(0,Be.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Be.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Dn=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=W.lG2({type:$}),$})();const _i=new W.OlP("MatHint");let ii=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=W.lG2({type:$,selectors:[["mat-label"]]}),$})(),ft=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=W.lG2({type:$,selectors:[["mat-placeholder"]]}),$})();const Ft=new W.OlP("MatPrefix"),gn=new W.OlP("MatSuffix");let zn=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=W.lG2({type:$,selectors:[["","matSuffix",""]],features:[W._Bn([{provide:gn,useExisting:$}])]}),$})(),Jn=0;const sr=(0,f.pj)(class{constructor($){this._elementRef=$}},"primary"),Kn=new W.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ri=new W.OlP("MatFormField");let Zn=(()=>{class $ extends sr{constructor(R,B,ie,fe,tt,It,_t){super(R),this._changeDetectorRef=B,this._dir=ie,this._defaults=fe,this._platform=tt,this._ngZone=It,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new qe.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Jn++,this._labelId="mat-form-field-label-"+Jn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_t,this.appearance=fe&&fe.appearance?fe.appearance:"legacy",this._hideRequiredMarker=!(!fe||null==fe.hideRequiredMarker)&&fe.hideRequiredMarker}get appearance(){return this._appearance}set appearance(R){const B=this._appearance;this._appearance=R||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&B!==R&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(R){this._hideRequiredMarker=(0,je.Ig)(R)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(R){this._hintLabel=R,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(R){R!==this._floatLabel&&(this._floatLabel=R||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(R){this._explicitFormFieldControl=R}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const R=this._control;R.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${R.controlType}`),R.stateChanges.pipe((0,he.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),R.ngControl&&R.ngControl.valueChanges&&R.ngControl.valueChanges.pipe((0,ze.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,ze.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Oe.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,he.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,he.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,ze.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(R){const B=this._control?this._control.ngControl:null;return B&&B[R]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,Le.R)(this._label.nativeElement,"transitionend").pipe((0,He.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let R=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&R.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const B=this._hintChildren?this._hintChildren.find(fe=>"start"===fe.align):null,ie=this._hintChildren?this._hintChildren.find(fe=>"end"===fe.align):null;B?R.push(B.id):this._hintLabel&&R.push(this._hintLabelId),ie&&R.push(ie.id)}else this._errorChildren&&R.push(...this._errorChildren.map(B=>B.id));this._control.setDescribedByIds(R)}}_validateControlChild(){}updateOutlineGap(){const R=this._label?this._label.nativeElement:null,B=this._connectionContainerRef.nativeElement,ie=".mat-form-field-outline-start",fe=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!R||!R.children.length||!R.textContent.trim()){const _n=B.querySelectorAll(`${ie}, ${fe}`);for(let Vn=0;Vn<_n.length;Vn++)_n[Vn].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let tt=0,It=0;const _t=B.querySelectorAll(ie),mn=B.querySelectorAll(fe);if(this._label&&this._label.nativeElement.children.length){const _n=B.getBoundingClientRect();if(0===_n.width&&0===_n.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Vn=this._getStartEnd(_n),yi=R.children,en=this._getStartEnd(yi[0].getBoundingClientRect());let pn=0;for(let qt=0;qt<yi.length;qt++)pn+=yi[qt].offsetWidth;tt=Math.abs(en-Vn)-5,It=pn>0?.75*pn+10:0}for(let _n=0;_n<_t.length;_n++)_t[_n].style.width=`${tt}px`;for(let _n=0;_n<mn.length;_n++)mn[_n].style.width=`${It}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(R){return this._dir&&"rtl"===this._dir.value?R.right:R.left}_isAttachedToDOM(){const R=this._elementRef.nativeElement;if(R.getRootNode){const B=R.getRootNode();return B&&B!==R}return document.documentElement.contains(R)}}return $.\u0275fac=function(R){return new(R||$)(W.Y36(W.SBq),W.Y36(W.sBO),W.Y36(Ye.Is,8),W.Y36(Kn,8),W.Y36(et.t4),W.Y36(W.R0b),W.Y36(gt.Qb,8))},$.\u0275cmp=W.Xpm({type:$,selectors:[["mat-form-field"]],contentQueries:function(R,B,ie){if(1&R&&(W.Suo(ie,Dn,5),W.Suo(ie,Dn,7),W.Suo(ie,ii,5),W.Suo(ie,ii,7),W.Suo(ie,ft,5),W.Suo(ie,vn,5),W.Suo(ie,_i,5),W.Suo(ie,Ft,5),W.Suo(ie,gn,5)),2&R){let fe;W.iGM(fe=W.CRH())&&(B._controlNonStatic=fe.first),W.iGM(fe=W.CRH())&&(B._controlStatic=fe.first),W.iGM(fe=W.CRH())&&(B._labelChildNonStatic=fe.first),W.iGM(fe=W.CRH())&&(B._labelChildStatic=fe.first),W.iGM(fe=W.CRH())&&(B._placeholderChild=fe.first),W.iGM(fe=W.CRH())&&(B._errorChildren=fe),W.iGM(fe=W.CRH())&&(B._hintChildren=fe),W.iGM(fe=W.CRH())&&(B._prefixChildren=fe),W.iGM(fe=W.CRH())&&(B._suffixChildren=fe)}},viewQuery:function(R,B){if(1&R&&(W.Gf(bt,7),W.Gf(We,5),W.Gf(Ut,5)),2&R){let ie;W.iGM(ie=W.CRH())&&(B._connectionContainerRef=ie.first),W.iGM(ie=W.CRH())&&(B._inputContainerRef=ie.first),W.iGM(ie=W.CRH())&&(B._label=ie.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(R,B){2&R&&W.ekj("mat-form-field-appearance-standard","standard"==B.appearance)("mat-form-field-appearance-fill","fill"==B.appearance)("mat-form-field-appearance-outline","outline"==B.appearance)("mat-form-field-appearance-legacy","legacy"==B.appearance)("mat-form-field-invalid",B._control.errorState)("mat-form-field-can-float",B._canLabelFloat())("mat-form-field-should-float",B._shouldLabelFloat())("mat-form-field-has-label",B._hasFloatingLabel())("mat-form-field-hide-placeholder",B._hideControlPlaceholder())("mat-form-field-disabled",B._control.disabled)("mat-form-field-autofilled",B._control.autofilled)("mat-focused",B._control.focused)("ng-untouched",B._shouldForward("untouched"))("ng-touched",B._shouldForward("touched"))("ng-pristine",B._shouldForward("pristine"))("ng-dirty",B._shouldForward("dirty"))("ng-valid",B._shouldForward("valid"))("ng-invalid",B._shouldForward("invalid"))("ng-pending",B._shouldForward("pending"))("_mat-animation-noopable",!B._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[W._Bn([{provide:ri,useExisting:$}]),W.qOj],ngContentSelectors:Xt,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(R,B){1&R&&(W.F$t(Tt),W.TgZ(0,"div",0),W.TgZ(1,"div",1,2),W.NdJ("click",function(fe){return B._control.onContainerClick&&B._control.onContainerClick(fe)}),W.YNc(3,jt,9,0,"ng-container",3),W.YNc(4,un,2,1,"div",4),W.TgZ(5,"div",5,6),W.Hsn(7),W.TgZ(8,"span",7),W.YNc(9,nn,5,16,"label",8),W.qZA(),W.qZA(),W.YNc(10,zt,2,0,"div",9),W.qZA(),W.YNc(11,tn,2,4,"div",10),W.TgZ(12,"div",11),W.YNc(13,st,2,1,"div",12),W.YNc(14,ct,5,2,"div",13),W.qZA(),W.qZA()),2&R&&(W.xp6(3),W.Q6J("ngIf","outline"==B.appearance),W.xp6(1),W.Q6J("ngIf",B._prefixChildren.length),W.xp6(5),W.Q6J("ngIf",B._hasFloatingLabel()),W.xp6(1),W.Q6J("ngIf",B._suffixChildren.length),W.xp6(1),W.Q6J("ngIf","outline"!=B.appearance),W.xp6(1),W.Q6J("ngSwitch",B._getDisplayedMessages()),W.xp6(1),W.Q6J("ngSwitchCase","error"),W.xp6(1),W.Q6J("ngSwitchCase","hint"))},directives:[l.O5,D.wD,l.RF,l.n9],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[zi.transitionMessages]},changeDetection:0}),$})(),ht=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275mod=W.oAB({type:$}),$.\u0275inj=W.cJS({imports:[[l.ez,f.BQ,D.Q8],f.BQ]}),$})()},3874:(Sn,wt,V)=>{"use strict";V.d(wt,{Hw:()=>ir,Ps:()=>_i,jv:()=>yt});var D=V(5e3),l=V(508),W=V(3191),f=V(9808),je=V(8306),qe=V(576),Le=V(9646),he=V(4128),ze=V(727),He=V(8505),Be=V(4004),gt=V(262),Ye=V(8746),et=V(3099),bt=V(5698),We=V(520),Ut=V(2313);const jt=["*"];let un;function ke(kn){var ii;return(null===(ii=function Dt(){if(void 0===un&&(un=null,"undefined"!=typeof window)){const kn=window;void 0!==kn.trustedTypes&&(un=kn.trustedTypes.createPolicy("angular#components",{createHTML:ii=>ii}))}return un}())||void 0===ii?void 0:ii.createHTML(kn))||kn}function ot(kn){return Error(`Unable to find icon with the name "${kn}"`)}function zt(kn){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${kn}".`)}function tn(kn){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${kn}".`)}class st{constructor(ii,ft,Ft){this.url=ii,this.svgText=ft,this.options=Ft}}let yt=(()=>{class kn{constructor(ft,Ft,on,gn){this._httpClient=ft,this._sanitizer=Ft,this._errorHandler=gn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=on}addSvgIcon(ft,Ft,on){return this.addSvgIconInNamespace("",ft,Ft,on)}addSvgIconLiteral(ft,Ft,on){return this.addSvgIconLiteralInNamespace("",ft,Ft,on)}addSvgIconInNamespace(ft,Ft,on,gn){return this._addSvgIconConfig(ft,Ft,new st(on,null,gn))}addSvgIconResolver(ft){return this._resolvers.push(ft),this}addSvgIconLiteralInNamespace(ft,Ft,on,gn){const zn=this._sanitizer.sanitize(D.q3G.HTML,on);if(!zn)throw tn(on);const Jn=ke(zn);return this._addSvgIconConfig(ft,Ft,new st("",Jn,gn))}addSvgIconSet(ft,Ft){return this.addSvgIconSetInNamespace("",ft,Ft)}addSvgIconSetLiteral(ft,Ft){return this.addSvgIconSetLiteralInNamespace("",ft,Ft)}addSvgIconSetInNamespace(ft,Ft,on){return this._addSvgIconSetConfig(ft,new st(Ft,null,on))}addSvgIconSetLiteralInNamespace(ft,Ft,on){const gn=this._sanitizer.sanitize(D.q3G.HTML,Ft);if(!gn)throw tn(Ft);const zn=ke(gn);return this._addSvgIconSetConfig(ft,new st("",zn,on))}registerFontClassAlias(ft,Ft=ft){return this._fontCssClassesByAlias.set(ft,Ft),this}classNameForFontAlias(ft){return this._fontCssClassesByAlias.get(ft)||ft}setDefaultFontSetClass(ft){return this._defaultFontSetClass=ft,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(ft){const Ft=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,ft);if(!Ft)throw zt(ft);const on=this._cachedIconsByUrl.get(Ft);return on?(0,Le.of)(Xt(on)):this._loadSvgIconFromConfig(new st(ft,null)).pipe((0,He.b)(gn=>this._cachedIconsByUrl.set(Ft,gn)),(0,Be.U)(gn=>Xt(gn)))}getNamedSvgIcon(ft,Ft=""){const on=Ct(Ft,ft);let gn=this._svgIconConfigs.get(on);if(gn)return this._getSvgFromConfig(gn);if(gn=this._getIconConfigFromResolvers(Ft,ft),gn)return this._svgIconConfigs.set(on,gn),this._getSvgFromConfig(gn);const zn=this._iconSetConfigs.get(Ft);return zn?this._getSvgFromIconSetConfigs(ft,zn):function Oe(kn,ii){const ft=(0,qe.m)(kn)?kn:()=>kn,Ft=on=>on.error(ft());return new je.y(ii?on=>ii.schedule(Ft,0,on):Ft)}(ot(on))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(ft){return ft.svgText?(0,Le.of)(Xt(this._svgElementFromConfig(ft))):this._loadSvgIconFromConfig(ft).pipe((0,Be.U)(Ft=>Xt(Ft)))}_getSvgFromIconSetConfigs(ft,Ft){const on=this._extractIconWithNameFromAnySet(ft,Ft);if(on)return(0,Le.of)(on);const gn=Ft.filter(zn=>!zn.svgText).map(zn=>this._loadSvgIconSetFromConfig(zn).pipe((0,gt.K)(Jn=>{const er=`Loading icon set URL: ${this._sanitizer.sanitize(D.q3G.RESOURCE_URL,zn.url)} failed: ${Jn.message}`;return this._errorHandler.handleError(new Error(er)),(0,Le.of)(null)})));return(0,he.D)(gn).pipe((0,Be.U)(()=>{const zn=this._extractIconWithNameFromAnySet(ft,Ft);if(!zn)throw ot(ft);return zn}))}_extractIconWithNameFromAnySet(ft,Ft){for(let on=Ft.length-1;on>=0;on--){const gn=Ft[on];if(gn.svgText&&gn.svgText.toString().indexOf(ft)>-1){const zn=this._svgElementFromConfig(gn),Jn=this._extractSvgIconFromSet(zn,ft,gn.options);if(Jn)return Jn}}return null}_loadSvgIconFromConfig(ft){return this._fetchIcon(ft).pipe((0,He.b)(Ft=>ft.svgText=Ft),(0,Be.U)(()=>this._svgElementFromConfig(ft)))}_loadSvgIconSetFromConfig(ft){return ft.svgText?(0,Le.of)(null):this._fetchIcon(ft).pipe((0,He.b)(Ft=>ft.svgText=Ft))}_extractSvgIconFromSet(ft,Ft,on){const gn=ft.querySelector(`[id="${Ft}"]`);if(!gn)return null;const zn=gn.cloneNode(!0);if(zn.removeAttribute("id"),"svg"===zn.nodeName.toLowerCase())return this._setSvgAttributes(zn,on);if("symbol"===zn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(zn),on);const Jn=this._svgElementFromString(ke("<svg></svg>"));return Jn.appendChild(zn),this._setSvgAttributes(Jn,on)}_svgElementFromString(ft){const Ft=this._document.createElement("DIV");Ft.innerHTML=ft;const on=Ft.querySelector("svg");if(!on)throw Error("<svg> tag not found");return on}_toSvgElement(ft){const Ft=this._svgElementFromString(ke("<svg></svg>")),on=ft.attributes;for(let gn=0;gn<on.length;gn++){const{name:zn,value:Jn}=on[gn];"id"!==zn&&Ft.setAttribute(zn,Jn)}for(let gn=0;gn<ft.childNodes.length;gn++)ft.childNodes[gn].nodeType===this._document.ELEMENT_NODE&&Ft.appendChild(ft.childNodes[gn].cloneNode(!0));return Ft}_setSvgAttributes(ft,Ft){return ft.setAttribute("fit",""),ft.setAttribute("height","100%"),ft.setAttribute("width","100%"),ft.setAttribute("preserveAspectRatio","xMidYMid meet"),ft.setAttribute("focusable","false"),Ft&&Ft.viewBox&&ft.setAttribute("viewBox",Ft.viewBox),ft}_fetchIcon(ft){var Ft;const{url:on,options:gn}=ft,zn=null!==(Ft=null==gn?void 0:gn.withCredentials)&&void 0!==Ft&&Ft;if(!this._httpClient)throw function nn(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==on)throw Error(`Cannot fetch icon from URL "${on}".`);const Jn=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,on);if(!Jn)throw zt(on);const Pi=this._inProgressUrlFetches.get(Jn);if(Pi)return Pi;const er=this._httpClient.get(Jn,{responseType:"text",withCredentials:zn}).pipe((0,Be.U)(sr=>ke(sr)),(0,Ye.x)(()=>this._inProgressUrlFetches.delete(Jn)),(0,et.B)());return this._inProgressUrlFetches.set(Jn,er),er}_addSvgIconConfig(ft,Ft,on){return this._svgIconConfigs.set(Ct(ft,Ft),on),this}_addSvgIconSetConfig(ft,Ft){const on=this._iconSetConfigs.get(ft);return on?on.push(Ft):this._iconSetConfigs.set(ft,[Ft]),this}_svgElementFromConfig(ft){if(!ft.svgElement){const Ft=this._svgElementFromString(ft.svgText);this._setSvgAttributes(Ft,ft.options),ft.svgElement=Ft}return ft.svgElement}_getIconConfigFromResolvers(ft,Ft){for(let on=0;on<this._resolvers.length;on++){const gn=this._resolvers[on](Ft,ft);if(gn)return vn(gn)?new st(gn.url,null,gn.options):new st(gn,null)}}}return kn.\u0275fac=function(ft){return new(ft||kn)(D.LFG(We.eN,8),D.LFG(Ut.H7),D.LFG(f.K0,8),D.LFG(D.qLn))},kn.\u0275prov=D.Yz7({token:kn,factory:kn.\u0275fac,providedIn:"root"}),kn})();function Xt(kn){return kn.cloneNode(!0)}function Ct(kn,ii){return kn+":"+ii}function vn(kn){return!(!kn.url||!kn.options)}const fi=(0,l.pj)(class{constructor(kn){this._elementRef=kn}}),zi=new D.OlP("mat-icon-location",{providedIn:"root",factory:function Dn(){const kn=(0,D.f3M)(f.K0),ii=kn?kn.location:null;return{getPathname:()=>ii?ii.pathname+ii.search:""}}}),Tn=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Ii=Tn.map(kn=>`[${kn}]`).join(", "),ci=/^url\(['"]?#(.*?)['"]?\)$/;let ir=(()=>{class kn extends fi{constructor(ft,Ft,on,gn,zn){super(ft),this._iconRegistry=Ft,this._location=gn,this._errorHandler=zn,this._inline=!1,this._currentIconFetch=ze.w0.EMPTY,on||ft.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(ft){this._inline=(0,W.Ig)(ft)}get svgIcon(){return this._svgIcon}set svgIcon(ft){ft!==this._svgIcon&&(ft?this._updateSvgIcon(ft):this._svgIcon&&this._clearSvgElement(),this._svgIcon=ft)}get fontSet(){return this._fontSet}set fontSet(ft){const Ft=this._cleanupFontValue(ft);Ft!==this._fontSet&&(this._fontSet=Ft,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(ft){const Ft=this._cleanupFontValue(ft);Ft!==this._fontIcon&&(this._fontIcon=Ft,this._updateFontIconClasses())}_splitIconName(ft){if(!ft)return["",""];const Ft=ft.split(":");switch(Ft.length){case 1:return["",Ft[0]];case 2:return Ft;default:throw Error(`Invalid icon name: "${ft}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const ft=this._elementsWithExternalReferences;if(ft&&ft.size){const Ft=this._location.getPathname();Ft!==this._previousPath&&(this._previousPath=Ft,this._prependPathToReferences(Ft))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(ft){this._clearSvgElement();const Ft=ft.querySelectorAll("style");for(let gn=0;gn<Ft.length;gn++)Ft[gn].textContent+=" ";const on=this._location.getPathname();this._previousPath=on,this._cacheChildrenWithExternalReferences(ft),this._prependPathToReferences(on),this._elementRef.nativeElement.appendChild(ft)}_clearSvgElement(){const ft=this._elementRef.nativeElement;let Ft=ft.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Ft--;){const on=ft.childNodes[Ft];(1!==on.nodeType||"svg"===on.nodeName.toLowerCase())&&on.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const ft=this._elementRef.nativeElement,Ft=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Ft!=this._previousFontSetClass&&(this._previousFontSetClass&&ft.classList.remove(this._previousFontSetClass),Ft&&ft.classList.add(Ft),this._previousFontSetClass=Ft),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&ft.classList.remove(this._previousFontIconClass),this.fontIcon&&ft.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(ft){return"string"==typeof ft?ft.trim().split(" ")[0]:ft}_prependPathToReferences(ft){const Ft=this._elementsWithExternalReferences;Ft&&Ft.forEach((on,gn)=>{on.forEach(zn=>{gn.setAttribute(zn.name,`url('${ft}#${zn.value}')`)})})}_cacheChildrenWithExternalReferences(ft){const Ft=ft.querySelectorAll(Ii),on=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let gn=0;gn<Ft.length;gn++)Tn.forEach(zn=>{const Jn=Ft[gn],Pi=Jn.getAttribute(zn),er=Pi?Pi.match(ci):null;if(er){let sr=on.get(Jn);sr||(sr=[],on.set(Jn,sr)),sr.push({name:zn,value:er[1]})}})}_updateSvgIcon(ft){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),ft){const[Ft,on]=this._splitIconName(ft);Ft&&(this._svgNamespace=Ft),on&&(this._svgName=on),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(on,Ft).pipe((0,bt.q)(1)).subscribe(gn=>this._setSvgElement(gn),gn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Ft}:${on}! ${gn.message}`))})}}}return kn.\u0275fac=function(ft){return new(ft||kn)(D.Y36(D.SBq),D.Y36(yt),D.$8M("aria-hidden"),D.Y36(zi),D.Y36(D.qLn))},kn.\u0275cmp=D.Xpm({type:kn,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(ft,Ft){2&ft&&(D.uIk("data-mat-icon-type",Ft._usingFontIcon()?"font":"svg")("data-mat-icon-name",Ft._svgName||Ft.fontIcon)("data-mat-icon-namespace",Ft._svgNamespace||Ft.fontSet),D.ekj("mat-icon-inline",Ft.inline)("mat-icon-no-color","primary"!==Ft.color&&"accent"!==Ft.color&&"warn"!==Ft.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[D.qOj],ngContentSelectors:jt,decls:1,vars:0,template:function(ft,Ft){1&ft&&(D.F$t(),D.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),kn})(),_i=(()=>{class kn{}return kn.\u0275fac=function(ft){return new(ft||kn)},kn.\u0275mod=D.oAB({type:kn}),kn.\u0275inj=D.cJS({imports:[[l.BQ],l.BQ]}),kn})()},4107:(Sn,wt,V)=>{"use strict";V.d(wt,{gD:()=>Kn,LD:()=>ri});var D=V(9776),l=V(9808),W=V(5e3),f=V(508),je=V(7322),qe=V(8962),Oe=V(5664),Le=V(3191),he=V(449),ze=V(1159),He=V(3075),Be=V(7579),gt=V(9770),Ye=V(6451),et=V(8675),bt=V(3900),We=V(5698),Ut=V(9300),jt=V(4004),un=V(1884),Dt=V(2722),ke=V(1777),ot=V(226);const nn=["trigger"],zt=["panel"];function tn(Zn,ht){if(1&Zn&&(W.TgZ(0,"span",8),W._uU(1),W.qZA()),2&Zn){const $=W.oxw();W.xp6(1),W.Oqu($.placeholder)}}function st(Zn,ht){if(1&Zn&&(W.TgZ(0,"span",12),W._uU(1),W.qZA()),2&Zn){const $=W.oxw(2);W.xp6(1),W.Oqu($.triggerValue)}}function yt(Zn,ht){1&Zn&&W.Hsn(0,0,["*ngSwitchCase","true"])}function ct(Zn,ht){if(1&Zn&&(W.TgZ(0,"span",9),W.YNc(1,st,2,1,"span",10),W.YNc(2,yt,1,0,"ng-content",11),W.qZA()),2&Zn){const $=W.oxw();W.Q6J("ngSwitch",!!$.customTrigger),W.xp6(2),W.Q6J("ngSwitchCase",!0)}}function Tt(Zn,ht){if(1&Zn){const $=W.EpF();W.TgZ(0,"div",13),W.TgZ(1,"div",14,15),W.NdJ("@transformPanel.done",function(R){return W.CHM($),W.oxw()._panelDoneAnimatingStream.next(R.toState)})("keydown",function(R){return W.CHM($),W.oxw()._handleKeydown(R)}),W.Hsn(3,1),W.qZA(),W.qZA()}if(2&Zn){const $=W.oxw();W.Q6J("@transformPanelWrap",void 0),W.xp6(1),W.Gre("mat-select-panel ",$._getPanelTheme(),""),W.Udp("transform-origin",$._transformOrigin)("font-size",$._triggerFontSize,"px"),W.Q6J("ngClass",$.panelClass)("@transformPanel",$.multiple?"showing-multiple":"showing"),W.uIk("id",$.id+"-panel")("aria-multiselectable",$.multiple)("aria-label",$.ariaLabel||null)("aria-labelledby",$._getPanelAriaLabelledby())}}const Xt=[[["mat-select-trigger"]],"*"],Ct=["mat-select-trigger","*"],vn={transformPanelWrap:(0,ke.X$)("transformPanelWrap",[(0,ke.eR)("* => void",(0,ke.IO)("@transformPanel",[(0,ke.pV)()],{optional:!0}))]),transformPanel:(0,ke.X$)("transformPanel",[(0,ke.SB)("void",(0,ke.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,ke.SB)("showing",(0,ke.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,ke.SB)("showing-multiple",(0,ke.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,ke.eR)("void => *",(0,ke.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,ke.eR)("* => void",(0,ke.jt)("100ms 25ms linear",(0,ke.oB)({opacity:0})))])};let Tn=0;const ft=new W.OlP("mat-select-scroll-strategy"),on=new W.OlP("MAT_SELECT_CONFIG"),gn={provide:ft,deps:[D.aV],useFactory:function Ft(Zn){return()=>Zn.scrollStrategies.reposition()}};class zn{constructor(ht,$){this.source=ht,this.value=$}}const Jn=(0,f.Kr)((0,f.sb)((0,f.Id)((0,f.FD)(class{constructor(Zn,ht,$,U,R){this._elementRef=Zn,this._defaultErrorStateMatcher=ht,this._parentForm=$,this._parentFormGroup=U,this.ngControl=R}})))),Pi=new W.OlP("MatSelectTrigger");let sr=(()=>{class Zn extends Jn{constructor($,U,R,B,ie,fe,tt,It,_t,mn,_n,Vn,yi,en){var pn,qt,Ai;super(ie,B,tt,It,mn),this._viewportRuler=$,this._changeDetectorRef=U,this._ngZone=R,this._dir=fe,this._parentFormField=_t,this._liveAnnouncer=yi,this._defaultOptions=en,this._panelOpen=!1,this._compareWith=(Qn,Ln)=>Qn===Ln,this._uid="mat-select-"+Tn++,this._triggerAriaLabelledBy=null,this._destroy=new Be.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Tn++,this._panelDoneAnimatingStream=new Be.x,this._overlayPanelClass=(null===(pn=this._defaultOptions)||void 0===pn?void 0:pn.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Ai=null===(qt=this._defaultOptions)||void 0===qt?void 0:qt.disableOptionCentering)&&void 0!==Ai&&Ai,this.ariaLabel="",this.optionSelectionChanges=(0,gt.P)(()=>{const Qn=this.options;return Qn?Qn.changes.pipe((0,et.O)(Qn),(0,bt.w)(()=>(0,Ye.T)(...Qn.map(Ln=>Ln.onSelectionChange)))):this._ngZone.onStable.pipe((0,We.q)(1),(0,bt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new W.vpe,this._openedStream=this.openedChange.pipe((0,Ut.h)(Qn=>Qn),(0,jt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Ut.h)(Qn=>!Qn),(0,jt.U)(()=>{})),this.selectionChange=new W.vpe,this.valueChange=new W.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==en?void 0:en.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=en.typeaheadDebounceInterval),this._scrollStrategyFactory=Vn,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(_n)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder($){this._placeholder=$,this.stateChanges.next()}get required(){var $,U,R,B;return null!==(B=null!==($=this._required)&&void 0!==$?$:null===(R=null===(U=this.ngControl)||void 0===U?void 0:U.control)||void 0===R?void 0:R.hasValidator(He.kI.required))&&void 0!==B&&B}set required($){this._required=(0,Le.Ig)($),this.stateChanges.next()}get multiple(){return this._multiple}set multiple($){this._multiple=(0,Le.Ig)($)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering($){this._disableOptionCentering=(0,Le.Ig)($)}get compareWith(){return this._compareWith}set compareWith($){this._compareWith=$,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value($){($!==this._value||this._multiple&&Array.isArray($))&&(this.options&&this._setSelectionByValue($),this._value=$)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval($){this._typeaheadDebounceInterval=(0,Le.su)($)}get id(){return this._id}set id($){this._id=$||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new he.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,un.x)(),(0,Dt.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Dt.R)(this._destroy)).subscribe($=>{$.added.forEach(U=>U.select()),$.removed.forEach(U=>U.deselect())}),this.options.changes.pipe((0,et.O)(null),(0,Dt.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const $=this._getTriggerAriaLabelledby();if($!==this._triggerAriaLabelledBy){const U=this._elementRef.nativeElement;this._triggerAriaLabelledBy=$,$?U.setAttribute("aria-labelledby",$):U.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges($){$.disabled&&this.stateChanges.next(),$.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue($){this.value=$}registerOnChange($){this._onChange=$}registerOnTouched($){this._onTouched=$}setDisabledState($){this.disabled=$,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var $,U;return this.multiple?(null===($=this._selectionModel)||void 0===$?void 0:$.selected)||[]:null===(U=this._selectionModel)||void 0===U?void 0:U.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const $=this._selectionModel.selected.map(U=>U.viewValue);return this._isRtl()&&$.reverse(),$.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown($){this.disabled||(this.panelOpen?this._handleOpenKeydown($):this._handleClosedKeydown($))}_handleClosedKeydown($){const U=$.keyCode,R=U===ze.JH||U===ze.LH||U===ze.oh||U===ze.SV,B=U===ze.K5||U===ze.L_,ie=this._keyManager;if(!ie.isTyping()&&B&&!(0,ze.Vb)($)||(this.multiple||$.altKey)&&R)$.preventDefault(),this.open();else if(!this.multiple){const fe=this.selected;ie.onKeydown($);const tt=this.selected;tt&&fe!==tt&&this._liveAnnouncer.announce(tt.viewValue,1e4)}}_handleOpenKeydown($){const U=this._keyManager,R=$.keyCode,B=R===ze.JH||R===ze.LH,ie=U.isTyping();if(B&&$.altKey)$.preventDefault(),this.close();else if(ie||R!==ze.K5&&R!==ze.L_||!U.activeItem||(0,ze.Vb)($))if(!ie&&this._multiple&&R===ze.A&&$.ctrlKey){$.preventDefault();const fe=this.options.some(tt=>!tt.disabled&&!tt.selected);this.options.forEach(tt=>{tt.disabled||(fe?tt.select():tt.deselect())})}else{const fe=U.activeItemIndex;U.onKeydown($),this._multiple&&B&&$.shiftKey&&U.activeItem&&U.activeItemIndex!==fe&&U.activeItem._selectViaInteraction()}else $.preventDefault(),U.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,We.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue($){if(this._selectionModel.selected.forEach(U=>U.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&$)Array.isArray($),$.forEach(U=>this._selectValue(U)),this._sortValues();else{const U=this._selectValue($);U?this._keyManager.updateActiveItem(U):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue($){const U=this.options.find(R=>{if(this._selectionModel.isSelected(R))return!1;try{return null!=R.value&&this._compareWith(R.value,$)}catch(B){return!1}});return U&&this._selectionModel.select(U),U}_initKeyManager(){this._keyManager=new Oe.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const $=(0,Ye.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Dt.R)($)).subscribe(U=>{this._onSelect(U.source,U.isUserInput),U.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Ye.T)(...this.options.map(U=>U._stateChanges)).pipe((0,Dt.R)($)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect($,U){const R=this._selectionModel.isSelected($);null!=$.value||this._multiple?(R!==$.selected&&($.selected?this._selectionModel.select($):this._selectionModel.deselect($)),U&&this._keyManager.setActiveItem($),this.multiple&&(this._sortValues(),U&&this.focus())):($.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges($.value)),R!==this._selectionModel.isSelected($)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const $=this.options.toArray();this._selectionModel.sort((U,R)=>this.sortComparator?this.sortComparator(U,R,$):$.indexOf(U)-$.indexOf(R)),this.stateChanges.next()}}_propagateChanges($){let U=null;U=this.multiple?this.selected.map(R=>R.value):this.selected?this.selected.value:$,this._value=U,this.valueChange.emit(U),this._onChange(U),this.selectionChange.emit(this._getChangeEvent(U)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var $;return!this._panelOpen&&!this.disabled&&(null===($=this.options)||void 0===$?void 0:$.length)>0}focus($){this._elementRef.nativeElement.focus($)}_getPanelAriaLabelledby(){var $;if(this.ariaLabel)return null;const U=null===($=this._parentFormField)||void 0===$?void 0:$.getLabelId();return this.ariaLabelledby?(U?U+" ":"")+this.ariaLabelledby:U}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var $;if(this.ariaLabel)return null;const U=null===($=this._parentFormField)||void 0===$?void 0:$.getLabelId();let R=(U?U+" ":"")+this._valueId;return this.ariaLabelledby&&(R+=" "+this.ariaLabelledby),R}_panelDoneAnimating($){this.openedChange.emit($)}setDescribedByIds($){this._ariaDescribedby=$.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Zn.\u0275fac=function($){return new($||Zn)(W.Y36(qe.rL),W.Y36(W.sBO),W.Y36(W.R0b),W.Y36(f.rD),W.Y36(W.SBq),W.Y36(ot.Is,8),W.Y36(He.F,8),W.Y36(He.sg,8),W.Y36(je.G_,8),W.Y36(He.a5,10),W.$8M("tabindex"),W.Y36(ft),W.Y36(Oe.Kd),W.Y36(on,8))},Zn.\u0275dir=W.lG2({type:Zn,viewQuery:function($,U){if(1&$&&(W.Gf(nn,5),W.Gf(zt,5),W.Gf(D.pI,5)),2&$){let R;W.iGM(R=W.CRH())&&(U.trigger=R.first),W.iGM(R=W.CRH())&&(U.panel=R.first),W.iGM(R=W.CRH())&&(U._overlayDir=R.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[W.qOj,W.TTD]}),Zn})(),Kn=(()=>{class Zn extends sr{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll($,U,R){const B=this._getItemHeight();return Math.min(Math.max(0,B*$-U+B/2),R)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,We.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView($){const U=(0,f.CB)($,this.options,this.optionGroups),R=this._getItemHeight();this.panel.nativeElement.scrollTop=0===$&&1===U?0:(0,f.jH)(($+U)*R,R,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating($){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating($)}_getChangeEvent($){return new zn(this,$)}_calculateOverlayOffsetX(){const $=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),U=this._viewportRuler.getViewportSize(),R=this._isRtl(),B=this.multiple?56:32;let ie;if(this.multiple)ie=40;else if(this.disableOptionCentering)ie=16;else{let It=this._selectionModel.selected[0]||this.options.first;ie=It&&It.group?32:16}R||(ie*=-1);const fe=0-($.left+ie-(R?B:0)),tt=$.right+ie-U.width+(R?0:B);fe>0?ie+=fe+8:tt>0&&(ie-=tt+8),this._overlayDir.offsetX=Math.round(ie),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY($,U,R){const B=this._getItemHeight(),ie=(B-this._triggerRect.height)/2,fe=Math.floor(256/B);let tt;return this.disableOptionCentering?0:(tt=0===this._scrollTop?$*B:this._scrollTop===R?($-(this._getItemCount()-fe))*B+(B-(this._getItemCount()*B-256)%B):U-B/2,Math.round(-1*tt-ie))}_checkOverlayWithinViewport($){const U=this._getItemHeight(),R=this._viewportRuler.getViewportSize(),B=this._triggerRect.top-8,ie=R.height-this._triggerRect.bottom-8,fe=Math.abs(this._offsetY),It=Math.min(this._getItemCount()*U,256)-fe-this._triggerRect.height;It>ie?this._adjustPanelUp(It,ie):fe>B?this._adjustPanelDown(fe,B,$):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp($,U){const R=Math.round($-U);this._scrollTop-=R,this._offsetY-=R,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown($,U,R){const B=Math.round($-U);if(this._scrollTop+=B,this._offsetY+=B,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=R)return this._scrollTop=R,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const $=this._getItemHeight(),U=this._getItemCount(),R=Math.min(U*$,256),ie=U*$-R;let fe;fe=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),fe+=(0,f.CB)(fe,this.options,this.optionGroups);const tt=R/2;this._scrollTop=this._calculateOverlayScroll(fe,tt,ie),this._offsetY=this._calculateOverlayOffsetY(fe,tt,ie),this._checkOverlayWithinViewport(ie)}_getOriginBasedOnOption(){const $=this._getItemHeight(),U=($-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-U+$/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Zn.\u0275fac=function(){let ht;return function(U){return(ht||(ht=W.n5z(Zn)))(U||Zn)}}(),Zn.\u0275cmp=W.Xpm({type:Zn,selectors:[["mat-select"]],contentQueries:function($,U,R){if(1&$&&(W.Suo(R,Pi,5),W.Suo(R,f.ey,5),W.Suo(R,f.K7,5)),2&$){let B;W.iGM(B=W.CRH())&&(U.customTrigger=B.first),W.iGM(B=W.CRH())&&(U.options=B),W.iGM(B=W.CRH())&&(U.optionGroups=B)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function($,U){1&$&&W.NdJ("keydown",function(B){return U._handleKeydown(B)})("focus",function(){return U._onFocus()})("blur",function(){return U._onBlur()}),2&$&&(W.uIk("id",U.id)("tabindex",U.tabIndex)("aria-controls",U.panelOpen?U.id+"-panel":null)("aria-expanded",U.panelOpen)("aria-label",U.ariaLabel||null)("aria-required",U.required.toString())("aria-disabled",U.disabled.toString())("aria-invalid",U.errorState)("aria-describedby",U._ariaDescribedby||null)("aria-activedescendant",U._getAriaActiveDescendant()),W.ekj("mat-select-disabled",U.disabled)("mat-select-invalid",U.errorState)("mat-select-required",U.required)("mat-select-empty",U.empty)("mat-select-multiple",U.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[W._Bn([{provide:je.Eo,useExisting:Zn},{provide:f.HF,useExisting:Zn}]),W.qOj],ngContentSelectors:Ct,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function($,U){if(1&$&&(W.F$t(Xt),W.TgZ(0,"div",0,1),W.NdJ("click",function(){return U.toggle()}),W.TgZ(3,"div",2),W.YNc(4,tn,2,1,"span",3),W.YNc(5,ct,3,2,"span",4),W.qZA(),W.TgZ(6,"div",5),W._UZ(7,"div",6),W.qZA(),W.qZA(),W.YNc(8,Tt,4,14,"ng-template",7),W.NdJ("backdropClick",function(){return U.close()})("attach",function(){return U._onAttached()})("detach",function(){return U.close()})),2&$){const R=W.MAs(1);W.uIk("aria-owns",U.panelOpen?U.id+"-panel":null),W.xp6(3),W.Q6J("ngSwitch",U.empty),W.uIk("id",U._valueId),W.xp6(1),W.Q6J("ngSwitchCase",!0),W.xp6(1),W.Q6J("ngSwitchCase",!1),W.xp6(3),W.Q6J("cdkConnectedOverlayPanelClass",U._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",U._scrollStrategy)("cdkConnectedOverlayOrigin",R)("cdkConnectedOverlayOpen",U.panelOpen)("cdkConnectedOverlayPositions",U._positions)("cdkConnectedOverlayMinWidth",null==U._triggerRect?null:U._triggerRect.width)("cdkConnectedOverlayOffsetY",U._offsetY)}},directives:[D.xu,l.RF,l.n9,l.ED,D.pI,l.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[vn.transformPanelWrap,vn.transformPanel]},changeDetection:0}),Zn})(),ri=(()=>{class Zn{}return Zn.\u0275fac=function($){return new($||Zn)},Zn.\u0275mod=W.oAB({type:Zn}),Zn.\u0275inj=W.cJS({providers:[gn],imports:[[l.ez,D.U8,f.Ng,f.BQ],qe.ZD,je.lN,f.Ng,f.BQ]}),Zn})()},4594:(Sn,wt,V)=>{"use strict";V.d(wt,{Ye:()=>he,g0:()=>He});var D=V(5e3),l=V(508),W=V(9808),f=V(925);const je=["*",[["mat-toolbar-row"]]],qe=["*","mat-toolbar-row"],Oe=(0,l.pj)(class{constructor(Be){this._elementRef=Be}});let Le=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275dir=D.lG2({type:Be,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Be})(),he=(()=>{class Be extends Oe{constructor(Ye,et,bt){super(Ye),this._platform=et,this._document=bt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Be.\u0275fac=function(Ye){return new(Ye||Be)(D.Y36(D.SBq),D.Y36(f.t4),D.Y36(W.K0))},Be.\u0275cmp=D.Xpm({type:Be,selectors:[["mat-toolbar"]],contentQueries:function(Ye,et,bt){if(1&Ye&&D.Suo(bt,Le,5),2&Ye){let We;D.iGM(We=D.CRH())&&(et._toolbarRows=We)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(Ye,et){2&Ye&&D.ekj("mat-toolbar-multiple-rows",et._toolbarRows.length>0)("mat-toolbar-single-row",0===et._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[D.qOj],ngContentSelectors:qe,decls:2,vars:0,template:function(Ye,et){1&Ye&&(D.F$t(je),D.Hsn(0),D.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),Be})(),He=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275mod=D.oAB({type:Be}),Be.\u0275inj=D.cJS({imports:[[l.BQ],l.BQ]}),Be})()},6360:(Sn,wt,V)=>{"use strict";V.d(wt,{Qb:()=>Fn,PW:()=>To});var D=V(5e3),l=V(2313),W=V(1777);function f(){return"undefined"!=typeof window&&void 0!==window.document}function je(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function qe(ue){switch(ue.length){case 0:return new W.ZN;case 1:return ue[0];default:return new W.ZE(ue)}}function Oe(ue,M,S,H,de={},Te={}){const Ue=[],rt=[];let Ot=-1,sn=null;if(H.forEach(Mn=>{const oi=Mn.offset,vi=oi==Ot,Ni=vi&&sn||{};Object.keys(Mn).forEach(mi=>{let Ci=mi,Hi=Mn[mi];if("offset"!==mi)switch(Ci=M.normalizePropertyName(Ci,Ue),Hi){case W.k1:Hi=de[mi];break;case W.l3:Hi=Te[mi];break;default:Hi=M.normalizeStyleValue(mi,Ci,Hi,Ue)}Ni[Ci]=Hi}),vi||rt.push(Ni),sn=Ni,Ot=oi}),Ue.length){const Mn="\n - ";throw new Error(`Unable to animate due to the following errors:${Mn}${Ue.join(Mn)}`)}return rt}function Le(ue,M,S,H){switch(M){case"start":ue.onStart(()=>H(S&&he(S,"start",ue)));break;case"done":ue.onDone(()=>H(S&&he(S,"done",ue)));break;case"destroy":ue.onDestroy(()=>H(S&&he(S,"destroy",ue)))}}function he(ue,M,S){const H=S.totalTime,Te=ze(ue.element,ue.triggerName,ue.fromState,ue.toState,M||ue.phaseName,null==H?ue.totalTime:H,!!S.disabled),Ue=ue._data;return null!=Ue&&(Te._data=Ue),Te}function ze(ue,M,S,H,de="",Te=0,Ue){return{element:ue,triggerName:M,fromState:S,toState:H,phaseName:de,totalTime:Te,disabled:!!Ue}}function He(ue,M,S){let H;return ue instanceof Map?(H=ue.get(M),H||ue.set(M,H=S)):(H=ue[M],H||(H=ue[M]=S)),H}function Be(ue){const M=ue.indexOf(":");return[ue.substring(1,M),ue.substr(M+1)]}let gt=(ue,M)=>!1,Ye=(ue,M,S)=>[];(je()||"undefined"!=typeof Element)&&(gt=f()?(ue,M)=>{for(;M&&M!==document.documentElement;){if(M===ue)return!0;M=M.parentNode||M.host}return!1}:(ue,M)=>ue.contains(M),Ye=(ue,M,S)=>{if(S)return Array.from(ue.querySelectorAll(M));const H=ue.querySelector(M);return H?[H]:[]});let We=null,Ut=!1;function jt(ue){We||(We=function un(){return"undefined"!=typeof document?document.body:null}()||{},Ut=!!We.style&&"WebkitAppearance"in We.style);let M=!0;return We.style&&!function bt(ue){return"ebkit"==ue.substring(1,6)}(ue)&&(M=ue in We.style,!M&&Ut&&(M="Webkit"+ue.charAt(0).toUpperCase()+ue.substr(1)in We.style)),M}const Dt=gt,ke=Ye;function ot(ue){const M={};return Object.keys(ue).forEach(S=>{const H=S.replace(/([a-z])([A-Z])/g,"$1-$2");M[H]=ue[S]}),M}let nn=(()=>{class ue{validateStyleProperty(S){return jt(S)}matchesElement(S,H){return!1}containsElement(S,H){return Dt(S,H)}query(S,H,de){return ke(S,H,de)}computeStyle(S,H,de){return de||""}animate(S,H,de,Te,Ue,rt=[],Ot){return new W.ZN(de,Te)}}return ue.\u0275fac=function(S){return new(S||ue)},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),zt=(()=>{class ue{}return ue.NOOP=new nn,ue})();const ct="ng-enter",Tt="ng-leave",Xt="ng-trigger",Ct=".ng-trigger",vn="ng-animating",fi=".ng-animating";function zi(ue){if("number"==typeof ue)return ue;const M=ue.match(/^(-?[\.\d]+)(m?s)/);return!M||M.length<2?0:Dn(parseFloat(M[1]),M[2])}function Dn(ue,M){return"s"===M?1e3*ue:ue}function Tn(ue,M,S){return ue.hasOwnProperty("duration")?ue:function Ii(ue,M,S){let de,Te=0,Ue="";if("string"==typeof ue){const rt=ue.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===rt)return M.push(`The provided timing value "${ue}" is invalid.`),{duration:0,delay:0,easing:""};de=Dn(parseFloat(rt[1]),rt[2]);const Ot=rt[3];null!=Ot&&(Te=Dn(parseFloat(Ot),rt[4]));const sn=rt[5];sn&&(Ue=sn)}else de=ue;if(!S){let rt=!1,Ot=M.length;de<0&&(M.push("Duration values below 0 are not allowed for this animation step."),rt=!0),Te<0&&(M.push("Delay values below 0 are not allowed for this animation step."),rt=!0),rt&&M.splice(Ot,0,`The provided timing value "${ue}" is invalid.`)}return{duration:de,delay:Te,easing:Ue}}(ue,M,S)}function ci(ue,M={}){return Object.keys(ue).forEach(S=>{M[S]=ue[S]}),M}function _i(ue,M,S={}){if(M)for(let H in ue)S[H]=ue[H];else ci(ue,S);return S}function kn(ue,M,S){return S?M+":"+S+";":""}function ii(ue){let M="";for(let S=0;S<ue.style.length;S++){const H=ue.style.item(S);M+=kn(0,H,ue.style.getPropertyValue(H))}for(const S in ue.style)ue.style.hasOwnProperty(S)&&!S.startsWith("_")&&(M+=kn(0,ri(S),ue.style[S]));ue.setAttribute("style",M)}function ft(ue,M,S){ue.style&&(Object.keys(M).forEach(H=>{const de=Kn(H);S&&!S.hasOwnProperty(H)&&(S[H]=ue.style[de]),ue.style[de]=M[H]}),je()&&ii(ue))}function Ft(ue,M){ue.style&&(Object.keys(M).forEach(S=>{const H=Kn(S);ue.style[H]=""}),je()&&ii(ue))}function on(ue){return Array.isArray(ue)?1==ue.length?ue[0]:(0,W.vP)(ue):ue}const zn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Jn(ue){let M=[];if("string"==typeof ue){let S;for(;S=zn.exec(ue);)M.push(S[1]);zn.lastIndex=0}return M}function Pi(ue,M,S){const H=ue.toString(),de=H.replace(zn,(Te,Ue)=>{let rt=M[Ue];return M.hasOwnProperty(Ue)||(S.push(`Please provide a value for the animation param ${Ue}`),rt=""),rt.toString()});return de==H?ue:de}function er(ue){const M=[];let S=ue.next();for(;!S.done;)M.push(S.value),S=ue.next();return M}const sr=/-+([a-z0-9])/g;function Kn(ue){return ue.replace(sr,(...M)=>M[1].toUpperCase())}function ri(ue){return ue.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zn(ue,M){return 0===ue||0===M}function ht(ue,M,S){const H=Object.keys(S);if(H.length&&M.length){let Te=M[0],Ue=[];if(H.forEach(rt=>{Te.hasOwnProperty(rt)||Ue.push(rt),Te[rt]=S[rt]}),Ue.length)for(var de=1;de<M.length;de++){let rt=M[de];Ue.forEach(function(Ot){rt[Ot]=U(ue,Ot)})}}return M}function $(ue,M,S){switch(M.type){case 7:return ue.visitTrigger(M,S);case 0:return ue.visitState(M,S);case 1:return ue.visitTransition(M,S);case 2:return ue.visitSequence(M,S);case 3:return ue.visitGroup(M,S);case 4:return ue.visitAnimate(M,S);case 5:return ue.visitKeyframes(M,S);case 6:return ue.visitStyle(M,S);case 8:return ue.visitReference(M,S);case 9:return ue.visitAnimateChild(M,S);case 10:return ue.visitAnimateRef(M,S);case 11:return ue.visitQuery(M,S);case 12:return ue.visitStagger(M,S);default:throw new Error(`Unable to resolve animation metadata node #${M.type}`)}}function U(ue,M){return window.getComputedStyle(ue)[M]}const R="*";function B(ue,M){const S=[];return"string"==typeof ue?ue.split(/\s*,\s*/).forEach(H=>function ie(ue,M,S){if(":"==ue[0]){const Ot=function fe(ue,M){switch(ue){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,H)=>parseFloat(H)>parseFloat(S);case":decrement":return(S,H)=>parseFloat(H)<parseFloat(S);default:return M.push(`The transition alias value "${ue}" is not supported`),"* => *"}}(ue,S);if("function"==typeof Ot)return void M.push(Ot);ue=Ot}const H=ue.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==H||H.length<4)return S.push(`The provided transition expression "${ue}" is not supported`),M;const de=H[1],Te=H[2],Ue=H[3];M.push(_t(de,Ue));"<"==Te[0]&&!(de==R&&Ue==R)&&M.push(_t(Ue,de))}(H,S,M)):S.push(ue),S}const tt=new Set(["true","1"]),It=new Set(["false","0"]);function _t(ue,M){const S=tt.has(ue)||It.has(ue),H=tt.has(M)||It.has(M);return(de,Te)=>{let Ue=ue==R||ue==de,rt=M==R||M==Te;return!Ue&&S&&"boolean"==typeof de&&(Ue=de?tt.has(ue):It.has(ue)),!rt&&H&&"boolean"==typeof Te&&(rt=Te?tt.has(M):It.has(M)),Ue&&rt}}const _n=new RegExp("s*:selfs*,?","g");function Vn(ue,M,S){return new en(ue).build(M,S)}class en{constructor(M){this._driver=M}build(M,S){const H=new Ai(S);return this._resetContextStyleTimingState(H),$(this,on(M),H)}_resetContextStyleTimingState(M){M.currentQuerySelector="",M.collectedStyles={},M.collectedStyles[""]={},M.currentTime=0}visitTrigger(M,S){let H=S.queryCount=0,de=S.depCount=0;const Te=[],Ue=[];return"@"==M.name.charAt(0)&&S.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),M.definitions.forEach(rt=>{if(this._resetContextStyleTimingState(S),0==rt.type){const Ot=rt,sn=Ot.name;sn.toString().split(/\s*,\s*/).forEach(Mn=>{Ot.name=Mn,Te.push(this.visitState(Ot,S))}),Ot.name=sn}else if(1==rt.type){const Ot=this.visitTransition(rt,S);H+=Ot.queryCount,de+=Ot.depCount,Ue.push(Ot)}else S.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:M.name,states:Te,transitions:Ue,queryCount:H,depCount:de,options:null}}visitState(M,S){const H=this.visitStyle(M.styles,S),de=M.options&&M.options.params||null;if(H.containsDynamicStyles){const Te=new Set,Ue=de||{};if(H.styles.forEach(rt=>{if(Ln(rt)){const Ot=rt;Object.keys(Ot).forEach(sn=>{Jn(Ot[sn]).forEach(Mn=>{Ue.hasOwnProperty(Mn)||Te.add(Mn)})})}}),Te.size){const rt=er(Te.values());S.errors.push(`state("${M.name}", ...) must define default values for all the following style substitutions: ${rt.join(", ")}`)}}return{type:0,name:M.name,style:H,options:de?{params:de}:null}}visitTransition(M,S){S.queryCount=0,S.depCount=0;const H=$(this,on(M.animation),S);return{type:1,matchers:B(M.expr,S.errors),animation:H,queryCount:S.queryCount,depCount:S.depCount,options:pt(M.options)}}visitSequence(M,S){return{type:2,steps:M.steps.map(H=>$(this,H,S)),options:pt(M.options)}}visitGroup(M,S){const H=S.currentTime;let de=0;const Te=M.steps.map(Ue=>{S.currentTime=H;const rt=$(this,Ue,S);return de=Math.max(de,S.currentTime),rt});return S.currentTime=de,{type:3,steps:Te,options:pt(M.options)}}visitAnimate(M,S){const H=function Bt(ue,M){let S=null;if(ue.hasOwnProperty("duration"))S=ue;else if("number"==typeof ue)return Ce(Tn(ue,M).duration,0,"");const H=ue;if(H.split(/\s+/).some(Te=>"{"==Te.charAt(0)&&"{"==Te.charAt(1))){const Te=Ce(0,0,"");return Te.dynamic=!0,Te.strValue=H,Te}return S=S||Tn(H,M),Ce(S.duration,S.delay,S.easing)}(M.timings,S.errors);S.currentAnimateTimings=H;let de,Te=M.styles?M.styles:(0,W.oB)({});if(5==Te.type)de=this.visitKeyframes(Te,S);else{let Ue=M.styles,rt=!1;if(!Ue){rt=!0;const sn={};H.easing&&(sn.easing=H.easing),Ue=(0,W.oB)(sn)}S.currentTime+=H.duration+H.delay;const Ot=this.visitStyle(Ue,S);Ot.isEmptyStep=rt,de=Ot}return S.currentAnimateTimings=null,{type:4,timings:H,style:de,options:null}}visitStyle(M,S){const H=this._makeStyleAst(M,S);return this._validateStyleAst(H,S),H}_makeStyleAst(M,S){const H=[];Array.isArray(M.styles)?M.styles.forEach(Ue=>{"string"==typeof Ue?Ue==W.l3?H.push(Ue):S.errors.push(`The provided style string value ${Ue} is not allowed.`):H.push(Ue)}):H.push(M.styles);let de=!1,Te=null;return H.forEach(Ue=>{if(Ln(Ue)){const rt=Ue,Ot=rt.easing;if(Ot&&(Te=Ot,delete rt.easing),!de)for(let sn in rt)if(rt[sn].toString().indexOf("{{")>=0){de=!0;break}}}),{type:6,styles:H,easing:Te,offset:M.offset,containsDynamicStyles:de,options:null}}_validateStyleAst(M,S){const H=S.currentAnimateTimings;let de=S.currentTime,Te=S.currentTime;H&&Te>0&&(Te-=H.duration+H.delay),M.styles.forEach(Ue=>{"string"!=typeof Ue&&Object.keys(Ue).forEach(rt=>{if(!this._driver.validateStyleProperty(rt))return void S.errors.push(`The provided animation property "${rt}" is not a supported CSS property for animations`);const Ot=S.collectedStyles[S.currentQuerySelector],sn=Ot[rt];let Mn=!0;sn&&(Te!=de&&Te>=sn.startTime&&de<=sn.endTime&&(S.errors.push(`The CSS property "${rt}" that exists between the times of "${sn.startTime}ms" and "${sn.endTime}ms" is also being animated in a parallel animation between the times of "${Te}ms" and "${de}ms"`),Mn=!1),Te=sn.startTime),Mn&&(Ot[rt]={startTime:Te,endTime:de}),S.options&&function gn(ue,M,S){const H=M.params||{},de=Jn(ue);de.length&&de.forEach(Te=>{H.hasOwnProperty(Te)||S.push(`Unable to resolve the local animation param ${Te} in the given list of values`)})}(Ue[rt],S.options,S.errors)})})}visitKeyframes(M,S){const H={type:5,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push("keyframes() must be placed inside of a call to animate()"),H;let Te=0;const Ue=[];let rt=!1,Ot=!1,sn=0;const Mn=M.steps.map(fr=>{const Lr=this._makeStyleAst(fr,S);let io=null!=Lr.offset?Lr.offset:function Qn(ue){if("string"==typeof ue)return null;let M=null;if(Array.isArray(ue))ue.forEach(S=>{if(Ln(S)&&S.hasOwnProperty("offset")){const H=S;M=parseFloat(H.offset),delete H.offset}});else if(Ln(ue)&&ue.hasOwnProperty("offset")){const S=ue;M=parseFloat(S.offset),delete S.offset}return M}(Lr.styles),Zr=0;return null!=io&&(Te++,Zr=Lr.offset=io),Ot=Ot||Zr<0||Zr>1,rt=rt||Zr<sn,sn=Zr,Ue.push(Zr),Lr});Ot&&S.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),rt&&S.errors.push("Please ensure that all keyframe offsets are in order");const oi=M.steps.length;let vi=0;Te>0&&Te<oi?S.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==Te&&(vi=1/(oi-1));const Ni=oi-1,mi=S.currentTime,Ci=S.currentAnimateTimings,Hi=Ci.duration;return Mn.forEach((fr,Lr)=>{const io=vi>0?Lr==Ni?1:vi*Lr:Ue[Lr],Zr=io*Hi;S.currentTime=mi+Ci.delay+Zr,Ci.duration=Zr,this._validateStyleAst(fr,S),fr.offset=io,H.styles.push(fr)}),H}visitReference(M,S){return{type:8,animation:$(this,on(M.animation),S),options:pt(M.options)}}visitAnimateChild(M,S){return S.depCount++,{type:9,options:pt(M.options)}}visitAnimateRef(M,S){return{type:10,animation:this.visitReference(M.animation,S),options:pt(M.options)}}visitQuery(M,S){const H=S.currentQuerySelector,de=M.options||{};S.queryCount++,S.currentQuery=M;const[Te,Ue]=function pn(ue){const M=!!ue.split(/\s*,\s*/).find(S=>":self"==S);return M&&(ue=ue.replace(_n,"")),ue=ue.replace(/@\*/g,Ct).replace(/@\w+/g,S=>Ct+"-"+S.substr(1)).replace(/:animating/g,fi),[ue,M]}(M.selector);S.currentQuerySelector=H.length?H+" "+Te:Te,He(S.collectedStyles,S.currentQuerySelector,{});const rt=$(this,on(M.animation),S);return S.currentQuery=null,S.currentQuerySelector=H,{type:11,selector:Te,limit:de.limit||0,optional:!!de.optional,includeSelf:Ue,animation:rt,originalSelector:M.selector,options:pt(M.options)}}visitStagger(M,S){S.currentQuery||S.errors.push("stagger() can only be used inside of query()");const H="full"===M.timings?{duration:0,delay:0,easing:"full"}:Tn(M.timings,S.errors,!0);return{type:12,animation:$(this,on(M.animation),S),timings:H,options:null}}}class Ai{constructor(M){this.errors=M,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ln(ue){return!Array.isArray(ue)&&"object"==typeof ue}function pt(ue){return ue?(ue=ci(ue)).params&&(ue.params=function qt(ue){return ue?ci(ue):null}(ue.params)):ue={},ue}function Ce(ue,M,S){return{duration:ue,delay:M,easing:S}}function Ae(ue,M,S,H,de,Te,Ue=null,rt=!1){return{type:1,element:ue,keyframes:M,preStyleProps:S,postStyleProps:H,duration:de,delay:Te,totalTime:de+Te,easing:Ue,subTimeline:rt}}class ye{constructor(){this._map=new Map}get(M){return this._map.get(M)||[]}append(M,S){let H=this._map.get(M);H||this._map.set(M,H=[]),H.push(...S)}has(M){return this._map.has(M)}clear(){this._map.clear()}}const fn=new RegExp(":enter","g"),Ui=new RegExp(":leave","g");function tr(ue,M,S,H,de,Te={},Ue={},rt,Ot,sn=[]){return(new St).buildKeyframes(ue,M,S,H,de,Te,Ue,rt,Ot,sn)}class St{buildKeyframes(M,S,H,de,Te,Ue,rt,Ot,sn,Mn=[]){sn=sn||new ye;const oi=new J(M,S,sn,de,Te,Mn,[]);oi.options=Ot,oi.currentTimeline.setStyles([Ue],null,oi.errors,Ot),$(this,H,oi);const vi=oi.timelines.filter(Ni=>Ni.containsAnimation());if(Object.keys(rt).length){let Ni;for(let mi=vi.length-1;mi>=0;mi--){const Ci=vi[mi];if(Ci.element===S){Ni=Ci;break}}Ni&&!Ni.allowOnlyTimelineStyles()&&Ni.setStyles([rt],null,oi.errors,Ot)}return vi.length?vi.map(Ni=>Ni.buildKeyframes()):[Ae(S,[],[],[],0,0,"",!1)]}visitTrigger(M,S){}visitState(M,S){}visitTransition(M,S){}visitAnimateChild(M,S){const H=S.subInstructions.get(S.element);if(H){const de=S.createSubContext(M.options),Te=S.currentTimeline.currentTime,Ue=this._visitSubInstructions(H,de,de.options);Te!=Ue&&S.transformIntoNewTimeline(Ue)}S.previousNode=M}visitAnimateRef(M,S){const H=S.createSubContext(M.options);H.transformIntoNewTimeline(),this.visitReference(M.animation,H),S.transformIntoNewTimeline(H.currentTimeline.currentTime),S.previousNode=M}_visitSubInstructions(M,S,H){let Te=S.currentTimeline.currentTime;const Ue=null!=H.duration?zi(H.duration):null,rt=null!=H.delay?zi(H.delay):null;return 0!==Ue&&M.forEach(Ot=>{const sn=S.appendInstructionToTimeline(Ot,Ue,rt);Te=Math.max(Te,sn.duration+sn.delay)}),Te}visitReference(M,S){S.updateOptions(M.options,!0),$(this,M.animation,S),S.previousNode=M}visitSequence(M,S){const H=S.subContextCount;let de=S;const Te=M.options;if(Te&&(Te.params||Te.delay)&&(de=S.createSubContext(Te),de.transformIntoNewTimeline(),null!=Te.delay)){6==de.previousNode.type&&(de.currentTimeline.snapshotCurrentStyles(),de.previousNode=it);const Ue=zi(Te.delay);de.delayNextStep(Ue)}M.steps.length&&(M.steps.forEach(Ue=>$(this,Ue,de)),de.currentTimeline.applyStylesToKeyframe(),de.subContextCount>H&&de.transformIntoNewTimeline()),S.previousNode=M}visitGroup(M,S){const H=[];let de=S.currentTimeline.currentTime;const Te=M.options&&M.options.delay?zi(M.options.delay):0;M.steps.forEach(Ue=>{const rt=S.createSubContext(M.options);Te&&rt.delayNextStep(Te),$(this,Ue,rt),de=Math.max(de,rt.currentTimeline.currentTime),H.push(rt.currentTimeline)}),H.forEach(Ue=>S.currentTimeline.mergeTimelineCollectedStyles(Ue)),S.transformIntoNewTimeline(de),S.previousNode=M}_visitTiming(M,S){if(M.dynamic){const H=M.strValue;return Tn(S.params?Pi(H,S.params,S.errors):H,S.errors)}return{duration:M.duration,delay:M.delay,easing:M.easing}}visitAnimate(M,S){const H=S.currentAnimateTimings=this._visitTiming(M.timings,S),de=S.currentTimeline;H.delay&&(S.incrementTime(H.delay),de.snapshotCurrentStyles());const Te=M.style;5==Te.type?this.visitKeyframes(Te,S):(S.incrementTime(H.duration),this.visitStyle(Te,S),de.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=M}visitStyle(M,S){const H=S.currentTimeline,de=S.currentAnimateTimings;!de&&H.getCurrentStyleProperties().length&&H.forwardFrame();const Te=de&&de.easing||M.easing;M.isEmptyStep?H.applyEmptyStep(Te):H.setStyles(M.styles,Te,S.errors,S.options),S.previousNode=M}visitKeyframes(M,S){const H=S.currentAnimateTimings,de=S.currentTimeline.duration,Te=H.duration,rt=S.createSubContext().currentTimeline;rt.easing=H.easing,M.styles.forEach(Ot=>{rt.forwardTime((Ot.offset||0)*Te),rt.setStyles(Ot.styles,Ot.easing,S.errors,S.options),rt.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(rt),S.transformIntoNewTimeline(de+Te),S.previousNode=M}visitQuery(M,S){const H=S.currentTimeline.currentTime,de=M.options||{},Te=de.delay?zi(de.delay):0;Te&&(6===S.previousNode.type||0==H&&S.currentTimeline.getCurrentStyleProperties().length)&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=it);let Ue=H;const rt=S.invokeQuery(M.selector,M.originalSelector,M.limit,M.includeSelf,!!de.optional,S.errors);S.currentQueryTotal=rt.length;let Ot=null;rt.forEach((sn,Mn)=>{S.currentQueryIndex=Mn;const oi=S.createSubContext(M.options,sn);Te&&oi.delayNextStep(Te),sn===S.element&&(Ot=oi.currentTimeline),$(this,M.animation,oi),oi.currentTimeline.applyStylesToKeyframe(),Ue=Math.max(Ue,oi.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(Ue),Ot&&(S.currentTimeline.mergeTimelineCollectedStyles(Ot),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=M}visitStagger(M,S){const H=S.parentContext,de=S.currentTimeline,Te=M.timings,Ue=Math.abs(Te.duration),rt=Ue*(S.currentQueryTotal-1);let Ot=Ue*S.currentQueryIndex;switch(Te.duration<0?"reverse":Te.easing){case"reverse":Ot=rt-Ot;break;case"full":Ot=H.currentStaggerTime}const Mn=S.currentTimeline;Ot&&Mn.delayNextStep(Ot);const oi=Mn.currentTime;$(this,M.animation,S),S.previousNode=M,H.currentStaggerTime=de.currentTime-oi+(de.startTime-H.currentTimeline.startTime)}}const it={};class J{constructor(M,S,H,de,Te,Ue,rt,Ot){this._driver=M,this.element=S,this.subInstructions=H,this._enterClassName=de,this._leaveClassName=Te,this.errors=Ue,this.timelines=rt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=it,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ot||new F(this._driver,S,0),rt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(M,S){if(!M)return;const H=M;let de=this.options;null!=H.duration&&(de.duration=zi(H.duration)),null!=H.delay&&(de.delay=zi(H.delay));const Te=H.params;if(Te){let Ue=de.params;Ue||(Ue=this.options.params={}),Object.keys(Te).forEach(rt=>{(!S||!Ue.hasOwnProperty(rt))&&(Ue[rt]=Pi(Te[rt],Ue,this.errors))})}}_copyOptions(){const M={};if(this.options){const S=this.options.params;if(S){const H=M.params={};Object.keys(S).forEach(de=>{H[de]=S[de]})}}return M}createSubContext(M=null,S,H){const de=S||this.element,Te=new J(this._driver,de,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(de,H||0));return Te.previousNode=this.previousNode,Te.currentAnimateTimings=this.currentAnimateTimings,Te.options=this._copyOptions(),Te.updateOptions(M),Te.currentQueryIndex=this.currentQueryIndex,Te.currentQueryTotal=this.currentQueryTotal,Te.parentContext=this,this.subContextCount++,Te}transformIntoNewTimeline(M){return this.previousNode=it,this.currentTimeline=this.currentTimeline.fork(this.element,M),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(M,S,H){const de={duration:null!=S?S:M.duration,delay:this.currentTimeline.currentTime+(null!=H?H:0)+M.delay,easing:""},Te=new K(this._driver,M.element,M.keyframes,M.preStyleProps,M.postStyleProps,de,M.stretchStartingKeyframe);return this.timelines.push(Te),de}incrementTime(M){this.currentTimeline.forwardTime(this.currentTimeline.duration+M)}delayNextStep(M){M>0&&this.currentTimeline.delayNextStep(M)}invokeQuery(M,S,H,de,Te,Ue){let rt=[];if(de&&rt.push(this.element),M.length>0){M=(M=M.replace(fn,"."+this._enterClassName)).replace(Ui,"."+this._leaveClassName);let sn=this._driver.query(this.element,M,1!=H);0!==H&&(sn=H<0?sn.slice(sn.length+H,sn.length):sn.slice(0,H)),rt.push(...sn)}return!Te&&0==rt.length&&Ue.push(`\`query("${S}")\` returned zero elements. (Use \`query("${S}", { optional: true })\` if you wish to allow this.)`),rt}}class F{constructor(M,S,H,de){this._driver=M,this.element=S,this.startTime=H,this._elementTimelineStylesLookup=de,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(M){const S=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||S?(this.forwardTime(this.currentTime+M),S&&this.snapshotCurrentStyles()):this.startTime+=M}fork(M,S){return this.applyStylesToKeyframe(),new F(this._driver,M,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(M){this.applyStylesToKeyframe(),this.duration=M,this._loadKeyframe()}_updateStyle(M,S){this._localTimelineStyles[M]=S,this._globalTimelineStyles[M]=S,this._styleSummary[M]={time:this.currentTime,value:S}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(M){M&&(this._previousKeyframe.easing=M),Object.keys(this._globalTimelineStyles).forEach(S=>{this._backFill[S]=this._globalTimelineStyles[S]||W.l3,this._currentKeyframe[S]=W.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(M,S,H,de){S&&(this._previousKeyframe.easing=S);const Te=de&&de.params||{},Ue=function Ee(ue,M){const S={};let H;return ue.forEach(de=>{"*"===de?(H=H||Object.keys(M),H.forEach(Te=>{S[Te]=W.l3})):_i(de,!1,S)}),S}(M,this._globalTimelineStyles);Object.keys(Ue).forEach(rt=>{const Ot=Pi(Ue[rt],Te,H);this._pendingStyles[rt]=Ot,this._localTimelineStyles.hasOwnProperty(rt)||(this._backFill[rt]=this._globalTimelineStyles.hasOwnProperty(rt)?this._globalTimelineStyles[rt]:W.l3),this._updateStyle(rt,Ot)})}applyStylesToKeyframe(){const M=this._pendingStyles,S=Object.keys(M);0!=S.length&&(this._pendingStyles={},S.forEach(H=>{this._currentKeyframe[H]=M[H]}),Object.keys(this._localTimelineStyles).forEach(H=>{this._currentKeyframe.hasOwnProperty(H)||(this._currentKeyframe[H]=this._localTimelineStyles[H])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(M=>{const S=this._localTimelineStyles[M];this._pendingStyles[M]=S,this._updateStyle(M,S)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const M=[];for(let S in this._currentKeyframe)M.push(S);return M}mergeTimelineCollectedStyles(M){Object.keys(M._styleSummary).forEach(S=>{const H=this._styleSummary[S],de=M._styleSummary[S];(!H||de.time>H.time)&&this._updateStyle(S,de.value)})}buildKeyframes(){this.applyStylesToKeyframe();const M=new Set,S=new Set,H=1===this._keyframes.size&&0===this.duration;let de=[];this._keyframes.forEach((rt,Ot)=>{const sn=_i(rt,!0);Object.keys(sn).forEach(Mn=>{const oi=sn[Mn];oi==W.k1?M.add(Mn):oi==W.l3&&S.add(Mn)}),H||(sn.offset=Ot/this.duration),de.push(sn)});const Te=M.size?er(M.values()):[],Ue=S.size?er(S.values()):[];if(H){const rt=de[0],Ot=ci(rt);rt.offset=0,Ot.offset=1,de=[rt,Ot]}return Ae(this.element,de,Te,Ue,this.duration,this.startTime,this.easing,!1)}}class K extends F{constructor(M,S,H,de,Te,Ue,rt=!1){super(M,S,Ue.delay),this.keyframes=H,this.preStyleProps=de,this.postStyleProps=Te,this._stretchStartingKeyframe=rt,this.timings={duration:Ue.duration,delay:Ue.delay,easing:Ue.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let M=this.keyframes,{delay:S,duration:H,easing:de}=this.timings;if(this._stretchStartingKeyframe&&S){const Te=[],Ue=H+S,rt=S/Ue,Ot=_i(M[0],!1);Ot.offset=0,Te.push(Ot);const sn=_i(M[0],!1);sn.offset=ge(rt),Te.push(sn);const Mn=M.length-1;for(let oi=1;oi<=Mn;oi++){let vi=_i(M[oi],!1);vi.offset=ge((S+vi.offset*H)/Ue),Te.push(vi)}H=Ue,S=0,de="",M=Te}return Ae(this.element,M,this.preStyleProps,this.postStyleProps,H,S,de,!0)}}function ge(ue,M=3){const S=Math.pow(10,M-1);return Math.round(ue*S)/S}class Ke{}class nt extends Ke{normalizePropertyName(M,S){return Kn(M)}normalizeStyleValue(M,S,H,de){let Te="";const Ue=H.toString().trim();if(at[S]&&0!==H&&"0"!==H)if("number"==typeof H)Te="px";else{const rt=H.match(/^[+-]?[\d\.]+([a-z]*)$/);rt&&0==rt[1].length&&de.push(`Please provide a CSS unit value for ${M}:${H}`)}return Ue+Te}}const at=(()=>function Nt(ue){const M={};return ue.forEach(S=>M[S]=!0),M}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rn(ue,M,S,H,de,Te,Ue,rt,Ot,sn,Mn,oi,vi){return{type:0,element:ue,triggerName:M,isRemovalTransition:de,fromState:S,fromStyles:Te,toState:H,toStyles:Ue,timelines:rt,queriedElements:Ot,preStyleProps:sn,postStyleProps:Mn,totalTime:oi,errors:vi}}const Rt={};class Vt{constructor(M,S,H){this._triggerName=M,this.ast=S,this._stateStyles=H}match(M,S,H,de){return function an(ue,M,S,H,de){return ue.some(Te=>Te(M,S,H,de))}(this.ast.matchers,M,S,H,de)}buildStyles(M,S,H){const de=this._stateStyles["*"],Te=this._stateStyles[M],Ue=de?de.buildStyles(S,H):{};return Te?Te.buildStyles(S,H):Ue}build(M,S,H,de,Te,Ue,rt,Ot,sn,Mn){const oi=[],vi=this.ast.options&&this.ast.options.params||Rt,mi=this.buildStyles(H,rt&&rt.params||Rt,oi),Ci=Ot&&Ot.params||Rt,Hi=this.buildStyles(de,Ci,oi),fr=new Set,Lr=new Map,io=new Map,Zr="void"===de,Ko={params:Object.assign(Object.assign({},vi),Ci)},_o=Mn?[]:tr(M,S,this.ast.animation,Te,Ue,mi,Hi,Ko,sn,oi);let yo=0;if(_o.forEach(Ps=>{yo=Math.max(Ps.duration+Ps.delay,yo)}),oi.length)return rn(S,this._triggerName,H,de,Zr,mi,Hi,[],[],Lr,io,yo,oi);_o.forEach(Ps=>{const _s=Ps.element,Ca=He(Lr,_s,{});Ps.preStyleProps.forEach(ys=>Ca[ys]=!0);const Jo=He(io,_s,{});Ps.postStyleProps.forEach(ys=>Jo[ys]=!0),_s!==S&&fr.add(_s)});const Ao=er(fr.values());return rn(S,this._triggerName,H,de,Zr,mi,Hi,_o,Ao,Lr,io,yo)}}class Cn{constructor(M,S,H){this.styles=M,this.defaultParams=S,this.normalizer=H}buildStyles(M,S){const H={},de=ci(this.defaultParams);return Object.keys(M).forEach(Te=>{const Ue=M[Te];null!=Ue&&(de[Te]=Ue)}),this.styles.styles.forEach(Te=>{if("string"!=typeof Te){const Ue=Te;Object.keys(Ue).forEach(rt=>{let Ot=Ue[rt];Ot.length>1&&(Ot=Pi(Ot,de,S));const sn=this.normalizer.normalizePropertyName(rt,S);Ot=this.normalizer.normalizeStyleValue(rt,sn,Ot,S),H[sn]=Ot})}}),H}}class Li{constructor(M,S,H){this.name=M,this.ast=S,this._normalizer=H,this.transitionFactories=[],this.states={},S.states.forEach(de=>{this.states[de.name]=new Cn(de.style,de.options&&de.options.params||{},H)}),xi(this.states,"true","1"),xi(this.states,"false","0"),S.transitions.forEach(de=>{this.transitionFactories.push(new Vt(M,de,this.states))}),this.fallbackTransition=function ui(ue,M,S){return new Vt(ue,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ue,rt)=>!0],options:null,queryCount:0,depCount:0},M)}(M,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(M,S,H,de){return this.transitionFactories.find(Ue=>Ue.match(M,S,H,de))||null}matchStyles(M,S,H){return this.fallbackTransition.buildStyles(M,S,H)}}function xi(ue,M,S){ue.hasOwnProperty(M)?ue.hasOwnProperty(S)||(ue[S]=ue[M]):ue.hasOwnProperty(S)&&(ue[M]=ue[S])}const Rn=new ye;class pi{constructor(M,S,H){this.bodyNode=M,this._driver=S,this._normalizer=H,this._animations={},this._playersById={},this.players=[]}register(M,S){const H=[],de=Vn(this._driver,S,H);if(H.length)throw new Error(`Unable to build the animation due to the following errors: ${H.join("\n")}`);this._animations[M]=de}_buildPlayer(M,S,H){const de=M.element,Te=Oe(0,this._normalizer,0,M.keyframes,S,H);return this._driver.animate(de,Te,M.duration,M.delay,M.easing,[],!0)}create(M,S,H={}){const de=[],Te=this._animations[M];let Ue;const rt=new Map;if(Te?(Ue=tr(this._driver,S,Te,ct,Tt,{},{},H,Rn,de),Ue.forEach(Mn=>{const oi=He(rt,Mn.element,{});Mn.postStyleProps.forEach(vi=>oi[vi]=null)})):(de.push("The requested animation doesn't exist or has already been destroyed"),Ue=[]),de.length)throw new Error(`Unable to create the animation due to the following errors: ${de.join("\n")}`);rt.forEach((Mn,oi)=>{Object.keys(Mn).forEach(vi=>{Mn[vi]=this._driver.computeStyle(oi,vi,W.l3)})});const sn=qe(Ue.map(Mn=>{const oi=rt.get(Mn.element);return this._buildPlayer(Mn,{},oi)}));return this._playersById[M]=sn,sn.onDestroy(()=>this.destroy(M)),this.players.push(sn),sn}destroy(M){const S=this._getPlayer(M);S.destroy(),delete this._playersById[M];const H=this.players.indexOf(S);H>=0&&this.players.splice(H,1)}_getPlayer(M){const S=this._playersById[M];if(!S)throw new Error(`Unable to find the timeline player referenced by ${M}`);return S}listen(M,S,H,de){const Te=ze(S,"","","");return Le(this._getPlayer(M),H,Te,de),()=>{}}command(M,S,H,de){if("register"==H)return void this.register(M,de[0]);if("create"==H)return void this.create(M,S,de[0]||{});const Te=this._getPlayer(M);switch(H){case"play":Te.play();break;case"pause":Te.pause();break;case"reset":Te.reset();break;case"restart":Te.restart();break;case"finish":Te.finish();break;case"init":Te.init();break;case"setPosition":Te.setPosition(parseFloat(de[0]));break;case"destroy":this.destroy(M)}}}const ar="ng-animate-queued",wr="ng-animate-disabled",Ri=[],co={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_r="__ng_removed";class Zi{constructor(M,S=""){this.namespaceId=S;const H=M&&M.hasOwnProperty("value");if(this.value=function no(ue){return null!=ue?ue:null}(H?M.value:M),H){const Te=ci(M);delete Te.value,this.options=Te}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(M){const S=M.params;if(S){const H=this.options.params;Object.keys(S).forEach(de=>{null==H[de]&&(H[de]=S[de])})}}}const to="void",qo=new Zi(to);class Pr{constructor(M,S,H){this.id=M,this.hostElement=S,this._engine=H,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+M,Gr(S,this._hostClassName)}listen(M,S,H,de){if(!this._triggers.hasOwnProperty(S))throw new Error(`Unable to listen on the animation trigger event "${H}" because the animation trigger "${S}" doesn't exist!`);if(null==H||0==H.length)throw new Error(`Unable to listen on the animation trigger "${S}" because the provided event is undefined!`);if(!function ns(ue){return"start"==ue||"done"==ue}(H))throw new Error(`The provided animation trigger event "${H}" for the animation trigger "${S}" is not supported!`);const Te=He(this._elementListeners,M,[]),Ue={name:S,phase:H,callback:de};Te.push(Ue);const rt=He(this._engine.statesByElement,M,{});return rt.hasOwnProperty(S)||(Gr(M,Xt),Gr(M,Xt+"-"+S),rt[S]=qo),()=>{this._engine.afterFlush(()=>{const Ot=Te.indexOf(Ue);Ot>=0&&Te.splice(Ot,1),this._triggers[S]||delete rt[S]})}}register(M,S){return!this._triggers[M]&&(this._triggers[M]=S,!0)}_getTrigger(M){const S=this._triggers[M];if(!S)throw new Error(`The provided animation trigger "${M}" has not been registered!`);return S}trigger(M,S,H,de=!0){const Te=this._getTrigger(S),Ue=new Es(this.id,S,M);let rt=this._engine.statesByElement.get(M);rt||(Gr(M,Xt),Gr(M,Xt+"-"+S),this._engine.statesByElement.set(M,rt={}));let Ot=rt[S];const sn=new Zi(H,this.id);if(!(H&&H.hasOwnProperty("value"))&&Ot&&sn.absorbOptions(Ot.options),rt[S]=sn,Ot||(Ot=qo),sn.value!==to&&Ot.value===sn.value){if(!function Ns(ue,M){const S=Object.keys(ue),H=Object.keys(M);if(S.length!=H.length)return!1;for(let de=0;de<S.length;de++){const Te=S[de];if(!M.hasOwnProperty(Te)||ue[Te]!==M[Te])return!1}return!0}(Ot.params,sn.params)){const Ci=[],Hi=Te.matchStyles(Ot.value,Ot.params,Ci),fr=Te.matchStyles(sn.value,sn.params,Ci);Ci.length?this._engine.reportError(Ci):this._engine.afterFlush(()=>{Ft(M,Hi),ft(M,fr)})}return}const vi=He(this._engine.playersByElement,M,[]);vi.forEach(Ci=>{Ci.namespaceId==this.id&&Ci.triggerName==S&&Ci.queued&&Ci.destroy()});let Ni=Te.matchTransition(Ot.value,sn.value,M,sn.params),mi=!1;if(!Ni){if(!de)return;Ni=Te.fallbackTransition,mi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:S,transition:Ni,fromState:Ot,toState:sn,player:Ue,isFallbackTransition:mi}),mi||(Gr(M,ar),Ue.onStart(()=>{Uo(M,ar)})),Ue.onDone(()=>{let Ci=this.players.indexOf(Ue);Ci>=0&&this.players.splice(Ci,1);const Hi=this._engine.playersByElement.get(M);if(Hi){let fr=Hi.indexOf(Ue);fr>=0&&Hi.splice(fr,1)}}),this.players.push(Ue),vi.push(Ue),Ue}deregister(M){delete this._triggers[M],this._engine.statesByElement.forEach((S,H)=>{delete S[M]}),this._elementListeners.forEach((S,H)=>{this._elementListeners.set(H,S.filter(de=>de.name!=M))})}clearElementCache(M){this._engine.statesByElement.delete(M),this._elementListeners.delete(M);const S=this._engine.playersByElement.get(M);S&&(S.forEach(H=>H.destroy()),this._engine.playersByElement.delete(M))}_signalRemovalForInnerTriggers(M,S){const H=this._engine.driver.query(M,Ct,!0);H.forEach(de=>{if(de[_r])return;const Te=this._engine.fetchNamespacesByElement(de);Te.size?Te.forEach(Ue=>Ue.triggerLeaveAnimation(de,S,!1,!0)):this.clearElementCache(de)}),this._engine.afterFlushAnimationsDone(()=>H.forEach(de=>this.clearElementCache(de)))}triggerLeaveAnimation(M,S,H,de){const Te=this._engine.statesByElement.get(M),Ue=new Map;if(Te){const rt=[];if(Object.keys(Te).forEach(Ot=>{if(Ue.set(Ot,Te[Ot].value),this._triggers[Ot]){const sn=this.trigger(M,Ot,to,de);sn&&rt.push(sn)}}),rt.length)return this._engine.markElementAsRemoved(this.id,M,!0,S,Ue),H&&qe(rt).onDone(()=>this._engine.processLeaveNode(M)),!0}return!1}prepareLeaveAnimationListeners(M){const S=this._elementListeners.get(M),H=this._engine.statesByElement.get(M);if(S&&H){const de=new Set;S.forEach(Te=>{const Ue=Te.name;if(de.has(Ue))return;de.add(Ue);const Ot=this._triggers[Ue].fallbackTransition,sn=H[Ue]||qo,Mn=new Zi(to),oi=new Es(this.id,Ue,M);this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:Ue,transition:Ot,fromState:sn,toState:Mn,player:oi,isFallbackTransition:!0})})}}removeNode(M,S){const H=this._engine;if(M.childElementCount&&this._signalRemovalForInnerTriggers(M,S),this.triggerLeaveAnimation(M,S,!0))return;let de=!1;if(H.totalAnimations){const Te=H.players.length?H.playersByQueriedElement.get(M):[];if(Te&&Te.length)de=!0;else{let Ue=M;for(;Ue=Ue.parentNode;)if(H.statesByElement.get(Ue)){de=!0;break}}}if(this.prepareLeaveAnimationListeners(M),de)H.markElementAsRemoved(this.id,M,!1,S);else{const Te=M[_r];(!Te||Te===co)&&(H.afterFlush(()=>this.clearElementCache(M)),H.destroyInnerAnimations(M),H._onRemovalComplete(M,S))}}insertNode(M,S){Gr(M,this._hostClassName)}drainQueuedTransitions(M){const S=[];return this._queue.forEach(H=>{const de=H.player;if(de.destroyed)return;const Te=H.element,Ue=this._elementListeners.get(Te);Ue&&Ue.forEach(rt=>{if(rt.name==H.triggerName){const Ot=ze(Te,H.triggerName,H.fromState.value,H.toState.value);Ot._data=M,Le(H.player,rt.phase,Ot,rt.callback)}}),de.markedForDestroy?this._engine.afterFlush(()=>{de.destroy()}):S.push(H)}),this._queue=[],S.sort((H,de)=>{const Te=H.transition.ast.depCount,Ue=de.transition.ast.depCount;return 0==Te||0==Ue?Te-Ue:this._engine.driver.containsElement(H.element,de.element)?1:-1})}destroy(M){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,M)}elementContainsData(M){let S=!1;return this._elementListeners.has(M)&&(S=!0),S=!!this._queue.find(H=>H.element===M)||S,S}}class Yr{constructor(M,S,H){this.bodyNode=M,this.driver=S,this._normalizer=H,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(de,Te)=>{}}_onRemovalComplete(M,S){this.onRemovalComplete(M,S)}get queuedPlayers(){const M=[];return this._namespaceList.forEach(S=>{S.players.forEach(H=>{H.queued&&M.push(H)})}),M}createNamespace(M,S){const H=new Pr(M,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(H,S):(this.newHostElements.set(S,H),this.collectEnterElement(S)),this._namespaceLookup[M]=H}_balanceNamespaceList(M,S){const H=this._namespaceList.length-1;if(H>=0){let de=!1;for(let Te=H;Te>=0;Te--)if(this.driver.containsElement(this._namespaceList[Te].hostElement,S)){this._namespaceList.splice(Te+1,0,M),de=!0;break}de||this._namespaceList.splice(0,0,M)}else this._namespaceList.push(M);return this.namespacesByHostElement.set(S,M),M}register(M,S){let H=this._namespaceLookup[M];return H||(H=this.createNamespace(M,S)),H}registerTrigger(M,S,H){let de=this._namespaceLookup[M];de&&de.register(S,H)&&this.totalAnimations++}destroy(M,S){if(!M)return;const H=this._fetchNamespace(M);this.afterFlush(()=>{this.namespacesByHostElement.delete(H.hostElement),delete this._namespaceLookup[M];const de=this._namespaceList.indexOf(H);de>=0&&this._namespaceList.splice(de,1)}),this.afterFlushAnimationsDone(()=>H.destroy(S))}_fetchNamespace(M){return this._namespaceLookup[M]}fetchNamespacesByElement(M){const S=new Set,H=this.statesByElement.get(M);if(H){const de=Object.keys(H);for(let Te=0;Te<de.length;Te++){const Ue=H[de[Te]].namespaceId;if(Ue){const rt=this._fetchNamespace(Ue);rt&&S.add(rt)}}}return S}trigger(M,S,H,de){if(Ar(S)){const Te=this._fetchNamespace(M);if(Te)return Te.trigger(S,H,de),!0}return!1}insertNode(M,S,H,de){if(!Ar(S))return;const Te=S[_r];if(Te&&Te.setForRemoval){Te.setForRemoval=!1,Te.setForMove=!0;const Ue=this.collectedLeaveElements.indexOf(S);Ue>=0&&this.collectedLeaveElements.splice(Ue,1)}if(M){const Ue=this._fetchNamespace(M);Ue&&Ue.insertNode(S,H)}de&&this.collectEnterElement(S)}collectEnterElement(M){this.collectedEnterElements.push(M)}markElementAsDisabled(M,S){S?this.disabledNodes.has(M)||(this.disabledNodes.add(M),Gr(M,wr)):this.disabledNodes.has(M)&&(this.disabledNodes.delete(M),Uo(M,wr))}removeNode(M,S,H,de){if(Ar(S)){const Te=M?this._fetchNamespace(M):null;if(Te?Te.removeNode(S,de):this.markElementAsRemoved(M,S,!1,de),H){const Ue=this.namespacesByHostElement.get(S);Ue&&Ue.id!==M&&Ue.removeNode(S,de)}}else this._onRemovalComplete(S,de)}markElementAsRemoved(M,S,H,de,Te){this.collectedLeaveElements.push(S),S[_r]={namespaceId:M,setForRemoval:de,hasAnimation:H,removedBeforeQueried:!1,previousTriggersValues:Te}}listen(M,S,H,de,Te){return Ar(S)?this._fetchNamespace(M).listen(S,H,de,Te):()=>{}}_buildInstruction(M,S,H,de,Te){return M.transition.build(this.driver,M.element,M.fromState.value,M.toState.value,H,de,M.fromState.options,M.toState.options,S,Te)}destroyInnerAnimations(M){let S=this.driver.query(M,Ct,!0);S.forEach(H=>this.destroyActiveAnimationsForElement(H)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(M,fi,!0),S.forEach(H=>this.finishActiveQueriedAnimationOnElement(H)))}destroyActiveAnimationsForElement(M){const S=this.playersByElement.get(M);S&&S.forEach(H=>{H.queued?H.markedForDestroy=!0:H.destroy()})}finishActiveQueriedAnimationOnElement(M){const S=this.playersByQueriedElement.get(M);S&&S.forEach(H=>H.finish())}whenRenderingDone(){return new Promise(M=>{if(this.players.length)return qe(this.players).onDone(()=>M());M()})}processLeaveNode(M){var S;const H=M[_r];if(H&&H.setForRemoval){if(M[_r]=co,H.namespaceId){this.destroyInnerAnimations(M);const de=this._fetchNamespace(H.namespaceId);de&&de.clearElementCache(M)}this._onRemovalComplete(M,H.setForRemoval)}(null===(S=M.classList)||void 0===S?void 0:S.contains(wr))&&this.markElementAsDisabled(M,!1),this.driver.query(M,".ng-animate-disabled",!0).forEach(de=>{this.markElementAsDisabled(de,!1)})}flush(M=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((H,de)=>this._balanceNamespaceList(H,de)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let H=0;H<this.collectedEnterElements.length;H++)Gr(this.collectedEnterElements[H],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const H=[];try{S=this._flushAnimations(H,M)}finally{for(let de=0;de<H.length;de++)H[de]()}}else for(let H=0;H<this.collectedLeaveElements.length;H++)this.processLeaveNode(this.collectedLeaveElements[H]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(H=>H()),this._flushFns=[],this._whenQuietFns.length){const H=this._whenQuietFns;this._whenQuietFns=[],S.length?qe(S).onDone(()=>{H.forEach(de=>de())}):H.forEach(de=>de())}}reportError(M){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${M.join("\n")}`)}_flushAnimations(M,S){const H=new ye,de=[],Te=new Map,Ue=[],rt=new Map,Ot=new Map,sn=new Map,Mn=new Set;this.disabledNodes.forEach(jn=>{Mn.add(jn);const ai=this.driver.query(jn,".ng-animate-queued",!0);for(let Oi=0;Oi<ai.length;Oi++)Mn.add(ai[Oi])});const oi=this.bodyNode,vi=Array.from(this.statesByElement.keys()),Ni=Kr(vi,this.collectedEnterElements),mi=new Map;let Ci=0;Ni.forEach((jn,ai)=>{const Oi=ct+Ci++;mi.set(ai,Oi),jn.forEach(Si=>Gr(Si,Oi))});const Hi=[],fr=new Set,Lr=new Set;for(let jn=0;jn<this.collectedLeaveElements.length;jn++){const ai=this.collectedLeaveElements[jn],Oi=ai[_r];Oi&&Oi.setForRemoval&&(Hi.push(ai),fr.add(ai),Oi.hasAnimation?this.driver.query(ai,".ng-star-inserted",!0).forEach(Si=>fr.add(Si)):Lr.add(ai))}const io=new Map,Zr=Kr(vi,Array.from(fr));Zr.forEach((jn,ai)=>{const Oi=Tt+Ci++;io.set(ai,Oi),jn.forEach(Si=>Gr(Si,Oi))}),M.push(()=>{Ni.forEach((jn,ai)=>{const Oi=mi.get(ai);jn.forEach(Si=>Uo(Si,Oi))}),Zr.forEach((jn,ai)=>{const Oi=io.get(ai);jn.forEach(Si=>Uo(Si,Oi))}),Hi.forEach(jn=>{this.processLeaveNode(jn)})});const Ko=[],_o=[];for(let jn=this._namespaceList.length-1;jn>=0;jn--)this._namespaceList[jn].drainQueuedTransitions(S).forEach(Oi=>{const Si=Oi.player,Sr=Oi.element;if(Ko.push(Si),this.collectedEnterElements.length){const Dr=Sr[_r];if(Dr&&Dr.setForMove){if(Dr.previousTriggersValues&&Dr.previousTriggersValues.has(Oi.triggerName)){const vo=Dr.previousTriggersValues.get(Oi.triggerName),An=this.statesByElement.get(Oi.element);An&&An[Oi.triggerName]&&(An[Oi.triggerName].value=vo)}return void Si.destroy()}}const rr=!oi||!this.driver.containsElement(oi,Sr),Wr=io.get(Sr),Js=mi.get(Sr),Tr=this._buildInstruction(Oi,H,Js,Wr,rr);if(Tr.errors&&Tr.errors.length)return void _o.push(Tr);if(rr)return Si.onStart(()=>Ft(Sr,Tr.fromStyles)),Si.onDestroy(()=>ft(Sr,Tr.toStyles)),void de.push(Si);if(Oi.isFallbackTransition)return Si.onStart(()=>Ft(Sr,Tr.fromStyles)),Si.onDestroy(()=>ft(Sr,Tr.toStyles)),void de.push(Si);const Io=[];Tr.timelines.forEach(Dr=>{Dr.stretchStartingKeyframe=!0,this.disabledNodes.has(Dr.element)||Io.push(Dr)}),Tr.timelines=Io,H.append(Sr,Tr.timelines),Ue.push({instruction:Tr,player:Si,element:Sr}),Tr.queriedElements.forEach(Dr=>He(rt,Dr,[]).push(Si)),Tr.preStyleProps.forEach((Dr,vo)=>{const An=Object.keys(Dr);if(An.length){let bo=Ot.get(vo);bo||Ot.set(vo,bo=new Set),An.forEach(ks=>bo.add(ks))}}),Tr.postStyleProps.forEach((Dr,vo)=>{const An=Object.keys(Dr);let bo=sn.get(vo);bo||sn.set(vo,bo=new Set),An.forEach(ks=>bo.add(ks))})});if(_o.length){const jn=[];_o.forEach(ai=>{jn.push(`@${ai.triggerName} has failed due to:\n`),ai.errors.forEach(Oi=>jn.push(`- ${Oi}\n`))}),Ko.forEach(ai=>ai.destroy()),this.reportError(jn)}const yo=new Map,Ao=new Map;Ue.forEach(jn=>{const ai=jn.element;H.has(ai)&&(Ao.set(ai,ai),this._beforeAnimationBuild(jn.player.namespaceId,jn.instruction,yo))}),de.forEach(jn=>{const ai=jn.element;this._getPreviousPlayers(ai,!1,jn.namespaceId,jn.triggerName,null).forEach(Si=>{He(yo,ai,[]).push(Si),Si.destroy()})});const Ps=Hi.filter(jn=>Ms(jn,Ot,sn)),_s=new Map;xo(_s,this.driver,Lr,sn,W.l3).forEach(jn=>{Ms(jn,Ot,sn)&&Ps.push(jn)});const Jo=new Map;Ni.forEach((jn,ai)=>{xo(Jo,this.driver,new Set(jn),Ot,W.k1)}),Ps.forEach(jn=>{const ai=_s.get(jn),Oi=Jo.get(jn);_s.set(jn,Object.assign(Object.assign({},ai),Oi))});const ys=[],fa=[],Os={};Ue.forEach(jn=>{const{element:ai,player:Oi,instruction:Si}=jn;if(H.has(ai)){if(Mn.has(ai))return Oi.onDestroy(()=>ft(ai,Si.toStyles)),Oi.disabled=!0,Oi.overrideTotalTime(Si.totalTime),void de.push(Oi);let Sr=Os;if(Ao.size>1){let Wr=ai;const Js=[];for(;Wr=Wr.parentNode;){const Tr=Ao.get(Wr);if(Tr){Sr=Tr;break}Js.push(Wr)}Js.forEach(Tr=>Ao.set(Tr,Sr))}const rr=this._buildAnimation(Oi.namespaceId,Si,yo,Te,Jo,_s);if(Oi.setRealPlayer(rr),Sr===Os)ys.push(Oi);else{const Wr=this.playersByElement.get(Sr);Wr&&Wr.length&&(Oi.parentPlayer=qe(Wr)),de.push(Oi)}}else Ft(ai,Si.fromStyles),Oi.onDestroy(()=>ft(ai,Si.toStyles)),fa.push(Oi),Mn.has(ai)&&de.push(Oi)}),fa.forEach(jn=>{const ai=Te.get(jn.element);if(ai&&ai.length){const Oi=qe(ai);jn.setRealPlayer(Oi)}}),de.forEach(jn=>{jn.parentPlayer?jn.syncPlayerEvents(jn.parentPlayer):jn.destroy()});for(let jn=0;jn<Hi.length;jn++){const ai=Hi[jn],Oi=ai[_r];if(Uo(ai,Tt),Oi&&Oi.hasAnimation)continue;let Si=[];if(rt.size){let rr=rt.get(ai);rr&&rr.length&&Si.push(...rr);let Wr=this.driver.query(ai,fi,!0);for(let Js=0;Js<Wr.length;Js++){let Tr=rt.get(Wr[Js]);Tr&&Tr.length&&Si.push(...Tr)}}const Sr=Si.filter(rr=>!rr.destroyed);Sr.length?Ds(this,ai,Sr):this.processLeaveNode(ai)}return Hi.length=0,ys.forEach(jn=>{this.players.push(jn),jn.onDone(()=>{jn.destroy();const ai=this.players.indexOf(jn);this.players.splice(ai,1)}),jn.play()}),ys}elementContainsData(M,S){let H=!1;const de=S[_r];return de&&de.setForRemoval&&(H=!0),this.playersByElement.has(S)&&(H=!0),this.playersByQueriedElement.has(S)&&(H=!0),this.statesByElement.has(S)&&(H=!0),this._fetchNamespace(M).elementContainsData(S)||H}afterFlush(M){this._flushFns.push(M)}afterFlushAnimationsDone(M){this._whenQuietFns.push(M)}_getPreviousPlayers(M,S,H,de,Te){let Ue=[];if(S){const rt=this.playersByQueriedElement.get(M);rt&&(Ue=rt)}else{const rt=this.playersByElement.get(M);if(rt){const Ot=!Te||Te==to;rt.forEach(sn=>{sn.queued||!Ot&&sn.triggerName!=de||Ue.push(sn)})}}return(H||de)&&(Ue=Ue.filter(rt=>!(H&&H!=rt.namespaceId||de&&de!=rt.triggerName))),Ue}_beforeAnimationBuild(M,S,H){const Te=S.element,Ue=S.isRemovalTransition?void 0:M,rt=S.isRemovalTransition?void 0:S.triggerName;for(const Ot of S.timelines){const sn=Ot.element,Mn=sn!==Te,oi=He(H,sn,[]);this._getPreviousPlayers(sn,Mn,Ue,rt,S.toState).forEach(Ni=>{const mi=Ni.getRealPlayer();mi.beforeDestroy&&mi.beforeDestroy(),Ni.destroy(),oi.push(Ni)})}Ft(Te,S.fromStyles)}_buildAnimation(M,S,H,de,Te,Ue){const rt=S.triggerName,Ot=S.element,sn=[],Mn=new Set,oi=new Set,vi=S.timelines.map(mi=>{const Ci=mi.element;Mn.add(Ci);const Hi=Ci[_r];if(Hi&&Hi.removedBeforeQueried)return new W.ZN(mi.duration,mi.delay);const fr=Ci!==Ot,Lr=function Fr(ue){const M=[];return rs(ue,M),M}((H.get(Ci)||Ri).map(yo=>yo.getRealPlayer())).filter(yo=>!!yo.element&&yo.element===Ci),io=Te.get(Ci),Zr=Ue.get(Ci),Ko=Oe(0,this._normalizer,0,mi.keyframes,io,Zr),_o=this._buildPlayer(mi,Ko,Lr);if(mi.subTimeline&&de&&oi.add(Ci),fr){const yo=new Es(M,rt,Ci);yo.setRealPlayer(_o),sn.push(yo)}return _o});sn.forEach(mi=>{He(this.playersByQueriedElement,mi.element,[]).push(mi),mi.onDone(()=>function qs(ue,M,S){let H;if(ue instanceof Map){if(H=ue.get(M),H){if(H.length){const de=H.indexOf(S);H.splice(de,1)}0==H.length&&ue.delete(M)}}else if(H=ue[M],H){if(H.length){const de=H.indexOf(S);H.splice(de,1)}0==H.length&&delete ue[M]}return H}(this.playersByQueriedElement,mi.element,mi))}),Mn.forEach(mi=>Gr(mi,vn));const Ni=qe(vi);return Ni.onDestroy(()=>{Mn.forEach(mi=>Uo(mi,vn)),ft(Ot,S.toStyles)}),oi.forEach(mi=>{He(de,mi,[]).push(Ni)}),Ni}_buildPlayer(M,S,H){return S.length>0?this.driver.animate(M.element,S,M.duration,M.delay,M.easing,H):new W.ZN(M.duration,M.delay)}}class Es{constructor(M,S,H){this.namespaceId=M,this.triggerName=S,this.element=H,this._player=new W.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(M){this._containsRealPlayer||(this._player=M,Object.keys(this._queuedCallbacks).forEach(S=>{this._queuedCallbacks[S].forEach(H=>Le(M,S,void 0,H))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(M.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(M){this.totalTime=M}syncPlayerEvents(M){const S=this._player;S.triggerCallback&&M.onStart(()=>S.triggerCallback("start")),M.onDone(()=>this.finish()),M.onDestroy(()=>this.destroy())}_queueEvent(M,S){He(this._queuedCallbacks,M,[]).push(S)}onDone(M){this.queued&&this._queueEvent("done",M),this._player.onDone(M)}onStart(M){this.queued&&this._queueEvent("start",M),this._player.onStart(M)}onDestroy(M){this.queued&&this._queueEvent("destroy",M),this._player.onDestroy(M)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(M){this.queued||this._player.setPosition(M)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(M){const S=this._player;S.triggerCallback&&S.triggerCallback(M)}}function Ar(ue){return ue&&1===ue.nodeType}function is(ue,M){const S=ue.style.display;return ue.style.display=null!=M?M:"none",S}function xo(ue,M,S,H,de){const Te=[];S.forEach(Ot=>Te.push(is(Ot)));const Ue=[];H.forEach((Ot,sn)=>{const Mn={};Ot.forEach(oi=>{const vi=Mn[oi]=M.computeStyle(sn,oi,de);(!vi||0==vi.length)&&(sn[_r]=Vo,Ue.push(sn))}),ue.set(sn,Mn)});let rt=0;return S.forEach(Ot=>is(Ot,Te[rt++])),Ue}function Kr(ue,M){const S=new Map;if(ue.forEach(rt=>S.set(rt,[])),0==M.length)return S;const de=new Set(M),Te=new Map;function Ue(rt){if(!rt)return 1;let Ot=Te.get(rt);if(Ot)return Ot;const sn=rt.parentNode;return Ot=S.has(sn)?sn:de.has(sn)?1:Ue(sn),Te.set(rt,Ot),Ot}return M.forEach(rt=>{const Ot=Ue(rt);1!==Ot&&S.get(Ot).push(rt)}),S}function Gr(ue,M){var S;null===(S=ue.classList)||void 0===S||S.add(M)}function Uo(ue,M){var S;null===(S=ue.classList)||void 0===S||S.remove(M)}function Ds(ue,M,S){qe(S).onDone(()=>ue.processLeaveNode(M))}function rs(ue,M){for(let S=0;S<ue.length;S++){const H=ue[S];H instanceof W.ZE?rs(H.players,M):M.push(H)}}function Ms(ue,M,S){const H=S.get(ue);if(!H)return!1;let de=M.get(ue);return de?H.forEach(Te=>de.add(Te)):M.set(ue,H),S.delete(ue),!0}class Ss{constructor(M,S,H){this.bodyNode=M,this._driver=S,this._normalizer=H,this._triggerCache={},this.onRemovalComplete=(de,Te)=>{},this._transitionEngine=new Yr(M,S,H),this._timelineEngine=new pi(M,S,H),this._transitionEngine.onRemovalComplete=(de,Te)=>this.onRemovalComplete(de,Te)}registerTrigger(M,S,H,de,Te){const Ue=M+"-"+de;let rt=this._triggerCache[Ue];if(!rt){const Ot=[],sn=Vn(this._driver,Te,Ot);if(Ot.length)throw new Error(`The animation trigger "${de}" has failed to build due to the following errors:\n - ${Ot.join("\n - ")}`);rt=function Un(ue,M,S){return new Li(ue,M,S)}(de,sn,this._normalizer),this._triggerCache[Ue]=rt}this._transitionEngine.registerTrigger(S,de,rt)}register(M,S){this._transitionEngine.register(M,S)}destroy(M,S){this._transitionEngine.destroy(M,S)}onInsert(M,S,H,de){this._transitionEngine.insertNode(M,S,H,de)}onRemove(M,S,H,de){this._transitionEngine.removeNode(M,S,de||!1,H)}disableAnimations(M,S){this._transitionEngine.markElementAsDisabled(M,S)}process(M,S,H,de){if("@"==H.charAt(0)){const[Te,Ue]=Be(H);this._timelineEngine.command(Te,S,Ue,de)}else this._transitionEngine.trigger(M,S,H,de)}listen(M,S,H,de,Te){if("@"==H.charAt(0)){const[Ue,rt]=Be(H);return this._timelineEngine.listen(Ue,S,rt,Te)}return this._transitionEngine.listen(M,S,H,de,Te)}flush(M=-1){this._transitionEngine.flush(M)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Jr(ue,M){let S=null,H=null;return Array.isArray(M)&&M.length?(S=Bs(M[0]),M.length>1&&(H=Bs(M[M.length-1]))):M&&(S=Bs(M)),S||H?new da(ue,S,H):null}let da=(()=>{class ue{constructor(S,H,de){this._element=S,this._startStyles=H,this._endStyles=de,this._state=0;let Te=ue.initialStylesByElement.get(S);Te||ue.initialStylesByElement.set(S,Te={}),this._initialStyles=Te}start(){this._state<1&&(this._startStyles&&ft(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ft(this._element,this._initialStyles),this._endStyles&&(ft(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ue.initialStylesByElement.delete(this._element),this._startStyles&&(Ft(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ft(this._element,this._endStyles),this._endStyles=null),ft(this._element,this._initialStyles),this._state=3)}}return ue.initialStylesByElement=new WeakMap,ue})();function Bs(ue){let M=null;const S=Object.keys(ue);for(let H=0;H<S.length;H++){const de=S[H];wa(de)&&(M=M||{},M[de]=ue[de])}return M}function wa(ue){return"display"===ue||"position"===ue}const Ys="animation",os="animationend";class Ra{constructor(M,S,H,de,Te,Ue,rt){this._element=M,this._name=S,this._duration=H,this._delay=de,this._easing=Te,this._fillMode=Ue,this._onDoneFn=rt,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=Ot=>this._handleCallback(Ot)}apply(){(function qa(ue,M){const S=ms(ue,"").trim();let H=0;S.length&&(H=function jo(ue,M){let S=0;for(let H=0;H<ue.length;H++)ue.charAt(H)===M&&S++;return S}(S,",")+1,M=`${S}, ${M}`),wo(ue,"",M)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Or(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Fi(this._element,this._name,"paused")}resume(){Fi(this._element,this._name,"running")}setPosition(M){const S=fs(this._element,this._name);this._position=M*this._duration,wo(this._element,"Delay",`-${this._position}ms`,S)}getPosition(){return this._position}_handleCallback(M){const S=M._ngTestManualTimestamp||Date.now(),H=1e3*parseFloat(M.elapsedTime.toFixed(3));M.animationName==this._name&&Math.max(S-this._startTime,0)>=this._delay&&H>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Or(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function So(ue,M){const H=ms(ue,"").split(","),de=Yo(H,M);de>=0&&(H.splice(de,1),wo(ue,"",H.join(",")))}(this._element,this._name))}}function Fi(ue,M,S){wo(ue,"PlayState",S,fs(ue,M))}function fs(ue,M){const S=ms(ue,"");return S.indexOf(",")>0?Yo(S.split(","),M):Yo([S],M)}function Yo(ue,M){for(let S=0;S<ue.length;S++)if(ue[S].indexOf(M)>=0)return S;return-1}function Or(ue,M,S){S?ue.removeEventListener(os,M):ue.addEventListener(os,M)}function wo(ue,M,S,H){const de=Ys+M;if(null!=H){const Te=ue.style[de];if(Te.length){const Ue=Te.split(",");Ue[H]=S,S=Ue.join(",")}}ue.style[de]=S}function ms(ue,M){return ue.style[Ys+M]||""}class as{constructor(M,S,H,de,Te,Ue,rt,Ot){this.element=M,this.keyframes=S,this.animationName=H,this._duration=de,this._delay=Te,this._finalStyles=rt,this._specialStyles=Ot,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ue||"linear",this.totalTime=de+Te,this._buildStyler()}onStart(M){this._onStartFns.push(M)}onDone(M){this._onDoneFns.push(M)}onDestroy(M){this._onDestroyFns.push(M)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(M=>M()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(M=>M()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(M=>M()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(M){this._styler.setPosition(M)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ra(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(M){const S="start"==M?this._onStartFns:this._onDoneFns;S.forEach(H=>H()),S.length=0}beforeDestroy(){this.init();const M={};if(this.hasStarted()){const S=this._state>=3;Object.keys(this._finalStyles).forEach(H=>{"offset"!=H&&(M[H]=S?this._finalStyles[H]:U(this.element,H))})}this.currentSnapshot=M}}class zs extends W.ZN{constructor(M,S){super(),this.element=M,this._startingStyles={},this.__initialized=!1,this._styles=ot(S)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(M=>{this._startingStyles[M]=this.element.style[M]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(M=>this.element.style.setProperty(M,this._styles[M])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(M=>{const S=this._startingStyles[M];S?this.element.style.setProperty(M,S):this.element.style.removeProperty(M)}),this._startingStyles=null,super.destroy())}}class Vs{constructor(){this._count=0}validateStyleProperty(M){return jt(M)}matchesElement(M,S){return!1}containsElement(M,S){return Dt(M,S)}query(M,S,H){return ke(M,S,H)}computeStyle(M,S,H){return window.getComputedStyle(M)[S]}buildKeyframeElement(M,S,H){H=H.map(rt=>ot(rt));let de=`@keyframes ${S} {\n`,Te="";H.forEach(rt=>{Te=" ";const Ot=parseFloat(rt.offset);de+=`${Te}${100*Ot}% {\n`,Te+=" ",Object.keys(rt).forEach(sn=>{const Mn=rt[sn];switch(sn){case"offset":return;case"easing":return void(Mn&&(de+=`${Te}animation-timing-function: ${Mn};\n`));default:return void(de+=`${Te}${sn}: ${Mn};\n`)}}),de+=`${Te}}\n`}),de+="}\n";const Ue=document.createElement("style");return Ue.textContent=de,Ue}animate(M,S,H,de,Te,Ue=[],rt){const Ot=Ue.filter(Hi=>Hi instanceof as),sn={};Zn(H,de)&&Ot.forEach(Hi=>{let fr=Hi.currentSnapshot;Object.keys(fr).forEach(Lr=>sn[Lr]=fr[Lr])});const Mn=function ls(ue){let M={};return ue&&(Array.isArray(ue)?ue:[ue]).forEach(H=>{Object.keys(H).forEach(de=>{"offset"==de||"easing"==de||(M[de]=H[de])})}),M}(S=ht(M,S,sn));if(0==H)return new zs(M,Mn);const oi="gen_css_kf_"+this._count++,vi=this.buildKeyframeElement(M,oi,S);(function ho(ue){var M;const S=null===(M=ue.getRootNode)||void 0===M?void 0:M.call(ue);return"undefined"!=typeof ShadowRoot&&S instanceof ShadowRoot?S:document.head})(M).appendChild(vi);const mi=Jr(M,S),Ci=new as(M,S,oi,H,de,Te,Mn,mi);return Ci.onDestroy(()=>function As(ue){ue.parentNode.removeChild(ue)}(vi)),Ci}}class pa{constructor(M,S,H,de){this.element=M,this.keyframes=S,this.options=H,this._specialStyles=de,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=H.duration,this._delay=H.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(M=>M()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const M=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,M,this.options),this._finalKeyframe=M.length?M[M.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(M,S,H){return M.animate(S,H)}onStart(M){this._onStartFns.push(M)}onDone(M){this._onDoneFns.push(M)}onDestroy(M){this._onDestroyFns.push(M)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(M=>M()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(M=>M()),this._onDestroyFns=[])}setPosition(M){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=M*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const M={};if(this.hasStarted()){const S=this._finalKeyframe;Object.keys(S).forEach(H=>{"offset"!=H&&(M[H]=this._finished?S[H]:U(this.element,H))})}this.currentSnapshot=M}triggerCallback(M){const S="start"==M?this._onStartFns:this._onDoneFns;S.forEach(H=>H()),S.length=0}}class Fa{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(te().toString()),this._cssKeyframesDriver=new Vs}validateStyleProperty(M){return jt(M)}matchesElement(M,S){return!1}containsElement(M,S){return Dt(M,S)}query(M,S,H){return ke(M,S,H)}computeStyle(M,S,H){return window.getComputedStyle(M)[S]}overrideWebAnimationsSupport(M){this._isNativeImpl=M}animate(M,S,H,de,Te,Ue=[],rt){if(!rt&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(M,S,H,de,Te,Ue);const Mn={duration:H,delay:de,fill:0==de?"both":"forwards"};Te&&(Mn.easing=Te);const oi={},vi=Ue.filter(mi=>mi instanceof pa);Zn(H,de)&&vi.forEach(mi=>{let Ci=mi.currentSnapshot;Object.keys(Ci).forEach(Hi=>oi[Hi]=Ci[Hi])});const Ni=Jr(M,S=ht(M,S=S.map(mi=>_i(mi,!1)),oi));return new pa(M,S,Mn,Ni)}}function te(){return f()&&Element.prototype.animate||{}}var ve=V(9808);let ne=(()=>{class ue extends W._j{constructor(S,H){super(),this._nextAnimationId=0,this._renderer=S.createRenderer(H.body,{id:"0",encapsulation:D.ifc.None,styles:[],data:{animation:[]}})}build(S){const H=this._nextAnimationId.toString();this._nextAnimationId++;const de=Array.isArray(S)?(0,W.vP)(S):S;return Yt(this._renderer,null,H,"register",[de]),new De(H,this._renderer)}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(D.FYo),D.LFG(ve.K0))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class De extends W.LC{constructor(M,S){super(),this._id=M,this._renderer=S}create(M,S){return new ut(this._id,M,S||{},this._renderer)}}class ut{constructor(M,S,H,de){this.id=M,this.element=S,this._renderer=de,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",H)}_listen(M,S){return this._renderer.listen(this.element,`@@${this.id}:${M}`,S)}_command(M,...S){return Yt(this._renderer,this.element,this.id,M,S)}onDone(M){this._listen("done",M)}onStart(M){this._listen("start",M)}onDestroy(M){this._listen("destroy",M)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(M){this._command("setPosition",M)}getPosition(){var M,S;return null!==(S=null===(M=this._renderer.engine.players[+this.id])||void 0===M?void 0:M.getPosition())&&void 0!==S?S:0}}function Yt(ue,M,S,H,de){return ue.setProperty(M,`@@${S}:${H}`,de)}const Hn="@.disabled";let wi=(()=>{class ue{constructor(S,H,de){this.delegate=S,this.engine=H,this._zone=de,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),H.onRemovalComplete=(Te,Ue)=>{const rt=null==Ue?void 0:Ue.parentNode(Te);rt&&Ue.removeChild(rt,Te)}}createRenderer(S,H){const Te=this.delegate.createRenderer(S,H);if(!(S&&H&&H.data&&H.data.animation)){let Mn=this._rendererCache.get(Te);return Mn||(Mn=new lr("",Te,this.engine),this._rendererCache.set(Te,Mn)),Mn}const Ue=H.id,rt=H.id+"-"+this._currentId;this._currentId++,this.engine.register(rt,S);const Ot=Mn=>{Array.isArray(Mn)?Mn.forEach(Ot):this.engine.registerTrigger(Ue,rt,S,Mn.name,Mn)};return H.data.animation.forEach(Ot),new Cr(this,rt,Te,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(S,H,de){S>=0&&S<this._microtaskId?this._zone.run(()=>H(de)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Te=>{const[Ue,rt]=Te;Ue(rt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([H,de]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(D.FYo),D.LFG(Ss),D.LFG(D.R0b))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class lr{constructor(M,S,H){this.namespaceId=M,this.delegate=S,this.engine=H,this.destroyNode=this.delegate.destroyNode?de=>S.destroyNode(de):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(M,S){return this.delegate.createElement(M,S)}createComment(M){return this.delegate.createComment(M)}createText(M){return this.delegate.createText(M)}appendChild(M,S){this.delegate.appendChild(M,S),this.engine.onInsert(this.namespaceId,S,M,!1)}insertBefore(M,S,H,de=!0){this.delegate.insertBefore(M,S,H),this.engine.onInsert(this.namespaceId,S,M,de)}removeChild(M,S,H){this.engine.onRemove(this.namespaceId,S,this.delegate,H)}selectRootElement(M,S){return this.delegate.selectRootElement(M,S)}parentNode(M){return this.delegate.parentNode(M)}nextSibling(M){return this.delegate.nextSibling(M)}setAttribute(M,S,H,de){this.delegate.setAttribute(M,S,H,de)}removeAttribute(M,S,H){this.delegate.removeAttribute(M,S,H)}addClass(M,S){this.delegate.addClass(M,S)}removeClass(M,S){this.delegate.removeClass(M,S)}setStyle(M,S,H,de){this.delegate.setStyle(M,S,H,de)}removeStyle(M,S,H){this.delegate.removeStyle(M,S,H)}setProperty(M,S,H){"@"==S.charAt(0)&&S==Hn?this.disableAnimations(M,!!H):this.delegate.setProperty(M,S,H)}setValue(M,S){this.delegate.setValue(M,S)}listen(M,S,H){return this.delegate.listen(M,S,H)}disableAnimations(M,S){this.engine.disableAnimations(M,S)}}class Cr extends lr{constructor(M,S,H,de){super(S,H,de),this.factory=M,this.namespaceId=S}setProperty(M,S,H){"@"==S.charAt(0)?"."==S.charAt(1)&&S==Hn?this.disableAnimations(M,H=void 0===H||!!H):this.engine.process(this.namespaceId,M,S.substr(1),H):this.delegate.setProperty(M,S,H)}listen(M,S,H){if("@"==S.charAt(0)){const de=function ji(ue){switch(ue){case"body":return document.body;case"document":return document;case"window":return window;default:return ue}}(M);let Te=S.substr(1),Ue="";return"@"!=Te.charAt(0)&&([Te,Ue]=function X(ue){const M=ue.indexOf(".");return[ue.substring(0,M),ue.substr(M+1)]}(Te)),this.engine.listen(this.namespaceId,de,Te,Ue,rt=>{this.factory.scheduleListenerCallback(rt._data||-1,H,rt)})}return this.delegate.listen(M,S,H)}}let q=(()=>{class ue extends Ss{constructor(S,H,de){super(S.body,H,de)}ngOnDestroy(){this.flush()}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(ve.K0),D.LFG(zt),D.LFG(Ke))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const Fn=new D.OlP("AnimationModuleType"),hr=[{provide:W._j,useClass:ne},{provide:Ke,useFactory:function Se(){return new nt}},{provide:Ss,useClass:q},{provide:D.FYo,useFactory:function Lt(ue,M,S){return new wi(ue,M,S)},deps:[l.se,Ss,D.R0b]}],$r=[{provide:zt,useFactory:function N(){return function kr(){return"function"==typeof te()}()?new Fa:new Vs}},{provide:Fn,useValue:"BrowserAnimations"},...hr],Is=[{provide:zt,useClass:nn},{provide:Fn,useValue:"NoopAnimations"},...hr];let To=(()=>{class ue{static withConfig(S){return{ngModule:ue,providers:S.disableAnimations?Is:$r}}}return ue.\u0275fac=function(S){return new(S||ue)},ue.\u0275mod=D.oAB({type:ue}),ue.\u0275inj=D.cJS({providers:$r,imports:[l.b2]}),ue})()},2313:(Sn,wt,V)=>{"use strict";V.d(wt,{b2:()=>er,H7:()=>fn,q6:()=>Jn,se:()=>Xt});var D=V(9808),l=V(5e3);class W extends D.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class f extends W{static makeCurrent(){(0,D.HT)(new f)}onAndCancel(it,J,F){return it.addEventListener(J,F,!1),()=>{it.removeEventListener(J,F,!1)}}dispatchEvent(it,J){it.dispatchEvent(J)}remove(it){it.parentNode&&it.parentNode.removeChild(it)}createElement(it,J){return(J=J||this.getDefaultDocument()).createElement(it)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(it){return it.nodeType===Node.ELEMENT_NODE}isShadowRoot(it){return it instanceof DocumentFragment}getGlobalEventTarget(it,J){return"window"===J?window:"document"===J?it:"body"===J?it.body:null}getBaseHref(it){const J=function qe(){return je=je||document.querySelector("base"),je?je.getAttribute("href"):null}();return null==J?null:function Le(St){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",St);const it=Oe.pathname;return"/"===it.charAt(0)?it:`/${it}`}(J)}resetBaseElement(){je=null}getUserAgent(){return window.navigator.userAgent}getCookie(it){return(0,D.Mx)(document.cookie,it)}}let Oe,je=null;const he=new l.OlP("TRANSITION_ID"),He=[{provide:l.ip1,useFactory:function ze(St,it,J){return()=>{J.get(l.CZH).donePromise.then(()=>{const F=(0,D.q)(),K=it.querySelectorAll(`style[ng-transition="${St}"]`);for(let ge=0;ge<K.length;ge++)F.remove(K[ge])})}},deps:[he,D.K0,l.zs3],multi:!0}];class Be{static init(){(0,l.VLi)(new Be)}addToWindow(it){l.dqk.getAngularTestability=(F,K=!0)=>{const ge=it.findTestabilityInTree(F,K);if(null==ge)throw new Error("Could not find testability for element.");return ge},l.dqk.getAllAngularTestabilities=()=>it.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>it.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(F=>{const K=l.dqk.getAllAngularTestabilities();let ge=K.length,Ee=!1;const Re=function(Ke){Ee=Ee||Ke,ge--,0==ge&&F(Ee)};K.forEach(function(Ke){Ke.whenStable(Re)})})}findTestabilityInTree(it,J,F){if(null==J)return null;const K=it.getTestability(J);return null!=K?K:F?(0,D.q)().isShadowRoot(J)?this.findTestabilityInTree(it,J.host,!0):this.findTestabilityInTree(it,J.parentElement,!0):null}}let gt=(()=>{class St{build(){return new XMLHttpRequest}}return St.\u0275fac=function(J){return new(J||St)},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();const Ye=new l.OlP("EventManagerPlugins");let et=(()=>{class St{constructor(J,F){this._zone=F,this._eventNameToPlugin=new Map,J.forEach(K=>K.manager=this),this._plugins=J.slice().reverse()}addEventListener(J,F,K){return this._findPluginFor(F).addEventListener(J,F,K)}addGlobalEventListener(J,F,K){return this._findPluginFor(F).addGlobalEventListener(J,F,K)}getZone(){return this._zone}_findPluginFor(J){const F=this._eventNameToPlugin.get(J);if(F)return F;const K=this._plugins;for(let ge=0;ge<K.length;ge++){const Ee=K[ge];if(Ee.supports(J))return this._eventNameToPlugin.set(J,Ee),Ee}throw new Error(`No event manager plugin found for event ${J}`)}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(Ye),l.LFG(l.R0b))},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();class bt{constructor(it){this._doc=it}addGlobalEventListener(it,J,F){const K=(0,D.q)().getGlobalEventTarget(this._doc,it);if(!K)throw new Error(`Unsupported event target ${K} for event ${J}`);return this.addEventListener(K,J,F)}}let We=(()=>{class St{constructor(){this._stylesSet=new Set}addStyles(J){const F=new Set;J.forEach(K=>{this._stylesSet.has(K)||(this._stylesSet.add(K),F.add(K))}),this.onStylesAdded(F)}onStylesAdded(J){}getAllStyles(){return Array.from(this._stylesSet)}}return St.\u0275fac=function(J){return new(J||St)},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})(),Ut=(()=>{class St extends We{constructor(J){super(),this._doc=J,this._hostNodes=new Map,this._hostNodes.set(J.head,[])}_addStylesToHost(J,F,K){J.forEach(ge=>{const Ee=this._doc.createElement("style");Ee.textContent=ge,K.push(F.appendChild(Ee))})}addHost(J){const F=[];this._addStylesToHost(this._stylesSet,J,F),this._hostNodes.set(J,F)}removeHost(J){const F=this._hostNodes.get(J);F&&F.forEach(jt),this._hostNodes.delete(J)}onStylesAdded(J){this._hostNodes.forEach((F,K)=>{this._addStylesToHost(J,K,F)})}ngOnDestroy(){this._hostNodes.forEach(J=>J.forEach(jt))}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(D.K0))},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();function jt(St){(0,D.q)().remove(St)}const un={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function yt(St,it,J){for(let F=0;F<it.length;F++){let K=it[F];Array.isArray(K)?yt(St,K,J):(K=K.replace(Dt,St),J.push(K))}return J}function ct(St){return it=>{if("__ngUnwrap__"===it)return St;!1===St(it)&&(it.preventDefault(),it.returnValue=!1)}}let Xt=(()=>{class St{constructor(J,F,K){this.eventManager=J,this.sharedStylesHost=F,this.appId=K,this.rendererByCompId=new Map,this.defaultRenderer=new Ct(J)}createRenderer(J,F){if(!J||!F)return this.defaultRenderer;switch(F.encapsulation){case l.ifc.Emulated:{let K=this.rendererByCompId.get(F.id);return K||(K=new zi(this.eventManager,this.sharedStylesHost,F,this.appId),this.rendererByCompId.set(F.id,K)),K.applyToHost(J),K}case 1:case l.ifc.ShadowDom:return new Dn(this.eventManager,this.sharedStylesHost,J,F);default:if(!this.rendererByCompId.has(F.id)){const K=yt(F.id,F.styles,[]);this.sharedStylesHost.addStyles(K),this.rendererByCompId.set(F.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(et),l.LFG(Ut),l.LFG(l.AFp))},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();class Ct{constructor(it){this.eventManager=it,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(it,J){return J?document.createElementNS(un[J]||J,it):document.createElement(it)}createComment(it){return document.createComment(it)}createText(it){return document.createTextNode(it)}appendChild(it,J){it.appendChild(J)}insertBefore(it,J,F){it&&it.insertBefore(J,F)}removeChild(it,J){it&&it.removeChild(J)}selectRootElement(it,J){let F="string"==typeof it?document.querySelector(it):it;if(!F)throw new Error(`The selector "${it}" did not match any elements`);return J||(F.textContent=""),F}parentNode(it){return it.parentNode}nextSibling(it){return it.nextSibling}setAttribute(it,J,F,K){if(K){J=K+":"+J;const ge=un[K];ge?it.setAttributeNS(ge,J,F):it.setAttribute(J,F)}else it.setAttribute(J,F)}removeAttribute(it,J,F){if(F){const K=un[F];K?it.removeAttributeNS(K,J):it.removeAttribute(`${F}:${J}`)}else it.removeAttribute(J)}addClass(it,J){it.classList.add(J)}removeClass(it,J){it.classList.remove(J)}setStyle(it,J,F,K){K&(l.JOm.DashCase|l.JOm.Important)?it.style.setProperty(J,F,K&l.JOm.Important?"important":""):it.style[J]=F}removeStyle(it,J,F){F&l.JOm.DashCase?it.style.removeProperty(J):it.style[J]=""}setProperty(it,J,F){it[J]=F}setValue(it,J){it.nodeValue=J}listen(it,J,F){return"string"==typeof it?this.eventManager.addGlobalEventListener(it,J,ct(F)):this.eventManager.addEventListener(it,J,ct(F))}}class zi extends Ct{constructor(it,J,F,K){super(it),this.component=F;const ge=yt(K+"-"+F.id,F.styles,[]);J.addStyles(ge),this.contentAttr=function tn(St){return"_ngcontent-%COMP%".replace(Dt,St)}(K+"-"+F.id),this.hostAttr=function st(St){return"_nghost-%COMP%".replace(Dt,St)}(K+"-"+F.id)}applyToHost(it){super.setAttribute(it,this.hostAttr,"")}createElement(it,J){const F=super.createElement(it,J);return super.setAttribute(F,this.contentAttr,""),F}}class Dn extends Ct{constructor(it,J,F,K){super(it),this.sharedStylesHost=J,this.hostEl=F,this.shadowRoot=F.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ge=yt(K.id,K.styles,[]);for(let Ee=0;Ee<ge.length;Ee++){const Re=document.createElement("style");Re.textContent=ge[Ee],this.shadowRoot.appendChild(Re)}}nodeOrShadowRoot(it){return it===this.hostEl?this.shadowRoot:it}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(it,J){return super.appendChild(this.nodeOrShadowRoot(it),J)}insertBefore(it,J,F){return super.insertBefore(this.nodeOrShadowRoot(it),J,F)}removeChild(it,J){return super.removeChild(this.nodeOrShadowRoot(it),J)}parentNode(it){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(it)))}}let Tn=(()=>{class St extends bt{constructor(J){super(J)}supports(J){return!0}addEventListener(J,F,K){return J.addEventListener(F,K,!1),()=>this.removeEventListener(J,F,K)}removeEventListener(J,F,K){return J.removeEventListener(F,K)}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(D.K0))},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();const Ii=["alt","control","meta","shift"],ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_i={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},kn={alt:St=>St.altKey,control:St=>St.ctrlKey,meta:St=>St.metaKey,shift:St=>St.shiftKey};let ii=(()=>{class St extends bt{constructor(J){super(J)}supports(J){return null!=St.parseEventName(J)}addEventListener(J,F,K){const ge=St.parseEventName(F),Ee=St.eventCallback(ge.fullKey,K,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.q)().onAndCancel(J,ge.domEventName,Ee))}static parseEventName(J){const F=J.toLowerCase().split("."),K=F.shift();if(0===F.length||"keydown"!==K&&"keyup"!==K)return null;const ge=St._normalizeKey(F.pop());let Ee="";if(Ii.forEach(Ke=>{const $e=F.indexOf(Ke);$e>-1&&(F.splice($e,1),Ee+=Ke+".")}),Ee+=ge,0!=F.length||0===ge.length)return null;const Re={};return Re.domEventName=K,Re.fullKey=Ee,Re}static getEventFullKey(J){let F="",K=function ft(St){let it=St.key;if(null==it){if(it=St.keyIdentifier,null==it)return"Unidentified";it.startsWith("U+")&&(it=String.fromCharCode(parseInt(it.substring(2),16)),3===St.location&&_i.hasOwnProperty(it)&&(it=_i[it]))}return ir[it]||it}(J);return K=K.toLowerCase()," "===K?K="space":"."===K&&(K="dot"),Ii.forEach(ge=>{ge!=K&&kn[ge](J)&&(F+=ge+".")}),F+=K,F}static eventCallback(J,F,K){return ge=>{St.getEventFullKey(ge)===J&&K.runGuarded(()=>F(ge))}}static _normalizeKey(J){return"esc"===J?"escape":J}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(D.K0))},St.\u0275prov=l.Yz7({token:St,factory:St.\u0275fac}),St})();const Jn=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:D.bD},{provide:l.g9A,useValue:function Ft(){f.makeCurrent(),Be.init()},multi:!0},{provide:D.K0,useFactory:function gn(){return(0,l.RDi)(document),document},deps:[]}]),Pi=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function on(){return new l.qLn},deps:[]},{provide:Ye,useClass:Tn,multi:!0,deps:[D.K0,l.R0b,l.Lbi]},{provide:Ye,useClass:ii,multi:!0,deps:[D.K0]},{provide:Xt,useClass:Xt,deps:[et,Ut,l.AFp]},{provide:l.FYo,useExisting:Xt},{provide:We,useExisting:Ut},{provide:Ut,useClass:Ut,deps:[D.K0]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:et,useClass:et,deps:[Ye,l.R0b]},{provide:D.JF,useClass:gt,deps:[]}];let er=(()=>{class St{constructor(J){if(J)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(J){return{ngModule:St,providers:[{provide:l.AFp,useValue:J.appId},{provide:he,useExisting:l.AFp},He]}}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(St,12))},St.\u0275mod=l.oAB({type:St}),St.\u0275inj=l.cJS({providers:Pi,imports:[D.ez,l.hGG]}),St})();"undefined"!=typeof window&&window;let fn=(()=>{class St{}return St.\u0275fac=function(J){return new(J||St)},St.\u0275prov=l.Yz7({token:St,factory:function(J){let F=null;return F=J?new(J||St):l.LFG(Ui),F},providedIn:"root"}),St})(),Ui=(()=>{class St extends fn{constructor(J){super(),this._doc=J}sanitize(J,F){if(null==F)return null;switch(J){case l.q3G.NONE:return F;case l.q3G.HTML:return(0,l.qzn)(F,"HTML")?(0,l.z3N)(F):(0,l.EiD)(this._doc,String(F)).toString();case l.q3G.STYLE:return(0,l.qzn)(F,"Style")?(0,l.z3N)(F):F;case l.q3G.SCRIPT:if((0,l.qzn)(F,"Script"))return(0,l.z3N)(F);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(F),(0,l.qzn)(F,"URL")?(0,l.z3N)(F):(0,l.mCW)(String(F));case l.q3G.RESOURCE_URL:if((0,l.qzn)(F,"ResourceURL"))return(0,l.z3N)(F);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${J} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(J){return(0,l.JVY)(J)}bypassSecurityTrustStyle(J){return(0,l.L6k)(J)}bypassSecurityTrustScript(J){return(0,l.eBb)(J)}bypassSecurityTrustUrl(J){return(0,l.LAX)(J)}bypassSecurityTrustResourceUrl(J){return(0,l.pB0)(J)}}return St.\u0275fac=function(J){return new(J||St)(l.LFG(D.K0))},St.\u0275prov=l.Yz7({token:St,factory:function(J){let F=null;return F=J?new J:function bi(St){return new Ui(St.get(D.K0))}(l.LFG(l.zs3)),F},providedIn:"root"}),St})()},4521:(Sn,wt,V)=>{"use strict";V.d(wt,{gz:()=>Ji,F0:()=>Io,Od:()=>ks,yS:()=>An,Bz:()=>ql,lC:()=>ss});var D=V(5e3),l=V(8306),W=V(727),f=V(4482),je=V(5403);function qe(){return(0,f.e)((z,P)=>{let A=null;z._refCount++;const Q=new je.Q(P,void 0,void 0,void 0,()=>{if(!z||z._refCount<=0||0<--z._refCount)return void(A=null);const se=z._connection,be=A;A=null,se&&(!be||se===be)&&se.unsubscribe(),P.unsubscribe()});z.subscribe(Q),Q.closed||(A=z.connect())})}class Oe extends l.y{constructor(P,A){super(),this.source=P,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,f.A)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,null==P||P.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new W.w0;const A=this.getSubject();P.add(this.source.subscribe(new je.Q(A,void 0,()=>{this._teardown(),A.complete()},Q=>{this._teardown(),A.error(Q)},()=>this._teardown()))),P.closed&&(this._connection=null,P=W.w0.EMPTY)}return P}refCount(){return qe()(this)}}var Le=V(2076),he=V(9646),ze=V(1135),He=V(9841),Be=V(6805),gt=V(7272),Ye=V(9770),et=V(515),bt=V(7579);function We(z,P,A,Q,se){return(be,Ve)=>{let Fe=A,Et=P,ei=0;be.subscribe(new je.Q(Ve,Yi=>{const Ei=ei++;Et=Fe?z(Et,Yi,Ei):(Fe=!0,Yi),Q&&Ve.next(Et)},se&&(()=>{Fe&&Ve.next(Et),Ve.complete()})))}}function Ut(z,P){return(0,f.e)(We(z,P,arguments.length>=2,!0))}var jt=V(9300);function un(z){return z<=0?()=>et.E:(0,f.e)((P,A)=>{let Q=[];P.subscribe(new je.Q(A,se=>{Q.push(se),z<Q.length&&Q.shift()},()=>{for(const se of Q)A.next(se);A.complete()},void 0,()=>{Q=null}))})}var Dt=V(8068),ke=V(6590),ot=V(4671),zt=V(4004),tn=V(3900),st=V(5698),yt=V(8675),ct=V(262),Tt=V(4351),Xt=V(590),Ct=V(5577),vn=V(8505),fi=V(8746),zi=V(8189),Dn=V(9808);class Tn{constructor(P,A){this.id=P,this.url=A}}class Ii extends Tn{constructor(P,A,Q="imperative",se=null){super(P,A),this.navigationTrigger=Q,this.restoredState=se}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ci extends Tn{constructor(P,A,Q){super(P,A),this.urlAfterRedirects=Q}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ir extends Tn{constructor(P,A,Q){super(P,A),this.reason=Q}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _i extends Tn{constructor(P,A,Q){super(P,A),this.error=Q}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kn extends Tn{constructor(P,A,Q,se){super(P,A),this.urlAfterRedirects=Q,this.state=se}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends Tn{constructor(P,A,Q,se){super(P,A),this.urlAfterRedirects=Q,this.state=se}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ft extends Tn{constructor(P,A,Q,se,be){super(P,A),this.urlAfterRedirects=Q,this.state=se,this.shouldActivate=be}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ft extends Tn{constructor(P,A,Q,se){super(P,A),this.urlAfterRedirects=Q,this.state=se}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class on extends Tn{constructor(P,A,Q,se){super(P,A),this.urlAfterRedirects=Q,this.state=se}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gn{constructor(P){this.route=P}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zn{constructor(P){this.route=P}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jn{constructor(P){this.snapshot=P}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pi{constructor(P){this.snapshot=P}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class er{constructor(P){this.snapshot=P}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sr{constructor(P){this.snapshot=P}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(P,A,Q){this.routerEvent=P,this.position=A,this.anchor=Q}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ri="primary";class Zn{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A[0]:A}return null}getAll(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function ht(z){return new Zn(z)}const $="ngNavigationCancelingError";function U(z){const P=Error("NavigationCancelingError: "+z);return P[$]=!0,P}function B(z,P,A){const Q=A.path.split("/");if(Q.length>z.length||"full"===A.pathMatch&&(P.hasChildren()||Q.length<z.length))return null;const se={};for(let be=0;be<Q.length;be++){const Ve=Q[be],Fe=z[be];if(Ve.startsWith(":"))se[Ve.substring(1)]=Fe;else if(Ve!==Fe.path)return null}return{consumed:z.slice(0,Q.length),posParams:se}}function fe(z,P){const A=z?Object.keys(z):void 0,Q=P?Object.keys(P):void 0;if(!A||!Q||A.length!=Q.length)return!1;let se;for(let be=0;be<A.length;be++)if(se=A[be],!tt(z[se],P[se]))return!1;return!0}function tt(z,P){if(Array.isArray(z)&&Array.isArray(P)){if(z.length!==P.length)return!1;const A=[...z].sort(),Q=[...P].sort();return A.every((se,be)=>Q[be]===se)}return z===P}function It(z){return Array.prototype.concat.apply([],z)}function _t(z){return z.length>0?z[z.length-1]:null}function _n(z,P){for(const A in z)z.hasOwnProperty(A)&&P(z[A],A)}function Vn(z){return(0,D.CqO)(z)?z:(0,D.QGY)(z)?(0,Le.D)(Promise.resolve(z)):(0,he.of)(z)}const en={exact:function Qn(z,P,A){if(!fn(z.segments,P.segments)||!Ce(z.segments,P.segments,A)||z.numberOfChildren!==P.numberOfChildren)return!1;for(const Q in P.children)if(!z.children[Q]||!Qn(z.children[Q],P.children[Q],A))return!1;return!0},subset:Bt},pn={exact:function Ai(z,P){return fe(z,P)},subset:function Ln(z,P){return Object.keys(P).length<=Object.keys(z).length&&Object.keys(P).every(A=>tt(z[A],P[A]))},ignored:()=>!0};function qt(z,P,A){return en[A.paths](z.root,P.root,A.matrixParams)&&pn[A.queryParams](z.queryParams,P.queryParams)&&!("exact"===A.fragment&&z.fragment!==P.fragment)}function Bt(z,P,A){return pt(z,P,P.segments,A)}function pt(z,P,A,Q){if(z.segments.length>A.length){const se=z.segments.slice(0,A.length);return!(!fn(se,A)||P.hasChildren()||!Ce(se,A,Q))}if(z.segments.length===A.length){if(!fn(z.segments,A)||!Ce(z.segments,A,Q))return!1;for(const se in P.children)if(!z.children[se]||!Bt(z.children[se],P.children[se],Q))return!1;return!0}{const se=A.slice(0,z.segments.length),be=A.slice(z.segments.length);return!!(fn(z.segments,se)&&Ce(z.segments,se,Q)&&z.children[ri])&&pt(z.children[ri],P,be,Q)}}function Ce(z,P,A){return P.every((Q,se)=>pn[A](z[se].parameters,Q.parameters))}class Ae{constructor(P,A,Q){this.root=P,this.queryParams=A,this.fragment=Q}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ht(this.queryParams)),this._queryParamMap}toString(){return St.serialize(this)}}class ye{constructor(P,A){this.segments=P,this.children=A,this.parent=null,_n(A,(Q,se)=>Q.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return it(this)}}class lt{constructor(P,A){this.path=P,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=ht(this.parameters)),this._parameterMap}toString(){return $e(this)}}function fn(z,P){return z.length===P.length&&z.every((A,Q)=>A.path===P[Q].path)}class Ui{}class tr{parse(P){const A=new Un(P);return new Ae(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(P){const A=`/${J(P.root,!0)}`,Q=function at(z){const P=Object.keys(z).map(A=>{const Q=z[A];return Array.isArray(Q)?Q.map(se=>`${K(A)}=${K(se)}`).join("&"):`${K(A)}=${K(Q)}`}).filter(A=>!!A);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${A}${Q}${"string"==typeof P.fragment?`#${function ge(z){return encodeURI(z)}(P.fragment)}`:""}`}}const St=new tr;function it(z){return z.segments.map(P=>$e(P)).join("/")}function J(z,P){if(!z.hasChildren())return it(z);if(P){const A=z.children[ri]?J(z.children[ri],!1):"",Q=[];return _n(z.children,(se,be)=>{be!==ri&&Q.push(`${be}:${J(se,!1)}`)}),Q.length>0?`${A}(${Q.join("//")})`:A}{const A=function bi(z,P){let A=[];return _n(z.children,(Q,se)=>{se===ri&&(A=A.concat(P(Q,se)))}),_n(z.children,(Q,se)=>{se!==ri&&(A=A.concat(P(Q,se)))}),A}(z,(Q,se)=>se===ri?[J(z.children[ri],!1)]:[`${se}:${J(Q,!1)}`]);return 1===Object.keys(z.children).length&&null!=z.children[ri]?`${it(z)}/${A[0]}`:`${it(z)}/(${A.join("//")})`}}function F(z){return encodeURIComponent(z).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function K(z){return F(z).replace(/%3B/gi,";")}function Ee(z){return F(z).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Re(z){return decodeURIComponent(z)}function Ke(z){return Re(z.replace(/\+/g,"%20"))}function $e(z){return`${Ee(z.path)}${function nt(z){return Object.keys(z).map(P=>`;${Ee(P)}=${Ee(z[P])}`).join("")}(z.parameters)}`}const Nt=/^[^\/()?;=#]+/;function rn(z){const P=z.match(Nt);return P?P[0]:""}const Rt=/^[^=?&#]+/,an=/^[^&#]+/;class Un{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let Q={};return this.peekStartsWith("(")&&(Q=this.parseParens(!1)),(P.length>0||Object.keys(A).length>0)&&(Q[ri]=new ye(P,A)),Q}parseSegment(){const P=rn(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(P),new lt(Re(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const A=rn(this.remaining);if(!A)return;this.capture(A);let Q="";if(this.consumeOptional("=")){const se=rn(this.remaining);se&&(Q=se,this.capture(Q))}P[Re(A)]=Re(Q)}parseQueryParam(P){const A=function Vt(z){const P=z.match(Rt);return P?P[0]:""}(this.remaining);if(!A)return;this.capture(A);let Q="";if(this.consumeOptional("=")){const Ve=function Cn(z){const P=z.match(an);return P?P[0]:""}(this.remaining);Ve&&(Q=Ve,this.capture(Q))}const se=Ke(A),be=Ke(Q);if(P.hasOwnProperty(se)){let Ve=P[se];Array.isArray(Ve)||(Ve=[Ve],P[se]=Ve),Ve.push(be)}else P[se]=be}parseParens(P){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Q=rn(this.remaining),se=this.remaining[Q.length];if("/"!==se&&")"!==se&&";"!==se)throw new Error(`Cannot parse url '${this.url}'`);let be;Q.indexOf(":")>-1?(be=Q.substr(0,Q.indexOf(":")),this.capture(be),this.capture(":")):P&&(be=ri);const Ve=this.parseChildren();A[be]=1===Object.keys(Ve).length?Ve[ri]:new ye([],Ve),this.consumeOptional("//")}return A}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new Error(`Expected "${P}".`)}}class Li{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const A=this.pathFromRoot(P);return A.length>1?A[A.length-2]:null}children(P){const A=ui(P,this._root);return A?A.children.map(Q=>Q.value):[]}firstChild(P){const A=ui(P,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(P){const A=xi(P,this._root);return A.length<2?[]:A[A.length-2].children.map(se=>se.value).filter(se=>se!==P)}pathFromRoot(P){return xi(P,this._root).map(A=>A.value)}}function ui(z,P){if(z===P.value)return P;for(const A of P.children){const Q=ui(z,A);if(Q)return Q}return null}function xi(z,P){if(z===P.value)return[P];for(const A of P.children){const Q=xi(z,A);if(Q.length)return Q.unshift(P),Q}return[]}class Rn{constructor(P,A){this.value=P,this.children=A}toString(){return`TreeNode(${this.value})`}}function pi(z){const P={};return z&&z.children.forEach(A=>P[A.value.outlet]=A),P}class ar extends Li{constructor(P,A){super(P),this.snapshot=A,Vo(this,P)}toString(){return this.snapshot.toString()}}function si(z,P){const A=function wr(z,P){const Ve=new Ri([],{},{},"",{},ri,P,null,z.root,-1,{});return new co("",new Rn(Ve,[]))}(z,P),Q=new ze.X([new lt("",{})]),se=new ze.X({}),be=new ze.X({}),Ve=new ze.X({}),Fe=new ze.X(""),Et=new Ji(Q,se,Ve,Fe,be,ri,P,A.root);return Et.snapshot=A.root,new ar(new Rn(Et,[]),A)}class Ji{constructor(P,A,Q,se,be,Ve,Fe,Et){this.url=P,this.params=A,this.queryParams=Q,this.fragment=se,this.data=be,this.outlet=Ve,this.component=Fe,this._futureSnapshot=Et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,zt.U)(P=>ht(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,zt.U)(P=>ht(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bo(z,P="emptyOnly"){const A=z.pathFromRoot;let Q=0;if("always"!==P)for(Q=A.length-1;Q>=1;){const se=A[Q],be=A[Q-1];if(se.routeConfig&&""===se.routeConfig.path)Q--;else{if(be.component)break;Q--}}return function zo(z){return z.reduce((P,A)=>({params:Object.assign(Object.assign({},P.params),A.params),data:Object.assign(Object.assign({},P.data),A.data),resolve:Object.assign(Object.assign({},P.resolve),A._resolvedData)}),{params:{},data:{},resolve:{}})}(A.slice(Q))}class Ri{constructor(P,A,Q,se,be,Ve,Fe,Et,ei,Yi,Ei){this.url=P,this.params=A,this.queryParams=Q,this.fragment=se,this.data=be,this.outlet=Ve,this.component=Fe,this.routeConfig=Et,this._urlSegment=ei,this._lastPathIndex=Yi,this._resolve=Ei}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ht(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ht(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Q=>Q.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class co extends Li{constructor(P,A){super(A),this.url=P,Vo(this,A)}toString(){return _r(this._root)}}function Vo(z,P){P.value._routerState=z,P.children.forEach(A=>Vo(z,A))}function _r(z){const P=z.children.length>0?` { ${z.children.map(_r).join(", ")} } `:"";return`${z.value}${P}`}function Zi(z){if(z.snapshot){const P=z.snapshot,A=z._futureSnapshot;z.snapshot=A,fe(P.queryParams,A.queryParams)||z.queryParams.next(A.queryParams),P.fragment!==A.fragment&&z.fragment.next(A.fragment),fe(P.params,A.params)||z.params.next(A.params),function ie(z,P){if(z.length!==P.length)return!1;for(let A=0;A<z.length;++A)if(!fe(z[A],P[A]))return!1;return!0}(P.url,A.url)||z.url.next(A.url),fe(P.data,A.data)||z.data.next(A.data)}else z.snapshot=z._futureSnapshot,z.data.next(z._futureSnapshot.data)}function to(z,P){const A=fe(z.params,P.params)&&function Pt(z,P){return fn(z,P)&&z.every((A,Q)=>fe(A.parameters,P[Q].parameters))}(z.url,P.url);return A&&!(!z.parent!=!P.parent)&&(!z.parent||to(z.parent,P.parent))}function Pr(z,P,A){if(A&&z.shouldReuseRoute(P.value,A.value.snapshot)){const Q=A.value;Q._futureSnapshot=P.value;const se=function Yr(z,P,A){return P.children.map(Q=>{for(const se of A.children)if(z.shouldReuseRoute(Q.value,se.value.snapshot))return Pr(z,Q,se);return Pr(z,Q)})}(z,P,A);return new Rn(Q,se)}{if(z.shouldAttach(P.value)){const be=z.retrieve(P.value);if(null!==be){const Ve=be.route;return Ve.value._futureSnapshot=P.value,Ve.children=P.children.map(Fe=>Pr(z,Fe)),Ve}}const Q=function Es(z){return new Ji(new ze.X(z.url),new ze.X(z.params),new ze.X(z.queryParams),new ze.X(z.fragment),new ze.X(z.data),z.outlet,z.component,z)}(P.value),se=P.children.map(be=>Pr(z,be));return new Rn(Q,se)}}function no(z){return"object"==typeof z&&null!=z&&!z.outlets&&!z.segmentPath}function Ar(z){return"object"==typeof z&&null!=z&&z.outlets}function ns(z,P,A,Q,se){let be={};return Q&&_n(Q,(Ve,Fe)=>{be[Fe]=Array.isArray(Ve)?Ve.map(Et=>`${Et}`):`${Ve}`}),new Ae(A.root===z?P:is(A.root,z,P),be,se)}function is(z,P,A){const Q={};return _n(z.children,(se,be)=>{Q[be]=se===P?A:is(se,P,A)}),new ye(z.segments,Q)}class xo{constructor(P,A,Q){if(this.isAbsolute=P,this.numberOfDoubleDots=A,this.commands=Q,P&&Q.length>0&&no(Q[0]))throw new Error("Root segment cannot have matrix parameters");const se=Q.find(Ar);if(se&&se!==_t(Q))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gr{constructor(P,A,Q){this.segmentGroup=P,this.processChildren=A,this.index=Q}}function rs(z,P,A){if(z||(z=new ye([],{})),0===z.segments.length&&z.hasChildren())return Ns(z,P,A);const Q=function Ms(z,P,A){let Q=0,se=P;const be={match:!1,pathIndex:0,commandIndex:0};for(;se<z.segments.length;){if(Q>=A.length)return be;const Ve=z.segments[se],Fe=A[Q];if(Ar(Fe))break;const Et=`${Fe}`,ei=Q<A.length-1?A[Q+1]:null;if(se>0&&void 0===Et)break;if(Et&&ei&&"object"==typeof ei&&void 0===ei.outlets){if(!Bs(Et,ei,Ve))return be;Q+=2}else{if(!Bs(Et,{},Ve))return be;Q++}se++}return{match:!0,pathIndex:se,commandIndex:Q}}(z,P,A),se=A.slice(Q.commandIndex);if(Q.match&&Q.pathIndex<z.segments.length){const be=new ye(z.segments.slice(0,Q.pathIndex),{});return be.children[ri]=new ye(z.segments.slice(Q.pathIndex),z.children),Ns(be,0,se)}return Q.match&&0===se.length?new ye(z.segments,{}):Q.match&&!z.hasChildren()?Ss(z,P,A):Q.match?Ns(z,0,se):Ss(z,P,A)}function Ns(z,P,A){if(0===A.length)return new ye(z.segments,{});{const Q=function Fr(z){return Ar(z[0])?z[0].outlets:{[ri]:z}}(A),se={};return _n(Q,(be,Ve)=>{"string"==typeof be&&(be=[be]),null!==be&&(se[Ve]=rs(z.children[Ve],P,be))}),_n(z.children,(be,Ve)=>{void 0===Q[Ve]&&(se[Ve]=be)}),new ye(z.segments,se)}}function Ss(z,P,A){const Q=z.segments.slice(0,P);let se=0;for(;se<A.length;){const be=A[se];if(Ar(be)){const Et=Jr(be.outlets);return new ye(Q,Et)}if(0===se&&no(A[0])){Q.push(new lt(z.segments[P].path,da(A[0]))),se++;continue}const Ve=Ar(be)?be.outlets[ri]:`${be}`,Fe=se<A.length-1?A[se+1]:null;Ve&&Fe&&no(Fe)?(Q.push(new lt(Ve,da(Fe))),se+=2):(Q.push(new lt(Ve,{})),se++)}return new ye(Q,{})}function Jr(z){const P={};return _n(z,(A,Q)=>{"string"==typeof A&&(A=[A]),null!==A&&(P[Q]=Ss(new ye([],{}),0,A))}),P}function da(z){const P={};return _n(z,(A,Q)=>P[Q]=`${A}`),P}function Bs(z,P,A){return z==A.path&&fe(P,A.parameters)}class ha{constructor(P,A,Q,se){this.routeReuseStrategy=P,this.futureState=A,this.currState=Q,this.forwardEvent=se}activate(P){const A=this.futureState._root,Q=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,Q,P),Zi(this.futureState.root),this.activateChildRoutes(A,Q,P)}deactivateChildRoutes(P,A,Q){const se=pi(A);P.children.forEach(be=>{const Ve=be.value.outlet;this.deactivateRoutes(be,se[Ve],Q),delete se[Ve]}),_n(se,(be,Ve)=>{this.deactivateRouteAndItsChildren(be,Q)})}deactivateRoutes(P,A,Q){const se=P.value,be=A?A.value:null;if(se===be)if(se.component){const Ve=Q.getContext(se.outlet);Ve&&this.deactivateChildRoutes(P,A,Ve.children)}else this.deactivateChildRoutes(P,A,Q);else be&&this.deactivateRouteAndItsChildren(A,Q)}deactivateRouteAndItsChildren(P,A){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,A):this.deactivateRouteAndOutlet(P,A)}detachAndStoreRouteSubtree(P,A){const Q=A.getContext(P.value.outlet),se=Q&&P.value.component?Q.children:A,be=pi(P);for(const Ve of Object.keys(be))this.deactivateRouteAndItsChildren(be[Ve],se);if(Q&&Q.outlet){const Ve=Q.outlet.detach(),Fe=Q.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:Ve,route:P,contexts:Fe})}}deactivateRouteAndOutlet(P,A){const Q=A.getContext(P.value.outlet),se=Q&&P.value.component?Q.children:A,be=pi(P);for(const Ve of Object.keys(be))this.deactivateRouteAndItsChildren(be[Ve],se);Q&&Q.outlet&&(Q.outlet.deactivate(),Q.children.onOutletDeactivated(),Q.attachRef=null,Q.resolver=null,Q.route=null)}activateChildRoutes(P,A,Q){const se=pi(A);P.children.forEach(be=>{this.activateRoutes(be,se[be.value.outlet],Q),this.forwardEvent(new sr(be.value.snapshot))}),P.children.length&&this.forwardEvent(new Pi(P.value.snapshot))}activateRoutes(P,A,Q){const se=P.value,be=A?A.value:null;if(Zi(se),se===be)if(se.component){const Ve=Q.getOrCreateContext(se.outlet);this.activateChildRoutes(P,A,Ve.children)}else this.activateChildRoutes(P,A,Q);else if(se.component){const Ve=Q.getOrCreateContext(se.outlet);if(this.routeReuseStrategy.shouldAttach(se.snapshot)){const Fe=this.routeReuseStrategy.retrieve(se.snapshot);this.routeReuseStrategy.store(se.snapshot,null),Ve.children.onOutletReAttached(Fe.contexts),Ve.attachRef=Fe.componentRef,Ve.route=Fe.route.value,Ve.outlet&&Ve.outlet.attach(Fe.componentRef,Fe.route.value),Zi(Fe.route.value),this.activateChildRoutes(P,null,Ve.children)}else{const Fe=function Ys(z){for(let P=z.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig;if(A&&A.component)return null}return null}(se.snapshot),Et=Fe?Fe.module.componentFactoryResolver:null;Ve.attachRef=null,Ve.route=se,Ve.resolver=Et,Ve.outlet&&Ve.outlet.activateWith(se,Et),this.activateChildRoutes(P,null,Ve.children)}}else this.activateChildRoutes(P,null,Q)}}class os{constructor(P,A){this.routes=P,this.module=A}}function go(z){return"function"==typeof z}function Fi(z){return z instanceof Ae}const Or=Symbol("INITIAL_VALUE");function wo(){return(0,tn.w)(z=>(0,He.a)(z.map(P=>P.pipe((0,st.q)(1),(0,yt.O)(Or)))).pipe(Ut((P,A)=>{let Q=!1;return A.reduce((se,be,Ve)=>se!==Or?se:(be===Or&&(Q=!0),Q||!1!==be&&Ve!==A.length-1&&!Fi(be)?se:be),P)},Or),(0,jt.h)(P=>P!==Or),(0,zt.U)(P=>Fi(P)?P:!0===P),(0,st.q)(1)))}class ms{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jo,this.attachRef=null}}class jo{constructor(){this.contexts=new Map}onChildOutletCreated(P,A){const Q=this.getOrCreateContext(P);Q.outlet=A,this.contexts.set(P,Q)}onChildOutletDestroyed(P){const A=this.getContext(P);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const P=this.contexts;return this.contexts=new Map,P}onOutletReAttached(P){this.contexts=P}getOrCreateContext(P){let A=this.getContext(P);return A||(A=new ms,this.contexts.set(P,A)),A}getContext(P){return this.contexts.get(P)||null}}let ss=(()=>{class z{constructor(A,Q,se,be,Ve){this.parentContexts=A,this.location=Q,this.resolver=se,this.changeDetector=Ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=be||ri,A.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const A=this.parentContexts.getContext(this.name);A&&A.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,Q){this.activated=A,this._activatedRoute=Q,this.location.insert(A.hostView),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,Q){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=A;const Ve=(Q=Q||this.resolver).resolveComponentFactory(A._futureSnapshot.routeConfig.component),Fe=this.parentContexts.getOrCreateContext(this.name).children,Et=new gs(A,Fe,this.location.injector);this.activated=this.location.createComponent(Ve,this.location.length,Et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(jo),D.Y36(D.s_b),D.Y36(D._Vd),D.$8M("name"),D.Y36(D.sBO))},z.\u0275dir=D.lG2({type:z,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),z})();class gs{constructor(P,A,Q){this.route=P,this.childContexts=A,this.parent=Q}get(P,A){return P===Ji?this.route:P===jo?this.childContexts:this.parent.get(P,A)}}let as=(()=>{class z{}return z.\u0275fac=function(A){return new(A||z)},z.\u0275cmp=D.Xpm({type:z,selectors:[["ng-component"]],decls:1,vars:0,template:function(A,Q){1&A&&D._UZ(0,"router-outlet")},directives:[ss],encapsulation:2}),z})();function zs(z,P=""){for(let A=0;A<z.length;A++){const Q=z[A];uo(Q,Ts(P,Q))}}function uo(z,P){z.children&&zs(z.children,P)}function Ts(z,P){return P?z||P.path?z&&!P.path?`${z}/`:!z&&P.path?P.path:`${z}/${P.path}`:"":z}function Vs(z){const P=z.children&&z.children.map(Vs),A=P?Object.assign(Object.assign({},z),{children:P}):Object.assign({},z);return!A.component&&(P||A.loadChildren)&&A.outlet&&A.outlet!==ri&&(A.component=as),A}function ho(z){return z.outlet||ri}function ls(z,P){const A=z.filter(Q=>ho(Q)===P);return A.push(...z.filter(Q=>ho(Q)!==P)),A}const As={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ks(z,P,A){var Q;if(""===P.path)return"full"===P.pathMatch&&(z.hasChildren()||A.length>0)?Object.assign({},As):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const be=(P.matcher||B)(A,z,P);if(!be)return Object.assign({},As);const Ve={};_n(be.posParams,(Et,ei)=>{Ve[ei]=Et.path});const Fe=be.consumed.length>0?Object.assign(Object.assign({},Ve),be.consumed[be.consumed.length-1].parameters):Ve;return{matched:!0,consumedSegments:be.consumed,lastChild:be.consumed.length,parameters:Fe,positionalParamSegments:null!==(Q=be.posParams)&&void 0!==Q?Q:{}}}function yr(z,P,A,Q,se="corrected"){if(A.length>0&&function kr(z,P,A){return A.some(Q=>ve(z,P,Q)&&ho(Q)!==ri)}(z,A,Q)){const Ve=new ye(P,function Fa(z,P,A,Q){const se={};se[ri]=Q,Q._sourceSegment=z,Q._segmentIndexShift=P.length;for(const be of A)if(""===be.path&&ho(be)!==ri){const Ve=new ye([],{});Ve._sourceSegment=z,Ve._segmentIndexShift=P.length,se[ho(be)]=Ve}return se}(z,P,Q,new ye(A,z.children)));return Ve._sourceSegment=z,Ve._segmentIndexShift=P.length,{segmentGroup:Ve,slicedSegments:[]}}if(0===A.length&&function te(z,P,A){return A.some(Q=>ve(z,P,Q))}(z,A,Q)){const Ve=new ye(z.segments,function pa(z,P,A,Q,se,be){const Ve={};for(const Fe of Q)if(ve(z,A,Fe)&&!se[ho(Fe)]){const Et=new ye([],{});Et._sourceSegment=z,Et._segmentIndexShift="legacy"===be?z.segments.length:P.length,Ve[ho(Fe)]=Et}return Object.assign(Object.assign({},se),Ve)}(z,P,A,Q,z.children,se));return Ve._sourceSegment=z,Ve._segmentIndexShift=P.length,{segmentGroup:Ve,slicedSegments:A}}const be=new ye(z.segments,z.children);return be._sourceSegment=z,be._segmentIndexShift=P.length,{segmentGroup:be,slicedSegments:A}}function ve(z,P,A){return(!(z.hasChildren()||P.length>0)||"full"!==A.pathMatch)&&""===A.path}function ne(z,P,A,Q){return!!(ho(z)===Q||Q!==ri&&ve(P,A,z))&&("**"===z.path||Ks(P,z,A).matched)}function De(z,P,A){return 0===P.length&&!z.children[A]}class ut{constructor(P){this.segmentGroup=P||null}}class Yt{constructor(P){this.urlTree=P}}function cn(z){return new l.y(P=>P.error(new ut(z)))}function Hn(z){return new l.y(P=>P.error(new Yt(z)))}function wi(z){return new l.y(P=>P.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${z}'`)))}class ji{constructor(P,A,Q,se,be){this.configLoader=A,this.urlSerializer=Q,this.urlTree=se,this.config=be,this.allowRedirects=!0,this.ngModule=P.get(D.h0i)}apply(){const P=yr(this.urlTree.root,[],[],this.config).segmentGroup,A=new ye(P.segments,P.children);return this.expandSegmentGroup(this.ngModule,this.config,A,ri).pipe((0,zt.U)(be=>this.createUrlTree(q(be),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,ct.K)(be=>{if(be instanceof Yt)return this.allowRedirects=!1,this.match(be.urlTree);throw be instanceof ut?this.noMatchError(be):be}))}match(P){return this.expandSegmentGroup(this.ngModule,this.config,P.root,ri).pipe((0,zt.U)(se=>this.createUrlTree(q(se),P.queryParams,P.fragment))).pipe((0,ct.K)(se=>{throw se instanceof ut?this.noMatchError(se):se}))}noMatchError(P){return new Error(`Cannot match any routes. URL Segment: '${P.segmentGroup}'`)}createUrlTree(P,A,Q){const se=P.segments.length>0?new ye([],{[ri]:P}):P;return new Ae(se,A,Q)}expandSegmentGroup(P,A,Q,se){return 0===Q.segments.length&&Q.hasChildren()?this.expandChildren(P,A,Q).pipe((0,zt.U)(be=>new ye([],be))):this.expandSegment(P,Q,A,Q.segments,se,!0)}expandChildren(P,A,Q){const se=[];for(const be of Object.keys(Q.children))"primary"===be?se.unshift(be):se.push(be);return(0,Le.D)(se).pipe((0,Tt.b)(be=>{const Ve=Q.children[be],Fe=ls(A,be);return this.expandSegmentGroup(P,Fe,Ve,be).pipe((0,zt.U)(Et=>({segment:Et,outlet:be})))}),Ut((be,Ve)=>(be[Ve.outlet]=Ve.segment,be),{}),function nn(z,P){const A=arguments.length>=2;return Q=>Q.pipe(z?(0,jt.h)((se,be)=>z(se,be,Q)):ot.y,un(1),A?(0,ke.d)(P):(0,Dt.T)(()=>new Be.K))}())}expandSegment(P,A,Q,se,be,Ve){return(0,Le.D)(Q).pipe((0,Tt.b)(Fe=>this.expandSegmentAgainstRoute(P,A,Q,Fe,se,be,Ve).pipe((0,ct.K)(ei=>{if(ei instanceof ut)return(0,he.of)(null);throw ei}))),(0,Xt.P)(Fe=>!!Fe),(0,ct.K)((Fe,Et)=>{if(Fe instanceof Be.K||"EmptyError"===Fe.name){if(De(A,se,be))return(0,he.of)(new ye([],{}));throw new ut(A)}throw Fe}))}expandSegmentAgainstRoute(P,A,Q,se,be,Ve,Fe){return ne(se,A,be,Ve)?void 0===se.redirectTo?this.matchSegmentAgainstRoute(P,A,se,be,Ve):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,A,Q,se,be,Ve):cn(A):cn(A)}expandSegmentAgainstRouteUsingRedirect(P,A,Q,se,be,Ve){return"**"===se.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,Q,se,Ve):this.expandRegularSegmentAgainstRouteUsingRedirect(P,A,Q,se,be,Ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,A,Q,se){const be=this.applyRedirectCommands([],Q.redirectTo,{});return Q.redirectTo.startsWith("/")?Hn(be):this.lineralizeSegments(Q,be).pipe((0,Ct.z)(Ve=>{const Fe=new ye(Ve,{});return this.expandSegment(P,Fe,A,Ve,se,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,A,Q,se,be,Ve){const{matched:Fe,consumedSegments:Et,lastChild:ei,positionalParamSegments:Yi}=Ks(A,se,be);if(!Fe)return cn(A);const Ei=this.applyRedirectCommands(Et,se.redirectTo,Yi);return se.redirectTo.startsWith("/")?Hn(Ei):this.lineralizeSegments(se,Ei).pipe((0,Ct.z)(Bi=>this.expandSegment(P,A,Q,Bi.concat(be.slice(ei)),Ve,!1)))}matchSegmentAgainstRoute(P,A,Q,se,be){if("**"===Q.path)return Q.loadChildren?(Q._loadedConfig?(0,he.of)(Q._loadedConfig):this.configLoader.load(P.injector,Q)).pipe((0,zt.U)(Bi=>(Q._loadedConfig=Bi,new ye(se,{})))):(0,he.of)(new ye(se,{}));const{matched:Ve,consumedSegments:Fe,lastChild:Et}=Ks(A,Q,se);if(!Ve)return cn(A);const ei=se.slice(Et);return this.getChildConfig(P,Q,se).pipe((0,Ct.z)(Ei=>{const Bi=Ei.module,pr=Ei.routes,{segmentGroup:Eo,slicedSegments:Po}=yr(A,Fe,ei,pr),po=new ye(Eo.segments,Eo.children);if(0===Po.length&&po.hasChildren())return this.expandChildren(Bi,pr,po).pipe((0,zt.U)(ro=>new ye(Fe,ro)));if(0===pr.length&&0===Po.length)return(0,he.of)(new ye(Fe,{}));const mr=ho(Q)===be;return this.expandSegment(Bi,po,pr,Po,mr?ri:be,!0).pipe((0,zt.U)(Us=>new ye(Fe.concat(Us.segments),Us.children)))}))}getChildConfig(P,A,Q){return A.children?(0,he.of)(new os(A.children,P)):A.loadChildren?void 0!==A._loadedConfig?(0,he.of)(A._loadedConfig):this.runCanLoadGuards(P.injector,A,Q).pipe((0,Ct.z)(se=>se?this.configLoader.load(P.injector,A).pipe((0,zt.U)(be=>(A._loadedConfig=be,be))):function lr(z){return new l.y(P=>P.error(U(`Cannot load children because the guard of the route "path: '${z.path}'" returned false`)))}(A))):(0,he.of)(new os([],P))}runCanLoadGuards(P,A,Q){const se=A.canLoad;if(!se||0===se.length)return(0,he.of)(!0);const be=se.map(Ve=>{const Fe=P.get(Ve);let Et;if(function qa(z){return z&&go(z.canLoad)}(Fe))Et=Fe.canLoad(A,Q);else{if(!go(Fe))throw new Error("Invalid CanLoad guard");Et=Fe(A,Q)}return Vn(Et)});return(0,he.of)(be).pipe(wo(),(0,vn.b)(Ve=>{if(!Fi(Ve))return;const Fe=U(`Redirecting to "${this.urlSerializer.serialize(Ve)}"`);throw Fe.url=Ve,Fe}),(0,zt.U)(Ve=>!0===Ve))}lineralizeSegments(P,A){let Q=[],se=A.root;for(;;){if(Q=Q.concat(se.segments),0===se.numberOfChildren)return(0,he.of)(Q);if(se.numberOfChildren>1||!se.children[ri])return wi(P.redirectTo);se=se.children[ri]}}applyRedirectCommands(P,A,Q){return this.applyRedirectCreatreUrlTree(A,this.urlSerializer.parse(A),P,Q)}applyRedirectCreatreUrlTree(P,A,Q,se){const be=this.createSegmentGroup(P,A.root,Q,se);return new Ae(be,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(P,A){const Q={};return _n(P,(se,be)=>{if("string"==typeof se&&se.startsWith(":")){const Fe=se.substring(1);Q[be]=A[Fe]}else Q[be]=se}),Q}createSegmentGroup(P,A,Q,se){const be=this.createSegments(P,A.segments,Q,se);let Ve={};return _n(A.children,(Fe,Et)=>{Ve[Et]=this.createSegmentGroup(P,Fe,Q,se)}),new ye(be,Ve)}createSegments(P,A,Q,se){return A.map(be=>be.path.startsWith(":")?this.findPosParam(P,be,se):this.findOrReturn(be,Q))}findPosParam(P,A,Q){const se=Q[A.path.substring(1)];if(!se)throw new Error(`Cannot redirect to '${P}'. Cannot find '${A.path}'.`);return se}findOrReturn(P,A){let Q=0;for(const se of A){if(se.path===P.path)return A.splice(Q),se;Q++}return P}}function q(z){const P={};for(const Q of Object.keys(z.children)){const be=q(z.children[Q]);(be.segments.length>0||be.hasChildren())&&(P[Q]=be)}return function X(z){if(1===z.numberOfChildren&&z.children[ri]){const P=z.children[ri];return new ye(z.segments.concat(P.segments),P.children)}return z}(new ye(z.segments,P))}class Se{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class Lt{constructor(P,A){this.component=P,this.route=A}}function Fn(z,P,A){const Q=z._root;return To(Q,P?P._root:null,A,[Q.value])}function $r(z,P,A){const Q=function Is(z){if(!z)return null;for(let P=z.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig}return null}(P);return(Q?Q.module.injector:A).get(z)}function To(z,P,A,Q,se={canDeactivateChecks:[],canActivateChecks:[]}){const be=pi(P);return z.children.forEach(Ve=>{(function yn(z,P,A,Q,se={canDeactivateChecks:[],canActivateChecks:[]}){const be=z.value,Ve=P?P.value:null,Fe=A?A.getContext(z.value.outlet):null;if(Ve&&be.routeConfig===Ve.routeConfig){const Et=function ue(z,P,A){if("function"==typeof A)return A(z,P);switch(A){case"pathParamsChange":return!fn(z.url,P.url);case"pathParamsOrQueryParamsChange":return!fn(z.url,P.url)||!fe(z.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!to(z,P)||!fe(z.queryParams,P.queryParams);default:return!to(z,P)}}(Ve,be,be.routeConfig.runGuardsAndResolvers);Et?se.canActivateChecks.push(new Se(Q)):(be.data=Ve.data,be._resolvedData=Ve._resolvedData),To(z,P,be.component?Fe?Fe.children:null:A,Q,se),Et&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&se.canDeactivateChecks.push(new Lt(Fe.outlet.component,Ve))}else Ve&&M(P,Fe,se),se.canActivateChecks.push(new Se(Q)),To(z,null,be.component?Fe?Fe.children:null:A,Q,se)})(Ve,be[Ve.value.outlet],A,Q.concat([Ve.value]),se),delete be[Ve.value.outlet]}),_n(be,(Ve,Fe)=>M(Ve,A.getContext(Fe),se)),se}function M(z,P,A){const Q=pi(z),se=z.value;_n(Q,(be,Ve)=>{M(be,se.component?P?P.children.getContext(Ve):null:P,A)}),A.canDeactivateChecks.push(new Lt(se.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,se))}class Mn{}function oi(z){return new l.y(P=>P.error(z))}class Ni{constructor(P,A,Q,se,be,Ve){this.rootComponentType=P,this.config=A,this.urlTree=Q,this.url=se,this.paramsInheritanceStrategy=be,this.relativeLinkResolution=Ve}recognize(){const P=yr(this.urlTree.root,[],[],this.config.filter(Ve=>void 0===Ve.redirectTo),this.relativeLinkResolution).segmentGroup,A=this.processSegmentGroup(this.config,P,ri);if(null===A)return null;const Q=new Ri([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ri,this.rootComponentType,null,this.urlTree.root,-1,{}),se=new Rn(Q,A),be=new co(this.url,se);return this.inheritParamsAndData(be._root),be}inheritParamsAndData(P){const A=P.value,Q=Bo(A,this.paramsInheritanceStrategy);A.params=Object.freeze(Q.params),A.data=Object.freeze(Q.data),P.children.forEach(se=>this.inheritParamsAndData(se))}processSegmentGroup(P,A,Q){return 0===A.segments.length&&A.hasChildren()?this.processChildren(P,A):this.processSegment(P,A,A.segments,Q)}processChildren(P,A){const Q=[];for(const be of Object.keys(A.children)){const Ve=A.children[be],Fe=ls(P,be),Et=this.processSegmentGroup(Fe,Ve,be);if(null===Et)return null;Q.push(...Et)}const se=fr(Q);return function mi(z){z.sort((P,A)=>P.value.outlet===ri?-1:A.value.outlet===ri?1:P.value.outlet.localeCompare(A.value.outlet))}(se),se}processSegment(P,A,Q,se){for(const be of P){const Ve=this.processSegmentAgainstRoute(be,A,Q,se);if(null!==Ve)return Ve}return De(A,Q,se)?[]:null}processSegmentAgainstRoute(P,A,Q,se){if(P.redirectTo||!ne(P,A,Q,se))return null;let be,Ve=[],Fe=[];if("**"===P.path){const pr=Q.length>0?_t(Q).parameters:{};be=new Ri(Q,pr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(P),ho(P),P.component,P,io(A),Zr(A)+Q.length,_o(P))}else{const pr=Ks(A,P,Q);if(!pr.matched)return null;Ve=pr.consumedSegments,Fe=Q.slice(pr.lastChild),be=new Ri(Ve,pr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(P),ho(P),P.component,P,io(A),Zr(A)+Ve.length,_o(P))}const Et=function Ci(z){return z.children?z.children:z.loadChildren?z._loadedConfig.routes:[]}(P),{segmentGroup:ei,slicedSegments:Yi}=yr(A,Ve,Fe,Et.filter(pr=>void 0===pr.redirectTo),this.relativeLinkResolution);if(0===Yi.length&&ei.hasChildren()){const pr=this.processChildren(Et,ei);return null===pr?null:[new Rn(be,pr)]}if(0===Et.length&&0===Yi.length)return[new Rn(be,[])];const Ei=ho(P)===se,Bi=this.processSegment(Et,ei,Yi,Ei?ri:se);return null===Bi?null:[new Rn(be,Bi)]}}function Hi(z){const P=z.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function fr(z){const P=[],A=new Set;for(const Q of z){if(!Hi(Q)){P.push(Q);continue}const se=P.find(be=>Q.value.routeConfig===be.value.routeConfig);void 0!==se?(se.children.push(...Q.children),A.add(se)):P.push(Q)}for(const Q of A){const se=fr(Q.children);P.push(new Rn(Q.value,se))}return P.filter(Q=>!A.has(Q))}function io(z){let P=z;for(;P._sourceSegment;)P=P._sourceSegment;return P}function Zr(z){let P=z,A=P._segmentIndexShift?P._segmentIndexShift:0;for(;P._sourceSegment;)P=P._sourceSegment,A+=P._segmentIndexShift?P._segmentIndexShift:0;return A-1}function Ko(z){return z.data||{}}function _o(z){return z.resolve||{}}function Jo(z){return(0,tn.w)(P=>{const A=z(P);return A?(0,Le.D)(A).pipe((0,zt.U)(()=>P)):(0,he.of)(P)})}class Os extends class fa{shouldDetach(P){return!1}store(P,A){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,A){return P.routeConfig===A.routeConfig}}{}const jn=new D.OlP("ROUTES");class ai{constructor(P,A,Q,se){this.injector=P,this.compiler=A,this.onLoadStartListener=Q,this.onLoadEndListener=se}load(P,A){if(A._loader$)return A._loader$;this.onLoadStartListener&&this.onLoadStartListener(A);const se=this.loadModuleFactory(A.loadChildren).pipe((0,zt.U)(be=>{this.onLoadEndListener&&this.onLoadEndListener(A);const Ve=be.create(P);return new os(It(Ve.injector.get(jn,void 0,D.XFs.Self|D.XFs.Optional)).map(Vs),Ve)}),(0,ct.K)(be=>{throw A._loader$=void 0,be}));return A._loader$=new Oe(se,()=>new bt.x).pipe(qe()),A._loader$}loadModuleFactory(P){return Vn(P()).pipe((0,Ct.z)(A=>A instanceof D.YKP?(0,he.of)(A):(0,Le.D)(this.compiler.compileModuleAsync(A))))}}class Si{shouldProcessUrl(P){return!0}extract(P){return P}merge(P,A){return P}}function Sr(z){throw z}function rr(z,P,A){return P.parse("/")}function Wr(z,P){return(0,he.of)(null)}const Js={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Io=(()=>{class z{constructor(A,Q,se,be,Ve,Fe,Et){this.rootComponentType=A,this.urlSerializer=Q,this.rootContexts=se,this.location=be,this.config=Et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bt.x,this.errorHandler=Sr,this.malformedUriErrorHandler=rr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Wr,afterPreactivation:Wr},this.urlHandlingStrategy=new Si,this.routeReuseStrategy=new Os,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ve.get(D.h0i),this.console=Ve.get(D.c2e);const Ei=Ve.get(D.R0b);this.isNgZoneEnabled=Ei instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(Et),this.currentUrlTree=function yi(){return new Ae(new ye([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ai(Ve,Fe,Bi=>this.triggerEvent(new gn(Bi)),Bi=>this.triggerEvent(new zn(Bi))),this.routerState=si(this.currentUrlTree,this.rootComponentType),this.transitions=new ze.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var A;return null===(A=this.location.getState())||void 0===A?void 0:A.\u0275routerPageId}setupNavigations(A){const Q=this.events;return A.pipe((0,jt.h)(se=>0!==se.id),(0,zt.U)(se=>Object.assign(Object.assign({},se),{extractedUrl:this.urlHandlingStrategy.extract(se.rawUrl)})),(0,tn.w)(se=>{let be=!1,Ve=!1;return(0,he.of)(se).pipe((0,vn.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.currentRawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,tn.w)(Fe=>{const Et=this.browserUrlTree.toString(),ei=!this.navigated||Fe.extractedUrl.toString()!==Et||Et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ei)&&this.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return Dr(Fe.source)&&(this.browserUrlTree=Fe.extractedUrl),(0,he.of)(Fe).pipe((0,tn.w)(Ei=>{const Bi=this.transitions.getValue();return Q.next(new Ii(Ei.id,this.serializeUrl(Ei.extractedUrl),Ei.source,Ei.restoredState)),Bi!==this.transitions.getValue()?et.E:Promise.resolve(Ei)}),function N(z,P,A,Q){return(0,tn.w)(se=>function Cr(z,P,A,Q,se){return new ji(z,P,A,Q,se).apply()}(z,P,A,se.extractedUrl,Q).pipe((0,zt.U)(be=>Object.assign(Object.assign({},se),{urlAfterRedirects:be}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vn.b)(Ei=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ei.urlAfterRedirects})}),function yo(z,P,A,Q,se){return(0,Ct.z)(be=>function vi(z,P,A,Q,se="emptyOnly",be="legacy"){try{const Ve=new Ni(z,P,A,Q,se,be).recognize();return null===Ve?oi(new Mn):(0,he.of)(Ve)}catch(Ve){return oi(Ve)}}(z,P,be.urlAfterRedirects,A(be.urlAfterRedirects),Q,se).pipe((0,zt.U)(Ve=>Object.assign(Object.assign({},be),{targetSnapshot:Ve}))))}(this.rootComponentType,this.config,Ei=>this.serializeUrl(Ei),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vn.b)(Ei=>{if("eager"===this.urlUpdateStrategy){if(!Ei.extras.skipLocationChange){const pr=this.urlHandlingStrategy.merge(Ei.urlAfterRedirects,Ei.rawUrl);this.setBrowserUrl(pr,Ei)}this.browserUrlTree=Ei.urlAfterRedirects}const Bi=new kn(Ei.id,this.serializeUrl(Ei.extractedUrl),this.serializeUrl(Ei.urlAfterRedirects),Ei.targetSnapshot);Q.next(Bi)}));if(ei&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Bi,extractedUrl:pr,source:Eo,restoredState:Po,extras:po}=Fe,mr=new Ii(Bi,this.serializeUrl(pr),Eo,Po);Q.next(mr);const qr=si(pr,this.rootComponentType).snapshot;return(0,he.of)(Object.assign(Object.assign({},Fe),{targetSnapshot:qr,urlAfterRedirects:pr,extras:Object.assign(Object.assign({},po),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Fe.rawUrl,Fe.resolve(null),et.E}),Jo(Fe=>{const{targetSnapshot:Et,id:ei,extractedUrl:Yi,rawUrl:Ei,extras:{skipLocationChange:Bi,replaceUrl:pr}}=Fe;return this.hooks.beforePreactivation(Et,{navigationId:ei,appliedUrlTree:Yi,rawUrlTree:Ei,skipLocationChange:!!Bi,replaceUrl:!!pr})}),(0,vn.b)(Fe=>{const Et=new ii(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(Et)}),(0,zt.U)(Fe=>Object.assign(Object.assign({},Fe),{guards:Fn(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)})),function S(z,P){return(0,Ct.z)(A=>{const{targetSnapshot:Q,currentSnapshot:se,guards:{canActivateChecks:be,canDeactivateChecks:Ve}}=A;return 0===Ve.length&&0===be.length?(0,he.of)(Object.assign(Object.assign({},A),{guardsResult:!0})):function H(z,P,A,Q){return(0,Le.D)(z).pipe((0,Ct.z)(se=>function sn(z,P,A,Q,se){const be=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!be||0===be.length)return(0,he.of)(!0);const Ve=be.map(Fe=>{const Et=$r(Fe,P,se);let ei;if(function Yo(z){return z&&go(z.canDeactivate)}(Et))ei=Vn(Et.canDeactivate(z,P,A,Q));else{if(!go(Et))throw new Error("Invalid CanDeactivate guard");ei=Vn(Et(z,P,A,Q))}return ei.pipe((0,Xt.P)())});return(0,he.of)(Ve).pipe(wo())}(se.component,se.route,A,P,Q)),(0,Xt.P)(se=>!0!==se,!0))}(Ve,Q,se,z).pipe((0,Ct.z)(Fe=>Fe&&function Ra(z){return"boolean"==typeof z}(Fe)?function de(z,P,A,Q){return(0,Le.D)(P).pipe((0,Tt.b)(se=>(0,gt.z)(function Ue(z,P){return null!==z&&P&&P(new Jn(z)),(0,he.of)(!0)}(se.route.parent,Q),function Te(z,P){return null!==z&&P&&P(new er(z)),(0,he.of)(!0)}(se.route,Q),function Ot(z,P,A){const Q=P[P.length-1],be=P.slice(0,P.length-1).reverse().map(Ve=>function hr(z){const P=z.routeConfig?z.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:z,guards:P}:null}(Ve)).filter(Ve=>null!==Ve).map(Ve=>(0,Ye.P)(()=>{const Fe=Ve.guards.map(Et=>{const ei=$r(Et,Ve.node,A);let Yi;if(function fs(z){return z&&go(z.canActivateChild)}(ei))Yi=Vn(ei.canActivateChild(Q,z));else{if(!go(ei))throw new Error("Invalid CanActivateChild guard");Yi=Vn(ei(Q,z))}return Yi.pipe((0,Xt.P)())});return(0,he.of)(Fe).pipe(wo())}));return(0,he.of)(be).pipe(wo())}(z,se.path,A),function rt(z,P,A){const Q=P.routeConfig?P.routeConfig.canActivate:null;if(!Q||0===Q.length)return(0,he.of)(!0);const se=Q.map(be=>(0,Ye.P)(()=>{const Ve=$r(be,P,A);let Fe;if(function So(z){return z&&go(z.canActivate)}(Ve))Fe=Vn(Ve.canActivate(P,z));else{if(!go(Ve))throw new Error("Invalid CanActivate guard");Fe=Vn(Ve(P,z))}return Fe.pipe((0,Xt.P)())}));return(0,he.of)(se).pipe(wo())}(z,se.route,A))),(0,Xt.P)(se=>!0!==se,!0))}(Q,be,z,P):(0,he.of)(Fe)),(0,zt.U)(Fe=>Object.assign(Object.assign({},A),{guardsResult:Fe})))})}(this.ngModule.injector,Fe=>this.triggerEvent(Fe)),(0,vn.b)(Fe=>{if(Fi(Fe.guardsResult)){const ei=U(`Redirecting to "${this.serializeUrl(Fe.guardsResult)}"`);throw ei.url=Fe.guardsResult,ei}const Et=new ft(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.triggerEvent(Et)}),(0,jt.h)(Fe=>!!Fe.guardsResult||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,""),!1)),Jo(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,he.of)(Fe).pipe((0,vn.b)(Et=>{const ei=new Ft(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(ei)}),(0,tn.w)(Et=>{let ei=!1;return(0,he.of)(Et).pipe(function Ao(z,P){return(0,Ct.z)(A=>{const{targetSnapshot:Q,guards:{canActivateChecks:se}}=A;if(!se.length)return(0,he.of)(A);let be=0;return(0,Le.D)(se).pipe((0,Tt.b)(Ve=>function Ps(z,P,A,Q){return function _s(z,P,A,Q){const se=Object.keys(z);if(0===se.length)return(0,he.of)({});const be={};return(0,Le.D)(se).pipe((0,Ct.z)(Ve=>function Ca(z,P,A,Q){const se=$r(z,P,Q);return Vn(se.resolve?se.resolve(P,A):se(P,A))}(z[Ve],P,A,Q).pipe((0,vn.b)(Fe=>{be[Ve]=Fe}))),un(1),(0,Ct.z)(()=>Object.keys(be).length===se.length?(0,he.of)(be):et.E))}(z._resolve,z,P,Q).pipe((0,zt.U)(be=>(z._resolvedData=be,z.data=Object.assign(Object.assign({},z.data),Bo(z,A).resolve),null)))}(Ve.route,Q,z,P)),(0,vn.b)(()=>be++),un(1),(0,Ct.z)(Ve=>be===se.length?(0,he.of)(A):et.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vn.b)({next:()=>ei=!0,complete:()=>{ei||(this.restoreHistory(Et),this.cancelNavigationTransition(Et,"At least one route resolver didn't emit any value."))}}))}),(0,vn.b)(Et=>{const ei=new on(Et.id,this.serializeUrl(Et.extractedUrl),this.serializeUrl(Et.urlAfterRedirects),Et.targetSnapshot);this.triggerEvent(ei)}))}),Jo(Fe=>{const{targetSnapshot:Et,id:ei,extractedUrl:Yi,rawUrl:Ei,extras:{skipLocationChange:Bi,replaceUrl:pr}}=Fe;return this.hooks.afterPreactivation(Et,{navigationId:ei,appliedUrlTree:Yi,rawUrlTree:Ei,skipLocationChange:!!Bi,replaceUrl:!!pr})}),(0,zt.U)(Fe=>{const Et=function qo(z,P,A){const Q=Pr(z,P._root,A?A._root:void 0);return new ar(Q,P)}(this.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return Object.assign(Object.assign({},Fe),{targetRouterState:Et})}),(0,vn.b)(Fe=>{this.currentUrlTree=Fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Fe.urlAfterRedirects,Fe.rawUrl),this.routerState=Fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Fe),this.browserUrlTree=Fe.urlAfterRedirects)}),((z,P,A)=>(0,zt.U)(Q=>(new ha(P,Q.targetRouterState,Q.currentRouterState,A).activate(z),Q)))(this.rootContexts,this.routeReuseStrategy,Fe=>this.triggerEvent(Fe)),(0,vn.b)({next(){be=!0},complete(){be=!0}}),(0,fi.x)(()=>{var Fe;be||Ve||this.cancelNavigationTransition(se,`Navigation ID ${se.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Fe=this.currentNavigation)||void 0===Fe?void 0:Fe.id)===se.id&&(this.currentNavigation=null)}),(0,ct.K)(Fe=>{if(Ve=!0,function R(z){return z&&z[$]}(Fe)){const Et=Fi(Fe.url);Et||(this.navigated=!0,this.restoreHistory(se,!0));const ei=new ir(se.id,this.serializeUrl(se.extractedUrl),Fe.message);Q.next(ei),Et?setTimeout(()=>{const Yi=this.urlHandlingStrategy.merge(Fe.url,this.rawUrlTree),Ei={skipLocationChange:se.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dr(se.source)};this.scheduleNavigation(Yi,"imperative",null,Ei,{resolve:se.resolve,reject:se.reject,promise:se.promise})},0):se.resolve(!1)}else{this.restoreHistory(se,!0);const Et=new _i(se.id,this.serializeUrl(se.extractedUrl),Fe);Q.next(Et);try{se.resolve(this.errorHandler(Fe))}catch(ei){se.reject(ei)}}return et.E}))}))}resetRootComponentType(A){this.rootComponentType=A,this.routerState.root.component=this.rootComponentType}setTransition(A){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),A))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const Q="popstate"===A.type?"popstate":"hashchange";"popstate"===Q&&setTimeout(()=>{var se;const be={replaceUrl:!0},Ve=(null===(se=A.state)||void 0===se?void 0:se.navigationId)?A.state:null;if(Ve){const Et=Object.assign({},Ve);delete Et.navigationId,delete Et.\u0275routerPageId,0!==Object.keys(Et).length&&(be.state=Et)}const Fe=this.parseUrl(A.url);this.scheduleNavigation(Fe,Q,Ve,be)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(A){this.events.next(A)}resetConfig(A){zs(A),this.config=A.map(Vs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(A,Q={}){const{relativeTo:se,queryParams:be,fragment:Ve,queryParamsHandling:Fe,preserveFragment:Et}=Q,ei=se||this.routerState.root,Yi=Et?this.currentUrlTree.fragment:Ve;let Ei=null;switch(Fe){case"merge":Ei=Object.assign(Object.assign({},this.currentUrlTree.queryParams),be);break;case"preserve":Ei=this.currentUrlTree.queryParams;break;default:Ei=be||null}return null!==Ei&&(Ei=this.removeEmptyProps(Ei)),function qs(z,P,A,Q,se){if(0===A.length)return ns(P.root,P.root,P,Q,se);const be=function Kr(z){if("string"==typeof z[0]&&1===z.length&&"/"===z[0])return new xo(!0,0,z);let P=0,A=!1;const Q=z.reduce((se,be,Ve)=>{if("object"==typeof be&&null!=be){if(be.outlets){const Fe={};return _n(be.outlets,(Et,ei)=>{Fe[ei]="string"==typeof Et?Et.split("/"):Et}),[...se,{outlets:Fe}]}if(be.segmentPath)return[...se,be.segmentPath]}return"string"!=typeof be?[...se,be]:0===Ve?(be.split("/").forEach((Fe,Et)=>{0==Et&&"."===Fe||(0==Et&&""===Fe?A=!0:".."===Fe?P++:""!=Fe&&se.push(Fe))}),se):[...se,be]},[]);return new xo(A,P,Q)}(A);if(be.toRoot())return ns(P.root,new ye([],{}),P,Q,se);const Ve=function Uo(z,P,A){if(z.isAbsolute)return new Gr(P.root,!0,0);if(-1===A.snapshot._lastPathIndex){const be=A.snapshot._urlSegment;return new Gr(be,be===P.root,0)}const Q=no(z.commands[0])?0:1;return function Ds(z,P,A){let Q=z,se=P,be=A;for(;be>se;){if(be-=se,Q=Q.parent,!Q)throw new Error("Invalid number of '../'");se=Q.segments.length}return new Gr(Q,!1,se-be)}(A.snapshot._urlSegment,A.snapshot._lastPathIndex+Q,z.numberOfDoubleDots)}(be,P,z),Fe=Ve.processChildren?Ns(Ve.segmentGroup,Ve.index,be.commands):rs(Ve.segmentGroup,Ve.index,be.commands);return ns(Ve.segmentGroup,Fe,P,Q,se)}(ei,this.currentUrlTree,A,Ei,null!=Yi?Yi:null)}navigateByUrl(A,Q={skipLocationChange:!1}){const se=Fi(A)?A:this.parseUrl(A),be=this.urlHandlingStrategy.merge(se,this.rawUrlTree);return this.scheduleNavigation(be,"imperative",null,Q)}navigate(A,Q={skipLocationChange:!1}){return function ma(z){for(let P=0;P<z.length;P++){const A=z[P];if(null==A)throw new Error(`The requested path contains ${A} segment at index ${P}`)}}(A),this.navigateByUrl(this.createUrlTree(A,Q),Q)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let Q;try{Q=this.urlSerializer.parse(A)}catch(se){Q=this.malformedUriErrorHandler(se,this.urlSerializer,A)}return Q}isActive(A,Q){let se;if(se=!0===Q?Object.assign({},Js):!1===Q?Object.assign({},Tr):Q,Fi(A))return qt(this.currentUrlTree,A,se);const be=this.parseUrl(A);return qt(this.currentUrlTree,be,se)}removeEmptyProps(A){return Object.keys(A).reduce((Q,se)=>{const be=A[se];return null!=be&&(Q[se]=be),Q},{})}processNavigations(){this.navigations.subscribe(A=>{this.navigated=!0,this.lastSuccessfulId=A.id,this.currentPageId=A.targetPageId,this.events.next(new ci(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,A.resolve(!0)},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)})}scheduleNavigation(A,Q,se,be,Ve){var Fe,Et,ei;if(this.disposed)return Promise.resolve(!1);const Yi=this.transitions.value,Ei=Dr(Q)&&Yi&&!Dr(Yi.source),Bi=Yi.rawUrl.toString()===A.toString(),pr=Yi.id===(null===(Fe=this.currentNavigation)||void 0===Fe?void 0:Fe.id);if(Ei&&Bi&&pr)return Promise.resolve(!0);let Po,po,mr;Ve?(Po=Ve.resolve,po=Ve.reject,mr=Ve.promise):mr=new Promise((ro,Xs)=>{Po=ro,po=Xs});const qr=++this.navigationId;let Us;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(se=this.location.getState()),Us=se&&se.\u0275routerPageId?se.\u0275routerPageId:be.replaceUrl||be.skipLocationChange?null!==(Et=this.browserPageId)&&void 0!==Et?Et:0:(null!==(ei=this.browserPageId)&&void 0!==ei?ei:0)+1):Us=0,this.setTransition({id:qr,targetPageId:Us,source:Q,restoredState:se,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:A,extras:be,resolve:Po,reject:po,promise:mr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),mr.catch(ro=>Promise.reject(ro))}setBrowserUrl(A,Q){const se=this.urlSerializer.serialize(A),be=Object.assign(Object.assign({},Q.extras.state),this.generateNgRouterState(Q.id,Q.targetPageId));this.location.isCurrentPathEqualTo(se)||Q.extras.replaceUrl?this.location.replaceState(se,"",be):this.location.go(se,"",be)}restoreHistory(A,Q=!1){var se,be;if("computed"===this.canceledNavigationResolution){const Ve=this.currentPageId-A.targetPageId;"popstate"!==A.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(se=this.currentNavigation)||void 0===se?void 0:se.finalUrl)||0===Ve?this.currentUrlTree===(null===(be=this.currentNavigation)||void 0===be?void 0:be.finalUrl)&&0===Ve&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ve)}else"replace"===this.canceledNavigationResolution&&(Q&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(A,Q){const se=new ir(A.id,this.serializeUrl(A.extractedUrl),Q);this.triggerEvent(se),A.resolve(!1)}generateNgRouterState(A,Q){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:Q}:{navigationId:A}}}return z.\u0275fac=function(A){D.$Z()},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();function Dr(z){return"imperative"!==z}let vo=(()=>{class z{constructor(A,Q,se,be,Ve){this.router=A,this.route=Q,this.tabIndexAttribute=se,this.renderer=be,this.el=Ve,this.commands=null,this.onChanges=new bt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){if(null!=this.tabIndexAttribute)return;const Q=this.renderer,se=this.el.nativeElement;null!==A?Q.setAttribute(se,"tabindex",A):Q.removeAttribute(se,"tabindex")}ngOnChanges(A){this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const A={skipLocationChange:bo(this.skipLocationChange),replaceUrl:bo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,A),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bo(this.preserveFragment)})}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Io),D.Y36(Ji),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq))},z.\u0275dir=D.lG2({type:z,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(A,Q){1&A&&D.NdJ("click",function(){return Q.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[D.TTD]}),z})(),An=(()=>{class z{constructor(A,Q,se){this.router=A,this.route=Q,this.locationStrategy=se,this.commands=null,this.href=null,this.onChanges=new bt.x,this.subscription=A.events.subscribe(be=>{be instanceof ci&&this.updateTargetUrlAndHref()})}set routerLink(A){this.commands=null!=A?Array.isArray(A)?A:[A]:null}ngOnChanges(A){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(A,Q,se,be,Ve){if(0!==A||Q||se||be||Ve||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Fe={skipLocationChange:bo(this.skipLocationChange),replaceUrl:bo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Fe),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bo(this.preserveFragment)})}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Io),D.Y36(Ji),D.Y36(Dn.S$))},z.\u0275dir=D.lG2({type:z,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(A,Q){1&A&&D.NdJ("click",function(be){return Q.onClick(be.button,be.ctrlKey,be.shiftKey,be.altKey,be.metaKey)}),2&A&&D.uIk("target",Q.target)("href",Q.href,D.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[D.TTD]}),z})();function bo(z){return""===z||!!z}let ks=(()=>{class z{constructor(A,Q,se,be,Ve,Fe){this.router=A,this.element=Q,this.renderer=se,this.cdr=be,this.link=Ve,this.linkWithHref=Fe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.vpe,this.routerEventsSubscription=A.events.subscribe(Et=>{Et instanceof ci&&this.update()})}ngAfterContentInit(){(0,he.of)(this.links.changes,this.linksWithHrefs.changes,(0,he.of)(null)).pipe((0,zi.J)()).subscribe(A=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var A;null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe();const Q=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(se=>!!se).map(se=>se.onChanges);this.linkInputChangesSubscription=(0,Le.D)(Q).pipe((0,zi.J)()).subscribe(se=>{this.isActive!==this.isLinkActive(this.router)(se)&&this.update()})}set routerLinkActive(A){const Q=Array.isArray(A)?A:A.split(" ");this.classes=Q.filter(se=>!!se)}ngOnChanges(A){this.update()}ngOnDestroy(){var A;this.routerEventsSubscription.unsubscribe(),null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const A=this.hasActiveLinks();this.isActive!==A&&(this.isActive=A,this.cdr.markForCheck(),this.classes.forEach(Q=>{A?this.renderer.addClass(this.element.nativeElement,Q):this.renderer.removeClass(this.element.nativeElement,Q)}),this.isActiveChange.emit(A))})}isLinkActive(A){const Q=function Ea(z){return!!z.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return se=>!!se.urlTree&&A.isActive(se.urlTree,Q)}hasActiveLinks(){const A=this.isLinkActive(this.router);return this.link&&A(this.link)||this.linkWithHref&&A(this.linkWithHref)||this.links.some(A)||this.linksWithHrefs.some(A)}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Io),D.Y36(D.SBq),D.Y36(D.Qsj),D.Y36(D.sBO),D.Y36(vo,8),D.Y36(An,8))},z.\u0275dir=D.lG2({type:z,selectors:[["","routerLinkActive",""]],contentQueries:function(A,Q,se){if(1&A&&(D.Suo(se,vo,5),D.Suo(se,An,5)),2&A){let be;D.iGM(be=D.CRH())&&(Q.links=be),D.iGM(be=D.CRH())&&(Q.linksWithHrefs=be)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[D.TTD]}),z})();class Ya{}class Da{preload(P,A){return(0,he.of)(null)}}let Zl=(()=>{class z{constructor(A,Q,se,be){this.router=A,this.injector=se,this.preloadingStrategy=be,this.loader=new ai(se,Q,Et=>A.triggerEvent(new gn(Et)),Et=>A.triggerEvent(new zn(Et)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,jt.h)(A=>A instanceof ci),(0,Tt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const A=this.injector.get(D.h0i);return this.processRoutes(A,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,Q){const se=[];for(const be of Q)if(be.loadChildren&&!be.canLoad&&be._loadedConfig){const Ve=be._loadedConfig;se.push(this.processRoutes(Ve.module,Ve.routes))}else be.loadChildren&&!be.canLoad?se.push(this.preloadConfig(A,be)):be.children&&se.push(this.processRoutes(A,be.children));return(0,Le.D)(se).pipe((0,zi.J)(),(0,zt.U)(be=>{}))}preloadConfig(A,Q){return this.preloadingStrategy.preload(Q,()=>(Q._loadedConfig?(0,he.of)(Q._loadedConfig):this.loader.load(A.injector,Q)).pipe((0,Ct.z)(be=>(Q._loadedConfig=be,this.processRoutes(be.module,be.routes)))))}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(Io),D.LFG(D.Sil),D.LFG(D.zs3),D.LFG(Ya))},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})(),La=(()=>{class z{constructor(A,Q,se={}){this.router=A,this.viewportScroller=Q,this.options=se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},se.scrollPositionRestoration=se.scrollPositionRestoration||"disabled",se.anchorScrolling=se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(A=>{A instanceof Ii?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof ci&&(this.lastId=A.id,this.scheduleScrollEvent(A,this.router.parseUrl(A.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(A=>{A instanceof Kn&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,Q){this.router.triggerEvent(new Kn(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,Q))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return z.\u0275fac=function(A){D.$Z()},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();const cs=new D.OlP("ROUTER_CONFIGURATION"),Wl=new D.OlP("ROUTER_FORROOT_GUARD"),kc=[Dn.Ye,{provide:Ui,useClass:tr},{provide:Io,useFactory:function ga(z,P,A,Q,se,be,Ve={},Fe,Et){const ei=new Io(null,z,P,A,Q,se,It(be));return Fe&&(ei.urlHandlingStrategy=Fe),Et&&(ei.routeReuseStrategy=Et),function Yl(z,P){z.errorHandler&&(P.errorHandler=z.errorHandler),z.malformedUriErrorHandler&&(P.malformedUriErrorHandler=z.malformedUriErrorHandler),z.onSameUrlNavigation&&(P.onSameUrlNavigation=z.onSameUrlNavigation),z.paramsInheritanceStrategy&&(P.paramsInheritanceStrategy=z.paramsInheritanceStrategy),z.relativeLinkResolution&&(P.relativeLinkResolution=z.relativeLinkResolution),z.urlUpdateStrategy&&(P.urlUpdateStrategy=z.urlUpdateStrategy),z.canceledNavigationResolution&&(P.canceledNavigationResolution=z.canceledNavigationResolution)}(Ve,ei),Ve.enableTracing&&ei.events.subscribe(Yi=>{var Ei,Bi;null===(Ei=console.group)||void 0===Ei||Ei.call(console,`Router Event: ${Yi.constructor.name}`),console.log(Yi.toString()),console.log(Yi),null===(Bi=console.groupEnd)||void 0===Bi||Bi.call(console)}),ei},deps:[Ui,jo,Dn.Ye,D.zs3,D.Sil,jn,cs,[class Oi{},new D.FiY],[class ys{},new D.FiY]]},jo,{provide:Ji,useFactory:function Sa(z){return z.routerState.root},deps:[Io]},Zl,Da,class In{preload(P,A){return A().pipe((0,ct.K)(()=>(0,he.of)(null)))}},{provide:cs,useValue:{enableTracing:!1}}];function gu(){return new D.PXZ("Router",Io)}let ql=(()=>{class z{constructor(A,Q){}static forRoot(A,Q){return{ngModule:z,providers:[kc,Co(A),{provide:Wl,useFactory:hl,deps:[[Io,new D.FiY,new D.tp0]]},{provide:cs,useValue:Q||{}},{provide:Dn.S$,useFactory:Il,deps:[Dn.lw,[new D.tBr(Dn.mr),new D.FiY],cs]},{provide:La,useFactory:Ka,deps:[Io,Dn.EM,cs]},{provide:Ya,useExisting:Q&&Q.preloadingStrategy?Q.preloadingStrategy:Da},{provide:D.PXZ,multi:!0,useFactory:gu},[Ta,{provide:D.ip1,multi:!0,useFactory:Aa,deps:[Ta]},{provide:Ho,useFactory:Ja,deps:[Ta]},{provide:D.tb,multi:!0,useExisting:Ho}]]}}static forChild(A){return{ngModule:z,providers:[Co(A)]}}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(Wl,8),D.LFG(Io,8))},z.\u0275mod=D.oAB({type:z}),z.\u0275inj=D.cJS({}),z})();function Ka(z,P,A){return A.scrollOffset&&P.setOffset(A.scrollOffset),new La(z,P,A)}function Il(z,P,A={}){return A.useHash?new Dn.Do(z,P):new Dn.b0(z,P)}function hl(z){return"guarded"}function Co(z){return[{provide:D.deG,multi:!0,useValue:z},{provide:jn,multi:!0,useValue:z}]}let Ta=(()=>{class z{constructor(A){this.injector=A,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bt.x}appInitializer(){return this.injector.get(Dn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Q=null;const se=new Promise(Fe=>Q=Fe),be=this.injector.get(Io),Ve=this.injector.get(cs);return"disabled"===Ve.initialNavigation?(be.setUpLocationChangeListener(),Q(!0)):"enabled"===Ve.initialNavigation||"enabledBlocking"===Ve.initialNavigation?(be.hooks.afterPreactivation=()=>this.initNavigation?(0,he.of)(null):(this.initNavigation=!0,Q(!0),this.resultOfPreactivationDone),be.initialNavigation()):Q(!0),se})}bootstrapListener(A){const Q=this.injector.get(cs),se=this.injector.get(Zl),be=this.injector.get(La),Ve=this.injector.get(Io),Fe=this.injector.get(D.z2F);A===Fe.components[0]&&(("enabledNonBlocking"===Q.initialNavigation||void 0===Q.initialNavigation)&&Ve.initialNavigation(),se.setUpPreloading(),be.init(),Ve.resetRootComponentType(Fe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(D.zs3))},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();function Aa(z){return z.appInitializer.bind(z)}function Ja(z){return z.bootstrapListener.bind(z)}const Ho=new D.OlP("Router Initializer")}},Sn=>{Sn(Sn.s=9819)}]);