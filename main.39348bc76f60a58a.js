(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[179],{3619:(On,wt,V)=>{"use strict";V.d(wt,{a:()=>$e});var D=V(7429),l=V(5e3);function q(Ke,Oe){1&Ke&&l.Hsn(0)}const g=["*"];let $e=(()=>{class Ke{constructor(Le,he,Ve){this.componentFactoryResolver=Le,this.injector=he,this.appRef=Ve}ngAfterViewInit(){this.portalOutlet=new D.u0(document.querySelector("left"===this.position?"#layout-left-custom-items":"#layout-right-custom-items"),this.componentFactoryResolver,this.appRef,this.injector),this.portalOutlet.attach(this.portal)}ngOnDestroy(){this.portalOutlet.detach()}}return Ke.\u0275fac=function(Le){return new(Le||Ke)(l.Y36(l._Vd),l.Y36(l.zs3),l.Y36(l.z2F))},Ke.\u0275cmp=l.Xpm({type:Ke,selectors:[["showcase-layout-toolbar-menu"]],viewQuery:function(Le,he){if(1&Le&&l.Gf(D.ig,5),2&Le){let Ve;l.iGM(Ve=l.CRH())&&(he.portal=Ve.first)}},inputs:{position:"position"},ngContentSelectors:g,decls:1,vars:0,consts:[["cdk-portal",""]],template:function(Le,he){1&Le&&(l.F$t(),l.YNc(0,q,1,0,"ng-template",0))},directives:[D.bH],encapsulation:2}),Ke})()},6449:(On,wt,V)=>{"use strict";V.d(wt,{$:()=>Ke});var D=V(5e3),l=V(4594),q=V(7423),g=V(4521),$e=V(3874);let Ke=(()=>{class Oe{}return Oe.\u0275fac=function(he){return new(he||Oe)},Oe.\u0275cmp=D.Xpm({type:Oe,selectors:[["ng-component"]],decls:16,vars:0,consts:[["color","primary"],["id","layout-left-custom-items"],["mat-button","","routerLink","/"],["svgIcon","ngx-maplibre-gl"],["mat-button","","routerLink","/demo"],["mat-button","","routerLink","/doc"],["id","layout-right-custom-items"],["mat-button","","href","https://github.com/maplibre/ngx-maplibre-gl"],["svgIcon","github"]],template:function(he,Ve){1&he&&(D.TgZ(0,"mat-toolbar",0),D.TgZ(1,"div"),D._UZ(2,"div",1),D.TgZ(3,"a",2),D._UZ(4,"mat-icon",3),D._uU(5," ngx-maplibre-gl "),D.qZA(),D.TgZ(6,"a",4),D._uU(7," Demo "),D.qZA(),D.TgZ(8,"a",5),D._uU(9," Documentation "),D.qZA(),D.qZA(),D.TgZ(10,"div"),D._UZ(11,"div",6),D.TgZ(12,"a",7),D._UZ(13,"mat-icon",8),D._uU(14," GitHub "),D.qZA(),D.qZA(),D.qZA(),D._UZ(15,"router-outlet"))},directives:[l.Ye,q.zs,g.yS,$e.Hw,g.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100vh}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 0 0}div[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.menu-button[_ngcontent-%COMP%]{height:100%}"]}),Oe})()},6838:(On,wt,V)=>{"use strict";V.d(wt,{x:()=>Ze});var D=V(7429),l=V(9808),q=V(7423),g=V(3874),$e=V(4594),Ke=V(4521),he=(V(3619),V(6449),V(5e3));let Ze=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275mod=he.oAB({type:Be}),Be.\u0275inj=he.cJS({providers:[],imports:[[l.ez,Ke.Bz,$e.g0,g.Ps,q.ot,D.eL]]}),Be})()},9819:(On,wt,V)=>{"use strict";var D=V(2313),l=V(5e3),q=V(4521);let g=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-root"]],decls:1,vars:0,template:function(a,y){1&a&&l._UZ(0,"router-outlet")},directives:[q.lC],encapsulation:2}),d})();var $e=V(3874),Ke=V(6360),Oe=V(9808);let Le=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Oe.ez]]}),d})();var he=V(655),Ve=V(1943),Ze=V(7579);class Be extends Ze.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(C){const{hasError:a,_hasValue:y,_value:Z,thrownError:pe,isStopped:Qe,_isComplete:Wt}=this;a?C.error(pe):(Qe||Wt)&&(y&&C.next(Z),C.complete())}next(C){this.isStopped||(this._value=C,this._hasValue=!0)}complete(){const{_hasValue:C,_value:a,_isComplete:y}=this;y||(this._isComplete=!0,C&&super.next(a),super.complete())}}var gt=V(727),Ye=V(590);let tt=(()=>{class d{constructor(a){this.zone=a,this.mapCreated=new Be,this.mapLoaded=new Be,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new gt.w0,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(a){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{this.createMap(a.mapOptions),this.hookEvents(a.mapEvents),this.mapEvents=a.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(a)})}updateMaxZoom(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(a)})}updateMinPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(a)})}updateMaxPitch(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(a)})}updateRenderWorldCopies(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(a)})}updateScrollZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(a){return this.zone.runOutsideAngular(()=>{a?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(a)})}updateMaxBounds(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(a)})}changeCanvasCursor(a){this.mapInstance.getCanvasContainer().style.cursor=a}queryRenderedFeatures(a,y){return this.mapInstance.queryRenderedFeatures(a,y)}panTo(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(a,y)})}move(a,y,Z,pe,Qe,Wt){return this.zone.runOutsideAngular(()=>{this.mapInstance[a](Object.assign(Object.assign({},y),{zoom:null!=Z?Z:this.mapInstance.getZoom(),center:null!=pe?pe:this.mapInstance.getCenter(),bearing:null!=Qe?Qe:this.mapInstance.getBearing(),pitch:null!=Wt?Wt:this.mapInstance.getPitch()}))})}addLayer(a,y,Z){this.zone.runOutsideAngular(()=>{Object.keys(a.layerOptions).forEach(pe=>{void 0===a.layerOptions[pe]&&delete a.layerOptions[pe]}),this.mapInstance.addLayer(a.layerOptions,Z),y&&(a.layerEvents.layerClick.observers.length&&this.mapInstance.on("click",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerClick.emit(pe)})}),a.layerEvents.layerDblClick.observers.length&&this.mapInstance.on("dblclick",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerDblClick.emit(pe)})}),a.layerEvents.layerMouseDown.observers.length&&this.mapInstance.on("mousedown",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseDown.emit(pe)})}),a.layerEvents.layerMouseUp.observers.length&&this.mapInstance.on("mouseup",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseUp.emit(pe)})}),a.layerEvents.layerMouseEnter.observers.length&&this.mapInstance.on("mouseenter",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseEnter.emit(pe)})}),a.layerEvents.layerMouseLeave.observers.length&&this.mapInstance.on("mouseleave",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseLeave.emit(pe)})}),a.layerEvents.layerMouseMove.observers.length&&this.mapInstance.on("mousemove",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseMove.emit(pe)})}),a.layerEvents.layerMouseOver.observers.length&&this.mapInstance.on("mouseover",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseOver.emit(pe)})}),a.layerEvents.layerMouseOut.observers.length&&this.mapInstance.on("mouseout",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerMouseOut.emit(pe)})}),a.layerEvents.layerContextMenu.observers.length&&this.mapInstance.on("contextmenu",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerContextMenu.emit(pe)})}),a.layerEvents.layerTouchStart.observers.length&&this.mapInstance.on("touchstart",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchStart.emit(pe)})}),a.layerEvents.layerTouchEnd.observers.length&&this.mapInstance.on("touchend",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchEnd.emit(pe)})}),a.layerEvents.layerTouchCancel.observers.length&&this.mapInstance.on("touchcancel",a.layerOptions.id,pe=>{this.zone.run(()=>{a.layerEvents.layerTouchCancel.emit(pe)})}))})}removeLayer(a){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(a)&&this.mapInstance.removeLayer(a)})}addMarker(a){const y={offset:a.markersOptions.offset,anchor:a.markersOptions.anchor,draggable:!!a.markersOptions.draggable,rotationAlignment:a.markersOptions.rotationAlignment,pitchAlignment:a.markersOptions.pitchAlignment,clickTolerance:a.markersOptions.clickTolerance};a.markersOptions.element.childNodes.length>0&&(y.element=a.markersOptions.element);const Z=new Ve.Marker(y);return a.markersEvents.markerDragStart.observers.length&&Z.on("dragstart",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDragStart.emit(Wt)})}}),a.markersEvents.markerDrag.observers.length&&Z.on("drag",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDrag.emit(Wt)})}}),a.markersEvents.markerDragEnd.observers.length&&Z.on("dragend",Qe=>{if(Qe){const{target:Wt}=Qe;this.zone.run(()=>{a.markersEvents.markerDragEnd.emit(Wt)})}}),Z.setLngLat(a.markersOptions.feature?a.markersOptions.feature.geometry.coordinates:a.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(Z.addTo(this.mapInstance),Z))}removeMarker(a){this.markersToRemove.push(a)}createPopup(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(a.popupOptions).forEach(pe=>void 0===a.popupOptions[pe]&&delete a.popupOptions[pe]);const Z=new Ve.Popup(a.popupOptions);return Z.setDOMContent(y),a.popupEvents.popupClose.observers.length&&Z.on("close",()=>{this.zone.run(()=>{a.popupEvents.popupClose.emit()})}),a.popupEvents.popupOpen.observers.length&&Z.on("open",()=>{this.zone.run(()=>{a.popupEvents.popupOpen.emit()})}),Z})}addPopupToMap(a,y,Z=!1){return this.zone.runOutsideAngular(()=>{Z&&a._listeners&&delete a._listeners.open,a.setLngLat(y),a.addTo(this.mapInstance)})}addPopupToMarker(a,y){return this.zone.runOutsideAngular(()=>{a.setPopup(y)})}removePopupFromMap(a,y=!1){y&&a._listeners&&delete a._listeners.close,this.popupsToRemove.push(a)}removePopupFromMarker(a){return this.zone.runOutsideAngular(()=>{a.setPopup(void 0)})}addControl(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(a,y)})}removeControl(a){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(a)})}loadAndAddImage(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){return this.zone.runOutsideAngular(()=>new Promise((pe,Qe)=>{this.mapInstance.loadImage(y,(Wt,Sn)=>{Wt?Qe(Wt):(this.addImage(a,Sn,Z),pe())})}))})}addImage(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(a,y,Z)})}removeImage(a){this.imageIdsToRemove.push(a)}addSource(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>void 0===y[Z]&&delete y[Z]),this.mapInstance.addSource(a,y)})}getSource(a){return this.mapInstance.getSource(a)}removeSource(a){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(a).forEach(y=>this.mapInstance.removeLayer(y.id)),this.mapInstance.removeSource(a)})}setAllLayerPaintProperty(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>{this.mapInstance.setPaintProperty(a,Z,y[Z])})})}setAllLayerLayoutProperty(a,y){return this.zone.runOutsideAngular(()=>{Object.keys(y).forEach(Z=>{this.mapInstance.setLayoutProperty(a,Z,y[Z])})})}setLayerFilter(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(a,y)})}setLayerBefore(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(a,y)})}setLayerZoomRange(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(a,y||0,Z||20)})}fitBounds(a,y){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(a,y)})}fitScreenCoordinates(a,y,Z){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(a[0],a[1],y,Z)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(a){l.R0b.assertNotInAngularZone(),Object.keys(a).forEach(Z=>{void 0===a[Z]&&delete a[Z]}),this.mapInstance=new Ve.Map(a),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(a.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const a of this.markersToRemove)a.remove();this.markersToRemove=[]}removePopups(){for(const a of this.popupsToRemove)a.remove();this.popupsToRemove=[]}removeImages(){for(const a of this.imageIdsToRemove)this.mapInstance.removeImage(a);this.imageIdsToRemove=[]}findLayersBySourceId(a){const y=this.mapInstance.getStyle().layers;return null==y?[]:y.filter(Z=>"source"in Z&&Z.source===a)}hookEvents(a){this.mapInstance.on("load",y=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{a.mapLoad.emit(y.target)})}),a.mapResize.observers.length&&this.mapInstance.on("resize",y=>this.zone.run(()=>{a.mapResize.emit(y)})),a.mapRemove.observers.length&&this.mapInstance.on("remove",y=>this.zone.run(()=>{a.mapRemove.emit(y)})),a.mapMouseDown.observers.length&&this.mapInstance.on("mousedown",y=>this.zone.run(()=>{a.mapMouseDown.emit(y)})),a.mapMouseUp.observers.length&&this.mapInstance.on("mouseup",y=>this.zone.run(()=>{a.mapMouseUp.emit(y)})),a.mapMouseMove.observers.length&&this.mapInstance.on("mousemove",y=>this.zone.run(()=>{a.mapMouseMove.emit(y)})),a.mapClick.observers.length&&this.mapInstance.on("click",y=>this.zone.run(()=>{a.mapClick.emit(y)})),a.mapDblClick.observers.length&&this.mapInstance.on("dblclick",y=>this.zone.run(()=>{a.mapDblClick.emit(y)})),a.mapMouseOver.observers.length&&this.mapInstance.on("mouseover",y=>this.zone.run(()=>{a.mapMouseOver.emit(y)})),a.mapMouseOut.observers.length&&this.mapInstance.on("mouseout",y=>this.zone.run(()=>{a.mapMouseOut.emit(y)})),a.mapContextMenu.observers.length&&this.mapInstance.on("contextmenu",y=>this.zone.run(()=>{a.mapContextMenu.emit(y)})),a.mapTouchStart.observers.length&&this.mapInstance.on("touchstart",y=>this.zone.run(()=>{a.mapTouchStart.emit(y)})),a.mapTouchEnd.observers.length&&this.mapInstance.on("touchend",y=>this.zone.run(()=>{a.mapTouchEnd.emit(y)})),a.mapTouchMove.observers.length&&this.mapInstance.on("touchmove",y=>this.zone.run(()=>{a.mapTouchMove.emit(y)})),a.mapTouchCancel.observers.length&&this.mapInstance.on("touchcancel",y=>this.zone.run(()=>{a.mapTouchCancel.emit(y)})),a.mapWheel.observers.length&&this.mapInstance.on("wheel",y=>this.zone.run(()=>{a.mapWheel.emit(y)})),a.moveStart.observers.length&&this.mapInstance.on("movestart",y=>this.zone.run(()=>a.moveStart.emit(y))),a.move.observers.length&&this.mapInstance.on("move",y=>this.zone.run(()=>a.move.emit(y))),a.moveEnd.observers.length&&this.mapInstance.on("moveend",y=>this.zone.run(()=>a.moveEnd.emit(y))),a.mapDragStart.observers.length&&this.mapInstance.on("dragstart",y=>this.zone.run(()=>{a.mapDragStart.emit(y)})),a.mapDrag.observers.length&&this.mapInstance.on("drag",y=>this.zone.run(()=>{a.mapDrag.emit(y)})),a.mapDragEnd.observers.length&&this.mapInstance.on("dragend",y=>this.zone.run(()=>{a.mapDragEnd.emit(y)})),a.zoomStart.observers.length&&this.mapInstance.on("zoomstart",y=>this.zone.run(()=>a.zoomStart.emit(y))),a.zoomEvt.observers.length&&this.mapInstance.on("zoom",y=>this.zone.run(()=>a.zoomEvt.emit(y))),a.zoomEnd.observers.length&&this.mapInstance.on("zoomend",y=>this.zone.run(()=>a.zoomEnd.emit(y))),a.rotateStart.observers.length&&this.mapInstance.on("rotatestart",y=>this.zone.run(()=>a.rotateStart.emit(y))),a.rotate.observers.length&&this.mapInstance.on("rotate",y=>this.zone.run(()=>a.rotate.emit(y))),a.rotateEnd.observers.length&&this.mapInstance.on("rotateend",y=>this.zone.run(()=>a.rotateEnd.emit(y))),a.pitchStart.observers.length&&this.mapInstance.on("pitchstart",y=>this.zone.run(()=>a.pitchStart.emit(y))),a.pitchEvt.observers.length&&this.mapInstance.on("pitch",y=>this.zone.run(()=>a.pitchEvt.emit(y))),a.pitchEnd.observers.length&&this.mapInstance.on("pitchend",y=>this.zone.run(()=>a.pitchEnd.emit(y))),a.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",y=>this.zone.run(()=>a.boxZoomStart.emit(y))),a.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",y=>this.zone.run(()=>a.boxZoomEnd.emit(y))),a.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",y=>this.zone.run(()=>a.boxZoomCancel.emit(y))),a.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",y=>this.zone.run(()=>a.webGlContextLost.emit(y))),a.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",y=>this.zone.run(()=>a.webGlContextRestored.emit(y))),a.render.observers.length&&this.mapInstance.on("render",y=>this.zone.run(()=>a.render.emit(y))),a.mapError.observers.length&&this.mapInstance.on("error",y=>this.zone.run(()=>{a.mapError.emit(y)})),a.data.observers.length&&this.mapInstance.on("data",y=>this.zone.run(()=>a.data.emit(y))),a.styleData.observers.length&&this.mapInstance.on("styledata",y=>this.zone.run(()=>a.styleData.emit(y))),a.sourceData.observers.length&&this.mapInstance.on("sourcedata",y=>this.zone.run(()=>a.sourceData.emit(y))),a.dataLoading.observers.length&&this.mapInstance.on("dataloading",y=>this.zone.run(()=>a.dataLoading.emit(y))),a.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",y=>this.zone.run(()=>a.styleDataLoading.emit(y))),a.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",y=>this.zone.run(()=>a.sourceDataLoading.emit(y))),a.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",y=>this.zone.run(()=>a.styleImageMissing.emit(y))),a.idle.observers.length&&this.mapInstance.on("idle",y=>this.zone.run(()=>a.idle.emit(y)))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac}),d})();const Mt=["content"],He=["*"];class Vt{constructor(C){this.container=C}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let Ht=(()=>{class d{constructor(a){this.MapService=a,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new Vt(this.content.nativeElement),this.MapService.mapCreated$.subscribe(()=>{this.MapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.MapService.removeControl(this.control)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-control"]],viewQuery:function(a,y){if(1&a&&l.Gf(Mt,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{position:"position"},ngContentSelectors:He,decls:3,vars:0,consts:[[1,"maplibregl-ctrl"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),d})();var an=V(4968),Dt=V(9300),Fe=V(8505),rt=V(3900),nn=V(2722),Bt=V(5698),Qt=V(8372);let at=(()=>{class d{constructor(a,y){this.MapService=a,this.zone=y,this.type="geojson",this.updateFeatureData=new Ze.x,this.sub=new gt.w0,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const a=this.MapService.mapLoaded$.subscribe(()=>{this.init();const y=(0,an.R)(this.MapService.mapInstance,"styledata").pipe((0,Dt.h)(()=>!this.MapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(y)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded&&((a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.buffer&&!a.buffer.isFirstChange()||a.tolerance&&!a.tolerance.isFirstChange()||a.cluster&&!a.cluster.isFirstChange()||a.clusterRadius&&!a.clusterRadius.isFirstChange()||a.clusterMaxZoom&&!a.clusterMaxZoom.isFirstChange()||a.clusterMinPoints&&!a.clusterMinPoints.isFirstChange()||a.clusterProperties&&!a.clusterProperties.isFirstChange()||a.lineMetrics&&!a.lineMetrics.isFirstChange()||a.generateId&&!a.generateId.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange()||a.filter&&!a.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),a.data&&!a.data.isFirstChange())){const y=this.MapService.getSource(this.id);if(void 0===y)return;y.setData(this.data)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.MapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(a){return(0,he.mG)(this,void 0,void 0,function*(){const y=this.MapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Z,pe)=>{y.getClusterExpansionZoom(a,(Qe,Wt)=>{Qe?pe(Qe):Z(Wt)})})}))})}getClusterChildren(a){return(0,he.mG)(this,void 0,void 0,function*(){const y=this.MapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Z,pe)=>{y.getClusterChildren(a,(Qe,Wt)=>{Qe?pe(Qe):Z(Wt)})})}))})}getClusterLeaves(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){const pe=this.MapService.getSource(this.id);return this.zone.run(()=>(0,he.mG)(this,void 0,void 0,function*(){return new Promise((Qe,Wt)=>{pe.getClusterLeaves(a,y,Z,(Sn,ei)=>{Sn?Wt(Sn):Qe(ei)})})}))})}_addFeature(a){this.data.features.push(a),this.updateFeatureData.next(void 0)}_removeFeature(a){const y=this.data,Z=y.features.indexOf(a);Z>-1&&y.features.splice(Z,1),this.updateFeatureData.next(void 0)}_getNewFeatureId(){return++this.featureIdCounter}init(){this.MapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const y=this.updateFeatureData.pipe((0,Qt.b)(0)).subscribe(()=>{const Z=this.MapService.getSource(this.id);void 0!==Z&&Z.setData(this.data)});this.sub.add(y),this.sourceAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),mt=(()=>{class d{constructor(a){this.GeoJSONSourceComponent=a,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(a){this.feature.geometry.coordinates=a,this.GeoJSONSourceComponent.updateFeatureData.next(void 0)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36((0,l.Gpc)(()=>at)))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),lt=(()=>{class d{constructor(a,y,Z){this.MapService=a,this.NgZone=y,this.FeatureComponent=Z,this.featureDragStart=new l.vpe,this.featureDragEnd=new l.vpe,this.featureDrag=new l.vpe,this.sub=new gt.w0}ngOnInit(){let a,y,Z;if(!this.FeatureComponent||!this.layer)throw new Error("mglDraggable can only be used on Feature (with a layer as input) or Marker");if(a=this.layer.layerMouseEnter,y=this.layer.layerMouseLeave,Z=this.FeatureComponent.updateCoordinates.bind(this.FeatureComponent),"Point"!==this.FeatureComponent.geometry.type)throw new Error("mglDraggable only support point feature");this.handleDraggable(a,y,Z)}ngOnDestroy(){this.sub.unsubscribe()}handleDraggable(a,y,Z){let pe=!1,Qe=!1;this.MapService.mapCreated$.subscribe(()=>{const Wt=(0,an.R)(this.MapService.mapInstance,"mouseup"),Sn=a.pipe((0,Dt.h)(()=>!pe),(0,Dt.h)(oi=>this.filterFeature(oi)),(0,Fe.b)(()=>{Qe=!0,this.MapService.changeCanvasCursor("move"),this.MapService.updateDragPan(!1)}),(0,rt.w)(()=>(0,an.R)(this.MapService.mapInstance,"mousedown").pipe((0,nn.R)(y)))),ei=Sn.pipe((0,rt.w)(()=>(0,an.R)(this.MapService.mapInstance,"mousemove").pipe((0,nn.R)(Wt)))),bi=Sn.pipe((0,rt.w)(()=>Wt.pipe((0,Bt.q)(1))));this.sub.add(Sn.subscribe(oi=>{pe=!0,this.featureDragStart.observers.length&&this.NgZone.run(()=>{this.featureDragStart.emit(oi)})})),this.sub.add(ei.subscribe(oi=>{Z([oi.lngLat.lng,oi.lngLat.lat]),this.featureDrag.observers.length&&this.NgZone.run(()=>{this.featureDrag.emit(oi)})})),this.sub.add(bi.subscribe(oi=>{pe=!1,this.featureDragEnd.observers.length&&this.NgZone.run(()=>{this.featureDragEnd.emit(oi)}),Qe||(this.MapService.changeCanvasCursor(""),this.MapService.updateDragPan(!0))})),this.sub.add(y.pipe((0,Fe.b)(()=>Qe=!1),(0,Dt.h)(()=>!pe)).subscribe(()=>{this.MapService.changeCanvasCursor(""),this.MapService.updateDragPan(!0)}))})}filterFeature(a){return!(this.FeatureComponent&&this.layer&&!this.MapService.queryRenderedFeatures(a.point,{layers:[this.layer.id],filter:["all",["==","$type","Point"],["==","$id",this.FeatureComponent.id]]})[0])}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(l.R0b),l.Y36(mt,9))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglDraggable",""]],inputs:{layer:["mglDraggable","layer"]},outputs:{featureDragStart:"featureDragStart",featureDragEnd:"featureDragEnd",featureDrag:"featureDrag"}}),d})();var At=V(4004);function Kt(d){return(0,At.U)(()=>d)}var Ct=V(8675);let yn=(()=>{class d{constructor(a){this.MapService=a,this.layerClick=new l.vpe,this.layerDblClick=new l.vpe,this.layerMouseDown=new l.vpe,this.layerMouseUp=new l.vpe,this.layerMouseEnter=new l.vpe,this.layerMouseLeave=new l.vpe,this.layerMouseMove=new l.vpe,this.layerMouseOver=new l.vpe,this.layerMouseOut=new l.vpe,this.layerContextMenu=new l.vpe,this.layerTouchStart=new l.vpe,this.layerTouchEnd=new l.vpe,this.layerTouchCancel=new l.vpe,this.layerAdded=!1}ngOnInit(){this.sub=this.MapService.mapLoaded$.pipe((0,rt.w)(()=>(0,an.R)(this.MapService.mapInstance,"styledata").pipe(Kt(!1),(0,Dt.h)(()=>!this.MapService.mapInstance.getLayer(this.id)),(0,Ct.O)(!0)))).subscribe(a=>this.init(a))}ngOnChanges(a){!this.layerAdded||(a.paint&&!a.paint.isFirstChange()&&this.MapService.setAllLayerPaintProperty(this.id,a.paint.currentValue),a.layout&&!a.layout.isFirstChange()&&this.MapService.setAllLayerLayoutProperty(this.id,a.layout.currentValue),a.filter&&!a.filter.isFirstChange()&&this.MapService.setLayerFilter(this.id,a.filter.currentValue),a.before&&!a.before.isFirstChange()&&this.MapService.setLayerBefore(this.id,a.before.currentValue),(a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange())&&this.MapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.MapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(a){this.MapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}},a,this.before),this.layerAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2}),d})(),di=(()=>{class d{constructor(a,y){this.MapService=a,this.zone=y,this.imageError=new l.vpe,this.imageLoaded=new l.vpe,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.sub=this.MapService.mapLoaded$.pipe((0,rt.w)(()=>(0,an.R)(this.MapService.mapInstance,"styledata").pipe((0,Ct.O)(void 0),(0,Dt.h)(()=>!this.isAdding&&!this.MapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(a){(a.data&&!a.data.isFirstChange()||a.options&&!a.options.isFirstChange()||a.url&&!a.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.MapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){return(0,he.mG)(this,void 0,void 0,function*(){if(this.isAdding=!0,this.data)this.MapService.addImage(this.id,this.data,this.options),this.isAdded=!0,this.isAdding=!1;else if(this.url)try{yield this.MapService.loadAndAddImage(this.id,this.url,this.options),this.isAdded=!0,this.isAdding=!1,this.zone.run(()=>{this.imageLoaded.emit()})}catch(a){this.zone.run(()=>{this.imageError.emit(a)})}})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2}),d})(),Ui=(()=>{class d{constructor(a){this.MapService=a,this.type="vector",this.sourceAdded=!1,this.sub=new gt.w0}ngOnInit(){const a=this.MapService.mapLoaded$.subscribe(()=>{this.init();const y=(0,an.R)(this.MapService.mapInstance,"styledata").pipe((0,Dt.h)(()=>!this.MapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(y)});this.sub.add(a)}ngOnChanges(a){if(this.sourceAdded)if(a.bounds&&!a.bounds.isFirstChange()||a.scheme&&!a.scheme.isFirstChange()||a.minzoom&&!a.minzoom.isFirstChange()||a.maxzoom&&!a.maxzoom.isFirstChange()||a.attribution&&!a.attribution.isFirstChange()||a.promoteId&&!a.promoteId.isFirstChange())this.ngOnDestroy(),this.ngOnInit();else if(a.url&&!a.url.isFirstChange()||a.tiles&&!a.tiles.isFirstChange()){const y=this.MapService.getSource(this.id);if(void 0===y)return;a.url&&this.url&&y.setUrl(this.url),a.tiles&&this.tiles&&y.setTiles(this.tiles)}}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.MapService.removeSource(this.id),this.sourceAdded=!1)}init(){this.MapService.addSource(this.id,{type:this.type,url:this.url,tiles:this.tiles,bounds:this.bounds,scheme:this.scheme,minzoom:this.minzoom,maxzoom:this.maxzoom,attribution:this.attribution,promoteId:this.promoteId}),this.sourceAdded=!0}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-vector-source"]],inputs:{id:"id",url:"url",tiles:"tiles",bounds:"bounds",scheme:"scheme",minzoom:"minzoom",maxzoom:"maxzoom",attribution:"attribution",promoteId:"promoteId"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})(),ki=(()=>{class d{constructor(a){this.MapService=a,this.type="image"}ngOnInit(){this.sub=this.MapService.mapLoaded$.subscribe(()=>this.init())}ngOnChanges(a){if(void 0===this.sourceId)return;const y=this.MapService.getSource(this.sourceId);void 0!==y&&y.updateImage({url:void 0===a.url?void 0:this.url,coordinates:void 0===a.coordinates?void 0:this.coordinates})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe(),void 0!==this.sourceId&&(this.MapService.removeSource(this.sourceId),this.sourceId=void 0)}init(){this.MapService.addSource(this.id,{type:"image",url:this.url,coordinates:this.coordinates}),this.sourceId=this.id}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-image-source"]],inputs:{id:"id",url:"url",coordinates:"coordinates"},features:[l.TTD],decls:0,vars:0,template:function(a,y){},encapsulation:2,changeDetection:0}),d})();const xi=["content"],In=["*"];let Qn=(()=>{class d{constructor(a){this.MapService=a,this.markerDragStart=new l.vpe,this.markerDragEnd=new l.vpe,this.markerDrag=new l.vpe}ngOnInit(){if(this.feature&&this.lngLat)throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(a){a.lngLat&&!a.lngLat.isFirstChange()&&this.markerInstance.setLngLat(this.lngLat),a.feature&&!a.feature.isFirstChange()&&this.markerInstance.setLngLat(this.feature.geometry.coordinates),a.draggable&&!a.draggable.isFirstChange()&&this.markerInstance.setDraggable(!!this.draggable),a.popupShown&&!a.popupShown.isFirstChange()&&(a.popupShown.currentValue?this.markerInstance.getPopup().addTo(this.MapService.mapInstance):this.markerInstance.getPopup().remove()),a.pitchAlignment&&!a.pitchAlignment.isFirstChange()&&this.markerInstance.setPitchAlignment(a.pitchAlignment.currentValue),a.rotationAlignment&&!a.rotationAlignment.isFirstChange()&&this.markerInstance.setRotationAlignment(a.rotationAlignment.currentValue)}ngAfterViewInit(){this.MapService.mapCreated$.subscribe(()=>{this.markerInstance=this.MapService.addMarker({markersOptions:{offset:this.offset,anchor:this.anchor,pitchAlignment:this.pitchAlignment,rotationAlignment:this.rotationAlignment,draggable:!!this.draggable,element:this.content.nativeElement,feature:this.feature,lngLat:this.lngLat,clickTolerance:this.clickTolerance},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}})})}ngOnDestroy(){this.MapService.removeMarker(this.markerInstance),this.markerInstance=void 0}togglePopup(){this.markerInstance.togglePopup()}updateCoordinates(a){this.markerInstance.setLngLat(a)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-marker"]],viewQuery:function(a,y){if(1&a&&l.Gf(xi,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{offset:"offset",anchor:"anchor",clickTolerance:"clickTolerance",feature:"feature",lngLat:"lngLat",draggable:"draggable",popupShown:"popupShown",className:"className",pitchAlignment:"pitchAlignment",rotationAlignment:"rotationAlignment"},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},features:[l.TTD],ngContentSelectors:In,decls:3,vars:2,consts:[["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA()),2&a&&l.Tol(y.className)},encapsulation:2,changeDetection:0}),d})();const ft=["content"],kt=["*"];let ln=(()=>{class d{constructor(a){this.MapService=a,this.popupClose=new l.vpe,this.popupOpen=new l.vpe}ngOnInit(){if(this.lngLat&&this.marker||this.feature&&this.lngLat||this.feature&&this.marker)throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(a){if(a.lngLat&&!a.lngLat.isFirstChange()||a.feature&&!a.feature.isFirstChange()){const y=a.lngLat?this.lngLat:this.feature.geometry.coordinates;this.MapService.removePopupFromMap(this.popupInstance,!0);const Z=this.createPopup();this.MapService.addPopupToMap(Z,y,this.popupInstance.isOpen()),this.popupInstance=Z}if(a.marker&&!a.marker.isFirstChange()){const y=a.marker.previousValue;y.markerInstance&&this.MapService.removePopupFromMarker(y.markerInstance),this.marker&&this.marker.markerInstance&&this.popupInstance&&this.MapService.addPopupToMarker(this.marker.markerInstance,this.popupInstance)}a.offset&&!a.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(this.offset)}ngAfterViewInit(){this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance)}ngOnDestroy(){this.popupInstance&&(this.lngLat||this.feature?this.MapService.removePopupFromMap(this.popupInstance):this.marker&&this.marker.markerInstance&&this.MapService.removePopupFromMarker(this.marker.markerInstance)),this.popupInstance=void 0}createPopup(){return this.MapService.createPopup({popupOptions:{closeButton:this.closeButton,closeOnClick:this.closeOnClick,closeOnMove:this.closeOnMove,focusAfterOpen:this.focusAfterOpen,anchor:this.anchor,offset:this.offset,className:this.className,maxWidth:this.maxWidth},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content.nativeElement)}addPopup(a){this.MapService.mapCreated$.subscribe(()=>{if(this.lngLat||this.feature)this.MapService.addPopupToMap(a,this.lngLat?this.lngLat:this.feature.geometry.coordinates);else{if(!this.marker||!this.marker.markerInstance)throw new Error("mgl-popup need either lngLat/marker/feature to be set");this.MapService.addPopupToMarker(this.marker.markerInstance,a)}})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-popup"]],viewQuery:function(a,y){if(1&a&&l.Gf(ft,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.content=Z.first)}},inputs:{closeButton:"closeButton",closeOnClick:"closeOnClick",closeOnMove:"closeOnMove",focusAfterOpen:"focusAfterOpen",anchor:"anchor",className:"className",maxWidth:"maxWidth",feature:"feature",lngLat:"lngLat",marker:"marker",offset:"offset"},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},features:[l.TTD],ngContentSelectors:kt,decls:3,vars:0,consts:[["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",null,0),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),d})(),gn=(()=>{class d{constructor(a,y){this.MapService=a,this.ControlComponent=y}onFullscreen(){this.MapService.mapInstance.resize()}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");this.ControlComponent.control=new Ve.FullscreenControl({container:this.container}),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(Ht,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglFullscreen",""]],hostBindings:function(a,y){1&a&&l.NdJ("webkitfullscreenchange",function(pe){return y.onFullscreen(pe.target)},!1,l.Jf7)},inputs:{container:"container"}}),d})(),Bn=(()=>{class d{constructor(a,y){this.MapService=a,this.ControlComponent=y,this.geolocate=new l.vpe}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");const a={positionOptions:this.positionOptions,fitBoundsOptions:this.fitBoundsOptions,trackUserLocation:this.trackUserLocation,showUserLocation:this.showUserLocation};Object.keys(a).forEach(y=>{void 0===a[y]&&delete a[y]}),this.ControlComponent.control=new Ve.GeolocateControl(a),this.ControlComponent.control.on("geolocate",y=>{this.geolocate.emit(y)}),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(Ht,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglGeolocate",""]],inputs:{positionOptions:"positionOptions",fitBoundsOptions:"fitBoundsOptions",trackUserLocation:"trackUserLocation",showUserLocation:"showUserLocation"},outputs:{geolocate:"geolocate"}}),d})(),Jn=(()=>{class d{constructor(a,y){this.MapService=a,this.ControlComponent=y}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.showCompass&&(a.showCompass=this.showCompass),void 0!==this.showZoom&&(a.showZoom=this.showZoom),this.ControlComponent.control=new Ve.NavigationControl(a),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(Ht,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),d})(),Bi=(()=>{class d{constructor(a,y){this.MapService=a,this.ControlComponent=y}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.compact&&(a.compact=this.compact),void 0!==this.customAttribution&&(a.customAttribution=this.customAttribution),this.ControlComponent.control=new Ve.AttributionControl(a),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(Ht,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglAttribution",""]],inputs:{compact:"compact",customAttribution:"customAttribution"}}),d})(),Xi=(()=>{class d{constructor(a,y){this.MapService=a,this.ControlComponent=y}ngOnChanges(a){a.unit&&!a.unit.isFirstChange()&&this.ControlComponent.control.setUnit(a.unit.currentValue)}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");const a={};void 0!==this.maxWidth&&(a.maxWidth=this.maxWidth),void 0!==this.unit&&(a.unit=this.unit),this.ControlComponent.control=new Ve.ScaleControl(a),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(Ht,1))},d.\u0275dir=l.lG2({type:d,selectors:[["","mglScale",""]],inputs:{maxWidth:"maxWidth",unit:"unit"},features:[l.TTD]}),d})();var _i=V(6451);function qn(d,C){1&d&&l.GkF(0)}const Xn=function(d){return{$implicit:d}};function Zn(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,qn,1,0,"ng-container",4),l.qZA(),l.BQk()),2&d){const a=l.oxw().$implicit,y=l.oxw();l.xp6(1),l.Q6J("feature",a),l.xp6(1),l.Q6J("ngTemplateOutlet",y.clusterPointTpl)("ngTemplateOutletContext",l.VKq(3,Xn,a))}}function St(d,C){1&d&&l.GkF(0)}function $(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"mgl-marker",3),l.YNc(2,St,1,0,"ng-container",4),l.qZA(),l.BQk()),2&d){const a=l.oxw().$implicit,y=l.oxw();l.xp6(1),l.Q6J("feature",a),l.xp6(1),l.Q6J("ngTemplateOutlet",y.pointTpl)("ngTemplateOutletContext",l.VKq(3,Xn,a))}}function U(d,C){if(1&d&&(l.ynx(0),l.YNc(1,Zn,3,5,"ng-container",2),l.YNc(2,$,3,5,"ng-container",2),l.BQk()),2&d){const a=C.$implicit;l.xp6(1),l.Q6J("ngIf",a.properties.cluster),l.xp6(1),l.Q6J("ngIf",!a.properties.cluster)}}const R=function(){return{"circle-radius":0}};let N=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["ng-template","mglPoint",""]]}),d})(),ie=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["ng-template","mglClusterPoint",""]]}),d})(),fe=0,nt=(()=>{class d{constructor(a,y,Z){this.MapService=a,this.ChangeDetectorRef=y,this.zone=Z,this.layerId="mgl-markers-for-clusters-"+fe++,this.sub=new gt.w0}ngAfterContentInit(){const y=this.MapService.mapCreated$.pipe((0,rt.w)(()=>(0,an.R)(this.MapService.mapInstance,"data").pipe((0,Dt.h)(Z=>Z.sourceId===this.source&&"metadata"!==Z.sourceDataType&&this.MapService.mapInstance.isSourceLoaded(this.source)))),(0,rt.w)(()=>(0,_i.T)((0,an.R)(this.MapService.mapInstance,"move"),(0,an.R)(this.MapService.mapInstance,"moveend")).pipe((0,Ct.O)(void 0)))).subscribe(()=>{this.zone.run(()=>{this.updateCluster()})});this.sub.add(y)}ngOnDestroy(){this.sub.unsubscribe()}trackByClusterPoint(a,y){return y.id}updateCluster(){const a={layers:[this.layerId]};this.pointTpl||(a.filter=["==","cluster",!0]),this.clusterPoints=this.MapService.mapInstance.queryRenderedFeatures(a),this.ChangeDetectorRef.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt),l.Y36(l.sBO),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-markers-for-clusters"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,N,5,l.Rgc),l.Suo(Z,ie,5,l.Rgc)),2&a){let pe;l.iGM(pe=l.CRH())&&(y.pointTpl=pe.first),l.iGM(pe=l.CRH())&&(y.clusterPointTpl=pe.first)}},inputs:{source:"source"},decls:2,vars:6,consts:[["type","circle",3,"id","source","paint"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"feature"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,y){1&a&&(l._UZ(0,"mgl-layer",0),l.YNc(1,U,3,2,"ng-container",1)),2&a&&(l.Q6J("id",y.layerId)("source",y.source)("paint",l.DdM(5,R)),l.xp6(1),l.Q6J("ngForOf",y.clusterPoints)("ngForTrackBy",y.trackByClusterPoint))},directives:[yn,Oe.sg,Oe.O5,Qn,Oe.tP],encapsulation:2,changeDetection:0}),d})();const Et=["container"];let _t=(()=>{class d{constructor(a){this.MapService=a,this.movingMethod="flyTo",this.mapResize=new l.vpe,this.mapRemove=new l.vpe,this.mapMouseDown=new l.vpe,this.mapMouseUp=new l.vpe,this.mapMouseMove=new l.vpe,this.mapClick=new l.vpe,this.mapDblClick=new l.vpe,this.mapMouseOver=new l.vpe,this.mapMouseOut=new l.vpe,this.mapContextMenu=new l.vpe,this.mapTouchStart=new l.vpe,this.mapTouchEnd=new l.vpe,this.mapTouchMove=new l.vpe,this.mapTouchCancel=new l.vpe,this.mapWheel=new l.vpe,this.moveStart=new l.vpe,this.move=new l.vpe,this.moveEnd=new l.vpe,this.mapDragStart=new l.vpe,this.mapDrag=new l.vpe,this.mapDragEnd=new l.vpe,this.zoomStart=new l.vpe,this.zoomEvt=new l.vpe,this.zoomEnd=new l.vpe,this.rotateStart=new l.vpe,this.rotate=new l.vpe,this.rotateEnd=new l.vpe,this.pitchStart=new l.vpe,this.pitchEvt=new l.vpe,this.pitchEnd=new l.vpe,this.boxZoomStart=new l.vpe,this.boxZoomEnd=new l.vpe,this.boxZoomCancel=new l.vpe,this.webGlContextLost=new l.vpe,this.webGlContextRestored=new l.vpe,this.mapLoad=new l.vpe,this.idle=new l.vpe,this.render=new l.vpe,this.mapError=new l.vpe,this.data=new l.vpe,this.styleData=new l.vpe,this.sourceData=new l.vpe,this.dataLoading=new l.vpe,this.styleDataLoading=new l.vpe,this.sourceDataLoading=new l.vpe,this.styleImageMissing=new l.vpe}get mapInstance(){return this.MapService.mapInstance}ngAfterViewInit(){this.MapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.MapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.MapService.destroyMap()}ngOnChanges(a){return(0,he.mG)(this,void 0,void 0,function*(){yield this.MapService.mapCreated$.toPromise(),a.cursorStyle&&!a.cursorStyle.isFirstChange()&&this.MapService.changeCanvasCursor(a.cursorStyle.currentValue),a.minZoom&&!a.minZoom.isFirstChange()&&this.MapService.updateMinZoom(a.minZoom.currentValue),a.maxZoom&&!a.maxZoom.isFirstChange()&&this.MapService.updateMaxZoom(a.maxZoom.currentValue),a.minPitch&&!a.minPitch.isFirstChange()&&this.MapService.updateMinPitch(a.minPitch.currentValue),a.maxPitch&&!a.maxPitch.isFirstChange()&&this.MapService.updateMaxPitch(a.maxPitch.currentValue),a.renderWorldCopies&&!a.renderWorldCopies.isFirstChange()&&this.MapService.updateRenderWorldCopies(a.renderWorldCopies.currentValue),a.scrollZoom&&!a.scrollZoom.isFirstChange()&&this.MapService.updateScrollZoom(a.scrollZoom.currentValue),a.dragRotate&&!a.dragRotate.isFirstChange()&&this.MapService.updateDragRotate(a.dragRotate.currentValue),a.touchPitch&&!a.touchPitch.isFirstChange()&&this.MapService.updateTouchPitch(a.touchPitch.currentValue),a.touchZoomRotate&&!a.touchZoomRotate.isFirstChange()&&this.MapService.updateTouchZoomRotate(a.touchZoomRotate.currentValue),a.doubleClickZoom&&!a.doubleClickZoom.isFirstChange()&&this.MapService.updateDoubleClickZoom(a.doubleClickZoom.currentValue),a.keyboard&&!a.keyboard.isFirstChange()&&this.MapService.updateKeyboard(a.keyboard.currentValue),a.dragPan&&!a.dragPan.isFirstChange()&&this.MapService.updateDragPan(a.dragPan.currentValue),a.boxZoom&&!a.boxZoom.isFirstChange()&&this.MapService.updateBoxZoom(a.boxZoom.currentValue),a.style&&!a.style.isFirstChange()&&this.MapService.updateStyle(a.style.currentValue),a.maxBounds&&!a.maxBounds.isFirstChange()&&this.MapService.updateMaxBounds(a.maxBounds.currentValue),a.fitBounds&&a.fitBounds.currentValue&&!a.fitBounds.isFirstChange()&&this.MapService.fitBounds(a.fitBounds.currentValue,this.fitBoundsOptions),a.fitScreenCoordinates&&a.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&a.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.MapService.fitScreenCoordinates(a.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!a.center||a.center.isFirstChange()||a.zoom||a.bearing||a.pitch?(a.center&&!a.center.isFirstChange()||a.zoom&&!a.zoom.isFirstChange()||a.bearing&&!a.bearing.isFirstChange()&&!a.fitScreenCoordinates||a.pitch&&!a.pitch.isFirstChange())&&this.MapService.move(this.movingMethod,this.movingOptions,a.zoom&&this.zoom?this.zoom[0]:void 0,a.center?this.center:void 0,a.bearing&&this.bearing?this.bearing[0]:void 0,a.pitch&&this.pitch?this.pitch[0]:void 0):this.MapService.panTo(this.center,this.panToOptions)})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(tt))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mgl-map"]],viewQuery:function(a,y){if(1&a&&l.Gf(Et,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.mapContainer=Z.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},features:[l._Bn([tt]),l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(a,y){1&a&&l._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0}),d})();var fn=V(6838);const Hn="object"==typeof global&&global&&global.Object===Object&&global;var Fi="object"==typeof self&&self&&self.Object===Object&&self;const hn=Hn||Fi||Function("return this")(),Oi=hn.Symbol;var Wn=Object.prototype,Vn=Wn.hasOwnProperty,Rt=Wn.toString,pt=Oi?Oi.toStringTag:void 0;var dt=Object.prototype.toString;var er=Oi?Oi.toStringTag:void 0;const it=function Tt(d){return null==d?void 0===d?"[object Undefined]":"[object Null]":er&&er in Object(d)?function we(d){var C=Vn.call(d,pt),a=d[pt];try{d[pt]=void 0;var y=!0}catch(pe){}var Z=Rt.call(d);return y&&(C?d[pt]=a:delete d[pt]),Z}(d):function It(d){return dt.call(d)}(d)},F=function J(d){var C=typeof d;return null!=d&&("object"==C||"function"==C)},We=function Je(d){if(!F(d))return!1;var C=it(d);return"[object Function]"==C||"[object GeneratorFunction]"==C||"[object AsyncFunction]"==C||"[object Proxy]"==C};var d,Xe=hn["__core-js_shared__"],Lt=(d=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"";var sn=Function.prototype.toString;const zn=function En(d){if(null!=d){try{return sn.call(d)}catch(C){}try{return d+""}catch(C){}}return""};var li=/^\[object .+?Constructor\]$/,An=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const pr=function br(d){return!(!F(d)||function tn(d){return!!Lt&&Lt in d}(d))&&(We(d)?An:li).test(zn(d))},ao=function Mr(d,C){var a=function Qo(d,C){return null==d?void 0:d[C]}(d,C);return pr(a)?a:void 0};var Lo=function(){try{var d=ao(Object,"defineProperty");return d({},"",{}),d}catch(C){}}();const dr=Lo,lo=function $i(d,C,a){"__proto__"==C&&dr?dr(d,C,{configurable:!0,enumerable:!0,value:a,writable:!0}):d[C]=a},Rr=function Zo(d,C,a,y){for(var Z=-1,pe=null==d?0:d.length;++Z<pe;){var Qe=d[Z];C(y,Qe,a(Qe),d)}return y};var zs=function Zr(d){return function(C,a,y){for(var Z=-1,pe=Object(C),Qe=y(C),Wt=Qe.length;Wt--;){var Sn=Qe[d?Wt:++Z];if(!1===a(pe[Sn],Sn,pe))break}return C}}();const to=zs,bo=function ds(d){return null!=d&&"object"==typeof d},No=function qr(d){return bo(d)&&"[object Arguments]"==it(d)};var Ss=Object.prototype,Ir=Ss.hasOwnProperty,Xo=Ss.propertyIsEnumerable,Vs=No(function(){return arguments}())?No:function(d){return bo(d)&&Ir.call(d,"callee")&&!Xo.call(d,"callee")};const Ts=Vs,no=Array.isArray;var ha="object"==typeof exports&&exports&&!exports.nodeType&&exports,tr=ha&&"object"==typeof module&&module&&!module.nodeType&&module,es=tr&&tr.exports===ha?hn.Buffer:void 0;const co=(es?es.isBuffer:void 0)||function da(){return!1};var Io=/^(?:0|[1-9]\d*)$/;const qo=function hs(d,C){var a=typeof d;return!!(C=null==C?9007199254740991:C)&&("number"==a||"symbol"!=a&&Io.test(d))&&d>-1&&d%1==0&&d<C},ps=function xo(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=9007199254740991};var Di={};Di["[object Float32Array]"]=Di["[object Float64Array]"]=Di["[object Int8Array]"]=Di["[object Int16Array]"]=Di["[object Int32Array]"]=Di["[object Uint8Array]"]=Di["[object Uint8ClampedArray]"]=Di["[object Uint16Array]"]=Di["[object Uint32Array]"]=!0,Di["[object Arguments]"]=Di["[object Array]"]=Di["[object ArrayBuffer]"]=Di["[object Boolean]"]=Di["[object DataView]"]=Di["[object Date]"]=Di["[object Error]"]=Di["[object Function]"]=Di["[object Map]"]=Di["[object Number]"]=Di["[object Object]"]=Di["[object RegExp]"]=Di["[object Set]"]=Di["[object String]"]=Di["[object WeakMap]"]=!1;const Q=function ci(d){return function(C){return d(C)}};var W="object"==typeof exports&&exports&&!exports.nodeType&&exports,B=W&&"object"==typeof module&&module&&!module.nodeType&&module,$t=B&&B.exports===W&&Hn.process;const gr=function(){try{return B&&B.require&&B.require("util").types||$t&&$t.binding&&$t.binding("util")}catch(C){}}();var jr=gr&&gr.isTypedArray;const wo=jr?Q(jr):function ai(d){return bo(d)&&ps(d.length)&&!!Di[it(d)]};var ue=Object.prototype.hasOwnProperty;const S=function M(d,C){var a=no(d),y=!a&&Ts(d),Z=!a&&!y&&co(d),pe=!a&&!y&&!Z&&wo(d),Qe=a||y||Z||pe,Wt=Qe?function xr(d,C){for(var a=-1,y=Array(d);++a<d;)y[a]=C(a);return y}(d.length,String):[],Sn=Wt.length;for(var ei in d)(C||ue.call(d,ei))&&(!Qe||!("length"==ei||Z&&("offset"==ei||"parent"==ei)||pe&&("buffer"==ei||"byteLength"==ei||"byteOffset"==ei)||qo(ei,Sn)))&&Wt.push(ei);return Wt};var j=Object.prototype;const Se=function de(d){var C=d&&d.constructor;return d===("function"==typeof C&&C.prototype||j)},ot=function Ge(d,C){return function(a){return d(C(a))}},rn=ot(Object.keys,Object);var ni=Object.prototype.hasOwnProperty;const Si=function mi(d){return null!=d&&ps(d.length)&&!We(d)},ur=function Ni(d){return Si(d)?S(d):function yi(d){if(!Se(d))return rn(d);var C=[];for(var a in Object(d))ni.call(d,a)&&"constructor"!=a&&C.push(a);return C}(d)};var Po=function io(d,C){return function(a,y){if(null==a)return a;if(!Si(a))return d(a,y);for(var Z=a.length,pe=C?Z:-1,Qe=Object(a);(C?pe--:++pe<Z)&&!1!==y(Qe[pe],pe,Qe););return a}}(function Fr(d,C){return d&&to(d,C,ur)});const go=Po,Wo=function rs(d,C,a,y){return go(d,function(Z,pe,Qe){C(y,Z,a(Z),Qe)}),y},_s=function Co(d,C){return d===C||d!=d&&C!=C},ta=function Va(d,C){for(var a=d.length;a--;)if(_s(d[a][0],C))return a;return-1};var si=Array.prototype.splice;function na(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}na.prototype.clear=function zo(){this.__data__=[],this.size=0},na.prototype.delete=function Ri(d){var C=this.__data__,a=ta(C,d);return!(a<0||(a==C.length-1?C.pop():si.call(C,a,1),--this.size,0))},na.prototype.get=function Dr(d){var C=this.__data__,a=ta(C,d);return a<0?void 0:C[a][1]},na.prototype.has=function Hr(d){return ta(this.__data__,d)>-1},na.prototype.set=function Sr(d,C){var a=this.__data__,y=ta(a,d);return y<0?(++this.size,a.push([d,C])):a[y][1]=C,this};const wr=na,Sa=ao(hn,"Map"),os=ao(Object,"create");var fa=Object.prototype.hasOwnProperty;var ma=Object.prototype.hasOwnProperty;function ia(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}ia.prototype.clear=function Bl(){this.__data__=os?os(null):{},this.size=0},ia.prototype.delete=function lu(d){var C=this.has(d)&&delete this.__data__[d];return this.size-=C?1:0,C},ia.prototype.get=function Mo(d){var C=this.__data__;if(os){var a=C[d];return"__lodash_hash_undefined__"===a?void 0:a}return fa.call(C,d)?C[d]:void 0},ia.prototype.has=function Ha(d){var C=this.__data__;return os?void 0!==C[d]:ma.call(C,d)},ia.prototype.set=function Vo(d,C){var a=this.__data__;return this.size+=this.has(d)?0:1,a[d]=os&&void 0===C?"__lodash_hash_undefined__":C,this};const z=ia,Ue=function xe(d,C){var a=d.__data__;return function X(d){var C=typeof d;return"string"==C||"number"==C||"symbol"==C||"boolean"==C?"__proto__"!==d:null===d}(C)?a["string"==typeof C?"string":"hash"]:a.map};function So(d){var C=-1,a=null==d?0:d.length;for(this.clear();++C<a;){var y=d[C];this.set(y[0],y[1])}}So.prototype.clear=function P(){this.size=0,this.__data__={hash:new z,map:new(Sa||wr),string:new z}},So.prototype.delete=function Re(d){var C=Ue(this,d).delete(d);return this.size-=C?1:0,C},So.prototype.get=function ri(d){return Ue(this,d).get(d)},So.prototype.has=function vi(d){return Ue(this,d).has(d)},So.prototype.set=function yr(d,C){var a=Ue(this,d),y=a.size;return a.set(d,C),this.size+=a.size==y?0:1,this};const f=So;function v(d){var C=this.__data__=new wr(d);this.size=C.size}v.prototype.clear=function Yr(){this.__data__=new wr,this.size=0},v.prototype.delete=function Do(d){var C=this.__data__,a=C.delete(d);return this.size=C.size,a},v.prototype.get=function Ua(d){return this.__data__.get(d)},v.prototype.has=function Ln(d){return this.__data__.has(d)},v.prototype.set=function c(d,C){var a=this.__data__;if(a instanceof wr){var y=a.__data__;if(!Sa||y.length<199)return y.push([d,C]),this.size=++a.size,this;a=this.__data__=new f(y)}return a.set(d,C),this.size=a.size,this};const E=v;function be(d){var C=-1,a=null==d?0:d.length;for(this.__data__=new f;++C<a;)this.add(d[C])}be.prototype.add=be.prototype.push=function G(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},be.prototype.has=function oe(d){return this.__data__.has(d)};const Ie=be,Pe=function ze(d,C){for(var a=-1,y=null==d?0:d.length;++a<y;)if(C(d[a],a,d))return!0;return!1},ut=function qe(d,C){return d.has(C)},cn=function bt(d,C,a,y,Z,pe){var Qe=1&a,Wt=d.length,Sn=C.length;if(Wt!=Sn&&!(Qe&&Sn>Wt))return!1;var ei=pe.get(d),bi=pe.get(C);if(ei&&bi)return ei==C&&bi==d;var oi=-1,ir=!0,Xr=2&a?new Ie:void 0;for(pe.set(d,C),pe.set(C,d);++oi<Wt;){var fo=d[oi],oo=C[oi];if(y)var so=Qe?y(oo,fo,oi,C,d,pe):y(fo,oo,oi,d,C,pe);if(void 0!==so){if(so)continue;ir=!1;break}if(Xr){if(!Pe(C,function(Go,Xs){if(!ut(Xr,Xs)&&(fo===Go||Z(fo,Go,a,y,pe)))return Xr.push(Xs)})){ir=!1;break}}else if(fo!==oo&&!Z(fo,oo,a,y,pe)){ir=!1;break}}return pe.delete(d),pe.delete(C),ir},Xt=hn.Uint8Array,wn=function bn(d){var C=-1,a=Array(d.size);return d.forEach(function(y,Z){a[++C]=[Z,y]}),a},Cn=function Ut(d){var C=-1,a=Array(d.size);return d.forEach(function(y){a[++C]=y}),a};var Ga=Oi?Oi.prototype:void 0,ss=Ga?Ga.valueOf:void 0;const Uo=function _r(d,C){for(var a=-1,y=C.length,Z=d.length;++a<y;)d[Z+a]=C[a];return d},Cr=function vs(d,C,a){var y=C(d);return no(d)?y:Uo(y,a(d))},Jr=function rc(){return[]};var Dl=Object.prototype.propertyIsEnumerable,Gs=Object.getOwnPropertySymbols,ud=Gs?function(d){return null==d?[]:(d=Object(d),function il(d,C){for(var a=-1,y=null==d?0:d.length,Z=0,pe=[];++a<y;){var Qe=d[a];C(Qe,a,d)&&(pe[Z++]=Qe)}return pe}(Gs(d),function(C){return Dl.call(d,C)}))}:Jr;const oa=ud,oc=function Ml(d){return Cr(d,ur,oa)};var Rh=Object.prototype.hasOwnProperty;const Vl=ao(hn,"DataView"),Oo=ao(hn,"Promise"),Mc=ao(hn,"Set"),va=ao(hn,"WeakMap");var $a="[object Map]",rl="[object Promise]",jl="[object Set]",$s="[object WeakMap]",hd="[object DataView]",Hl=zn(Vl),ko=zn(Sa),hu=zn(Oo),pu=zn(Mc),Za=zn(va),Zs=it;(Vl&&Zs(new Vl(new ArrayBuffer(1)))!=hd||Sa&&Zs(new Sa)!=$a||Oo&&Zs(Oo.resolve())!=rl||Mc&&Zs(new Mc)!=jl||va&&Zs(new va)!=$s)&&(Zs=function(d){var C=it(d),a="[object Object]"==C?d.constructor:void 0,y=a?zn(a):"";if(y)switch(y){case Hl:return hd;case ko:return $a;case hu:return rl;case pu:return jl;case Za:return $s}return C});const Sl=Zs;var Tl="[object Arguments]",sc="[object Array]",Sc="[object Object]",Tc=Object.prototype.hasOwnProperty;const Nh=function Zp(d,C,a,y,Z,pe){var Qe=no(d),Wt=no(C),Sn=Qe?sc:Sl(d),ei=Wt?sc:Sl(C),bi=(Sn=Sn==Tl?Sc:Sn)==Sc,oi=(ei=ei==Tl?Sc:ei)==Sc,ir=Sn==ei;if(ir&&co(d)){if(!co(C))return!1;Qe=!0,bi=!1}if(ir&&!bi)return pe||(pe=new E),Qe||wo(d)?cn(d,C,a,y,Z,pe):function Tr(d,C,a,y,Z,pe,Qe){switch(a){case"[object DataView]":if(d.byteLength!=C.byteLength||d.byteOffset!=C.byteOffset)return!1;d=d.buffer,C=C.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=C.byteLength||!pe(new Xt(d),new Xt(C)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _s(+d,+C);case"[object Error]":return d.name==C.name&&d.message==C.message;case"[object RegExp]":case"[object String]":return d==C+"";case"[object Map]":var Wt=wn;case"[object Set]":if(Wt||(Wt=Cn),d.size!=C.size&&!(1&y))return!1;var ei=Qe.get(d);if(ei)return ei==C;y|=2,Qe.set(d,C);var bi=cn(Wt(d),Wt(C),y,Z,pe,Qe);return Qe.delete(d),bi;case"[object Symbol]":if(ss)return ss.call(d)==ss.call(C)}return!1}(d,C,Sn,a,y,Z,pe);if(!(1&a)){var Xr=bi&&Tc.call(d,"__wrapped__"),fo=oi&&Tc.call(C,"__wrapped__");if(Xr||fo){var oo=Xr?d.value():d,so=fo?C.value():C;return pe||(pe=new E),Z(oo,so,a,y,pe)}}return!!ir&&(pe||(pe=new E),function uu(d,C,a,y,Z,pe){var Qe=1&a,Wt=oc(d),Sn=Wt.length;if(Sn!=oc(C).length&&!Qe)return!1;for(var oi=Sn;oi--;){var ir=Wt[oi];if(!(Qe?ir in C:Rh.call(C,ir)))return!1}var Xr=pe.get(d),fo=pe.get(C);if(Xr&&fo)return Xr==C&&fo==d;var oo=!0;pe.set(d,C),pe.set(C,d);for(var so=Qe;++oi<Sn;){var Go=d[ir=Wt[oi]],Xs=C[ir];if(y)var _l=Qe?y(Xs,Go,ir,C,d,pe):y(Go,Xs,ir,d,C,pe);if(!(void 0===_l?Go===Xs||Z(Go,Xs,a,y,pe):_l)){oo=!1;break}so||(so="constructor"==ir)}if(oo&&!so){var yl=d.constructor,Xl=C.constructor;yl!=Xl&&"constructor"in d&&"constructor"in C&&!("function"==typeof yl&&yl instanceof yl&&"function"==typeof Xl&&Xl instanceof Xl)&&(oo=!1)}return pe.delete(d),pe.delete(C),oo}(d,C,a,y,Z,pe))},md=function fd(d,C,a,y,Z){return d===C||(null==d||null==C||!bo(d)&&!bo(C)?d!=d&&C!=C:Nh(d,C,a,y,fd,Z))},Bh=function mu(d){return d==d&&!F(d)},gu=function Ac(d,C){return function(a){return null!=a&&a[d]===C&&(void 0!==C||d in Object(a))}},_u=function zh(d){var C=function Bm(d){for(var C=ur(d),a=C.length;a--;){var y=C[a],Z=d[y];C[a]=[y,Z,Bh(Z)]}return C}(d);return 1==C.length&&C[0][2]?gu(C[0][0],C[0][1]):function(a){return a===d||function Gl(d,C,a,y){var Z=a.length,pe=Z,Qe=!y;if(null==d)return!pe;for(d=Object(d);Z--;){var Wt=a[Z];if(Qe&&Wt[2]?Wt[1]!==d[Wt[0]]:!(Wt[0]in d))return!1}for(;++Z<pe;){var Sn=(Wt=a[Z])[0],ei=d[Sn],bi=Wt[1];if(Qe&&Wt[2]){if(void 0===ei&&!(Sn in d))return!1}else{var oi=new E;if(y)var ir=y(ei,bi,Sn,d,C,oi);if(!(void 0===ir?md(bi,ei,3,y,oi):ir))return!1}}return!0}(a,d,C)}},vu=function yu(d){return"symbol"==typeof d||bo(d)&&"[object Symbol]"==it(d)};var Vh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qp=/^\w*$/;const ba=function gd(d,C){if(no(d))return!1;var a=typeof d;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=d&&!vu(d))||qp.test(d)||!Vh.test(d)||null!=C&&d in Object(C)};function Il(d,C){if("function"!=typeof d||null!=C&&"function"!=typeof C)throw new TypeError("Expected a function");var a=function(){var y=arguments,Z=C?C.apply(this,y):y[0],pe=a.cache;if(pe.has(Z))return pe.get(Z);var Qe=d.apply(this,y);return a.cache=pe.set(Z,Qe)||pe,Qe};return a.cache=new(Il.Cache||f),a}Il.Cache=f;const sa=Il;var Kp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bu=/\\(\\)?/g,xu=function Wp(d){var C=sa(d,function(y){return 500===a.size&&a.clear(),y}),a=C.cache;return C}(function(d){var C=[];return 46===d.charCodeAt(0)&&C.push(""),d.replace(Kp,function(a,y,Z,pe){C.push(Z?pe.replace(bu,"$1"):y||a)}),C});const jh=xu;var Hh=Oi?Oi.prototype:void 0,lc=Hh?Hh.toString:void 0;const Ya=function _d(d){if("string"==typeof d)return d;if(no(d))return function Pl(d,C){for(var a=-1,y=null==d?0:d.length,Z=Array(y);++a<y;)Z[a]=C(d[a],a,d);return Z}(d,_d)+"";if(vu(d))return lc?lc.call(d):"";var C=d+"";return"0"==C&&1/d==-1/0?"-0":C},yd=function wu(d,C){return no(d)?d:ba(d,C)?[d]:jh(function Pc(d){return null==d?"":Ya(d)}(d))},ro=function Vm(d){if("string"==typeof d||vu(d))return d;var C=d+"";return"0"==C&&1/d==-1/0?"-0":C},kc=function cc(d,C){for(var a=0,y=(C=yd(C,d)).length;null!=d&&a<y;)d=d[ro(C[a++])];return a&&a==y?d:void 0},bd=function Cu(d,C){return null!=d&&C in Object(d)},wd=function xd(d,C){return null!=d&&function $h(d,C,a){for(var y=-1,Z=(C=yd(C,d)).length,pe=!1;++y<Z;){var Qe=ro(C[y]);if(!(pe=null!=d&&a(d,Qe)))break;d=d[Qe]}return pe||++y!=Z?pe:!!(Z=null==d?0:d.length)&&ps(Z)&&qo(Qe,Z)&&(no(d)||Ts(d))}(d,C,bd)},$l=function Ed(d,C){return ba(d)&&Bh(C)?gu(ro(d),C):function(a){var y=function uc(d,C,a){var y=null==d?void 0:kc(d,C);return void 0===y?a:y}(a,d);return void 0===y&&y===C?wd(a,d):md(C,y,3)}},vo=function Jp(d){return d},Xp=function Qp(d){return ba(d)?function Zh(d){return function(C){return null==C?void 0:C[d]}}(ro(d)):function Fc(d){return function(C){return kc(C,d)}}(d)};var Ka=Object.prototype.hasOwnProperty,Bs=function Ol(d,C){return function(a,y){var Z=no(a)?Rr:Wo,pe=C?C():{};return Z(a,d,function ef(d){return"function"==typeof d?d:null==d?vo:"object"==typeof d?no(d)?$l(d[0],d[1]):_u(d):Xp(d)}(y),pe)}}(function(d,C,a){Ka.call(d,a)?d[a].push(C):lo(d,a,[C])});const Md=Bs;var Lc=Object.prototype.hasOwnProperty;const Wh=function Td(d,C,a){var y=d[C];(!Lc.call(d,C)||!_s(y,a)||void 0===a&&!(C in d))&&lo(d,C,a)},Zl=function rf(d,C,a,y){var Z=!a;a||(a={});for(var pe=-1,Qe=C.length;++pe<Qe;){var Wt=C[pe],Sn=y?y(a[Wt],d[Wt],Wt,a,d):void 0;void 0===Sn&&(Sn=d[Wt]),Z?lo(a,Wt,Sn):Wh(a,Wt,Sn)}return a};var Bc=Object.prototype.hasOwnProperty;const lf=function Su(d){if(!F(d))return function sf(d){var C=[];if(null!=d)for(var a in Object(d))C.push(a);return C}(d);var C=Se(d),a=[];for(var y in d)"constructor"==y&&(C||!Bc.call(d,y))||a.push(y);return a},zc=function cf(d){return Si(d)?S(d,!0):lf(d)};var dc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ad=dc&&"object"==typeof module&&module&&!module.nodeType&&module,Kh=Ad&&Ad.exports===dc?hn.Buffer:void 0,Pd=Kh?Kh.allocUnsafe:void 0;const kd=ot(Object.getPrototypeOf,Object);var Ko=Object.getOwnPropertySymbols?function(d){for(var C=[];d;)Uo(C,oa(d)),d=kd(d);return C}:Jr;const sl=Ko,al=function kr(d){return Cr(d,zc,sl)};var ka=Object.prototype.hasOwnProperty;const Uc=function hc(d){var C=new d.constructor(d.byteLength);return new Xt(C).set(new Xt(d)),C};var np=/\w*$/;var Ld=Oi?Oi.prototype:void 0,gf=Ld?Ld.valueOf:void 0;const xf=function gc(d,C,a){var y=d.constructor;switch(C){case"[object ArrayBuffer]":return Uc(d);case"[object Boolean]":case"[object Date]":return new y(+d);case"[object DataView]":return function jc(d,C){var a=C?Uc(d.buffer):d.buffer;return new d.constructor(a,d.byteOffset,d.byteLength)}(d,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function Hc(d,C){var a=C?Uc(d.buffer):d.buffer;return new d.constructor(a,d.byteOffset,d.length)}(d,a);case"[object Map]":case"[object Set]":return new y;case"[object Number]":case"[object String]":return new y(d);case"[object RegExp]":return function Rd(d){var C=new d.constructor(d.source,np.exec(d));return C.lastIndex=d.lastIndex,C}(d);case"[object Symbol]":return function pc(d){return gf?Object(gf.call(d)):{}}(d)}};var Gd=Object.create,$d=function(){function d(){}return function(C){if(!F(C))return{};if(Gd)return Gd(C);d.prototype=C;var a=new d;return d.prototype=void 0,a}}();const Fa=$d;var qc=gr&&gr.isMap;const Ou=qc?Q(qc):function Pu(d){return bo(d)&&"[object Map]"==Sl(d)};var Wd=gr&&gr.isSet;const Yd=Wd?Q(Wd):function wf(d){return bo(d)&&"[object Set]"==Sl(d)};var vc="[object Arguments]",xa="[object Function]",Fu="[object Object]",Ar={};Ar[vc]=Ar["[object Array]"]=Ar["[object ArrayBuffer]"]=Ar["[object DataView]"]=Ar["[object Boolean]"]=Ar["[object Date]"]=Ar["[object Float32Array]"]=Ar["[object Float64Array]"]=Ar["[object Int8Array]"]=Ar["[object Int16Array]"]=Ar["[object Int32Array]"]=Ar["[object Map]"]=Ar["[object Number]"]=Ar[Fu]=Ar["[object RegExp]"]=Ar["[object Set]"]=Ar["[object String]"]=Ar["[object Symbol]"]=Ar["[object Uint8Array]"]=Ar["[object Uint8ClampedArray]"]=Ar["[object Uint16Array]"]=Ar["[object Uint32Array]"]=!0,Ar["[object Error]"]=Ar[xa]=Ar["[object WeakMap]"]=!1;const Xd=function Kc(d,C,a,y,Z,pe){var Qe,Wt=1&C,Sn=2&C,ei=4&C;if(a&&(Qe=Z?a(d,y,Z,pe):a(d)),void 0!==Qe)return Qe;if(!F(d))return d;var bi=no(d);if(bi){if(Qe=function Tu(d){var C=d.length,a=new d.constructor(C);return C&&"string"==typeof d[0]&&ka.call(d,"index")&&(a.index=d.index,a.input=d.input),a}(d),!Wt)return function hf(d,C){var a=-1,y=d.length;for(C||(C=Array(y));++a<y;)C[a]=d[a];return C}(d,Qe)}else{var oi=Sl(d),ir=oi==xa||"[object GeneratorFunction]"==oi;if(co(d))return function Jh(d,C){if(C)return d.slice();var a=d.length,y=Pd?Pd(a):new d.constructor(a);return d.copy(y),y}(d,Wt);if(oi==Fu||oi==vc||ir&&!Z){if(Qe=Sn||ir?{}:function $c(d){return"function"!=typeof d.constructor||Se(d)?{}:Fa(kd(d))}(d),!Wt)return Sn?function Oa(d,C){return Zl(d,sl(d),C)}(d,function uf(d,C){return d&&Zl(C,zc(C),d)}(Qe,d)):function ff(d,C){return Zl(d,oa(d),C)}(d,function Nc(d,C){return d&&Zl(C,ur(C),d)}(Qe,d))}else{if(!Ar[oi])return Z?d:{};Qe=xf(d,oi,Wt)}}pe||(pe=new E);var Xr=pe.get(d);if(Xr)return Xr;pe.set(d,Qe),Yd(d)?d.forEach(function(so){Qe.add(Kc(so,C,a,so,d,pe))}):Ou(d)&&d.forEach(function(so,Go){Qe.set(Go,Kc(so,C,a,Go,d,pe))});var oo=bi?void 0:(ei?Sn?al:oc:Sn?zc:ur)(d);return function qh(d,C){for(var a=-1,y=null==d?0:d.length;++a<y&&!1!==C(d[a],a,d););}(oo||d,function(so,Go){oo&&(so=d[Go=so]),Wh(Qe,Go,Kc(so,C,a,Go,d,pe))}),Qe};function zr(d){return"object"==typeof d&&null!=d&&1===d.nodeType}function Qa(d,C){return(!C||"hidden"!==d)&&"visible"!==d&&"clip"!==d}function wc(d,C){if(d.clientHeight<d.scrollHeight||d.clientWidth<d.scrollWidth){var a=getComputedStyle(d,null);return Qa(a.overflowY,C)||Qa(a.overflowX,C)||!!(Z=function(pe){if(!pe.ownerDocument||!pe.ownerDocument.defaultView)return null;try{return pe.ownerDocument.defaultView.frameElement}catch(Qe){return null}}(y=d))&&(Z.clientHeight<y.scrollHeight||Z.clientWidth<y.scrollWidth)}var y,Z;return!1}function Jl(d,C,a,y,Z,pe,Qe,Wt){return pe<d&&Qe>C||pe>d&&Qe<C?0:pe<=d&&Wt<=a||Qe>=C&&Wt>=a?pe-d-y:Qe>C&&Wt<a||pe<d&&Wt>a?Qe-C+Z:0}function hp(d,C){var a=window,y=C.scrollMode,Z=C.block,pe=C.inline,Qe=C.boundary,Wt=C.skipOverflowHiddenElements,Sn="function"==typeof Qe?Qe:function(Nl){return Nl!==Qe};if(!zr(d))throw new TypeError("Invalid target");for(var ei=document.scrollingElement||document.documentElement,bi=[],oi=d;zr(oi)&&Sn(oi);){if((oi=oi.parentElement)===ei){bi.push(oi);break}null!=oi&&oi===document.body&&wc(oi)&&!wc(document.documentElement)||null!=oi&&wc(oi,Wt)&&bi.push(oi)}for(var ir=a.visualViewport?a.visualViewport.width:innerWidth,Xr=a.visualViewport?a.visualViewport.height:innerHeight,fo=window.scrollX||pageXOffset,oo=window.scrollY||pageYOffset,so=d.getBoundingClientRect(),Go=so.height,Xs=so.width,_l=so.top,yl=so.right,Xl=so.bottom,Mh=so.left,tl="start"===Z||"nearest"===Z?_l:"end"===Z?Xl:_l+Go/2,vl="center"===pe?Mh+Xs/2:"end"===pe?yl:Mh,Om=[],km=0;km<bi.length;km++){var Ea=bi[km],cd=Ea.getBoundingClientRect(),Np=cd.height,ou=cd.width,Sh=cd.top,Bp=cd.right,zp=cd.bottom,Th=cd.left;if("if-needed"===y&&_l>=0&&Mh>=0&&Xl<=Xr&&yl<=ir&&_l>=Sh&&Xl<=zp&&Mh>=Th&&yl<=Bp)return Om;var Ah=getComputedStyle(Ea),Ih=parseInt(Ah.borderLeftWidth,10),Vp=parseInt(Ah.borderTopWidth,10),Ph=parseInt(Ah.borderRightWidth,10),Up=parseInt(Ah.borderBottomWidth,10),su=0,au=0,jp="offsetWidth"in Ea?Ea.offsetWidth-Ea.clientWidth-Ih-Ph:0,Ec="offsetHeight"in Ea?Ea.offsetHeight-Ea.clientHeight-Vp-Up:0;if(ei===Ea)su="start"===Z?tl:"end"===Z?tl-Xr:"nearest"===Z?Jl(oo,oo+Xr,Xr,Vp,Up,oo+tl,oo+tl+Go,Go):tl-Xr/2,au="start"===pe?vl:"center"===pe?vl-ir/2:"end"===pe?vl-ir:Jl(fo,fo+ir,ir,Ih,Ph,fo+vl,fo+vl+Xs,Xs),su=Math.max(0,su+oo),au=Math.max(0,au+fo);else{su="start"===Z?tl-Sh-Vp:"end"===Z?tl-zp+Up+Ec:"nearest"===Z?Jl(Sh,zp,Np,Vp,Up+Ec,tl,tl+Go,Go):tl-(Sh+Np/2)+Ec/2,au="start"===pe?vl-Th-Ih:"center"===pe?vl-(Th+ou/2)+jp/2:"end"===pe?vl-Bp+Ph+jp:Jl(Th,Bp,ou,Ih,Ph+jp,vl,vl+Xs,Xs);var W_=Ea.scrollLeft,Hp=Ea.scrollTop;tl+=Hp-(su=Math.max(0,Math.min(Hp+su,Ea.scrollHeight-Np+Ec))),vl+=W_-(au=Math.max(0,Math.min(W_+au,Ea.scrollWidth-ou+jp)))}Om.push({el:Ea,top:su,left:au})}return Om}function eh(d){return d===Object(d)&&0!==Object.keys(d).length}let ih=(()=>{class d{constructor(){this.resize$=new Ze.x}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var fp=V(3619),xs=V(7423),Ql=V(7144),Pi=V(508),Hi=V(3191),Jo=V(3075),La=V(5664);const Af=["thumbContainer"],If=["toggleBar"],Pf=["input"],Gm=function(d){return{enterDuration:d}},r=["*"],e=new l.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let s=0;const h={provide:Jo.JU,useExisting:(0,l.Gpc)(()=>w),multi:!0};class _{constructor(C,a){this.source=C,this.checked=a}}const x=(0,Pi.sb)((0,Pi.pj)((0,Pi.Kr)((0,Pi.Id)(class{constructor(d){this._elementRef=d}}))));let w=(()=>{class d extends x{constructor(a,y,Z,pe,Qe,Wt){super(a),this._focusMonitor=y,this._changeDetectorRef=Z,this.defaults=Qe,this._onChange=Sn=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++s,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new l.vpe,this.toggleChange=new l.vpe,this.tabIndex=parseInt(pe)||0,this.color=this.defaultColor=Qe.color||"accent",this._noopAnimations="NoopAnimations"===Wt}get required(){return this._required}set required(a){this._required=(0,Hi.Ig)(a)}get checked(){return this._checked}set checked(a){this._checked=(0,Hi.Ig)(a),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{a||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(a){a.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(a){a.stopPropagation()}writeValue(a){this.checked=!!a}registerOnChange(a){this._onChange=a}registerOnTouched(a){this._onTouched=a}setDisabledState(a){this.disabled=a,this._changeDetectorRef.markForCheck()}focus(a,y){y?this._focusMonitor.focusVia(this._inputElement,y,a):this._inputElement.nativeElement.focus(a)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new _(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(La.tE),l.Y36(l.sBO),l.$8M("tabindex"),l.Y36(e),l.Y36(Ke.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-slide-toggle"]],viewQuery:function(a,y){if(1&a&&(l.Gf(Af,5),l.Gf(If,5),l.Gf(Pf,5)),2&a){let Z;l.iGM(Z=l.CRH())&&(y._thumbEl=Z.first),l.iGM(Z=l.CRH())&&(y._thumbBarEl=Z.first),l.iGM(Z=l.CRH())&&(y._inputElement=Z.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(a,y){2&a&&(l.Ikx("id",y.id),l.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),l.ekj("mat-checked",y.checked)("mat-disabled",y.disabled)("mat-slide-toggle-label-before","before"==y.labelPosition)("_mat-animation-noopable",y._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[l._Bn([h]),l.qOj],ngContentSelectors:r,decls:16,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"label",0,1),l.TgZ(2,"div",2,3),l.TgZ(4,"input",4,5),l.NdJ("change",function(pe){return y._onChangeEvent(pe)})("click",function(pe){return y._onInputClick(pe)}),l.qZA(),l.TgZ(6,"div",6,7),l._UZ(8,"div",8),l.TgZ(9,"div",9),l._UZ(10,"div",10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"span",11,12),l.NdJ("cdkObserveContent",function(){return y._onLabelTextChange()}),l.TgZ(13,"span",13),l._uU(14,"\xa0"),l.qZA(),l.Hsn(15),l.qZA(),l.qZA()),2&a){const Z=l.MAs(1),pe=l.MAs(12);l.uIk("for",y.inputId),l.xp6(2),l.ekj("mat-slide-toggle-bar-no-side-margin",!pe.textContent||!pe.textContent.trim()),l.xp6(2),l.Q6J("id",y.inputId)("required",y.required)("tabIndex",y.tabIndex)("checked",y.checked)("disabled",y.disabled),l.uIk("name",y.name)("aria-checked",y.checked.toString())("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby)("aria-describedby",y.ariaDescribedby),l.xp6(5),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y.disableRipple||y.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,Gm,y._noopAnimations?0:150))}},directives:[Pi.wG,Ql.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),d})(),ee=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({}),d})(),ae=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[ee,Pi.si,Pi.BQ,Ql.Q8],ee,Pi.BQ]}),d})();var se=V(925),me=V(8962),Ce=V(1159),Te=V(1884),je=V(1777),et=V(226);const yt=["*"],Gt=["content"];function zt(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){return l.CHM(a),l.oxw()._onBackdropClicked()}),l.qZA()}if(2&d){const a=l.oxw();l.ekj("mat-drawer-shown",a._isShowingBackdrop())}}function en(d,C){1&d&&(l.TgZ(0,"mat-drawer-content"),l.Hsn(1,2),l.qZA())}const pn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],on=["mat-drawer","mat-drawer-content","*"];function Yn(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",2),l.NdJ("click",function(){return l.CHM(a),l.oxw()._onBackdropClicked()}),l.qZA()}if(2&d){const a=l.oxw();l.ekj("mat-drawer-shown",a._isShowingBackdrop())}}function ui(d,C){1&d&&(l.TgZ(0,"mat-sidenav-content"),l.Hsn(1,2),l.qZA())}const Gn=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Un=["mat-sidenav","mat-sidenav-content","*"],Kn={transformDrawer:(0,je.X$)("transform",[(0,je.SB)("open, open-instant",(0,je.oB)({transform:"none",visibility:"visible"})),(0,je.SB)("void",(0,je.oB)({"box-shadow":"none",visibility:"hidden"})),(0,je.eR)("void => open-instant",(0,je.jt)("0ms")),(0,je.eR)("void <=> open, open-instant => void",(0,je.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Dn=new l.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function wi(){return!1}}),Mi=new l.OlP("MAT_DRAWER_CONTAINER");let Yi=(()=>{class d extends me.PQ{constructor(a,y,Z,pe,Qe){super(Z,pe,Qe),this._changeDetectorRef=a,this._container=y}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>Nr)),l.Y36(l.SBq),l.Y36(me.mF),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(a,y){2&a&&l.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[l._Bn([{provide:me.PQ,useExisting:d}]),l.qOj],ngContentSelectors:yt,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),d})(),vr=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt,Sn,ei){this._elementRef=a,this._focusTrapFactory=y,this._focusMonitor=Z,this._platform=pe,this._ngZone=Qe,this._interactivityChecker=Wt,this._doc=Sn,this._container=ei,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Ze.x,this._animationEnd=new Ze.x,this._animationState="void",this.openedChange=new l.vpe(!0),this._openedStream=this.openedChange.pipe((0,Dt.h)(bi=>bi),(0,At.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Dt.h)(bi=>bi.fromState!==bi.toState&&0===bi.toState.indexOf("open")),Kt(void 0)),this._closedStream=this.openedChange.pipe((0,Dt.h)(bi=>!bi),(0,At.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Dt.h)(bi=>bi.fromState!==bi.toState&&"void"===bi.toState),Kt(void 0)),this._destroyed=new Ze.x,this.onPositionChanged=new l.vpe,this._modeChanged=new Ze.x,this.openedChange.subscribe(bi=>{bi?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,an.R)(this._elementRef.nativeElement,"keydown").pipe((0,Dt.h)(bi=>bi.keyCode===Ce.hY&&!this.disableClose&&!(0,Ce.Vb)(bi)),(0,nn.R)(this._destroyed)).subscribe(bi=>this._ngZone.run(()=>{this.close(),bi.stopPropagation(),bi.preventDefault()}))}),this._animationEnd.pipe((0,Te.x)((bi,oi)=>bi.fromState===oi.fromState&&bi.toState===oi.toState)).subscribe(bi=>{const{fromState:oi,toState:ir}=bi;(0===ir.indexOf("open")&&"void"===oi||"void"===ir&&0===oi.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(a){(a="end"===a?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(a),this._position=a,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(a){this._mode=a,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(a){this._disableClose=(0,Hi.Ig)(a)}get autoFocus(){const a=this._autoFocus;return null==a?"side"===this.mode?"dialog":"first-tabbable":a}set autoFocus(a){("true"===a||"false"===a||null==a)&&(a=(0,Hi.Ig)(a)),this._autoFocus=a}get opened(){return this._opened}set opened(a){this.toggle((0,Hi.Ig)(a))}_forceFocus(a,y){this._interactivityChecker.isFocusable(a)||(a.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{a.addEventListener("blur",()=>a.removeAttribute("tabindex")),a.addEventListener("mousedown",()=>a.removeAttribute("tabindex"))})),a.focus(y)}_focusByCssSelector(a,y){let Z=this._elementRef.nativeElement.querySelector(a);Z&&this._forceFocus(Z,y)}_takeFocus(){if(!this._focusTrap)return;const a=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(y=>{!y&&"function"==typeof this._elementRef.nativeElement.focus&&a.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(a){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,a):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const a=this._doc.activeElement;return!!a&&this._elementRef.nativeElement.contains(a)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var a;this._focusTrap&&this._focusTrap.destroy(),null===(a=this._anchor)||void 0===a||a.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(a){return this.toggle(!0,a)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(a=!this.opened,y){a&&y&&(this._openedVia=y);const Z=this._setOpen(a,!a&&this._isFocusWithinDrawer(),this._openedVia||"program");return a||(this._openedVia=null),Z}_setOpen(a,y,Z){return this._opened=a,a?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",y&&this._restoreFocus(Z)),this._updateFocusTrapState(),new Promise(pe=>{this.openedChange.pipe((0,Bt.q)(1)).subscribe(Qe=>pe(Qe?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(a){const y=this._elementRef.nativeElement,Z=y.parentNode;"end"===a?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),Z.insertBefore(this._anchor,y)),Z.appendChild(y)):this._anchor&&this._anchor.parentNode.insertBefore(y,this._anchor)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(La.qV),l.Y36(La.tE),l.Y36(se.t4),l.Y36(l.R0b),l.Y36(La.ic),l.Y36(Oe.K0,8),l.Y36(Mi,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer"]],viewQuery:function(a,y){if(1&a&&l.Gf(Gt,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._content=Z.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(a,y){1&a&&l.WFA("@transform.start",function(pe){return y._animationStarted.next(pe)})("@transform.done",function(pe){return y._animationEnd.next(pe)}),2&a&&(l.uIk("align",null),l.d8E("@transform",y._animationState),l.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:yt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},directives:[me.PQ],encapsulation:2,data:{animation:[Kn.transformDrawer]},changeDetection:0}),d})(),Nr=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt=!1,Sn){this._dir=a,this._element=y,this._ngZone=Z,this._changeDetectorRef=pe,this._animationMode=Sn,this._drawers=new l.n_E,this.backdropClick=new l.vpe,this._destroyed=new Ze.x,this._doCheckSubject=new Ze.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Ze.x,a&&a.change.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),Qe.change().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Wt}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(a){this._autosize=(0,Hi.Ig)(a)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(a){this._backdropOverride=null==a?null:(0,Hi.Ig)(a)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Ct.O)(this._allDrawers),(0,nn.R)(this._destroyed)).subscribe(a=>{this._drawers.reset(a.filter(y=>!y._container||y._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ct.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(a=>{this._watchDrawerToggle(a),this._watchDrawerPosition(a),this._watchDrawerMode(a)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Qt.b)(10),(0,nn.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(a=>a.open())}close(){this._drawers.forEach(a=>a.close())}updateContentMargins(){let a=0,y=0;if(this._left&&this._left.opened)if("side"==this._left.mode)a+=this._left._getWidth();else if("push"==this._left.mode){const Z=this._left._getWidth();a+=Z,y-=Z}if(this._right&&this._right.opened)if("side"==this._right.mode)y+=this._right._getWidth();else if("push"==this._right.mode){const Z=this._right._getWidth();y+=Z,a-=Z}a=a||null,y=y||null,(a!==this._contentMargins.left||y!==this._contentMargins.right)&&(this._contentMargins={left:a,right:y},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(a){a._animationStarted.pipe((0,Dt.h)(y=>y.fromState!==y.toState),(0,nn.R)(this._drawers.changes)).subscribe(y=>{"open-instant"!==y.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==a.mode&&a.openedChange.pipe((0,nn.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(a.opened))}_watchDrawerPosition(a){!a||a.onPositionChanged.pipe((0,nn.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Bt.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(a){a&&a._modeChanged.pipe((0,nn.R)((0,_i.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(a){const y=this._element.nativeElement.classList,Z="mat-drawer-container-has-open";a?y.add(Z):y.remove(Z)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(a=>{"end"==a.position?this._end=a:this._start=a}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(a=>a&&!a.disableClose&&this._canHaveBackdrop(a)).forEach(a=>a._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(a){return"side"!==a.mode||!!this._backdropOverride}_isDrawerOpen(a){return null!=a&&a.opened}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(et.Is,8),l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(me.rL),l.Y36(Dn),l.Y36(Ke.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-drawer-container"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,Yi,5),l.Suo(Z,vr,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._content=pe.first),l.iGM(pe=l.CRH())&&(y._allDrawers=pe)}},viewQuery:function(a,y){if(1&a&&l.Gf(Yi,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._userContent=Z.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[l._Bn([{provide:Mi,useExisting:d}])],ngContentSelectors:on,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(a,y){1&a&&(l.F$t(pn),l.YNc(0,zt,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,en,2,0,"mat-drawer-content",1)),2&a&&(l.Q6J("ngIf",y.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!y._content))},directives:[Yi,Oe.O5],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),d})(),Vr=(()=>{class d extends Yi{constructor(a,y,Z,pe,Qe){super(a,y,Z,pe,Qe)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36((0,l.Gpc)(()=>po)),l.Y36(l.SBq),l.Y36(me.mF),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(a,y){2&a&&l.Udp("margin-left",y._container._contentMargins.left,"px")("margin-right",y._container._contentMargins.right,"px")},features:[l._Bn([{provide:me.PQ,useExisting:d}]),l.qOj],ngContentSelectors:yt,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},encapsulation:2,changeDetection:0}),d})(),jo=(()=>{class d extends vr{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(a){this._fixedInViewport=(0,Hi.Ig)(a)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(a){this._fixedTopGap=(0,Hi.su)(a)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(a){this._fixedBottomGap=(0,Hi.su)(a)}}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(a,y){2&a&&(l.uIk("align",null),l.Udp("top",y.fixedInViewport?y.fixedTopGap:null,"px")("bottom",y.fixedInViewport?y.fixedBottomGap:null,"px"),l.ekj("mat-drawer-end","end"===y.position)("mat-drawer-over","over"===y.mode)("mat-drawer-push","push"===y.mode)("mat-drawer-side","side"===y.mode)("mat-drawer-opened",y.opened)("mat-sidenav-fixed",y.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[l.qOj],ngContentSelectors:yt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(a,y){1&a&&(l.F$t(),l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA())},directives:[me.PQ],encapsulation:2,data:{animation:[Kn.transformDrawer]},changeDetection:0}),d})(),po=(()=>{class d extends Nr{}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-sidenav-container"]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,Vr,5),l.Suo(Z,jo,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._content=pe.first),l.iGM(pe=l.CRH())&&(y._allDrawers=pe)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("mat-drawer-container-explicit-backdrop",y._backdropOverride)},exportAs:["matSidenavContainer"],features:[l._Bn([{provide:Mi,useExisting:d}]),l.qOj],ngContentSelectors:Un,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(a,y){1&a&&(l.F$t(Gn),l.YNc(0,Yn,1,2,"div",0),l.Hsn(1),l.Hsn(2,1),l.YNc(3,ui,2,0,"mat-sidenav-content",1)),2&a&&(l.Q6J("ngIf",y.hasBackdrop),l.xp6(3),l.Q6J("ngIf",!y._content))},directives:[Vr,Oe.O5],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),d})(),To=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Oe.ez,Pi.BQ,se.ud,me.ZD],me.ZD,Pi.BQ]}),d})();var Gr=V(7322),as=V(515);const ls=(0,se.i$)({passive:!0});let $r=(()=>{class d{constructor(a,y){this._platform=a,this._ngZone=y,this._monitoredElements=new Map}monitor(a){if(!this._platform.isBrowser)return as.E;const y=(0,Hi.fI)(a),Z=this._monitoredElements.get(y);if(Z)return Z.subject;const pe=new Ze.x,Qe="cdk-text-field-autofilled",Wt=Sn=>{"cdk-text-field-autofill-start"!==Sn.animationName||y.classList.contains(Qe)?"cdk-text-field-autofill-end"===Sn.animationName&&y.classList.contains(Qe)&&(y.classList.remove(Qe),this._ngZone.run(()=>pe.next({target:Sn.target,isAutofilled:!1}))):(y.classList.add(Qe),this._ngZone.run(()=>pe.next({target:Sn.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{y.addEventListener("animationstart",Wt,ls),y.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(y,{subject:pe,unlisten:()=>{y.removeEventListener("animationstart",Wt,ls)}}),pe}stopMonitoring(a){const y=(0,Hi.fI)(a),Z=this._monitoredElements.get(y);Z&&(Z.unlisten(),Z.subject.complete(),y.classList.remove("cdk-text-field-autofill-monitored"),y.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(y))}ngOnDestroy(){this._monitoredElements.forEach((a,y)=>this.stopMonitoring(y))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(se.t4),l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),Cs=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[se.ud]]}),d})();const Os=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),Ws=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Qr=0;const Ao=(0,Pi.FD)(class{constructor(d,C,a,y){this._defaultErrorStateMatcher=d,this._parentForm=C,this._parentFormGroup=a,this.ngControl=y}});let or=(()=>{class d extends Ao{constructor(a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi){super(Wt,pe,Qe,Z),this._elementRef=a,this._platform=y,this._autofillMonitor=ei,this._formField=oi,this._uid="mat-input-"+Qr++,this.focused=!1,this.stateChanges=new Ze.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(fo=>(0,se.qK)().has(fo));const ir=this._elementRef.nativeElement,Xr=ir.nodeName.toLowerCase();this._inputValueAccessor=Sn||ir,this._previousNativeValue=this.value,this.id=this.id,y.IOS&&bi.runOutsideAngular(()=>{a.nativeElement.addEventListener("keyup",fo=>{const oo=fo.target;!oo.value&&0===oo.selectionStart&&0===oo.selectionEnd&&(oo.setSelectionRange(1,1),oo.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Xr,this._isTextarea="textarea"===Xr,this._isInFormField=!!oi,this._isNativeSelect&&(this.controlType=ir.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(a){this._disabled=(0,Hi.Ig)(a),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(a){this._id=a||this._uid}get required(){var a,y,Z,pe;return null!==(pe=null!==(a=this._required)&&void 0!==a?a:null===(Z=null===(y=this.ngControl)||void 0===y?void 0:y.control)||void 0===Z?void 0:Z.hasValidator(Jo.kI.required))&&void 0!==pe&&pe}set required(a){this._required=(0,Hi.Ig)(a)}get type(){return this._type}set type(a){this._type=a||"text",this._validateType(),!this._isTextarea&&(0,se.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(a){a!==this.value&&(this._inputValueAccessor.value=a,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(a){this._readonly=(0,Hi.Ig)(a)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(a=>{this.autofilled=a.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(a){this._elementRef.nativeElement.focus(a)}_focusChanged(a){a!==this.focused&&(this.focused=a,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var a,y;const Z=(null===(y=null===(a=this._formField)||void 0===a?void 0:a._hideControlPlaceholder)||void 0===y?void 0:y.call(a))?null:this.placeholder;if(Z!==this._previousPlaceholder){const pe=this._elementRef.nativeElement;this._previousPlaceholder=Z,Z?pe.setAttribute("placeholder",Z):pe.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const a=this._elementRef.nativeElement.value;this._previousNativeValue!==a&&(this._previousNativeValue=a,this.stateChanges.next())}_validateType(){Ws.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let a=this._elementRef.nativeElement.validity;return a&&a.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const a=this._elementRef.nativeElement,y=a.options[0];return this.focused||a.multiple||!this.empty||!!(a.selectedIndex>-1&&y&&y.label)}return this.focused||!this.empty}setDescribedByIds(a){a.length?this._elementRef.nativeElement.setAttribute("aria-describedby",a.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const a=this._elementRef.nativeElement;return this._isNativeSelect&&(a.multiple||a.size>1)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(se.t4),l.Y36(Jo.a5,10),l.Y36(Jo.F,8),l.Y36(Jo.sg,8),l.Y36(Pi.rD),l.Y36(Os,10),l.Y36($r),l.Y36(l.R0b),l.Y36(Gr.G_,8))},d.\u0275dir=l.lG2({type:d,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y._focusChanged(!0)})("blur",function(){return y._focusChanged(!1)})("input",function(){return y._onInput()}),2&a&&(l.Ikx("disabled",y.disabled)("required",y.required),l.uIk("id",y.id)("data-placeholder",y.placeholder)("name",y.name||null)("readonly",y.readonly&&!y._isNativeSelect||null)("aria-invalid",y.empty&&y.required?null:y.errorState)("aria-required",y.required),l.ekj("mat-input-server",y._isServer)("mat-native-select-inline",y._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:Gr.Eo,useExisting:d}]),l.qOj,l.TTD]}),d})(),Ys=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[Pi.rD],imports:[[Cs,Gr.lN,Pi.BQ],Cs,Gr.lN]}),d})();var Fo=V(449);let Es=(()=>{class d{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(a){this._vertical=(0,Hi.Ig)(a)}get inset(){return this._inset}set inset(a){this._inset=(0,Hi.Ig)(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(a,y){2&a&&(l.uIk("aria-orientation",y.vertical?"vertical":"horizontal"),l.ekj("mat-divider-vertical",y.vertical)("mat-divider-horizontal",!y.vertical)("mat-divider-inset",y.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(a,y){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),d})(),la=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.BQ],Pi.BQ]}),d})();const ca=["*"],cl=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],wa=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],Qc=(0,Pi.Id)((0,Pi.Kr)(class{})),rh=(0,Pi.Kr)(class{}),Bu=new l.OlP("MatList"),dl=new l.OlP("MatNavList");let oh=(()=>{class d extends Qc{constructor(){super(...arguments),this._stateChanges=new Ze.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[l._Bn([{provide:dl,useExisting:d}]),l.qOj,l.TTD],ngContentSelectors:ca,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),d})(),sh=(()=>{class d extends Qc{constructor(a){super(),this._elementRef=a,this._stateChanges=new Ze.x,"action-list"===this._getListType()&&a.nativeElement.classList.add("mat-action-list")}_getListType(){const a=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===a?"list":"mat-action-list"===a?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[l._Bn([{provide:Bu,useExisting:d}]),l.qOj,l.TTD],ngContentSelectors:ca,decls:1,vars:0,template:function(a,y){1&a&&(l.F$t(),l.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),d})(),zu=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),d})(),ah=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),d})(),lh=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275dir=l.lG2({type:d,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),d})(),mp=(()=>{class d extends rh{constructor(a,y,Z,pe){super(),this._element=a,this._isInteractiveList=!1,this._destroyed=new Ze.x,this._disabled=!1,this._isInteractiveList=!!(Z||pe&&"action-list"===pe._getListType()),this._list=Z||pe;const Qe=this._getHostElement();"button"===Qe.nodeName.toLowerCase()&&!Qe.hasAttribute("type")&&Qe.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{y.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(a){this._disabled=(0,Hi.Ig)(a)}ngAfterContentInit(){(0,Pi.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(dl,8),l.Y36(Bu,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(a,y,Z){if(1&a&&(l.Suo(Z,zu,5),l.Suo(Z,ah,5),l.Suo(Z,Pi.X2,5)),2&a){let pe;l.iGM(pe=l.CRH())&&(y._avatar=pe.first),l.iGM(pe=l.CRH())&&(y._icon=pe.first),l.iGM(pe=l.CRH())&&(y._lines=pe)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(a,y){2&a&&l.ekj("mat-list-item-disabled",y.disabled)("mat-list-item-avatar",y._avatar||y._icon)("mat-list-item-with-avatar",y._avatar||y._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[l.qOj],ngContentSelectors:wa,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(a,y){1&a&&(l.F$t(cl),l.TgZ(0,"div",0),l._UZ(1,"div",1),l.Hsn(2),l.TgZ(3,"div",2),l.Hsn(4,1),l.qZA(),l.Hsn(5,2),l.qZA()),2&a&&(l.xp6(1),l.Q6J("matRippleTrigger",y._getHostElement())("matRippleDisabled",y._isRippleDisabled()))},directives:[Pi.wG],encapsulation:2,changeDetection:0}),d})(),Ca=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.uc,Pi.si,Pi.BQ,Pi.us,Oe.ez],Pi.uc,Pi.BQ,Pi.us,la]}),d})();const ju=["exampleLink"];function gp(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"button",11),l.NdJ("click",function(){return l.CHM(a),l.oxw().clearSearch()}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA(),l.qZA()}}const Ds=function(d){return{_routerLinkActiveWakeUpHack_:d}};function hl(d,C){if(1&d&&(l.TgZ(0,"a",14,15),l._uU(2),l.qZA()),2&d){const a=l.oxw().$implicit,y=l.oxw(2);l.Q6J("routerLink","/demo/"+(y.isEditMode?"/edit/":"")+a.path)("routerLinkActiveOptions",l.VKq(3,Ds,y.isEditMode)),l.xp6(2),l.hij(" ",a.data.label," ")}}function Xc(d,C){if(1&d&&(l.ynx(0),l.YNc(1,hl,3,5,"a",13),l.BQk()),2&d){const a=C.$implicit;l.xp6(1),l.Q6J("ngIf",a)}}function Cc(d,C){if(1&d&&(l.ynx(0),l.TgZ(1,"h3",12),l._uU(2),l.qZA(),l.YNc(3,Xc,2,1,"ng-container",9),l._UZ(4,"mat-divider"),l.BQk()),2&d){const a=C.$implicit,y=l.oxw();l.xp6(2),l.Oqu(a),l.xp6(1),l.Q6J("ngForOf",y.routes[a])}}let dh=(()=>{class d{constructor(a,y,Z,pe){this.zone=a,this.router=y,this.activatedRoute=Z,this.mapResizeService=pe,this.sidenavIsOpen=!0,this.isEditMode=!!this.activatedRoute.snapshot.firstChild.params.demoUrl,this.originalRoutes=Md(Im[0].children,Qe=>Qe.data?Qe.data.cat:null),this.categories=[Wi.STYLES,Wi.LAYERS,Wi.SOURCES,Wi.USER_INTERACTION,Wi.CAMERA,Wi.CONTROLS_AND_OVERLAYS]}ngOnInit(){this.routes=this.originalRoutes}ngAfterViewInit(){this.scrollInToActiveExampleLink()}toggleSidenav(){this.sidenavIsOpen=!this.sidenavIsOpen}toggleEdit(a){const y=this.activatedRoute.snapshot.firstChild;this.router.navigate(a.checked?["demo","edit",y.url[0].path]:["demo",y.params.demoUrl])}onSidenavChange(){this.mapResizeService.resize$.next(void 0)}search(){this.routes=function Hm(d){return Xd(d,5)}(this.originalRoutes),Object.values(this.routes).forEach(a=>{a.forEach((y,Z)=>{y.data&&!y.data.label.toLowerCase().includes(this.searchTerm.toLowerCase())&&delete a[Z]})})}clearSearch(){this.searchTerm="",this.routes=this.originalRoutes}scrollInToActiveExampleLink(){this.zone.onStable.pipe((0,Ye.P)()).subscribe(()=>{const a=this.exampleLinks.find(y=>y.nativeElement.classList.contains("active"));a&&function Nu(d,C){var a=!d.ownerDocument.documentElement.contains(d);if(eh(C)&&"function"==typeof C.behavior)return C.behavior(a?[]:hp(d,C));if(!a){var y=function th(d){return!1===d?{block:"end",inline:"nearest"}:eh(d)?d:{block:"start",inline:"nearest"}}(C);(function pp(d,C){void 0===C&&(C="auto");var a="scrollBehavior"in document.body.style;d.forEach(function(y){var Z=y.el,pe=y.top,Qe=y.left;Z.scroll&&a?Z.scroll({top:pe,left:Qe,behavior:C}):(Z.scrollTop=pe,Z.scrollLeft=Qe)})})(hp(d,y),y.behavior)}}(a.nativeElement,{block:"center",scrollMode:"if-needed"})})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.R0b),l.Y36(q.F0),l.Y36(q.gz),l.Y36(ih))},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],viewQuery:function(a,y){if(1&a&&l.Gf(ju,5,l.SBq),2&a){let Z;l.iGM(Z=l.CRH())&&(y.exampleLinks=Z)}},decls:18,vars:5,consts:[["position","left"],["mat-button","",1,"menu-button",3,"click"],["position","right"],["color","accent",3,"ngModel","ngModelChange","change"],["mode","side",3,"opened","openedChange"],["sidenav",""],[1,"search"],["matInput","","type","text","placeholder","Search",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"content"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matSubheader",""],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngIf"],["mat-list-item","","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["exampleLink",""]],template:function(a,y){1&a&&(l.TgZ(0,"showcase-layout-toolbar-menu",0),l.TgZ(1,"button",1),l.NdJ("click",function(){return y.toggleSidenav()}),l.TgZ(2,"mat-icon"),l._uU(3,"menu"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"showcase-layout-toolbar-menu",2),l.TgZ(5,"mat-slide-toggle",3),l.NdJ("ngModelChange",function(pe){return y.isEditMode=pe})("change",function(pe){return y.toggleEdit(pe)}),l._uU(6," Edit! "),l.qZA(),l.qZA(),l.TgZ(7,"mat-sidenav-container"),l.TgZ(8,"mat-sidenav",4,5),l.NdJ("openedChange",function(){return y.onSidenavChange()}),l.TgZ(10,"mat-form-field",6),l.TgZ(11,"input",7),l.NdJ("ngModelChange",function(pe){return y.searchTerm=pe})("ngModelChange",function(){return y.search()}),l.qZA(),l.YNc(12,gp,3,0,"button",8),l.qZA(),l.TgZ(13,"mat-nav-list"),l.YNc(14,Cc,5,2,"ng-container",9),l.qZA(),l.qZA(),l.TgZ(15,"mat-sidenav-content"),l.TgZ(16,"section",10),l._UZ(17,"router-outlet"),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.xp6(5),l.Q6J("ngModel",y.isEditMode),l.xp6(3),l.Q6J("opened",y.sidenavIsOpen),l.xp6(3),l.Q6J("ngModel",y.searchTerm),l.xp6(1),l.Q6J("ngIf",y.searchTerm),l.xp6(2),l.Q6J("ngForOf",y.categories))},directives:[fp.a,xs.lW,$e.Hw,w,Jo.JJ,Jo.On,po,jo,Gr.KE,or,Jo.Fj,Oe.O5,Gr.R9,oh,Oe.sg,lh,mp,q.yS,q.Od,Es,Vr,q.lC],styles:["[_nghost-%COMP%], .content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}mat-sidenav[_ngcontent-%COMP%]{width:345px;display:flex;flex-direction:column;flex:1}mat-nav-list[_ngcontent-%COMP%]{overflow-y:auto}mat-sidenav-container[_ngcontent-%COMP%]{flex:1}.content[_ngcontent-%COMP%]{height:100%}mat-form-field.search[_ngcontent-%COMP%]{width:100%;margin-bottom:-1.25em}a.active[_ngcontent-%COMP%]{color:#fff;background-color:#3f51b5!important}"]}),d})(),Ki=(()=>{class d{constructor(a,y){this.mapResizeService=a,this.map=y,this.sub=new gt.w0}ngOnInit(){this.sub.add(this.mapResizeService.resize$.subscribe(()=>{this.map.mapInstance.resize()}))}ngOnDestroy(){this.sub.unsubscribe()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(ih),l.Y36(_t))},d.\u0275dir=l.lG2({type:d,selectors:[["mgl-map"]]}),d})();const $m=function(d){return[d,40.7135]},Zm=function(){return["==","extrude","true"]},Rl=function(){return["linear"]},hh=function(){return["zoom"]},oy=function(){return["get","height"]},qm=function(d,C,a){return["interpolate",d,C,15,0,15.05,a]},hb=function(){return["get","min_height"]},Rf=function(d,C){return{"fill-extrusion-color":"#aaa","fill-extrusion-height":d,"fill-extrusion-base":C,"fill-extrusion-opacity":.6}};let Wm=(()=>{class d{onLoad(a){const y=a.getStyle().layers;for(let Z=0;Z<y.length;Z++)if("symbol"===y[Z].type&&y[Z].layout["text-field"]){this.labelLayerId=y[Z].id;break}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:30,consts:[[3,"zoom","center","pitch","bearing","mapLoad"],["id","3d-buildings","source","openmaptiles","sourceLayer","building","type","fill-extrusion",3,"filter","minzoom","paint","before"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.onLoad(pe)}),l._UZ(1,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",15.5)("center",l.VKq(10,$m,-74.0066))("pitch",45)("bearing",-17.6),l.xp6(1),l.Q6J("filter",l.DdM(12,Zm))("minzoom",15)("paint",l.WLB(27,Rf,l.kEZ(16,qm,l.DdM(13,Rl),l.DdM(14,hh),l.DdM(15,oy)),l.kEZ(23,qm,l.DdM(20,Rl),l.DdM(21,hh),l.DdM(22,hb))))("before",y.labelLayerId))},directives:[_t,Ki,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Ff=function(d){return{width:64,height:64,data:d}},ph=function(){return[0,0]},sy=function(d){return{type:"Point",coordinates:d}},Lf=function(d){return{type:"Feature",geometry:d}},Ym=function(d){return[d]},Km=function(d){return{type:"FeatureCollection",features:d}},Jm=function(d){return{type:"geojson",data:d}},ay=function(){return{"icon-image":"gradient"}};let Nf=(()=>{class d{ngOnInit(){this.imageData=this.generateImage()}generateImage(){const Z=new Uint8Array(16384);for(let pe=0;pe<64;pe++)for(let Qe=0;Qe<64;Qe++){const Wt=4*(64*Qe+pe);Z[Wt+0]=Qe/64*255,Z[Wt+1]=pe/64*255,Z[Wt+2]=128,Z[Wt+3]=255}return Z}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:19,consts:[["id","gradient",3,"data"],["id","points","type","symbol",3,"source","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-image",0),l._UZ(2,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("data",l.VKq(5,Ff,y.imageData)),l.xp6(1),l.Q6J("source",l.VKq(16,Jm,l.VKq(14,Km,l.VKq(12,Ym,l.VKq(10,Lf,l.VKq(8,sy,l.DdM(7,ph)))))))("layout",l.DdM(18,ay)))},directives:[_t,Ki,di,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function ly(d,C){if(1&d&&l._UZ(0,"mgl-image",3),2&d){const a=C.$implicit;l.Q6J("id",a.id)("data",a)}}const cy=function(){return[0,0]},_p=function(d){return{type:"Point",coordinates:d}},Hu=function(){return{color:"255,0,0"}},yp=function(d,C){return{type:"Feature",geometry:d,properties:C}},uy=function(){return[50,0]},dy=function(){return{color:"255,209,28"}},Gu=function(d){return[d,0]},hy=function(){return{color:"242,127,32"}},py=function(d,C,a){return[d,C,a]},fy=function(d){return{type:"FeatureCollection",features:d}},my=function(d){return{type:"geojson",data:d}},Xa=function(){return["get","color"]},Bf=function(d){return["concat","square-rgb-",d]},Qm=function(d){return{"icon-image":d}};let Xm=(()=>{class d{constructor(){this.imagesData=[]}generateImage({id:a}){const y="square-rgb-";if(0!==a.indexOf(y))return;const Z=a.replace(y,"").split(",").map(Number),Wt=new Uint8Array(16384);for(let ei=0;ei<64;ei++)for(let bi=0;bi<64;bi++){const oi=4*(64*bi+ei);Wt[oi+0]=Z[0],Wt[oi+1]=Z[1],Wt[oi+2]=Z[2],Wt[oi+3]=255}this.imagesData=[...this.imagesData,{id:a,width:64,height:64,data:Wt}]}trackByImage(a,y){return y.id}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:41,consts:[[3,"styleImageMissing"],[3,"id","data",4,"ngFor","ngForOf","ngForTrackBy"],["id","points","type","symbol",3,"source","layout"],[3,"id","data"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("styleImageMissing",function(pe){return y.generateImage(pe)}),l.YNc(1,ly,1,2,"mgl-image",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("ngForOf",y.imagesData)("ngForTrackBy",y.trackByImage),l.xp6(1),l.Q6J("source",l.VKq(34,my,l.VKq(32,fy,l.kEZ(28,py,l.WLB(10,yp,l.VKq(7,_p,l.DdM(6,cy)),l.DdM(9,Hu)),l.WLB(17,yp,l.VKq(14,_p,l.DdM(13,uy)),l.DdM(16,dy)),l.WLB(25,yp,l.VKq(22,_p,l.VKq(20,Gu,-50)),l.DdM(24,hy))))))("layout",l.VKq(39,Qm,l.VKq(37,Bf,l.DdM(36,Xa)))))},directives:[_t,Ki,Oe.sg,di,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const eg=function(){return[0,0]},tg=function(d){return{type:"Point",coordinates:d}},gy=function(d){return{type:"Feature",geometry:d}},_y=function(d){return[d]},yy=function(d){return{type:"FeatureCollection",features:d}},vy=function(d){return{type:"geojson",data:d}},ng=function(){return{"icon-image":"cat","icon-size":.25}};function pb(d,C){1&d&&l._UZ(0,"mgl-layer",2),2&d&&l.Q6J("source",l.VKq(11,vy,l.VKq(9,yy,l.VKq(7,_y,l.VKq(5,gy,l.VKq(3,tg,l.DdM(2,eg)))))))("layout",l.DdM(13,ng))}let ig=(()=>{class d{constructor(){this.imageLoaded=!1}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:3,consts:[["id","cat","url","https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Cat_silhouette.svg/400px-Cat_silhouette.svg.png",3,"imageLoaded"],["id","points","type","symbol",3,"source","layout",4,"ngIf"],["id","points","type","symbol",3,"source","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l.TgZ(1,"mgl-image",0),l.NdJ("imageLoaded",function(){return y.imageLoaded=!0}),l.qZA(),l.YNc(2,pb,1,14,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(2),l.Q6J("ngIf",y.imageLoaded))},directives:[_t,Ki,di,Oe.O5,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const by=function(d){return[d,38.907]},xy=function(){return[11.15]};let fb=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","top-left"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(5,by,-77.04))("zoom",l.DdM(7,xy))("attributionControl",!1))},directives:[_t,Ki,Ht,Bi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function mb(d,C){1&d&&l._UZ(0,"mgl-feature",4),2&d&&l.Q6J("geometry",C.$implicit)}const zf=function(){return[8]},wy=function(){return{"icon-image":"oneway"}};let rg=(()=>{class d{constructor(){this.center=[-90.96,-.47],this.geometries=[{type:"Point",coordinates:[-91.395263671875,-.9145729757782163]},{type:"Point",coordinates:[-90.32958984375,-.6344474832838974]},{type:"Point",coordinates:[-91.34033203125,.01647949196029245]}]}centerMapTo(a){this.center=a.features[0].geometry.coordinates}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:9,consts:[[3,"zoom","center","cursorStyle","mapLoad"],["id","symbols-source"],[3,"geometry",4,"ngFor","ngForOf"],["id","symbols","type","symbol","source","symbols-source",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"geometry"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.map=pe}),l.TgZ(1,"mgl-geojson-source",1),l.YNc(2,mb,1,1,"mgl-feature",2),l.qZA(),l.TgZ(3,"mgl-layer",3),l.NdJ("layerClick",function(pe){return y.centerMapTo(pe)})("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""}),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,zf))("center",y.center)("cursorStyle",y.cursorStyle),l.xp6(2),l.Q6J("ngForOf",y.geometries),l.xp6(1),l.Q6J("layout",l.DdM(8,wy)))},directives:[_t,Ki,at,Oe.sg,mt,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function og(d,C){1&d&&l._UZ(0,"showcase-cluster-point",6),2&d&&l.Q6J("properties",C.$implicit.properties)}const gb=function(){return[.3]},pl=function(){return[0,20]},Cy=function(){return["!=","cluster",!0]},_b=function(d){return{fill:d}};function sg(d,C){if(1&d&&(l.O4$(),l._UZ(0,"path",4)),2&d){const a=C.$implicit;l.Q6J("ngStyle",l.VKq(2,_b,a.fill)),l.uIk("d",a.d)}}const ag=function(d){return{font:d}},eu=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let Ey=(()=>{class d{constructor(){const a=["<",["get","mag"],2],y=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],Z=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],pe=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",a,1,0]],mag2:["+",["case",y,1,0]],mag3:["+",["case",Z,1,0]],mag4:["+",["case",pe,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",a,eu[0],y,eu[1],Z,eu[2],pe,eu[3],eu[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:16,consts:[[3,"zoom","center"],["id","earthquakes","data","https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-markers-for-clusters",2),l.YNc(3,og,1,1,"ng-template",3),l.qZA(),l._UZ(4,"mgl-layer",4),l._UZ(5,"mgl-layer",5),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(12,gb))("center",l.DdM(13,pl)),l.xp6(1),l.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",y.clusterProperties),l.xp6(3),l.Q6J("filter",l.DdM(14,Cy))("paint",y.circlePaint),l.xp6(1),l.Q6J("filter",l.DdM(15,Cy))("layout",y.labelLayout)("paint",y.labelPaint))},directives:function(){return[_t,Ki,at,nt,ie,yb,yn]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),yb=(()=>{class d{ngOnInit(){const a=[],y=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let Z=0;for(let Qe=0;Qe<y.length;Qe++)a.push(Z),Z+=y[Qe];this.font=(Z>=1e3?22:Z>=100?20:Z>=10?18:16)+"px sans-serif",this.r=Z>=1e3?50:Z>=100?32:Z>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let Qe=0;Qe<y.length;Qe++)this.segments.push(this.donutSegment(a[Qe]/Z,(a[Qe]+y[Qe])/Z,eu[Qe]));this.totalString=Z.toLocaleString()}donutSegment(a,y,Z){y-a==1&&(y-=1e-5);const pe=2*Math.PI*(a-.25),Qe=2*Math.PI*(y-.25),Wt=Math.cos(pe),Sn=Math.sin(pe),ei=Math.cos(Qe),bi=Math.sin(Qe),oi=y-a>.5?1:0;return{d:`M ${this.r+this.r0*Wt} ${this.r+this.r0*Sn} L ${this.r+this.r*Wt} ${this.r+this.r*Sn} A ${this.r} ${this.r} 0 ${oi} 1 ${this.r+this.r*ei} ${this.r+this.r*bi} L ${this.r+this.r0*ei} ${this.r+this.r0*bi} A ${this.r0} ${this.r0} 0 ${oi} 0 ${this.r+this.r0*Wt} ${this.r+this.r0*Sn}`,fill:Z}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(a,y){1&a&&(l.O4$(),l.TgZ(0,"svg",0),l.YNc(1,sg,1,4,"path",1),l._UZ(2,"circle",2),l.TgZ(3,"text",3),l._uU(4),l.qZA(),l.qZA()),2&a&&(l.Q6J("ngStyle",l.VKq(10,ag,y.font)),l.uIk("width",y.w)("height",y.w)("viewbox",y.viewbox),l.xp6(1),l.Q6J("ngForOf",y.segments),l.xp6(1),l.uIk("cx",y.r)("cy",y.r)("r",y.r0),l.xp6(1),l.uIk("transform",y.textTransform),l.xp6(1),l.hij(" ",y.totalString," "))},directives:[Oe.PC,Oe.sg],encapsulation:2}),d})();const Vf=function(){return["has","point_count"]},Uf=function(){return[0,"#51bbd6"]},Dy=function(){return[100,"#f1f075"]},jf=function(){return[750,"#f28cb1"]},lg=function(d,C,a){return[d,C,a]},cg=function(d){return{property:"point_count",type:"interval",stops:d}},My=function(){return[0,20]},Sy=function(){return[100,30]},Ty=function(){return[750,40]},Ay=function(d,C){return{"circle-color":d,"circle-radius":C}},vp=function(){return["DIN Offc Pro Medium","Arial Unicode MS Bold"]},$u=function(d){return{"text-field":"{point_count_abbreviated}","text-font":d,"text-size":12}},Iy=function(){return["!has","point_count"]},fh=function(){return{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}};function Py(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l._UZ(2,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l._UZ(4,"mgl-layer",5),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",14)("clusterRadius",50),l.xp6(1),l.Q6J("filter",l.DdM(10,Vf))("paint",l.WLB(29,Ay,l.VKq(18,cg,l.kEZ(14,lg,l.DdM(11,Uf),l.DdM(12,Dy),l.DdM(13,jf))),l.VKq(27,cg,l.kEZ(23,lg,l.DdM(20,My),l.DdM(21,Sy),l.DdM(22,Ty))))),l.xp6(1),l.Q6J("filter",l.DdM(32,Vf))("layout",l.VKq(34,$u,l.DdM(33,vp))),l.xp6(1),l.Q6J("filter",l.DdM(36,Iy))("paint",l.DdM(37,fh))}}const Oy=function(){return[3]},Hf=function(d){return[d,40.66995747013945]};let Fl=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){this.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19))})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["id","clusters","type","circle","source","earthquakes",3,"filter","paint"],["id","cluster-count","type","symbol","source","earthquakes",3,"filter","layout"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Py,5,38,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Oy))("center",l.VKq(6,Hf,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:[_t,Ki,Oe.O5,at,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const mh=function(d){return[d,38.907]},Qs=function(){return[11.15]},bp=function(){return['<a href="https://github.com/Wykks/ngx-mapbox-gl" target="_blank">Maps made awesome in Angular</a>',"Hello World"]};let el=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:10,consts:[[3,"center","zoom","attributionControl"],["mglAttribution","","position","bottom-right",3,"customAttribution"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.VKq(6,mh,-77.04))("zoom",l.DdM(8,Qs))("attributionControl",!1),l.xp6(1),l.Q6J("customAttribution",l.DdM(9,bp)))},directives:[_t,Ki,Ht,Bi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Gf=function(){return[36.235656,50.00387]},Zu=function(){return[11.15]};let qu=(()=>{class d{constructor(){this.locale={"FullscreenControl.Enter":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c","FullscreenControl.Exit":"\u0412\u0438\u0439\u0442\u0438 \u0437 \u043f\u043e\u0432\u043d\u043e\u0435\u043a\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0435\u0436\u0438\u043c\u0443","GeolocateControl.FindMyLocation":"\u0417\u043d\u0430\u0439\u0442\u0438 \u043c\u043e\u0454 \u043c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f","GeolocateControl.LocationNotAvailable":"\u041c\u0456\u0441\u0446\u0435\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0435","LogoControl.Title":"\u041b\u043e\u0433\u043e Mapbox","NavigationControl.ResetBearing":"C\u043a\u0438\u043d\u0443\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u0441","NavigationControl.ZoomIn":"\u041d\u0430\u0431\u043b\u0438\u0437\u0438\u0442\u0438","NavigationControl.ZoomOut":"\u0412\u0456\u0434\u0434\u0430\u043b\u0438\u0442\u0438","ScaleControl.Feet":"\u0444","ScaleControl.Meters":"\u043c","ScaleControl.Kilometers":"\u043a\u043c","ScaleControl.Miles":"\u043c\u0438","ScaleControl.NauticalMiles":"\u043d\u043c"}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:7,consts:[[3,"center","zoom","locale"],["mglFullscreen","","position","top-left"],["mglGeolocate","","position","top-left"],["mglNavigation","","position","top-left"],["mglScale",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l._UZ(2,"mgl-control",2),l._UZ(3,"mgl-control",3),l._UZ(4,"mgl-control",4),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",l.DdM(5,Gf))("zoom",l.DdM(6,Zu))("locale",y.locale))},directives:[_t,Ki,Ht,gn,Bn,Jn,Xi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Wu=function(d,C,a){return{"background-image":d,width:C,height:a}};function Yu(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"mgl-marker",2),l.TgZ(1,"div",3),l.NdJ("click",function(){const pe=l.CHM(a).$implicit;return l.oxw().alert(pe.properties.message)}),l.qZA(),l.qZA()}if(2&d){const a=C.$implicit;l.Q6J("feature",a),l.xp6(1),l.Q6J("ngStyle",l.kEZ(2,Wu,"url(https://placekitten.com/g/"+a.properties.iconSize.join("/")+"/)",a.properties.iconSize[0]+"px",a.properties.iconSize[1]+"px"))}}const Ku=function(){return[5]},Ju=function(d,C){return[d,C]};let Qu=(()=>{class d{constructor(){this.geojson={type:"FeatureCollection",features:[{type:"Feature",properties:{message:"Foo",iconSize:[60,60]},geometry:{type:"Point",coordinates:[-66.324462890625,-16.024695711685304]}},{type:"Feature",properties:{message:"Bar",iconSize:[50,50]},geometry:{type:"Point",coordinates:[-61.2158203125,-15.97189158092897]}},{type:"Feature",properties:{message:"Baz",iconSize:[40,40]},geometry:{type:"Point",coordinates:[-63.29223632812499,-18.28151823530889]}}]}}alert(a){alert(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:9,consts:[[3,"zoom","center"],[3,"feature",4,"ngFor","ngForOf"],[3,"feature"],[1,"marker",3,"ngStyle","click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Yu,2,6,"mgl-marker",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Ku))("center",l.WLB(6,Ju,-65.017,-16.457)),l.xp6(1),l.Q6J("ngForOf",y.geojson.features))},directives:[_t,Ki,Oe.sg,Qn,Oe.PC],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),d})();const Xu=function(){return[3]},ed=function(d){return[d,39]};let ug=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Xu))("center",l.VKq(5,ed,-77.38)))},directives:[_t,Ki],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const dg=function(){return[9]},hg=function(d){return[d,40]};let pg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:7,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,dg))("center",l.VKq(5,hg,-74.5)))},directives:[_t,Ki],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const fg=["*",[["mat-card-footer"]]],mg=["*","mat-card-footer"];let Uy=(()=>{class d{constructor(a){this._animationMode=a}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(Ke.Qb,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(a,y){2&a&&l.ekj("_mat-animation-noopable","NoopAnimations"===y._animationMode)},exportAs:["matCard"],ngContentSelectors:mg,decls:2,vars:0,template:function(a,y){1&a&&(l.F$t(fg),l.Hsn(0),l.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),d})(),$f=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.BQ],Pi.BQ]}),d})();function jy(d,C){if(1&d&&(l.TgZ(0,"mgl-control",3),l.TgZ(1,"mat-card"),l.TgZ(2,"div"),l._uU(3),l.qZA(),l.TgZ(4,"div"),l._uU(5),l.qZA(),l.qZA(),l.qZA()),2&d){const a=l.oxw();l.xp6(3),l.hij("Longitude:\xa0",a.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",a.coordinates[1],"")}}const Sb=function(){return[2]},Hy=function(){return[0,0]};let Tb=(()=>{class d{constructor(){this.color="#3887be"}onDragEnd(a){this.coordinates=a.getLngLat().toArray()}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:10,consts:[[3,"zoom","center"],[3,"lngLat","draggable","markerDragEnd"],["position","bottom-left",4,"ngIf"],["position","bottom-left"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.NdJ("markerDragEnd",function(pe){return y.onDragEnd(pe)}),l.qZA(),l.YNc(2,jy,6,2,"mgl-control",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Sb))("center",l.DdM(8,Hy)),l.xp6(1),l.Q6J("lngLat",l.DdM(9,Hy))("draggable",!0),l.xp6(1),l.Q6J("ngIf",y.coordinates))},directives:[_t,Ki,Qn,Oe.O5,Ht,Uy],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Gy=function(){return[13]},_g=function(){return[11.255,43.77]};let Ab=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:6,consts:[[3,"zoom","center"],["mglFullscreen",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,Gy))("center",l.DdM(5,_g)))},directives:[_t,Ki,Ht,gn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const $y=function(){return[15]},td=function(d){return[d,37.830348]},Zy=function(){return{}},yg=function(d){return[d,37.83381888486939]},qy=function(d){return[d,37.83317489144141]},vg=function(d){return[d,37.83270036637107]},xp=function(d){return[d,37.832056363179625]},Wy=function(d){return[d,37.83114119107971]},bg=function(d){return[d,37.83049717427869]},Yy=function(d){return[d,37.829920943955045]},Ky=function(d){return[d,37.82954808664175]},Jy=function(d){return[d,37.82944639795659]},Qy=function(d){return[d,37.82880236636284]},Xy=function(d){return[d,37.82931081282506]},xg=function(d){return[d,37.83080223556934]},ev=function(d){return[d,37.83168351665737]},wg=function(d){return[d,37.832158048267786]},Cg=function(d){return[d,37.83297152392784]},Zf=function(d){return[d,37.83263257682617]},Ib=function(d){return[d,37.832937629287755]},qf=function(d){return[d,37.832429207817725]},tv=function(d){return[d,37.832564787218985]},Pb=function(d){return[d,37.83337825839438]},gh=function(d){return[d,37.83368330777276]},Eg=function(d,C,a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi,ir,Xr,fo,oo,so,Go,Xs,_l,yl){return[d,C,a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi,ir,Xr,fo,oo,so,Go,Xs,_l,yl]},Wf=function(d){return{type:"LineString",coordinates:d}},Yf=function(d,C){return{type:"Feature",properties:d,geometry:C}},nv=function(d){return{type:"geojson",data:d}},Kf=function(){return{"line-join":"round","line-cap":"round"}},Jf=function(){return{"line-color":"#888","line-width":8}};let Dg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:84,consts:[[3,"zoom","center"],["id","route","type","line",3,"source","layout","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-layer",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,$y))("center",l.VKq(8,td,-122.486052)),l.xp6(1),l.Q6J("source",l.VKq(80,nv,l.WLB(77,Yf,l.DdM(10,Zy),l.VKq(75,Wf,l.rFY(53,Eg,[l.VKq(11,yg,-122.48369693756104),l.VKq(13,qy,-122.48348236083984),l.VKq(15,vg,-122.48339653015138),l.VKq(17,xp,-122.48356819152832),l.VKq(19,Wy,-122.48404026031496),l.VKq(21,bg,-122.48404026031496),l.VKq(23,Yy,-122.48348236083984),l.VKq(25,Ky,-122.48356819152832),l.VKq(27,Jy,-122.48507022857666),l.VKq(29,Qy,-122.48610019683838),l.VKq(31,Xy,-122.48695850372314),l.VKq(33,xg,-122.48700141906738),l.VKq(35,ev,-122.48751640319824),l.VKq(37,wg,-122.48803138732912),l.VKq(39,Cg,-122.48888969421387),l.VKq(41,Zf,-122.48987674713133),l.VKq(43,Ib,-122.49043464660643),l.VKq(45,qf,-122.49125003814696),l.VKq(47,tv,-122.49163627624512),l.VKq(49,Pb,-122.49223709106445),l.VKq(51,gh,-122.49378204345702)])))))("layout",l.DdM(82,Kf))("paint",l.DdM(83,Jf)))},directives:[_t,Ki,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function Ob(d,C){if(1&d&&l._UZ(0,"mgl-layer",5),2&d){const a=C.$implicit;l.Q6J("id",a.id)("type",a.type)("filter",a.filter)("paint",a.paint)}}const iv=function(){return["!=","cluster",!0]},Qf=function(){return{"circle-color":"rgba(0,255,0,0.5)","circle-radius":20,"circle-blur":1}};function Xf(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2),l.YNc(2,Ob,1,4,"mgl-layer",3),l._UZ(3,"mgl-layer",4),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterMaxZoom",15)("clusterRadius",20),l.xp6(1),l.Q6J("ngForOf",a.clusterLayers),l.xp6(1),l.Q6J("filter",l.DdM(7,iv))("paint",l.DdM(8,Qf))}}const Mg=function(){return[3]},Sg=function(d){return[d,40.66995747013945]};let em=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){this.earthquakes=yield V.e(45).then(V.t.bind(V,3045,19));const a=[[0,"green"],[20,"orange"],[200,"red"]];this.clusterLayers=a.map((y,Z)=>({type:"circle",id:`cluster-${Z}`,paint:{"circle-color":y[1],"circle-radius":70,"circle-blur":1},filter:Z===a.length-1?[">=","point_count",y[0]]:["all",[">=","point_count",y[0]],["<","point_count",a[Z+1][0]]]}))})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterMaxZoom","clusterRadius"],["source","earthquakes",3,"id","type","filter","paint",4,"ngFor","ngForOf"],["id","unclustered-point","type","circle","source","earthquakes",3,"filter","paint"],["source","earthquakes",3,"id","type","filter","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Xf,4,9,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Mg))("center",l.VKq(6,Sg,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:[_t,Ki,Oe.O5,at,Oe.sg,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Tg=function(){return[2]},Ag=function(d){return[d,37.830348]},tm=function(){return{"fill-color":"#627BC1","fill-opacity":.5}},nm=function(){return{"line-color":"#627BC1","line-width":2}},rv=function(){return{"fill-color":"#627BC1","fill-opacity":1}};let Ig=(()=>{class d{constructor(){this.hoverFilter=["==","name",""]}activateHoverOn(a){this.hoverFilter=["==","name",a.features[0].properties.name]}disableHover(){this.hoverFilter=["==","name",""]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:14,consts:[[3,"zoom","center"],["id","states","data","https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces.geojson"],["id","state-fills","type","fill","source","states",3,"paint","layerMouseMove","layerMouseLeave"],["id","state-borders","type","line","source","states",3,"paint"],["id","state-fills-hover","type","fill","source","states",3,"paint","filter"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerMouseMove",function(pe){return y.activateHoverOn(pe)})("layerMouseLeave",function(){return y.disableHover()}),l.qZA(),l._UZ(3,"mgl-layer",3),l._UZ(4,"mgl-layer",4),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Tg))("center",l.VKq(9,Ag,-100.486052)),l.xp6(2),l.Q6J("paint",l.DdM(11,tm)),l.xp6(1),l.Q6J("paint",l.DdM(12,nm)),l.xp6(1),l.Q6J("paint",l.DdM(13,rv))("filter",y.hoverFilter))},directives:[_t,Ki,at,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Pg=function(){return[9]},im=function(d){return[d,40]};let Og=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:8,consts:[[3,"zoom","center","interactive"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Pg))("center",l.VKq(6,im,-74.5))("interactive",!1))},directives:[_t,Ki],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const ov=function(){return[2.9]},kg=function(){return[16.05,48]};let Rg=(()=>{class d{changeLangTo(a){this.map.setLayoutProperty("country_1","text-field","{name:"+a+"}"),this.map.setLayoutProperty("country_2","text-field","{name:"+a+"}"),this.map.setLayoutProperty("country_3","text-field","{name:"+a+"}")}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:10,vars:6,consts:[[3,"zoom","center","mapLoad"],["mat-raised-button","",1,"lang-button",3,"click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(pe){return y.map=pe}),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",1),l.NdJ("click",function(){return y.changeLangTo("fr")}),l._uU(3," French "),l.qZA(),l.TgZ(4,"button",1),l.NdJ("click",function(){return y.changeLangTo("ru")}),l._uU(5," Russian "),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return y.changeLangTo("de")}),l._uU(7," German "),l.qZA(),l.TgZ(8,"button",1),l.NdJ("click",function(){return y.changeLangTo("es")}),l._uU(9," Spanish "),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,ov))("center",l.DdM(5,kg)))},directives:[_t,Ki,Ht,xs.lW],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function Fg(d,C){if(1&d&&l._UZ(0,"mgl-geojson-source",3),2&d){const a=l.oxw();l.Q6J("data",a.data)}}const rm=function(){return{"line-color":"yellow","line-opacity":.75,"line-width":5}};function Lg(d,C){1&d&&l._UZ(0,"mgl-layer",4),2&d&&l.Q6J("paint",l.DdM(1,rm))}let Ng=(()=>{class d{constructor(){this.zoom=[0]}ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const a=yield V.e(330).then(V.t.bind(V,3330,19)),y=a.features[0].geometry.coordinates;a.features[0].geometry.coordinates=[y[0]],this.data=a,this.center=y[0],this.zoom=[14],this.pitch=30;let Z=0;this.timer=window.setInterval(()=>{Z<y.length?(this.center=y[Z],a.features[0].geometry.coordinates.push(y[Z]),this.data=Object.assign({},this.data),Z++):window.clearInterval(this.timer)},10)})}ngOnDestroy(){window.clearInterval(this.timer)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:8,consts:[["movingMethod","jumpTo",3,"zoom","center","centerWithPanTo","pitch"],["id","trace",3,"data",4,"ngIf"],["id","trace","type","line","source","trace",3,"paint",4,"ngIf"],["id","trace",3,"data"],["id","trace","type","line","source","trace",3,"paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Fg,1,1,"mgl-geojson-source",1),l.YNc(2,Lg,1,2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",y.zoom)("center",y.center)("centerWithPanTo",!0)("pitch",y.pitch),l.xp6(1),l.Q6J("ngIf",y.data),l.xp6(1),l.Q6J("ngIf",y.data))},directives:[_t,Ki,Oe.O5,at,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();var Bg=V(4986),zg=V(5963);const Ug=function(){return[14]},jg=function(){return{"raster-fade-duration":0}};let Hg=(()=>{class d{constructor(){this.size=.001,this.url="assets/red.png"}ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const y=(yield V.e(330).then(V.t.bind(V,3330,19))).features[0].geometry.coordinates,Z=y.map(Qe=>this.makeRectangle(Qe));this.center=y[0],this.coordinates=Z[0];let pe=0;this.sub=function Vg(d=0,C=Bg.z){return d<0&&(d=0),(0,zg.H)(d,d,C)}(250).subscribe(()=>{this.url=Math.random()<.5?"assets/red.png":"assets/blue.png",this.coordinates=Z[pe],pe=(pe+1)%Z.length})})}ngOnDestroy(){void 0!==this.sub&&this.sub.unsubscribe()}makeRectangle([a,y]){return[[a,y],[a+this.size,y],[a+this.size,y-this.size],[a,y-this.size]]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:9,consts:[["movingMethod","jumpTo",3,"center","zoom"],["id","test_source",3,"url","coordinates"],["id","test_layer","source","test_source","type","raster",3,"paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-image-source",1),l._UZ(2,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("center",y.center)("zoom",l.DdM(7,Ug)),l.xp6(1),l.Q6J("url",y.url)("coordinates",y.coordinates),l.xp6(1),l.Q6J("paint",l.DdM(8,jg)))},directives:[_t,Ki,ki,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const kb=function(){return{enableHighAccuracy:!0}};let sv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:5,consts:[["mglGeolocate","",3,"positionOptions","trackUserLocation"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.xp6(1),l.Q6J("positionOptions",l.DdM(4,kb))("trackUserLocation",!0))},directives:[_t,Ki,Ht,Bn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Gg=function(d){return[d]},$g=function(){return[17]},av=function(){return[4.577979,51.038189]},Ms=function(){return[4.577979,51.03816]};let Zg=(()=>{class d{constructor(){this.pitch=50,this.bearing=-97}ngOnInit(){let a=0;setInterval(()=>{a+=.01,1===a&&(a=0),this.pitch=45+15*Math.cos(a),this.bearing=20*Math.sin(a)-103},20)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:7,vars:15,consts:[["movingMethod","jumpTo",3,"interactive","pitch","bearing","zoom","center"],["rotationAlignment","map","pitchAlignment","map",3,"lngLat"],[1,"arrow"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 434 437"],["points","37.5 437.18 218 350.75 217.49 -0.37 37.5 437.18",2,"fill","#579120"],["points","397.55 437.13 218 350.75 217.49 -0.37 397.55 437.13",2,"fill","#6fad2d"],["points","217.22 391.46 397.55 437.13 218 350.75 37.5 437.18 217.22 391.46",2,"fill","#315112"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.TgZ(2,"div",2),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"polygon",4),l._UZ(5,"polygon",5),l._UZ(6,"polygon",6),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("interactive",!1)("pitch",l.VKq(8,Gg,y.pitch))("bearing",l.VKq(10,Gg,y.bearing))("zoom",l.DdM(12,$g))("center",l.DdM(13,av)),l.xp6(1),l.Q6J("lngLat",l.DdM(14,Ms)))},directives:[_t,Ki,Qn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".arrow[_ngcontent-%COMP%]{width:50px;height:50px;transform:rotate(-97deg)}"]}),d})();const lv=function(){return[9]},cv=function(d){return[d,40]};let qg=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:7,consts:[[3,"zoom","center"],["mglNavigation",""]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-control",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(4,lv))("center",l.VKq(5,cv,-74.5)))},directives:[_t,Ki,Ht,Jn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();var Wg=V(4107),wp=V(9776),Yg=V(9841),nd=V(7272),uv=V(8306),dv=V(5684);const Kg=new Set;let nu,Rb=(()=>{class d{constructor(a){this._platform=a,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sm}matchMedia(a){return(this._platform.WEBKIT||this._platform.BLINK)&&function om(d){if(!Kg.has(d))try{nu||(nu=document.createElement("style"),nu.setAttribute("type","text/css"),document.head.appendChild(nu)),nu.sheet&&(nu.sheet.insertRule(`@media ${d} {body{ }}`,0),Kg.add(d))}catch(C){console.error(C)}}(a),this._matchMedia(a)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(se.t4))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function sm(d){return{matches:"all"===d||""===d,media:d,addListener:()=>{},removeListener:()=>{}}}let fl=(()=>{class d{constructor(a,y){this._mediaMatcher=a,this._zone=y,this._queries=new Map,this._destroySubject=new Ze.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(a){return Jg((0,Hi.Eq)(a)).some(Z=>this._registerQuery(Z).mql.matches)}observe(a){const Z=Jg((0,Hi.Eq)(a)).map(Qe=>this._registerQuery(Qe).observable);let pe=(0,Yg.a)(Z);return pe=(0,nd.z)(pe.pipe((0,Bt.q)(1)),pe.pipe((0,dv.T)(1),(0,Qt.b)(0))),pe.pipe((0,At.U)(Qe=>{const Wt={matches:!1,breakpoints:{}};return Qe.forEach(({matches:Sn,query:ei})=>{Wt.matches=Wt.matches||Sn,Wt.breakpoints[ei]=Sn}),Wt}))}_registerQuery(a){if(this._queries.has(a))return this._queries.get(a);const y=this._mediaMatcher.matchMedia(a),pe={observable:new uv.y(Qe=>{const Wt=Sn=>this._zone.run(()=>Qe.next(Sn));return y.addListener(Wt),()=>{y.removeListener(Wt)}}).pipe((0,Ct.O)(y),(0,At.U)(({matches:Qe})=>({query:a,matches:Qe})),(0,nn.R)(this._destroySubject)),mql:y};return this._queries.set(a,pe),pe}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(Rb),l.LFG(l.R0b))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function Jg(d){return d.map(C=>C.split(",")).reduce((C,a)=>C.concat(a)).map(C=>C.trim())}var Ll=V(7429);const ml={tooltipState:(0,je.X$)("state",[(0,je.SB)("initial, void, hidden",(0,je.oB)({opacity:0,transform:"scale(0)"})),(0,je.SB)("visible",(0,je.oB)({transform:"scale(1)"})),(0,je.eR)("* => visible",(0,je.jt)("200ms cubic-bezier(0, 0, 0.2, 1)",(0,je.F4)([(0,je.oB)({opacity:0,transform:"scale(0)",offset:0}),(0,je.oB)({opacity:.5,transform:"scale(0.99)",offset:.5}),(0,je.oB)({opacity:1,transform:"scale(1)",offset:1})]))),(0,je.eR)("* => hidden",(0,je.jt)("100ms cubic-bezier(0, 0, 0.2, 1)",(0,je.oB)({opacity:0})))])},am="tooltip-panel",Xg=(0,se.i$)({passive:!0}),e_=new l.OlP("mat-tooltip-scroll-strategy"),_h={provide:e_,deps:[wp.aV],useFactory:function lm(d){return()=>d.scrollStrategies.reposition({scrollThrottle:20})}},mv=new l.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function t_(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let gv=(()=>{class d{constructor(a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi,ir,Xr){this._overlay=a,this._elementRef=y,this._scrollDispatcher=Z,this._viewContainerRef=pe,this._ngZone=Qe,this._platform=Wt,this._ariaDescriber=Sn,this._focusMonitor=ei,this._dir=oi,this._defaultOptions=ir,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Ze.x,this._scrollStrategy=bi,this._document=Xr,ir&&(ir.position&&(this.position=ir.position),ir.touchGestures&&(this.touchGestures=ir.touchGestures)),oi.change.pipe((0,nn.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(a){var y;a!==this._position&&(this._position=a,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(y=this._tooltipInstance)||void 0===y||y.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Hi.Ig)(a),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(a){this._showDelay=(0,Hi.su)(a)}get hideDelay(){return this._hideDelay}set hideDelay(a){this._hideDelay=(0,Hi.su)(a)}get message(){return this._message}set message(a){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=a?String(a).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(a){this._tooltipClass=a,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,nn.R)(this._destroyed)).subscribe(a=>{a?"keyboard"===a&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const a=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([y,Z])=>{a.removeEventListener(y,Z,Xg)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(a,this.message,"tooltip"),this._focusMonitor.stopMonitoring(a)}show(a=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const y=this._createOverlay();this._detach(),this._portal=this._portal||new Ll.C5(this._tooltipComponent,this._viewContainerRef),this._tooltipInstance=y.attach(this._portal).instance,this._tooltipInstance.afterHidden().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),this._tooltipInstance.show(a)}hide(a=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(a)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const a=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),y=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(a);return y.positionChanges.pipe((0,nn.R)(this._destroyed)).subscribe(Z=>{this._updateCurrentPositionClass(Z.connectionPair),this._tooltipInstance&&Z.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:y,panelClass:`${this._cssClassPrefix}-${am}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,nn.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,nn.R)(this._destroyed)).subscribe(()=>{var Z;return null===(Z=this._tooltipInstance)||void 0===Z?void 0:Z._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe((0,nn.R)(this._destroyed)).subscribe(Z=>{this._isTooltipVisible()&&Z.keyCode===Ce.hY&&!(0,Ce.Vb)(Z)&&(Z.preventDefault(),Z.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(a){const y=a.getConfig().positionStrategy,Z=this._getOrigin(),pe=this._getOverlayPosition();y.withPositions([this._addOffset(Object.assign(Object.assign({},Z.main),pe.main)),this._addOffset(Object.assign(Object.assign({},Z.fallback),pe.fallback))])}_addOffset(a){return a}_getOrigin(){const a=!this._dir||"ltr"==this._dir.value,y=this.position;let Z;"above"==y||"below"==y?Z={originX:"center",originY:"above"==y?"top":"bottom"}:"before"==y||"left"==y&&a||"right"==y&&!a?Z={originX:"start",originY:"center"}:("after"==y||"right"==y&&a||"left"==y&&!a)&&(Z={originX:"end",originY:"center"});const{x:pe,y:Qe}=this._invertPosition(Z.originX,Z.originY);return{main:Z,fallback:{originX:pe,originY:Qe}}}_getOverlayPosition(){const a=!this._dir||"ltr"==this._dir.value,y=this.position;let Z;"above"==y?Z={overlayX:"center",overlayY:"bottom"}:"below"==y?Z={overlayX:"center",overlayY:"top"}:"before"==y||"left"==y&&a||"right"==y&&!a?Z={overlayX:"end",overlayY:"center"}:("after"==y||"right"==y&&a||"left"==y&&!a)&&(Z={overlayX:"start",overlayY:"center"});const{x:pe,y:Qe}=this._invertPosition(Z.overlayX,Z.overlayY);return{main:Z,fallback:{overlayX:pe,overlayY:Qe}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Bt.q)(1),(0,nn.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(a){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=a,this._tooltipInstance._markForCheck())}_invertPosition(a,y){return"above"===this.position||"below"===this.position?"top"===y?y="bottom":"bottom"===y&&(y="top"):"end"===a?a="start":"start"===a&&(a="end"),{x:a,y}}_updateCurrentPositionClass(a){const{overlayY:y,originX:Z,originY:pe}=a;let Qe;if(Qe="center"===y?this._dir&&"rtl"===this._dir.value?"end"===Z?"left":"right":"start"===Z?"left":"right":"bottom"===y&&"top"===pe?"above":"below",Qe!==this._currentPosition){const Wt=this._overlayRef;if(Wt){const Sn=`${this._cssClassPrefix}-${am}-`;Wt.removePanelClass(Sn+this._currentPosition),Wt.addPanelClass(Sn+Qe)}this._currentPosition=Qe}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const a=[];if(this._platformSupportsMouseEvents())a.push(["mouseleave",()=>this.hide()],["wheel",y=>this._wheelListener(y)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const y=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};a.push(["touchend",y],["touchcancel",y])}this._addListeners(a),this._passiveListeners.push(...a)}_addListeners(a){a.forEach(([y,Z])=>{this._elementRef.nativeElement.addEventListener(y,Z,Xg)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(a){if(this._isTooltipVisible()){const y=this._document.elementFromPoint(a.clientX,a.clientY),Z=this._elementRef.nativeElement;y!==Z&&!Z.contains(y)&&this.hide()}}_disableNativeGesturesIfNecessary(){const a=this.touchGestures;if("off"!==a){const y=this._elementRef.nativeElement,Z=y.style;("on"===a||"INPUT"!==y.nodeName&&"TEXTAREA"!==y.nodeName)&&(Z.userSelect=Z.msUserSelect=Z.webkitUserSelect=Z.MozUserSelect="none"),("on"===a||!y.draggable)&&(Z.webkitUserDrag="none"),Z.touchAction="none",Z.webkitTapHighlightColor="transparent"}}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),d})(),n_=(()=>{class d extends gv{constructor(a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi,ir,Xr){super(a,y,Z,pe,Qe,Wt,Sn,ei,bi,oi,ir,Xr),this._tooltipComponent=Cp}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(wp.aV),l.Y36(l.SBq),l.Y36(me.mF),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(se.t4),l.Y36(La.$s),l.Y36(La.tE),l.Y36(e_),l.Y36(et.Is,8),l.Y36(mv,8),l.Y36(Oe.K0))},d.\u0275dir=l.lG2({type:d,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[l.qOj]}),d})(),i_=(()=>{class d{constructor(a){this._changeDetectorRef=a,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new Ze.x}show(a){clearTimeout(this._hideTimeoutId),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=void 0,this._onShow(),this._markForCheck()},a)}hide(a){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=void 0,this._markForCheck()},a)}afterHidden(){return this._onHide}isVisible(){return"visible"===this._visibility}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(a){const y=a.toState;"hidden"===y&&!this.isVisible()&&this._onHide.next(),("visible"===y||"hidden"===y)&&(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_onShow(){}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO))},d.\u0275dir=l.lG2({type:d}),d})(),Cp=(()=>{class d extends i_{constructor(a,y){super(a),this._breakpointObserver=y,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)")}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO),l.Y36(fl))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-tooltip-component"]],hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(a,y){2&a&&l.Udp("zoom","visible"===y._visibility?1:null)},features:[l.qOj],decls:3,vars:7,consts:[[1,"mat-tooltip",3,"ngClass"]],template:function(a,y){if(1&a&&(l.TgZ(0,"div",0),l.NdJ("@state.start",function(){return y._animationStart()})("@state.done",function(pe){return y._animationDone(pe)}),l.ALo(1,"async"),l._uU(2),l.qZA()),2&a){let Z;l.ekj("mat-tooltip-handset",null==(Z=l.lcZ(1,5,y._isHandset))?null:Z.matches),l.Q6J("ngClass",y.tooltipClass)("@state",y._visibility),l.xp6(2),l.Oqu(y.message)}},directives:[Oe.mk],pipes:[Oe.Ov],styles:[".mat-tooltip-panel{pointer-events:none !important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}\n"],encapsulation:2,data:{animation:[ml.tooltipState]},changeDetection:0}),d})(),_v=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[_h],imports:[[La.rt,Oe.ez,wp.U8,Pi.BQ],Pi.BQ,me.ZD]}),d})();function r_(d,C){if(1&d&&(l.TgZ(0,"mat-option",19),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.Q6J("value",a),l.xp6(1),l.hij(" ",a," ")}}function o_(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"mat-form-field",16),l.TgZ(1,"mat-select",17),l.NdJ("selectionChange",function(Z){return l.CHM(a),l.oxw(2)._changePageSize(Z.value)}),l.YNc(2,r_,2,2,"mat-option",18),l.qZA(),l.qZA()}if(2&d){const a=l.oxw(2);l.Q6J("appearance",a._formFieldAppearance)("color",a.color),l.xp6(1),l.Q6J("value",a.pageSize)("disabled",a.disabled)("aria-label",a._intl.itemsPerPageLabel),l.xp6(1),l.Q6J("ngForOf",a._displayedPageSizeOptions)}}function cm(d,C){if(1&d&&(l.TgZ(0,"div",20),l._uU(1),l.qZA()),2&d){const a=l.oxw(2);l.xp6(1),l.Oqu(a.pageSize)}}function Ep(d,C){if(1&d&&(l.TgZ(0,"div",12),l.TgZ(1,"div",13),l._uU(2),l.qZA(),l.YNc(3,o_,3,6,"mat-form-field",14),l.YNc(4,cm,2,1,"div",15),l.qZA()),2&d){const a=l.oxw();l.xp6(2),l.hij(" ",a._intl.itemsPerPageLabel," "),l.xp6(1),l.Q6J("ngIf",a._displayedPageSizeOptions.length>1),l.xp6(1),l.Q6J("ngIf",a._displayedPageSizeOptions.length<=1)}}function s_(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"button",21),l.NdJ("click",function(){return l.CHM(a),l.oxw().firstPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",22),l.qZA(),l.qZA()}if(2&d){const a=l.oxw();l.Q6J("matTooltip",a._intl.firstPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),l.uIk("aria-label",a._intl.firstPageLabel)}}function a_(d,C){if(1&d){const a=l.EpF();l.O4$(),l.kcU(),l.TgZ(0,"button",23),l.NdJ("click",function(){return l.CHM(a),l.oxw().lastPage()}),l.O4$(),l.TgZ(1,"svg",7),l._UZ(2,"path",24),l.qZA(),l.qZA()}if(2&d){const a=l.oxw();l.Q6J("matTooltip",a._intl.lastPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),l.uIk("aria-label",a._intl.lastPageLabel)}}let yh=(()=>{class d{constructor(){this.changes=new Ze.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(a,y,Z)=>{if(0==Z||0==y)return`0 of ${Z}`;const pe=a*y;return`${pe+1} \u2013 ${pe<(Z=Math.max(Z,0))?Math.min(pe+y,Z):pe+y} of ${Z}`}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();const c_={provide:yh,deps:[[new l.FiY,new l.tp0,yh]],useFactory:function l_(d){return d||new yh}},d_=new l.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),h_=(0,Pi.Id)((0,Pi.dB)(class{}));let vv=(()=>{class d extends h_{constructor(a,y,Z){if(super(),this._intl=a,this._changeDetectorRef=y,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new l.vpe,this._intlChanges=a.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),Z){const{pageSize:pe,pageSizeOptions:Qe,hidePageSize:Wt,showFirstLastButtons:Sn}=Z;null!=pe&&(this._pageSize=pe),null!=Qe&&(this._pageSizeOptions=Qe),null!=Wt&&(this._hidePageSize=Wt),null!=Sn&&(this._showFirstLastButtons=Sn)}}get pageIndex(){return this._pageIndex}set pageIndex(a){this._pageIndex=Math.max((0,Hi.su)(a),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(a){this._length=(0,Hi.su)(a),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(a){this._pageSize=Math.max((0,Hi.su)(a),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(a){this._pageSizeOptions=(a||[]).map(y=>(0,Hi.su)(y)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(a){this._hidePageSize=(0,Hi.Ig)(a)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(a){this._showFirstLastButtons=(0,Hi.Ig)(a)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(a)}previousPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(a)}firstPage(){if(!this.hasPreviousPage())return;const a=this.pageIndex;this.pageIndex=0,this._emitPageEvent(a)}lastPage(){if(!this.hasNextPage())return;const a=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(a)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const a=this.getNumberOfPages()-1;return this.pageIndex<a&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(a){const Z=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/a)||0,this.pageSize=a,this._emitPageEvent(Z)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((a,y)=>a-y),this._changeDetectorRef.markForCheck())}_emitPageEvent(a){this.page.emit({previousPageIndex:a,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[l.qOj]}),d})(),p_=(()=>{class d extends vv{constructor(a,y,Z){super(a,y,Z),Z&&null!=Z.formFieldAppearance&&(this._formFieldAppearance=Z.formFieldAppearance)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(yh),l.Y36(l.sBO),l.Y36(d_,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[l.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(a,y){1&a&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.YNc(2,Ep,5,3,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l._uU(5),l.qZA(),l.YNc(6,s_,3,5,"button",5),l.TgZ(7,"button",6),l.NdJ("click",function(){return y.previousPage()}),l.O4$(),l.TgZ(8,"svg",7),l._UZ(9,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(10,"button",9),l.NdJ("click",function(){return y.nextPage()}),l.O4$(),l.TgZ(11,"svg",7),l._UZ(12,"path",10),l.qZA(),l.qZA(),l.YNc(13,a_,3,5,"button",11),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.xp6(2),l.Q6J("ngIf",!y.hidePageSize),l.xp6(3),l.hij(" ",y._intl.getRangeLabel(y.pageIndex,y.pageSize,y.length)," "),l.xp6(1),l.Q6J("ngIf",y.showFirstLastButtons),l.xp6(1),l.Q6J("matTooltip",y._intl.previousPageLabel)("matTooltipDisabled",y._previousButtonsDisabled())("matTooltipPosition","above")("disabled",y._previousButtonsDisabled()),l.uIk("aria-label",y._intl.previousPageLabel),l.xp6(3),l.Q6J("matTooltip",y._intl.nextPageLabel)("matTooltipDisabled",y._nextButtonsDisabled())("matTooltipPosition","above")("disabled",y._nextButtonsDisabled()),l.uIk("aria-label",y._intl.nextPageLabel),l.xp6(3),l.Q6J("ngIf",y.showFirstLastButtons))},directives:[Gr.KE,Wg.gD,Pi.ey,xs.lW,Oe.O5,Oe.sg,n_],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),d})(),bv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[c_],imports:[[Oe.ez,xs.ot,Wg.LD,_v,Pi.BQ]]}),d})();function xv(d,C){if(1&d&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.Q6J("title",a.properties["Secondary ID"]),l.xp6(1),l.hij(" ",a.properties["Primary ID"]," ")}}function wv(d,C){if(1&d){const a=l.EpF();l.TgZ(0,"div",9),l.NdJ("click",function(Z){const Qe=l.CHM(a).$implicit;return l.oxw(2).selectCluster(Z,Qe)}),l._uU(1),l.qZA()}if(2&d){const a=C.$implicit;l.xp6(1),l.hij(" ",null==a.properties?null:a.properties.point_count," ")}}function Cv(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",10),l._UZ(1,"showcase-cluster-popup",11),l.qZA()),2&d){l.oxw();const a=l.MAs(2),y=l.oxw();l.Q6J("feature",y.selectedCluster),l.xp6(1),l.Q6J("clusterComponent",a)("selectedCluster",y.selectedCluster)}}function Ev(d,C){if(1&d&&(l.ynx(0),l._UZ(1,"mgl-geojson-source",2,3),l.TgZ(3,"mgl-markers-for-clusters",4),l.YNc(4,xv,2,2,"ng-template",5),l.YNc(5,wv,2,1,"ng-template",6),l.qZA(),l.YNc(6,Cv,2,3,"mgl-popup",7),l.BQk()),2&d){const a=l.oxw();l.xp6(1),l.Q6J("data",a.earthquakes)("cluster",!0)("clusterRadius",50)("clusterMaxZoom",14),l.xp6(5),l.Q6J("ngIf",a.selectedCluster)}}const Dv=function(){return[3]},Mv=function(d){return[d,40.66995747013945]};function Sv(d,C){if(1&d&&(l.TgZ(0,"mat-list-item"),l._uU(1),l.qZA()),2&d){const a=C.$implicit;l.xp6(1),l.hij(" ",a.properties["Primary ID"]," ")}}let Tv=(()=>{class d{ngOnInit(){return(0,he.mG)(this,void 0,void 0,function*(){const a=yield V.e(45).then(V.t.bind(V,3045,19));setInterval(()=>{a.features.length&&a.features.pop(),this.earthquakes=Object.assign({},a)},500)})}selectCluster(a,y){a.stopPropagation(),this.selectedCluster={geometry:y.geometry,properties:y.properties}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:8,consts:[[3,"zoom","center"],[4,"ngIf"],["id","earthquakes",3,"data","cluster","clusterRadius","clusterMaxZoom"],["clusterComponent",""],["source","earthquakes"],["mglPoint",""],["mglClusterPoint",""],[3,"feature",4,"ngIf"],[1,"marker",3,"title"],[1,"marker-cluster",3,"click"],[3,"feature"],[3,"clusterComponent","selectedCluster"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.YNc(1,Ev,7,5,"ng-container",1),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(5,Dv))("center",l.VKq(6,Mv,-103.59179687498357)),l.xp6(1),l.Q6J("ngIf",y.earthquakes))},directives:function(){return[_t,Ki,Oe.O5,at,nt,N,ie,ln,Av]},styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker-cluster{width:30px;height:30px;border-radius:50%;background-color:#4f615a;display:flex;justify-content:center;align-items:center;color:#fff;border:2px solid #56c498;cursor:pointer}.marker[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#7d7d7d;display:flex;justify-content:center;align-items:center;border:2px solid #c9c9c9}"]}),d})(),Av=(()=>{class d{ngOnChanges(a){this.changePage(),a.selectedCluster&&!a.selectedCluster.isFirstChange()&&this.paginator.firstPage()}changePage(a){return(0,he.mG)(this,void 0,void 0,function*(){let y=0;a&&(y=5*a.pageIndex),this.leaves=yield this.clusterComponent.getClusterLeaves(this.selectedCluster.properties.cluster_id,5,y)})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-cluster-popup"]],viewQuery:function(a,y){if(1&a&&l.Gf(p_,7),2&a){let Z;l.iGM(Z=l.CRH())&&(y.paginator=Z.first)}},inputs:{selectedCluster:"selectedCluster",clusterComponent:"clusterComponent"},features:[l.TTD],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"length","pageSize","page"]],template:function(a,y){1&a&&(l.TgZ(0,"mat-list"),l.YNc(1,Sv,2,1,"mat-list-item",0),l.qZA(),l.TgZ(2,"mat-paginator",1),l.NdJ("page",function(pe){return y.changePage(pe)}),l.qZA()),2&a&&(l.xp6(1),l.Q6J("ngForOf",y.leaves),l.xp6(1),l.Q6J("length",null==y.selectedCluster.properties?null:y.selectedCluster.properties.point_count)("pageSize",5))},directives:[sh,Oe.sg,mp,p_],encapsulation:2}),d})(),Iv=(()=>{class d{alert(a){alert(a)}onGeolocate(a){console.log("geolocate",a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:9,vars:2,consts:[["mat-fab","","color","primary",1,"custom-control",3,"click"],["mglAttribution","","position","top-right"],["mglFullscreen","","position","top-right"],["mglGeolocate","","position","top-right",3,"geolocate"],["mglNavigation","","position","top-right"],["mglScale","","position","top-right"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",0),l.NdJ("click",function(){return y.alert("Hello")}),l._uU(3," Hello "),l.qZA(),l.qZA(),l._UZ(4,"mgl-control",1),l._UZ(5,"mgl-control",2),l.TgZ(6,"mgl-control",3),l.NdJ("geolocate",function(pe){return y.onGeolocate(pe)}),l.qZA(),l._UZ(7,"mgl-control",4),l._UZ(8,"mgl-control",5),l.qZA()),2&a&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},directives:[_t,Ki,Ht,xs.lW,Bi,gn,Bn,Jn,Xi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Pv=function(){return[5]},Dp=function(d,C){return[d,C]};let Ov=(()=>{class d{alert(a){alert(a)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:7,vars:20,consts:[[3,"zoom","center"],[3,"lngLat"],[1,"marker",2,"background-image","url(https://placekitten.com/g/60/60/)","width","60px","height","60px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/50/50/)","width","50px","height","50px",3,"click"],[1,"marker",2,"background-image","url(https://placekitten.com/g/40/40/)","width","40px","height","40px",3,"click"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return y.alert("Foo")}),l.qZA(),l.qZA(),l.TgZ(3,"mgl-marker",1),l.TgZ(4,"div",3),l.NdJ("click",function(){return y.alert("Bar")}),l.qZA(),l.qZA(),l.TgZ(5,"mgl-marker",1),l.TgZ(6,"div",4),l.NdJ("click",function(){return y.alert("Baz")}),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Pv))("center",l.WLB(8,Dp,-65.017,-16.457)),l.xp6(1),l.Q6J("lngLat",l.WLB(11,Dp,-66.324462890625,-16.024695711685304)),l.xp6(2),l.Q6J("lngLat",l.WLB(14,Dp,-61.2158203125,-15.97189158092897)),l.xp6(2),l.Q6J("lngLat",l.WLB(17,Dp,-63.29223632812499,-18.28151823530889)))},directives:[_t,Ki,Qn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".marker[_ngcontent-%COMP%]{border:none;border-radius:50%;cursor:pointer;padding:0}"]}),d})();const kv=function(){return[2]},um=function(){return[0,0]},f_=function(d){return{type:"Point",coordinates:d}};let m_=(()=>{class d{constructor(){this.layerPaint={"circle-radius":10,"circle-color":"#3887be"},this.coordinates=[0,0]}onDragStart(a){console.log("onDragStart",a)}onDragEnd(a){console.log("onDragEnd",a)}onDrag(a){console.log("onDrag",a),this.coordinates=a.lngLat.toArray()}changeColor(a){this.layerPaint=Object.assign(Object.assign({},this.layerPaint),{"circle-color":a})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:11,vars:14,consts:[[3,"zoom","center"],["id","point"],[3,"properties","geometry","mglDraggable","featureDragStart","featureDragEnd","featureDrag"],["id","point","type","circle","source","point",3,"paint","layerMouseEnter","layerMouseLeave"],["targetLayer",""],["position","bottom-left"]],template:function(a,y){if(1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-feature",2),l.NdJ("featureDragStart",function(pe){return y.onDragStart(pe)})("featureDragEnd",function(pe){return y.onDragEnd(pe)})("featureDrag",function(pe){return y.onDrag(pe)}),l.qZA(),l.qZA(),l.TgZ(3,"mgl-layer",3,4),l.NdJ("layerMouseEnter",function(){return y.changeColor("#3bb2d0")})("layerMouseLeave",function(){return y.changeColor("#3887be")}),l.qZA(),l.TgZ(5,"mgl-control",5),l.TgZ(6,"mat-card"),l.TgZ(7,"div"),l._uU(8),l.qZA(),l.TgZ(9,"div"),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&a){const Z=l.MAs(4);l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(9,kv))("center",l.DdM(10,um)),l.xp6(2),l.Q6J("geometry",l.VKq(12,f_,l.DdM(11,um)))("mglDraggable",Z),l.xp6(1),l.Q6J("paint",y.layerPaint),l.xp6(5),l.hij("Longitude:\xa0",y.coordinates[0],""),l.xp6(2),l.hij("Latitude:\xa0",y.coordinates[1],"")}},directives:[_t,Ki,at,mt,lt,yn,Ht,Uy],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const g_=function(){return[15]},__=function(d){return[d,37.830348]},y_=function(){return{"line-join":"round","line-cap":"round"}},v_=function(){return{"line-color":"#888","line-width":8}};let b_=(()=>{class d{constructor(){this.geometry={type:"LineString",coordinates:[[-122.48369693756104,37.83381888486939],[-122.48348236083984,37.83317489144141],[-122.48339653015138,37.83270036637107],[-122.48356819152832,37.832056363179625],[-122.48404026031496,37.83114119107971],[-122.48404026031496,37.83049717427869],[-122.48348236083984,37.829920943955045],[-122.48356819152832,37.82954808664175],[-122.48507022857666,37.82944639795659],[-122.48610019683838,37.82880236636284],[-122.48695850372314,37.82931081282506],[-122.48700141906738,37.83080223556934],[-122.48751640319824,37.83168351665737],[-122.48803138732912,37.832158048267786],[-122.48888969421387,37.83297152392784],[-122.48987674713133,37.83263257682617],[-122.49043464660643,37.832937629287755],[-122.49125003814696,37.832429207817725],[-122.49163627624512,37.832564787218985],[-122.49223709106445,37.83337825839438],[-122.49378204345702,37.83368330777276]]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],["id","oneline"],[3,"geometry"],["id","route","type","line","source","oneline",3,"layout","paint"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-geojson-source",1),l._UZ(2,"mgl-feature",2),l.qZA(),l._UZ(3,"mgl-layer",3),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,g_))("center",l.VKq(8,__,-122.486052)),l.xp6(2),l.Q6J("geometry",y.geometry),l.xp6(1),l.Q6J("layout",l.DdM(10,y_))("paint",l.DdM(11,v_)))},directives:[_t,Ki,at,mt,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),x_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:2,vars:2,consts:[["mglScale","","unit","imperial","position","top-right"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map"),l._UZ(1,"mgl-control",0),l.qZA()),2&a&&l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL")},directives:[_t,Ki,Ht,Xi],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function dm(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",3),l._UZ(1,"span",4),l.qZA()),2&d){const a=l.oxw();l.Q6J("lngLat",a.selectedLngLat),l.xp6(1),l.Q6J("innerHTML",null==a.selectedElement?null:a.selectedElement.name,l.oJD)}}const hm=function(){return[3]},iu=function(d){return[d,38.907]},Fv=function(){return{type:"geojson",data:"https://d2ad6b4ur7yvpq.cloudfront.net/naturalearth-3.3.0/ne_110m_admin_1_states_provinces_shp.geojson"}},id=function(){return{"fill-color":"rgba(200, 100, 240, 0.4)","fill-outline-color":"rgba(200, 100, 240, 1)"}};let Lb=(()=>{class d{onClick(a){this.selectedLngLat=a.lngLat,this.selectedElement=a.features[0].properties}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:3,vars:13,consts:[[3,"zoom","center","cursorStyle"],["id","states-layer","type","fill",3,"source","paint","layerMouseEnter","layerMouseLeave","layerClick"],[3,"lngLat",4,"ngIf"],[3,"lngLat"],[3,"innerHTML"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-layer",1),l.NdJ("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""})("layerClick",function(pe){return y.onClick(pe)}),l.qZA(),l.YNc(2,dm,2,2,"mgl-popup",2),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,hm))("center",l.VKq(9,iu,-100.04))("cursorStyle",y.cursorStyle),l.xp6(1),l.Q6J("source",l.DdM(11,Fv))("paint",l.DdM(12,id)),l.xp6(1),l.Q6J("ngIf",y.selectedLngLat))},directives:[_t,Ki,yn,Oe.O5,ln],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();function pm(d,C){if(1&d&&(l.TgZ(0,"mgl-popup",4),l._UZ(1,"span",5),l.qZA()),2&d){const a=l.oxw();l.Q6J("feature",a.selectedPoint),l.xp6(1),l.Q6J("innerHTML",null==a.selectedPoint.properties?null:a.selectedPoint.properties.description,l.oJD)}}const Nb=function(){return[11.15]},w_=function(d){return[d,38.907]},C_=function(){return["get","icon"]},Bb=function(d){return{"icon-image":d,"icon-allow-overlap":!0}};let ji=(()=>{class d{constructor(){this.points={type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<strong>Make it Mount Pleasant</strong><p><a href="http://www.mtpleasantdc.com/makeitmtpleasant" target="_blank" title="Opens in a new window">Make it Mount Pleasant</a> is a handmade and vintage market and afternoon of live entertainment and kids activities. 12:00-6:00 p.m.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.038659,38.931567]}},{type:"Feature",properties:{description:'<strong>Mad Men Season Five Finale Watch Party</strong><p>Head to Lounge 201 (201 Massachusetts Avenue NE) Sunday for a <a href="http://madmens5finale.eventbrite.com/" target="_blank" title="Opens in a new window">Mad Men Season Five Finale Watch Party</a>, complete with 60s costume contest, Mad Men trivia, and retro food and drink. 8:00-11:00 p.m. $10 general admission, $20 admission and two hour open bar.</p>',icon:"theatre_15"},geometry:{type:"Point",coordinates:[-77.003168,38.894651]}},{type:"Feature",properties:{description:'<strong>Big Backyard Beach Bash and Wine Fest</strong><p>EatBar (2761 Washington Boulevard Arlington VA) is throwing a <a href="http://tallulaeatbar.ticketleap.com/2012beachblanket/" target="_blank" title="Opens in a new window">Big Backyard Beach Bash and Wine Fest</a> on Saturday, serving up conch fritters, fish tacos and crab sliders, and Red Apron hot dogs. 12:00-3:00 p.m. $25.grill hot dogs.</p>',icon:"bar_15"},geometry:{type:"Point",coordinates:[-77.090372,38.881189]}},{type:"Feature",properties:{description:'<strong>Ballston Arts & Crafts Market</strong><p>The <a href="http://ballstonarts-craftsmarket.blogspot.com/" target="_blank" title="Opens in a new window">Ballston Arts & Crafts Market</a> sets up shop next to the Ballston metro this Saturday for the first of five dates this summer. Nearly 35 artists and crafters will be on hand selling their wares. 10:00-4:00 p.m.</p>',icon:"art_gallery_15"},geometry:{type:"Point",coordinates:[-77.111561,38.882342]}},{type:"Feature",properties:{description:'<strong>Seersucker Bike Ride and Social</strong><p>Feeling dandy? Get fancy, grab your bike, and take part in this year\'s <a href="http://dandiesandquaintrelles.com/2012/04/the-seersucker-social-is-set-for-june-9th-save-the-date-and-start-planning-your-look/" target="_blank" title="Opens in a new window">Seersucker Social</a> bike ride from Dandies and Quaintrelles. After the ride enjoy a lawn party at Hillwood with jazz, cocktails, paper hat-making, and more. 11:00-7:00 p.m.</p>',icon:"bicycle_15"},geometry:{type:"Point",coordinates:[-77.052477,38.943951]}},{type:"Feature",properties:{description:'<strong>Capital Pride Parade</strong><p>The annual <a href="http://www.capitalpride.org/parade" target="_blank" title="Opens in a new window">Capital Pride Parade</a> makes its way through Dupont this Saturday. 4:30 p.m. Free.</p>',icon:"star_15"},geometry:{type:"Point",coordinates:[-77.043444,38.909664]}},{type:"Feature",properties:{description:'<strong>Muhsinah</strong><p>Jazz-influenced hip hop artist <a href="http://www.muhsinah.com" target="_blank" title="Opens in a new window">Muhsinah</a> plays the <a href="http://www.blackcatdc.com">Black Cat</a> (1811 14th Street NW) tonight with <a href="http://www.exitclov.com" target="_blank" title="Opens in a new window">Exit Clov</a> and <a href="http://godsilla.bandcamp.com" target="_blank" title="Opens in a new window">Gods\u2019illa</a>. 9:00 p.m. $12.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.031706,38.914581]}},{type:"Feature",properties:{description:'<strong>A Little Night Music</strong><p>The Arlington Players\' production of Stephen Sondheim\'s  <a href="http://www.thearlingtonplayers.org/drupal-6.20/node/4661/show" target="_blank" title="Opens in a new window"><em>A Little Night Music</em></a> comes to the Kogod Cradle at The Mead Center for American Theater (1101 6th Street SW) this weekend and next. 8:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.020945,38.878241]}},{type:"Feature",properties:{description:'<strong>Truckeroo</strong><p><a href="http://www.truckeroodc.com/www/" target="_blank">Truckeroo</a> brings dozens of food trucks, live music, and games to half and M Street SE (across from Navy Yard Metro Station) today from 11:00 a.m. to 11:00 p.m.</p>',icon:"music_15"},geometry:{type:"Point",coordinates:[-77.007481,38.876516]}}]}}onClick(a){this.selectedPoint=a.features[0]}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:14,consts:[[3,"zoom","center","cursorStyle"],["id","points",3,"data"],["id","points","source","points","type","symbol",3,"layout","layerClick","layerMouseEnter","layerMouseLeave"],[3,"feature",4,"ngIf"],[3,"feature"],[3,"innerHTML"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-geojson-source",1),l.TgZ(2,"mgl-layer",2),l.NdJ("layerClick",function(pe){return y.onClick(pe)})("layerMouseEnter",function(){return y.cursorStyle="pointer"})("layerMouseLeave",function(){return y.cursorStyle=""}),l.qZA(),l.YNc(3,pm,2,2,"mgl-popup",3),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(8,Nb))("center",l.VKq(9,w_,-77.04))("cursorStyle",y.cursorStyle),l.xp6(1),l.Q6J("data",y.points),l.xp6(1),l.Q6J("layout",l.VKq(12,Bb,l.DdM(11,C_))),l.xp6(1),l.Q6J("ngIf",y.selectedPoint))},directives:[_t,Ki,at,yn,Oe.O5,ln],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const Lv=function(){return[3]},E_=function(d){return[d,37.8]};let Nv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:4,vars:12,consts:[[3,"zoom","center"],[3,"lngLat","closeOnClick","className"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-popup",1),l.TgZ(2,"h1"),l._uU(3,"Hello world !"),l.qZA(),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(7,Lv))("center",l.VKq(8,E_,-96)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,E_,-96))("closeOnClick",!1)("className","custom-popup-class1 custom-popup-class2"))},directives:[_t,Ki,ln],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".custom-popup-class1{color:purple;text-align:center}  .custom-popup-class2{width:300px}"]}),d})();const Bv=function(){return{tileSize:512,type:"raster",url:"https://api.maptiler.com/tiles/satellite-v2/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}},Sp=function(d){return{satellite:d}},Tp=function(){return{visibility:"visible"}},Ho=function(){return{"raster-opacity":1}},zb=function(d,C){return{id:"satellite",layout:d,minzoom:0,paint:C,"raster-opacity":1,source:"satellite",type:"raster"}},D_=function(d){return[d]},zv=function(d,C){return{version:8,sources:d,layers:C}},Vv=function(){return[9]},M_=function(){return[137.9150899566626,36.25956997955441]};let S_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:1,vars:19,consts:[[3,"zoom","center"]],template:function(a,y){1&a&&l._UZ(0,"mgl-map",0),2&a&&(l.Akn(l.WLB(14,zv,l.VKq(5,Sp,l.DdM(4,Bv)),l.VKq(12,D_,l.WLB(9,zb,l.DdM(7,Tp),l.DdM(8,Ho))))),l.Q6J("zoom",l.DdM(17,Vv))("center",l.DdM(18,M_)))},directives:[_t,Ki],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const T_=function(){return[15]},fm=function(d){return[d,38.8895]},jv=function(){return{"background-image":"url(https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg)","background-size":"cover",width:"50px",height:"50px","border-radius":"50%",cursor:"pointer"}};let Hv=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:13,consts:[[3,"zoom","center"],[3,"lngLat"],["myMarker",""],[3,"ngStyle"],[3,"marker"]],template:function(a,y){if(1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-marker",1,2),l._UZ(3,"div",3),l.qZA(),l.TgZ(4,"mgl-popup",4),l._uU(5," Construction on the Washington Monument began in 1848. "),l.qZA(),l.qZA()),2&a){const Z=l.MAs(2);l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,T_))("center",l.VKq(8,fm,-77.0353)),l.xp6(1),l.Q6J("lngLat",l.VKq(10,fm,-77.0353)),l.xp6(2),l.Q6J("ngStyle",l.DdM(12,jv)),l.xp6(1),l.Q6J("marker",Z)}},directives:[_t,Ki,Qn,Oe.PC,ln],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})();const vh=["input"],Gv=function(d){return{enterDuration:d}},$v=["*"],Zv=new l.OlP("mat-radio-default-options",{providedIn:"root",factory:function Ap(){return{color:"accent"}}});let mm=0;const A_={provide:Jo.JU,useExisting:(0,l.Gpc)(()=>rd),multi:!0};class gm{constructor(C,a){this.source=C,this.value=a}}const I_=new l.OlP("MatRadioGroup");let bh=(()=>{class d{constructor(a){this._changeDetector=a,this._value=null,this._name="mat-radio-group-"+mm++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new l.vpe}get name(){return this._name}set name(a){this._name=a,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(a){this._labelPosition="before"===a?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(a){this._selected=a,this.value=a?a.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(a){this._disabled=(0,Hi.Ig)(a),this._markRadiosForCheck()}get required(){return this._required}set required(a){this._required=(0,Hi.Ig)(a),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(a=>{a.name=this.name,a._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(y=>{y.checked=this.value===y.value,y.checked&&(this._selected=y)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new gm(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(a=>a._markForCheck())}writeValue(a){this.value=a,this._changeDetector.markForCheck()}registerOnChange(a){this._controlValueAccessorChangeFn=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a,this._changeDetector.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.sBO))},d.\u0275dir=l.lG2({type:d,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),d})(),rd=(()=>{class d extends bh{}return d.\u0275fac=function(){let C;return function(y){return(C||(C=l.n5z(d)))(y||d)}}(),d.\u0275dir=l.lG2({type:d,selectors:[["mat-radio-group"]],contentQueries:function(a,y,Z){if(1&a&&l.Suo(Z,_m,5),2&a){let pe;l.iGM(pe=l.CRH())&&(y._radios=pe)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[l._Bn([A_,{provide:I_,useExisting:d}]),l.qOj]}),d})();class qv{constructor(C){this._elementRef=C}}const Wv=(0,Pi.Kr)((0,Pi.sb)(qv));let Yv=(()=>{class d extends Wv{constructor(a,y,Z,pe,Qe,Wt,Sn,ei){super(y),this._changeDetector=Z,this._focusMonitor=pe,this._radioDispatcher=Qe,this._providerOverride=Sn,this._uniqueId="mat-radio-"+ ++mm,this.id=this._uniqueId,this.change=new l.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=a,this._noopAnimations="NoopAnimations"===Wt,ei&&(this.tabIndex=(0,Hi.su)(ei,0)),this._removeUniqueSelectionListener=Qe.listen((bi,oi)=>{bi!==this.id&&oi===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(a){const y=(0,Hi.Ig)(a);this._checked!==y&&(this._checked=y,y&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!y&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),y&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(a){this._value!==a&&(this._value=a,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===a),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(a){this._labelPosition=a}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(a){this._setDisabled((0,Hi.Ig)(a))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(a){this._required=(0,Hi.Ig)(a)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(a){this._color=a}get inputId(){return`${this.id||this._uniqueId}-input`}focus(a,y){y?this._focusMonitor.focusVia(this._inputElement,y,a):this._inputElement.nativeElement.focus(a)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(a=>{!a&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new gm(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(a){a.stopPropagation()}_onInputInteraction(a){if(a.stopPropagation(),!this.checked&&!this.disabled){const y=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),y&&this.radioGroup._emitChangeEvent())}}_setDisabled(a){this._disabled!==a&&(this._disabled=a,this._changeDetector.markForCheck())}}return d.\u0275fac=function(a){l.$Z()},d.\u0275dir=l.lG2({type:d,viewQuery:function(a,y){if(1&a&&l.Gf(vh,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._inputElement=Z.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[l.qOj]}),d})(),_m=(()=>{class d extends Yv{constructor(a,y,Z,pe,Qe,Wt,Sn,ei){super(a,y,Z,pe,Qe,Wt,Sn,ei)}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(I_,8),l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(La.tE),l.Y36(Fo.A8),l.Y36(Ke.Qb,8),l.Y36(Zv,8),l.$8M("tabindex"))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y._inputElement.nativeElement.focus()}),2&a&&(l.uIk("tabindex",null)("id",y.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),l.ekj("mat-radio-checked",y.checked)("mat-radio-disabled",y.disabled)("_mat-animation-noopable",y._noopAnimations)("mat-primary","primary"===y.color)("mat-accent","accent"===y.color)("mat-warn","warn"===y.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[l.qOj],ngContentSelectors:$v,decls:13,vars:20,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input","cdk-visually-hidden",3,"id","checked","disabled","tabIndex","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"label",0,1),l.TgZ(2,"span",2),l._UZ(3,"span",3),l._UZ(4,"span",4),l.TgZ(5,"input",5,6),l.NdJ("change",function(pe){return y._onInputInteraction(pe)})("click",function(pe){return y._onInputClick(pe)}),l.qZA(),l.TgZ(7,"span",7),l._UZ(8,"span",8),l.qZA(),l.qZA(),l.TgZ(9,"span",9),l.TgZ(10,"span",10),l._uU(11,"\xa0"),l.qZA(),l.Hsn(12),l.qZA(),l.qZA()),2&a){const Z=l.MAs(1);l.uIk("for",y.inputId),l.xp6(5),l.Q6J("id",y.inputId)("checked",y.checked)("disabled",y.disabled)("tabIndex",y.tabIndex)("required",y.required),l.uIk("name",y.name)("value",y.value)("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby)("aria-describedby",y.ariaDescribedby),l.xp6(2),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",l.VKq(18,Gv,y._noopAnimations?0:150)),l.xp6(2),l.ekj("mat-radio-label-before","before"==y.labelPosition)}},directives:[Pi.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),d})(),P_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.si,Pi.BQ],Pi.BQ]}),d})();const O_=function(){return[13]},Kv=function(){return[4.899,52.372]};let k_=(()=>{class d{constructor(){this.layerId="basic"}ngOnInit(){this.changeStyle(this.layerId)}changeStyle(a){this.style="streets"===a?"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL":{version:8,sources:{raster:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],minzoom:0,maxzoom:15,scheme:"xyz",tileSize:256}},layers:[{id:"some-raster-layer-id",type:"raster",source:"raster",layout:{visibility:"visible"},paint:{"raster-opacity":1}}]}}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:6,vars:7,consts:[[3,"zoom","center"],[3,"ngModel","ngModelChange"],["value","streets"],["value","code"]],template:function(a,y){1&a&&(l._UZ(0,"mgl-map",0),l.TgZ(1,"mat-radio-group",1),l.NdJ("ngModelChange",function(pe){return y.changeStyle(pe)}),l.TgZ(2,"mat-radio-button",2),l._uU(3,"streets"),l.qZA(),l.TgZ(4,"mat-radio-button",3),l._uU(5,"from code"),l.qZA(),l.qZA()),2&a&&(l.Akn(y.style),l.Q6J("zoom",l.DdM(5,O_))("center",l.DdM(6,Kv)),l.xp6(1),l.Q6J("ngModel",y.layerId))},directives:[_t,Ki,rd,Jo.JJ,Jo.On,_m],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}","mat-radio-group[_ngcontent-%COMP%]{position:absolute;padding:8px;background:#fff}"]}),d})();const Jv=["button"],Qv=["*"],Xv=new l.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),e0=new l.OlP("MatButtonToggleGroup");let t0=0;class ym{constructor(C,a){this.source=C,this.value=a}}const n0=(0,Pi.Kr)(class{});let R_=(()=>{class d extends n0{constructor(a,y,Z,pe,Qe,Wt){super(),this._changeDetectorRef=y,this._elementRef=Z,this._focusMonitor=pe,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new l.vpe;const Sn=Number(Qe);this.tabIndex=Sn||0===Sn?Sn:null,this.buttonToggleGroup=a,this.appearance=Wt&&Wt.appearance?Wt.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(a){this._appearance=a}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(a){const y=(0,Hi.Ig)(a);y!==this._checked&&(this._checked=y,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(a){this._disabled=(0,Hi.Ig)(a)}ngOnInit(){const a=this.buttonToggleGroup;this._isSingleSelector=a&&!a.multiple,this.id=this.id||"mat-button-toggle-"+t0++,this._isSingleSelector&&(this.name=a.name),a&&(a._isPrechecked(this)?this.checked=!0:a._isSelected(this)!==this._checked&&a._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const a=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),a&&a._isSelected(this)&&a._syncButtonToggle(this,!1,!1,!0)}focus(a){this._buttonElement.nativeElement.focus(a)}_onButtonClick(){const a=!!this._isSingleSelector||!this._checked;a!==this._checked&&(this._checked=a,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new ym(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(e0,8),l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(La.tE),l.$8M("tabindex"),l.Y36(Xv,8))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-button-toggle"]],viewQuery:function(a,y){if(1&a&&l.Gf(Jv,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y._buttonElement=Z.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(a,y){1&a&&l.NdJ("focus",function(){return y.focus()}),2&a&&(l.uIk("aria-label",null)("aria-labelledby",null)("id",y.id)("name",null),l.ekj("mat-button-toggle-standalone",!y.buttonToggleGroup)("mat-button-toggle-checked",y.checked)("mat-button-toggle-disabled",y.disabled)("mat-button-toggle-appearance-standard","standard"===y.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[l.qOj],ngContentSelectors:Qv,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(a,y){if(1&a&&(l.F$t(),l.TgZ(0,"button",0,1),l.NdJ("click",function(){return y._onButtonClick()}),l.TgZ(2,"span",2),l.Hsn(3),l.qZA(),l.qZA(),l._UZ(4,"span",3),l._UZ(5,"span",4)),2&a){const Z=l.MAs(1);l.Q6J("id",y.buttonId)("disabled",y.disabled||null),l.uIk("tabindex",y.disabled?-1:y.tabIndex)("aria-pressed",y.checked)("name",y.name||null)("aria-label",y.ariaLabel)("aria-labelledby",y.ariaLabelledby),l.xp6(5),l.Q6J("matRippleTrigger",Z)("matRippleDisabled",y.disableRipple||y.disabled)}},directives:[Pi.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),d})(),F_=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.BQ,Pi.si],Pi.BQ]}),d})();const xh=function(){return[3]},r0=function(d,C){return[d,C]},s0=function(){return["https://demotiles.maplibre.org/tiles/{z}/{x}/{y}.pbf"]},a0=function(){return{"line-color":"blue"}};let l0=(()=>{class d{constructor(){this.layouts={countries:{visibility:"none"},names:{visibility:"none","text-field":"{name:latin}","text-size":30}}}ngOnInit(){}toggleLayer(a){this.layouts[a.value]=Object.assign(Object.assign({},this.layouts[a.value]),{visibility:"visible"===this.layouts[a.value].visibility?"none":"visible"})}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:10,vars:16,consts:[[3,"zoom","center"],["id","countries",3,"tiles"],["id","everything","url","https://api.maptiler.com/tiles/v3/tiles.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"],["id","countries-layer","type","line","source","countries","sourceLayer","countries",3,"layout","paint"],["id","names","type","symbol","source","everything","sourceLayer","place",3,"layout"],[1,"menu"],["value","names",3,"checked","change"],["value","countries",3,"checked","change"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l._UZ(1,"mgl-vector-source",1),l._UZ(2,"mgl-vector-source",2),l._UZ(3,"mgl-layer",3),l._UZ(4,"mgl-layer",4),l.qZA(),l.TgZ(5,"div",5),l.TgZ(6,"mat-button-toggle",6),l.NdJ("change",function(pe){return y.toggleLayer(pe)}),l._uU(7,"countries names"),l.qZA(),l.TgZ(8,"mat-button-toggle",7),l.NdJ("change",function(pe){return y.toggleLayer(pe)}),l._uU(9,"countries border"),l.qZA(),l.qZA()),2&a&&(l.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),l.Q6J("zoom",l.DdM(10,xh))("center",l.WLB(11,r0,-71.97722138410576,-13.517379300798098)),l.xp6(1),l.Q6J("tiles",l.DdM(14,s0)),l.xp6(2),l.Q6J("layout",y.layouts.countries)("paint",l.DdM(15,a0)),l.xp6(1),l.Q6J("layout",y.layouts.names),l.xp6(2),l.Q6J("checked",!0),l.xp6(2),l.Q6J("checked",!0))},directives:[_t,Ki,Ui,yn,R_],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}",".menu[_ngcontent-%COMP%]{position:absolute;padding:8px}"]}),d})();const L_=function(){return[12]},c0=function(d){return[d,38.897]},u0=function(){return{padding:20}},od=function(){return{"line-color":"#BF93E4","line-width":5}},d0=function(){return{"line-join":"round","line-cap":"round"}};let N_=(()=>{class d{constructor(){this.source={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[-77.0366048812866,38.89873175227713],[-77.03364372253417,38.89876515143842],[-77.03364372253417,38.89549195896866],[-77.02982425689697,38.89549195896866],[-77.02400922775269,38.89387200688839],[-77.01519012451172,38.891416957534204],[-77.01521158218382,38.892068305429156],[-77.00813055038452,38.892051604275686],[-77.00832366943358,38.89143365883688],[-77.00818419456482,38.89082405874451],[-77.00815200805664,38.88989712255097]]}}]}}}zoomToBounds(){const a=this.source.data.features[0].geometry.coordinates;this.bounds=a.reduce((y,Z)=>y.extend(Z),new Ve.LngLatBounds(a[0],a[0]))}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["showcase-demo"]],decls:5,vars:15,consts:[[3,"zoom","center","fitBounds","fitBoundsOptions"],["mat-raised-button","",1,"zoom-button",3,"click"],["id","LineString","type","line",3,"source","paint","layout"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.TgZ(1,"mgl-control"),l.TgZ(2,"button",1),l.NdJ("click",function(){return y.zoomToBounds()}),l._uU(3," Zoom to bounds "),l.qZA(),l.qZA(),l._UZ(4,"mgl-layer",2),l.qZA()),2&a&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(9,L_))("center",l.VKq(10,c0,-77.0214))("fitBounds",y.bounds)("fitBoundsOptions",l.DdM(12,u0)),l.xp6(4),l.Q6J("source",y.source)("paint",l.DdM(13,od))("layout",l.DdM(14,d0)))},directives:[_t,Ki,Ht,xs.lW,yn],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]}),d})(),B_=(()=>{class d{constructor(a){this.router=a}canActivate(a){return!!Im[0].children.some(y=>y.path===a.params.demoUrl)||(this.router.navigate(["/demo"]),!1)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(q.F0))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function ru(d){return d&&d.origin?d.origin:"https://stackblitz.com"}function vm(){return Math.random().toString(36).substring(7)}function sd(d){var C=[];return d&&(d.forceEmbedLayout&&C.push("embed=1"),d.clickToLoad&&C.push("ctl=1"),"string"==typeof d.openFile&&C.push("file="+d.openFile),Array.isArray(d.openFile)&&d.openFile.forEach(function(a){"string"==typeof a&&C.push("file="+a)}),"preview"!==d.view&&"editor"!==d.view||C.push("view="+d.view),"light"!==d.theme&&"dark"!==d.theme||C.push("theme="+d.theme),d.hideExplorer&&C.push("hideExplorer=1"),d.hideNavigation&&C.push("hideNavigation=1"),d.hideDevTools&&C.push("hidedevtools=1"),"number"==typeof d.devToolsHeight&&d.devToolsHeight>=0&&d.devToolsHeight<=100&&C.push("devtoolsheight="+Math.round(d.devToolsHeight))),C.length?"?"+C.join("&"):""}function wh(d,C,a){if(null===d.parentNode)throw new Error("Invalid Element");C.id=d.id,function z_(d,C){C&&(C.hasOwnProperty("height")&&(d.height=""+C.height),C.hasOwnProperty("width")&&(d.width=""+C.width)),d.height||(d.height="300"),d.width||d.setAttribute("style","width:100%;")}(C,a),d.parentNode.replaceChild(C,d)}function bm(d){if("string"==typeof d){var C=document.getElementById(d);if(null!==C)return C}else if(d instanceof HTMLElement)return d;throw new Error("Invalid Element")}function Pp(d){return d&&!1===d.newWindow?"_self":"_blank"}var V_=function(d){var C=this;this.pending={},this.port=d,this.port.onmessage=function(a){if(a.data.payload.__reqid){var y=a.data.payload.__reqid,Z=a.data.payload.__success;if(C.pending[y]){if(delete a.data.payload.__reqid,delete a.data.payload.__success,Z){var pe=0===Object.keys(a.data.payload).length&&a.data.payload.constructor===Object?null:a.data.payload;C.pending[y].resolve(pe)}else C.pending[y].reject(a.data.payload.error?a.data.type+": "+a.data.payload.error:a.data.type);delete C.pending[y]}}}};V_.prototype.request=function(d){var C=this,a=vm();return new Promise(function(y,Z){C.pending[a]={resolve:y,reject:Z},d.payload.__reqid=a,C.port.postMessage(d)})};var Op=function(d,C){var a=this;this.rdc=new V_(d),this.preview={},Object.defineProperty(this.preview,"origin",{value:C.previewOrigin,writable:!1}),this.editor={openFile:function(y){return a.rdc.request({type:"SDK_OPEN_FILE",payload:{path:y}})}}};Op.prototype.applyFsDiff=function(d){return this.rdc.request({type:"SDK_APPLY_FS_DIFF",payload:d})},Op.prototype.getFsSnapshot=function(){return this.rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})},Op.prototype.getDependencies=function(){return this.rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})};var kp=[],xm=function(d){var C=this;this.id=vm(),this.element=d,this.pending=new Promise(function(a,y){var Z=function(ei){ei.data.action&&"SDK_INIT_SUCCESS"===ei.data.action&&ei.data.id===C.id&&(C.vm=new Op(ei.ports[0],ei.data.payload),a(C.vm),Qe())},pe=function(){C.element.contentWindow&&C.element.contentWindow.postMessage({action:"SDK_INIT",id:C.id},"*")};function Qe(){window.clearInterval(Sn),window.removeEventListener("message",Z)}window.addEventListener("message",Z),pe();var Wt=0,Sn=window.setInterval(function(){if(C.vm)Qe();else{if(Wt>=20)return Qe(),y("Timeout: Unable to establish a connection with the StackBlitz VM"),void kp.forEach(function(ei,bi){ei.id===C.id&&kp.splice(bi,1)});Wt++,pe()}},500)}),kp.push(this)},wm=["angular-cli","create-react-app","javascript","node","polymer","html","typescript","vue"];function ad(d,C){var a=document.createElement("input");return a.type="hidden",a.name=d,a.value=C,a}function U_(d){-1===wm.indexOf(d.template)&&console.warn("Unsupported project template, must be one of: "+wm.join(", "));var C=document.createElement("form");return C.method="POST",C.setAttribute("style","display:none!important;"),C.appendChild(ad("project[title]",d.title)),C.appendChild(ad("project[description]",d.description)),C.appendChild(ad("project[template]",d.template)),d.dependencies&&C.appendChild(ad("project[dependencies]",JSON.stringify(d.dependencies))),d.settings&&C.appendChild(ad("project[settings]",JSON.stringify(d.settings))),Object.keys(d.files).forEach(function(a){C.appendChild(ad("project[files]["+a+"]",d.files[a]))}),C}var Rp={connect:function(d){if(!d||!d.contentWindow)return Promise.reject("Provided element is not an iframe.");var C=function(d){var C=d instanceof Element?"element":"id";return kp.find(function(y){return y[C]===d})||null}(d);return C?C.pending:new xm(d).pending},openGithubProject:function(d,C){window.open(ru(C)+"/github/"+d+sd(C),Pp(C))},openProject:function(d,C){!function m0(d,C){var a=U_(d);a.action=ru(C)+"/run"+sd(C),a.target=Pp(C),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}(d,C)},openProjectId:function(d,C){window.open(ru(C)+"/edit/"+d+sd(C),Pp(C))},embedGithubProject:function(d,C,a){var y=bm(d),Z=document.createElement("iframe");return Z.src=ru(a)+"/github/"+C+sd(a),wh(y,Z,a),Rp.connect(Z)},embedProject:function(d,C,a){var y=bm(d),Z=function f0(d,C){var a=U_(d);return a.action=ru(C)+"/run"+sd(C),a.id="sb","<html><head><title></title></head><body>"+a.outerHTML+"<script>document.getElementById('sb').submit();<\/script></body></html>"}(C,a),pe=document.createElement("iframe");return wh(y,pe,a),pe.contentDocument&&pe.contentDocument.write(Z),Rp.connect(pe)},embedProjectId:function(d,C,a){var y=bm(d),Z=document.createElement("iframe");return Z.src=ru(a)+"/edit/"+C+sd(a),wh(y,Z,a),Rp.connect(Z)}};const g0=Rp;var Cm=V(4128),j_=V(9646),H_=V(2076),G_=V(6063);class _0 extends Ze.x{constructor(C=1/0,a=1/0,y=G_.l){super(),this._bufferSize=C,this._windowTime=a,this._timestampProvider=y,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=a===1/0,this._bufferSize=Math.max(1,C),this._windowTime=Math.max(1,a)}next(C){const{isStopped:a,_buffer:y,_infiniteTimeWindow:Z,_timestampProvider:pe,_windowTime:Qe}=this;a||(y.push(C),!Z&&y.push(pe.now()+Qe)),this._trimBuffer(),super.next(C)}_subscribe(C){this._throwIfClosed(),this._trimBuffer();const a=this._innerSubscribe(C),{_infiniteTimeWindow:y,_buffer:Z}=this,pe=Z.slice();for(let Qe=0;Qe<pe.length&&!C.closed;Qe+=y?1:2)C.next(pe[Qe]);return this._checkFinalizedStatuses(C),a}_trimBuffer(){const{_bufferSize:C,_timestampProvider:a,_buffer:y,_infiniteTimeWindow:Z}=this,pe=(Z?1:2)*C;if(C<1/0&&pe<y.length&&y.splice(0,y.length-pe),!Z){const Qe=a.now();let Wt=0;for(let Sn=1;Sn<y.length&&y[Sn]<=Qe;Sn+=2)Wt=Sn;Wt&&y.splice(0,Wt+1)}}}var y0=V(3099);function Fp(d,C,a){var y,Z;let pe,Qe=!1;return d&&"object"==typeof d?(pe=null!==(y=d.bufferSize)&&void 0!==y?y:1/0,C=null!==(Z=d.windowTime)&&void 0!==Z?Z:1/0,Qe=!!d.refCount,a=d.scheduler):pe=null!=d?d:1/0,(0,y0.B)({connector:()=>new _0(pe,C,a),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Qe})}var v0=V(8746);function b0(d){return d.replace(/(^\w|-\w)/g,x0)}function x0(d){return d.replace(/-/,"").toUpperCase()}var Ch=V(520);const Dm="app/demo/examples/";let Mm=(()=>{class d{constructor(a){this.http=a,this.fileCache=new Map,this.loadFile("example.css")}getDemoFiles(a){let y=this.fileCache.get(a);return y||(y=this.http.get(`${Dm}${a}.component.ts`,{responseType:"text"}).pipe((0,rt.w)(Z=>this.loadAdditionnalFilesIfNecessary(Z)),Fp(1)),this.fileCache.set(a,y),y)}loadAdditionnalFilesIfNecessary(a){const y=/'\.\/([\w-.]+\.\w+)'/g;let Z;const pe=[],Qe={"src/demo.ts":a};for(;Z=y.exec(a);)pe.push(this.loadFile(Z[1]));return pe.length?(0,Cm.D)(pe).pipe((0,At.U)(Wt=>Object.assign(Object.assign({},Object.assign({},...Wt)),Qe))):(0,j_.of)(Qe)}loadFile(a){let y=this.fileCache.get(a);return y||(y=this.http.get(`${Dm}${a}`,{responseType:"text"}).pipe((0,At.U)(Z=>({[`src/${a}`]:Z})),Fp(1)),this.fileCache.set(a,y),y)}}return d.\u0275fac=function(a){return new(a||d)(l.LFG(Ch.eN))},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();function w0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+a._spinnerAnimationLabel)("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function C0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function Sm(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+a._spinnerAnimationLabel)("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}function E0(d,C){if(1&d&&(l.O4$(),l._UZ(0,"circle",4)),2&d){const a=l.oxw(),y=l.MAs(1);l.Udp("stroke-dashoffset",a._getStrokeDashOffset(),"px")("stroke-dasharray",a._getStrokeCircumference(),"px")("stroke-width",a._getCircleStrokeWidth(),"%")("transform-origin",a._getCircleTransformOrigin(y)),l.uIk("r",a._getCircleRadius())}}const D0=(0,Pi.pj)(class{constructor(d){this._elementRef=d}},"primary"),Am=new l.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function Ub(){return{diameter:100}}});class Na extends D0{constructor(C,a,y,Z,pe,Qe,Wt,Sn){super(C),this._document=y,this._diameter=100,this._value=0,this._resizeSubscription=gt.w0.EMPTY,this.mode="determinate";const ei=Na._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),ei.has(y.head)||ei.set(y.head,new Set([100])),this._noopAnimations="NoopAnimations"===Z&&!!pe&&!pe._forceAnimations,pe&&(pe.diameter&&(this.diameter=pe.diameter),pe.strokeWidth&&(this.strokeWidth=pe.strokeWidth)),a.isBrowser&&a.SAFARI&&Wt&&Qe&&Sn&&(this._resizeSubscription=Wt.change(150).subscribe(()=>{"indeterminate"===this.mode&&Sn.run(()=>Qe.markForCheck())}))}get diameter(){return this._diameter}set diameter(C){this._diameter=(0,Hi.su)(C),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(C){this._strokeWidth=(0,Hi.su)(C)}get value(){return"determinate"===this.mode?this._value:0}set value(C){this._value=Math.max(0,Math.min(100,(0,Hi.su)(C)))}ngOnInit(){const C=this._elementRef.nativeElement;this._styleRoot=(0,se.kV)(C)||this._document.head,this._attachStyleNode(),C.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const C=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${C} ${C}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(C){var a;const y=50*(null!==(a=C.currentScale)&&void 0!==a?a:1);return`${y}% ${y}%`}_attachStyleNode(){const C=this._styleRoot,a=this._diameter,y=Na._diameters;let Z=y.get(C);if(!Z||!Z.has(a)){const pe=this._document.createElement("style");pe.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),pe.textContent=this._getAnimationText(),C.appendChild(pe),Z||(Z=new Set,y.set(C,Z)),Z.add(a)}}_getAnimationText(){const C=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*C).replace(/END_VALUE/g,""+.2*C).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Na._diameters=new WeakMap,Na.\u0275fac=function(C){return new(C||Na)(l.Y36(l.SBq),l.Y36(se.t4),l.Y36(Oe.K0,8),l.Y36(Ke.Qb,8),l.Y36(Am),l.Y36(l.sBO),l.Y36(me.rL),l.Y36(l.R0b))},Na.\u0275cmp=l.Xpm({type:Na,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(C,a){2&C&&(l.uIk("aria-valuemin","determinate"===a.mode?0:null)("aria-valuemax","determinate"===a.mode?100:null)("aria-valuenow","determinate"===a.mode?a.value:null)("mode",a.mode),l.Udp("width",a.diameter,"px")("height",a.diameter,"px"),l.ekj("_mat-animation-noopable",a._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(C,a){1&C&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,w0,1,11,"circle",2),l.YNc(3,C0,1,9,"circle",3),l.qZA()),2&C&&(l.Udp("width",a.diameter,"px")("height",a.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===a.mode),l.uIk("viewBox",a._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Oe.RF,Oe.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let S0=(()=>{class d extends Na{constructor(a,y,Z,pe,Qe,Wt,Sn,ei){super(a,y,Z,pe,Qe,Wt,Sn,ei),this.mode="indeterminate"}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.SBq),l.Y36(se.t4),l.Y36(Oe.K0,8),l.Y36(Ke.Qb,8),l.Y36(Am),l.Y36(l.sBO),l.Y36(me.rL),l.Y36(l.R0b))},d.\u0275cmp=l.Xpm({type:d,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(a,y){2&a&&(l.Udp("width",y.diameter,"px")("height",y.diameter,"px"),l.ekj("_mat-animation-noopable",y._noopAnimations))},inputs:{color:"color"},features:[l.qOj],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(a,y){1&a&&(l.O4$(),l.TgZ(0,"svg",0,1),l.YNc(2,Sm,1,11,"circle",2),l.YNc(3,E0,1,9,"circle",3),l.qZA()),2&a&&(l.Udp("width",y.diameter,"px")("height",y.diameter,"px"),l.Q6J("ngSwitch","indeterminate"===y.mode),l.uIk("viewBox",y._getViewBox()),l.xp6(2),l.Q6J("ngSwitchCase",!0),l.xp6(1),l.Q6J("ngSwitchCase",!1))},directives:[Oe.RF,Oe.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),d})(),ld=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Pi.BQ,Oe.ez],Pi.BQ]}),d})();const Eh=["container"];function T0(d,C){1&d&&(l.TgZ(0,"div",2),l._UZ(1,"mat-spinner"),l._UZ(2,"div"),l.qZA())}let jb=(()=>{class d{constructor(a,y,Z,pe,Qe){this.zone=a,this.activatedRoute=y,this.demoFileLoaderService=Z,this.http=pe,this.ChangeDetectorRef=Qe,this.loading=!0,this.projectbase$=(0,Cm.D)([this.http.get("assets/stackblitz/main.notts",{responseType:"text"}),this.http.get("assets/stackblitz/angular.json",{responseType:"text"})]).pipe(Fp(1))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngAfterViewInit(){this.sub=this.activatedRoute.params.pipe((0,Fe.b)(()=>{this.loading=!0,this.ChangeDetectorRef.markForCheck()}),(0,rt.w)(a=>(0,Cm.D)([this.projectbase$,this.demoFileLoaderService.getDemoFiles(a.demoUrl),(0,j_.of)(a.demoUrl)])),(0,rt.w)(([a,y,Z])=>(0,H_.D)(this.openExample(a,y,Z)).pipe((0,v0.x)(()=>{this.loading=!1,this.ChangeDetectorRef.markForCheck()})))).subscribe()}openExample(a,y,Z){return(0,he.mG)(this,void 0,void 0,function*(){if(this.vm)return void(yield this.vm.applyFsDiff({create:y,destroy:[]}));const pe=function Em(d,C,a){return{files:Object.assign({"src/main.ts":d[0].replace(/###/g,b0(a)+"Component"),"angular.json":d[1],"src/index.html":"<showcase-demo></showcase-demo>","src/styles.css":"\nhtml, body {\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  margin: 0;\n}\n","src/polyfills.ts":"\nimport 'zone.js';\n(window as any).global = window;\n"},C),title:"",description:"",template:"angular-cli",dependencies:{tslib:"*","maplibre-gl":"*","@maplibre/ngx-maplibre-gl":"*","@angular/cdk":"^13","@angular/material":"^13","@angular/animations":"^13","@angular/forms":"^13","@angular/common":"^13","@angular/compiler":"^13","@angular/core":"^13","@angular/platform-browser":"^13","@angular/platform-browser-dynamic":"^13","@angular/router":"^13",url:"*",querystring:"*",events:"*","@types/supercluster":"*","@types/geojson":"*"}}}(a,y,Z);yield this.zone.runOutsideAngular(()=>(0,he.mG)(this,void 0,void 0,function*(){this.vm=yield g0.embedProject(this.stackblitzContainer.nativeElement,pe,{hideExplorer:!0,hideNavigation:!0,forceEmbedLayout:!0,openFile:"src/demo.ts"})}))})}}return d.\u0275fac=function(a){return new(a||d)(l.Y36(l.R0b),l.Y36(q.gz),l.Y36(Mm),l.Y36(Ch.eN),l.Y36(l.sBO))},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],viewQuery:function(a,y){if(1&a&&l.Gf(Eh,5),2&a){let Z;l.iGM(Z=l.CRH())&&(y.stackblitzContainer=Z.first)}},decls:3,vars:1,consts:[["container",""],["class","loader",4,"ngIf"],[1,"loader"]],template:function(a,y){1&a&&(l._UZ(0,"div",null,0),l.YNc(2,T0,3,0,"div",1)),2&a&&(l.xp6(2),l.Q6J("ngIf",y.loading))},directives:[Oe.O5,S0],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}[_nghost-%COMP%]     iframe{height:100%;width:100%;border:0}.loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"],changeDetection:0}),d})();var Wi=(()=>(function(d){d.STYLES="Styles",d.LAYERS="Layers",d.SOURCES="Sources",d.USER_INTERACTION="User interaction",d.CAMERA="Camera",d.CONTROLS_AND_OVERLAYS="Controls and overlays"}(Wi||(Wi={})),Wi))();const Im=[{path:"",component:dh,children:[{path:"edit/:demoUrl",component:jb,canActivate:[B_]},{path:"display-map",component:pg,data:{label:"Display a map",cat:Wi.STYLES}},{path:"custom-style-id",component:ug,data:{label:"Display a map with a custom style",cat:Wi.STYLES}},{path:"set-style",component:k_,data:{label:"Change a map's style",cat:Wi.STYLES}},{path:"satellite-map",component:S_,data:{label:"Display a satellite map",cat:Wi.STYLES}},{path:"add-image-generated",component:Nf,data:{label:"Add a generated icon to the map",cat:Wi.LAYERS}},{path:"add-image",component:ig,data:{label:"Add an icon to the map",cat:Wi.LAYERS}},{path:"toggle-layers",component:l0,data:{label:"Show and hide layers",cat:Wi.LAYERS}},{path:"3d-buildings",component:Wm,data:{label:"Display 3d buildings",cat:Wi.LAYERS}},{path:"cluster",component:Fl,data:{label:"Create and style clusters",cat:Wi.LAYERS}},{path:"heatmap",component:em,data:{label:"Create a heatmap layer",cat:Wi.LAYERS}},{path:"geojson-line",component:Dg,data:{label:"Add a GeoJSON line",cat:Wi.LAYERS}},{path:"ngx-geojson-line",component:b_,data:{label:"[NGX] Add a GeoJSON line",cat:Wi.LAYERS}},{path:"custom-marker-icons",component:Qu,data:{label:"Add custom icons with Markers",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-marker-icons",component:Ov,data:{label:"[NGX] Add custom icons with Markers",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"live-update-feature",component:Ng,data:{label:"Update a feature in realtime",cat:Wi.SOURCES}},{path:"live-update-image-source",component:Hg,data:{label:"Update an image source in realtime",cat:Wi.SOURCES}},{path:"popup",component:Nv,data:{label:"Display a popup",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"set-popup",component:Hv,data:{label:"Attach a popup to a marker instance",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"fullscreen",component:Ab,data:{label:"View a fullscreen map",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"navigation",component:qg,data:{label:"Display map navigation controls",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"locate-user",component:sv,data:{label:"Locate the user",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"attribution-position",component:fb,data:{label:"Change the default position for attribution",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"ngx-scale-control",component:x_,data:{label:"[NGX] Show scale information",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"ngx-custom-control",component:Iv,data:{label:"[NGX] Add a custom control",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"interactive-false",component:Og,data:{label:"Display a non-interactive map",cat:Wi.USER_INTERACTION}},{path:"language-switch",component:Rg,data:{label:"Change a map's language",cat:Wi.USER_INTERACTION}},{path:"center-on-symbol",component:rg,data:{label:"Center the map on a clicked symbol",cat:Wi.USER_INTERACTION}},{path:"ngx-drag-a-point",component:m_,data:{label:"[NGX] Create a draggable point",cat:Wi.USER_INTERACTION}},{path:"drag-a-marker",component:Tb,data:{label:"Create a draggable marker",cat:Wi.USER_INTERACTION}},{path:"hover-styles",component:Ig,data:{label:"Create a hover effect",cat:Wi.USER_INTERACTION}},{path:"popup-on-click",component:ji,data:{label:"Display a popup on click",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"zoomto-linestring",component:N_,data:{label:"Fit to the bounds of a LineString",cat:Wi.USER_INTERACTION}},{path:"cluster-html",component:Ey,data:{label:"Display HTML clusters with custom properties",cat:Wi.LAYERS}},{path:"ngx-cluster-html",component:Tv,data:{label:"[NGX] Display HTML clusters with custom properties",cat:Wi.LAYERS}},{path:"polygon-popup-on-click",component:Lb,data:{label:"Show polygon information on click",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"add-image-missing-generated",component:Xm,data:{label:"Generate and add a missing icon to the map",cat:Wi.STYLES}},{path:"custom-attribution",component:el,data:{label:"Add custom attributions",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"custom-locale",component:qu,data:{label:"Add custom localization for controls",cat:Wi.CONTROLS_AND_OVERLAYS}},{path:"marker-alignment",component:Zg,data:{label:"Marker alignment options",cat:Wi.CAMERA}},{path:"**",redirectTo:"display-map"}]}],A0=function(){return[2]},I0=[{path:"",component:(()=>{class d{constructor(){this.center=[0,0],this.panToOptions={duration:1e4,easing:a=>a}}moveCenter(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const a=this.center[0];0===a?this.center=[90,0]:90===a?this.center=[180,0]:180===a?this.center=[-90,0]:-90===a&&(this.center=[0,0])}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["ng-component"]],decls:5,vars:8,consts:[[3,"zoom","center","centerWithPanTo","panToOptions","interactive","mapLoad","moveEnd"],[1,"main"],["svgIcon","ngx-maplibre-gl-red",1,"logo"]],template:function(a,y){1&a&&(l.TgZ(0,"mgl-map",0),l.NdJ("mapLoad",function(){return y.moveCenter()})("moveEnd",function(){return y.moveCenter()}),l.qZA(),l.TgZ(1,"div",1),l._UZ(2,"mat-icon",2),l.TgZ(3,"h1"),l._uU(4,"Angular binding of maplibre-gl-js"),l.qZA(),l.qZA()),2&a&&(l.Akn("https://demotiles.maplibre.org/style.json"),l.Q6J("zoom",l.DdM(7,A0))("center",y.center)("centerWithPanTo",!0)("panToOptions",y.panToOptions)("interactive",!1))},directives:[_t,$e.Hw],styles:["[_nghost-%COMP%]{display:flex;flex:1;position:relative}.main[_ngcontent-%COMP%]{position:absolute;top:0px;height:100%;width:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}.logo[_ngcontent-%COMP%]{width:150px;height:150px}mgl-map[_ngcontent-%COMP%]{flex:1}"]}),d})(),pathMatch:"full"}],P0=[{path:"",component:V(6449).$,children:[{path:"demo",children:Im},...I0,{path:"doc",loadChildren:()=>V.e(690).then(V.bind(V,7690)).then(d=>d.DocModule)}]},{path:"**",redirectTo:""}];let Pm=(()=>{class d{constructor(a,y){a.addSvgIcon("ngx-maplibre-gl",y.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl.svg")),a.addSvgIcon("ngx-maplibre-gl-red",y.bypassSecurityTrustResourceUrl("assets/ngx-maplibre-gl-red.svg")),a.addSvgIcon("github",y.bypassSecurityTrustResourceUrl("assets/github.svg"))}}return d.\u0275fac=function(a){return new(a||d)(l.LFG($e.jv),l.LFG(D.H7))},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[],imports:[[D.b2,Ke.PW,$e.Ps,q.Bz.forRoot(P0,{relativeLinkResolution:"legacy"}),Le,fn.x]]}),d})(),Lp=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({providers:[B_],imports:[[q.Bz,Ch.JF,Oe.ez,Jo.u5,Le,fn.x,P_,F_,xs.ot,Ca,$f,ld,Ys,$e.Ps,To,bv,ae]]}),d})(),Dh=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d}),d.\u0275inj=l.cJS({imports:[[Le,$e.Ps]]}),d})(),O0=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=l.oAB({type:d,bootstrap:[g]}),d.\u0275inj=l.cJS({imports:[[q.Bz,Pm,Dh,Lp]]}),d})();(0,l.G48)(),D.q6().bootstrapModule(O0).catch(d=>console.log(d))},1135:(On,wt,V)=>{"use strict";V.d(wt,{X:()=>l});var D=V(7579);class l extends D.x{constructor(g){super(),this._value=g}get value(){return this.getValue()}_subscribe(g){const $e=super._subscribe(g);return!$e.closed&&g.next(this._value),$e}getValue(){const{hasError:g,thrownError:$e,_value:Ke}=this;if(g)throw $e;return this._throwIfClosed(),Ke}next(g){super.next(this._value=g)}}},8306:(On,wt,V)=>{"use strict";V.d(wt,{y:()=>Ve});var D=V(930),l=V(727),q=V(8822),g=V(4671);var Oe=V(2416),Le=V(576),he=V(2806);let Ve=(()=>{class Ye{constructor(Mt){Mt&&(this._subscribe=Mt)}lift(Mt){const He=new Ye;return He.source=this,He.operator=Mt,He}subscribe(Mt,He,Vt){const Ht=function gt(Ye){return Ye&&Ye instanceof D.Lv||function Be(Ye){return Ye&&(0,Le.m)(Ye.next)&&(0,Le.m)(Ye.error)&&(0,Le.m)(Ye.complete)}(Ye)&&(0,l.Nn)(Ye)}(Mt)?Mt:new D.Hp(Mt,He,Vt);return(0,he.x)(()=>{const{operator:an,source:Dt}=this;Ht.add(an?an.call(Ht,Dt):Dt?this._subscribe(Ht):this._trySubscribe(Ht))}),Ht}_trySubscribe(Mt){try{return this._subscribe(Mt)}catch(He){Mt.error(He)}}forEach(Mt,He){return new(He=Ze(He))((Vt,Ht)=>{const an=new D.Hp({next:Dt=>{try{Mt(Dt)}catch(Fe){Ht(Fe),an.unsubscribe()}},error:Ht,complete:Vt});this.subscribe(an)})}_subscribe(Mt){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Mt)}[q.L](){return this}pipe(...Mt){return function Ke(Ye){return 0===Ye.length?g.y:1===Ye.length?Ye[0]:function(Mt){return Ye.reduce((He,Vt)=>Vt(He),Mt)}}(Mt)(this)}toPromise(Mt){return new(Mt=Ze(Mt))((He,Vt)=>{let Ht;this.subscribe(an=>Ht=an,an=>Vt(an),()=>He(Ht))})}}return Ye.create=tt=>new Ye(tt),Ye})();function Ze(Ye){var tt;return null!==(tt=null!=Ye?Ye:Oe.v.Promise)&&void 0!==tt?tt:Promise}},7579:(On,wt,V)=>{"use strict";V.d(wt,{x:()=>Oe});var D=V(8306),l=V(727);const g=(0,V(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=V(8737),Ke=V(2806);let Oe=(()=>{class he extends D.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ze){const Be=new Le(this,this);return Be.operator=Ze,Be}_throwIfClosed(){if(this.closed)throw new g}next(Ze){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Be=this.observers.slice();for(const gt of Be)gt.next(Ze)}})}error(Ze){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ze;const{observers:Be}=this;for(;Be.length;)Be.shift().error(Ze)}})}complete(){(0,Ke.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ze}=this;for(;Ze.length;)Ze.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var Ze;return(null===(Ze=this.observers)||void 0===Ze?void 0:Ze.length)>0}_trySubscribe(Ze){return this._throwIfClosed(),super._trySubscribe(Ze)}_subscribe(Ze){return this._throwIfClosed(),this._checkFinalizedStatuses(Ze),this._innerSubscribe(Ze)}_innerSubscribe(Ze){const{hasError:Be,isStopped:gt,observers:Ye}=this;return Be||gt?l.Lc:(Ye.push(Ze),new l.w0(()=>(0,$e.P)(Ye,Ze)))}_checkFinalizedStatuses(Ze){const{hasError:Be,thrownError:gt,isStopped:Ye}=this;Be?Ze.error(gt):Ye&&Ze.complete()}asObservable(){const Ze=new D.y;return Ze.source=this,Ze}}return he.create=(Ve,Ze)=>new Le(Ve,Ze),he})();class Le extends Oe{constructor(Ve,Ze){super(),this.destination=Ve,this.source=Ze}next(Ve){var Ze,Be;null===(Be=null===(Ze=this.destination)||void 0===Ze?void 0:Ze.next)||void 0===Be||Be.call(Ze,Ve)}error(Ve){var Ze,Be;null===(Be=null===(Ze=this.destination)||void 0===Ze?void 0:Ze.error)||void 0===Be||Be.call(Ze,Ve)}complete(){var Ve,Ze;null===(Ze=null===(Ve=this.destination)||void 0===Ve?void 0:Ve.complete)||void 0===Ze||Ze.call(Ve)}_subscribe(Ve){var Ze,Be;return null!==(Be=null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Ve))&&void 0!==Be?Be:l.Lc}}},930:(On,wt,V)=>{"use strict";V.d(wt,{Hp:()=>gt,Lv:()=>Be});var D=V(576),l=V(727),q=V(2416),g=V(7849),$e=V(5032);const Ke=he("C",void 0,void 0);function he(Vt,Ht,an){return{kind:Vt,value:Ht,error:an}}var Ve=V(3410),Ze=V(2806);class Be extends l.w0{constructor(Ht){super(),this.isStopped=!1,Ht?(this.destination=Ht,(0,l.Nn)(Ht)&&Ht.add(this)):this.destination=He}static create(Ht,an,Dt){return new gt(Ht,an,Dt)}next(Ht){this.isStopped?Mt(function Le(Vt){return he("N",Vt,void 0)}(Ht),this):this._next(Ht)}error(Ht){this.isStopped?Mt(function Oe(Vt){return he("E",void 0,Vt)}(Ht),this):(this.isStopped=!0,this._error(Ht))}complete(){this.isStopped?Mt(Ke,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ht){this.destination.next(Ht)}_error(Ht){try{this.destination.error(Ht)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class gt extends Be{constructor(Ht,an,Dt){let Fe;if(super(),(0,D.m)(Ht))Fe=Ht;else if(Ht){let rt;({next:Fe,error:an,complete:Dt}=Ht),this&&q.v.useDeprecatedNextContext?(rt=Object.create(Ht),rt.unsubscribe=()=>this.unsubscribe()):rt=Ht,Fe=null==Fe?void 0:Fe.bind(rt),an=null==an?void 0:an.bind(rt),Dt=null==Dt?void 0:Dt.bind(rt)}this.destination={next:Fe?Ye(Fe):$e.Z,error:Ye(null!=an?an:tt),complete:Dt?Ye(Dt):$e.Z}}}function Ye(Vt,Ht){return(...an)=>{try{Vt(...an)}catch(Dt){q.v.useDeprecatedSynchronousErrorHandling?(0,Ze.O)(Dt):(0,g.h)(Dt)}}}function tt(Vt){throw Vt}function Mt(Vt,Ht){const{onStoppedNotification:an}=q.v;an&&Ve.z.setTimeout(()=>an(Vt,Ht))}const He={closed:!0,next:$e.Z,error:tt,complete:$e.Z}},727:(On,wt,V)=>{"use strict";V.d(wt,{Lc:()=>Ke,w0:()=>$e,Nn:()=>Oe});var D=V(576);const q=(0,V(3888).d)(he=>function(Ze){he(this),this.message=Ze?`${Ze.length} errors occurred during unsubscription:\n${Ze.map((Be,gt)=>`${gt+1}) ${Be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ze});var g=V(8737);class $e{constructor(Ve){this.initialTeardown=Ve,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Ve;if(!this.closed){this.closed=!0;const{_parentage:Ze}=this;if(Ze)if(this._parentage=null,Array.isArray(Ze))for(const Ye of Ze)Ye.remove(this);else Ze.remove(this);const{initialTeardown:Be}=this;if((0,D.m)(Be))try{Be()}catch(Ye){Ve=Ye instanceof q?Ye.errors:[Ye]}const{_teardowns:gt}=this;if(gt){this._teardowns=null;for(const Ye of gt)try{Le(Ye)}catch(tt){Ve=null!=Ve?Ve:[],tt instanceof q?Ve=[...Ve,...tt.errors]:Ve.push(tt)}}if(Ve)throw new q(Ve)}}add(Ve){var Ze;if(Ve&&Ve!==this)if(this.closed)Le(Ve);else{if(Ve instanceof $e){if(Ve.closed||Ve._hasParent(this))return;Ve._addParent(this)}(this._teardowns=null!==(Ze=this._teardowns)&&void 0!==Ze?Ze:[]).push(Ve)}}_hasParent(Ve){const{_parentage:Ze}=this;return Ze===Ve||Array.isArray(Ze)&&Ze.includes(Ve)}_addParent(Ve){const{_parentage:Ze}=this;this._parentage=Array.isArray(Ze)?(Ze.push(Ve),Ze):Ze?[Ze,Ve]:Ve}_removeParent(Ve){const{_parentage:Ze}=this;Ze===Ve?this._parentage=null:Array.isArray(Ze)&&(0,g.P)(Ze,Ve)}remove(Ve){const{_teardowns:Ze}=this;Ze&&(0,g.P)(Ze,Ve),Ve instanceof $e&&Ve._removeParent(this)}}$e.EMPTY=(()=>{const he=new $e;return he.closed=!0,he})();const Ke=$e.EMPTY;function Oe(he){return he instanceof $e||he&&"closed"in he&&(0,D.m)(he.remove)&&(0,D.m)(he.add)&&(0,D.m)(he.unsubscribe)}function Le(he){(0,D.m)(he)?he():he.unsubscribe()}},2416:(On,wt,V)=>{"use strict";V.d(wt,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(On,wt,V)=>{"use strict";V.d(wt,{a:()=>Ve});var D=V(8306),l=V(4742),q=V(2076),g=V(4671),$e=V(3268),Ke=V(3269),Oe=V(1810),Le=V(5403),he=V(9672);function Ve(...gt){const Ye=(0,Ke.yG)(gt),tt=(0,Ke.jO)(gt),{args:Mt,keys:He}=(0,l.D)(gt);if(0===Mt.length)return(0,q.D)([],Ye);const Vt=new D.y(function Ze(gt,Ye,tt=g.y){return Mt=>{Be(Ye,()=>{const{length:He}=gt,Vt=new Array(He);let Ht=He,an=He;for(let Dt=0;Dt<He;Dt++)Be(Ye,()=>{const Fe=(0,q.D)(gt[Dt],Ye);let rt=!1;Fe.subscribe(new Le.Q(Mt,nn=>{Vt[Dt]=nn,rt||(rt=!0,an--),an||Mt.next(tt(Vt.slice()))},()=>{--Ht||Mt.complete()}))},Mt)},Mt)}}(Mt,Ye,He?Ht=>(0,Oe.n)(He,Ht):g.y));return tt?Vt.pipe((0,$e.Z)(tt)):Vt}function Be(gt,Ye,tt){gt?(0,he.f)(tt,gt,Ye):Ye()}},7272:(On,wt,V)=>{"use strict";V.d(wt,{z:()=>$e});var D=V(8189),q=V(3269),g=V(2076);function $e(...Ke){return function l(){return(0,D.J)(1)}()((0,g.D)(Ke,(0,q.yG)(Ke)))}},9770:(On,wt,V)=>{"use strict";V.d(wt,{P:()=>q});var D=V(8306),l=V(8421);function q(g){return new D.y($e=>{(0,l.Xf)(g()).subscribe($e)})}},515:(On,wt,V)=>{"use strict";V.d(wt,{E:()=>l});const l=new(V(8306).y)($e=>$e.complete())},4128:(On,wt,V)=>{"use strict";V.d(wt,{D:()=>Le});var D=V(8306),l=V(4742),q=V(8421),g=V(3269),$e=V(5403),Ke=V(3268),Oe=V(1810);function Le(...he){const Ve=(0,g.jO)(he),{args:Ze,keys:Be}=(0,l.D)(he),gt=new D.y(Ye=>{const{length:tt}=Ze;if(!tt)return void Ye.complete();const Mt=new Array(tt);let He=tt,Vt=tt;for(let Ht=0;Ht<tt;Ht++){let an=!1;(0,q.Xf)(Ze[Ht]).subscribe(new $e.Q(Ye,Dt=>{an||(an=!0,Vt--),Mt[Ht]=Dt},()=>He--,void 0,()=>{(!He||!an)&&(Vt||Ye.next(Be?(0,Oe.n)(Be,Mt):Mt),Ye.complete())}))}});return Ve?gt.pipe((0,Ke.Z)(Ve)):gt}},2076:(On,wt,V)=>{"use strict";V.d(wt,{D:()=>nn});var D=V(8421),l=V(9672),q=V(4482),g=V(5403);function $e(Bt,Qt=0){return(0,q.e)((at,mt)=>{at.subscribe(new g.Q(mt,lt=>(0,l.f)(mt,Bt,()=>mt.next(lt),Qt),()=>(0,l.f)(mt,Bt,()=>mt.complete(),Qt),lt=>(0,l.f)(mt,Bt,()=>mt.error(lt),Qt)))})}function Ke(Bt,Qt=0){return(0,q.e)((at,mt)=>{mt.add(Bt.schedule(()=>at.subscribe(mt),Qt))})}var he=V(8306),Ze=V(2202),Be=V(576);function Ye(Bt,Qt){if(!Bt)throw new Error("Iterable cannot be null");return new he.y(at=>{(0,l.f)(at,Qt,()=>{const mt=Bt[Symbol.asyncIterator]();(0,l.f)(at,Qt,()=>{mt.next().then(lt=>{lt.done?at.complete():at.next(lt.value)})},0,!0)})})}var tt=V(3670),Mt=V(8239),He=V(1144),Vt=V(6495),Ht=V(2206),an=V(4532),Dt=V(3260);function nn(Bt,Qt){return Qt?function rt(Bt,Qt){if(null!=Bt){if((0,tt.c)(Bt))return function Oe(Bt,Qt){return(0,D.Xf)(Bt).pipe(Ke(Qt),$e(Qt))}(Bt,Qt);if((0,He.z)(Bt))return function Ve(Bt,Qt){return new he.y(at=>{let mt=0;return Qt.schedule(function(){mt===Bt.length?at.complete():(at.next(Bt[mt++]),at.closed||this.schedule())})})}(Bt,Qt);if((0,Mt.t)(Bt))return function Le(Bt,Qt){return(0,D.Xf)(Bt).pipe(Ke(Qt),$e(Qt))}(Bt,Qt);if((0,Ht.D)(Bt))return Ye(Bt,Qt);if((0,Vt.T)(Bt))return function gt(Bt,Qt){return new he.y(at=>{let mt;return(0,l.f)(at,Qt,()=>{mt=Bt[Ze.h](),(0,l.f)(at,Qt,()=>{let lt,At;try{({value:lt,done:At}=mt.next())}catch(Kt){return void at.error(Kt)}At?at.complete():at.next(lt)},0,!0)}),()=>(0,Be.m)(null==mt?void 0:mt.return)&&mt.return()})}(Bt,Qt);if((0,Dt.L)(Bt))return function Fe(Bt,Qt){return Ye((0,Dt.Q)(Bt),Qt)}(Bt,Qt)}throw(0,an.z)(Bt)}(Bt,Qt):(0,D.Xf)(Bt)}},4968:(On,wt,V)=>{"use strict";V.d(wt,{R:()=>Ve});var D=V(8421),l=V(8306),q=V(5577),g=V(1144),$e=V(576),Ke=V(3268);const Oe=["addListener","removeListener"],Le=["addEventListener","removeEventListener"],he=["on","off"];function Ve(tt,Mt,He,Vt){if((0,$e.m)(He)&&(Vt=He,He=void 0),Vt)return Ve(tt,Mt,He).pipe((0,Ke.Z)(Vt));const[Ht,an]=function Ye(tt){return(0,$e.m)(tt.addEventListener)&&(0,$e.m)(tt.removeEventListener)}(tt)?Le.map(Dt=>Fe=>tt[Dt](Mt,Fe,He)):function Be(tt){return(0,$e.m)(tt.addListener)&&(0,$e.m)(tt.removeListener)}(tt)?Oe.map(Ze(tt,Mt)):function gt(tt){return(0,$e.m)(tt.on)&&(0,$e.m)(tt.off)}(tt)?he.map(Ze(tt,Mt)):[];if(!Ht&&(0,g.z)(tt))return(0,q.z)(Dt=>Ve(Dt,Mt,He))((0,D.Xf)(tt));if(!Ht)throw new TypeError("Invalid event target");return new l.y(Dt=>{const Fe=(...rt)=>Dt.next(1<rt.length?rt:rt[0]);return Ht(Fe),()=>an(Fe)})}function Ze(tt,Mt){return He=>Vt=>tt[He](Mt,Vt)}},8421:(On,wt,V)=>{"use strict";V.d(wt,{Xf:()=>gt});var D=V(655),l=V(1144),q=V(8239),g=V(8306),$e=V(3670),Ke=V(2206),Oe=V(4532),Le=V(6495),he=V(3260),Ve=V(576),Ze=V(7849),Be=V(8822);function gt(Dt){if(Dt instanceof g.y)return Dt;if(null!=Dt){if((0,$e.c)(Dt))return function Ye(Dt){return new g.y(Fe=>{const rt=Dt[Be.L]();if((0,Ve.m)(rt.subscribe))return rt.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Dt);if((0,l.z)(Dt))return function tt(Dt){return new g.y(Fe=>{for(let rt=0;rt<Dt.length&&!Fe.closed;rt++)Fe.next(Dt[rt]);Fe.complete()})}(Dt);if((0,q.t)(Dt))return function Mt(Dt){return new g.y(Fe=>{Dt.then(rt=>{Fe.closed||(Fe.next(rt),Fe.complete())},rt=>Fe.error(rt)).then(null,Ze.h)})}(Dt);if((0,Ke.D)(Dt))return Vt(Dt);if((0,Le.T)(Dt))return function He(Dt){return new g.y(Fe=>{for(const rt of Dt)if(Fe.next(rt),Fe.closed)return;Fe.complete()})}(Dt);if((0,he.L)(Dt))return function Ht(Dt){return Vt((0,he.Q)(Dt))}(Dt)}throw(0,Oe.z)(Dt)}function Vt(Dt){return new g.y(Fe=>{(function an(Dt,Fe){var rt,nn,Bt,Qt;return(0,D.mG)(this,void 0,void 0,function*(){try{for(rt=(0,D.KL)(Dt);!(nn=yield rt.next()).done;)if(Fe.next(nn.value),Fe.closed)return}catch(at){Bt={error:at}}finally{try{nn&&!nn.done&&(Qt=rt.return)&&(yield Qt.call(rt))}finally{if(Bt)throw Bt.error}}Fe.complete()})})(Dt,Fe).catch(rt=>Fe.error(rt))})}},6451:(On,wt,V)=>{"use strict";V.d(wt,{T:()=>Ke});var D=V(8189),l=V(8421),q=V(515),g=V(3269),$e=V(2076);function Ke(...Oe){const Le=(0,g.yG)(Oe),he=(0,g._6)(Oe,1/0),Ve=Oe;return Ve.length?1===Ve.length?(0,l.Xf)(Ve[0]):(0,D.J)(he)((0,$e.D)(Ve,Le)):q.E}},9646:(On,wt,V)=>{"use strict";V.d(wt,{of:()=>q});var D=V(3269),l=V(2076);function q(...g){const $e=(0,D.yG)(g);return(0,l.D)(g,$e)}},5963:(On,wt,V)=>{"use strict";V.d(wt,{H:()=>$e});var D=V(8306),l=V(4986),q=V(3532);function $e(Ke=0,Oe,Le=l.P){let he=-1;return null!=Oe&&((0,q.K)(Oe)?Le=Oe:he=Oe),new D.y(Ve=>{let Ze=function g(Ke){return Ke instanceof Date&&!isNaN(Ke)}(Ke)?+Ke-Le.now():Ke;Ze<0&&(Ze=0);let Be=0;return Le.schedule(function(){Ve.closed||(Ve.next(Be++),0<=he?this.schedule(void 0,he):Ve.complete())},Ze)})}},5403:(On,wt,V)=>{"use strict";V.d(wt,{Q:()=>l});var D=V(930);class l extends D.Lv{constructor(g,$e,Ke,Oe,Le){super(g),this.onFinalize=Le,this._next=$e?function(he){try{$e(he)}catch(Ve){g.error(Ve)}}:super._next,this._error=Oe?function(he){try{Oe(he)}catch(Ve){g.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=Ke?function(){try{Ke()}catch(he){g.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var g;const{closed:$e}=this;super.unsubscribe(),!$e&&(null===(g=this.onFinalize)||void 0===g||g.call(this))}}},262:(On,wt,V)=>{"use strict";V.d(wt,{K:()=>g});var D=V(8421),l=V(5403),q=V(4482);function g($e){return(0,q.e)((Ke,Oe)=>{let Ve,Le=null,he=!1;Le=Ke.subscribe(new l.Q(Oe,void 0,void 0,Ze=>{Ve=(0,D.Xf)($e(Ze,g($e)(Ke))),Le?(Le.unsubscribe(),Le=null,Ve.subscribe(Oe)):he=!0})),he&&(Le.unsubscribe(),Le=null,Ve.subscribe(Oe))})}},4351:(On,wt,V)=>{"use strict";V.d(wt,{b:()=>q});var D=V(5577),l=V(576);function q(g,$e){return(0,l.m)($e)?(0,D.z)(g,$e,1):(0,D.z)(g,1)}},8372:(On,wt,V)=>{"use strict";V.d(wt,{b:()=>g});var D=V(4986),l=V(4482),q=V(5403);function g($e,Ke=D.z){return(0,l.e)((Oe,Le)=>{let he=null,Ve=null,Ze=null;const Be=()=>{if(he){he.unsubscribe(),he=null;const Ye=Ve;Ve=null,Le.next(Ye)}};function gt(){const Ye=Ze+$e,tt=Ke.now();if(tt<Ye)return he=this.schedule(void 0,Ye-tt),void Le.add(he);Be()}Oe.subscribe(new q.Q(Le,Ye=>{Ve=Ye,Ze=Ke.now(),he||(he=Ke.schedule(gt,$e),Le.add(he))},()=>{Be(),Le.complete()},void 0,()=>{Ve=he=null}))})}},6590:(On,wt,V)=>{"use strict";V.d(wt,{d:()=>q});var D=V(4482),l=V(5403);function q(g){return(0,D.e)(($e,Ke)=>{let Oe=!1;$e.subscribe(new l.Q(Ke,Le=>{Oe=!0,Ke.next(Le)},()=>{Oe||Ke.next(g),Ke.complete()}))})}},1884:(On,wt,V)=>{"use strict";V.d(wt,{x:()=>g});var D=V(4671),l=V(4482),q=V(5403);function g(Ke,Oe=D.y){return Ke=null!=Ke?Ke:$e,(0,l.e)((Le,he)=>{let Ve,Ze=!0;Le.subscribe(new q.Q(he,Be=>{const gt=Oe(Be);(Ze||!Ke(Ve,gt))&&(Ze=!1,Ve=gt,he.next(Be))}))})}function $e(Ke,Oe){return Ke===Oe}},9300:(On,wt,V)=>{"use strict";V.d(wt,{h:()=>q});var D=V(4482),l=V(5403);function q(g,$e){return(0,D.e)((Ke,Oe)=>{let Le=0;Ke.subscribe(new l.Q(Oe,he=>g.call($e,he,Le++)&&Oe.next(he)))})}},8746:(On,wt,V)=>{"use strict";V.d(wt,{x:()=>l});var D=V(4482);function l(q){return(0,D.e)((g,$e)=>{try{g.subscribe($e)}finally{$e.add(q)}})}},590:(On,wt,V)=>{"use strict";V.d(wt,{P:()=>Oe});var D=V(6805),l=V(9300),q=V(5698),g=V(6590),$e=V(8068),Ke=V(4671);function Oe(Le,he){const Ve=arguments.length>=2;return Ze=>Ze.pipe(Le?(0,l.h)((Be,gt)=>Le(Be,gt,Ze)):Ke.y,(0,q.q)(1),Ve?(0,g.d)(he):(0,$e.T)(()=>new D.K))}},4004:(On,wt,V)=>{"use strict";V.d(wt,{U:()=>q});var D=V(4482),l=V(5403);function q(g,$e){return(0,D.e)((Ke,Oe)=>{let Le=0;Ke.subscribe(new l.Q(Oe,he=>{Oe.next(g.call($e,he,Le++))}))})}},8189:(On,wt,V)=>{"use strict";V.d(wt,{J:()=>q});var D=V(5577),l=V(4671);function q(g=1/0){return(0,D.z)(l.y,g)}},5577:(On,wt,V)=>{"use strict";V.d(wt,{z:()=>Le});var D=V(4004),l=V(8421),q=V(4482),g=V(9672),$e=V(5403),Oe=V(576);function Le(he,Ve,Ze=1/0){return(0,Oe.m)(Ve)?Le((Be,gt)=>(0,D.U)((Ye,tt)=>Ve(Be,Ye,gt,tt))((0,l.Xf)(he(Be,gt))),Ze):("number"==typeof Ve&&(Ze=Ve),(0,q.e)((Be,gt)=>function Ke(he,Ve,Ze,Be,gt,Ye,tt,Mt){const He=[];let Vt=0,Ht=0,an=!1;const Dt=()=>{an&&!He.length&&!Vt&&Ve.complete()},Fe=nn=>Vt<Be?rt(nn):He.push(nn),rt=nn=>{Ye&&Ve.next(nn),Vt++;let Bt=!1;(0,l.Xf)(Ze(nn,Ht++)).subscribe(new $e.Q(Ve,Qt=>{null==gt||gt(Qt),Ye?Fe(Qt):Ve.next(Qt)},()=>{Bt=!0},void 0,()=>{if(Bt)try{for(Vt--;He.length&&Vt<Be;){const Qt=He.shift();tt?(0,g.f)(Ve,tt,()=>rt(Qt)):rt(Qt)}Dt()}catch(Qt){Ve.error(Qt)}}))};return he.subscribe(new $e.Q(Ve,Fe,()=>{an=!0,Dt()})),()=>{null==Mt||Mt()}}(Be,gt,he,Ze)))}},3099:(On,wt,V)=>{"use strict";V.d(wt,{B:()=>Ke});var D=V(2076),l=V(5698),q=V(7579),g=V(930),$e=V(4482);function Ke(Le={}){const{connector:he=(()=>new q.x),resetOnError:Ve=!0,resetOnComplete:Ze=!0,resetOnRefCountZero:Be=!0}=Le;return gt=>{let Ye=null,tt=null,Mt=null,He=0,Vt=!1,Ht=!1;const an=()=>{null==tt||tt.unsubscribe(),tt=null},Dt=()=>{an(),Ye=Mt=null,Vt=Ht=!1},Fe=()=>{const rt=Ye;Dt(),null==rt||rt.unsubscribe()};return(0,$e.e)((rt,nn)=>{He++,!Ht&&!Vt&&an();const Bt=Mt=null!=Mt?Mt:he();nn.add(()=>{He--,0===He&&!Ht&&!Vt&&(tt=Oe(Fe,Be))}),Bt.subscribe(nn),Ye||(Ye=new g.Hp({next:Qt=>Bt.next(Qt),error:Qt=>{Ht=!0,an(),tt=Oe(Dt,Ve,Qt),Bt.error(Qt)},complete:()=>{Vt=!0,an(),tt=Oe(Dt,Ze),Bt.complete()}}),(0,D.D)(rt).subscribe(Ye))})(gt)}}function Oe(Le,he,...Ve){return!0===he?(Le(),null):!1===he?null:he(...Ve).pipe((0,l.q)(1)).subscribe(()=>Le())}},5684:(On,wt,V)=>{"use strict";V.d(wt,{T:()=>l});var D=V(9300);function l(q){return(0,D.h)((g,$e)=>q<=$e)}},8675:(On,wt,V)=>{"use strict";V.d(wt,{O:()=>g});var D=V(7272),l=V(3269),q=V(4482);function g(...$e){const Ke=(0,l.yG)($e);return(0,q.e)((Oe,Le)=>{(Ke?(0,D.z)($e,Oe,Ke):(0,D.z)($e,Oe)).subscribe(Le)})}},3900:(On,wt,V)=>{"use strict";V.d(wt,{w:()=>g});var D=V(8421),l=V(4482),q=V(5403);function g($e,Ke){return(0,l.e)((Oe,Le)=>{let he=null,Ve=0,Ze=!1;const Be=()=>Ze&&!he&&Le.complete();Oe.subscribe(new q.Q(Le,gt=>{null==he||he.unsubscribe();let Ye=0;const tt=Ve++;(0,D.Xf)($e(gt,tt)).subscribe(he=new q.Q(Le,Mt=>Le.next(Ke?Ke(gt,Mt,tt,Ye++):Mt),()=>{he=null,Be()}))},()=>{Ze=!0,Be()}))})}},5698:(On,wt,V)=>{"use strict";V.d(wt,{q:()=>g});var D=V(515),l=V(4482),q=V(5403);function g($e){return $e<=0?()=>D.E:(0,l.e)((Ke,Oe)=>{let Le=0;Ke.subscribe(new q.Q(Oe,he=>{++Le<=$e&&(Oe.next(he),$e<=Le&&Oe.complete())}))})}},2722:(On,wt,V)=>{"use strict";V.d(wt,{R:()=>$e});var D=V(4482),l=V(5403),q=V(8421),g=V(5032);function $e(Ke){return(0,D.e)((Oe,Le)=>{(0,q.Xf)(Ke).subscribe(new l.Q(Le,()=>Le.complete(),g.Z)),!Le.closed&&Oe.subscribe(Le)})}},8505:(On,wt,V)=>{"use strict";V.d(wt,{b:()=>$e});var D=V(576),l=V(4482),q=V(5403),g=V(4671);function $e(Ke,Oe,Le){const he=(0,D.m)(Ke)||Oe||Le?{next:Ke,error:Oe,complete:Le}:Ke;return he?(0,l.e)((Ve,Ze)=>{var Be;null===(Be=he.subscribe)||void 0===Be||Be.call(he);let gt=!0;Ve.subscribe(new q.Q(Ze,Ye=>{var tt;null===(tt=he.next)||void 0===tt||tt.call(he,Ye),Ze.next(Ye)},()=>{var Ye;gt=!1,null===(Ye=he.complete)||void 0===Ye||Ye.call(he),Ze.complete()},Ye=>{var tt;gt=!1,null===(tt=he.error)||void 0===tt||tt.call(he,Ye),Ze.error(Ye)},()=>{var Ye,tt;gt&&(null===(Ye=he.unsubscribe)||void 0===Ye||Ye.call(he)),null===(tt=he.finalize)||void 0===tt||tt.call(he)}))}):g.y}},8068:(On,wt,V)=>{"use strict";V.d(wt,{T:()=>g});var D=V(6805),l=V(4482),q=V(5403);function g(Ke=$e){return(0,l.e)((Oe,Le)=>{let he=!1;Oe.subscribe(new q.Q(Le,Ve=>{he=!0,Le.next(Ve)},()=>he?Le.complete():Le.error(Ke())))})}function $e(){return new D.K}},4408:(On,wt,V)=>{"use strict";V.d(wt,{o:()=>$e});var D=V(727);class l extends D.w0{constructor(Oe,Le){super()}schedule(Oe,Le=0){return this}}const q={setInterval(...Ke){const{delegate:Oe}=q;return((null==Oe?void 0:Oe.setInterval)||setInterval)(...Ke)},clearInterval(Ke){const{delegate:Oe}=q;return((null==Oe?void 0:Oe.clearInterval)||clearInterval)(Ke)},delegate:void 0};var g=V(8737);class $e extends l{constructor(Oe,Le){super(Oe,Le),this.scheduler=Oe,this.work=Le,this.pending=!1}schedule(Oe,Le=0){if(this.closed)return this;this.state=Oe;const he=this.id,Ve=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(Ve,he,Le)),this.pending=!0,this.delay=Le,this.id=this.id||this.requestAsyncId(Ve,this.id,Le),this}requestAsyncId(Oe,Le,he=0){return q.setInterval(Oe.flush.bind(Oe,this),he)}recycleAsyncId(Oe,Le,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return Le;q.clearInterval(Le)}execute(Oe,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(Oe,Le);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Oe,Le){let Ve,he=!1;try{this.work(Oe)}catch(Ze){he=!0,Ve=Ze||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),Ve}unsubscribe(){if(!this.closed){const{id:Oe,scheduler:Le}=this,{actions:he}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,g.P)(he,this),null!=Oe&&(this.id=this.recycleAsyncId(Le,Oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(On,wt,V)=>{"use strict";V.d(wt,{v:()=>q});var D=V(6063);class l{constructor($e,Ke=l.now){this.schedulerActionCtor=$e,this.now=Ke}schedule($e,Ke=0,Oe){return new this.schedulerActionCtor(this,$e).schedule(Oe,Ke)}}l.now=D.l.now;class q extends l{constructor($e,Ke=l.now){super($e,Ke),this.actions=[],this._active=!1,this._scheduled=void 0}flush($e){const{actions:Ke}=this;if(this._active)return void Ke.push($e);let Oe;this._active=!0;do{if(Oe=$e.execute($e.state,$e.delay))break}while($e=Ke.shift());if(this._active=!1,Oe){for(;$e=Ke.shift();)$e.unsubscribe();throw Oe}}}},4986:(On,wt,V)=>{"use strict";V.d(wt,{z:()=>q,P:()=>g});var D=V(4408);const q=new(V(7565).v)(D.o),g=q},6063:(On,wt,V)=>{"use strict";V.d(wt,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(On,wt,V)=>{"use strict";V.d(wt,{z:()=>D});const D={setTimeout(...l){const{delegate:q}=D;return((null==q?void 0:q.setTimeout)||setTimeout)(...l)},clearTimeout(l){const{delegate:q}=D;return((null==q?void 0:q.clearTimeout)||clearTimeout)(l)},delegate:void 0}},2202:(On,wt,V)=>{"use strict";V.d(wt,{h:()=>l});const l=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(On,wt,V)=>{"use strict";V.d(wt,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(On,wt,V)=>{"use strict";V.d(wt,{K:()=>l});const l=(0,V(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(On,wt,V)=>{"use strict";V.d(wt,{jO:()=>g,yG:()=>$e,_6:()=>Ke});var D=V(576),l=V(3532);function q(Oe){return Oe[Oe.length-1]}function g(Oe){return(0,D.m)(q(Oe))?Oe.pop():void 0}function $e(Oe){return(0,l.K)(q(Oe))?Oe.pop():void 0}function Ke(Oe,Le){return"number"==typeof q(Oe)?Oe.pop():Le}},4742:(On,wt,V)=>{"use strict";V.d(wt,{D:()=>$e});const{isArray:D}=Array,{getPrototypeOf:l,prototype:q,keys:g}=Object;function $e(Oe){if(1===Oe.length){const Le=Oe[0];if(D(Le))return{args:Le,keys:null};if(function Ke(Oe){return Oe&&"object"==typeof Oe&&l(Oe)===q}(Le)){const he=g(Le);return{args:he.map(Ve=>Le[Ve]),keys:he}}}return{args:Oe,keys:null}}},8737:(On,wt,V)=>{"use strict";function D(l,q){if(l){const g=l.indexOf(q);0<=g&&l.splice(g,1)}}V.d(wt,{P:()=>D})},3888:(On,wt,V)=>{"use strict";function D(l){const g=l($e=>{Error.call($e),$e.stack=(new Error).stack});return g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g}V.d(wt,{d:()=>D})},1810:(On,wt,V)=>{"use strict";function D(l,q){return l.reduce((g,$e,Ke)=>(g[$e]=q[Ke],g),{})}V.d(wt,{n:()=>D})},2806:(On,wt,V)=>{"use strict";V.d(wt,{x:()=>q,O:()=>g});var D=V(2416);let l=null;function q($e){if(D.v.useDeprecatedSynchronousErrorHandling){const Ke=!l;if(Ke&&(l={errorThrown:!1,error:null}),$e(),Ke){const{errorThrown:Oe,error:Le}=l;if(l=null,Oe)throw Le}}else $e()}function g($e){D.v.useDeprecatedSynchronousErrorHandling&&l&&(l.errorThrown=!0,l.error=$e)}},9672:(On,wt,V)=>{"use strict";function D(l,q,g,$e=0,Ke=!1){const Oe=q.schedule(function(){g(),Ke?l.add(this.schedule(null,$e)):this.unsubscribe()},$e);if(l.add(Oe),!Ke)return Oe}V.d(wt,{f:()=>D})},4671:(On,wt,V)=>{"use strict";function D(l){return l}V.d(wt,{y:()=>D})},1144:(On,wt,V)=>{"use strict";V.d(wt,{z:()=>D});const D=l=>l&&"number"==typeof l.length&&"function"!=typeof l},2206:(On,wt,V)=>{"use strict";V.d(wt,{D:()=>l});var D=V(576);function l(q){return Symbol.asyncIterator&&(0,D.m)(null==q?void 0:q[Symbol.asyncIterator])}},576:(On,wt,V)=>{"use strict";function D(l){return"function"==typeof l}V.d(wt,{m:()=>D})},3670:(On,wt,V)=>{"use strict";V.d(wt,{c:()=>q});var D=V(8822),l=V(576);function q(g){return(0,l.m)(g[D.L])}},6495:(On,wt,V)=>{"use strict";V.d(wt,{T:()=>q});var D=V(2202),l=V(576);function q(g){return(0,l.m)(null==g?void 0:g[D.h])}},8239:(On,wt,V)=>{"use strict";V.d(wt,{t:()=>l});var D=V(576);function l(q){return(0,D.m)(null==q?void 0:q.then)}},3260:(On,wt,V)=>{"use strict";V.d(wt,{Q:()=>q,L:()=>g});var D=V(655),l=V(576);function q($e){return(0,D.FC)(this,arguments,function*(){const Oe=$e.getReader();try{for(;;){const{value:Le,done:he}=yield(0,D.qq)(Oe.read());if(he)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(Le)}}finally{Oe.releaseLock()}})}function g($e){return(0,l.m)(null==$e?void 0:$e.getReader)}},3532:(On,wt,V)=>{"use strict";V.d(wt,{K:()=>l});var D=V(576);function l(q){return q&&(0,D.m)(q.schedule)}},4482:(On,wt,V)=>{"use strict";V.d(wt,{A:()=>l,e:()=>q});var D=V(576);function l(g){return(0,D.m)(null==g?void 0:g.lift)}function q(g){return $e=>{if(l($e))return $e.lift(function(Ke){try{return g(Ke,this)}catch(Oe){this.error(Oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(On,wt,V)=>{"use strict";V.d(wt,{Z:()=>g});var D=V(4004);const{isArray:l}=Array;function g($e){return(0,D.U)(Ke=>function q($e,Ke){return l(Ke)?$e(...Ke):$e(Ke)}($e,Ke))}},5032:(On,wt,V)=>{"use strict";function D(){}V.d(wt,{Z:()=>D})},7849:(On,wt,V)=>{"use strict";V.d(wt,{h:()=>q});var D=V(2416),l=V(3410);function q(g){l.z.setTimeout(()=>{const{onUnhandledError:$e}=D.v;if(!$e)throw g;$e(g)})}},4532:(On,wt,V)=>{"use strict";function D(l){return new TypeError(`You provided ${null!==l&&"object"==typeof l?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(wt,{z:()=>D})},655:(On,wt,V)=>{"use strict";function Le(at,mt,lt,At){return new(lt||(lt=Promise))(function(Ct,yn){function di(Rn){try{kn(At.next(Rn))}catch(ki){yn(ki)}}function Ui(Rn){try{kn(At.throw(Rn))}catch(ki){yn(ki)}}function kn(Rn){Rn.done?Ct(Rn.value):function Kt(Ct){return Ct instanceof lt?Ct:new lt(function(yn){yn(Ct)})}(Rn.value).then(di,Ui)}kn((At=At.apply(at,mt||[])).next())})}function He(at){return this instanceof He?(this.v=at,this):new He(at)}function Vt(at,mt,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kt,At=lt.apply(at,mt||[]),Ct=[];return Kt={},yn("next"),yn("throw"),yn("return"),Kt[Symbol.asyncIterator]=function(){return this},Kt;function yn(hi){At[hi]&&(Kt[hi]=function(sr){return new Promise(function(xi,In){Ct.push([hi,sr,xi,In])>1||di(hi,sr)})})}function di(hi,sr){try{!function Ui(hi){hi.value instanceof He?Promise.resolve(hi.value.v).then(kn,Rn):ki(Ct[0][2],hi)}(At[hi](sr))}catch(xi){ki(Ct[0][3],xi)}}function kn(hi){di("next",hi)}function Rn(hi){di("throw",hi)}function ki(hi,sr){hi(sr),Ct.shift(),Ct.length&&di(Ct[0][0],Ct[0][1])}}function an(at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,mt=at[Symbol.asyncIterator];return mt?mt.call(at):(at=function Be(at){var mt="function"==typeof Symbol&&Symbol.iterator,lt=mt&&at[mt],At=0;if(lt)return lt.call(at);if(at&&"number"==typeof at.length)return{next:function(){return at&&At>=at.length&&(at=void 0),{value:at&&at[At++],done:!at}}};throw new TypeError(mt?"Object is not iterable.":"Symbol.iterator is not defined.")}(at),lt={},At("next"),At("throw"),At("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function At(Ct){lt[Ct]=at[Ct]&&function(yn){return new Promise(function(di,Ui){!function Kt(Ct,yn,di,Ui){Promise.resolve(Ui).then(function(kn){Ct({value:kn,done:di})},yn)}(di,Ui,(yn=at[Ct](yn)).done,yn.value)})}}}V.d(wt,{mG:()=>Le,qq:()=>He,FC:()=>Vt,KL:()=>an})},1943:function(On){On.exports=function(){"use strict";var wt,V,D;function l(g,$e){if(wt)if(V){var Ke="var sharedChunk = {}; ("+wt+")(sharedChunk); ("+V+")(sharedChunk);",Oe={};wt(Oe),D=$e(Oe),"undefined"!=typeof window&&(D.workerUrl=window.URL.createObjectURL(new Blob([Ke],{type:"text/javascript"})))}else V=$e;else wt=$e}return l(0,function(g){var $e=Ke;function Ke(r,e,s,h){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(h-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=s,this.p2y=h}function Oe(r,e,s,h){const _=new $e(r,e,s,h);return function(x){return _.solve(x)}}Ke.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(void 0===e&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,h=0;h<8;h++){var _=this.sampleCurveX(s)-r;if(Math.abs(_)<e)return s;var x=this.sampleCurveDerivativeX(s);if(Math.abs(x)<1e-6)break;s-=_/x}var w=0,I=1;for(s=r,h=0;h<20&&(_=this.sampleCurveX(s),!(Math.abs(_-r)<e));h++)r>_?w=s:I=s,s=.5*(I-w)+w;return s},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};const Le=Oe(.25,.1,.25,1);function he(r,e,s){return Math.min(s,Math.max(e,r))}function Ve(r,e,s){const h=s-e,_=((r-e)%h+h)%h+e;return _===e?s:_}function Ze(r,...e){for(const s of e)for(const h in s)r[h]=s[h];return r}let Be=1;function gt(r,e){r.forEach(s=>{e[s]&&(e[s]=e[s].bind(e))})}function Ye(r,e,s){const h={};for(const _ in r)h[_]=e.call(s||this,r[_],_,r);return h}function tt(r,e,s){const h={};for(const _ in r)e.call(s||this,r[_],_,r)&&(h[_]=r[_]);return h}function Mt(r){return Array.isArray(r)?r.map(Mt):"object"==typeof r&&r?Ye(r,Mt):r}const He={};function Vt(r){He[r]||("undefined"!=typeof console&&console.warn(r),He[r]=!0)}function Ht(r,e,s){return(s.y-r.y)*(e.x-r.x)>(e.y-r.y)*(s.x-r.x)}function an(r){let e=0;for(let s,h,_=0,x=r.length,w=x-1;_<x;w=_++)s=r[_],h=r[w],e+=(h.x-s.x)*(s.y+h.y);return e}function Dt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Fe(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,_,x)=>{const w=_||x;return e[h]=!w||w.toLowerCase(),""}),e["max-age"]){const s=parseInt(e["max-age"],10);isNaN(s)?delete e["max-age"]:e["max-age"]=s}return e}let rt,nn,Bt=null;function Qt(r){if(null==Bt){const e=r.navigator?r.navigator.userAgent:null;Bt=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Bt}function at(r){return"undefined"!=typeof ImageBitmap&&r instanceof ImageBitmap}const mt={now:performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const e=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(r,e=0){const s=window.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-e,-e,r.width+2*e,r.height+2*e)},resolveURL:r=>(rt||(rt=document.createElement("a")),rt.href=r,rt.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==nn&&(nn=matchMedia("(prefers-reduced-motion: reduce)")),nn.matches)}};var lt=At;function At(r,e){this.x=r,this.y=e}At.prototype={clone:function(){return new At(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,s=r.y-this.y;return e*e+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),s=Math.sin(r),h=s*this.x+e*this.y;return this.x=e*this.x-s*this.y,this.y=h,this},_rotateAround:function(r,e){var s=Math.cos(r),h=Math.sin(r),_=e.y+h*(this.x-e.x)+s*(this.y-e.y);return this.x=e.x+s*(this.x-e.x)-h*(this.y-e.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},At.convert=function(r){return r instanceof At?r:Array.isArray(r)?new At(r[0],r[1]):r};const Kt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ct="mapbox-tiles";let yn,Ui=500,kn=50;function Rn(){"undefined"==typeof caches||yn||(yn=caches.open(Ct))}let ki=1/0;const hi={supported:!1,testSupport:function(r){!In&&xi&&(Qn?ft(r):sr=r)}};let sr,xi,In=!1,Qn=!1;function ft(r){const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,xi),r.isContextLost())return;hi.supported=!0}catch(s){}r.deleteTexture(e),In=!0}"undefined"!=typeof document&&(xi=document.createElement("img"),xi.onload=function(){sr&&ft(sr),sr=null,Qn=!0},xi.onerror=function(){In=!0,sr=null},xi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const kt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(kt);class ln extends Error{constructor(e,s,h){super(e),this.status=s,this.url=h,this.name=this.constructor.name,this.message=e}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const gn=Dt()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function Bn(r,e){const s=new AbortController,h=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:gn(),signal:s.signal});let _=!1,x=!1;return"json"===r.type&&h.headers.set("Accept","application/json"),((w,I,L)=>{if(x)return;const ee=Date.now();fetch(h).then(ae=>{return ae.ok?(se=ae,null,ee,void("arrayBuffer"===r.type?se.arrayBuffer():"json"===r.type?se.json():se.text()).then(Te=>{x||(_=!0,e(null,Te,se.headers.get("Cache-Control"),se.headers.get("Expires")))}).catch(Te=>{x||e(new Error(Te.message))})):e(new ln(ae.statusText,ae.status,r.url));var se}).catch(ae=>{20!==ae.code&&e(new Error(ae.message))})})(),{cancel:()=>{x=!0,_||s.abort()}}}const Jn=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e);if(!Dt()){const h=r.url.substring(0,r.url.indexOf("://"));return(Kt.REGISTERED_PROTOCOLS[h]||Bn)(r,e)}}if(!(/^file:/.test(s=r.url)||/^file:/.test(gn())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Bn(r,e);if(Dt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,e,void 0,!0)}var s;return function(h,_){const x=new XMLHttpRequest;x.open(h.method||"GET",h.url,!0),"arrayBuffer"===h.type&&(x.responseType="arraybuffer");for(const w in h.headers)x.setRequestHeader(w,h.headers[w]);return"json"===h.type&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials="include"===h.credentials,x.onerror=()=>{_(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||0===x.status)&&null!==x.response){let w=x.response;if("json"===h.type)try{w=JSON.parse(x.response)}catch(I){return _(I)}_(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else _(new ln(x.statusText,x.status,h.url))},x.send(h.body),{cancel:()=>x.abort()}}(r,e)},Bi=function(r,e){return Jn(Ze(r,{type:"arrayBuffer"}),e)};function Xi(r){const e=window.document.createElement("a");return e.href=r,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const _i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let qn,Xn;qn=[],Xn=0;const Zn=function(r,e){if(hi.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Xn>=Kt.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:r,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return qn.push(x),x}Xn++;let s=!1;const h=()=>{if(!s)for(s=!0,Xn--;qn.length&&Xn<Kt.MAX_PARALLEL_IMAGE_REQUESTS;){const x=qn.shift(),{requestParameters:w,callback:I,cancelled:L}=x;L||(x.cancel=Zn(w,I).cancel)}},_=Bi(r,(x,w,I,L)=>{var ee,ae,se,me;h(),x?e(x):w&&(ee=w,ae=e,se=I,me=L,"function"==typeof createImageBitmap?function(Ce,Te){const je=new Blob([new Uint8Array(Ce)],{type:"image/png"});createImageBitmap(je).then(et=>{Te(null,et)}).catch(et=>{Te(new Error(`Could not load image because of ${et.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ee,ae):function(Ce,Te,je,et){const yt=new Image;yt.onload=()=>{Te(null,yt),URL.revokeObjectURL(yt.src),yt.onload=null,window.requestAnimationFrame(()=>{yt.src=_i})},yt.onerror=()=>Te(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Gt=new Blob([new Uint8Array(Ce)],{type:"image/png"});yt.cacheControl=je,yt.expires=et,yt.src=Ce.byteLength?URL.createObjectURL(Gt):_i}(ee,ae,se,me))});return{cancel:()=>{_.cancel(),h()}}};function St(r,e,s){s[r]&&-1!==s[r].indexOf(e)||(s[r]=s[r]||[],s[r].push(e))}function $(r,e,s){if(s&&s[r]){const h=s[r].indexOf(e);-1!==h&&s[r].splice(h,1)}}class U{constructor(e,s={}){Ze(this,s),this.type=e}}class R extends U{constructor(e,s={}){super("error",Ze({error:e},s))}}class N{on(e,s){return this._listeners=this._listeners||{},St(e,s,this._listeners),this}off(e,s){return $(e,s,this._listeners),$(e,s,this._oneTimeListeners),this}once(e,s){return this._oneTimeListeners=this._oneTimeListeners||{},St(e,s,this._oneTimeListeners),this}fire(e,s){"string"==typeof e&&(e=new U(e,s||{}));const h=e.type;if(this.listens(h)){e.target=this;const _=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const I of _)I.call(this,e);const x=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const I of x)$(h,I,this._oneTimeListeners),I.call(this,e);const w=this._eventedParent;w&&(Ze(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(e))}else e instanceof R&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,s){return this._eventedParent=e,this._eventedParentData=s,this}}var ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class fe{constructor(e,s,h,_){this.message=(e?`${e}: `:"")+h,_&&(this.identifier=_),null!=s&&s.__line__&&(this.line=s.__line__)}}function nt(r){const e=r.value;return e?[new fe(r.key,e,"constants have been deprecated as of v8")]:[]}function Et(r,...e){for(const s of e)for(const h in s)r[h]=s[h];return r}function _t(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function fn(r){if(Array.isArray(r))return r.map(fn);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const s in r)e[s]=fn(r[s]);return e}return _t(r)}class _n extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}class Hn{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[h,_]of s)this.bindings[h]=_}concat(e){return new Hn(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Fi={kind:"null"},Jt={kind:"number"},hn={kind:"string"},Zt={kind:"boolean"},Oi={kind:"color"},Wn={kind:"object"},Vn={kind:"value"},Rt={kind:"collator"},pt={kind:"formatted"},we={kind:"resolvedImage"};function Ae(r,e){return{kind:"array",itemType:r,N:e}}function ye(r){if("array"===r.kind){const e=ye(r.itemType);return"number"==typeof r.N?`array<${e}, ${r.N}>`:"value"===r.itemType.kind?"array":`array<${e}>`}return r.kind}const dt=[Fi,Jt,hn,Zt,Oi,pt,Wn,Ae(Vn),we];function It(r,e){if("error"===e.kind)return null;if("array"===r.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!It(r.itemType,e.itemType))&&("number"!=typeof r.N||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if("value"===r.kind)for(const s of dt)if(!It(s,e))return null}return`Expected ${ye(r)} but found ${ye(e)} instead.`}function xn(r,e){return e.some(s=>s.kind===r.kind)}function Ei(r,e){return e.some(s=>"null"===s?null===r:"array"===s?Array.isArray(r):"object"===s?r&&!Array.isArray(r)&&"object"==typeof r:s===typeof r)}var Gi,er={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Tt(r){return(r=Math.round(r))<0?0:r>255?255:r}function it(r){return Tt("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function J(r){return(e="%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))<0?0:e>1?1:e;var e}function F(r,e,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?r+(e-r)*s*6:2*s<1?e:3*s<2?r+(e-r)*(2/3-s)*6:r}try{Gi={}.parseCSSColor=function(r){var e,s=r.replace(/ /g,"").toLowerCase();if(s in er)return er[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var h=s.indexOf("("),_=s.indexOf(")");if(-1!==h&&_+1===s.length){var x=s.substr(0,h),w=s.substr(h+1,_-(h+1)).split(","),I=1;switch(x){case"rgba":if(4!==w.length)return null;I=J(w.pop());case"rgb":return 3!==w.length?null:[it(w[0]),it(w[1]),it(w[2]),I];case"hsla":if(4!==w.length)return null;I=J(w.pop());case"hsl":if(3!==w.length)return null;var L=(parseFloat(w[0])%360+360)%360/360,ee=J(w[1]),ae=J(w[2]),se=ae<=.5?ae*(ee+1):ae+ee-ae*ee,me=2*ae-se;return[Tt(255*F(me,se,L+1/3)),Tt(255*F(me,se,L)),Tt(255*F(me,se,L-1/3)),I];default:return null}}return null}}catch(r){}class K{constructor(e,s,h,_=1){this.r=e,this.g=s,this.b=h,this.a=_}static parse(e){if(!e)return;if(e instanceof K)return e;if("string"!=typeof e)return;const s=Gi(e);return s?new K(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[e,s,h,_]=this.toArray();return`rgba(${Math.round(e)},${Math.round(s)},${Math.round(h)},${_})`}toArray(){const{r:e,g:s,b:h,a:_}=this;return 0===_?[0,0,0,0]:[255*e/_,255*s/_,255*h/_,_]}}K.black=new K(0,0,0,1),K.white=new K(1,1,1,1),K.transparent=new K(0,0,0,0),K.red=new K(1,0,0,1);class ge{constructor(e,s,h){this.sensitivity=e?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class De{constructor(e,s,h,_,x){this.text=e,this.image=s,this.scale=h,this.fontStack=_,this.textColor=x}}class ke{constructor(e){this.sections=e}static fromString(e){return new ke([new De(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof ke?e:ke.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const s of this.sections){if(s.image){e.push(["image",s.image.name]);continue}e.push(s.text);const h={};s.fontStack&&(h["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(h["font-scale"]=s.scale),s.textColor&&(h["text-color"]=["rgba"].concat(s.textColor.toArray())),e.push(h)}return e}}class Je{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Je({name:e,available:!1}):null}serialize(){return["image",this.name]}}function We(r,e,s,h){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[r,e,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[r,e,s,h]:[r,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xe(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof K||r instanceof ge||r instanceof ke||r instanceof Je)return!0;if(Array.isArray(r)){for(const e of r)if(!Xe(e))return!1;return!0}if("object"==typeof r){for(const e in r)if(!Xe(r[e]))return!1;return!0}return!1}function st(r){if(null===r)return Fi;if("string"==typeof r)return hn;if("boolean"==typeof r)return Zt;if("number"==typeof r)return Jt;if(r instanceof K)return Oi;if(r instanceof ge)return Rt;if(r instanceof ke)return pt;if(r instanceof Je)return we;if(Array.isArray(r)){const e=r.length;let s;for(const h of r){const _=st(h);if(s){if(s===_)continue;s=Vn;break}s=_}return Ae(s||Vn,e)}return Wn}function Lt(r){const e=typeof r;return null===r?"":"string"===e||"number"===e||"boolean"===e?String(r):r instanceof K||r instanceof ke||r instanceof Je?r.toString():JSON.stringify(r)}class tn{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(2!==e.length)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Xe(e[1]))return s.error("invalid value");const h=e[1];let _=st(h);const x=s.expectedType;return"array"!==_.kind||0!==_.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(_=x),new tn(_,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof K?["rgba"].concat(this.value.toArray()):this.value instanceof ke?this.value.serialize():this.value}}class Ft{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const jt={string:hn,number:Jt,boolean:Zt,object:Wn};class sn{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let h,_=1;const x=e[0];if("array"===x){let I,L;if(e.length>2){const ee=e[1];if("string"!=typeof ee||!(ee in jt)||"object"===ee)return s.error('The item type argument of "array" must be one of string, number, boolean',1);I=jt[ee],_++}else I=Vn;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);L=e[2],_++}h=Ae(I,L)}else h=jt[x];const w=[];for(;_<e.length;_++){const I=s.parse(e[_],_,Vn);if(!I)return null;w.push(I)}return new sn(h,w)}evaluate(e){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(e);if(!It(this.type,st(h)))return h;if(s===this.args.length-1)throw new Ft(`Expected value to be of type ${ye(this.type)}, but found ${ye(st(h))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,s=[e.kind];if("array"===e.kind){const h=e.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){s.push(h.kind);const _=e.N;("number"==typeof _||this.args.length>1)&&s.push(_)}}return s.concat(this.args.map(h=>h.serialize()))}}class En{constructor(e){this.type=pt,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const h=e[1];if(!Array.isArray(h)&&"object"==typeof h)return s.error("First argument must be an image or text section.");const _=[];let x=!1;for(let w=1;w<=e.length-1;++w){const I=e[w];if(x&&"object"==typeof I&&!Array.isArray(I)){x=!1;let L=null;if(I["font-scale"]&&(L=s.parse(I["font-scale"],1,Jt),!L))return null;let ee=null;if(I["text-font"]&&(ee=s.parse(I["text-font"],1,Ae(hn)),!ee))return null;let ae=null;if(I["text-color"]&&(ae=s.parse(I["text-color"],1,Oi),!ae))return null;const se=_[_.length-1];se.scale=L,se.font=ee,se.textColor=ae}else{const L=s.parse(e[w],1,Vn);if(!L)return null;const ee=L.type.kind;if("string"!==ee&&"value"!==ee&&"null"!==ee&&"resolvedImage"!==ee)return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,_.push({content:L,scale:null,font:null,textColor:null})}}return new En(_)}evaluate(e){return new ke(this.sections.map(s=>{const h=s.content.evaluate(e);return st(h)===we?new De("",h,null,null,null):new De(Lt(h),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)}))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const s of this.sections){e.push(s.content.serialize());const h={};s.scale&&(h["font-scale"]=s.scale.serialize()),s.font&&(h["text-font"]=s.font.serialize()),s.textColor&&(h["text-color"]=s.textColor.serialize()),e.push(h)}return e}}class zn{constructor(e){this.type=we,this.input=e}static parse(e,s){if(2!==e.length)return s.error("Expected two arguments.");const h=s.parse(e[1],1,hn);return h?new zn(h):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),h=Je.fromString(s);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(s)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Li={"to-boolean":Zt,"to-color":Oi,"to-number":Jt,"to-string":hn};class li{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const h=e[0];if(("to-boolean"===h||"to-string"===h)&&2!==e.length)return s.error("Expected one argument.");const _=Li[h],x=[];for(let w=1;w<e.length;w++){const I=s.parse(e[w],w,Vn);if(!I)return null;x.push(I)}return new li(_,x)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let s,h;for(const _ of this.args){if(s=_.evaluate(e),h=null,s instanceof K)return s;if("string"==typeof s){const x=e.parseColor(s);if(x)return x}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:We(s[0],s[1],s[2],s[3]),!h))return new K(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Ft(h||`Could not parse color from value '${"string"==typeof s?s:String(JSON.stringify(s))}'`)}if("number"===this.type.kind){let s=null;for(const h of this.args){if(s=h.evaluate(e),null===s)return 0;const _=Number(s);if(!isNaN(_))return _}throw new Ft(`Could not convert ${JSON.stringify(s)} to number.`)}return"formatted"===this.type.kind?ke.fromString(Lt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Je.fromString(Lt(this.args[0].evaluate(e))):Lt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new En([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new zn(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(s=>{e.push(s.serialize())}),e}}const Ci=["Unknown","Point","LineString","Polygon"];class Pn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ci[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=K.parse(e)),s}}class pi{constructor(e,s,h,_){this.name=e,this.type=s,this._evaluate=h,this.args=_}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,s){const h=e[0],_=pi.definitions[h];if(!_)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(_)?_[0]:_.type,w=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,I=w.filter(([ee])=>!Array.isArray(ee)||ee.length===e.length-1);let L=null;for(const[ee,ae]of I){L=new Ur(s.registry,s.path,null,s.scope);const se=[];let me=!1;for(let Ce=1;Ce<e.length;Ce++){const Te=e[Ce],je=Array.isArray(ee)?ee[Ce-1]:ee.type,et=L.parse(Te,1+se.length,je);if(!et){me=!0;break}se.push(et)}if(!me)if(Array.isArray(ee)&&ee.length!==se.length)L.error(`Expected ${ee.length} arguments, but found ${se.length} instead.`);else{for(let Ce=0;Ce<se.length;Ce++){const Te=Array.isArray(ee)?ee[Ce]:ee.type,je=se[Ce];L.concat(Ce+1).checkSubtype(Te,je.type)}if(0===L.errors.length)return new pi(h,x,ae,se)}}if(1===I.length)s.errors.push(...L.errors);else{const ee=(I.length?I:w).map(([se])=>{return me=se,Array.isArray(me)?`(${me.map(ye).join(", ")})`:`(${ye(me.type)}...)`;var me}).join(" | "),ae=[];for(let se=1;se<e.length;se++){const me=s.parse(e[se],1+ae.length);if(!me)return null;ae.push(ye(me.type))}s.error(`Expected arguments of type ${ee}, but found (${ae.join(", ")}) instead.`)}return null}static register(e,s){pi.definitions=s;for(const h in s)e[h]=pi}}class rr{constructor(e,s,h){this.type=Rt,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(2!==e.length)return s.error("Expected one argument.");const h=e[1];if("object"!=typeof h||Array.isArray(h))return s.error("Collator options argument must be an object.");const _=s.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,Zt);if(!_)return null;const x=s.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,Zt);if(!x)return null;let w=null;return h.locale&&(w=s.parse(h.locale,1,hn),!w)?null:new rr(_,x,w)}evaluate(e){return new ge(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const An=8192;function br(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function pr(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function Qo(r,e){const s=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,_=Math.pow(2,e.z);return[Math.round(s*_*An),Math.round(h*_*An)]}function $o(r,e,s){const h=r[0]-e[0],_=r[1]-e[1],x=r[0]-s[0],w=r[1]-s[1];return h*w-x*_==0&&h*x<=0&&_*w<=0}function Mr(r,e){let s=!1;for(let w=0,I=e.length;w<I;w++){const L=e[w];for(let ee=0,ae=L.length;ee<ae-1;ee++){if($o(r,L[ee],L[ee+1]))return!1;(_=L[ee])[1]>(h=r)[1]!=(x=L[ee+1])[1]>h[1]&&h[0]<(x[0]-_[0])*(h[1]-_[1])/(x[1]-_[1])+_[0]&&(s=!s)}}var h,_,x;return s}function ao(r,e){for(let s=0;s<e.length;s++)if(Mr(r,e[s]))return!0;return!1}function Lo(r,e,s,h){const _=h[0]-s[0],x=h[1]-s[1],w=(r[0]-s[0])*x-_*(r[1]-s[1]),I=(e[0]-s[0])*x-_*(e[1]-s[1]);return w>0&&I<0||w<0&&I>0}function dr(r,e,s){for(const ee of s)for(let ae=0;ae<ee.length-1;++ae)if((I=[(w=ee[ae+1])[0]-(x=ee[ae])[0],w[1]-x[1]])[0]*(L=[(_=e)[0]-(h=r)[0],_[1]-h[1]])[1]-I[1]*L[0]!=0&&Lo(h,_,x,w)&&Lo(x,w,h,_))return!0;var h,_,x,w,I,L;return!1}function $i(r,e){for(let s=0;s<r.length;++s)if(!Mr(r[s],e))return!1;for(let s=0;s<r.length-1;++s)if(dr(r[s],r[s+1],e))return!1;return!0}function lo(r,e){for(let s=0;s<e.length;s++)if($i(r,e[s]))return!0;return!1}function Zo(r,e,s){const h=[];for(let _=0;_<r.length;_++){const x=[];for(let w=0;w<r[_].length;w++){const I=Qo(r[_][w],s);br(e,I),x.push(I)}h.push(x)}return h}function Rr(r,e,s){const h=[];for(let _=0;_<r.length;_++){const x=Zo(r[_],e,s);h.push(x)}return h}function Zr(r,e,s,h){if(r[0]<s[0]||r[0]>s[2]){const _=.5*h;let x=r[0]-s[0]>_?-h:s[0]-r[0]>_?h:0;0===x&&(x=r[0]-s[2]>_?-h:s[2]-r[0]>_?h:0),r[0]+=x}br(e,r)}function cs(r,e,s,h){const _=Math.pow(2,h.z)*An,x=[h.x*An,h.y*An],w=[];for(const I of r)for(const L of I){const ee=[L.x+x[0],L.y+x[1]];Zr(ee,e,s,_),w.push(ee)}return w}function zs(r,e,s,h){const _=Math.pow(2,h.z)*An,x=[h.x*An,h.y*An],w=[];for(const L of r){const ee=[];for(const ae of L){const se=[ae.x+x[0],ae.y+x[1]];br(e,se),ee.push(se)}w.push(ee)}if(e[2]-e[0]<=_/2){(I=e)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const L of w)for(const ee of L)Zr(ee,e,s,_)}var I;return w}class to{constructor(e,s){this.type=Zt,this.geojson=e,this.geometries=s}static parse(e,s){if(2!==e.length)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Xe(e[1])){const h=e[1];if("FeatureCollection"===h.type)for(let _=0;_<h.features.length;++_){const x=h.features[_].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new to(h,h.features[_].geometry)}else if("Feature"===h.type){const _=h.geometry.type;if("Polygon"===_||"MultiPolygon"===_)return new to(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new to(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(s,h){const _=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=s.canonicalID();if("Polygon"===h.type){const I=Zo(h.coordinates,x,w),L=cs(s.geometry(),_,x,w);if(!pr(_,x))return!1;for(const ee of L)if(!Mr(ee,I))return!1}if("MultiPolygon"===h.type){const I=Rr(h.coordinates,x,w),L=cs(s.geometry(),_,x,w);if(!pr(_,x))return!1;for(const ee of L)if(!ao(ee,I))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(s,h){const _=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=s.canonicalID();if("Polygon"===h.type){const I=Zo(h.coordinates,x,w),L=zs(s.geometry(),_,x,w);if(!pr(_,x))return!1;for(const ee of L)if(!$i(ee,I))return!1}if("MultiPolygon"===h.type){const I=Rr(h.coordinates,x,w),L=zs(s.geometry(),_,x,w);if(!pr(_,x))return!1;for(const ee of L)if(!lo(ee,I))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function xr(r){if(r instanceof pi&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof to)return!1;let e=!0;return r.eachChild(s=>{e&&!xr(s)&&(e=!1)}),e}function us(r){if(r instanceof pi&&"feature-state"===r.name)return!1;let e=!0;return r.eachChild(s=>{e&&!us(s)&&(e=!1)}),e}function ds(r,e){if(r instanceof pi&&e.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild(h=>{s&&!ds(h,e)&&(s=!1)}),s}class bo{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(2!==e.length||"string"!=typeof e[1])return s.error("'var' expression requires exactly one string literal argument.");const h=e[1];return s.scope.has(h)?new bo(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ur{constructor(e,s=[],h,_=new Hn,x=[]){this.registry=e,this.path=s,this.key=s.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=x,this.expectedType=h}parse(e,s,h,_,x={}){return s?this.concat(s,h,_)._parse(e,x):this._parse(e,x)}_parse(e,s){function h(_,x,w){return"assert"===w?new sn(x,[_]):"coerce"===w?new li(x,[_]):_}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=e[0];if("string"!=typeof _)return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[_];if(x){let w=x.parse(e,this);if(!w)return null;if(this.expectedType){const I=this.expectedType,L=w.type;if("string"!==I.kind&&"number"!==I.kind&&"boolean"!==I.kind&&"object"!==I.kind&&"array"!==I.kind||"value"!==L.kind)if("color"!==I.kind&&"formatted"!==I.kind&&"resolvedImage"!==I.kind||"value"!==L.kind&&"string"!==L.kind){if(this.checkSubtype(I,L))return null}else w=h(w,I,s.typeAnnotation||"coerce");else w=h(w,I,s.typeAnnotation||"assert")}if(!(w instanceof tn)&&"resolvedImage"!==w.type.kind&&qr(w)){const I=new Pn;try{w=new tn(w.type,w.evaluate(I))}catch(L){return this.error(L.message),null}}return w}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,s,h){const _="number"==typeof e?this.path.concat(e):this.path,x=h?this.scope.concat(h):this.scope;return new Ur(this.registry,_,s||null,x,this.errors)}error(e,...s){const h=`${this.key}${s.map(_=>`[${_}]`).join("")}`;this.errors.push(new _n(h,e))}checkSubtype(e,s){const h=It(e,s);return h&&this.error(h),h}}function qr(r){if(r instanceof bo)return qr(r.boundExpression);if(r instanceof pi&&"error"===r.name||r instanceof rr||r instanceof to)return!1;const e=r instanceof li||r instanceof sn;let s=!0;return r.eachChild(h=>{s=e?s&&qr(h):s&&h instanceof tn}),!!s&&xr(r)&&ds(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function No(r,e){const s=r.length-1;let h,_,x=0,w=s,I=0;for(;x<=w;)if(I=Math.floor((x+w)/2),h=r[I],_=r[I+1],h<=e){if(I===s||e<_)return I;x=I+1}else{if(!(h>e))throw new Ft("Input is not a number.");w=I-1}return 0}class Ss{constructor(e,s,h){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[_,x]of h)this.labels.push(_),this.outputs.push(x)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(e[1],1,Jt);if(!h)return null;const _=[];let x=null;s.expectedType&&"value"!==s.expectedType.kind&&(x=s.expectedType);for(let w=1;w<e.length;w+=2){const I=1===w?-1/0:e[w],L=e[w+1],ee=w,ae=w+1;if("number"!=typeof I)return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(_.length&&_[_.length-1][0]>=I)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ee);const se=s.parse(L,ae,x);if(!se)return null;x=x||se.type,_.push([I,se])}return new Ss(x,h,_)}evaluate(e){const s=this.labels,h=this.outputs;if(1===s.length)return h[0].evaluate(e);const _=this.input.evaluate(e);if(_<=s[0])return h[0].evaluate(e);const x=s.length;return _>=s[x-1]?h[x-1].evaluate(e):h[No(s,_)].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&e.push(this.labels[s]),e.push(this.outputs[s].serialize());return e}}function Ir(r,e,s){return r*(1-s)+e*s}var Xo=Object.freeze({__proto__:null,number:Ir,color:function(r,e,s){return new K(Ir(r.r,e.r,s),Ir(r.g,e.g,s),Ir(r.b,e.b,s),Ir(r.a,e.a,s))},array:function(r,e,s){return r.map((h,_)=>Ir(h,e[_],s))}});const As=4/29,no=6/29,da=3*no*no,Rs=Math.PI/180,ha=180/Math.PI;function tr(r){return r>.008856451679035631?Math.pow(r,1/3):r/da+As}function Us(r){return r>no?r*r*r:da*(r-As)}function es(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function mo(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Da(r){const e=mo(r.r),s=mo(r.g),h=mo(r.b),_=tr((.4124564*e+.3575761*s+.1804375*h)/.95047),x=tr((.2126729*e+.7151522*s+.072175*h)/1);return{l:116*x-16,a:500*(_-x),b:200*(x-tr((.0193339*e+.119192*s+.9503041*h)/1.08883)),alpha:r.a}}function co(r){let e=(r.l+16)/116,s=isNaN(r.a)?e:e+r.a/500,h=isNaN(r.b)?e:e-r.b/200;return e=1*Us(e),s=.95047*Us(s),h=1.08883*Us(h),new K(es(3.2404542*s-1.5371385*e-.4985314*h),es(-.969266*s+1.8760108*e+.041556*h),es(.0556434*s-.2040259*e+1.0572252*h),r.alpha)}function za(r,e,s){const h=e-r;return r+s*(h>180||h<-180?h-360*Math.round(h/360):h)}const Io={forward:Da,reverse:co,interpolate:function(r,e,s){return{l:Ir(r.l,e.l,s),a:Ir(r.a,e.a,s),b:Ir(r.b,e.b,s),alpha:Ir(r.alpha,e.alpha,s)}}},hs={forward:function(r){const{l:e,a:s,b:h}=Da(r),_=Math.atan2(h,s)*ha;return{h:_<0?_+360:_,c:Math.sqrt(s*s+h*h),l:e,alpha:r.a}},reverse:function(r){const e=r.h*Rs,s=r.c;return co({l:r.l,a:Math.cos(e)*s,b:Math.sin(e)*s,alpha:r.alpha})},interpolate:function(r,e,s){return{h:za(r.h,e.h,s),c:Ir(r.c,e.c,s),l:Ir(r.l,e.l,s),alpha:Ir(r.alpha,e.alpha,s)}}};var qo=Object.freeze({__proto__:null,lab:Io,hcl:hs});class Pr{constructor(e,s,h,_,x){this.type=e,this.operator=s,this.interpolation=h,this.input=_,this.labels=[],this.outputs=[];for(const[w,I]of x)this.labels.push(w),this.outputs.push(I)}static interpolationFactor(e,s,h,_){let x=0;if("exponential"===e.name)x=xo(s,e.base,h,_);else if("linear"===e.name)x=xo(s,1,h,_);else if("cubic-bezier"===e.name){const w=e.controlPoints;x=new $e(w[0],w[1],w[2],w[3]).solve(xo(s,1,h,_))}return x}static parse(e,s){let[h,_,x,...w]=e;if(!Array.isArray(_)||0===_.length)return s.error("Expected an interpolation type expression.",1);if("linear"===_[0])_={name:"linear"};else if("exponential"===_[0]){const ee=_[1];if("number"!=typeof ee)return s.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:ee}}else{if("cubic-bezier"!==_[0])return s.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const ee=_.slice(1);if(4!==ee.length||ee.some(ae=>"number"!=typeof ae||ae<0||ae>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:ee}}}if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(x=s.parse(x,2,Jt),!x)return null;const I=[];let L=null;"interpolate-hcl"===h||"interpolate-lab"===h?L=Oi:s.expectedType&&"value"!==s.expectedType.kind&&(L=s.expectedType);for(let ee=0;ee<w.length;ee+=2){const ae=w[ee],se=w[ee+1],me=ee+3,Ce=ee+4;if("number"!=typeof ae)return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',me);if(I.length&&I[I.length-1][0]>=ae)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',me);const Te=s.parse(se,Ce,L);if(!Te)return null;L=L||Te.type,I.push([ae,Te])}return"number"===L.kind||"color"===L.kind||"array"===L.kind&&"number"===L.itemType.kind&&"number"==typeof L.N?new Pr(L,h,_,x,I):s.error(`Type ${ye(L)} is not interpolatable.`)}evaluate(e){const s=this.labels,h=this.outputs;if(1===s.length)return h[0].evaluate(e);const _=this.input.evaluate(e);if(_<=s[0])return h[0].evaluate(e);const x=s.length;if(_>=s[x-1])return h[x-1].evaluate(e);const w=No(s,_),I=Pr.interpolationFactor(this.interpolation,_,s[w],s[w+1]),L=h[w].evaluate(e),ee=h[w+1].evaluate(e);return"interpolate"===this.operator?Xo[this.type.kind.toLowerCase()](L,ee,I):"interpolate-hcl"===this.operator?hs.reverse(hs.interpolate(hs.forward(L),hs.forward(ee),I)):Io.reverse(Io.interpolate(Io.forward(L),Io.forward(ee),I))}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,e,this.input.serialize()];for(let h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s}}function xo(r,e,s,h){const _=h-s,x=r-s;return 0===_?0:1===e?x/_:(Math.pow(e,x)-1)/(Math.pow(e,_)-1)}class ps{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let h=null;const _=s.expectedType;_&&"value"!==_.kind&&(h=_);const x=[];for(const I of e.slice(1)){const L=s.parse(I,1+x.length,h,void 0,{typeAnnotation:"omit"});if(!L)return null;h=h||L.type,x.push(L)}const w=_&&x.some(I=>It(_,I.type));return new ps(w?Vn:h,x)}evaluate(e){let s,h=null,_=0;for(const x of this.args)if(_++,h=x.evaluate(e),h&&h instanceof Je&&!h.available&&(s||(s=h.name),h=null,_===this.args.length&&(h=s)),null!==h)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class Bo{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const h=[];for(let x=1;x<e.length-1;x+=2){const w=e[x];if("string"!=typeof w)return s.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return s.error("Variable names must contain only alphanumeric characters or '_'.",x);const I=s.parse(e[x+1],x+1);if(!I)return null;h.push([w,I])}const _=s.parse(e[e.length-1],e.length-1,s.expectedType,h);return _?new Bo(h,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[s,h]of this.bindings)e.push(s,h.serialize());return e.push(this.result.serialize()),e}}class ts{constructor(e,s,h){this.type=e,this.index=s,this.input=h}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Jt),_=s.parse(e[2],2,Ae(s.expectedType||Vn));return h&&_?new ts(_.type.itemType,h,_):null}evaluate(e){const s=this.index.evaluate(e),h=this.input.evaluate(e);if(s<0)throw new Ft(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Ft(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Ft(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class fs{constructor(e,s){this.type=Zt,this.needle=e,this.haystack=s}static parse(e,s){if(3!==e.length)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Vn),_=s.parse(e[2],2,Vn);return h&&_?xn(h.type,[Zt,hn,Jt,Fi,Vn])?new fs(h,_):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(h.type)} instead`):null}evaluate(e){const s=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!Ei(s,["boolean","string","number","null"]))throw new Ft(`Expected first argument to be of type boolean, string, number or null, but found ${ye(st(s))} instead.`);if(!Ei(h,["string","array"]))throw new Ft(`Expected second argument to be of type array or string, but found ${ye(st(h))} instead.`);return h.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class ns{constructor(e,s,h){this.type=Jt,this.needle=e,this.haystack=s,this.fromIndex=h}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Vn),_=s.parse(e[2],2,Vn);if(!h||!_)return null;if(!xn(h.type,[Zt,hn,Jt,Fi,Vn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(h.type)} instead`);if(4===e.length){const x=s.parse(e[3],3,Jt);return x?new ns(h,_,x):null}return new ns(h,_)}evaluate(e){const s=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!Ei(s,["boolean","string","number","null"]))throw new Ft(`Expected first argument to be of type boolean, string, number or null, but found ${ye(st(s))} instead.`);if(!Ei(h,["string","array"]))throw new Ft(`Expected second argument to be of type array or string, but found ${ye(st(h))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(e);return h.indexOf(s,_)}return h.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Fs{constructor(e,s,h,_,x,w){this.inputType=e,this.type=s,this.input=h,this.cases=_,this.outputs=x,this.otherwise=w}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return s.error("Expected an even number of arguments.");let h,_;s.expectedType&&"value"!==s.expectedType.kind&&(_=s.expectedType);const x={},w=[];for(let ee=2;ee<e.length-1;ee+=2){let ae=e[ee];const se=e[ee+1];Array.isArray(ae)||(ae=[ae]);const me=s.concat(ee);if(0===ae.length)return me.error("Expected at least one branch label.");for(const Te of ae){if("number"!=typeof Te&&"string"!=typeof Te)return me.error("Branch labels must be numbers or strings.");if("number"==typeof Te&&Math.abs(Te)>Number.MAX_SAFE_INTEGER)return me.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Te&&Math.floor(Te)!==Te)return me.error("Numeric branch labels must be integer values.");if(h){if(me.checkSubtype(h,st(Te)))return null}else h=st(Te);if(void 0!==x[String(Te)])return me.error("Branch labels must be unique.");x[String(Te)]=w.length}const Ce=s.parse(se,ee,_);if(!Ce)return null;_=_||Ce.type,w.push(Ce)}const I=s.parse(e[1],1,Vn);if(!I)return null;const L=s.parse(e[e.length-1],e.length-1,_);return L?"value"!==I.type.kind&&s.concat(1).checkSubtype(h,I.type)?null:new Fs(h,_,I,x,w,L):null}evaluate(e){const s=this.input.evaluate(e);return(st(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),h=[],_={};for(const w of s){const I=_[this.cases[w]];void 0===I?(_[this.cases[w]]=h.length,h.push([this.cases[w],[w]])):h[I][1].push(w)}const x=w=>"number"===this.inputType.kind?Number(w):w;for(const[w,I]of h)e.push(1===I.length?x(I[0]):I.map(x)),e.push(this.outputs[w].serialize());return e.push(this.otherwise.serialize()),e}}class uo{constructor(e,s,h){this.type=e,this.branches=s,this.otherwise=h}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&"value"!==s.expectedType.kind&&(h=s.expectedType);const _=[];for(let w=1;w<e.length-1;w+=2){const I=s.parse(e[w],w,Zt);if(!I)return null;const L=s.parse(e[w+1],w+1,h);if(!L)return null;_.push([I,L]),h=h||L.type}const x=s.parse(e[e.length-1],e.length-1,h);return x?new uo(h,_,x):null}evaluate(e){for(const[s,h]of this.branches)if(s.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,h]of this.branches)e(s),e(h);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(s=>{e.push(s.serialize())}),e}}class Is{constructor(e,s,h,_){this.type=e,this.input=s,this.beginIndex=h,this.endIndex=_}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const h=s.parse(e[1],1,Vn),_=s.parse(e[2],2,Jt);if(!h||!_)return null;if(!xn(h.type,[Ae(Vn),hn,Vn]))return s.error(`Expected first argument to be of type array or string, but found ${ye(h.type)} instead`);if(4===e.length){const x=s.parse(e[3],3,Jt);return x?new Is(h.type,h,_,x):null}return new Is(h.type,h,_)}evaluate(e){const s=this.input.evaluate(e),h=this.beginIndex.evaluate(e);if(!Ei(s,["string","array"]))throw new Ft(`Expected first argument to be of type array or string, but found ${ye(st(s))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(e);return s.slice(h,_)}return s.slice(h)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ls(r,e){return"=="===r||"!="===r?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ho(r,e,s,h){return 0===h.compare(e,s)}function is(r,e,s){const h="=="!==r&&"!="!==r;return class qx{constructor(x,w,I){this.type=Zt,this.lhs=x,this.rhs=w,this.collator=I,this.hasUntypedArgument="value"===x.type.kind||"value"===w.type.kind}static parse(x,w){if(3!==x.length&&4!==x.length)return w.error("Expected two or three arguments.");const I=x[0];let L=w.parse(x[1],1,Vn);if(!L)return null;if(!Ls(I,L.type))return w.concat(1).error(`"${I}" comparisons are not supported for type '${ye(L.type)}'.`);let ee=w.parse(x[2],2,Vn);if(!ee)return null;if(!Ls(I,ee.type))return w.concat(2).error(`"${I}" comparisons are not supported for type '${ye(ee.type)}'.`);if(L.type.kind!==ee.type.kind&&"value"!==L.type.kind&&"value"!==ee.type.kind)return w.error(`Cannot compare types '${ye(L.type)}' and '${ye(ee.type)}'.`);h&&("value"===L.type.kind&&"value"!==ee.type.kind?L=new sn(ee.type,[L]):"value"!==L.type.kind&&"value"===ee.type.kind&&(ee=new sn(L.type,[ee])));let ae=null;if(4===x.length){if("string"!==L.type.kind&&"string"!==ee.type.kind&&"value"!==L.type.kind&&"value"!==ee.type.kind)return w.error("Cannot use collator to compare non-string types.");if(ae=w.parse(x[3],3,Rt),!ae)return null}return new qx(L,ee,ae)}evaluate(x){const w=this.lhs.evaluate(x),I=this.rhs.evaluate(x);if(h&&this.hasUntypedArgument){const L=st(w),ee=st(I);if(L.kind!==ee.kind||"string"!==L.kind&&"number"!==L.kind)throw new Ft(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${L.kind}, ${ee.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const L=st(w),ee=st(I);if("string"!==L.kind||"string"!==ee.kind)return e(x,w,I)}return this.collator?s(x,w,I,this.collator.evaluate(x)):e(x,w,I)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[r];return this.eachChild(w=>{x.push(w.serialize())}),x}}}const Ps=is("==",function(r,e,s){return e===s},ho),js=is("!=",function(r,e,s){return e!==s},function(r,e,s,h){return!ho(0,e,s,h)}),fr=is("<",function(r,e,s){return e<s},function(r,e,s,h){return h.compare(e,s)<0}),ea=is(">",function(r,e,s){return e>s},function(r,e,s,h){return h.compare(e,s)>0}),Ma=is("<=",function(r,e,s){return e<=s},function(r,e,s,h){return h.compare(e,s)<=0}),Or=is(">=",function(r,e,s){return e>=s},function(r,e,s,h){return h.compare(e,s)>=0});class te{constructor(e,s,h,_,x){this.type=hn,this.number=e,this.locale=s,this.currency=h,this.minFractionDigits=_,this.maxFractionDigits=x}static parse(e,s){if(3!==e.length)return s.error("Expected two arguments.");const h=s.parse(e[1],1,Jt);if(!h)return null;const _=e[2];if("object"!=typeof _||Array.isArray(_))return s.error("NumberFormat options argument must be an object.");let x=null;if(_.locale&&(x=s.parse(_.locale,1,hn),!x))return null;let w=null;if(_.currency&&(w=s.parse(_.currency,1,hn),!w))return null;let I=null;if(_["min-fraction-digits"]&&(I=s.parse(_["min-fraction-digits"],1,Jt),!I))return null;let L=null;return _["max-fraction-digits"]&&(L=s.parse(_["max-fraction-digits"],1,Jt),!L)?null:new te(h,x,w,I,L)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ve{constructor(e){this.type=Jt,this.input=e}static parse(e,s){if(2!==e.length)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=s.parse(e[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?s.error(`Expected argument of type string or array, but found ${ye(h.type)} instead.`):new ve(h):null}evaluate(e){const s=this.input.evaluate(e);if("string"==typeof s||Array.isArray(s))return s.length;throw new Ft(`Expected value to be of type string or array, but found ${ye(st(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(s=>{e.push(s.serialize())}),e}}const ne={"==":Ps,"!=":js,">":ea,"<":fr,">=":Or,"<=":Ma,array:sn,at:ts,boolean:sn,case:uo,coalesce:ps,collator:rr,format:En,image:zn,in:fs,"index-of":ns,interpolate:Pr,"interpolate-hcl":Pr,"interpolate-lab":Pr,length:ve,let:Bo,literal:tn,match:Fs,number:sn,"number-format":te,object:sn,slice:Is,step:Ss,string:sn,"to-boolean":li,"to-color":li,"to-number":li,"to-string":li,var:bo,within:to};function Ee(r,[e,s,h,_]){e=e.evaluate(r),s=s.evaluate(r),h=h.evaluate(r);const x=_?_.evaluate(r):1,w=We(e,s,h,x);if(w)throw new Ft(w);return new K(e/255*x,s/255*x,h/255*x,x)}function ct(r,e){return r in e}function Yt(r,e){const s=e[r];return void 0===s?null:s}function un(r){return{type:r}}function Mn(r){return{result:"success",value:r}}function Di(r){return{result:"error",value:r}}function ai(r){return"data-driven"===r["property-type"]||"cross-faded-data-driven"===r["property-type"]}function mr(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function ci(r){return!!r.expression&&r.expression.interpolated}function Q(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function W(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function B(r){return r}function Me(r,e){const s="color"===e.type,h=r.stops&&"object"==typeof r.stops[0][0],_=h||!(h||void 0!==r.property),x=r.type||(ci(e)?"exponential":"interval");if(s&&((r=Et({},r)).stops&&(r.stops=r.stops.map(ee=>[ee[0],K.parse(ee[1])])),r.default=K.parse(r.default?r.default:e.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!qo[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let w,I,L;if("exponential"===x)w=jr;else if("interval"===x)w=gr;else if("categorical"===x){w=fi,I=Object.create(null);for(const ee of r.stops)I[ee[0]]=ee[1];L=typeof r.stops[0][0]}else{if("identity"!==x)throw new Error(`Unknown function type "${x}"`);w=ms}if(h){const ee={},ae=[];for(let Ce=0;Ce<r.stops.length;Ce++){const Te=r.stops[Ce],je=Te[0].zoom;void 0===ee[je]&&(ee[je]={zoom:je,type:r.type,property:r.property,default:r.default,stops:[]},ae.push(je)),ee[je].stops.push([Te[0].value,Te[1]])}const se=[];for(const Ce of ae)se.push([ee[Ce].zoom,Me(ee[Ce],e)]);const me={name:"linear"};return{kind:"composite",interpolationType:me,interpolationFactor:Pr.interpolationFactor.bind(void 0,me),zoomStops:se.map(Ce=>Ce[0]),evaluate:({zoom:Ce},Te)=>jr({stops:se,base:r.base},e,Ce).evaluate(Ce,Te)}}if(_){const ee="exponential"===x?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:ee,interpolationFactor:Pr.interpolationFactor.bind(void 0,ee),zoomStops:r.stops.map(ae=>ae[0]),evaluate:({zoom:ae})=>w(r,e,ae,I,L)}}return{kind:"source",evaluate(ee,ae){const se=ae&&ae.properties?ae.properties[r.property]:void 0;return void 0===se?$t(r.default,e.default):w(r,e,se,I,L)}}}function $t(r,e,s){return void 0!==r?r:void 0!==e?e:void 0!==s?s:void 0}function fi(r,e,s,h,_){return $t(typeof s===_?h[s]:void 0,r.default,e.default)}function gr(r,e,s){if("number"!==Q(s))return $t(r.default,e.default);const h=r.stops.length;if(1===h||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];const _=No(r.stops.map(x=>x[0]),s);return r.stops[_][1]}function jr(r,e,s){const h=void 0!==r.base?r.base:1;if("number"!==Q(s))return $t(r.default,e.default);const _=r.stops.length;if(1===_||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[_-1][0])return r.stops[_-1][1];const x=No(r.stops.map(ae=>ae[0]),s),w=function(ae,se,me,Ce){const Te=Ce-me,je=ae-me;return 0===Te?0:1===se?je/Te:(Math.pow(se,je)-1)/(Math.pow(se,Te)-1)}(s,h,r.stops[x][0],r.stops[x+1][0]),I=r.stops[x][1],L=r.stops[x+1][1];let ee=Xo[e.type]||B;if(r.colorSpace&&"rgb"!==r.colorSpace){const ae=qo[r.colorSpace];ee=(se,me)=>ae.reverse(ae.interpolate(ae.forward(se),ae.forward(me),w))}return"function"==typeof I.evaluate?{evaluate(...ae){const se=I.evaluate.apply(void 0,ae),me=L.evaluate.apply(void 0,ae);if(void 0!==se&&void 0!==me)return ee(se,me,w)}}:ee(I,L,w)}function ms(r,e,s){return"color"===e.type?s=K.parse(s):"formatted"===e.type?s=ke.fromString(s.toString()):"resolvedImage"===e.type?s=Je.fromString(s.toString()):Q(s)===e.type||"enum"===e.type&&e.values[s]||(s=void 0),$t(s,r.default,e.default)}pi.register(ne,{error:[{kind:"error"},[hn],(r,[e])=>{throw new Ft(e.evaluate(r))}],typeof:[hn,[Vn],(r,[e])=>ye(st(e.evaluate(r)))],"to-rgba":[Ae(Jt,4),[Oi],(r,[e])=>e.evaluate(r).toArray()],rgb:[Oi,[Jt,Jt,Jt],Ee],rgba:[Oi,[Jt,Jt,Jt,Jt],Ee],has:{type:Zt,overloads:[[[hn],(r,[e])=>ct(e.evaluate(r),r.properties())],[[hn,Wn],(r,[e,s])=>ct(e.evaluate(r),s.evaluate(r))]]},get:{type:Vn,overloads:[[[hn],(r,[e])=>Yt(e.evaluate(r),r.properties())],[[hn,Wn],(r,[e,s])=>Yt(e.evaluate(r),s.evaluate(r))]]},"feature-state":[Vn,[hn],(r,[e])=>Yt(e.evaluate(r),r.featureState||{})],properties:[Wn,[],r=>r.properties()],"geometry-type":[hn,[],r=>r.geometryType()],id:[Vn,[],r=>r.id()],zoom:[Jt,[],r=>r.globals.zoom],"heatmap-density":[Jt,[],r=>r.globals.heatmapDensity||0],"line-progress":[Jt,[],r=>r.globals.lineProgress||0],accumulated:[Vn,[],r=>void 0===r.globals.accumulated?null:r.globals.accumulated],"+":[Jt,un(Jt),(r,e)=>{let s=0;for(const h of e)s+=h.evaluate(r);return s}],"*":[Jt,un(Jt),(r,e)=>{let s=1;for(const h of e)s*=h.evaluate(r);return s}],"-":{type:Jt,overloads:[[[Jt,Jt],(r,[e,s])=>e.evaluate(r)-s.evaluate(r)],[[Jt],(r,[e])=>-e.evaluate(r)]]},"/":[Jt,[Jt,Jt],(r,[e,s])=>e.evaluate(r)/s.evaluate(r)],"%":[Jt,[Jt,Jt],(r,[e,s])=>e.evaluate(r)%s.evaluate(r)],ln2:[Jt,[],()=>Math.LN2],pi:[Jt,[],()=>Math.PI],e:[Jt,[],()=>Math.E],"^":[Jt,[Jt,Jt],(r,[e,s])=>Math.pow(e.evaluate(r),s.evaluate(r))],sqrt:[Jt,[Jt],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[Jt,[Jt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[Jt,[Jt],(r,[e])=>Math.log(e.evaluate(r))],log2:[Jt,[Jt],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[Jt,[Jt],(r,[e])=>Math.sin(e.evaluate(r))],cos:[Jt,[Jt],(r,[e])=>Math.cos(e.evaluate(r))],tan:[Jt,[Jt],(r,[e])=>Math.tan(e.evaluate(r))],asin:[Jt,[Jt],(r,[e])=>Math.asin(e.evaluate(r))],acos:[Jt,[Jt],(r,[e])=>Math.acos(e.evaluate(r))],atan:[Jt,[Jt],(r,[e])=>Math.atan(e.evaluate(r))],min:[Jt,un(Jt),(r,e)=>Math.min(...e.map(s=>s.evaluate(r)))],max:[Jt,un(Jt),(r,e)=>Math.max(...e.map(s=>s.evaluate(r)))],abs:[Jt,[Jt],(r,[e])=>Math.abs(e.evaluate(r))],round:[Jt,[Jt],(r,[e])=>{const s=e.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Jt,[Jt],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[Jt,[Jt],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[Zt,[hn,Vn],(r,[e,s])=>r.properties()[e.value]===s.value],"filter-id-==":[Zt,[Vn],(r,[e])=>r.id()===e.value],"filter-type-==":[Zt,[hn],(r,[e])=>r.geometryType()===e.value],"filter-<":[Zt,[hn,Vn],(r,[e,s])=>{const h=r.properties()[e.value],_=s.value;return typeof h==typeof _&&h<_}],"filter-id-<":[Zt,[Vn],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s<h}],"filter->":[Zt,[hn,Vn],(r,[e,s])=>{const h=r.properties()[e.value],_=s.value;return typeof h==typeof _&&h>_}],"filter-id->":[Zt,[Vn],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s>h}],"filter-<=":[Zt,[hn,Vn],(r,[e,s])=>{const h=r.properties()[e.value],_=s.value;return typeof h==typeof _&&h<=_}],"filter-id-<=":[Zt,[Vn],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s<=h}],"filter->=":[Zt,[hn,Vn],(r,[e,s])=>{const h=r.properties()[e.value],_=s.value;return typeof h==typeof _&&h>=_}],"filter-id->=":[Zt,[Vn],(r,[e])=>{const s=r.id(),h=e.value;return typeof s==typeof h&&s>=h}],"filter-has":[Zt,[Vn],(r,[e])=>e.value in r.properties()],"filter-has-id":[Zt,[],r=>null!==r.id()&&void 0!==r.id()],"filter-type-in":[Zt,[Ae(hn)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[Zt,[Ae(Vn)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[Zt,[hn,Ae(Vn)],(r,[e,s])=>s.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[Zt,[hn,Ae(Vn)],(r,[e,s])=>function(h,_,x,w){for(;x<=w;){const I=x+w>>1;if(_[I]===h)return!0;_[I]>h?w=I-1:x=I+1}return!1}(r.properties()[e.value],s.value,0,s.value.length-1)],all:{type:Zt,overloads:[[[Zt,Zt],(r,[e,s])=>e.evaluate(r)&&s.evaluate(r)],[un(Zt),(r,e)=>{for(const s of e)if(!s.evaluate(r))return!1;return!0}]]},any:{type:Zt,overloads:[[[Zt,Zt],(r,[e,s])=>e.evaluate(r)||s.evaluate(r)],[un(Zt),(r,e)=>{for(const s of e)if(s.evaluate(r))return!0;return!1}]]},"!":[Zt,[Zt],(r,[e])=>!e.evaluate(r)],"is-supported-script":[Zt,[hn],(r,[e])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(e.evaluate(r))}],upcase:[hn,[hn],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[hn,[hn],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[hn,un(Vn),(r,e)=>e.map(s=>Lt(s.evaluate(r))).join("")],"resolved-locale":[hn,[Rt],(r,[e])=>e.evaluate(r).resolvedLocale()]});class wo{constructor(e,s){var h;this.expression=e,this._warningHistory={},this._evaluator=new Pn,this._defaultValue=s?"color"===(h=s).type&&W(h.default)?new K(0,0,0,0):"color"===h.type?K.parse(h.default)||null:void 0===h.default?null:h.default:null,this._enumValues=s&&"enum"===s.type?s.values:null}evaluateWithoutErrorHandling(e,s,h,_,x,w){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=_,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(e,s,h,_,x,w){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=_,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const I=this.expression.evaluate(this._evaluator);if(null==I||"number"==typeof I&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new Ft(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,"undefined"!=typeof console&&console.warn(I.message)),this._defaultValue}}}function mn(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in ne}function ue(r,e){const s=new Ur(ne,[],e?function(_){const x={color:Oi,string:hn,number:Jt,enum:hn,boolean:Zt,formatted:pt,resolvedImage:we};return"array"===_.type?Ae(x[_.value]||Vn,_.length):x[_.type]}(e):void 0),h=s.parse(r,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return h?Mn(new wo(h,e)):Di(s.errors)}class M{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent="constant"!==e&&!us(s.expression)}evaluateWithoutErrorHandling(e,s,h,_,x,w){return this._styleExpression.evaluateWithoutErrorHandling(e,s,h,_,x,w)}evaluate(e,s,h,_,x,w){return this._styleExpression.evaluate(e,s,h,_,x,w)}}class S{constructor(e,s,h,_){this.kind=e,this.zoomStops=h,this._styleExpression=s,this.isStateDependent="camera"!==e&&!us(s.expression),this.interpolationType=_}evaluateWithoutErrorHandling(e,s,h,_,x,w){return this._styleExpression.evaluateWithoutErrorHandling(e,s,h,_,x,w)}evaluate(e,s,h,_,x,w){return this._styleExpression.evaluate(e,s,h,_,x,w)}interpolationFactor(e,s,h){return this.interpolationType?Pr.interpolationFactor(this.interpolationType,e,s,h):0}}function j(r,e){const s=ue(r,e);if("error"===s.result)return s;const h=s.value.expression,_=xr(h);if(!_&&!ai(e))return Di([new _n("","data expressions not supported")]);const x=ds(h,["zoom"]);if(!x&&!mr(e))return Di([new _n("","zoom expressions not supported")]);const w=Se(h);return w||x?w instanceof _n?Di([w]):w instanceof Pr&&!ci(e)?Di([new _n("",'"interpolate" expressions cannot be used with this property')]):Mn(w?new S(_?"camera":"composite",s.value,w.labels,w instanceof Pr?w.interpolation:void 0):new M(_?"constant":"source",s.value)):Di([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class de{constructor(e,s){this._parameters=e,this._specification=s,Et(this,Me(this._parameters,this._specification))}static deserialize(e){return new de(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Se(r){let e=null;if(r instanceof Bo)e=Se(r.result);else if(r instanceof ps){for(const s of r.args)if(e=Se(s),e)break}else(r instanceof Ss||r instanceof Pr)&&r.input instanceof pi&&"zoom"===r.input.name&&(e=r);return e instanceof _n||r.eachChild(s=>{const h=Se(s);h instanceof _n?e=h:!e&&h?e=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ge(r){const e=r.key,s=r.value,h=r.valueSpec||{},_=r.objectElementValidators||{},x=r.style,w=r.styleSpec;let I=[];const L=Q(s);if("object"!==L)return[new fe(e,s,`object expected, ${L} found`)];for(const ee in s){const ae=ee.split(".")[0],se=h[ae]||h["*"];let me;if(_[ae])me=_[ae];else if(h[ae])me=si;else if(_["*"])me=_["*"];else{if(!h["*"]){I.push(new fe(e,s[ee],`unknown property "${ee}"`));continue}me=si}I=I.concat(me({key:(e&&`${e}.`)+ee,value:s[ee],valueSpec:se,style:x,styleSpec:w,object:s,objectKey:ee},s))}for(const ee in h)_[ee]||h[ee].required&&void 0===h[ee].default&&void 0===s[ee]&&I.push(new fe(e,s,`missing required property "${ee}"`));return I}function ot(r){const e=r.value,s=r.valueSpec,h=r.style,_=r.styleSpec,x=r.key,w=r.arrayElementValidator||si;if("array"!==Q(e))return[new fe(x,e,`array expected, ${Q(e)} found`)];if(s.length&&e.length!==s.length)return[new fe(x,e,`array length ${s.length} expected, length ${e.length} found`)];if(s["min-length"]&&e.length<s["min-length"])return[new fe(x,e,`array length at least ${s["min-length"]} expected, length ${e.length} found`)];let I={type:s.value,values:s.values};_.$version<7&&(I.function=s.function),"object"===Q(s.value)&&(I=s.value);let L=[];for(let ee=0;ee<e.length;ee++)L=L.concat(w({array:e,arrayIndex:ee,value:e[ee],valueSpec:I,style:h,styleSpec:_,key:`${x}[${ee}]`}));return L}function Pt(r){const e=r.key,s=r.value,h=r.valueSpec;let _=Q(s);return"number"===_&&s!=s&&(_="NaN"),"number"!==_?[new fe(e,s,`number expected, ${_} found`)]:"minimum"in h&&s<h.minimum?[new fe(e,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new fe(e,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function rn(r){const e=r.valueSpec,s=_t(r.value.type);let h,_,x,w={};const I="categorical"!==s&&void 0===r.value.property,L=!I,ee="array"===Q(r.value.stops)&&"array"===Q(r.value.stops[0])&&"object"===Q(r.value.stops[0][0]),ae=Ge({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(Ce){if("identity"===s)return[new fe(Ce.key,Ce.value,'identity function may not have a "stops" property')];let Te=[];const je=Ce.value;return Te=Te.concat(ot({key:Ce.key,value:je,valueSpec:Ce.valueSpec,style:Ce.style,styleSpec:Ce.styleSpec,arrayElementValidator:se})),"array"===Q(je)&&0===je.length&&Te.push(new fe(Ce.key,je,"array must have at least one stop")),Te},default:function(Ce){return si({key:Ce.key,value:Ce.value,valueSpec:e,style:Ce.style,styleSpec:Ce.styleSpec})}}});return"identity"===s&&I&&ae.push(new fe(r.key,r.value,'missing required property "property"')),"identity"===s||r.value.stops||ae.push(new fe(r.key,r.value,'missing required property "stops"')),"exponential"===s&&r.valueSpec.expression&&!ci(r.valueSpec)&&ae.push(new fe(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(L&&!ai(r.valueSpec)?ae.push(new fe(r.key,r.value,"property functions not supported")):I&&!mr(r.valueSpec)&&ae.push(new fe(r.key,r.value,"zoom functions not supported"))),"categorical"!==s&&!ee||void 0!==r.value.property||ae.push(new fe(r.key,r.value,'"property" property is required')),ae;function se(Ce){let Te=[];const je=Ce.value,et=Ce.key;if("array"!==Q(je))return[new fe(et,je,`array expected, ${Q(je)} found`)];if(2!==je.length)return[new fe(et,je,`array length 2 expected, length ${je.length} found`)];if(ee){if("object"!==Q(je[0]))return[new fe(et,je,`object expected, ${Q(je[0])} found`)];if(void 0===je[0].zoom)return[new fe(et,je,"object stop key must have zoom")];if(void 0===je[0].value)return[new fe(et,je,"object stop key must have value")];if(x&&x>_t(je[0].zoom))return[new fe(et,je[0].zoom,"stop zoom values must appear in ascending order")];_t(je[0].zoom)!==x&&(x=_t(je[0].zoom),_=void 0,w={}),Te=Te.concat(Ge({key:`${et}[0]`,value:je[0],valueSpec:{zoom:{}},style:Ce.style,styleSpec:Ce.styleSpec,objectElementValidators:{zoom:Pt,value:me}}))}else Te=Te.concat(me({key:`${et}[0]`,value:je[0],valueSpec:{},style:Ce.style,styleSpec:Ce.styleSpec},je));return mn(fn(je[1]))?Te.concat([new fe(`${et}[1]`,je[1],"expressions are not allowed in function stops.")]):Te.concat(si({key:`${et}[1]`,value:je[1],valueSpec:e,style:Ce.style,styleSpec:Ce.styleSpec}))}function me(Ce,Te){const je=Q(Ce.value),et=_t(Ce.value),yt=null!==Ce.value?Ce.value:Te;if(h){if(je!==h)return[new fe(Ce.key,yt,`${je} stop domain type must match previous stop domain type ${h}`)]}else h=je;if("number"!==je&&"string"!==je&&"boolean"!==je)return[new fe(Ce.key,yt,"stop domain value must be a number, string, or boolean")];if("number"!==je&&"categorical"!==s){let Gt=`number expected, ${je} found`;return ai(e)&&void 0===s&&(Gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new fe(Ce.key,yt,Gt)]}return"categorical"!==s||"number"!==je||isFinite(et)&&Math.floor(et)===et?"categorical"!==s&&"number"===je&&void 0!==_&&et<_?[new fe(Ce.key,yt,"stop domain values must appear in ascending order")]:(_=et,"categorical"===s&&et in w?[new fe(Ce.key,yt,"stop domain values must be unique")]:(w[et]=!0,[])):[new fe(Ce.key,yt,`integer expected, found ${et}`)]}}function Tn(r){const e=("property"===r.expressionContext?j:ue)(fn(r.value),r.valueSpec);if("error"===e.result)return e.value.map(h=>new fe(`${r.key}${h.key}`,r.value,h.message));const s=e.value.expression||e.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!s.outputDefined())return[new fe(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===r.expressionContext&&"layout"===r.propertyType&&!us(s))return[new fe(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext&&!us(s))return[new fe(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!ds(s,["zoom","feature-state"]))return[new fe(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!xr(s))return[new fe(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ni(r){const e=r.key,s=r.value,h=r.valueSpec,_=[];return Array.isArray(h.values)?-1===h.values.indexOf(_t(s))&&_.push(new fe(e,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):-1===Object.keys(h.values).indexOf(_t(s))&&_.push(new fe(e,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),_}function yi(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!yi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const zi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mi(r){if(null==r)return{filter:()=>!0,needGeometry:!1};yi(r)||(r=ur(r));const e=ue(r,zi);if("error"===e.result)throw new Error(e.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,_)=>e.value.evaluate(s,h,{},_),needGeometry:Ni(r)}}function Si(r,e){return r<e?-1:r>e?1:0}function Ni(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(let e=1;e<r.length;e++)if(Ni(r[e]))return!0;return!1}function ur(r){if(!r)return!0;const e=r[0];return r.length<=1?"any"!==e:"=="===e?Fr(r[1],r[2],"=="):"!="===e?gs(Fr(r[1],r[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Fr(r[1],r[2],e):"any"===e?(s=r.slice(1),["any"].concat(s.map(ur))):"all"===e?["all"].concat(r.slice(1).map(ur)):"none"===e?["all"].concat(r.slice(1).map(ur).map(gs)):"in"===e?Wr(r[1],r.slice(2)):"!in"===e?gs(Wr(r[1],r.slice(2))):"has"===e?io(r[1]):"!has"===e?gs(io(r[1])):"within"!==e||r;var s}function Fr(r,e,s){switch(r){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,r,e]}}function Wr(r,e){if(0===e.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",r,["literal",e.sort(Si)]]:["filter-in-small",r,["literal",e]]}}function io(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function gs(r){return["!",r]}function Po(r){return yi(fn(r.value))?Tn(Et({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):go(r)}function go(r){const e=r.value,s=r.key;if("array"!==Q(e))return[new fe(s,e,`array expected, ${Q(e)} found`)];const h=r.styleSpec;let _,x=[];if(e.length<1)return[new fe(s,e,"filter array must have at least 1 element")];switch(x=x.concat(ni({key:`${s}[0]`,value:e[0],valueSpec:h.filter_operator,style:r.style,styleSpec:r.styleSpec})),_t(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===_t(e[1])&&x.push(new fe(s,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&x.push(new fe(s,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(_=Q(e[1]),"string"!==_&&x.push(new fe(`${s}[1]`,e[1],`string expected, ${_} found`)));for(let w=2;w<e.length;w++)_=Q(e[w]),"$type"===_t(e[1])?x=x.concat(ni({key:`${s}[${w}]`,value:e[w],valueSpec:h.geometry_type,style:r.style,styleSpec:r.styleSpec})):"string"!==_&&"number"!==_&&"boolean"!==_&&x.push(new fe(`${s}[${w}]`,e[w],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let w=1;w<e.length;w++)x=x.concat(go({key:`${s}[${w}]`,value:e[w],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":_=Q(e[1]),2!==e.length?x.push(new fe(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==_&&x.push(new fe(`${s}[1]`,e[1],`string expected, ${_} found`));break;case"within":_=Q(e[1]),2!==e.length?x.push(new fe(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==_&&x.push(new fe(`${s}[1]`,e[1],`object expected, ${_} found`))}return x}function rs(r,e){const s=r.key,h=r.style,_=r.styleSpec,x=r.value,w=r.objectKey,I=_[`${e}_${r.layerType}`];if(!I)return[];const L=w.match(/^(.*)-transition$/);if("paint"===e&&L&&I[L[1]]&&I[L[1]].transition)return si({key:s,value:x,valueSpec:_.transition,style:h,styleSpec:_});const ee=r.valueSpec||I[w];if(!ee)return[new fe(s,x,`unknown property "${w}"`)];let ae;if("string"===Q(x)&&ai(ee)&&!ee.tokens&&(ae=/^{([^}]+)}$/.exec(x)))return[new fe(s,x,`"${w}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const se=[];return"symbol"===r.layerType&&("text-field"===w&&h&&!h.glyphs&&se.push(new fe(s,x,'use of "text-field" requires a style "glyphs" property')),"text-font"===w&&W(fn(x))&&"identity"===_t(x.type)&&se.push(new fe(s,x,'"text-font" does not support identity functions'))),se.concat(si({key:r.key,value:x,valueSpec:ee,style:h,styleSpec:_,expressionContext:"property",propertyType:e,propertyKey:w}))}function Wo(r){return rs(r,"paint")}function zo(r){return rs(r,"layout")}function _o(r){let e=[];const s=r.value,h=r.key,_=r.style,x=r.styleSpec;s.type||s.ref||e.push(new fe(h,s,'either "type" or "ref" is required'));let w=_t(s.type);const I=_t(s.ref);if(s.id){const L=_t(s.id);for(let ee=0;ee<r.arrayIndex;ee++){const ae=_.layers[ee];_t(ae.id)===L&&e.push(new fe(h,s.id,`duplicate layer id "${s.id}", previously used at line ${ae.id.__line__}`))}}if("ref"in s){let L;["type","source","source-layer","filter","layout"].forEach(ee=>{ee in s&&e.push(new fe(h,s[ee],`"${ee}" is prohibited for ref layers`))}),_.layers.forEach(ee=>{_t(ee.id)===I&&(L=ee)}),L?L.ref?e.push(new fe(h,s.ref,"ref cannot reference another ref layer")):w=_t(L.type):e.push(new fe(h,s.ref,`ref layer "${I}" not found`))}else if("background"!==w)if(s.source){const L=_.sources&&_.sources[s.source],ee=L&&_t(L.type);L?"vector"===ee&&"raster"===w?e.push(new fe(h,s.source,`layer "${s.id}" requires a raster source`)):"raster"===ee&&"raster"!==w?e.push(new fe(h,s.source,`layer "${s.id}" requires a vector source`)):"vector"!==ee||s["source-layer"]?"raster-dem"===ee&&"hillshade"!==w?e.push(new fe(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!s.paint||!s.paint["line-gradient"]||"geojson"===ee&&L.lineMetrics||e.push(new fe(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new fe(h,s,`layer "${s.id}" must specify a "source-layer"`)):e.push(new fe(h,s.source,`source "${s.source}" not found`))}else e.push(new fe(h,s,'missing required property "source"'));return e=e.concat(Ge({key:h,value:s,valueSpec:x.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>si({key:`${h}.type`,value:s.type,valueSpec:x.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"}),filter:Po,layout:L=>Ge({layer:s,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":ee=>zo(Et({layerType:w},ee))}}),paint:L=>Ge({layer:s,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":ee=>Wo(Et({layerType:w},ee))}})}})),e}function Co(r){const e=r.value,s=r.key,h=Q(e);return"string"!==h?[new fe(s,e,`string expected, ${h} found`)]:[]}const _s={promoteId:function({key:r,value:e}){if("string"===Q(e))return Co({key:r,value:e});{const s=[];for(const h in e)s.push(...Co({key:`${r}.${h}`,value:e[h]}));return s}}};function Va(r){const e=r.value,s=r.key,h=r.styleSpec,_=r.style;if(!e.type)return[new fe(s,e,'"type" is required')];const x=_t(e.type);let w;switch(x){case"vector":case"raster":case"raster-dem":return w=Ge({key:s,value:e,valueSpec:h[`source_${x.replace("-","_")}`],style:r.style,styleSpec:h,objectElementValidators:_s}),w;case"geojson":if(w=Ge({key:s,value:e,valueSpec:h.source_geojson,style:_,styleSpec:h,objectElementValidators:_s}),e.cluster)for(const I in e.clusterProperties){const[L,ee]=e.clusterProperties[I],ae="string"==typeof L?[L,["accumulated"],["get",I]]:L;w.push(...Tn({key:`${s}.${I}.map`,value:ee,expressionContext:"cluster-map"})),w.push(...Tn({key:`${s}.${I}.reduce`,value:ae,expressionContext:"cluster-reduce"}))}return w;case"video":return Ge({key:s,value:e,valueSpec:h.source_video,style:_,styleSpec:h});case"image":return Ge({key:s,value:e,valueSpec:h.source_image,style:_,styleSpec:h});case"canvas":return[new fe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ni({key:`${s}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,styleSpec:h})}}function ta(r){const e=r.value,s=r.styleSpec,h=s.light,_=r.style;let x=[];const w=Q(e);if(void 0===e)return x;if("object"!==w)return x=x.concat([new fe("light",e,`object expected, ${w} found`)]),x;for(const I in e){const L=I.match(/^(.*)-transition$/);x=x.concat(L&&h[L[1]]&&h[L[1]].transition?si({key:I,value:e[I],valueSpec:s.transition,style:_,styleSpec:s}):h[I]?si({key:I,value:e[I],valueSpec:h[I],style:_,styleSpec:s}):[new fe(I,e[I],`unknown property "${I}"`)])}return x}const ii={"*":()=>[],array:ot,boolean:function(r){const e=r.value,s=r.key,h=Q(e);return"boolean"!==h?[new fe(s,e,`boolean expected, ${h} found`)]:[]},number:Pt,color:function(r){const e=r.key,s=r.value,h=Q(s);return"string"!==h?[new fe(e,s,`color expected, ${h} found`)]:null===Gi(s)?[new fe(e,s,`color expected, "${s}" found`)]:[]},constants:nt,enum:ni,filter:Po,function:rn,layer:_o,object:Ge,source:Va,light:ta,string:Co,formatted:function(r){return 0===Co(r).length?[]:Tn(r)},resolvedImage:function(r){return 0===Co(r).length?[]:Tn(r)}};function si(r){const e=r.value,s=r.valueSpec,h=r.styleSpec;return s.expression&&W(_t(e))?rn(r):s.expression&&mn(fn(e))?Tn(r):s.type&&ii[s.type]?ii[s.type](r):Ge(Et({},r,{valueSpec:s.type?h[s.type]:s}))}function Ri(r){const e=r.value,s=r.key,h=Co(r);return h.length||(-1===e.indexOf("{fontstack}")&&h.push(new fe(s,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&h.push(new fe(s,e,'"glyphs" url must include a "{range}" token'))),h}function Ai(r,e=ie){let s=[];return s=s.concat(si({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,objectElementValidators:{glyphs:Ri,"*":()=>[]}})),r.constants&&(s=s.concat(nt({key:"constants",value:r.constants,style:r,styleSpec:e}))),Dr(s)}function Dr(r){return[].concat(r).sort((e,s)=>e.line-s.line)}function ar(r){return function(...e){return Dr(r.apply(this,e))}}Ai.source=ar(Va),Ai.light=ar(ta),Ai.layer=ar(_o),Ai.filter=ar(Po),Ai.paintProperty=ar(Wo),Ai.layoutProperty=ar(zo);const Hr=Ai,Hs=Hr.light,Sr=Hr.paintProperty,Eo=Hr.layoutProperty;function na(r,e){let s=!1;if(e&&e.length)for(const h of e)r.fire(new R(new Error(h.message))),s=!0;return s}class wr{constructor(e,s,h){const _=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const w=new Int32Array(this.arrayBuffer);e=w[0],this.d=(s=w[1])+2*(h=w[2]);for(let L=0;L<this.d*this.d;L++){const ee=w[3+L],ae=w[3+L+1];_.push(ee===ae?null:w.subarray(ee,ae))}const I=w[3+_.length+1];this.keys=w.subarray(w[3+_.length],I),this.bboxes=w.subarray(I),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let w=0;w<this.d*this.d;w++)_.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=e,this.padding=h,this.scale=s/e,this.uid=0;const x=h/s*e;this.min=-x,this.max=e+x}insert(e,s,h,_,x){this._forEachCell(s,h,_,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,s,h,_,x,w){this.cells[x].push(w)}query(e,s,h,_,x){const w=this.min,I=this.max;if(e<=w&&s<=w&&I<=h&&I<=_&&!x)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(e,s,h,_,this._queryCell,L,{},x),L}}_queryCell(e,s,h,_,x,w,I,L){const ee=this.cells[x];if(null!==ee){const ae=this.keys,se=this.bboxes;for(let me=0;me<ee.length;me++){const Ce=ee[me];if(void 0===I[Ce]){const Te=4*Ce;(L?L(se[Te+0],se[Te+1],se[Te+2],se[Te+3]):e<=se[Te+2]&&s<=se[Te+3]&&h>=se[Te+0]&&_>=se[Te+1])?(I[Ce]=!0,w.push(ae[Ce])):I[Ce]=!1}}}}_forEachCell(e,s,h,_,x,w,I,L){const ee=this._convertToCellCoord(e),ae=this._convertToCellCoord(s),se=this._convertToCellCoord(h),me=this._convertToCellCoord(_);for(let Ce=ee;Ce<=se;Ce++)for(let Te=ae;Te<=me;Te++){const je=this.d*Te+Ce;if((!L||L(this._convertFromCellCoord(Ce),this._convertFromCellCoord(Te),this._convertFromCellCoord(Ce+1),this._convertFromCellCoord(Te+1)))&&x.call(this,e,s,h,_,je,w,I,L))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,s=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const _=new Int32Array(s+h+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let x=s;for(let w=0;w<e.length;w++){const I=e[w];_[3+w]=x,_.set(I,x),x+=I.length}return _[3+e.length]=x,_.set(this.keys,x),x+=this.keys.length,_[3+e.length+1]=x,_.set(this.bboxes,x),x+=this.bboxes.length,_.buffer}static serialize(e,s){const h=e.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(e){return new wr(e.buffer)}}const Yr={};function Fn(r,e,s={}){Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),Yr[r]={klass:e,omit:s.omit||[],shallow:s.shallow||[]}}Fn("Object",Object),Fn("TransferableGridIndex",wr),Fn("Color",K),Fn("Error",Error),Fn("ResolvedImage",Je),Fn("StylePropertyFunction",de),Fn("StyleExpression",wo,{omit:["_evaluator"]}),Fn("ZoomDependentExpression",S),Fn("ZoomConstantExpression",M),Fn("CompoundExpression",pi,{omit:["_evaluate"]});for(const r in ne)ne[r]._classRegistryKey||Fn(`Expression_${r}`,ne[r]);function Do(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function ys(r,e){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(Do(r)||at(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const s=r;return e&&e.push(s.buffer),s}if(r instanceof ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const s=[];for(const h of r)s.push(ys(h,e));return s}if("object"==typeof r){const s=r.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const _=s.serialize?s.serialize(r,e):{};if(!s.serialize){for(const x in r){if(!r.hasOwnProperty(x)||Yr[h].omit.indexOf(x)>=0)continue;const w=r[x];_[x]=Yr[h].shallow.indexOf(x)>=0?w:ys(w,e)}r instanceof Error&&(_.message=r.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==h&&(_.$name=h),_}throw new Error("can't serialize object of type "+typeof r)}function Ua(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Do(r)||at(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(Ua);if("object"==typeof r){const e=r.$name||"Object";if(!Yr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:s}=Yr[e];if(!s)throw new Error(`can't deserialize unregistered class ${e}`);if(s.deserialize)return s.deserialize(r);const h=Object.create(s.prototype);for(const _ of Object.keys(r)){if("$name"===_)continue;const x=r[_];h[_]=Yr[e].shallow.indexOf(_)>=0?x:Ua(x)}return h}throw new Error("can't deserialize object of type "+typeof r)}class nl{constructor(){this.first=!0}update(e,s){const h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}const Ln={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function pa(r){for(const e of r)if(Ta(e.charCodeAt(0)))return!0;return!1}function tc(r){for(const e of r)if(!Sa(e.charCodeAt(0)))return!1;return!0}function Sa(r){return!(Ln.Arabic(r)||Ln["Arabic Supplement"](r)||Ln["Arabic Extended-A"](r)||Ln["Arabic Presentation Forms-A"](r)||Ln["Arabic Presentation Forms-B"](r))}function Ta(r){return!(746!==r&&747!==r&&(r<4352||!(Ln["Bopomofo Extended"](r)||Ln.Bopomofo(r)||Ln["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||Ln["CJK Compatibility Ideographs"](r)||Ln["CJK Compatibility"](r)||Ln["CJK Radicals Supplement"](r)||Ln["CJK Strokes"](r)||!(!Ln["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||Ln["CJK Unified Ideographs Extension A"](r)||Ln["CJK Unified Ideographs"](r)||Ln["Enclosed CJK Letters and Months"](r)||Ln["Hangul Compatibility Jamo"](r)||Ln["Hangul Jamo Extended-A"](r)||Ln["Hangul Jamo Extended-B"](r)||Ln["Hangul Jamo"](r)||Ln["Hangul Syllables"](r)||Ln.Hiragana(r)||Ln["Ideographic Description Characters"](r)||Ln.Kanbun(r)||Ln["Kangxi Radicals"](r)||Ln["Katakana Phonetic Extensions"](r)||Ln.Katakana(r)&&12540!==r||!(!Ln["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!Ln["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||Ln["Unified Canadian Aboriginal Syllabics"](r)||Ln["Unified Canadian Aboriginal Syllabics Extended"](r)||Ln["Vertical Forms"](r)||Ln["Yijing Hexagram Symbols"](r)||Ln["Yi Syllables"](r)||Ln["Yi Radicals"](r))))}function os(r){return!(Ta(r)||(e=r,Ln["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ln["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Ln["Letterlike Symbols"](e)||Ln["Number Forms"](e)||Ln["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ln["Control Pictures"](e)&&9251!==e||Ln["Optical Character Recognition"](e)||Ln["Enclosed Alphanumerics"](e)||Ln["Geometric Shapes"](e)||Ln["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ln["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ln["CJK Symbols and Punctuation"](e)||Ln.Katakana(e)||Ln["Private Use Area"](e)||Ln["CJK Compatibility Forms"](e)||Ln["Small Form Variants"](e)||Ln["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function Bl(r){return r>=1424&&r<=2303||Ln["Arabic Presentation Forms-A"](r)||Ln["Arabic Presentation Forms-B"](r)}function Dc(r,e){return!(!e&&Bl(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||Ln.Khmer(r))}function lu(r){for(const e of r)if(Bl(e.charCodeAt(0)))return!0;return!1}const nc="deferred",ja="loading",wl="loaded";let fa=null,Mo="unavailable",Ns=null;const zl=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(Mo="error"),fa&&fa(r)};function ma(){Ha.fire(new U("pluginStateChange",{pluginStatus:Mo,pluginURL:Ns}))}const Ha=new N,ga=function(){return Mo},Cl=function(){if(Mo!==nc||!Ns)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mo=ja,ma(),Ns&&Bi({url:Ns},r=>{r?zl(r):(Mo=wl,ma())})},Vo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mo===wl||null!=Vo.applyArabicShaping,isLoading:()=>Mo===ja,setState(r){Mo=r.pluginStatus,Ns=r.pluginURL},isParsed:()=>null!=Vo.applyArabicShaping&&null!=Vo.processBidirectionalText&&null!=Vo.processStyledBidirectionalText,getPluginURL:()=>Ns};class Br{constructor(e,s){this.zoom=e,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nl,this.transition={})}isSupportedScript(e){return function(s,h){for(const _ of s)if(!Dc(_.charCodeAt(0),h))return!1;return!0}(e,Vo.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,s=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class ia{constructor(e,s){this.property=e,this.value=s,this.expression=function(h,_){if(W(h))return new de(h,_);if(mn(h)){const x=j(h,_);if("error"===x.result)throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=h;return"string"==typeof h&&"color"===_.type&&(x=K.parse(h)),{kind:"constant",evaluate:()=>x}}}(void 0===s?e.specification.default:s,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,s,h){return this.property.possiblyEvaluate(this,e,s,h)}}class z{constructor(e){this.property=e,this.value=new ia(e,void 0)}transitioned(e,s){return new A(this.property,this.value,s,Ze({},e.transition,this.transition),e.now)}untransitioned(){return new A(this.property,this.value,null,{},0)}}class P{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Mt(this._values[e].value.value)}setValue(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new z(this._values[e].property)),this._values[e].value=new ia(this._values[e].property,null===s?void 0:Mt(s))}getTransition(e){return Mt(this._values[e].transition)}setTransition(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new z(this._values[e].property)),this._values[e].transition=Mt(s)||void 0}serialize(){const e={};for(const s of Object.keys(this._values)){const h=this.getValue(s);void 0!==h&&(e[s]=h);const _=this.getTransition(s);void 0!==_&&(e[`${s}-transition`]=_)}return e}transitioned(e,s){const h=new X(this._properties);for(const _ of Object.keys(this._values))h._values[_]=this._values[_].transitioned(e,s._values[_]);return h}untransitioned(){const e=new X(this._properties);for(const s of Object.keys(this._values))e._values[s]=this._values[s].untransitioned();return e}}class A{constructor(e,s,h,_,x){this.property=e,this.value=s,this.begin=x+_.delay||0,this.end=this.begin+_.duration||0,e.specification.transition&&(_.delay||_.duration)&&(this.prior=h)}possiblyEvaluate(e,s,h){const _=e.now||0,x=this.value.possiblyEvaluate(e,s,h),w=this.prior;if(w){if(_>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(_<this.begin)return w.possiblyEvaluate(e,s,h);{const I=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(e,s,h),x,function(L){if(L<=0)return 0;if(L>=1)return 1;const ee=L*L,ae=ee*L;return 4*(L<.5?ae:3*(L-ee)+ae-.75)}(I))}}return x}}class X{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,s,h){const _=new Ue(this._properties);for(const x of Object.keys(this._values))_._values[x]=this._values[x].possiblyEvaluate(e,s,h);return _}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class re{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Mt(this._values[e].value)}setValue(e,s){this._values[e]=new ia(this._values[e].property,null===s?void 0:Mt(s))}serialize(){const e={};for(const s of Object.keys(this._values)){const h=this.getValue(s);void 0!==h&&(e[s]=h)}return e}possiblyEvaluate(e,s,h){const _=new Ue(this._properties);for(const x of Object.keys(this._values))_._values[x]=this._values[x].possiblyEvaluate(e,s,h);return _}}class xe{constructor(e,s,h){this.property=e,this.value=s,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,s,h,_){return this.property.evaluate(this.value,this.parameters,e,s,h,_)}}class Ue{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Re{constructor(e){this.specification=e}possiblyEvaluate(e,s){return e.expression.evaluate(s)}interpolate(e,s,h){const _=Xo[this.specification.type];return _?_(e,s,h):e}}class xt{constructor(e,s){this.specification=e,this.overrides=s}possiblyEvaluate(e,s,h,_){return new xe(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(s,null,{},h,_)}:e.expression,s)}interpolate(e,s,h){if("constant"!==e.value.kind||"constant"!==s.value.kind)return e;if(void 0===e.value.value||void 0===s.value.value)return new xe(this,{kind:"constant",value:void 0},e.parameters);const _=Xo[this.specification.type];return _?new xe(this,{kind:"constant",value:_(e.value.value,s.value.value,h)},e.parameters):e}evaluate(e,s,h,_,x,w){return"constant"===e.kind?e.value:e.evaluate(s,h,_,x,w)}}class ri extends xt{possiblyEvaluate(e,s,h,_){if(void 0===e.value)return new xe(this,{kind:"constant",value:void 0},s);if("constant"===e.expression.kind){const x=e.expression.evaluate(s,null,{},h,_),w="resolvedImage"===e.property.specification.type&&"string"!=typeof x?x.name:x,I=this._calculate(w,w,w,s);return new xe(this,{kind:"constant",value:I},s)}if("camera"===e.expression.kind){const x=this._calculate(e.expression.evaluate({zoom:s.zoom-1}),e.expression.evaluate({zoom:s.zoom}),e.expression.evaluate({zoom:s.zoom+1}),s);return new xe(this,{kind:"constant",value:x},s)}return new xe(this,e.expression,s)}evaluate(e,s,h,_,x,w){if("source"===e.kind){const I=e.evaluate(s,h,_,x,w);return this._calculate(I,I,I,s)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(s.zoom)-1},h,_),e.evaluate({zoom:Math.floor(s.zoom)},h,_),e.evaluate({zoom:Math.floor(s.zoom)+1},h,_),s):e.value}_calculate(e,s,h,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:h,to:s}}interpolate(e){return e}}class Ji{constructor(e){this.specification=e}possiblyEvaluate(e,s,h,_){if(void 0!==e.value){if("constant"===e.expression.kind){const x=e.expression.evaluate(s,null,{},h,_);return this._calculate(x,x,x,s)}return this._calculate(e.expression.evaluate(new Br(Math.floor(s.zoom-1),s)),e.expression.evaluate(new Br(Math.floor(s.zoom),s)),e.expression.evaluate(new Br(Math.floor(s.zoom+1),s)),s)}}_calculate(e,s,h,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:h,to:s}}interpolate(e){return e}}class vi{constructor(e){this.specification=e}possiblyEvaluate(e,s,h,_){return!!e.expression.evaluate(s,null,{},h,_)}interpolate(){return!1}}class Zi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in e){const h=e[s];h.specification.overridable&&this.overridableProperties.push(s);const _=this.defaultPropertyValues[s]=new ia(h,void 0),x=this.defaultTransitionablePropertyValues[s]=new z(h);this.defaultTransitioningPropertyValues[s]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=_.possiblyEvaluate({})}}}Fn("DataDrivenProperty",xt),Fn("DataConstantProperty",Re),Fn("CrossFadedDataDrivenProperty",ri),Fn("CrossFadedProperty",Ji),Fn("ColorRampProperty",vi);const yr="-transition";class Yo extends N{constructor(e,s){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),s.layout&&(this._unevaluatedLayout=new re(s.layout)),s.paint)){this._transitionablePaint=new P(s.paint);for(const h in e.paint)this.setPaintProperty(h,e.paint[h],{validate:!1});for(const h in e.layout)this.setLayoutProperty(h,e.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ue(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,s,h={}){null!=s&&this._validate(Eo,`layers.${this.id}.layout.${e}`,e,s,h)||("visibility"!==e?this._unevaluatedLayout.setValue(e,s):this.visibility=s)}getPaintProperty(e){return e.endsWith(yr)?this._transitionablePaint.getTransition(e.slice(0,-yr.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,s,h={}){if(null!=s&&this._validate(Sr,`layers.${this.id}.paint.${e}`,e,s,h))return!1;if(e.endsWith(yr))return this._transitionablePaint.setTransition(e.slice(0,-yr.length),s||void 0),!1;{const _=this._transitionablePaint._values[e],x="cross-faded-data-driven"===_.property.specification["property-type"],w=_.value.isDataDriven(),I=_.value;this._transitionablePaint.setValue(e,s),this._handleSpecialPaintPropertyUpdate(e);const L=this._transitionablePaint._values[e].value;return L.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(e,I,L)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,s,h){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,s){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,s)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),tt(e,(s,h)=>!(void 0===s||"layout"===h&&!Object.keys(s).length||"paint"===h&&!Object.keys(s).length))}_validate(e,s,h,_,x={}){return(!x||!1!==x.validate)&&na(this,e.call(Hr,{key:s,layerType:this.type,objectKey:h,value:_,styleSpec:ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const s=this.paint.get(e);if(s instanceof xe&&ai(s.property.specification)&&("source"===s.value.kind||"composite"===s.value.kind)&&s.value.isStateDependent)return!0}return!1}}const So={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class f{constructor(e,s){this._structArray=e,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class i{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,s){return e._trim(),s&&(e.isTransferred=!0,s.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const s=Object.create(this.prototype);return s.arrayBuffer=e.arrayBuffer,s.length=e.length,s.capacity=e.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function c(r,e=1){let s=0,h=0;return{members:r.map(_=>{const x=So[_.type].BYTES_PER_ELEMENT,w=s=m(s,Math.max(e,x)),I=_.components||1;return h=Math.max(h,x),s+=x*I,{name:_.name,type:_.type,components:I,offset:w}}),size:m(s,Math.max(h,e)),alignment:e}}function m(r,e){return Math.ceil(r/e)*e}class v extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const _=2*e;return this.int16[_+0]=s,this.int16[_+1]=h,e}}v.prototype.bytesPerElement=4,Fn("StructArrayLayout2i4",v);class E extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,_)}emplace(e,s,h,_,x){const w=4*e;return this.int16[w+0]=s,this.int16[w+1]=h,this.int16[w+2]=_,this.int16[w+3]=x,e}}E.prototype.bytesPerElement=8,Fn("StructArrayLayout4i8",E);class O extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,_,x,w)}emplace(e,s,h,_,x,w,I){const L=6*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.int16[L+2]=_,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=I,e}}O.prototype.bytesPerElement=12,Fn("StructArrayLayout2i4i12",O);class G extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,_,x,w)}emplace(e,s,h,_,x,w,I){const L=4*e,ee=8*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.uint8[ee+4]=_,this.uint8[ee+5]=x,this.uint8[ee+6]=w,this.uint8[ee+7]=I,e}}G.prototype.bytesPerElement=8,Fn("StructArrayLayout2i4ub8",G);class Y extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const _=2*e;return this.float32[_+0]=s,this.float32[_+1]=h,e}}Y.prototype.bytesPerElement=8,Fn("StructArrayLayout2f8",Y);class oe extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w,I,L,ee,ae){const se=this.length;return this.resize(se+1),this.emplace(se,e,s,h,_,x,w,I,L,ee,ae)}emplace(e,s,h,_,x,w,I,L,ee,ae,se){const me=10*e;return this.uint16[me+0]=s,this.uint16[me+1]=h,this.uint16[me+2]=_,this.uint16[me+3]=x,this.uint16[me+4]=w,this.uint16[me+5]=I,this.uint16[me+6]=L,this.uint16[me+7]=ee,this.uint16[me+8]=ae,this.uint16[me+9]=se,e}}oe.prototype.bytesPerElement=20,Fn("StructArrayLayout10ui20",oe);class ce extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w,I,L,ee,ae,se,me){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,e,s,h,_,x,w,I,L,ee,ae,se,me)}emplace(e,s,h,_,x,w,I,L,ee,ae,se,me,Ce){const Te=12*e;return this.int16[Te+0]=s,this.int16[Te+1]=h,this.int16[Te+2]=_,this.int16[Te+3]=x,this.uint16[Te+4]=w,this.uint16[Te+5]=I,this.uint16[Te+6]=L,this.uint16[Te+7]=ee,this.int16[Te+8]=ae,this.int16[Te+9]=se,this.int16[Te+10]=me,this.int16[Te+11]=Ce,e}}ce.prototype.bytesPerElement=24,Fn("StructArrayLayout4i4ui4i24",ce);class be extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h){const _=this.length;return this.resize(_+1),this.emplace(_,e,s,h)}emplace(e,s,h,_){const x=3*e;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=_,e}}be.prototype.bytesPerElement=12,Fn("StructArrayLayout3f12",be);class Ie extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint32[1*e+0]=s,e}}Ie.prototype.bytesPerElement=4,Fn("StructArrayLayout1ul4",Ie);class ze extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w,I,L,ee){const ae=this.length;return this.resize(ae+1),this.emplace(ae,e,s,h,_,x,w,I,L,ee)}emplace(e,s,h,_,x,w,I,L,ee,ae){const se=10*e,me=5*e;return this.int16[se+0]=s,this.int16[se+1]=h,this.int16[se+2]=_,this.int16[se+3]=x,this.int16[se+4]=w,this.int16[se+5]=I,this.uint32[me+3]=L,this.uint16[se+8]=ee,this.uint16[se+9]=ae,e}}ze.prototype.bytesPerElement=20,Fn("StructArrayLayout6i1ul2ui20",ze);class Pe extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,h,_,x,w)}emplace(e,s,h,_,x,w,I){const L=6*e;return this.int16[L+0]=s,this.int16[L+1]=h,this.int16[L+2]=_,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=I,e}}Pe.prototype.bytesPerElement=12,Fn("StructArrayLayout2i2i2i12",Pe);class qe extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,e,s,h,_,x)}emplace(e,s,h,_,x,w){const I=4*e,L=8*e;return this.float32[I+0]=s,this.float32[I+1]=h,this.float32[I+2]=_,this.int16[L+6]=x,this.int16[L+7]=w,e}}qe.prototype.bytesPerElement=16,Fn("StructArrayLayout2f1f2i16",qe);class ut extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,_)}emplace(e,s,h,_,x){const w=12*e,I=3*e;return this.uint8[w+0]=s,this.uint8[w+1]=h,this.float32[I+1]=_,this.float32[I+2]=x,e}}ut.prototype.bytesPerElement=12,Fn("StructArrayLayout2ub2f12",ut);class vt extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h){const _=this.length;return this.resize(_+1),this.emplace(_,e,s,h)}emplace(e,s,h,_){const x=3*e;return this.uint16[x+0]=s,this.uint16[x+1]=h,this.uint16[x+2]=_,e}}vt.prototype.bytesPerElement=6,Fn("StructArrayLayout3ui6",vt);class Nt extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt)}emplace(e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt,Gt){const zt=24*e,en=12*e,pn=48*e;return this.int16[zt+0]=s,this.int16[zt+1]=h,this.uint16[zt+2]=_,this.uint16[zt+3]=x,this.uint32[en+2]=w,this.uint32[en+3]=I,this.uint32[en+4]=L,this.uint16[zt+10]=ee,this.uint16[zt+11]=ae,this.uint16[zt+12]=se,this.float32[en+7]=me,this.float32[en+8]=Ce,this.uint8[pn+36]=Te,this.uint8[pn+37]=je,this.uint8[pn+38]=et,this.uint32[en+10]=yt,this.int16[zt+22]=Gt,e}}Nt.prototype.bytesPerElement=48,Fn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Nt);class bt extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt,Gt,zt,en,pn,on,Yn,ui,Gn,Un,Nn,Kn){const $n=this.length;return this.resize($n+1),this.emplace($n,e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt,Gt,zt,en,pn,on,Yn,ui,Gn,Un,Nn,Kn)}emplace(e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je,et,yt,Gt,zt,en,pn,on,Yn,ui,Gn,Un,Nn,Kn,$n){const Dn=34*e,Mi=17*e;return this.int16[Dn+0]=s,this.int16[Dn+1]=h,this.int16[Dn+2]=_,this.int16[Dn+3]=x,this.int16[Dn+4]=w,this.int16[Dn+5]=I,this.int16[Dn+6]=L,this.int16[Dn+7]=ee,this.uint16[Dn+8]=ae,this.uint16[Dn+9]=se,this.uint16[Dn+10]=me,this.uint16[Dn+11]=Ce,this.uint16[Dn+12]=Te,this.uint16[Dn+13]=je,this.uint16[Dn+14]=et,this.uint16[Dn+15]=yt,this.uint16[Dn+16]=Gt,this.uint16[Dn+17]=zt,this.uint16[Dn+18]=en,this.uint16[Dn+19]=pn,this.uint16[Dn+20]=on,this.uint16[Dn+21]=Yn,this.uint16[Dn+22]=ui,this.uint32[Mi+12]=Gn,this.float32[Mi+13]=Un,this.float32[Mi+14]=Nn,this.float32[Mi+15]=Kn,this.float32[Mi+16]=$n,e}}bt.prototype.bytesPerElement=68,Fn("StructArrayLayout8i15ui1ul4f68",bt);class cn extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.float32[1*e+0]=s,e}}cn.prototype.bytesPerElement=4,Fn("StructArrayLayout1f4",cn);class qt extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,h){const _=this.length;return this.resize(_+1),this.emplace(_,e,s,h)}emplace(e,s,h,_){const x=3*e;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=_,e}}qt.prototype.bytesPerElement=6,Fn("StructArrayLayout3i6",qt);class Xt extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,h){const _=this.length;return this.resize(_+1),this.emplace(_,e,s,h)}emplace(e,s,h,_){const x=4*e;return this.uint32[2*e+0]=s,this.uint16[x+2]=h,this.uint16[x+3]=_,e}}Xt.prototype.bytesPerElement=8,Fn("StructArrayLayout1ul2ui8",Xt);class bn extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s){const h=this.length;return this.resize(h+1),this.emplace(h,e,s)}emplace(e,s,h){const _=2*e;return this.uint16[_+0]=s,this.uint16[_+1]=h,e}}bn.prototype.bytesPerElement=4,Fn("StructArrayLayout2ui4",bn);class wn extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint16[1*e+0]=s,e}}wn.prototype.bytesPerElement=2,Fn("StructArrayLayout1ui2",wn);class Ut extends i{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,h,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,s,h,_)}emplace(e,s,h,_,x){const w=4*e;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=_,this.float32[w+3]=x,e}}Ut.prototype.bytesPerElement=16,Fn("StructArrayLayout4f16",Ut);class Cn extends f{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new lt(this.anchorPointX,this.anchorPointY)}}Cn.prototype.size=20;class Ii extends ze{get(e){return new Cn(this,e)}}Fn("CollisionBoxArray",Ii);class qi extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}qi.prototype.size=48;class Kr extends Nt{get(e){return new qi(this,e)}}Fn("PlacedSymbolArray",Kr);class cr extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}cr.prototype.size=68;class gi extends bt{get(e){return new cr(this,e)}}Fn("SymbolInstanceArray",gi);class hr extends cn{getoffsetX(e){return this.float32[1*e+0]}}Fn("GlyphOffsetArray",hr);class lr extends qt{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Fn("SymbolLineVertexArray",lr);class Qi extends f{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qi.prototype.size=8;class Lr extends Xt{get(e){return new Qi(this,e)}}Fn("FeatureIndexArray",Lr);class ra extends v{}class Aa extends v{}class _a extends O{}class ya extends G{}class Ga extends Y{}class ss extends oe{}class Tr extends ce{}class yo extends be{}class _r extends Ie{}class Uo extends Pe{}class vs extends ut{}class Cr extends vt{}class il extends bn{}const ic=c([{name:"a_pos",components:2,type:"Int16"}],4),{members:rc}=ic;class Jr{constructor(e=[]){this.segments=e}prepareSegment(e,s,h,_){let x=this.segments[this.segments.length-1];return e>Jr.MAX_VERTEX_ARRAY_LENGTH&&Vt(`Max vertices per segment is ${Jr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!x||x.vertexLength+e>Jr.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==_)&&(x={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},void 0!==_&&(x.sortKey=_),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const e of this.segments)for(const s in e.vaos)e.vaos[s].destroy()}static simpleSegment(e,s,h,_){return new Jr([{vertexOffset:e,primitiveOffset:s,vertexLength:h,primitiveLength:_,vaos:{},sortKey:0}])}}function El(r,e){return 256*(r=he(Math.floor(r),0,255))+he(Math.floor(e),0,255)}Jr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fn("SegmentVector",Jr);const Dl=c([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Gs={exports:{}},Ml=function(r,e){var s,h,_,x,w,I,L,ee;for(h=r.length-(s=3&r.length),_=e,w=3432918353,I=461845907,ee=0;ee<h;)L=255&r.charCodeAt(ee)|(255&r.charCodeAt(++ee))<<8|(255&r.charCodeAt(++ee))<<16|(255&r.charCodeAt(++ee))<<24,++ee,_=27492+(65535&(x=5*(65535&(_=(_^=L=(65535&(L=(L=(65535&L)*w+(((L>>>16)*w&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,s){case 3:L^=(255&r.charCodeAt(ee+2))<<16;case 2:L^=(255&r.charCodeAt(ee+1))<<8;case 1:_^=L=(65535&(L=(L=(65535&(L^=255&r.charCodeAt(ee)))*w+(((L>>>16)*w&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295}return _^=r.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0},oc=function(r,e){for(var s,h=r.length,_=e^h,x=0;h>=4;)s=1540483477*(65535&(s=255&r.charCodeAt(x)|(255&r.charCodeAt(++x))<<8|(255&r.charCodeAt(++x))<<16|(255&r.charCodeAt(++x))<<24))+((1540483477*(s>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++x;switch(h){case 3:_^=(255&r.charCodeAt(x+2))<<16;case 2:_^=(255&r.charCodeAt(x+1))<<8;case 1:_=1540483477*(65535&(_^=255&r.charCodeAt(x)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};Gs.exports=Ml,Gs.exports.murmur3=Ml,Gs.exports.murmur2=oc;var dd=Gs.exports;class cu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,s,h,_){this.ids.push(Rh(e)),this.positions.push(s,h,_)}getPositions(e){const s=Rh(e);let h=0,_=this.ids.length-1;for(;h<_;){const w=h+_>>1;this.ids[w]>=s?_=w:h=w+1}const x=[];for(;this.ids[h]===s;)x.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return x}static serialize(e,s){const h=new Float64Array(e.ids),_=new Uint32Array(e.positions);return uu(h,_,0,h.length-1),s&&s.push(h.buffer,_.buffer),{ids:h,positions:_}}static deserialize(e){const s=new cu;return s.ids=e.ids,s.positions=e.positions,s.indexed=!0,s}}function Rh(r){const e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:dd(String(r))}function uu(r,e,s,h){for(;s<h;){const _=r[s+h>>1];let x=s-1,w=h+1;for(;;){do{x++}while(r[x]<_);do{w--}while(r[w]>_);if(x>=w)break;du(r,x,w),du(e,3*x,3*w),du(e,3*x+1,3*w+1),du(e,3*x+2,3*w+2)}w-s<h-w?(uu(r,e,s,w),s=w+1):(uu(r,e,w+1,h),h=w)}}function du(r,e,s){const h=r[e];r[e]=r[s],r[s]=h}Fn("FeaturePositionMap",cu);class Ia{constructor(e,s){this.gl=e.gl,this.location=s}}class Vl extends Ia{constructor(e,s){super(e,s),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Fh extends Ia{constructor(e,s){super(e,s),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Oo extends Ia{constructor(e,s){super(e,s),this.current=K.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Lh=new Float32Array(16);function Mc(r){return[El(255*r.r,255*r.g),El(255*r.b,255*r.a)]}class Ul{constructor(e,s,h){this.value=e,this.uniformNames=s.map(_=>`u_${_}`),this.type=h}setUniform(e,s,h){e.set(h.constantOr(this.value))}getBinding(e,s,h){return"color"===this.type?new Oo(e,s):new Vl(e,s)}}class va{constructor(e,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=e.tlbr}setUniform(e,s,h,_){const x="u_pattern_to"===_?this.patternTo:"u_pattern_from"===_?this.patternFrom:"u_pixel_ratio_to"===_?this.pixelRatioTo:"u_pixel_ratio_from"===_?this.pixelRatioFrom:null;x&&e.set(x)}getBinding(e,s,h){return"u_pattern"===h.substr(0,9)?new Fh(e,s):new Vl(e,s)}}class $a{constructor(e,s,h,_){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(e,s,h,_,x){const w=this.paintVertexArray.length,I=this.expression.evaluate(new Br(0),s,{},_,[],x);this.paintVertexArray.resize(e),this._setPaintValue(w,e,I)}updatePaintArray(e,s,h,_){const x=this.expression.evaluate({zoom:0},h,_);this._setPaintValue(e,s,x)}_setPaintValue(e,s,h){if("color"===this.type){const _=Mc(h);for(let x=e;x<s;x++)this.paintVertexArray.emplace(x,_[0],_[1])}else{for(let _=e;_<s;_++)this.paintVertexArray.emplace(_,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pa{constructor(e,s,h,_,x,w){this.expression=e,this.uniformNames=s.map(I=>`u_${I}_t`),this.type=h,this.useIntegerZoom=_,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=s.map(I=>({name:`a_${I}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(e,s,h,_,x){const w=this.expression.evaluate(new Br(this.zoom),s,{},_,[],x),I=this.expression.evaluate(new Br(this.zoom+1),s,{},_,[],x),L=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(L,e,w,I)}updatePaintArray(e,s,h,_){const x=this.expression.evaluate({zoom:this.zoom},h,_),w=this.expression.evaluate({zoom:this.zoom+1},h,_);this._setPaintValue(e,s,x,w)}_setPaintValue(e,s,h,_){if("color"===this.type){const x=Mc(h),w=Mc(_);for(let I=e;I<s;I++)this.paintVertexArray.emplace(I,x[0],x[1],w[0],w[1])}else{for(let x=e;x<s;x++)this.paintVertexArray.emplace(x,h,_);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(_))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,_=he(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(_)}getBinding(e,s,h){return new Vl(e,s)}}class rl{constructor(e,s,h,_,x,w){this.expression=e,this.type=s,this.useIntegerZoom=h,this.zoom=_,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(e,s,h){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(_,e,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(e,s,h,_,x){this._setPaintValues(e,s,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(e,s,h,_){if(!_||!h)return;const{min:x,mid:w,max:I}=h,L=_[x],ee=_[w],ae=_[I];if(L&&ee&&ae)for(let se=e;se<s;se++)this.zoomInPaintVertexArray.emplace(se,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],ee.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(se,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],ae.tl[0],ae.tl[1],ae.br[0],ae.br[1],ee.pixelRatio,ae.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Dl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Dl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class jl{constructor(e,s,h){this.binders={},this._buffers=[];const _=[];for(const x in e.paint._values){if(!h(x))continue;const w=e.paint.get(x);if(!(w instanceof xe&&ai(w.property.specification)))continue;const I=hd(x,e.type),L=w.value,ee=w.property.specification.type,ae=w.property.useIntegerZoom,se=w.property.specification["property-type"],me="cross-faded"===se||"cross-faded-data-driven"===se;if("constant"===L.kind)this.binders[x]=me?new va(L.value,I):new Ul(L.value,I,ee),_.push(`/u_${x}`);else if("source"===L.kind||me){const Ce=Hl(x,ee,"source");this.binders[x]=me?new rl(L,ee,ae,s,Ce,e.id):new $a(L,I,ee,Ce),_.push(`/a_${x}`)}else{const Ce=Hl(x,ee,"composite");this.binders[x]=new Pa(L,I,ee,ae,s,Ce),_.push(`/z_${x}`)}}this.cacheKey=_.sort().join("")}getMaxValue(e){const s=this.binders[e];return s instanceof $a||s instanceof Pa?s.maxValue:0}populatePaintArrays(e,s,h,_,x){for(const w in this.binders){const I=this.binders[w];(I instanceof $a||I instanceof Pa||I instanceof rl)&&I.populatePaintArray(e,s,h,_,x)}}setConstantPatternPositions(e,s){for(const h in this.binders){const _=this.binders[h];_ instanceof va&&_.setConstantPatternPositions(e,s)}}updatePaintArrays(e,s,h,_,x){let w=!1;for(const I in e){const L=s.getPositions(I);for(const ee of L){const ae=h.feature(ee.index);for(const se in this.binders){const me=this.binders[se];if((me instanceof $a||me instanceof Pa||me instanceof rl)&&!0===me.expression.isStateDependent){const Ce=_.paint.get(se);me.expression=Ce.value,me.updatePaintArray(ee.start,ee.end,ae,e[I],x),w=!0}}}}return w}defines(){const e=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Ul||h instanceof va)&&e.push(...h.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return e}getBinderAttributes(){const e=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof $a||h instanceof Pa)for(let _=0;_<h.paintVertexAttributes.length;_++)e.push(h.paintVertexAttributes[_].name);else if(h instanceof rl)for(let _=0;_<Dl.members.length;_++)e.push(Dl.members[_].name)}return e}getBinderUniforms(){const e=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ul||h instanceof va||h instanceof Pa)for(const _ of h.uniformNames)e.push(_)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,s){const h=[];for(const _ in this.binders){const x=this.binders[_];if(x instanceof Ul||x instanceof va||x instanceof Pa)for(const w of x.uniformNames)if(s[w]){const I=x.getBinding(e,s[w],w);h.push({name:w,property:_,binding:I})}}return h}setUniforms(e,s,h,_){for(const{name:x,property:w,binding:I}of s)this.binders[w].setUniform(I,_,h.get(w),x)}updatePaintBuffers(e){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(e&&h instanceof rl){const _=2===e.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(h instanceof $a||h instanceof Pa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(const s in this.binders){const h=this.binders[s];(h instanceof $a||h instanceof Pa||h instanceof rl)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const s=this.binders[e];(s instanceof $a||s instanceof Pa||s instanceof rl)&&s.destroy()}}}class $s{constructor(e,s,h=(()=>!0)){this.programConfigurations={};for(const _ of e)this.programConfigurations[_.id]=new jl(_,s,h);this.needsUpload=!1,this._featureMap=new cu,this._bufferOffset=0}populatePaintArrays(e,s,h,_,x,w){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(e,s,_,x,w);void 0!==s.id&&this._featureMap.add(s.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,s,h,_){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(e,this._featureMap,s,x,_)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function hd(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function Hl(r,e,s){const _={"line-pattern":{source:ss,composite:ss},"fill-pattern":{source:ss,composite:ss},"fill-extrusion-pattern":{source:ss,composite:ss}}[r];return _&&_[s]||{color:{source:Y,composite:Ut},number:{source:cn,composite:Y}}[e][s]}Fn("ConstantBinder",Ul),Fn("CrossFadedConstantBinder",va),Fn("SourceExpressionBinder",$a),Fn("CrossFadedCompositeBinder",rl),Fn("CompositeExpressionBinder",Pa),Fn("ProgramConfiguration",jl,{omit:["_buffers"]}),Fn("ProgramConfigurationSet",$s);var ko=8192;const hu=Math.pow(2,14)-1,pu=-hu-1;function Za(r){const e=ko/r.extent,s=r.loadGeometry();for(let h=0;h<s.length;h++){const _=s[h];for(let x=0;x<_.length;x++){const w=_[x],I=Math.round(w.x*e),L=Math.round(w.y*e);w.x=he(I,pu,hu),w.y=he(L,pu,hu),(I<w.x||I>w.x+1||L<w.y||L>w.y+1)&&Vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Zs(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?Za(r):[]}}function Sl(r,e,s,h,_){r.emplaceBack(2*e+(h+1)/2,2*s+(_+1)/2)}class pd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ra,this.indexArray=new Cr,this.segments=new Jr,this.programConfigurations=new $s(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){const _=this.layers[0],x=[];let w=null,I=!1;"circle"===_.type&&(w=_.layout.get("circle-sort-key"),I=!w.isConstant());for(const{feature:L,id:ee,index:ae,sourceLayerIndex:se}of e){const me=this.layers[0]._featureFilter.needGeometry,Ce=Zs(L,me);if(!this.layers[0]._featureFilter.filter(new Br(this.zoom),Ce,h))continue;const Te=I?w.evaluate(Ce,{},h):void 0,je={id:ee,properties:L.properties,type:L.type,sourceLayerIndex:se,index:ae,geometry:me?Ce.geometry:Za(L),patterns:{},sortKey:Te};x.push(je)}I&&x.sort((L,ee)=>L.sortKey-ee.sortKey);for(const L of x){const{geometry:ee,index:ae,sourceLayerIndex:se}=L,me=e[ae].feature;this.addFeature(L,ee,ae,h),s.featureIndex.insert(me,ee,ae,se,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,h,_){for(const x of s)for(const w of x){const I=w.x,L=w.y;if(I<0||I>=ko||L<0||L>=ko)continue;const ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),ae=ee.vertexLength;Sl(this.layoutVertexArray,I,L,-1,-1),Sl(this.layoutVertexArray,I,L,1,-1),Sl(this.layoutVertexArray,I,L,1,1),Sl(this.layoutVertexArray,I,L,-1,1),this.indexArray.emplaceBack(ae,ae+1,ae+2),this.indexArray.emplaceBack(ae,ae+3,ae+2),ee.vertexLength+=4,ee.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{},_)}}function Tl(r,e){for(let s=0;s<r.length;s++)if(ac(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(ac(r,e[s]))return!0;return!!Tc(r,e)}function sc(r,e,s){return!!ac(r,e)||!!Nh(e,r,s)}function Sc(r,e){if(1===r.length)return md(e,r[0]);for(let s=0;s<e.length;s++){const h=e[s];for(let _=0;_<h.length;_++)if(ac(r,h[_]))return!0}for(let s=0;s<r.length;s++)if(md(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(Tc(r,e[s]))return!0;return!1}function Nm(r,e,s){if(r.length>1){if(Tc(r,e))return!0;for(let h=0;h<e.length;h++)if(Nh(e[h],r,s))return!0}for(let h=0;h<r.length;h++)if(Nh(r[h],e,s))return!0;return!1}function Tc(r,e){if(0===r.length||0===e.length)return!1;for(let s=0;s<r.length-1;s++){const h=r[s],_=r[s+1];for(let x=0;x<e.length-1;x++)if(Zp(h,_,e[x],e[x+1]))return!0}return!1}function Zp(r,e,s,h){return Ht(r,s,h)!==Ht(e,s,h)&&Ht(r,e,s)!==Ht(r,e,h)}function Nh(r,e,s){const h=s*s;if(1===e.length)return r.distSqr(e[0])<h;for(let _=1;_<e.length;_++)if(fd(r,e[_-1],e[_])<h)return!0;return!1}function fd(r,e,s){const h=e.distSqr(s);if(0===h)return r.distSqr(e);const _=((r.x-e.x)*(s.x-e.x)+(r.y-e.y)*(s.y-e.y))/h;return r.distSqr(_<0?e:_>1?s:s.sub(e)._mult(_)._add(e))}function md(r,e){let s,h,_,x=!1;for(let w=0;w<r.length;w++){s=r[w];for(let I=0,L=s.length-1;I<s.length;L=I++)h=s[I],_=s[L],h.y>e.y!=_.y>e.y&&e.x<(_.x-h.x)*(e.y-h.y)/(_.y-h.y)+h.x&&(x=!x)}return x}function ac(r,e){let s=!1;for(let h=0,_=r.length-1;h<r.length;_=h++){const x=r[h],w=r[_];x.y>e.y!=w.y>e.y&&e.x<(w.x-x.x)*(e.y-x.y)/(w.y-x.y)+x.x&&(s=!s)}return s}function fu(r,e,s){const h=s[0],_=s[2];if(r.x<h.x&&e.x<h.x||r.x>_.x&&e.x>_.x||r.y<h.y&&e.y<h.y||r.y>_.y&&e.y>_.y)return!1;const x=Ht(r,e,s[0]);return x!==Ht(r,e,s[1])||x!==Ht(r,e,s[2])||x!==Ht(r,e,s[3])}function Gl(r,e,s){const h=e.paint.get(r).value;return"constant"===h.kind?h.value:s.programConfigurations.get(e.id).getMaxValue(r)}function ol(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function mu(r,e,s,h,_){if(!e[0]&&!e[1])return r;const x=lt.convert(e)._mult(_);"viewport"===s&&x._rotate(-h);const w=[];for(let I=0;I<r.length;I++)w.push(r[I].sub(x));return w}Fn("CircleBucket",pd,{omit:["layers"]});const Bh=new Zi({"circle-sort-key":new xt(ie.layout_circle["circle-sort-key"])});var Bm={paint:new Zi({"circle-radius":new xt(ie.paint_circle["circle-radius"]),"circle-color":new xt(ie.paint_circle["circle-color"]),"circle-blur":new xt(ie.paint_circle["circle-blur"]),"circle-opacity":new xt(ie.paint_circle["circle-opacity"]),"circle-translate":new Re(ie.paint_circle["circle-translate"]),"circle-translate-anchor":new Re(ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Re(ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Re(ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(ie.paint_circle["circle-stroke-opacity"])}),layout:Bh},qa="undefined"!=typeof Float32Array?Float32Array:Array;function Ac(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function gu(r,e,s){var h=e[0],_=e[1],x=e[2],w=e[3],I=e[4],L=e[5],ee=e[6],ae=e[7],se=e[8],me=e[9],Ce=e[10],Te=e[11],je=e[12],et=e[13],yt=e[14],Gt=e[15],zt=s[0],en=s[1],pn=s[2],on=s[3];return r[0]=zt*h+en*I+pn*se+on*je,r[1]=zt*_+en*L+pn*me+on*et,r[2]=zt*x+en*ee+pn*Ce+on*yt,r[3]=zt*w+en*ae+pn*Te+on*Gt,r[4]=(zt=s[4])*h+(en=s[5])*I+(pn=s[6])*se+(on=s[7])*je,r[5]=zt*_+en*L+pn*me+on*et,r[6]=zt*x+en*ee+pn*Ce+on*yt,r[7]=zt*w+en*ae+pn*Te+on*Gt,r[8]=(zt=s[8])*h+(en=s[9])*I+(pn=s[10])*se+(on=s[11])*je,r[9]=zt*_+en*L+pn*me+on*et,r[10]=zt*x+en*ee+pn*Ce+on*yt,r[11]=zt*w+en*ae+pn*Te+on*Gt,r[12]=(zt=s[12])*h+(en=s[13])*I+(pn=s[14])*se+(on=s[15])*je,r[13]=zt*_+en*L+pn*me+on*et,r[14]=zt*x+en*ee+pn*Ce+on*yt,r[15]=zt*w+en*ae+pn*Te+on*Gt,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var zh=gu;function _u(){var r=new qa(4);return qa!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function Wa(r,e,s,h){var _=new qa(4);return _[0]=r,_[1]=e,_[2]=s,_[3]=h,_}function yu(r,e,s){var h=e[0],_=e[1],x=e[2],w=e[3];return r[0]=s[0]*h+s[4]*_+s[8]*x+s[12]*w,r[1]=s[1]*h+s[5]*_+s[9]*x+s[13]*w,r[2]=s[2]*h+s[6]*_+s[10]*x+s[14]*w,r[3]=s[3]*h+s[7]*_+s[11]*x+s[15]*w,r}function vu(r,e){const s=yu(_u(),Wa(r.x,r.y,0,1),e);return new lt(s[0]/s[3],s[1]/s[3])}_u();class Vh extends pd{}Fn("HeatmapBucket",Vh,{omit:["layers"]});var qp={paint:new Zi({"heatmap-radius":new xt(ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Re(ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vi(ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Re(ie.paint_heatmap["heatmap-opacity"])})};function gd(r,{width:e,height:s},h,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==e*s*h)throw new RangeError("mismatched image size")}else _=new Uint8Array(e*s*h);return r.width=e,r.height=s,r.data=_,r}function ba(r,{width:e,height:s},h){if(e===r.width&&s===r.height)return;const _=gd({},{width:e,height:s},h);Al(r,_,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,s)},h),r.width=e,r.height=s,r.data=_.data}function Al(r,e,s,h,_,x){if(0===_.width||0===_.height)return e;if(_.width>r.width||_.height>r.height||s.x>r.width-_.width||s.y>r.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>e.width||_.height>e.height||h.x>e.width-_.width||h.y>e.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const w=r.data,I=e.data;for(let L=0;L<_.height;L++){const ee=((s.y+L)*r.width+s.x)*x,ae=((h.y+L)*e.width+h.x)*x;for(let se=0;se<_.width*x;se++)I[ae+se]=w[ee+se]}return e}class Il{constructor(e,s){gd(this,e,1,s)}resize(e){ba(this,e,1)}clone(){return new Il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,h,_,x){Al(e,s,h,_,x,1)}}class sa{constructor(e,s){gd(this,e,4,s)}resize(e){ba(this,e,4)}replace(e,s){s?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,h,_,x){Al(e,s,h,_,x,4)}}function Uh(r){const e={},s=r.resolution||256,h=r.clips?r.clips.length:1,_=r.image||new sa({width:s,height:h}),x=(w,I,L)=>{e[r.evaluationKey]=L;const ee=r.expression.evaluate(e);_.data[w+I+0]=Math.floor(255*ee.r/ee.a),_.data[w+I+1]=Math.floor(255*ee.g/ee.a),_.data[w+I+2]=Math.floor(255*ee.b/ee.a),_.data[w+I+3]=Math.floor(255*ee.a)};if(r.clips)for(let w=0,I=0;w<h;++w,I+=4*s)for(let L=0,ee=0;L<s;L++,ee+=4){const ae=L/(s-1),{start:se,end:me}=r.clips[w];x(I,ee,se*(1-ae)+me*ae)}else for(let w=0,I=0;w<s;w++,I+=4)x(0,I,w/(s-1));return _}Fn("AlphaImage",Il),Fn("RGBAImage",sa);var Wp={paint:new Zi({"hillshade-illumination-direction":new Re(ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Re(ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Re(ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Re(ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Re(ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Re(ie.paint_hillshade["hillshade-accent-color"])})};const Yp=c([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kp}=Yp;var bu={exports:{}};function xu(r,e,s){s=s||2;var h,_,x,w,I,L,ee,ae=e&&e.length,se=ae?e[0]*s:r.length,me=jh(r,0,se,s,!0),Ce=[];if(!me||me.next===me.prev)return Ce;if(ae&&(me=function(je,et,yt,Gt){var zt,en,pn,on=[];for(zt=0,en=et.length;zt<en;zt++)(pn=jh(je,et[zt]*Gt,zt<en-1?et[zt+1]*Gt:je.length,Gt,!1))===pn.next&&(pn.steiner=!0),on.push(yd(pn));for(on.sort(Ya),zt=0;zt<on.length;zt++)yt=Pl(yt=Pc(on[zt],yt),yt.next);return yt}(r,e,me,s)),r.length>80*s){h=x=r[0],_=w=r[1];for(var Te=s;Te<se;Te+=s)(I=r[Te])<h&&(h=I),(L=r[Te+1])<_&&(_=L),I>x&&(x=I),L>w&&(w=L);ee=0!==(ee=Math.max(x-h,w-_))?1/ee:0}return Ic(me,Ce,s,h,_,ee),Ce}function jh(r,e,s,h,_){var x,w;if(_===wd(r,e,s,h)>0)for(x=e;x<s;x+=h)w=$h(x,r[x],r[x+1],w);else for(x=s-h;x>=e;x-=h)w=$h(x,r[x],r[x+1],w);return w&&cc(w,w.next)&&(Rc(w),w=w.next),w}function Pl(r,e){if(!r)return r;e||(e=r);var s,h=r;do{if(s=!1,h.steiner||!cc(h,h.next)&&0!==ro(h.prev,h,h.next))h=h.next;else{if(Rc(h),(h=e=h.prev)===h.next)break;s=!0}}while(s||h!==e);return e}function Ic(r,e,s,h,_,x,w){if(r){!w&&x&&function(ae,se,me,Ce){var Te=ae;do{null===Te.z&&(Te.z=wu(Te.x,Te.y,se,me,Ce)),Te.prevZ=Te.prev,Te.nextZ=Te.next,Te=Te.next}while(Te!==ae);Te.prevZ.nextZ=null,Te.prevZ=null,function(je){var et,yt,Gt,zt,en,pn,on,Yn,ui=1;do{for(yt=je,je=null,en=null,pn=0;yt;){for(pn++,Gt=yt,on=0,et=0;et<ui&&(on++,Gt=Gt.nextZ);et++);for(Yn=ui;on>0||Yn>0&&Gt;)0!==on&&(0===Yn||!Gt||yt.z<=Gt.z)?(zt=yt,yt=yt.nextZ,on--):(zt=Gt,Gt=Gt.nextZ,Yn--),en?en.nextZ=zt:je=zt,zt.prevZ=en,en=zt;yt=Gt}en.nextZ=null,ui*=2}while(pn>1)}(Te)}(r,h,_,x);for(var I,L,ee=r;r.prev!==r.next;)if(I=r.prev,L=r.next,x?Hh(r,h,_,x):zm(r))e.push(I.i/s),e.push(r.i/s),e.push(L.i/s),Rc(r),r=L.next,ee=L.next;else if((r=L)===ee){w?1===w?Ic(r=lc(Pl(r),e,s),e,s,h,_,x,2):2===w&&_d(r,e,s,h,_,x):Ic(Pl(r),e,s,h,_,x,1);break}}}function zm(r){var e=r.prev,s=r,h=r.next;if(ro(e,s,h)>=0)return!1;for(var _=r.next.next;_!==r.prev;){if(Oc(e.x,e.y,s.x,s.y,h.x,h.y,_.x,_.y)&&ro(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function Hh(r,e,s,h){var _=r.prev,x=r,w=r.next;if(ro(_,x,w)>=0)return!1;for(var I=_.x>x.x?_.x>w.x?_.x:w.x:x.x>w.x?x.x:w.x,L=_.y>x.y?_.y>w.y?_.y:w.y:x.y>w.y?x.y:w.y,ee=wu(_.x<x.x?_.x<w.x?_.x:w.x:x.x<w.x?x.x:w.x,_.y<x.y?_.y<w.y?_.y:w.y:x.y<w.y?x.y:w.y,e,s,h),ae=wu(I,L,e,s,h),se=r.prevZ,me=r.nextZ;se&&se.z>=ee&&me&&me.z<=ae;){if(se!==r.prev&&se!==r.next&&Oc(_.x,_.y,x.x,x.y,w.x,w.y,se.x,se.y)&&ro(se.prev,se,se.next)>=0||(se=se.prevZ,me!==r.prev&&me!==r.next&&Oc(_.x,_.y,x.x,x.y,w.x,w.y,me.x,me.y)&&ro(me.prev,me,me.next)>=0))return!1;me=me.nextZ}for(;se&&se.z>=ee;){if(se!==r.prev&&se!==r.next&&Oc(_.x,_.y,x.x,x.y,w.x,w.y,se.x,se.y)&&ro(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;me&&me.z<=ae;){if(me!==r.prev&&me!==r.next&&Oc(_.x,_.y,x.x,x.y,w.x,w.y,me.x,me.y)&&ro(me.prev,me,me.next)>=0)return!1;me=me.nextZ}return!0}function lc(r,e,s){var h=r;do{var _=h.prev,x=h.next.next;!cc(_,x)&&kc(_,h,h.next,x)&&Cu(_,x)&&Cu(x,_)&&(e.push(_.i/s),e.push(h.i/s),e.push(x.i/s),Rc(h),Rc(h.next),h=r=x),h=h.next}while(h!==r);return Pl(h)}function _d(r,e,s,h,_,x){var w=r;do{for(var I=w.next.next;I!==w.prev;){if(w.i!==I.i&&Vm(w,I)){var L=bd(w,I);return w=Pl(w,w.next),L=Pl(L,L.next),Ic(w,e,s,h,_,x),void Ic(L,e,s,h,_,x)}I=I.next}w=w.next}while(w!==r)}function Ya(r,e){return r.x-e.x}function Pc(r,e){var s=function(x,w){var I,L=w,ee=x.x,ae=x.y,se=-1/0;do{if(ae<=L.y&&ae>=L.next.y&&L.next.y!==L.y){var me=L.x+(ae-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(me<=ee&&me>se){if(se=me,me===ee){if(ae===L.y)return L;if(ae===L.next.y)return L.next}I=L.x<L.next.x?L:L.next}}L=L.next}while(L!==w);if(!I)return null;if(ee===se)return I;var Ce,Te=I,je=I.x,et=I.y,yt=1/0;L=I;do{ee>=L.x&&L.x>=je&&ee!==L.x&&Oc(ae<et?ee:se,ae,je,et,ae<et?se:ee,ae,L.x,L.y)&&(Ce=Math.abs(ae-L.y)/(ee-L.x),Cu(L,x)&&(Ce<yt||Ce===yt&&(L.x>I.x||L.x===I.x&&Gh(I,L)))&&(I=L,yt=Ce)),L=L.next}while(L!==Te);return I}(r,e);if(!s)return e;var h=bd(s,r),_=Pl(s,s.next);return Pl(h,h.next),e===s?_:e}function Gh(r,e){return ro(r.prev,r,e.prev)<0&&ro(e.next,r,r.next)<0}function wu(r,e,s,h,_){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*_)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-h)*_)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function yd(r){var e=r,s=r;do{(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next}while(e!==r);return s}function Oc(r,e,s,h,_,x,w,I){return(_-w)*(e-I)-(r-w)*(x-I)>=0&&(r-w)*(h-I)-(s-w)*(e-I)>=0&&(s-w)*(x-I)-(_-w)*(h-I)>=0}function Vm(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(s,h){var _=s;do{if(_.i!==s.i&&_.next.i!==s.i&&_.i!==h.i&&_.next.i!==h.i&&kc(_,_.next,s,h))return!0;_=_.next}while(_!==s);return!1}(r,e)&&(Cu(r,e)&&Cu(e,r)&&function(s,h){var _=s,x=!1,w=(s.x+h.x)/2,I=(s.y+h.y)/2;do{_.y>I!=_.next.y>I&&_.next.y!==_.y&&w<(_.next.x-_.x)*(I-_.y)/(_.next.y-_.y)+_.x&&(x=!x),_=_.next}while(_!==s);return x}(r,e)&&(ro(r.prev,r,e.prev)||ro(r,e.prev,e))||cc(r,e)&&ro(r.prev,r,r.next)>0&&ro(e.prev,e,e.next)>0)}function ro(r,e,s){return(e.y-r.y)*(s.x-e.x)-(e.x-r.x)*(s.y-e.y)}function cc(r,e){return r.x===e.x&&r.y===e.y}function kc(r,e,s,h){var _=vd(ro(r,e,s)),x=vd(ro(r,e,h)),w=vd(ro(s,h,r)),I=vd(ro(s,h,e));return _!==x&&w!==I||!(0!==_||!uc(r,s,e))||!(0!==x||!uc(r,h,e))||!(0!==w||!uc(s,r,h))||!(0!==I||!uc(s,e,h))}function uc(r,e,s){return e.x<=Math.max(r.x,s.x)&&e.x>=Math.min(r.x,s.x)&&e.y<=Math.max(r.y,s.y)&&e.y>=Math.min(r.y,s.y)}function vd(r){return r>0?1:r<0?-1:0}function Cu(r,e){return ro(r.prev,r,r.next)<0?ro(r,e,r.next)>=0&&ro(r,r.prev,e)>=0:ro(r,e,r.prev)<0||ro(r,r.next,e)<0}function bd(r,e){var s=new xd(r.i,r.x,r.y),h=new xd(e.i,e.x,e.y),_=r.next,x=e.prev;return r.next=e,e.prev=r,s.next=_,_.prev=s,h.next=s,s.prev=h,x.next=h,h.prev=x,h}function $h(r,e,s,h){var _=new xd(r,e,s);return h?(_.next=h.next,_.prev=h,h.next.prev=_,h.next=_):(_.prev=_,_.next=_),_}function Rc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function xd(r,e,s){this.i=r,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wd(r,e,s,h){for(var _=0,x=e,w=s-h;x<s;x+=h)_+=(r[w]-r[x])*(r[x+1]+r[w+1]),w=x;return _}bu.exports=xu,bu.exports.default=xu,xu.deviation=function(r,e,s,h){var _=e&&e.length,x=Math.abs(wd(r,0,_?e[0]*s:r.length,s));if(_)for(var w=0,I=e.length;w<I;w++)x-=Math.abs(wd(r,e[w]*s,w<I-1?e[w+1]*s:r.length,s));var L=0;for(w=0;w<h.length;w+=3){var ee=h[w]*s,ae=h[w+1]*s,se=h[w+2]*s;L+=Math.abs((r[ee]-r[se])*(r[ae+1]-r[ee+1])-(r[ee]-r[ae])*(r[se+1]-r[ee+1]))}return 0===x&&0===L?0:Math.abs((L-x)/x)},xu.flatten=function(r){for(var e=r[0][0].length,s={vertices:[],holes:[],dimensions:e},h=0,_=0;_<r.length;_++){for(var x=0;x<r[_].length;x++)for(var w=0;w<e;w++)s.vertices.push(r[_][x][w]);_>0&&s.holes.push(h+=r[_-1].length)}return s};var Cd=bu.exports;function Eu(r,e,s,h,_){Ed(r,e,s||0,h||r.length-1,_||Jp)}function Ed(r,e,s,h,_){for(;h>s;){if(h-s>600){var x=h-s+1,w=e-s+1,I=Math.log(x),L=.5*Math.exp(2*I/3),ee=.5*Math.sqrt(I*L*(x-L)/x)*(w-x/2<0?-1:1);Ed(r,e,Math.max(s,Math.floor(e-w*L/x+ee)),Math.min(h,Math.floor(e+(x-w)*L/x+ee)),_)}var ae=r[e],se=s,me=h;for($l(r,s,e),_(r[h],ae)>0&&$l(r,s,h);se<me;){for($l(r,se,me),se++,me--;_(r[se],ae)<0;)se++;for(;_(r[me],ae)>0;)me--}0===_(r[s],ae)?$l(r,s,me):$l(r,++me,h),me<=e&&(s=me+1),e<=me&&(h=me-1)}}function $l(r,e,s){var h=r[e];r[e]=r[s],r[s]=h}function Jp(r,e){return r<e?-1:r>e?1:0}function vo(r,e){const s=r.length;if(s<=1)return[r];const h=[];let _,x;for(let w=0;w<s;w++){const I=an(r[w]);0!==I&&(r[w].area=Math.abs(I),void 0===x&&(x=I<0),x===I<0?(_&&h.push(_),_=[r[w]]):_.push(r[w]))}if(_&&h.push(_),e>1)for(let w=0;w<h.length;w++)h[w].length<=e||(Eu(h[w],e,1,h[w].length-1,Zh),h[w]=h[w].slice(0,e));return h}function Zh(r,e){return e.area-r.area}function Dd(r,e,s){const h=s.patternDependencies;let _=!1;for(const x of e){const w=x.paint.get(`${r}-pattern`);w.isConstant()||(_=!0);const I=w.constantOr(null);I&&(_=!0,h[I.to]=!0,h[I.from]=!0)}return _}function Fc(r,e,s,h,_){const x=_.patternDependencies;for(const w of e){const I=w.paint.get(`${r}-pattern`).value;if("constant"!==I.kind){let L=I.evaluate({zoom:h-1},s,{},_.availableImages),ee=I.evaluate({zoom:h},s,{},_.availableImages),ae=I.evaluate({zoom:h+1},s,{},_.availableImages);L=L&&L.name?L.name:L,ee=ee&&ee.name?ee.name:ee,ae=ae&&ae.name?ae.name:ae,x[L]=!0,x[ee]=!0,x[ae]=!0,s.patterns[w.id]={min:L,mid:ee,max:ae}}}return s}class Du{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Aa,this.indexArray=new Cr,this.indexArray2=new il,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Jr,this.segments2=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.hasPattern=Dd("fill",this.layers,s);const _=this.layers[0].layout.get("fill-sort-key"),x=!_.isConstant(),w=[];for(const{feature:I,id:L,index:ee,sourceLayerIndex:ae}of e){const se=this.layers[0]._featureFilter.needGeometry,me=Zs(I,se);if(!this.layers[0]._featureFilter.filter(new Br(this.zoom),me,h))continue;const Ce=x?_.evaluate(me,{},h,s.availableImages):void 0,Te={id:L,properties:I.properties,type:I.type,sourceLayerIndex:ae,index:ee,geometry:se?me.geometry:Za(I),patterns:{},sortKey:Ce};w.push(Te)}x&&w.sort((I,L)=>I.sortKey-L.sortKey);for(const I of w){const{geometry:L,index:ee,sourceLayerIndex:ae}=I;if(this.hasPattern){const se=Fc("fill",this.layers,I,this.zoom,s);this.patternFeatures.push(se)}else this.addFeature(I,L,ee,h,{});s.featureIndex.insert(e[ee].feature,L,ee,ae,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}addFeatures(e,s,h){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,s,h,_,x){for(const w of vo(s,500)){let I=0;for(const Ce of w)I+=Ce.length;const L=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),ee=L.vertexLength,ae=[],se=[];for(const Ce of w){if(0===Ce.length)continue;Ce!==w[0]&&se.push(ae.length/2);const Te=this.segments2.prepareSegment(Ce.length,this.layoutVertexArray,this.indexArray2),je=Te.vertexLength;this.layoutVertexArray.emplaceBack(Ce[0].x,Ce[0].y),this.indexArray2.emplaceBack(je+Ce.length-1,je),ae.push(Ce[0].x),ae.push(Ce[0].y);for(let et=1;et<Ce.length;et++)this.layoutVertexArray.emplaceBack(Ce[et].x,Ce[et].y),this.indexArray2.emplaceBack(je+et-1,je+et),ae.push(Ce[et].x),ae.push(Ce[et].y);Te.vertexLength+=Ce.length,Te.primitiveLength+=Ce.length}const me=Cd(ae,se);for(let Ce=0;Ce<me.length;Ce+=3)this.indexArray.emplaceBack(ee+me[Ce],ee+me[Ce+1],ee+me[Ce+2]);L.vertexLength+=I,L.primitiveLength+=me.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,_)}}Fn("FillBucket",Du,{omit:["layers","patternFeatures"]});const Qp=new Zi({"fill-sort-key":new xt(ie.layout_fill["fill-sort-key"])});var Xp={paint:new Zi({"fill-antialias":new Re(ie.paint_fill["fill-antialias"]),"fill-opacity":new xt(ie.paint_fill["fill-opacity"]),"fill-color":new xt(ie.paint_fill["fill-color"]),"fill-outline-color":new xt(ie.paint_fill["fill-outline-color"]),"fill-translate":new Re(ie.paint_fill["fill-translate"]),"fill-translate-anchor":new Re(ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new ri(ie.paint_fill["fill-pattern"])}),layout:Qp};const ef=c([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:tf}=ef;var Ol={},Um=lt,nf=Ka;function Ka(r,e,s,h,_){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=_,r.readFields(Bs,this,e)}function Bs(r,e,s){1==r?e.id=s.readVarint():2==r?function(h,_){for(var x=h.readVarint()+h.pos;h.pos<x;){var w=_._keys[h.readVarint()],I=_._values[h.readVarint()];_.properties[w]=I}}(s,e):3==r?e.type=s.readVarint():4==r&&(e._geometry=s.pos)}function Md(r){for(var e,s,h=0,_=0,x=r.length,w=x-1;_<x;w=_++)h+=((s=r[w]).x-(e=r[_]).x)*(e.y+s.y);return h}Ka.types=["Unknown","Point","LineString","Polygon"],Ka.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,s=r.readVarint()+r.pos,h=1,_=0,x=0,w=0,I=[];r.pos<s;){if(_<=0){var L=r.readVarint();h=7&L,_=L>>3}if(_--,1===h||2===h)x+=r.readSVarint(),w+=r.readSVarint(),1===h&&(e&&I.push(e),e=[]),e.push(new Um(x,w));else{if(7!==h)throw new Error("unknown command "+h);e&&e.push(e[0].clone())}}return e&&I.push(e),I},Ka.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,s=1,h=0,_=0,x=0,w=1/0,I=-1/0,L=1/0,ee=-1/0;r.pos<e;){if(h<=0){var ae=r.readVarint();s=7&ae,h=ae>>3}if(h--,1===s||2===s)(_+=r.readSVarint())<w&&(w=_),_>I&&(I=_),(x+=r.readSVarint())<L&&(L=x),x>ee&&(ee=x);else if(7!==s)throw new Error("unknown command "+s)}return[w,L,I,ee]},Ka.prototype.toGeoJSON=function(r,e,s){var h,_,x=this.extent*Math.pow(2,s),w=this.extent*r,I=this.extent*e,L=this.loadGeometry(),ee=Ka.types[this.type];function ae(Ce){for(var Te=0;Te<Ce.length;Te++){var je=Ce[Te];Ce[Te]=[360*(je.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(je.y+I)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(h=0;h<L.length;h++)se[h]=L[h][0];ae(L=se);break;case 2:for(h=0;h<L.length;h++)ae(L[h]);break;case 3:for(L=function(Ce){var Te=Ce.length;if(Te<=1)return[Ce];for(var je,et,yt=[],Gt=0;Gt<Te;Gt++){var zt=Md(Ce[Gt]);0!==zt&&(void 0===et&&(et=zt<0),et===zt<0?(je&&yt.push(je),je=[Ce[Gt]]):je.push(Ce[Gt]))}return je&&yt.push(je),yt}(L),h=0;h<L.length;h++)for(_=0;_<L[h].length;_++)ae(L[h][_])}1===L.length?L=L[0]:ee="Multi"+ee;var me={type:"Feature",geometry:{type:ee,coordinates:L},properties:this.properties};return"id"in this&&(me.id=this.id),me};var qh=nf,Sd=bs;function bs(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Lc,this,e),this.length=this._features.length}function Lc(r,e,s){15===r?e.version=s.readVarint():1===r?e.name=s.readString():5===r?e.extent=s.readVarint():2===r?e._features.push(s.pos):3===r?e._keys.push(s.readString()):4===r&&e._values.push(function(h){for(var _=null,x=h.readVarint()+h.pos;h.pos<x;){var w=h.readVarint()>>3;_=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}return _}(s))}bs.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new qh(this._pbf,e,this.extent,this._keys,this._values)};var Td=Sd;function Wh(r,e,s){if(3===r){var h=new Td(s,s.readVarint()+s.pos);h.length&&(e[h.name]=h)}}Ol.VectorTile=function(r,e){this.layers=r.readFields(Wh,{},e)},Ol.VectorTileFeature=nf,Ol.VectorTileLayer=Sd;const rf=Ol.VectorTileFeature.types,Zl=Math.pow(2,13);function Nc(r,e,s,h,_,x,w,I){r.emplaceBack(e,s,2*Math.floor(h*Zl)+w,_*Zl*2,x*Zl*2,Math.round(I))}class Mu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new _a,this.indexArray=new Cr,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.features=[],this.hasPattern=Dd("fill-extrusion",this.layers,s);for(const{feature:_,id:x,index:w,sourceLayerIndex:I}of e){const L=this.layers[0]._featureFilter.needGeometry,ee=Zs(_,L);if(!this.layers[0]._featureFilter.filter(new Br(this.zoom),ee,h))continue;const ae={id:x,sourceLayerIndex:I,index:w,geometry:L?ee.geometry:Za(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Fc("fill-extrusion",this.layers,ae,this.zoom,s)):this.addFeature(ae,ae.geometry,w,h,{}),s.featureIndex.insert(_,ae.geometry,w,I,this.index,!0)}}addFeatures(e,s,h){for(const _ of this.features){const{geometry:x}=_;this.addFeature(_,x,_.index,s,h)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tf),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,h,_,x){for(const w of vo(s,500)){let I=0;for(const Ce of w)I+=Ce.length;let L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of w){if(0===Ce.length||Yh(Ce))continue;let Te=0;for(let je=0;je<Ce.length;je++){const et=Ce[je];if(je>=1){const yt=Ce[je-1];if(!sf(et,yt)){L.vertexLength+4>Jr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Gt=et.sub(yt)._perp()._unit(),zt=yt.dist(et);Te+zt>32768&&(Te=0),Nc(this.layoutVertexArray,et.x,et.y,Gt.x,Gt.y,0,0,Te),Nc(this.layoutVertexArray,et.x,et.y,Gt.x,Gt.y,0,1,Te),Te+=zt,Nc(this.layoutVertexArray,yt.x,yt.y,Gt.x,Gt.y,0,0,Te),Nc(this.layoutVertexArray,yt.x,yt.y,Gt.x,Gt.y,0,1,Te);const en=L.vertexLength;this.indexArray.emplaceBack(en,en+2,en+1),this.indexArray.emplaceBack(en+1,en+2,en+3),L.vertexLength+=4,L.primitiveLength+=2}}}}if(L.vertexLength+I>Jr.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),"Polygon"!==rf[e.type])continue;const ee=[],ae=[],se=L.vertexLength;for(const Ce of w)if(0!==Ce.length){Ce!==w[0]&&ae.push(ee.length/2);for(let Te=0;Te<Ce.length;Te++){const je=Ce[Te];Nc(this.layoutVertexArray,je.x,je.y,0,0,1,1,0),ee.push(je.x),ee.push(je.y)}}const me=Cd(ee,ae);for(let Ce=0;Ce<me.length;Ce+=3)this.indexArray.emplaceBack(se+me[Ce],se+me[Ce+2],se+me[Ce+1]);L.primitiveLength+=me.length/3,L.vertexLength+=I}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,_)}}function sf(r,e){return r.x===e.x&&(r.x<0||r.x>ko)||r.y===e.y&&(r.y<0||r.y>ko)}function Yh(r){return r.every(e=>e.x<0)||r.every(e=>e.x>ko)||r.every(e=>e.y<0)||r.every(e=>e.y>ko)}Fn("FillExtrusionBucket",Mu,{omit:["layers","features"]});var af={paint:new Zi({"fill-extrusion-opacity":new Re(ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Re(ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Re(ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ri(ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Re(ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Bc(r,e){return r.x*e.x+r.y*e.y}function Su(r,e){if(1===r.length){let s=0;const h=e[s++];let _;for(;!_||h.equals(_);)if(_=e[s++],!_)return 1/0;for(;s<e.length;s++){const x=e[s],w=r[0],I=_.sub(h),L=x.sub(h),ee=w.sub(h),ae=Bc(I,I),se=Bc(I,L),me=Bc(L,L),Ce=Bc(ee,I),Te=Bc(ee,L),je=ae*me-se*se,et=(me*Ce-se*Te)/je,yt=(ae*Te-se*Ce)/je,Gt=h.z*(1-et-yt)+_.z*et+x.z*yt;if(isFinite(Gt))return Gt}return 1/0}{let s=1/0;for(const h of e)s=Math.min(s,h.z);return s}}const lf=c([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:cf}=lf,zc=c([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:uf}=zc,df=Ol.VectorTileFeature.types,dc=Math.cos(Math.PI/180*37.5),Ad=Math.pow(2,14)/.5;class Id{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ya,this.layoutVertexArray2=new Ga,this.indexArray=new Cr,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Jr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,h){this.hasPattern=Dd("line",this.layers,s);const _=this.layers[0].layout.get("line-sort-key"),x=!_.isConstant(),w=[];for(const{feature:I,id:L,index:ee,sourceLayerIndex:ae}of e){const se=this.layers[0]._featureFilter.needGeometry,me=Zs(I,se);if(!this.layers[0]._featureFilter.filter(new Br(this.zoom),me,h))continue;const Ce=x?_.evaluate(me,{},h):void 0,Te={id:L,properties:I.properties,type:I.type,sourceLayerIndex:ae,index:ee,geometry:se?me.geometry:Za(I),patterns:{},sortKey:Ce};w.push(Te)}x&&w.sort((I,L)=>I.sortKey-L.sortKey);for(const I of w){const{geometry:L,index:ee,sourceLayerIndex:ae}=I;if(this.hasPattern){const se=Fc("line",this.layers,I,this.zoom,s);this.patternFeatures.push(se)}else this.addFeature(I,L,ee,h,{});s.featureIndex.insert(e[ee].feature,L,ee,ae,this.index)}}update(e,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,h)}addFeatures(e,s,h){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,uf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cf),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,s,h,_,x){const w=this.layers[0].layout,I=w.get("line-join").evaluate(e,{}),L=w.get("line-cap"),ee=w.get("line-miter-limit"),ae=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const se of s)this.addLine(se,e,I,L,ee,ae);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,x,_)}addLine(e,s,h,_,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let yt=0;yt<e.length-1;yt++)this.totalDistance+=e[yt].dist(e[yt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I="Polygon"===df[s.type];let L=e.length;for(;L>=2&&e[L-1].equals(e[L-2]);)L--;let ee=0;for(;ee<L-1&&e[ee].equals(e[ee+1]);)ee++;if(L<(I?3:2))return;"bevel"===h&&(x=1.05);const ae=this.overscaling<=16?122880/(512*this.overscaling):0,se=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let me,Ce,Te,je,et;this.e1=this.e2=-1,I&&(me=e[L-2],et=e[ee].sub(me)._unit()._perp());for(let yt=ee;yt<L;yt++){if(Te=yt===L-1?I?e[ee+1]:void 0:e[yt+1],Te&&e[yt].equals(Te))continue;et&&(je=et),me&&(Ce=me),me=e[yt],et=Te?Te.sub(me)._unit()._perp():je,je=je||et;let Gt=je.add(et);0===Gt.x&&0===Gt.y||Gt._unit();const zt=je.x*et.x+je.y*et.y,en=Gt.x*et.x+Gt.y*et.y,pn=0!==en?1/en:1/0,on=2*Math.sqrt(2-2*en),Yn=en<dc&&Ce&&Te,ui=je.x*et.y-je.y*et.x>0;if(Yn&&yt>ee){const Nn=me.dist(Ce);if(Nn>2*ae){const Kn=me.sub(me.sub(Ce)._mult(ae/Nn)._round());this.updateDistance(Ce,Kn),this.addCurrentVertex(Kn,je,0,0,se),Ce=Kn}}const Gn=Ce&&Te;let Un=Gn?h:I?"butt":_;if(Gn&&"round"===Un&&(pn<w?Un="miter":pn<=2&&(Un="fakeround")),"miter"===Un&&pn>x&&(Un="bevel"),"bevel"===Un&&(pn>2&&(Un="flipbevel"),pn<x&&(Un="miter")),Ce&&this.updateDistance(Ce,me),"miter"===Un)Gt._mult(pn),this.addCurrentVertex(me,Gt,0,0,se);else if("flipbevel"===Un){if(pn>100)Gt=et.mult(-1);else{const Nn=pn*je.add(et).mag()/je.sub(et).mag();Gt._perp()._mult(Nn*(ui?-1:1))}this.addCurrentVertex(me,Gt,0,0,se),this.addCurrentVertex(me,Gt.mult(-1),0,0,se)}else if("bevel"===Un||"fakeround"===Un){const Nn=-Math.sqrt(pn*pn-1),Kn=ui?Nn:0,$n=ui?0:Nn;if(Ce&&this.addCurrentVertex(me,je,Kn,$n,se),"fakeround"===Un){const Dn=Math.round(180*on/Math.PI/20);for(let Mi=1;Mi<Dn;Mi++){let wi=Mi/Dn;if(.5!==wi){const vr=wi-.5;wi+=wi*vr*(wi-1)*((1.0904+zt*(zt*(3.55645-1.43519*zt)-3.2452))*vr*vr+(.848013+zt*(.215638*zt-1.06021)))}const Yi=et.sub(je)._mult(wi)._add(je)._unit()._mult(ui?-1:1);this.addHalfVertex(me,Yi.x,Yi.y,!1,ui,0,se)}}Te&&this.addCurrentVertex(me,et,-Kn,-$n,se)}else if("butt"===Un)this.addCurrentVertex(me,Gt,0,0,se);else if("square"===Un){const Nn=Ce?1:-1;this.addCurrentVertex(me,Gt,Nn,Nn,se)}else"round"===Un&&(Ce&&(this.addCurrentVertex(me,je,0,0,se),this.addCurrentVertex(me,je,1,1,se,!0)),Te&&(this.addCurrentVertex(me,et,-1,-1,se,!0),this.addCurrentVertex(me,et,0,0,se)));if(Yn&&yt<L-1){const Nn=me.dist(Te);if(Nn>2*ae){const Kn=me.add(Te.sub(me)._mult(ae/Nn)._round());this.updateDistance(me,Kn),this.addCurrentVertex(Kn,et,0,0,se),me=Kn}}}}addCurrentVertex(e,s,h,_,x,w=!1){const I=s.y*_-s.x,L=-s.y-s.x*_;this.addHalfVertex(e,s.x+s.y*h,s.y-s.x*h,w,!1,h,x),this.addHalfVertex(e,I,L,w,!0,-_,x),this.distance>Ad/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,s,h,_,x,w))}addHalfVertex({x:e,y:s},h,_,x,w,I,L){const ee=.5*(this.lineClips?this.scaledDistance*(Ad-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(x?1:0),(s<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*_)+128,1+(0===I?0:I<0?-1:1)|(63&ee)<<2,ee>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ae=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ae),L.primitiveLength++),w?this.e2=ae:this.e1=ae}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,s){this.distance+=e.dist(s),this.updateScaledDistance()}}Fn("LineBucket",Id,{omit:["layers","patternFeatures"]});const Kh=new Zi({"line-cap":new Re(ie.layout_line["line-cap"]),"line-join":new xt(ie.layout_line["line-join"]),"line-miter-limit":new Re(ie.layout_line["line-miter-limit"]),"line-round-limit":new Re(ie.layout_line["line-round-limit"]),"line-sort-key":new xt(ie.layout_line["line-sort-key"])});var Pd={paint:new Zi({"line-opacity":new xt(ie.paint_line["line-opacity"]),"line-color":new xt(ie.paint_line["line-color"]),"line-translate":new Re(ie.paint_line["line-translate"]),"line-translate-anchor":new Re(ie.paint_line["line-translate-anchor"]),"line-width":new xt(ie.paint_line["line-width"]),"line-gap-width":new xt(ie.paint_line["line-gap-width"]),"line-offset":new xt(ie.paint_line["line-offset"]),"line-blur":new xt(ie.paint_line["line-blur"]),"line-dasharray":new Ji(ie.paint_line["line-dasharray"]),"line-pattern":new ri(ie.paint_line["line-pattern"]),"line-gradient":new vi(ie.paint_line["line-gradient"])}),layout:Kh};const Jh=new class extends xt{possiblyEvaluate(r,e){return e=new Br(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(r,e)}evaluate(r,e,s,h){return e=Ze({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(r,e,s,h)}}(Pd.paint.properties["line-width"].specification);function Od(r,e){return e>0?e+2*r:r}Jh.useIntegerZoom=!0;const hf=c([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pf=c([{name:"a_projected_pos",components:3,type:"Float32"}],4);c([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ff=c([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);c([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Qh=c([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xh=c([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kd(r,e,s){return r.sections.forEach(h=>{h.text=function(_,x,w){const I=x.layout.get("text-transform").evaluate(w,{});return"uppercase"===I?_=_.toLocaleUpperCase():"lowercase"===I&&(_=_.toLocaleLowerCase()),Vo.applyArabicShaping&&(_=Vo.applyArabicShaping(_)),_}(h.text,e,s)}),r}c([{name:"triangle",components:3,type:"Uint16"}]),c([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),c([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),c([{type:"Float32",name:"offsetX"}]),c([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Vc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var sl=kr,Oa=function(r,e,s,h,_){var x,w,I=8*_-h-1,L=(1<<I)-1,ee=L>>1,ae=-7,se=s?_-1:0,me=s?-1:1,Ce=r[e+se];for(se+=me,x=Ce&(1<<-ae)-1,Ce>>=-ae,ae+=I;ae>0;x=256*x+r[e+se],se+=me,ae-=8);for(w=x&(1<<-ae)-1,x>>=-ae,ae+=h;ae>0;w=256*w+r[e+se],se+=me,ae-=8);if(0===x)x=1-ee;else{if(x===L)return w?NaN:1/0*(Ce?-1:1);w+=Math.pow(2,h),x-=ee}return(Ce?-1:1)*w*Math.pow(2,x-h)},mf=function(r,e,s,h,_,x){var w,I,L,ee=8*x-_-1,ae=(1<<ee)-1,se=ae>>1,me=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,Ce=h?0:x-1,Te=h?1:-1,je=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(I=isNaN(e)?1:0,w=ae):(w=Math.floor(Math.log(e)/Math.LN2),e*(L=Math.pow(2,-w))<1&&(w--,L*=2),(e+=w+se>=1?me/L:me*Math.pow(2,1-se))*L>=2&&(w++,L/=2),w+se>=ae?(I=0,w=ae):w+se>=1?(I=(e*L-1)*Math.pow(2,_),w+=se):(I=e*Math.pow(2,se-1)*Math.pow(2,_),w=0));_>=8;r[s+Ce]=255&I,Ce+=Te,I/=256,_-=8);for(w=w<<_|I,ee+=_;ee>0;r[s+Ce]=255&w,Ce+=Te,w/=256,ee-=8);r[s+Ce-Te]|=128*je};function kr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}kr.Varint=0,kr.Fixed64=1,kr.Bytes=2,kr.Fixed32=5;var al,ep=4294967296,ka=1/ep,Tu="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ra(r){return r.type===kr.Bytes?r.readVarint()+r.pos:r.pos+1}function Uc(r,e,s){var h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));s.realloc(h);for(var _=s.pos-1;_>=r;_--)s.buf[_+h]=s.buf[_]}function jc(r,e){for(var s=0;s<r.length;s++)e.writeVarint(r[s])}function tp(r,e){for(var s=0;s<r.length;s++)e.writeSVarint(r[s])}function np(r,e){for(var s=0;s<r.length;s++)e.writeFloat(r[s])}function Rd(r,e){for(var s=0;s<r.length;s++)e.writeDouble(r[s])}function Fd(r,e){for(var s=0;s<r.length;s++)e.writeBoolean(r[s])}function Ld(r,e){for(var s=0;s<r.length;s++)e.writeFixed32(r[s])}function gf(r,e){for(var s=0;s<r.length;s++)e.writeSFixed32(r[s])}function pc(r,e){for(var s=0;s<r.length;s++)e.writeFixed64(r[s])}function Nd(r,e){for(var s=0;s<r.length;s++)e.writeSFixed64(r[s])}function Hc(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function fc(r,e,s){r[s]=e,r[s+1]=e>>>8,r[s+2]=e>>>16,r[s+3]=e>>>24}function Au(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function _f(r,e,s){1===r&&s.readMessage(yf,e)}function yf(r,e,s){if(3===r){const{id:h,bitmap:_,width:x,height:w,left:I,top:L,advance:ee}=s.readMessage(vf,{});e.push({id:h,bitmap:new Il({width:x+6,height:w+6},_),metrics:{width:x,height:w,left:I,top:L,advance:ee}})}}function vf(r,e,s){1===r?e.id=s.readVarint():2===r?e.bitmap=s.readBytes():3===r?e.width=s.readVarint():4===r?e.height=s.readVarint():5===r?e.left=s.readSVarint():6===r?e.top=s.readSVarint():7===r&&(e.advance=s.readVarint())}function ip(r){let e=0,s=0;for(const w of r)e+=w.w*w.h,s=Math.max(s,w.w);r.sort((w,I)=>I.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),s),h:1/0}];let _=0,x=0;for(const w of r)for(let I=h.length-1;I>=0;I--){const L=h[I];if(!(w.w>L.w||w.h>L.h)){if(w.x=L.x,w.y=L.y,x=Math.max(x,w.y+w.h),_=Math.max(_,w.x+w.w),w.w===L.w&&w.h===L.h){const ee=h.pop();I<h.length&&(h[I]=ee)}else w.h===L.h?(L.x+=w.w,L.w-=w.w):w.w===L.w?(L.y+=w.h,L.h-=w.h):(h.push({x:L.x+w.w,y:L.y,w:L.w-w.w,h:w.h}),L.y+=w.h,L.h-=w.h);break}}return{w:_,h:x,fill:e/(_*x)||0}}kr.prototype={destroy:function(){this.buf=null},readFields:function(r,e,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),_=h>>3,x=this.pos;this.type=7&h,r(_,e,this),this.pos===x&&this.skip(h)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=Hc(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Au(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Hc(this.buf,this.pos)+Hc(this.buf,this.pos+4)*ep;return this.pos+=8,r},readSFixed64:function(){var r=Hc(this.buf,this.pos)+Au(this.buf,this.pos+4)*ep;return this.pos+=8,r},readFloat:function(){var r=Oa(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Oa(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,s,h=this.buf;return e=127&(s=h[this.pos++]),s<128?e:(e|=(127&(s=h[this.pos++]))<<7,s<128?e:(e|=(127&(s=h[this.pos++]))<<14,s<128?e:(e|=(127&(s=h[this.pos++]))<<21,s<128?e:function(_,x,w){var I,L,ee=w.buf;if(I=(112&(L=ee[w.pos++]))>>4,L<128||(I|=(127&(L=ee[w.pos++]))<<3,L<128)||(I|=(127&(L=ee[w.pos++]))<<10,L<128)||(I|=(127&(L=ee[w.pos++]))<<17,L<128)||(I|=(127&(L=ee[w.pos++]))<<24,L<128)||(I|=(1&(L=ee[w.pos++]))<<31,L<128))return function hc(r,e,s){return s?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}(_,I,x);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(s=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&Tu?Tu.decode(this.buf.subarray(e,r)):function(s,h,_){for(var x="",w=h;w<_;){var I,L,ee,ae=s[w],se=null,me=ae>239?4:ae>223?3:ae>191?2:1;if(w+me>_)break;1===me?ae<128&&(se=ae):2===me?128==(192&(I=s[w+1]))&&(se=(31&ae)<<6|63&I)<=127&&(se=null):3===me?(L=s[w+2],128==(192&(I=s[w+1]))&&128==(192&L)&&((se=(15&ae)<<12|(63&I)<<6|63&L)<=2047||se>=55296&&se<=57343)&&(se=null)):4===me&&(L=s[w+2],ee=s[w+3],128==(192&(I=s[w+1]))&&128==(192&L)&&128==(192&ee)&&((se=(15&ae)<<18|(63&I)<<12|(63&L)<<6|63&ee)<=65535||se>=1114112)&&(se=null)),null===se?(se=65533,me=1):se>65535&&(se-=65536,x+=String.fromCharCode(se>>>10&1023|55296),se=56320|1023&se),x+=String.fromCharCode(se),w+=me}return x}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==kr.Bytes)return r.push(this.readVarint(e));var s=Ra(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==kr.Bytes)return r.push(this.readSVarint());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==kr.Bytes)return r.push(this.readBoolean());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==kr.Bytes)return r.push(this.readFloat());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==kr.Bytes)return r.push(this.readDouble());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==kr.Bytes)return r.push(this.readFixed32());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==kr.Bytes)return r.push(this.readSFixed32());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==kr.Bytes)return r.push(this.readFixed64());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==kr.Bytes)return r.push(this.readSFixed64());var e=Ra(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===kr.Varint)for(;this.buf[this.pos++]>127;);else if(e===kr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===kr.Fixed32)this.pos+=4;else{if(e!==kr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),fc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),fc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),fc(this.buf,-1&r,this.pos),fc(this.buf,Math.floor(r*ka),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),fc(this.buf,-1&r,this.pos),fc(this.buf,Math.floor(r*ka),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,s){var h,_,x,I;if(e>=0?(h=e%4294967296|0,_=e/4294967296|0):(_=~(-e/4294967296),4294967295^(h=~(-e%4294967296))?h=h+1|0:(h=0,_=_+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),x=h,(I=s).buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,x>>>=7,I.buf[I.pos++]=127&x|128,I.buf[I.pos]=127&(x>>>=7),function(x,w){var I=(7&x)<<4;w.buf[w.pos++]|=I|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(_,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(h,_,x){for(var w,I,L=0;L<_.length;L++){if((w=_.charCodeAt(L))>55295&&w<57344){if(!I){w>56319||L+1===_.length?(h[x++]=239,h[x++]=191,h[x++]=189):I=w;continue}if(w<56320){h[x++]=239,h[x++]=191,h[x++]=189,I=w;continue}w=I-55296<<10|w-56320|65536,I=null}else I&&(h[x++]=239,h[x++]=191,h[x++]=189,I=null);w<128?h[x++]=w:(w<2048?h[x++]=w>>6|192:(w<65536?h[x++]=w>>12|224:(h[x++]=w>>18|240,h[x++]=w>>12&63|128),h[x++]=w>>6&63|128),h[x++]=63&w|128)}return x}(this.buf,r,this.pos);var s=this.pos-e;s>=128&&Uc(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),mf(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),mf(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,e){this.pos++;var s=this.pos;r(e,this);var h=this.pos-s;h>=128&&Uc(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,e,s){this.writeTag(r,kr.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,jc,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,tp,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,Fd,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,np,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,Rd,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,Ld,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,gf,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,pc,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,Nd,e)},writeBytesField:function(r,e){this.writeTag(r,kr.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,kr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,kr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,kr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,kr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,kr.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,kr.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,kr.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,kr.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,kr.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,Boolean(e))}};class Bd{constructor(e,{pixelRatio:s,version:h,stretchX:_,stretchY:x,content:w}){this.paddedRect=e,this.pixelRatio=s,this.stretchX=_,this.stretchY=x,this.content=w,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class rp{constructor(e,s){const h={},_={};this.haveRenderCallbacks=[];const x=[];this.addImages(e,h,x),this.addImages(s,_,x);const{w,h:I}=ip(x),L=new sa({width:w||1,height:I||1});for(const ee in e){const ae=e[ee],se=h[ee].paddedRect;sa.copy(ae.data,L,{x:0,y:0},{x:se.x+1,y:se.y+1},ae.data)}for(const ee in s){const ae=s[ee],se=_[ee].paddedRect,me=se.x+1,Ce=se.y+1,Te=ae.data.width,je=ae.data.height;sa.copy(ae.data,L,{x:0,y:0},{x:me,y:Ce},ae.data),sa.copy(ae.data,L,{x:0,y:je-1},{x:me,y:Ce-1},{width:Te,height:1}),sa.copy(ae.data,L,{x:0,y:0},{x:me,y:Ce+je},{width:Te,height:1}),sa.copy(ae.data,L,{x:Te-1,y:0},{x:me-1,y:Ce},{width:1,height:je}),sa.copy(ae.data,L,{x:0,y:0},{x:me+Te,y:Ce},{width:1,height:je})}this.image=L,this.iconPositions=h,this.patternPositions=_}addImages(e,s,h){for(const _ in e){const x=e[_],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(w),s[_]=new Bd(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(e,s){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),s)}patchUpdatedImage(e,s,h){if(!e||!s||e.version===s.version)return;e.version=s.version;const[_,x]=e.tl;h.update(s.data,void 0,{x:_,y:x})}}Fn("ImagePosition",Bd),Fn("ImageAtlas",rp),g.WritingMode=void 0,(al=g.WritingMode||(g.WritingMode={}))[al.none=0]="none",al[al.horizontal=1]="horizontal",al[al.vertical=2]="vertical",al[al.horizontalOnly=3]="horizontalOnly";class ql{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,s){const h=new ql;return h.scale=e||1,h.fontStack=s,h}static forImage(e){const s=new ql;return s.imageName=e,s}}class Wl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,s){const h=new Wl;for(let _=0;_<e.sections.length;_++){const x=e.sections[_];x.image?h.addImageSection(x):h.addTextSection(x,s)}return h}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let s="";for(let h=0;h<e.length;h++){const _=e.charCodeAt(h+1)||null,x=e.charCodeAt(h-1)||null;s+=_&&os(_)&&!Vc[e[h+1]]||x&&os(x)&&!Vc[e[h-1]]||!Vc[e[h]]?e[h]:Vc[e[h]]}return s}(this.text)}trim(){let e=0;for(let h=0;h<this.text.length&&Iu[this.text.charCodeAt(h)];h++)e++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=e&&Iu[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)}substring(e,s){const h=new Wl;return h.text=this.text.substring(e,s),h.sectionIndex=this.sectionIndex.slice(e,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,s)=>Math.max(e,this.sections[s].scale),0)}addTextSection(e,s){this.text+=e.text,this.sections.push(ql.forText(e.scale,e.fontStack||s));const h=this.sections.length-1;for(let _=0;_<e.text.length;++_)this.sectionIndex.push(h)}addImageSection(e){const s=e.image?e.image.name:"";if(0===s.length)return void Vt("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ql.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Vt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mc(r,e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je){const et=Wl.fromFeature(r,_);let yt;se===g.WritingMode.vertical&&et.verticalizePunctuation();const{processBidirectionalText:Gt,processStyledBidirectionalText:zt}=Vo;if(Gt&&1===et.sections.length){yt=[];const on=Gt(et.toString(),Hd(et,ee,x,e,h,Ce,Te));for(const Yn of on){const ui=new Wl;ui.text=Yn,ui.sections=et.sections;for(let Gn=0;Gn<Yn.length;Gn++)ui.sectionIndex.push(0);yt.push(ui)}}else if(zt){yt=[];const on=zt(et.text,et.sectionIndex,Hd(et,ee,x,e,h,Ce,Te));for(const Yn of on){const ui=new Wl;ui.text=Yn[0],ui.sectionIndex=Yn[1],ui.sections=et.sections,yt.push(ui)}}else yt=function(on,Yn){const ui=[],Gn=on.text;let Un=0;for(const Nn of Yn)ui.push(on.substring(Un,Nn)),Un=Nn;return Un<Gn.length&&ui.push(on.substring(Un,Gn.length)),ui}(et,Hd(et,ee,x,e,h,Ce,Te));const en=[],pn={positionedLines:en,text:et.toString(),top:ae[1],bottom:ae[1],left:ae[0],right:ae[0],writingMode:se,iconsInText:!1,verticalizable:!1};return function(on,Yn,ui,Gn,Un,Nn,Kn,$n,Dn,Mi,wi,Yi){let vr=0,Nr=-17,Vr=0,jo=0;const po="right"===$n?1:"left"===$n?0:.5;let To=0;for(const Ro of Un){Ro.trim();const ws=Ro.getMaxScale(),Cs=24*(ws-1),qs={positionedGlyphs:[],lineOffset:0};on.positionedLines[To]=qs;const Os=qs.positionedGlyphs;let Ws=0;if(!Ro.length()){Nr+=Nn,++To;continue}for(let Ao=0;Ao<Ro.length();Ao++){const or=Ro.getSection(Ao),Ys=Ro.getSectionIndex(Ao),Fo=Ro.getCharCode(Ao);let Es=0,la=null,ca=null,ua=null,cl=24;const wa=!(Dn===g.WritingMode.horizontal||!wi&&!Ta(Fo)||wi&&(Iu[Fo]||(Gr=Fo,Ln.Arabic(Gr)||Ln["Arabic Supplement"](Gr)||Ln["Arabic Extended-A"](Gr)||Ln["Arabic Presentation Forms-A"](Gr)||Ln["Arabic Presentation Forms-B"](Gr))));if(or.imageName){const Ks=Gn[or.imageName];if(!Ks)continue;ua=or.imageName,on.iconsInText=on.iconsInText||!0,ca=Ks.paddedRect;const ks=Ks.displaySize;or.scale=24*or.scale/Yi,la={width:ks[0],height:ks[1],left:1,top:-3,advance:wa?ks[1]:ks[0]},Es=Cs+(24-ks[1]*or.scale),cl=la.advance;const ul=wa?ks[0]*or.scale-24*ws:ks[1]*or.scale-24*ws;ul>0&&ul>Ws&&(Ws=ul)}else{const Ks=ui[or.fontStack],ks=Ks&&Ks[Fo];if(ks&&ks.rect)ca=ks.rect,la=ks.metrics;else{const ul=Yn[or.fontStack],Js=ul&&ul[Fo];if(!Js)continue;la=Js.metrics}Es=24*(ws-or.scale)}wa?(on.verticalizable=!0,Os.push({glyph:Fo,imageName:ua,x:vr,y:Nr+Es,vertical:wa,scale:or.scale,fontStack:or.fontStack,sectionIndex:Ys,metrics:la,rect:ca}),vr+=cl*or.scale+Mi):(Os.push({glyph:Fo,imageName:ua,x:vr,y:Nr+Es,vertical:wa,scale:or.scale,fontStack:or.fontStack,sectionIndex:Ys,metrics:la,rect:ca}),vr+=la.advance*or.scale+Mi)}0!==Os.length&&(Vr=Math.max(vr-Mi,Vr),xf(Os,0,Os.length-1,po,Ws)),vr=0;const Qr=Nn*ws+Ws;qs.lineOffset=Math.max(Ws,Cs),Nr+=Qr,jo=Math.max(Qr,jo),++To}var Gr;const as=Nr- -17,{horizontalAlign:ls,verticalAlign:$r}=gc(Kn);(function(Ro,ws,Cs,qs,Os,Ws,Qr,Ao,or){const Ys=(ws-Cs)*Os;let Fo=0;Fo=Ws!==Qr?-Ao*qs- -17:(-qs*or+.5)*Qr;for(const Es of Ro)for(const la of Es.positionedGlyphs)la.x+=Ys,la.y+=Fo})(on.positionedLines,po,ls,$r,Vr,jo,Nn,as,Un.length),on.top+=-$r*as,on.bottom=on.top+as,on.left+=-ls*Vr,on.right=on.left+Vr}(pn,e,s,h,yt,w,I,L,se,ee,me,je),!function(on){for(const Yn of on)if(0!==Yn.positionedGlyphs.length)return!1;return!0}(en)&&pn}const Iu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},bf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function zd(r,e,s,h,_,x){if(e.imageName){const w=h[e.imageName];return w?w.displaySize[0]*e.scale*24/x+_:0}{const w=s[e.fontStack],I=w&&w[r];return I?I.metrics.advance*e.scale+_:0}}function Vd(r,e,s,h){const _=Math.pow(r-e,2);return h?r<e?_/2:2*_:_+Math.abs(s)*s}function Yl(r,e,s){let h=0;return 10===r&&(h-=1e4),s&&(h+=150),40!==r&&65288!==r||(h+=50),41!==e&&65289!==e||(h+=50),h}function Ud(r,e,s,h,_,x){let w=null,I=Vd(e,s,_,x);for(const L of h){const ee=Vd(e-L.x,s,_,x)+L.badness;ee<=I&&(w=L,I=ee)}return{index:r,x:e,priorBreak:w,badness:I}}function jd(r){return r?jd(r.priorBreak).concat(r.index):[]}function Hd(r,e,s,h,_,x,w){if("point"!==x)return[];if(!r)return[];const I=[],L=function(me,Ce,Te,je,et,yt){let Gt=0;for(let zt=0;zt<me.length();zt++){const en=me.getSection(zt);Gt+=zd(me.getCharCode(zt),en,je,et,Ce,yt)}return Gt/Math.max(1,Math.ceil(Gt/Te))}(r,e,s,h,_,w),ee=r.text.indexOf("\u200b")>=0;let ae=0;for(let me=0;me<r.length();me++){const Ce=r.getSection(me),Te=r.getCharCode(me);if(Iu[Te]||(ae+=zd(Te,Ce,h,_,e,w)),me<r.length()-1){const je=!((se=Te)<11904||!(Ln["Bopomofo Extended"](se)||Ln.Bopomofo(se)||Ln["CJK Compatibility Forms"](se)||Ln["CJK Compatibility Ideographs"](se)||Ln["CJK Compatibility"](se)||Ln["CJK Radicals Supplement"](se)||Ln["CJK Strokes"](se)||Ln["CJK Symbols and Punctuation"](se)||Ln["CJK Unified Ideographs Extension A"](se)||Ln["CJK Unified Ideographs"](se)||Ln["Enclosed CJK Letters and Months"](se)||Ln["Halfwidth and Fullwidth Forms"](se)||Ln.Hiragana(se)||Ln["Ideographic Description Characters"](se)||Ln["Kangxi Radicals"](se)||Ln["Katakana Phonetic Extensions"](se)||Ln.Katakana(se)||Ln["Vertical Forms"](se)||Ln["Yi Radicals"](se)||Ln["Yi Syllables"](se)));(bf[Te]||je||Ce.imageName)&&I.push(Ud(me+1,ae,L,I,Yl(Te,r.getCharCode(me+1),je&&ee),!1))}}var se;return jd(Ud(r.length(),ae,L,I,0,!0))}function gc(r){let e=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:e,verticalAlign:s}}function xf(r,e,s,h,_){if(!h&&!_)return;const x=r[s],w=(r[s].x+x.metrics.advance*x.scale)*h;for(let I=e;I<=s;I++)r[I].x-=w,r[I].y+=_}function Gd(r,e,s){const{horizontalAlign:h,verticalAlign:_}=gc(s),x=e[0]-r.displaySize[0]*h,w=e[1]-r.displaySize[1]*_;return{image:r,top:w,bottom:w+r.displaySize[1],left:x,right:x+r.displaySize[0]}}function $d(r,e,s,h,_,x){const w=r.image;let I;if(w.content){const et=w.content,yt=w.pixelRatio||1;I=[et[0]/yt,et[1]/yt,w.displaySize[0]-et[2]/yt,w.displaySize[1]-et[3]/yt]}const L=e.left*x,ee=e.right*x;let ae,se,me,Ce;"width"===s||"both"===s?(Ce=_[0]+L-h[3],se=_[0]+ee+h[1]):(Ce=_[0]+(L+ee-w.displaySize[0])/2,se=Ce+w.displaySize[0]);const Te=e.top*x,je=e.bottom*x;return"height"===s||"both"===s?(ae=_[1]+Te-h[0],me=_[1]+je+h[2]):(ae=_[1]+(Te+je-w.displaySize[1])/2,me=ae+w.displaySize[1]),{image:w,top:ae,right:se,bottom:me,left:Ce,collisionPadding:I}}const Fa=128;function $c(r,e){const{expression:s}=e;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new Br(r+1))};if("source"===s.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:_}=s;let x=0;for(;x<h.length&&h[x]<=r;)x++;x=Math.max(0,x-1);let w=x;for(;w<h.length&&h[w]<r+1;)w++;w=Math.min(h.length-1,w);const I=h[x],L=h[w];return"composite"===s.kind?{kind:"composite",minZoom:I,maxZoom:L,interpolationType:_}:{kind:"camera",minZoom:I,maxZoom:L,minSize:s.evaluate(new Br(I)),maxSize:s.evaluate(new Br(L)),interpolationType:_}}}function Zd(r,{uSize:e,uSizeT:s},{lowerSize:h,upperSize:_}){return"source"===r.kind?h/Fa:"composite"===r.kind?Ir(h/Fa,_/Fa,s):e}function Zc(r,e){let s=0,h=0;if("constant"===r.kind)h=r.layoutSize;else if("source"!==r.kind){const{interpolationType:_,minZoom:x,maxZoom:w}=r,I=_?he(Pr.interpolationFactor(_,e,x,w),0,1):0;"camera"===r.kind?h=Ir(r.minSize,r.maxSize,I):s=I}return{uSizeT:s,uSize:h}}var Pu=Object.freeze({__proto__:null,getSizeData:$c,evaluateSizeForFeature:Zd,evaluateSizeForZoom:Zc,SIZE_PACK_FACTOR:Fa});class ll extends lt{constructor(e,s,h,_){super(e,s),this.angle=h,void 0!==_&&(this.segment=_)}clone(){return new ll(this.x,this.y,this.angle,this.segment)}}function qc(r,e,s,h,_){if(void 0===e.segment)return!0;let x=e,w=e.segment+1,I=0;for(;I>-s/2;){if(w--,w<0)return!1;I-=r[w].dist(x),x=r[w]}I+=r[w].dist(r[w+1]),w++;const L=[];let ee=0;for(;I<s/2;){const ae=r[w],se=r[w+1];if(!se)return!1;let me=r[w-1].angleTo(ae)-ae.angleTo(se);for(me=Math.abs((me+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:I,angleDelta:me}),ee+=me;I-L[0].distance>h;)ee-=L.shift().angleDelta;if(ee>_)return!1;w++,I+=ae.dist(se)}return!0}function qd(r){let e=0;for(let s=0;s<r.length-1;s++)e+=r[s].dist(r[s+1]);return e}function Ou(r,e,s){return r?.6*e*s:0}function _c(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function wf(r,e,s,h,_,x){const w=Ou(s,_,x),I=_c(s,h)*x;let L=0;const ee=qd(r)/2;for(let ae=0;ae<r.length-1;ae++){const se=r[ae],me=r[ae+1],Ce=se.dist(me);if(L+Ce>ee){const Te=(ee-L)/Ce,je=Ir(se.x,me.x,Te),et=Ir(se.y,me.y,Te),yt=new ll(je,et,me.angleTo(se),ae);return yt._round(),!w||qc(r,yt,I,w,e)?yt:void 0}L+=Ce}}function op(r,e,s,h,_,x,w,I,L){const ee=Ou(h,x,w),ae=_c(h,_),se=ae*w,me=0===r[0].x||r[0].x===L||0===r[0].y||r[0].y===L;return e-se<e/4&&(e=se+e/4),Wd(r,me?e/2*I%e:(ae/2+2*x)*w*I%e,e,ee,s,se,me,!1,L)}function Wd(r,e,s,h,_,x,w,I,L){const ee=x/2,ae=qd(r);let se=0,me=e-s,Ce=[];for(let Te=0;Te<r.length-1;Te++){const je=r[Te],et=r[Te+1],yt=je.dist(et),Gt=et.angleTo(je);for(;me+s<se+yt;){me+=s;const zt=(me-se)/yt,en=Ir(je.x,et.x,zt),pn=Ir(je.y,et.y,zt);if(en>=0&&en<L&&pn>=0&&pn<L&&me-ee>=0&&me+ee<=ae){const on=new ll(en,pn,Gt,Te);on._round(),h&&!qc(r,on,x,h,_)||Ce.push(on)}}se+=yt}return I||Ce.length||w||(Ce=Wd(r,se/2,s,h,_,x,w,!0,L)),Ce}function sp(r,e,s,h,_){const x=[];for(let w=0;w<r.length;w++){const I=r[w];let L;for(let ee=0;ee<I.length-1;ee++){let ae=I[ee],se=I[ee+1];ae.x<e&&se.x<e||(ae.x<e?ae=new lt(e,ae.y+(e-ae.x)/(se.x-ae.x)*(se.y-ae.y))._round():se.x<e&&(se=new lt(e,ae.y+(e-ae.x)/(se.x-ae.x)*(se.y-ae.y))._round()),ae.y<s&&se.y<s||(ae.y<s?ae=new lt(ae.x+(s-ae.y)/(se.y-ae.y)*(se.x-ae.x),s)._round():se.y<s&&(se=new lt(ae.x+(s-ae.y)/(se.y-ae.y)*(se.x-ae.x),s)._round()),ae.x>=h&&se.x>=h||(ae.x>=h?ae=new lt(h,ae.y+(h-ae.x)/(se.x-ae.x)*(se.y-ae.y))._round():se.x>=h&&(se=new lt(h,ae.y+(h-ae.x)/(se.x-ae.x)*(se.y-ae.y))._round()),ae.y>=_&&se.y>=_||(ae.y>=_?ae=new lt(ae.x+(_-ae.y)/(se.y-ae.y)*(se.x-ae.x),_)._round():se.y>=_&&(se=new lt(ae.x+(_-ae.y)/(se.y-ae.y)*(se.x-ae.x),_)._round()),L&&ae.equals(L[L.length-1])||(L=[ae],x.push(L)),L.push(se)))))}}return x}function Yd(r,e,s,h){const _=[],x=r.image,w=x.pixelRatio,I=x.paddedRect.w-2,L=x.paddedRect.h-2,ee=r.right-r.left,ae=r.bottom-r.top,se=x.stretchX||[[0,I]],me=x.stretchY||[[0,L]],Ce=(Nn,Kn)=>Nn+Kn[1]-Kn[0],Te=se.reduce(Ce,0),je=me.reduce(Ce,0),et=I-Te,yt=L-je;let Gt=0,zt=Te,en=0,pn=je,on=0,Yn=et,ui=0,Gn=yt;if(x.content&&h){const Nn=x.content;Gt=yc(se,0,Nn[0]),en=yc(me,0,Nn[1]),zt=yc(se,Nn[0],Nn[2]),pn=yc(me,Nn[1],Nn[3]),on=Nn[0]-Gt,ui=Nn[1]-en,Yn=Nn[2]-Nn[0]-zt,Gn=Nn[3]-Nn[1]-pn}const Un=(Nn,Kn,$n,Dn)=>{const Mi=Jd(Nn.stretch-Gt,zt,ee,r.left),wi=vc(Nn.fixed-on,Yn,Nn.stretch,Te),Yi=Jd(Kn.stretch-en,pn,ae,r.top),vr=vc(Kn.fixed-ui,Gn,Kn.stretch,je),Nr=Jd($n.stretch-Gt,zt,ee,r.left),Vr=vc($n.fixed-on,Yn,$n.stretch,Te),jo=Jd(Dn.stretch-en,pn,ae,r.top),po=vc(Dn.fixed-ui,Gn,Dn.stretch,je),To=new lt(Mi,Yi),Gr=new lt(Nr,Yi),as=new lt(Nr,jo),ls=new lt(Mi,jo),$r=new lt(wi/w,vr/w),Ro=new lt(Vr/w,po/w),ws=e*Math.PI/180;if(ws){const Os=Math.sin(ws),Ws=Math.cos(ws),Qr=[Ws,-Os,Os,Ws];To._matMult(Qr),Gr._matMult(Qr),ls._matMult(Qr),as._matMult(Qr)}const Cs=Nn.stretch+Nn.fixed,qs=Kn.stretch+Kn.fixed;return{tl:To,tr:Gr,bl:ls,br:as,tex:{x:x.paddedRect.x+1+Cs,y:x.paddedRect.y+1+qs,w:$n.stretch+$n.fixed-Cs,h:Dn.stretch+Dn.fixed-qs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$r,pixelOffsetBR:Ro,minFontScaleX:Yn/w/ee,minFontScaleY:Gn/w/ae,isSDF:s}};if(h&&(x.stretchX||x.stretchY)){const Nn=Kd(se,et,Te),Kn=Kd(me,yt,je);for(let $n=0;$n<Nn.length-1;$n++){const Dn=Nn[$n],Mi=Nn[$n+1];for(let wi=0;wi<Kn.length-1;wi++)_.push(Un(Dn,Kn[wi],Mi,Kn[wi+1]))}}else _.push(Un({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:L+1}));return _}function yc(r,e,s){let h=0;for(const _ of r)h+=Math.max(e,Math.min(s,_[1]))-Math.max(e,Math.min(s,_[0]));return h}function Kd(r,e,s){const h=[{fixed:-1,stretch:0}];for(const[_,x]of r){const w=h[h.length-1];h.push({fixed:_-w.stretch,stretch:w.stretch}),h.push({fixed:_-w.stretch,stretch:w.stretch+(x-_)})}return h.push({fixed:e+1,stretch:s}),h}function Jd(r,e,s,h){return r/e*s+h}function vc(r,e,s,h){return r-e*s/h}Fn("Anchor",ll);class ku{constructor(e,s,h,_,x,w,I,L,ee,ae){if(this.boxStartIndex=e.length,ee){let se=w.top,me=w.bottom;const Ce=w.collisionPadding;Ce&&(se-=Ce[1],me+=Ce[3]);let Te=me-se;Te>0&&(Te=Math.max(10,Te),this.circleDiameter=Te)}else{let se=w.top*I-L,me=w.bottom*I+L,Ce=w.left*I-L,Te=w.right*I+L;const je=w.collisionPadding;if(je&&(Ce-=je[0]*I,se-=je[1]*I,Te+=je[2]*I,me+=je[3]*I),ae){const et=new lt(Ce,se),yt=new lt(Te,se),Gt=new lt(Ce,me),zt=new lt(Te,me),en=ae*Math.PI/180;et._rotate(en),yt._rotate(en),Gt._rotate(en),zt._rotate(en),Ce=Math.min(et.x,yt.x,Gt.x,zt.x),Te=Math.max(et.x,yt.x,Gt.x,zt.x),se=Math.min(et.y,yt.y,Gt.y,zt.y),me=Math.max(et.y,yt.y,Gt.y,zt.y)}e.emplaceBack(s.x,s.y,Ce,se,Te,me,h,_,x)}this.boxEndIndex=e.length}}class ap{constructor(e=[],s=Cf){if(this.data=e,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:s,compare:h}=this,_=s[e];for(;e>0;){const x=e-1>>1,w=s[x];if(h(_,w)>=0)break;s[e]=w,e=x}s[e]=_}_down(e){const{data:s,compare:h}=this,_=this.length>>1,x=s[e];for(;e<_;){let w=1+(e<<1),I=s[w];const L=w+1;if(L<this.length&&h(s[L],I)<0&&(w=L,I=s[L]),h(I,x)>=0)break;s[e]=I,e=w}s[e]=x}}function Cf(r,e){return r<e?-1:r>e?1:0}function Ef(r,e=1,s=!1){let h=1/0,_=1/0,x=-1/0,w=-1/0;const I=r[0];for(let Ce=0;Ce<I.length;Ce++){const Te=I[Ce];(!Ce||Te.x<h)&&(h=Te.x),(!Ce||Te.y<_)&&(_=Te.y),(!Ce||Te.x>x)&&(x=Te.x),(!Ce||Te.y>w)&&(w=Te.y)}const L=Math.min(x-h,w-_);let ee=L/2;const ae=new ap([],xa);if(0===L)return new lt(h,_);for(let Ce=h;Ce<x;Ce+=L)for(let Te=_;Te<w;Te+=L)ae.push(new bc(Ce+ee,Te+ee,ee,r));let se=function(Ce){let Te=0,je=0,et=0;const yt=Ce[0];for(let Gt=0,zt=yt.length,en=zt-1;Gt<zt;en=Gt++){const pn=yt[Gt],on=yt[en],Yn=pn.x*on.y-on.x*pn.y;je+=(pn.x+on.x)*Yn,et+=(pn.y+on.y)*Yn,Te+=3*Yn}return new bc(je/Te,et/Te,0,Ce)}(r),me=ae.length;for(;ae.length;){const Ce=ae.pop();(Ce.d>se.d||!se.d)&&(se=Ce,s&&console.log("found best %d after %d probes",Math.round(1e4*Ce.d)/1e4,me)),Ce.max-se.d<=e||(ee=Ce.h/2,ae.push(new bc(Ce.p.x-ee,Ce.p.y-ee,ee,r)),ae.push(new bc(Ce.p.x+ee,Ce.p.y-ee,ee,r)),ae.push(new bc(Ce.p.x-ee,Ce.p.y+ee,ee,r)),ae.push(new bc(Ce.p.x+ee,Ce.p.y+ee,ee,r)),me+=4)}return s&&(console.log(`num probes: ${me}`),console.log(`best distance: ${se.d}`)),se.p}function xa(r,e){return e.max-r.max}function bc(r,e,s,h){this.p=new lt(r,e),this.h=s,this.d=function(_,x){let w=!1,I=1/0;for(let L=0;L<x.length;L++){const ee=x[L];for(let ae=0,se=ee.length,me=se-1;ae<se;me=ae++){const Ce=ee[ae],Te=ee[me];Ce.y>_.y!=Te.y>_.y&&_.x<(Te.x-Ce.x)*(_.y-Ce.y)/(Te.y-Ce.y)+Ce.x&&(w=!w),I=Math.min(I,fd(_,Ce,Te))}}return(w?1:-1)*Math.sqrt(I)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const Ru=Number.POSITIVE_INFINITY;function lp(r,e){return e[1]!==Ru?function(s,h,_){let x=0,w=0;switch(h=Math.abs(h),_=Math.abs(_),s){case"top-right":case"top-left":case"top":w=_-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-_}switch(s){case"top-right":case"bottom-right":case"right":x=-h;break;case"top-left":case"bottom-left":case"left":x=h}return[x,w]}(r,e[0],e[1]):function(s,h){let _=0,x=0;h<0&&(h=0);const w=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-h;break;case"top":x=h-7}switch(s){case"top-right":case"bottom-right":_=-w;break;case"top-left":case"bottom-left":_=w;break;case"left":_=h;break;case"right":_=-h}return[_,x]}(r,e[0])}function Fu(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Df(r,e,s,h,_,x,w,I,L,ee,ae){let se=x.textMaxSize.evaluate(e,{});void 0===se&&(se=w);const me=r.layers[0].layout,Ce=me.get("icon-offset").evaluate(e,{},ae),Te=cp(s.horizontal),je=w/24,et=r.tilePixelRatio*je,yt=r.tilePixelRatio*se/24,Gt=r.tilePixelRatio*I,zt=r.tilePixelRatio*me.get("symbol-spacing"),en=me.get("text-padding")*r.tilePixelRatio,pn=me.get("icon-padding")*r.tilePixelRatio,on=me.get("text-max-angle")/180*Math.PI,Yn="map"===me.get("text-rotation-alignment")&&"point"!==me.get("symbol-placement"),ui="map"===me.get("icon-rotation-alignment")&&"point"!==me.get("symbol-placement"),Gn=me.get("symbol-placement"),Un=zt/2,Nn=me.get("icon-text-fit");let Kn;h&&"none"!==Nn&&(r.allowVerticalPlacement&&s.vertical&&(Kn=$d(h,s.vertical,Nn,me.get("icon-text-fit-padding"),Ce,je)),Te&&(h=$d(h,Te,Nn,me.get("icon-text-fit-padding"),Ce,je)));const $n=(Dn,Mi)=>{Mi.x<0||Mi.x>=ko||Mi.y<0||Mi.y>=ko||function(wi,Yi,vr,Nr,Vr,jo,po,To,Gr,as,ls,$r,Ro,ws,Cs,qs,Os,Ws,Qr,Ao,or,Ys,Fo,Es,la){const ca=wi.addToLineVertexArray(Yi,vr);let ua,cl,wa,Ks,ks=0,ul=0,Js=0,Qc=0,rh=-1,Bu=-1;const dl={};let oh=dd(""),sh=0,zu=0;if(void 0===To._unevaluatedLayout.getValue("text-radial-offset")?[sh,zu]=To.layout.get("text-offset").evaluate(or,{},Es).map(Ds=>24*Ds):(sh=24*To.layout.get("text-radial-offset").evaluate(or,{},Es),zu=Ru),wi.allowVerticalPlacement&&Nr.vertical){const Ds=To.layout.get("text-rotate").evaluate(or,{},Es)+90;wa=new ku(Gr,Yi,as,ls,$r,Nr.vertical,Ro,ws,Cs,Ds),po&&(Ks=new ku(Gr,Yi,as,ls,$r,po,Os,Ws,Cs,Ds))}if(Vr){const Ds=To.layout.get("icon-rotate").evaluate(or,{}),hl="none"!==To.layout.get("icon-text-fit"),Xc=Yd(Vr,Ds,Fo,hl),Cc=po?Yd(po,Ds,Fo,hl):void 0;cl=new ku(Gr,Yi,as,ls,$r,Vr,Os,Ws,!1,Ds),ks=4*Xc.length;const dh=wi.iconSizeData;let Ki=null;"source"===dh.kind?(Ki=[Fa*To.layout.get("icon-size").evaluate(or,{})],Ki[0]>kl&&Vt(`${wi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===dh.kind&&(Ki=[Fa*Ys.compositeIconSizes[0].evaluate(or,{},Es),Fa*Ys.compositeIconSizes[1].evaluate(or,{},Es)],(Ki[0]>kl||Ki[1]>kl)&&Vt(`${wi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),wi.addSymbols(wi.icon,Xc,Ki,Ao,Qr,or,g.WritingMode.none,Yi,ca.lineStartIndex,ca.lineLength,-1,Es),rh=wi.icon.placedSymbolArray.length-1,Cc&&(ul=4*Cc.length,wi.addSymbols(wi.icon,Cc,Ki,Ao,Qr,or,g.WritingMode.vertical,Yi,ca.lineStartIndex,ca.lineLength,-1,Es),Bu=wi.icon.placedSymbolArray.length-1)}const ah=Object.keys(Nr.horizontal);for(const Ds of ah){const hl=Nr.horizontal[Ds];if(!ua){oh=dd(hl.text);const Cc=To.layout.get("text-rotate").evaluate(or,{},Es);ua=new ku(Gr,Yi,as,ls,$r,hl,Ro,ws,Cs,Cc)}const Xc=1===hl.positionedLines.length;if(Js+=Qd(wi,Yi,hl,jo,To,Cs,or,qs,ca,Nr.vertical?g.WritingMode.horizontal:g.WritingMode.horizontalOnly,Xc?ah:[Ds],dl,rh,Ys,Es),Xc)break}Nr.vertical&&(Qc+=Qd(wi,Yi,Nr.vertical,jo,To,Cs,or,qs,ca,g.WritingMode.vertical,["vertical"],dl,Bu,Ys,Es));const lh=ua?ua.boxStartIndex:wi.collisionBoxArray.length,mp=ua?ua.boxEndIndex:wi.collisionBoxArray.length,Of=wa?wa.boxStartIndex:wi.collisionBoxArray.length,Vu=wa?wa.boxEndIndex:wi.collisionBoxArray.length,ch=cl?cl.boxStartIndex:wi.collisionBoxArray.length,kf=cl?cl.boxEndIndex:wi.collisionBoxArray.length,uh=Ks?Ks.boxStartIndex:wi.collisionBoxArray.length,Uu=Ks?Ks.boxEndIndex:wi.collisionBoxArray.length;let Ca=-1;const ju=(Ds,hl)=>Ds&&Ds.circleDiameter?Math.max(Ds.circleDiameter,hl):hl;Ca=ju(ua,Ca),Ca=ju(wa,Ca),Ca=ju(cl,Ca),Ca=ju(Ks,Ca);const gp=Ca>-1?1:0;gp&&(Ca*=la/24),wi.glyphOffsetArray.length>=Kl.MAX_GLYPHS&&Vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==or.sortKey&&wi.addToSortKeyRanges(wi.symbolInstances.length,or.sortKey),wi.symbolInstances.emplaceBack(Yi.x,Yi.y,dl.right>=0?dl.right:-1,dl.center>=0?dl.center:-1,dl.left>=0?dl.left:-1,dl.vertical||-1,rh,Bu,oh,lh,mp,Of,Vu,ch,kf,uh,Uu,as,Js,Qc,ks,ul,gp,0,Ro,sh,zu,Ca)}(r,Mi,Dn,s,h,_,Kn,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,et,en,Yn,L,Gt,pn,ui,Ce,e,x,ee,ae,w)};if("line"===Gn)for(const Dn of sp(e.geometry,0,0,ko,ko)){const Mi=op(Dn,zt,on,s.vertical||Te,h,24,yt,r.overscaling,ko);for(const wi of Mi){const Yi=Te;Yi&&Mf(r,Yi.text,Un,wi)||$n(Dn,wi)}}else if("line-center"===Gn){for(const Dn of e.geometry)if(Dn.length>1){const Mi=wf(Dn,on,s.vertical||Te,h,24,yt);Mi&&$n(Dn,Mi)}}else if("Polygon"===e.type)for(const Dn of vo(e.geometry,0)){const Mi=Ef(Dn,16);$n(Dn[0],new ll(Mi.x,Mi.y,0))}else if("LineString"===e.type)for(const Dn of e.geometry)$n(Dn,new ll(Dn[0].x,Dn[0].y,0));else if("Point"===e.type)for(const Dn of e.geometry)for(const Mi of Dn)$n([Mi],new ll(Mi.x,Mi.y,0))}const kl=32640;function Qd(r,e,s,h,_,x,w,I,L,ee,ae,se,me,Ce,Te){const je=function(Gt,zt,en,pn,on,Yn,ui,Gn){const Un=pn.layout.get("text-rotate").evaluate(Yn,{})*Math.PI/180,Nn=[];for(const Kn of zt.positionedLines)for(const $n of Kn.positionedGlyphs){if(!$n.rect)continue;const Dn=$n.rect||{};let Mi=4,wi=!0,Yi=1,vr=0;const Nr=(on||Gn)&&$n.vertical,Vr=$n.metrics.advance*$n.scale/2;if(Gn&&zt.verticalizable){const Qr=24*($n.scale-1),Ao=(24-$n.metrics.width*$n.scale)/2;vr=Kn.lineOffset/2-($n.imageName?-Ao:Qr)}if($n.imageName){const Qr=ui[$n.imageName];wi=Qr.sdf,Yi=Qr.pixelRatio,Mi=1/Yi}const jo=on?[$n.x+Vr,$n.y]:[0,0];let po=on?[0,0]:[$n.x+Vr+en[0],$n.y+en[1]-vr],To=[0,0];Nr&&(To=po,po=[0,0]);const Gr=($n.metrics.left-Mi)*$n.scale-Vr+po[0],as=(-$n.metrics.top-Mi)*$n.scale+po[1],ls=Gr+Dn.w*$n.scale/Yi,$r=as+Dn.h*$n.scale/Yi,Ro=new lt(Gr,as),ws=new lt(ls,as),Cs=new lt(Gr,$r),qs=new lt(ls,$r);if(Nr){const Qr=new lt(-Vr,Vr- -17),Ao=-Math.PI/2,or=12-Vr,Ys=new lt(22-or,-($n.imageName?or:0)),Fo=new lt(...To);Ro._rotateAround(Ao,Qr)._add(Ys)._add(Fo),ws._rotateAround(Ao,Qr)._add(Ys)._add(Fo),Cs._rotateAround(Ao,Qr)._add(Ys)._add(Fo),qs._rotateAround(Ao,Qr)._add(Ys)._add(Fo)}if(Un){const Qr=Math.sin(Un),Ao=Math.cos(Un),or=[Ao,-Qr,Qr,Ao];Ro._matMult(or),ws._matMult(or),Cs._matMult(or),qs._matMult(or)}const Os=new lt(0,0),Ws=new lt(0,0);Nn.push({tl:Ro,tr:ws,bl:Cs,br:qs,tex:Dn,writingMode:zt.writingMode,glyphOffset:jo,sectionIndex:$n.sectionIndex,isSDF:wi,pixelOffsetTL:Os,pixelOffsetBR:Ws,minFontScaleX:0,minFontScaleY:0})}return Nn}(0,s,I,_,x,w,h,r.allowVerticalPlacement),et=r.textSizeData;let yt=null;"source"===et.kind?(yt=[Fa*_.layout.get("text-size").evaluate(w,{})],yt[0]>kl&&Vt(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===et.kind&&(yt=[Fa*Ce.compositeTextSizes[0].evaluate(w,{},Te),Fa*Ce.compositeTextSizes[1].evaluate(w,{},Te)],(yt[0]>kl||yt[1]>kl)&&Vt(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,je,yt,I,x,w,ee,e,L.lineStartIndex,L.lineLength,me,Te);for(const Gt of ae)se[Gt]=r.text.placedSymbolArray.length-1;return 4*je.length}function cp(r){for(const e in r)return r[e];return null}function Mf(r,e,s,h){const _=r.compareText;if(e in _){const x=_[e];for(let w=x.length-1;w>=0;w--)if(h.dist(x[w])<s)return!0}else _[e]=[];return _[e].push(h),!1}const Sf=Ol.VectorTileFeature.types,nr=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wc(r,e,s,h,_,x,w,I,L,ee,ae,se,me){const Ce=I?Math.min(kl,Math.round(I[0])):0,Te=I?Math.min(kl,Math.round(I[1])):0;r.emplaceBack(e,s,Math.round(32*h),Math.round(32*_),x,w,(Ce<<1)+(L?1:0),Te,16*ee,16*ae,256*se,256*me)}function Lu(r,e,s){r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s)}function up(r){for(const e of r.sections)if(lu(e.text))return!0;return!1}class xc{constructor(e){this.layoutVertexArray=new Tr,this.indexArray=new Cr,this.programConfigurations=e,this.segments=new Jr,this.dynamicLayoutVertexArray=new yo,this.opacityVertexArray=new _r,this.placedSymbolArray=new Kr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,s,h,_){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,pf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,nr,!0),this.opacityVertexBuffer.itemSize=1),(h||_)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Fn("SymbolBuffers",xc);class aa{constructor(e,s,h){this.layoutVertexArray=new e,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Jr,this.collisionVertexArray=new vs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ff.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Fn("CollisionBuffers",aa);class Kl{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(w=>w.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ac([]),this.placementViewportMatrix=Ac([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$c(this.zoom,s["text-size"]),this.iconSizeData=$c(this.zoom,s["icon-size"]);const h=this.layers[0].layout,_=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!_.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>g.WritingMode[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=e.sourceID}createArrays(){this.text=new xc(new $s(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new xc(new $s(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new hr,this.lineVertexArray=new lr,this.symbolInstances=new gi}calculateGlyphDependencies(e,s,h,_,x){for(let w=0;w<e.length;w++)if(s[e.charCodeAt(w)]=!0,(h||_)&&x){const I=Vc[e.charAt(w)];I&&(s[I.charCodeAt(0)]=!0)}}populate(e,s,h){const _=this.layers[0],x=_.layout,w=x.get("text-font"),I=x.get("text-field"),L=x.get("icon-image"),ee=("constant"!==I.value.kind||I.value.value instanceof ke&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),ae="constant"!==L.value.kind||!!L.value.value||Object.keys(L.parameters).length>0,se=x.get("symbol-sort-key");if(this.features=[],!ee&&!ae)return;const me=s.iconDependencies,Ce=s.glyphDependencies,Te=s.availableImages,je=new Br(this.zoom);for(const{feature:et,id:yt,index:Gt,sourceLayerIndex:zt}of e){const en=_._featureFilter.needGeometry,pn=Zs(et,en);if(!_._featureFilter.filter(je,pn,h))continue;let on,Yn;if(en||(pn.geometry=Za(et)),ee){const Gn=_.getValueAndResolveTokens("text-field",pn,h,Te),Un=ke.factory(Gn);up(Un)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ga()||this.hasRTLText&&Vo.isParsed())&&(on=kd(Un,_,pn))}if(ae){const Gn=_.getValueAndResolveTokens("icon-image",pn,h,Te);Yn=Gn instanceof Je?Gn:Je.fromString(Gn)}if(!on&&!Yn)continue;const ui=this.sortFeaturesByKey?se.evaluate(pn,{},h):void 0;if(this.features.push({id:yt,text:on,icon:Yn,index:Gt,sourceLayerIndex:zt,geometry:pn.geometry,properties:et.properties,type:Sf[et.type],sortKey:ui}),Yn&&(me[Yn.name]=!0),on){const Gn=w.evaluate(pn,{},h).join(","),Un="map"===x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.WritingMode.vertical)>=0;for(const Nn of on.sections)if(Nn.image)me[Nn.image.name]=!0;else{const Kn=pa(on.toString()),$n=Nn.fontStack||Gn,Dn=Ce[$n]=Ce[$n]||{};this.calculateGlyphDependencies(Nn.text,Dn,Un,this.allowVerticalPlacement,Kn)}}}"line"===x.get("symbol-placement")&&(this.features=function(et){const yt={},Gt={},zt=[];let en=0;function pn(Gn){zt.push(et[Gn]),en++}function on(Gn,Un,Nn){const Kn=Gt[Gn];return delete Gt[Gn],Gt[Un]=Kn,zt[Kn].geometry[0].pop(),zt[Kn].geometry[0]=zt[Kn].geometry[0].concat(Nn[0]),Kn}function Yn(Gn,Un,Nn){const Kn=yt[Un];return delete yt[Un],yt[Gn]=Kn,zt[Kn].geometry[0].shift(),zt[Kn].geometry[0]=Nn[0].concat(zt[Kn].geometry[0]),Kn}function ui(Gn,Un,Nn){const Kn=Nn?Un[0][Un[0].length-1]:Un[0][0];return`${Gn}:${Kn.x}:${Kn.y}`}for(let Gn=0;Gn<et.length;Gn++){const Un=et[Gn],Nn=Un.geometry,Kn=Un.text?Un.text.toString():null;if(!Kn){pn(Gn);continue}const $n=ui(Kn,Nn),Dn=ui(Kn,Nn,!0);if($n in Gt&&Dn in yt&&Gt[$n]!==yt[Dn]){const Mi=Yn($n,Dn,Nn),wi=on($n,Dn,zt[Mi].geometry);delete yt[$n],delete Gt[Dn],Gt[ui(Kn,zt[wi].geometry,!0)]=wi,zt[Mi].geometry=null}else $n in Gt?on($n,Dn,Nn):Dn in yt?Yn($n,Dn,Nn):(pn(Gn),yt[$n]=en-1,Gt[Dn]=en-1)}return zt.filter(Gn=>Gn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((et,yt)=>et.sortKey-yt.sortKey)}update(e,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(e,s,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,s){const h=this.lineVertexArray.length;if(void 0!==e.segment){let _=e.dist(s[e.segment+1]),x=e.dist(s[e.segment]);const w={};for(let I=e.segment+1;I<s.length;I++)w[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:_},I<s.length-1&&(_+=s[I+1].dist(s[I]));for(let I=e.segment||0;I>=0;I--)w[I]={x:s[I].x,y:s[I].y,tileUnitDistanceFromAnchor:x},I>0&&(x+=s[I-1].dist(s[I]));for(let I=0;I<s.length;I++){const L=w[I];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,s,h,_,x,w,I,L,ee,ae,se,me){const Ce=e.indexArray,Te=e.layoutVertexArray,je=e.segments.prepareSegment(4*s.length,Te,Ce,this.canOverlap?w.sortKey:void 0),et=this.glyphOffsetArray.length,yt=je.vertexLength,Gt=this.allowVerticalPlacement&&I===g.WritingMode.vertical?Math.PI/2:0,zt=w.text&&w.text.sections;for(let en=0;en<s.length;en++){const{tl:pn,tr:on,bl:Yn,br:ui,tex:Gn,pixelOffsetTL:Un,pixelOffsetBR:Nn,minFontScaleX:Kn,minFontScaleY:$n,glyphOffset:Dn,isSDF:Mi,sectionIndex:wi}=s[en],Yi=je.vertexLength,vr=Dn[1];Wc(Te,L.x,L.y,pn.x,vr+pn.y,Gn.x,Gn.y,h,Mi,Un.x,Un.y,Kn,$n),Wc(Te,L.x,L.y,on.x,vr+on.y,Gn.x+Gn.w,Gn.y,h,Mi,Nn.x,Un.y,Kn,$n),Wc(Te,L.x,L.y,Yn.x,vr+Yn.y,Gn.x,Gn.y+Gn.h,h,Mi,Un.x,Nn.y,Kn,$n),Wc(Te,L.x,L.y,ui.x,vr+ui.y,Gn.x+Gn.w,Gn.y+Gn.h,h,Mi,Nn.x,Nn.y,Kn,$n),Lu(e.dynamicLayoutVertexArray,L,Gt),Ce.emplaceBack(Yi,Yi+1,Yi+2),Ce.emplaceBack(Yi+1,Yi+2,Yi+3),je.vertexLength+=4,je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Dn[0]),en!==s.length-1&&wi===s[en+1].sectionIndex||e.programConfigurations.populatePaintArrays(Te.length,w,w.index,{},me,zt&&zt[wi])}e.placedSymbolArray.emplaceBack(L.x,L.y,et,this.glyphOffsetArray.length-et,yt,ee,ae,L.segment,h?h[0]:0,h?h[1]:0,_[0],_[1],I,0,!1,0,se)}_addCollisionDebugVertex(e,s,h,_,x,w){return s.emplaceBack(0,0),e.emplaceBack(h.x,h.y,_,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(e,s,h,_,x,w,I){const L=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),ee=L.vertexLength,ae=x.layoutVertexArray,se=x.collisionVertexArray,me=I.anchorX,Ce=I.anchorY;this._addCollisionDebugVertex(ae,se,w,me,Ce,new lt(e,s)),this._addCollisionDebugVertex(ae,se,w,me,Ce,new lt(h,s)),this._addCollisionDebugVertex(ae,se,w,me,Ce,new lt(h,_)),this._addCollisionDebugVertex(ae,se,w,me,Ce,new lt(e,_)),L.vertexLength+=4;const Te=x.indexArray;Te.emplaceBack(ee,ee+1),Te.emplaceBack(ee+1,ee+2),Te.emplaceBack(ee+2,ee+3),Te.emplaceBack(ee+3,ee),L.primitiveLength+=4}addDebugCollisionBoxes(e,s,h,_){for(let x=e;x<s;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,_?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new aa(Uo,Qh.members,il),this.iconCollisionBox=new aa(Uo,Qh.members,il);for(let e=0;e<this.symbolInstances.length;e++){const s=this.symbolInstances.get(e);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(e,s,h,_,x,w,I,L,ee){const ae={};for(let se=s;se<h;se++){const me=e.get(se);ae.textBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},ae.textFeatureIndex=me.featureIndex;break}for(let se=_;se<x;se++){const me=e.get(se);ae.verticalTextBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},ae.verticalTextFeatureIndex=me.featureIndex;break}for(let se=w;se<I;se++){const me=e.get(se);ae.iconBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},ae.iconFeatureIndex=me.featureIndex;break}for(let se=L;se<ee;se++){const me=e.get(se);ae.verticalIconBox={x1:me.x1,y1:me.y1,x2:me.x2,y2:me.y2,anchorPointX:me.anchorPointX,anchorPointY:me.anchorPointY},ae.verticalIconFeatureIndex=me.featureIndex;break}return ae}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,s){const h=e.placedSymbolArray.get(s),_=h.vertexStartIndex+4*h.numGlyphs;for(let x=h.vertexStartIndex;x<_;x+=4)e.indexArray.emplaceBack(x,x+1,x+2),e.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const s=Math.sin(e),h=Math.cos(e),_=[],x=[],w=[];for(let I=0;I<this.symbolInstances.length;++I){w.push(I);const L=this.symbolInstances.get(I);_.push(0|Math.round(s*L.anchorX+h*L.anchorY)),x.push(L.featureIndex)}return w.sort((I,L)=>_[I]-_[L]||x[L]-x[I]),w}addToSortKeyRanges(e,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((_,x,w)=>{_>=0&&w.indexOf(_)===x&&this.addIndicesForPlacedSymbol(this.text,_)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Fn("SymbolBucket",Kl,{omit:["layers","collisionBoxArray","features","compareText"]}),Kl.MAX_GLYPHS=65535,Kl.addDynamicAttributes=Lu;const Tf=new Zi({"symbol-placement":new Re(ie.layout_symbol["symbol-placement"]),"symbol-spacing":new Re(ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Re(ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Re(ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Re(ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Re(ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new Re(ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Re(ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(ie.layout_symbol["icon-size"]),"icon-text-fit":new Re(ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Re(ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(ie.layout_symbol["icon-image"]),"icon-rotate":new xt(ie.layout_symbol["icon-rotate"]),"icon-padding":new Re(ie.layout_symbol["icon-padding"]),"icon-keep-upright":new Re(ie.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(ie.layout_symbol["icon-offset"]),"icon-anchor":new xt(ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Re(ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Re(ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Re(ie.layout_symbol["text-rotation-alignment"]),"text-field":new xt(ie.layout_symbol["text-field"]),"text-font":new xt(ie.layout_symbol["text-font"]),"text-size":new xt(ie.layout_symbol["text-size"]),"text-max-width":new xt(ie.layout_symbol["text-max-width"]),"text-line-height":new Re(ie.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(ie.layout_symbol["text-letter-spacing"]),"text-justify":new xt(ie.layout_symbol["text-justify"]),"text-radial-offset":new xt(ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Re(ie.layout_symbol["text-variable-anchor"]),"text-anchor":new xt(ie.layout_symbol["text-anchor"]),"text-max-angle":new Re(ie.layout_symbol["text-max-angle"]),"text-writing-mode":new Re(ie.layout_symbol["text-writing-mode"]),"text-rotate":new xt(ie.layout_symbol["text-rotate"]),"text-padding":new Re(ie.layout_symbol["text-padding"]),"text-keep-upright":new Re(ie.layout_symbol["text-keep-upright"]),"text-transform":new xt(ie.layout_symbol["text-transform"]),"text-offset":new xt(ie.layout_symbol["text-offset"]),"text-allow-overlap":new Re(ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Re(ie.layout_symbol["text-ignore-placement"]),"text-optional":new Re(ie.layout_symbol["text-optional"])});var Yc={paint:new Zi({"icon-opacity":new xt(ie.paint_symbol["icon-opacity"]),"icon-color":new xt(ie.paint_symbol["icon-color"]),"icon-halo-color":new xt(ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(ie.paint_symbol["icon-halo-blur"]),"icon-translate":new Re(ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new Re(ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(ie.paint_symbol["text-opacity"]),"text-color":new xt(ie.paint_symbol["text-color"],{runtimeType:Oi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new xt(ie.paint_symbol["text-halo-color"]),"text-halo-width":new xt(ie.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(ie.paint_symbol["text-halo-blur"]),"text-translate":new Re(ie.paint_symbol["text-translate"]),"text-translate-anchor":new Re(ie.paint_symbol["text-translate-anchor"])}),layout:Tf};class Ja{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Fi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(e.formattedSection))return s.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Fn("FormatSectionOverride",Ja,{omit:["defaultValue"]});class Ar extends Yo{constructor(e){super(e,Yc)}recalculate(e,s){if(super.recalculate(e,s),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const _=[];for(const x of h)_.indexOf(x)<0&&_.push(x);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,s,h,_){const x=this.layout.get(e).evaluate(s,{},h,_),w=this._unevaluatedLayout._values[e];return w.isDataDriven()||mn(w.value)||!x?x:(I=s.properties,x.replace(/{([^{}]+)}/g,(ee,ae)=>ae in I?String(I[ae]):""));var I}createBucket(e){return new Kl(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Yc.paint.overridableProperties){if(!Ar.hasPaintOverride(this.layout,e))continue;const s=this.paint.get(e),h=new Ja(s),_=new wo(h,s.property.specification);let x=null;x="constant"===s.value.kind||"source"===s.value.kind?new M("source",_):new S("composite",_,s.value.zoomStops,s.value._interpolationType),this.paint._values[e]=new xe(s.property,x,s.parameters)}}_handleOverridablePaintPropertyUpdate(e,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Ar.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,s){const h=e.get("text-field"),_=Yc.paint.properties[s];let x=!1;const w=I=>{for(const L of I)if(_.overrides&&_.overrides.hasOverride(L))return void(x=!0)};if("constant"===h.value.kind&&h.value.value instanceof ke)w(h.value.value.sections);else if("source"===h.value.kind){const I=ee=>{x||(ee instanceof tn&&st(ee.value)===pt?w(ee.value.sections):ee instanceof En?w(ee.sections):ee.eachChild(I))},L=h.value;L._styleExpression&&I(L._styleExpression.expression)}return x}}var Kc={paint:new Zi({"background-color":new Re(ie.paint_background["background-color"]),"background-pattern":new Ji(ie.paint_background["background-pattern"]),"background-opacity":new Re(ie.paint_background["background-opacity"])})},Xd={paint:new Zi({"raster-opacity":new Re(ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new Re(ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Re(ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Re(ie.paint_raster["raster-brightness-max"]),"raster-saturation":new Re(ie.paint_raster["raster-saturation"]),"raster-contrast":new Re(ie.paint_raster["raster-contrast"]),"raster-resampling":new Re(ie.paint_raster["raster-resampling"]),"raster-fade-duration":new Re(ie.paint_raster["raster-fade-duration"])})};class jm extends Yo{constructor(e){super(e,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const dp={circle:class extends Yo{constructor(r){super(r,Bm)}createBucket(r){return new pd(r)}queryRadius(r){const e=r;return Gl("circle-radius",this,e)+Gl("circle-stroke-width",this,e)+ol(this.paint.get("circle-translate"))}queryIntersectsFeature(r,e,s,h,_,x,w,I){const L=mu(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),ee=this.paint.get("circle-radius").evaluate(e,s)+this.paint.get("circle-stroke-width").evaluate(e,s),ae="map"===this.paint.get("circle-pitch-alignment"),se=ae?L:(Te=I,L.map(je=>vu(je,Te))),me=ae?ee*w:ee;var Te;for(const Ce of h)for(const Te of Ce){const je=ae?Te:vu(Te,I);let et=me;const yt=yu(_u(),Wa(Te.x,Te.y,0,1),I);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?et*=yt[3]/x.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(et*=x.cameraToCenterDistance/yt[3]),sc(se,je,et))return!0}return!1}},heatmap:class extends Yo{constructor(r){super(r,qp),this._updateColorRamp()}createBucket(r){return new Vh(r)}_handleSpecialPaintPropertyUpdate(r){"heatmap-color"===r&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Yo{constructor(r){super(r,Wp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Yo{constructor(r){super(r,Xp)}recalculate(r,e){super.recalculate(r,e);const s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Du(r)}queryRadius(){return ol(this.paint.get("fill-translate"))}queryIntersectsFeature(r,e,s,h,_,x,w){return Sc(mu(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Yo{constructor(r){super(r,af)}createBucket(r){return new Mu(r)}queryRadius(){return ol(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,e,s,h,_,x,w,I){const L=mu(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),ee=this.paint.get("fill-extrusion-height").evaluate(e,s),ae=this.paint.get("fill-extrusion-base").evaluate(e,s),se=function(Ce,Te,je,et){const yt=[];for(const Gt of Ce){const zt=Wa(Gt.x,Gt.y,0,1);yu(zt,zt,Te),yt.push(new lt(zt[0]/zt[3],zt[1]/zt[3]))}return yt}(L,I),me=function(Ce,Te,je,et){const yt=[],Gt=[],zt=et[8]*Te,en=et[9]*Te,pn=et[10]*Te,on=et[11]*Te,Yn=et[8]*je,ui=et[9]*je,Gn=et[10]*je,Un=et[11]*je;for(const Nn of Ce){const Kn=[],$n=[];for(const Dn of Nn){const Mi=Dn.x,wi=Dn.y,Yi=et[0]*Mi+et[4]*wi+et[12],vr=et[1]*Mi+et[5]*wi+et[13],Nr=et[2]*Mi+et[6]*wi+et[14],Vr=et[3]*Mi+et[7]*wi+et[15],jo=Nr+pn,po=Vr+on,To=Yi+Yn,Gr=vr+ui,as=Nr+Gn,ls=Vr+Un,$r=new lt((Yi+zt)/po,(vr+en)/po);$r.z=jo/po,Kn.push($r);const Ro=new lt(To/ls,Gr/ls);Ro.z=as/ls,$n.push(Ro)}yt.push(Kn),Gt.push($n)}return[yt,Gt]}(h,ae,ee,I);return function(Ce,Te,je){let et=1/0;Sc(je,Te)&&(et=Su(je,Te[0]));for(let yt=0;yt<Te.length;yt++){const Gt=Te[yt],zt=Ce[yt];for(let en=0;en<Gt.length-1;en++){const pn=Gt[en],on=[pn,Gt[en+1],zt[en+1],zt[en],pn];Tl(je,on)&&(et=Math.min(et,Su(je,on)))}}return et!==1/0&&et}(me[0],me[1],se)}},line:class extends Yo{constructor(r){super(r,Pd),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){"line-gradient"===r&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ss,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,e){super.recalculate(r,e),this.paint._values["line-floorwidth"]=Jh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Id(r)}queryRadius(r){const e=r,s=Od(Gl("line-width",this,e),Gl("line-gap-width",this,e)),h=Gl("line-offset",this,e);return s/2+Math.abs(h)+ol(this.paint.get("line-translate"))}queryIntersectsFeature(r,e,s,h,_,x,w){const I=mu(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),L=w/2*Od(this.paint.get("line-width").evaluate(e,s),this.paint.get("line-gap-width").evaluate(e,s)),ee=this.paint.get("line-offset").evaluate(e,s);return ee&&(h=function(ae,se){const me=[],Ce=new lt(0,0);for(let Te=0;Te<ae.length;Te++){const je=ae[Te],et=[];for(let yt=0;yt<je.length;yt++){const Gt=je[yt-1],zt=je[yt],en=je[yt+1],pn=0===yt?Ce:zt.sub(Gt)._unit()._perp(),on=yt===je.length-1?Ce:en.sub(zt)._unit()._perp(),Yn=pn._add(on)._unit();Yn._mult(1/(Yn.x*on.x+Yn.y*on.y)),et.push(Yn._mult(se)._add(zt))}me.push(et)}return me}(h,ee*w)),function(ae,se,me){for(let Ce=0;Ce<se.length;Ce++){const Te=se[Ce];if(ae.length>=3)for(let je=0;je<Te.length;je++)if(ac(ae,Te[je]))return!0;if(Nm(ae,Te,me))return!0}return!1}(I,h,L)}isTileClipped(){return!0}},symbol:Ar,background:class extends Yo{constructor(r){super(r,Kc)}},raster:class extends Yo{constructor(r){super(r,Xd)}}};class Hm{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Jc=6371008.8;class zr{constructor(e,s){if(isNaN(e)||isNaN(s))throw new Error(`Invalid LngLat object: (${e}, ${s})`);if(this.lng=+e,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zr(Ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const s=Math.PI/180,h=this.lat*s,_=e.lat*s,x=Math.sin(h)*Math.sin(_)+Math.cos(h)*Math.cos(_)*Math.cos((e.lng-this.lng)*s);return Jc*Math.acos(Math.min(x,1))}toBounds(e=0){const s=360*e/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new Qa(new zr(this.lng-h,this.lat-s),new zr(this.lng+h,this.lat+s))}static convert(e){if(e instanceof zr)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new zr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new zr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Qa{constructor(e,s){e&&(s?this.setSouthWest(e).setNorthEast(s):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof zr?new zr(e.lng,e.lat):zr.convert(e),this}setSouthWest(e){return this._sw=e instanceof zr?new zr(e.lng,e.lat):zr.convert(e),this}extend(e){const s=this._sw,h=this._ne;let _,x;if(e instanceof zr)_=e,x=e;else{if(!(e instanceof Qa))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Qa.convert(e)):this.extend(zr.convert(e)):this;if(_=e._sw,x=e._ne,!_||!x)return this}return s||h?(s.lng=Math.min(_.lng,s.lng),s.lat=Math.min(_.lat,s.lat),h.lng=Math.max(x.lng,h.lng),h.lat=Math.max(x.lat,h.lat)):(this._sw=new zr(_.lng,_.lat),this._ne=new zr(x.lng,x.lat)),this}getCenter(){return new zr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new zr(this.getWest(),this.getNorth())}getSouthEast(){return new zr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:s,lat:h}=zr.convert(e);let _=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&_}static convert(e){return e instanceof Qa?e:e&&new Qa(e)}}const wc=2*Math.PI*Jc;function Jl(r){return wc*Math.cos(r*Math.PI/180)}function hp(r){return(180+r)/360}function eh(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function pp(r,e){return r/Jl(e)}function th(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class Nu{constructor(e,s,h=0){this.x=+e,this.y=+s,this.z=+h}static fromLngLat(e,s=0){const h=zr.convert(e);return new Nu(hp(h.lng),eh(h.lat),pp(s,h.lat))}toLngLat(){return new zr(360*this.x-180,th(this.y))}toAltitude(){return this.z*Jl(th(this.y))}meterInMercatorCoordinateUnits(){return 1/wc*(e=th(this.y),1/Math.cos(e*Math.PI/180));var e}}function nh(r,e,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[r*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class ih{constructor(e,s,h){this.z=e,this.x=s,this.y=h,this.key=Ql(0,e,e,s,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,s){const h=(x=this.y,w=this.z,I=nh(256*(_=this.x),256*(x=Math.pow(2,w)-x-1),w),L=nh(256*(_+1),256*(x+1),w),I[0]+","+I[1]+","+L[0]+","+L[1]);var _,x,w,I,L;const ee=function(ae,se,me){let Ce,Te="";for(let je=ae;je>0;je--)Ce=1<<je-1,Te+=(se&Ce?1:0)+(me&Ce?2:0);return Te}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===s?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,devicePixelRatio>1?"@2x":"").replace(/{quadkey}/g,ee).replace(/{bbox-epsg-3857}/g,h)}getTilePoint(e){const s=Math.pow(2,this.z);return new lt((e.x*s-this.x)*ko,(e.y*s-this.y)*ko)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fp{constructor(e,s){this.wrap=e,this.canonical=s,this.key=Ql(e,s.z,s.z,s.x,s.y)}}class xs{constructor(e,s,h,_,x){this.overscaledZ=e,this.wrap=s,this.canonical=new ih(h,+_,+x),this.key=Ql(s,e,h,_,x)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const s=this.canonical.z-e;return e>this.canonical.z?new xs(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xs(e,this.wrap,e,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(e,s){const h=this.canonical.z-e;return e>this.canonical.z?Ql(this.wrap*+s,e,this.canonical.z,this.canonical.x,this.canonical.y):Ql(this.wrap*+s,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const s=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>s&&e.canonical.y===this.canonical.y>>s}children(e){if(this.overscaledZ>=e)return[new xs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,_=2*this.canonical.y;return[new xs(s,this.wrap,s,h,_),new xs(s,this.wrap,s,h+1,_),new xs(s,this.wrap,s,h,_+1),new xs(s,this.wrap,s,h+1,_+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new xs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new xs(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Nu(e.x-this.wrap,e.y))}}function Ql(r,e,s,h,_){(r*=2)<0&&(r=-1*r-1);const x=1<<s;return(x*x*r+x*_+h).toString(36)+s.toString(36)+e.toString(36)}Fn("CanonicalTileID",ih),Fn("OverscaledTileID",xs,{omit:["posMatrix"]});class Pi{constructor(e,s,h){if(this.uid=e,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&"mapbox"!==h&&"terrarium"!==h)return void Vt(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const _=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let x=0;x<_;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(_,x)]=this.data[this._idx(_-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,_)]=this.data[this._idx(x,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)]}get(e,s){const h=new Uint8Array(this.data.buffer),_=4*this._idx(e,s);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(h[_],h[_+1],h[_+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,s){if(e<-1||e>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(e+1)}_unpackMapbox(e,s,h){return(256*e*256+256*s+h)/10-1e4}_unpackTerrarium(e,s,h){return 256*e+s+h/256-32768}getPixels(){return new sa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,s,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let _=s*this.dim,x=s*this.dim+this.dim,w=h*this.dim,I=h*this.dim+this.dim;switch(s){case-1:_=x-1;break;case 1:x=_+1}switch(h){case-1:w=I-1;break;case 1:I=w+1}const L=-s*this.dim,ee=-h*this.dim;for(let ae=w;ae<I;ae++)for(let se=_;se<x;se++)this.data[this._idx(se,ae)]=e.data[this._idx(se+L,ae+ee)]}}Fn("DEMData",Pi);class Hi{constructor(e){this._stringToNumber={},this._numberToString=[];for(let s=0;s<e.length;s++){const h=e[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var Jo,r;class La{constructor(e,s,h,_,x){this.type="Feature",this._vectorTileFeature=e,e._z=s,e._x=h,e._y=_,this.properties=e.properties,this.id=x}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e=function(s,h){var _={};for(var x in s)Object.prototype.hasOwnProperty.call(s,x)&&h.indexOf(x)<0&&(_[x]=s[x]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(x=Object.getOwnPropertySymbols(s);w<x.length;w++)h.indexOf(x[w])<0&&Object.prototype.propertyIsEnumerable.call(s,x[w])&&(_[x[w]]=s[x[w]])}return _}(this,["_geometry","_vectorTileFeature"]);return e.geometry=this.geometry,e}}class Af{constructor(e,s){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new wr(ko,16,0),this.grid3D=new wr(ko,16,0),this.featureIndexArray=new Lr,this.promoteId=s}insert(e,s,h,_,x,w){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,_,x);const L=w?this.grid3D:this.grid;for(let ee=0;ee<s.length;ee++){const ae=s[ee],se=[1/0,1/0,-1/0,-1/0];for(let me=0;me<ae.length;me++){const Ce=ae[me];se[0]=Math.min(se[0],Ce.x),se[1]=Math.min(se[1],Ce.y),se[2]=Math.max(se[2],Ce.x),se[3]=Math.max(se[3],Ce.y)}se[0]<ko&&se[1]<ko&&se[2]>=0&&se[3]>=0&&L.insert(I,se[0],se[1],se[2],se[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ol.VectorTile(new sl(this.rawTileData)).layers,this.sourceLayerCoder=new Hi(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,s,h,_){this.loadVTLayers();const x=e.params||{},w=ko/e.tileSize/e.scale,I=mi(x.filter),L=e.queryGeometry,ee=e.queryPadding*w,ae=Pf(L),se=this.grid.query(ae.minX-ee,ae.minY-ee,ae.maxX+ee,ae.maxY+ee),me=Pf(e.cameraQueryGeometry),Ce=this.grid3D.query(me.minX-ee,me.minY-ee,me.maxX+ee,me.maxY+ee,(et,yt,Gt,zt)=>function(en,pn,on,Yn,ui){for(const Un of en)if(pn<=Un.x&&on<=Un.y&&Yn>=Un.x&&ui>=Un.y)return!0;const Gn=[new lt(pn,on),new lt(pn,ui),new lt(Yn,ui),new lt(Yn,on)];if(en.length>2)for(const Un of Gn)if(ac(en,Un))return!0;for(let Un=0;Un<en.length-1;Un++)if(fu(en[Un],en[Un+1],Gn))return!0;return!1}(e.cameraQueryGeometry,et-ee,yt-ee,Gt+ee,zt+ee));for(const et of Ce)se.push(et);se.sort(Gm);const Te={};let je;for(let et=0;et<se.length;et++){const yt=se[et];if(yt===je)continue;je=yt;const Gt=this.featureIndexArray.get(yt);let zt=null;this.loadMatchingFeature(Te,Gt.bucketIndex,Gt.sourceLayerIndex,Gt.featureIndex,I,x.layers,x.availableImages,s,h,_,(en,pn,on)=>(zt||(zt=Za(en)),pn.queryIntersectsFeature(L,en,on,zt,this.z,e.transform,w,e.pixelPosMatrix)))}return Te}loadMatchingFeature(e,s,h,_,x,w,I,L,ee,ae,se){const me=this.bucketLayerIDs[s];if(w&&!function(et,yt){for(let Gt=0;Gt<et.length;Gt++)if(yt.indexOf(et[Gt])>=0)return!0;return!1}(w,me))return;const Ce=this.sourceLayerCoder.decode(h),Te=this.vtLayers[Ce].feature(_);if(x.needGeometry){const et=Zs(Te,!0);if(!x.filter(new Br(this.tileID.overscaledZ),et,this.tileID.canonical))return}else if(!x.filter(new Br(this.tileID.overscaledZ),Te))return;const je=this.getId(Te,Ce);for(let et=0;et<me.length;et++){const yt=me[et];if(w&&w.indexOf(yt)<0)continue;const Gt=L[yt];if(!Gt)continue;let zt={};je&&ae&&(zt=ae.getState(Gt.sourceLayer||"_geojsonTileLayer",je));const en=Ze({},ee[yt]);en.paint=If(en.paint,Gt.paint,Te,zt,I),en.layout=If(en.layout,Gt.layout,Te,zt,I);const pn=!se||se(Te,Gt,zt);if(!pn)continue;const on=new La(Te,this.z,this.x,this.y,je);on.layer=en;let Yn=e[yt];void 0===Yn&&(Yn=e[yt]=[]),Yn.push({featureIndex:_,feature:on,intersectionZ:pn})}}lookupSymbolFeatures(e,s,h,_,x,w,I,L){const ee={};this.loadVTLayers();const ae=mi(x);for(const se of e)this.loadMatchingFeature(ee,h,_,se,ae,w,I,L,s);return ee}hasLayer(e){for(const s of this.bucketLayerIDs)for(const h of s)if(e===h)return!0;return!1}getId(e,s){let h=e.id;return this.promoteId&&(h=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[s]],"boolean"==typeof h&&(h=Number(h))),h}}function If(r,e,s,h,_){return Ye(r,(x,w)=>{const I=e instanceof Ue?e.get(w):null;return I&&I.evaluate?I.evaluate(s,h,_):I})}function Pf(r){let e=1/0,s=1/0,h=-1/0,_=-1/0;for(const x of r)e=Math.min(e,x.x),s=Math.min(s,x.y),h=Math.max(h,x.x),_=Math.max(_,x.y);return{minX:e,minY:s,maxX:h,maxY:_}}function Gm(r,e){return e-r}Fn("FeatureIndex",Af,{omit:["rawTileData","sourceLayerCoder"]}),(r=Jo||(Jo={})).create="create",r.load="load",r.fullLoad="fullLoad",g.ARRAY_TYPE=qa,g.Actor=class{constructor(r,e,s){this.target=r,this.parent=e,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},gt(["receive","process"],this),this.invoker=new Hm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Dt()?r:window}send(r,e,s,h,_=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[x]=s);const w=Qt(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:r,hasCallback:!!s,targetMapId:h,mustQueue:_,sourceMapId:this.mapId,data:ys(e,w)},w),{cancel:()=>{s&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(r){const e=r.data,s=e.id;if(s&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[s];const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else Dt()||e.mustQueue?(this.tasks[s]=e,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,e)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){if("<response>"===e.type){const s=this.callbacks[r];delete this.callbacks[r],s&&(e.error?s(Ua(e.error)):s(null,Ua(e.data)))}else{let s=!1;const h=Qt(this.globalScope)?void 0:[],_=e.hasCallback?(I,L)=>{s=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:I?ys(I):null,data:ys(L,h)},h)}:I=>{s=!0};let x=null;const w=Ua(e.data);if(this.parent[e.type])x=this.parent[e.type](e.sourceMapId,w,_);else if(this.parent.getWorkerSource){const I=e.type.split(".");x=this.parent.getWorkerSource(e.sourceMapId,I[0],w.source)[I[1]](w,_)}else _(new Error(`Could not find function ${e.type}`));!s&&x&&x.cancel&&(this.cancelCallbacks[r]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},g.AlphaImage=Il,g.CanonicalTileID=ih,g.CollisionBoxArray=Ii,g.CollisionCircleLayoutArray=class extends qe{},g.Color=K,g.DEMData=Pi,g.DataConstantProperty=Re,g.DictionaryCoder=Hi,g.EXTENT=ko,g.ErrorEvent=R,g.EvaluationParameters=Br,g.Event=U,g.Evented=N,g.FeatureIndex=Af,g.FillBucket=Du,g.FillExtrusionBucket=Mu,g.GeoJSONFeature=La,g.ImageAtlas=rp,g.ImagePosition=Bd,g.LineBucket=Id,g.LineStripIndexArray=class extends wn{},g.LngLat=zr,g.LngLatBounds=Qa,g.MercatorCoordinate=Nu,g.ONE_EM=24,g.OverscaledTileID=xs,g.PosArray=class extends v{},g.Properties=Zi,g.QuadTriangleArray=class extends vt{},g.RGBAImage=sa,g.RasterBoundsArray=class extends E{},g.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return 0===r.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},g.ResourceType=kt,g.SegmentVector=Jr,g.SymbolBucket=Kl,g.Transitionable=P,g.TriangleIndexArray=Cr,g.Uniform1f=Vl,g.Uniform1i=class extends Ia{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},g.Uniform2f=class extends Ia{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},g.Uniform3f=class extends Ia{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},g.Uniform4f=Fh,g.UniformColor=Oo,g.UniformMatrix4f=class extends Ia{constructor(r,e){super(r,e),this.current=Lh}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},g.UnwrappedTileID=fp,g.ValidationError=fe,g.ZoomHistory=nl,g.addDynamicAttributes=Lu,g.asyncAll=function(r,e,s){if(!r.length)return s(null,[]);let h=r.length;const _=new Array(r.length);let x=null;r.forEach((w,I)=>{e(w,(L,ee)=>{L&&(x=L),_[I]=ee,0==--h&&s(x,_)})})},g.bezier=Oe,g.bindAll=gt,g.cacheEntryPossiblyAdded=function(r){ki++,ki>kn&&(r.getActor().send("enforceCacheSizeLimit",Ui),ki=0)},g.clamp=he,g.clearTileCache=function(r){const e=caches.delete(Ct);r&&e.catch(r).then(()=>r())},g.clipLine=sp,g.clone=function(r){var e=new qa(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},g.clone$1=Mt,g.collisionCircleLayout=Xh,g.config=Kt,g.create=function(){var r=new qa(16);return qa!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},g.createExpression=ue,g.createFilter=mi,g.createLayout=c,g.createStyleLayer=function(r){return"custom"===r.type?new jm(r):new dp[r.type](r)},g.dot=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},g.ease=Le,g.emitValidationErrors=na,g.enforceCacheSizeLimit=function(r){Rn(),yn&&yn.then(e=>{e.keys().then(s=>{for(let h=0;h<s.length-r;h++)e.delete(s[h])})})},g.evaluateSizeForFeature=Zd,g.evaluateSizeForZoom=Zc,g.evaluateVariableOffset=lp,g.evented=Ha,g.exported=mt,g.exported$1=hi,g.extend=Ze,g.filterObject=tt,g.fromValues=Wa,g.getAnchorAlignment=gc,g.getAnchorJustification=Fu,g.getArrayBuffer=Bi,g.getImage=Zn,g.getJSON=function(r,e){return Jn(Ze(r,{type:"json"}),e)},g.getRTLTextPluginStatus=ga,g.getReferrer=gn,g.getVideo=function(r,e){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){e(null,s)};for(let h=0;h<r.length;h++){const _=window.document.createElement("source");Xi(r[h])||(s.crossOrigin="Anonymous"),_.src=r[h],s.appendChild(_)}return{cancel:()=>{}}},g.identity=Ac,g.invert=function(r,e){var s=e[0],h=e[1],_=e[2],x=e[3],w=e[4],I=e[5],L=e[6],ee=e[7],ae=e[8],se=e[9],me=e[10],Ce=e[11],Te=e[12],je=e[13],et=e[14],yt=e[15],Gt=s*I-h*w,zt=s*L-_*w,en=s*ee-x*w,pn=h*L-_*I,on=h*ee-x*I,Yn=_*ee-x*L,ui=ae*je-se*Te,Gn=ae*et-me*Te,Un=ae*yt-Ce*Te,Nn=se*et-me*je,Kn=se*yt-Ce*je,$n=me*yt-Ce*et,Dn=Gt*$n-zt*Kn+en*Nn+pn*Un-on*Gn+Yn*ui;return Dn?(r[0]=(I*$n-L*Kn+ee*Nn)*(Dn=1/Dn),r[1]=(_*Kn-h*$n-x*Nn)*Dn,r[2]=(je*Yn-et*on+yt*pn)*Dn,r[3]=(me*on-se*Yn-Ce*pn)*Dn,r[4]=(L*Un-w*$n-ee*Gn)*Dn,r[5]=(s*$n-_*Un+x*Gn)*Dn,r[6]=(et*en-Te*Yn-yt*zt)*Dn,r[7]=(ae*Yn-me*en+Ce*zt)*Dn,r[8]=(w*Kn-I*Un+ee*ui)*Dn,r[9]=(h*Un-s*Kn-x*ui)*Dn,r[10]=(Te*on-je*en+yt*Gt)*Dn,r[11]=(se*en-ae*on-Ce*Gt)*Dn,r[12]=(I*Gn-w*Nn-L*ui)*Dn,r[13]=(s*Nn-h*Gn+_*ui)*Dn,r[14]=(je*zt-Te*pn-et*Gt)*Dn,r[15]=(ae*pn-se*zt+me*Gt)*Dn,r):null},g.isImageBitmap=at,g.keysDifference=function(r,e){const s=[];for(const h in r)h in e||s.push(h);return s},g.lazyLoadRTLTextPlugin=function(){Vo.isLoading()||Vo.isLoaded()||"deferred"!==ga()||Cl()},g.makeRequest=Jn,g.mapObject=Ye,g.mercatorXfromLng=hp,g.mercatorYfromLat=eh,g.mercatorZfromAltitude=pp,g.mul=zh,g.multiply=gu,g.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},g.number=Ir,g.ortho=function(r,e,s,h,_,x,w){var I=1/(e-s),L=1/(h-_),ee=1/(x-w);return r[0]=-2*I,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*L,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*ee,r[11]=0,r[12]=(e+s)*I,r[13]=(_+h)*L,r[14]=(w+x)*ee,r[15]=1,r},g.parseCacheControl=Fe,g.parseGlyphPBF=function(r){return new sl(r).readFields(_f,[])},g.pbf=sl,g.performSymbolLayout=function(r,e,s,h,_,x,w){r.createArrays(),r.tilePixelRatio=ko/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const I=r.layers[0].layout,L=r.layers[0]._unevaluatedLayout._values,ee={layoutIconSize:L["icon-size"].possiblyEvaluate(new Br(r.zoom+1),w),layoutTextSize:L["text-size"].possiblyEvaluate(new Br(r.zoom+1),w),textMaxSize:L["text-size"].possiblyEvaluate(new Br(18))};if("composite"===r.textSizeData.kind){const{minZoom:Te,maxZoom:je}=r.textSizeData;ee.compositeTextSizes=[L["text-size"].possiblyEvaluate(new Br(Te),w),L["text-size"].possiblyEvaluate(new Br(je),w)]}if("composite"===r.iconSizeData.kind){const{minZoom:Te,maxZoom:je}=r.iconSizeData;ee.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new Br(Te),w),L["icon-size"].possiblyEvaluate(new Br(je),w)]}const ae=24*I.get("text-line-height"),se="map"===I.get("text-rotation-alignment")&&"point"!==I.get("symbol-placement"),me=I.get("text-keep-upright"),Ce=I.get("text-size");for(const Te of r.features){const je=I.get("text-font").evaluate(Te,{},w).join(","),et=Ce.evaluate(Te,{},w),yt=ee.layoutTextSize.evaluate(Te,{},w),Gt=ee.layoutIconSize.evaluate(Te,{},w),zt={horizontal:{},vertical:void 0},en=Te.text;let pn,on=[0,0];if(en){const Gn=en.toString(),Un=24*I.get("text-letter-spacing").evaluate(Te,{},w),Nn=tc(Gn)?Un:0,Kn=I.get("text-anchor").evaluate(Te,{},w),$n=I.get("text-variable-anchor");if(!$n){const vr=I.get("text-radial-offset").evaluate(Te,{},w);on=vr?lp(Kn,[24*vr,Ru]):I.get("text-offset").evaluate(Te,{},w).map(Nr=>24*Nr)}let Dn=se?"center":I.get("text-justify").evaluate(Te,{},w);const Mi=I.get("symbol-placement"),wi="point"===Mi?24*I.get("text-max-width").evaluate(Te,{},w):0,Yi=()=>{r.allowVerticalPlacement&&pa(Gn)&&(zt.vertical=mc(en,e,s,_,je,wi,ae,Kn,"left",Nn,on,g.WritingMode.vertical,!0,Mi,yt,et))};if(!se&&$n){const vr="auto"===Dn?$n.map(Vr=>Fu(Vr)):[Dn];let Nr=!1;for(let Vr=0;Vr<vr.length;Vr++){const jo=vr[Vr];if(!zt.horizontal[jo])if(Nr)zt.horizontal[jo]=zt.horizontal[0];else{const po=mc(en,e,s,_,je,wi,ae,"center",jo,Nn,on,g.WritingMode.horizontal,!1,Mi,yt,et);po&&(zt.horizontal[jo]=po,Nr=1===po.positionedLines.length)}}Yi()}else{"auto"===Dn&&(Dn=Fu(Kn));const vr=mc(en,e,s,_,je,wi,ae,Kn,Dn,Nn,on,g.WritingMode.horizontal,!1,Mi,yt,et);vr&&(zt.horizontal[Dn]=vr),Yi(),pa(Gn)&&se&&me&&(zt.vertical=mc(en,e,s,_,je,wi,ae,Kn,Dn,Nn,on,g.WritingMode.vertical,!1,Mi,yt,et))}}let Yn=!1;if(Te.icon&&Te.icon.name){const Gn=h[Te.icon.name];Gn&&(pn=Gd(_[Te.icon.name],I.get("icon-offset").evaluate(Te,{},w),I.get("icon-anchor").evaluate(Te,{},w)),Yn=!!Gn.sdf,void 0===r.sdfIcons?r.sdfIcons=Yn:r.sdfIcons!==Yn&&Vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Gn.pixelRatio!==r.pixelRatio||0!==I.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}const ui=cp(zt.horizontal)||zt.vertical;r.iconsInText=!!ui&&ui.iconsInText,(ui||pn)&&Df(r,Te,zt,pn,h,ee,yt,Gt,on,Yn,w)}x&&r.generateCollisionDebugBuffers()},g.perspective=function(r,e,s,h,_){var x,w=1/Math.tan(e/2);return r[0]=w/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=w,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=_&&_!==1/0?(r[10]=(_+h)*(x=1/(h-_)),r[14]=2*_*h*x):(r[10]=-1,r[14]=-2*h),r},g.pick=function(r,e){const s={};for(let h=0;h<e.length;h++){const _=e[h];_ in r&&(s[_]=r[_])}return s},g.plugin=Vo,g.pointGeometry=lt,g.polygonIntersectsPolygon=Tl,g.potpack=ip,g.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],g.register=Fn,g.registerForPluginStateChange=function(r){return r({pluginStatus:Mo,pluginURL:Ns}),Ha.on("pluginStateChange",r),r},g.renderColorRamp=Uh,g.rotateX=function(r,e,s){var h=Math.sin(s),_=Math.cos(s),x=e[4],w=e[5],I=e[6],L=e[7],ee=e[8],ae=e[9],se=e[10],me=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=x*_+ee*h,r[5]=w*_+ae*h,r[6]=I*_+se*h,r[7]=L*_+me*h,r[8]=ee*_-x*h,r[9]=ae*_-w*h,r[10]=se*_-I*h,r[11]=me*_-L*h,r},g.rotateZ=function(r,e,s){var h=Math.sin(s),_=Math.cos(s),x=e[0],w=e[1],I=e[2],L=e[3],ee=e[4],ae=e[5],se=e[6],me=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=x*_+ee*h,r[1]=w*_+ae*h,r[2]=I*_+se*h,r[3]=L*_+me*h,r[4]=ee*_-x*h,r[5]=ae*_-w*h,r[6]=se*_-I*h,r[7]=me*_-L*h,r},g.scale=function(r,e,s){var h=s[0],_=s[1],x=s[2];return r[0]=e[0]*h,r[1]=e[1]*h,r[2]=e[2]*h,r[3]=e[3]*h,r[4]=e[4]*_,r[5]=e[5]*_,r[6]=e[6]*_,r[7]=e[7]*_,r[8]=e[8]*x,r[9]=e[9]*x,r[10]=e[10]*x,r[11]=e[11]*x,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},g.scale$1=function(r,e,s){return r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r[3]=e[3]*s,r},g.setCacheLimits=function(r,e){Ui=r,kn=e},g.setRTLTextPlugin=function(r,e,s=!1){if(Mo===nc||Mo===ja||Mo===wl)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ns=mt.resolveURL(r),Mo=nc,fa=e,ma(),s||Cl()},g.spec=ie,g.sphericalToCartesian=function([r,e,s]){return e+=90,e*=Math.PI/180,s*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(s),y:r*Math.sin(e)*Math.sin(s),z:r*Math.cos(s)}},g.symbolSize=Pu,g.toEvaluationFeature=Zs,g.transformMat4=yu,g.translate=function(r,e,s){var h,_,x,w,I,L,ee,ae,se,me,Ce,Te,je=s[0],et=s[1],yt=s[2];return e===r?(r[12]=e[0]*je+e[4]*et+e[8]*yt+e[12],r[13]=e[1]*je+e[5]*et+e[9]*yt+e[13],r[14]=e[2]*je+e[6]*et+e[10]*yt+e[14],r[15]=e[3]*je+e[7]*et+e[11]*yt+e[15]):(_=e[1],x=e[2],w=e[3],I=e[4],L=e[5],ee=e[6],ae=e[7],se=e[8],me=e[9],Ce=e[10],Te=e[11],r[0]=h=e[0],r[1]=_,r[2]=x,r[3]=w,r[4]=I,r[5]=L,r[6]=ee,r[7]=ae,r[8]=se,r[9]=me,r[10]=Ce,r[11]=Te,r[12]=h*je+I*et+se*yt+e[12],r[13]=_*je+L*et+me*yt+e[13],r[14]=x*je+ee*et+Ce*yt+e[14],r[15]=w*je+ae*et+Te*yt+e[15]),r},g.triggerPluginCompletionEvent=zl,g.unicodeBlockLookup=Ln,g.uniqueId=function(){return Be++},g.validateCustomStyleLayer=function(r){const e=[],s=r.id;return void 0===s&&e.push({message:`layers.${s}: missing required property "id"`}),void 0===r.render&&e.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&e.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),e},g.validateLight=Hs,g.validateStyle=Hr,g.vectorTile=Ol,g.warnOnce=Vt,g.wrap=Ve}),l(0,function(g){function $e(J){const F=typeof J;if("number"===F||"boolean"===F||"string"===F||null==J)return JSON.stringify(J);if(Array.isArray(J)){let De="[";for(const ke of J)De+=`${$e(ke)},`;return`${De}]`}const K=Object.keys(J).sort();let ge="{";for(let De=0;De<K.length;De++)ge+=`${JSON.stringify(K[De])}:${$e(J[K[De]])},`;return`${ge}}`}function Ke(J){let F="";for(const K of g.refProperties)F+=`/${$e(J[K])}`;return F}class Oe{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,K){for(const De of F){this._layerConfigs[De.id]=De;const ke=this._layers[De.id]=g.createStyleLayer(De);ke._featureFilter=g.createFilter(ke.filter),this.keyCache[De.id]&&delete this.keyCache[De.id]}for(const De of K)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const ge=function(De,ke){const Je={};for(let Xe=0;Xe<De.length;Xe++){const st=ke&&ke[De[Xe].id]||Ke(De[Xe]);ke&&(ke[De[Xe].id]=st);let Lt=Je[st];Lt||(Lt=Je[st]=[]),Lt.push(De[Xe])}const We=[];for(const Xe in Je)We.push(Je[Xe]);return We}(Object.values(this._layerConfigs),this.keyCache);for(const De of ge){const ke=De.map(tn=>this._layers[tn.id]),Je=ke[0];if("none"===Je.visibility)continue;const We=Je.source||"";let Xe=this.familiesBySource[We];Xe||(Xe=this.familiesBySource[We]={});const st=Je.sourceLayer||"_geojsonTileLayer";let Lt=Xe[st];Lt||(Lt=Xe[st]=[]),Lt.push(ke)}}}class Le{constructor(F){const K={},ge=[];for(const We in F){const Xe=F[We],st=K[We]={};for(const Lt in Xe){const tn=Xe[+Lt];if(!tn||0===tn.bitmap.width||0===tn.bitmap.height)continue;const Ft={x:0,y:0,w:tn.bitmap.width+2,h:tn.bitmap.height+2};ge.push(Ft),st[Lt]={rect:Ft,metrics:tn.metrics}}}const{w:De,h:ke}=g.potpack(ge),Je=new g.AlphaImage({width:De||1,height:ke||1});for(const We in F){const Xe=F[We];for(const st in Xe){const Lt=Xe[+st];if(!Lt||0===Lt.bitmap.width||0===Lt.bitmap.height)continue;const tn=K[We][st].rect;g.AlphaImage.copy(Lt.bitmap,Je,{x:0,y:0},{x:tn.x+1,y:tn.y+1},Lt.bitmap)}}this.image=Je,this.positions=K}}g.register("GlyphAtlas",Le);class he{constructor(F){this.tileID=new g.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId}parse(F,K,ge,De,ke){this.status="parsing",this.data=F,this.collisionBoxArray=new g.CollisionBoxArray;const Je=new g.DictionaryCoder(Object.keys(F.layers).sort()),We=new g.FeatureIndex(this.tileID,this.promoteId);We.bucketLayerIDs=[];const Xe={},st={featureIndex:We,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},Lt=K.familiesBySource[this.source];for(const Ci in Lt){const Pn=F.layers[Ci];if(!Pn)continue;1===Pn.version&&g.warnOnce(`Vector tile source "${this.source}" layer "${Ci}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pi=Je.encode(Ci),rr=[];for(let An=0;An<Pn.length;An++){const br=Pn.feature(An),pr=We.getId(br,Ci);rr.push({feature:br,id:pr,index:An,sourceLayerIndex:pi})}for(const An of Lt[Ci]){const br=An[0];br.minzoom&&this.zoom<Math.floor(br.minzoom)||br.maxzoom&&this.zoom>=br.maxzoom||"none"!==br.visibility&&(Ve(An,this.zoom,ge),(Xe[br.id]=br.createBucket({index:We.bucketLayerIDs.length,layers:An,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pi,sourceID:this.source})).populate(rr,st,this.tileID.canonical),We.bucketLayerIDs.push(An.map(pr=>pr.id)))}}let tn,Ft,jt,sn;const En=g.mapObject(st.glyphDependencies,Ci=>Object.keys(Ci).map(Number));Object.keys(En).length?De.send("getGlyphs",{uid:this.uid,stacks:En},(Ci,Pn)=>{tn||(tn=Ci,Ft=Pn,li.call(this))}):Ft={};const zn=Object.keys(st.iconDependencies);zn.length?De.send("getImages",{icons:zn,source:this.source,tileID:this.tileID,type:"icons"},(Ci,Pn)=>{tn||(tn=Ci,jt=Pn,li.call(this))}):jt={};const Li=Object.keys(st.patternDependencies);function li(){if(tn)return ke(tn);if(Ft&&jt&&sn){const Ci=new Le(Ft),Pn=new g.ImageAtlas(jt,sn);for(const pi in Xe){const rr=Xe[pi];rr instanceof g.SymbolBucket?(Ve(rr.layers,this.zoom,ge),g.performSymbolLayout(rr,Ft,Ci.positions,jt,Pn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):rr.hasPattern&&(rr instanceof g.LineBucket||rr instanceof g.FillBucket||rr instanceof g.FillExtrusionBucket)&&(Ve(rr.layers,this.zoom,ge),rr.addFeatures(st,this.tileID.canonical,Pn.patternPositions))}this.status="done",ke(null,{buckets:Object.values(Xe).filter(pi=>!pi.isEmpty()),featureIndex:We,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ci.image,imageAtlas:Pn,glyphMap:this.returnDependencies?Ft:null,iconMap:this.returnDependencies?jt:null,glyphPositions:this.returnDependencies?Ci.positions:null})}}Li.length?De.send("getImages",{icons:Li,source:this.source,tileID:this.tileID,type:"patterns"},(Ci,Pn)=>{tn||(tn=Ci,sn=Pn,li.call(this))}):sn={},li.call(this)}}function Ve(J,F,K){const ge=new g.EvaluationParameters(F);for(const De of J)De.recalculate(ge,K)}function Ze(J,F){const K=g.getArrayBuffer(J.request,(ge,De,ke,Je)=>{ge?F(ge):De&&F(null,{vectorTile:new g.vectorTile.VectorTile(new g.pbf(De)),rawData:De,cacheControl:ke,expires:Je})});return()=>{K.cancel(),F()}}class Be{constructor(F,K,ge,De){this.actor=F,this.layerIndex=K,this.availableImages=ge,this.loadVectorData=De||Ze,this.loading={},this.loaded={}}loadTile(F,K){const ge=F.uid;this.loading||(this.loading={});const De=!!(F&&F.request&&F.request.collectResourceTiming)&&new g.RequestPerformance(F.request),ke=this.loading[ge]=new he(F);ke.abort=this.loadVectorData(F,(Je,We)=>{if(delete this.loading[ge],Je||!We)return ke.status="done",this.loaded[ge]=ke,K(Je);const Xe=We.rawData,st={};We.expires&&(st.expires=We.expires),We.cacheControl&&(st.cacheControl=We.cacheControl);const Lt={};if(De){const tn=De.finish();tn&&(Lt.resourceTiming=JSON.parse(JSON.stringify(tn)))}ke.vectorTile=We.vectorTile,ke.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,(tn,Ft)=>{if(tn||!Ft)return K(tn);K(null,g.extend({rawTileData:Xe.slice(0)},Ft,st,Lt))}),this.loaded=this.loaded||{},this.loaded[ge]=ke})}reloadTile(F,K){const ge=this.loaded,De=F.uid,ke=this;if(ge&&ge[De]){const Je=ge[De];Je.showCollisionBoxes=F.showCollisionBoxes;const We=(Xe,st)=>{const Lt=Je.reloadCallback;Lt&&(delete Je.reloadCallback,Je.parse(Je.vectorTile,ke.layerIndex,this.availableImages,ke.actor,Lt)),K(Xe,st)};"parsing"===Je.status?Je.reloadCallback=We:"done"===Je.status&&(Je.vectorTile?Je.parse(Je.vectorTile,this.layerIndex,this.availableImages,this.actor,We):We())}}abortTile(F,K){const ge=this.loading,De=F.uid;ge&&ge[De]&&ge[De].abort&&(ge[De].abort(),delete ge[De]),K()}removeTile(F,K){const ge=this.loaded,De=F.uid;ge&&ge[De]&&delete ge[De],K()}}class gt{constructor(){this.loaded={}}loadTile(F,K){const{uid:ge,encoding:De,rawImageData:ke}=F,Je=g.isImageBitmap(ke)?this.getImageData(ke):ke,We=new g.DEMData(ge,Je,De);this.loaded=this.loaded||{},this.loaded[ge]=We,K(null,We)}getImageData(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);const K=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new g.RGBAImage({width:K.width,height:K.height},K.data)}removeTile(F){const K=this.loaded,ge=F.uid;K&&K[ge]&&delete K[ge]}}var Ye=function J(F,K){var ge,De=F&&F.type;if("FeatureCollection"===De)for(ge=0;ge<F.features.length;ge++)J(F.features[ge],K);else if("GeometryCollection"===De)for(ge=0;ge<F.geometries.length;ge++)J(F.geometries[ge],K);else if("Feature"===De)J(F.geometry,K);else if("Polygon"===De)tt(F.coordinates,K);else if("MultiPolygon"===De)for(ge=0;ge<F.coordinates.length;ge++)tt(F.coordinates[ge],K);return F};function tt(J,F){if(0!==J.length){Mt(J[0],F);for(var K=1;K<J.length;K++)Mt(J[K],!F)}}function Mt(J,F){for(var K=0,ge=0,De=0,ke=J.length,Je=ke-1;De<ke;Je=De++){var We=(J[De][0]-J[Je][0])*(J[Je][1]+J[De][1]),Xe=K+We;ge+=Math.abs(K)>=Math.abs(We)?K-Xe+We:We-Xe+K,K=Xe}K+ge>=0!=!!F&&J.reverse()}const He=g.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Vt{constructor(F){this._feature=F,this.extent=g.EXTENT,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))}loadGeometry(){if(1===this._feature.type){const F=[];for(const K of this._feature.geometry)F.push([new g.pointGeometry(K[0],K[1])]);return F}{const F=[];for(const K of this._feature.geometry){const ge=[];for(const De of K)ge.push(new g.pointGeometry(De[0],De[1]));F.push(ge)}return F}}toGeoJSON(F,K,ge){return He.call(this,F,K,ge)}}class Ht{constructor(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.EXTENT,this.length=F.length,this._features=F}feature(F){return new Vt(this._features[F])}}var an={exports:{}},Dt=g.pointGeometry,Fe=g.vectorTile.VectorTileFeature,rt=nn;function nn(J,F){this.options=F||{},this.features=J,this.length=J.length}function Bt(J,F){this.id="number"==typeof J.id?J.id:void 0,this.type=J.type,this.rawGeometry=1===J.type?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=F||4096}nn.prototype.feature=function(J){return new Bt(this.features[J],this.options.extent)},Bt.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var F=0;F<J.length;F++){for(var K=J[F],ge=[],De=0;De<K.length;De++)ge.push(new Dt(K[De][0],K[De][1]));this.geometry.push(ge)}return this.geometry},Bt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,F=1/0,K=-1/0,ge=1/0,De=-1/0,ke=0;ke<J.length;ke++)for(var Je=J[ke],We=0;We<Je.length;We++){var Xe=Je[We];F=Math.min(F,Xe.x),K=Math.max(K,Xe.x),ge=Math.min(ge,Xe.y),De=Math.max(De,Xe.y)}return[F,ge,K,De]},Bt.prototype.toGeoJSON=Fe.prototype.toGeoJSON;var Qt=g.pbf,at=rt;function mt(J){var F=new Qt;return function(K,ge){for(var De in K.layers)ge.writeMessage(3,lt,K.layers[De])}(J,F),F.finish()}function lt(J,F){var K;F.writeVarintField(15,J.version||1),F.writeStringField(1,J.name||""),F.writeVarintField(5,J.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<J.length;K++)ge.feature=J.feature(K),F.writeMessage(2,At,ge);var De=ge.keys;for(K=0;K<De.length;K++)F.writeStringField(3,De[K]);var ke=ge.values;for(K=0;K<ke.length;K++)F.writeMessage(4,Ui,ke[K])}function At(J,F){var K=J.feature;void 0!==K.id&&F.writeVarintField(1,K.id),F.writeMessage(2,Kt,J),F.writeVarintField(3,K.type),F.writeMessage(4,di,K)}function Kt(J,F){var K=J.feature,ge=J.keys,De=J.values,ke=J.keycache,Je=J.valuecache;for(var We in K.properties){var Xe=K.properties[We],st=ke[We];if(null!==Xe){void 0===st&&(ge.push(We),ke[We]=st=ge.length-1),F.writeVarint(st);var Lt=typeof Xe;"string"!==Lt&&"boolean"!==Lt&&"number"!==Lt&&(Xe=JSON.stringify(Xe));var tn=Lt+":"+Xe,Ft=Je[tn];void 0===Ft&&(De.push(Xe),Je[tn]=Ft=De.length-1),F.writeVarint(Ft)}}}function Ct(J,F){return(F<<3)+(7&J)}function yn(J){return J<<1^J>>31}function di(J,F){for(var K=J.loadGeometry(),ge=J.type,De=0,ke=0,Je=K.length,We=0;We<Je;We++){var Xe=K[We],st=1;1===ge&&(st=Xe.length),F.writeVarint(Ct(1,st));for(var Lt=3===ge?Xe.length-1:Xe.length,tn=0;tn<Lt;tn++){1===tn&&1!==ge&&F.writeVarint(Ct(2,Lt-1));var Ft=Xe[tn].x-De,jt=Xe[tn].y-ke;F.writeVarint(yn(Ft)),F.writeVarint(yn(jt)),De+=Ft,ke+=jt}3===ge&&F.writeVarint(Ct(7,1))}}function Ui(J,F){var K=typeof J;"string"===K?F.writeStringField(1,J):"boolean"===K?F.writeBooleanField(7,J):"number"===K&&(J%1!=0?F.writeDoubleField(3,J):J<0?F.writeSVarintField(6,J):F.writeVarintField(5,J))}an.exports=mt,an.exports.fromVectorTileJs=mt,an.exports.fromGeojsonVt=function(J,F){F=F||{};var K={};for(var ge in J)K[ge]=new at(J[ge].features,F),K[ge].name=ge,K[ge].version=F.version,K[ge].extent=F.extent;return mt({layers:K})},an.exports.GeoJSONWrapper=at;var kn=an.exports;function Rn(J,F,K,ge,De,ke){if(De-ge<=K)return;const Je=ge+De>>1;ki(J,F,Je,ge,De,ke%2),Rn(J,F,K,ge,Je-1,ke+1),Rn(J,F,K,Je+1,De,ke+1)}function ki(J,F,K,ge,De,ke){for(;De>ge;){if(De-ge>600){const st=De-ge+1,Lt=K-ge+1,tn=Math.log(st),Ft=.5*Math.exp(2*tn/3),jt=.5*Math.sqrt(tn*Ft*(st-Ft)/st)*(Lt-st/2<0?-1:1);ki(J,F,K,Math.max(ge,Math.floor(K-Lt*Ft/st+jt)),Math.min(De,Math.floor(K+(st-Lt)*Ft/st+jt)),ke)}const Je=F[2*K+ke];let We=ge,Xe=De;for(hi(J,F,ge,K),F[2*De+ke]>Je&&hi(J,F,ge,De);We<Xe;){for(hi(J,F,We,Xe),We++,Xe--;F[2*We+ke]<Je;)We++;for(;F[2*Xe+ke]>Je;)Xe--}F[2*ge+ke]===Je?hi(J,F,ge,Xe):(Xe++,hi(J,F,Xe,De)),Xe<=K&&(ge=Xe+1),K<=Xe&&(De=Xe-1)}}function hi(J,F,K,ge){sr(J,K,ge),sr(F,2*K,2*ge),sr(F,2*K+1,2*ge+1)}function sr(J,F,K){const ge=J[F];J[F]=J[K],J[K]=ge}function xi(J,F,K,ge){const De=J-K,ke=F-ge;return De*De+ke*ke}const In=J=>J[0],Qn=J=>J[1];class ft{constructor(F,K=In,ge=Qn,De=64,ke=Float64Array){this.nodeSize=De,this.points=F;const Je=F.length<65536?Uint16Array:Uint32Array,We=this.ids=new Je(F.length),Xe=this.coords=new ke(2*F.length);for(let st=0;st<F.length;st++)We[st]=st,Xe[2*st]=K(F[st]),Xe[2*st+1]=ge(F[st]);Rn(We,Xe,De,0,We.length-1,0)}range(F,K,ge,De){return function(ke,Je,We,Xe,st,Lt,tn){const Ft=[0,ke.length-1,0],jt=[];let sn,En;for(;Ft.length;){const zn=Ft.pop(),Li=Ft.pop(),li=Ft.pop();if(Li-li<=tn){for(let pi=li;pi<=Li;pi++)sn=Je[2*pi],En=Je[2*pi+1],sn>=We&&sn<=st&&En>=Xe&&En<=Lt&&jt.push(ke[pi]);continue}const Ci=Math.floor((li+Li)/2);sn=Je[2*Ci],En=Je[2*Ci+1],sn>=We&&sn<=st&&En>=Xe&&En<=Lt&&jt.push(ke[Ci]);const Pn=(zn+1)%2;(0===zn?We<=sn:Xe<=En)&&(Ft.push(li),Ft.push(Ci-1),Ft.push(Pn)),(0===zn?st>=sn:Lt>=En)&&(Ft.push(Ci+1),Ft.push(Li),Ft.push(Pn))}return jt}(this.ids,this.coords,F,K,ge,De,this.nodeSize)}within(F,K,ge){return function(De,ke,Je,We,Xe,st){const Lt=[0,De.length-1,0],tn=[],Ft=Xe*Xe;for(;Lt.length;){const jt=Lt.pop(),sn=Lt.pop(),En=Lt.pop();if(sn-En<=st){for(let Pn=En;Pn<=sn;Pn++)xi(ke[2*Pn],ke[2*Pn+1],Je,We)<=Ft&&tn.push(De[Pn]);continue}const zn=Math.floor((En+sn)/2),Li=ke[2*zn],li=ke[2*zn+1];xi(Li,li,Je,We)<=Ft&&tn.push(De[zn]);const Ci=(jt+1)%2;(0===jt?Je-Xe<=Li:We-Xe<=li)&&(Lt.push(En),Lt.push(zn-1),Lt.push(Ci)),(0===jt?Je+Xe>=Li:We+Xe>=li)&&(Lt.push(zn+1),Lt.push(sn),Lt.push(Ci))}return tn}(this.ids,this.coords,F,K,ge,this.nodeSize)}}const kt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},ln=Math.fround||(gn=new Float32Array(1),J=>(gn[0]=+J,gn[0]));var gn;class Bn{constructor(F){this.options=St(Object.create(kt),F),this.trees=new Array(this.options.maxZoom+1)}load(F){const{log:K,minZoom:ge,maxZoom:De,nodeSize:ke}=this.options;K&&console.time("total time");const Je=`prepare ${F.length} points`;K&&console.time(Je),this.points=F;let We=[];for(let Xe=0;Xe<F.length;Xe++)F[Xe].geometry&&We.push(Bi(F[Xe],Xe));this.trees[De+1]=new ft(We,$,U,ke,Float32Array),K&&console.timeEnd(Je);for(let Xe=De;Xe>=ge;Xe--){const st=+Date.now();We=this._cluster(We,Xe),this.trees[Xe]=new ft(We,$,U,ke,Float32Array),K&&console.log("z%d: %d clusters in %dms",Xe,We.length,+Date.now()-st)}return K&&console.timeEnd("total time"),this}getClusters(F,K){let ge=((F[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,F[1]));let ke=180===F[2]?180:((F[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)ge=-180,ke=180;else if(ge>ke){const Lt=this.getClusters([ge,De,180,Je],K),tn=this.getClusters([-180,De,ke,Je],K);return Lt.concat(tn)}const We=this.trees[this._limitZoom(K)],Xe=We.range(qn(ge),Xn(Je),qn(ke),Xn(De)),st=[];for(const Lt of Xe){const tn=We.points[Lt];st.push(tn.numPoints?Xi(tn):this.points[tn.index])}return st}getChildren(F){const K=this._getOriginId(F),ge=this._getOriginZoom(F),De="No cluster with the specified id.",ke=this.trees[ge];if(!ke)throw new Error(De);const Je=ke.points[K];if(!Je)throw new Error(De);const We=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Xe=ke.within(Je.x,Je.y,We),st=[];for(const Lt of Xe){const tn=ke.points[Lt];tn.parentId===F&&st.push(tn.numPoints?Xi(tn):this.points[tn.index])}if(0===st.length)throw new Error(De);return st}getLeaves(F,K,ge){const De=[];return this._appendLeaves(De,F,K=K||10,ge=ge||0,0),De}getTile(F,K,ge){const De=this.trees[this._limitZoom(F)],ke=Math.pow(2,F),{extent:Je,radius:We}=this.options,Xe=We/Je,st=(ge-Xe)/ke,Lt=(ge+1+Xe)/ke,tn={features:[]};return this._addTileFeatures(De.range((K-Xe)/ke,st,(K+1+Xe)/ke,Lt),De.points,K,ge,ke,tn),0===K&&this._addTileFeatures(De.range(1-Xe/ke,st,1,Lt),De.points,ke,ge,ke,tn),K===ke-1&&this._addTileFeatures(De.range(0,st,Xe/ke,Lt),De.points,-1,ge,ke,tn),tn.features.length?tn:null}getClusterExpansionZoom(F){let K=this._getOriginZoom(F)-1;for(;K<=this.options.maxZoom;){const ge=this.getChildren(F);if(K++,1!==ge.length)break;F=ge[0].properties.cluster_id}return K}_appendLeaves(F,K,ge,De,ke){const Je=this.getChildren(K);for(const We of Je){const Xe=We.properties;if(Xe&&Xe.cluster?ke+Xe.point_count<=De?ke+=Xe.point_count:ke=this._appendLeaves(F,Xe.cluster_id,ge,De,ke):ke<De?ke++:F.push(We),F.length===ge)break}return ke}_addTileFeatures(F,K,ge,De,ke,Je){for(const We of F){const Xe=K[We],st=Xe.numPoints;let Lt,tn,Ft;if(st)Lt=_i(Xe),tn=Xe.x,Ft=Xe.y;else{const En=this.points[Xe.index];Lt=En.properties,tn=qn(En.geometry.coordinates[0]),Ft=Xn(En.geometry.coordinates[1])}const jt={type:1,geometry:[[Math.round(this.options.extent*(tn*ke-ge)),Math.round(this.options.extent*(Ft*ke-De))]],tags:Lt};let sn;st?sn=Xe.id:this.options.generateId?sn=Xe.index:this.points[Xe.index].id&&(sn=this.points[Xe.index].id),void 0!==sn&&(jt.id=sn),Je.features.push(jt)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(+F,this.options.maxZoom+1))}_cluster(F,K){const ge=[],{radius:De,extent:ke,reduce:Je,minPoints:We}=this.options,Xe=De/(ke*Math.pow(2,K));for(let st=0;st<F.length;st++){const Lt=F[st];if(Lt.zoom<=K)continue;Lt.zoom=K;const tn=this.trees[K+1],Ft=tn.within(Lt.x,Lt.y,Xe),jt=Lt.numPoints||1;let sn=jt;for(const En of Ft){const zn=tn.points[En];zn.zoom>K&&(sn+=zn.numPoints||1)}if(sn>jt&&sn>=We){let En=Lt.x*jt,zn=Lt.y*jt,Li=Je&&jt>1?this._map(Lt,!0):null;const li=(st<<5)+(K+1)+this.points.length;for(const Ci of Ft){const Pn=tn.points[Ci];if(Pn.zoom<=K)continue;Pn.zoom=K;const pi=Pn.numPoints||1;En+=Pn.x*pi,zn+=Pn.y*pi,Pn.parentId=li,Je&&(Li||(Li=this._map(Lt,!0)),Je(Li,this._map(Pn)))}Lt.parentId=li,ge.push(Jn(En/sn,zn/sn,li,sn,Li))}else if(ge.push(Lt),sn>1)for(const En of Ft){const zn=tn.points[En];zn.zoom<=K||(zn.zoom=K,ge.push(zn))}}return ge}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,K){if(F.numPoints)return K?St({},F.properties):F.properties;const ge=this.points[F.index].properties,De=this.options.map(ge);return K&&De===ge?St({},De):De}}function Jn(J,F,K,ge,De){return{x:ln(J),y:ln(F),zoom:1/0,id:K,parentId:-1,numPoints:ge,properties:De}}function Bi(J,F){const[K,ge]=J.geometry.coordinates;return{x:ln(qn(K)),y:ln(Xn(ge)),zoom:1/0,index:F,parentId:-1}}function Xi(J){return{type:"Feature",id:J.id,properties:_i(J),geometry:{type:"Point",coordinates:[(F=J.x,360*(F-.5)),Zn(J.y)]}};var F}function _i(J){const F=J.numPoints,K=F>=1e4?`${Math.round(F/1e3)}k`:F>=1e3?Math.round(F/100)/10+"k":F;return St(St({},J.properties),{cluster:!0,cluster_id:J.id,point_count:F,point_count_abbreviated:K})}function qn(J){return J/360+.5}function Xn(J){const F=Math.sin(J*Math.PI/180),K=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return K<0?0:K>1?1:K}function Zn(J){const F=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function St(J,F){for(const K in F)J[K]=F[K];return J}function $(J){return J.x}function U(J){return J.y}function R(J,F,K,ge){for(var De,ke=ge,Je=K-F>>1,We=K-F,Xe=J[F],st=J[F+1],Lt=J[K],tn=J[K+1],Ft=F+3;Ft<K;Ft+=3){var jt=N(J[Ft],J[Ft+1],Xe,st,Lt,tn);if(jt>ke)De=Ft,ke=jt;else if(jt===ke){var sn=Math.abs(Ft-Je);sn<We&&(De=Ft,We=sn)}}ke>ge&&(De-F>3&&R(J,F,De,ge),J[De+2]=ke,K-De>3&&R(J,De,K,ge))}function N(J,F,K,ge,De,ke){var Je=De-K,We=ke-ge;if(0!==Je||0!==We){var Xe=((J-K)*Je+(F-ge)*We)/(Je*Je+We*We);Xe>1?(K=De,ge=ke):Xe>0&&(K+=Je*Xe,ge+=We*Xe)}return(Je=J-K)*Je+(We=F-ge)*We}function ie(J,F,K,ge){var De={id:void 0===J?null:J,type:F,geometry:K,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Je=ke.geometry,We=ke.type;if("Point"===We||"MultiPoint"===We||"LineString"===We)fe(ke,Je);else if("Polygon"===We||"MultiLineString"===We)for(var Xe=0;Xe<Je.length;Xe++)fe(ke,Je[Xe]);else if("MultiPolygon"===We)for(Xe=0;Xe<Je.length;Xe++)for(var st=0;st<Je[Xe].length;st++)fe(ke,Je[Xe][st])}(De),De}function fe(J,F){for(var K=0;K<F.length;K+=3)J.minX=Math.min(J.minX,F[K]),J.minY=Math.min(J.minY,F[K+1]),J.maxX=Math.max(J.maxX,F[K]),J.maxY=Math.max(J.maxY,F[K+1])}function nt(J,F,K,ge){if(F.geometry){var De=F.geometry.coordinates,ke=F.geometry.type,Je=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),We=[],Xe=F.id;if(K.promoteId?Xe=F.properties[K.promoteId]:K.generateId&&(Xe=ge||0),"Point"===ke)Et(De,We);else if("MultiPoint"===ke)for(var st=0;st<De.length;st++)Et(De[st],We);else if("LineString"===ke)_t(De,We,Je,!1);else if("MultiLineString"===ke){if(K.lineMetrics){for(st=0;st<De.length;st++)_t(De[st],We=[],Je,!1),J.push(ie(Xe,"LineString",We,F.properties));return}fn(De,We,Je,!1)}else if("Polygon"===ke)fn(De,We,Je,!0);else{if("MultiPolygon"!==ke){if("GeometryCollection"===ke){for(st=0;st<F.geometry.geometries.length;st++)nt(J,{id:Xe,geometry:F.geometry.geometries[st],properties:F.properties},K,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(st=0;st<De.length;st++){var Lt=[];fn(De[st],Lt,Je,!0),We.push(Lt)}}J.push(ie(Xe,ke,We,F.properties))}}function Et(J,F){F.push(_n(J[0])),F.push(Hn(J[1])),F.push(0)}function _t(J,F,K,ge){for(var De,ke,Je=0,We=0;We<J.length;We++){var Xe=_n(J[We][0]),st=Hn(J[We][1]);F.push(Xe),F.push(st),F.push(0),We>0&&(Je+=ge?(De*st-Xe*ke)/2:Math.sqrt(Math.pow(Xe-De,2)+Math.pow(st-ke,2))),De=Xe,ke=st}var Lt=F.length-3;F[2]=1,R(F,0,Lt,K),F[Lt+2]=1,F.size=Math.abs(Je),F.start=0,F.end=F.size}function fn(J,F,K,ge){for(var De=0;De<J.length;De++){var ke=[];_t(J[De],ke,K,ge),F.push(ke)}}function _n(J){return J/360+.5}function Hn(J){var F=Math.sin(J*Math.PI/180),K=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return K<0?0:K>1?1:K}function Fi(J,F,K,ge,De,ke,Je,We){if(ge/=F,ke>=(K/=F)&&Je<ge)return J;if(Je<K||ke>=ge)return null;for(var Xe=[],st=0;st<J.length;st++){var Lt=J[st],tn=Lt.geometry,Ft=Lt.type,jt=0===De?Lt.minX:Lt.minY,sn=0===De?Lt.maxX:Lt.maxY;if(jt>=K&&sn<ge)Xe.push(Lt);else if(!(sn<K||jt>=ge)){var En=[];if("Point"===Ft||"MultiPoint"===Ft)Jt(tn,En,K,ge,De);else if("LineString"===Ft)hn(tn,En,K,ge,De,!1,We.lineMetrics);else if("MultiLineString"===Ft)Oi(tn,En,K,ge,De,!1);else if("Polygon"===Ft)Oi(tn,En,K,ge,De,!0);else if("MultiPolygon"===Ft)for(var zn=0;zn<tn.length;zn++){var Li=[];Oi(tn[zn],Li,K,ge,De,!0),Li.length&&En.push(Li)}if(En.length){if(We.lineMetrics&&"LineString"===Ft){for(zn=0;zn<En.length;zn++)Xe.push(ie(Lt.id,Ft,En[zn],Lt.tags));continue}"LineString"!==Ft&&"MultiLineString"!==Ft||(1===En.length?(Ft="LineString",En=En[0]):Ft="MultiLineString"),"Point"!==Ft&&"MultiPoint"!==Ft||(Ft=3===En.length?"Point":"MultiPoint"),Xe.push(ie(Lt.id,Ft,En,Lt.tags))}}}return Xe.length?Xe:null}function Jt(J,F,K,ge,De){for(var ke=0;ke<J.length;ke+=3){var Je=J[ke+De];Je>=K&&Je<=ge&&(F.push(J[ke]),F.push(J[ke+1]),F.push(J[ke+2]))}}function hn(J,F,K,ge,De,ke,Je){for(var We,Xe,st=Zt(J),Lt=0===De?Vn:Rt,tn=J.start,Ft=0;Ft<J.length-3;Ft+=3){var jt=J[Ft],sn=J[Ft+1],En=J[Ft+2],zn=J[Ft+3],Li=J[Ft+4],li=0===De?jt:sn,Ci=0===De?zn:Li,Pn=!1;Je&&(We=Math.sqrt(Math.pow(jt-zn,2)+Math.pow(sn-Li,2))),li<K?Ci>K&&(Xe=Lt(st,jt,sn,zn,Li,K),Je&&(st.start=tn+We*Xe)):li>ge?Ci<ge&&(Xe=Lt(st,jt,sn,zn,Li,ge),Je&&(st.start=tn+We*Xe)):Wn(st,jt,sn,En),Ci<K&&li>=K&&(Xe=Lt(st,jt,sn,zn,Li,K),Pn=!0),Ci>ge&&li<=ge&&(Xe=Lt(st,jt,sn,zn,Li,ge),Pn=!0),!ke&&Pn&&(Je&&(st.end=tn+We*Xe),F.push(st),st=Zt(J)),Je&&(tn+=We)}var pi=J.length-3;jt=J[pi],sn=J[pi+1],En=J[pi+2],(li=0===De?jt:sn)>=K&&li<=ge&&Wn(st,jt,sn,En),pi=st.length-3,ke&&pi>=3&&(st[pi]!==st[0]||st[pi+1]!==st[1])&&Wn(st,st[0],st[1],st[2]),st.length&&F.push(st)}function Zt(J){var F=[];return F.size=J.size,F.start=J.start,F.end=J.end,F}function Oi(J,F,K,ge,De,ke){for(var Je=0;Je<J.length;Je++)hn(J[Je],F,K,ge,De,ke,!1)}function Wn(J,F,K,ge){J.push(F),J.push(K),J.push(ge)}function Vn(J,F,K,ge,De,ke){var Je=(ke-F)/(ge-F);return J.push(ke),J.push(K+(De-K)*Je),J.push(1),Je}function Rt(J,F,K,ge,De,ke){var Je=(ke-K)/(De-K);return J.push(F+(ge-F)*Je),J.push(ke),J.push(1),Je}function pt(J,F){for(var K=[],ge=0;ge<J.length;ge++){var De,ke=J[ge],Je=ke.type;if("Point"===Je||"MultiPoint"===Je||"LineString"===Je)De=we(ke.geometry,F);else if("MultiLineString"===Je||"Polygon"===Je){De=[];for(var We=0;We<ke.geometry.length;We++)De.push(we(ke.geometry[We],F))}else if("MultiPolygon"===Je)for(De=[],We=0;We<ke.geometry.length;We++){for(var Xe=[],st=0;st<ke.geometry[We].length;st++)Xe.push(we(ke.geometry[We][st],F));De.push(Xe)}K.push(ie(ke.id,Je,De,ke.tags))}return K}function we(J,F){var K=[];K.size=J.size,void 0!==J.start&&(K.start=J.start,K.end=J.end);for(var ge=0;ge<J.length;ge+=3)K.push(J[ge]+F,J[ge+1],J[ge+2]);return K}function Ae(J,F){if(J.transformed)return J;var K,ge,De,ke=1<<J.z,Je=J.x,We=J.y;for(K=0;K<J.features.length;K++){var Xe=J.features[K],st=Xe.geometry,Lt=Xe.type;if(Xe.geometry=[],1===Lt)for(ge=0;ge<st.length;ge+=2)Xe.geometry.push(ye(st[ge],st[ge+1],F,ke,Je,We));else for(ge=0;ge<st.length;ge++){var tn=[];for(De=0;De<st[ge].length;De+=2)tn.push(ye(st[ge][De],st[ge][De+1],F,ke,Je,We));Xe.geometry.push(tn)}}return J.transformed=!0,J}function ye(J,F,K,ge,De,ke){return[Math.round(K*(J*ge-De)),Math.round(K*(F*ge-ke))]}function dt(J,F,K,ge,De){for(var ke=F===De.maxZoom?0:De.tolerance/((1<<F)*De.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:ge,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<J.length;We++){Je.numFeatures++,It(Je,J[We],ke,De);var Xe=J[We].minX,st=J[We].minY,Lt=J[We].maxX,tn=J[We].maxY;Xe<Je.minX&&(Je.minX=Xe),st<Je.minY&&(Je.minY=st),Lt>Je.maxX&&(Je.maxX=Lt),tn>Je.maxY&&(Je.maxY=tn)}return Je}function It(J,F,K,ge){var De=F.geometry,ke=F.type,Je=[];if("Point"===ke||"MultiPoint"===ke)for(var We=0;We<De.length;We+=3)Je.push(De[We]),Je.push(De[We+1]),J.numPoints++,J.numSimplified++;else if("LineString"===ke)xn(Je,De,J,K,!1,!1);else if("MultiLineString"===ke||"Polygon"===ke)for(We=0;We<De.length;We++)xn(Je,De[We],J,K,"Polygon"===ke,0===We);else if("MultiPolygon"===ke)for(var Xe=0;Xe<De.length;Xe++){var st=De[Xe];for(We=0;We<st.length;We++)xn(Je,st[We],J,K,!0,0===We)}if(Je.length){var Lt=F.tags||null;if("LineString"===ke&&ge.lineMetrics){for(var tn in Lt={},F.tags)Lt[tn]=F.tags[tn];Lt.mapbox_clip_start=De.start/De.size,Lt.mapbox_clip_end=De.end/De.size}var Ft={geometry:Je,type:"Polygon"===ke||"MultiPolygon"===ke?3:"LineString"===ke||"MultiLineString"===ke?2:1,tags:Lt};null!==F.id&&(Ft.id=F.id),J.features.push(Ft)}}function xn(J,F,K,ge,De,ke){var Je=ge*ge;if(ge>0&&F.size<(De?Je:ge))K.numPoints+=F.length/3;else{for(var We=[],Xe=0;Xe<F.length;Xe+=3)(0===ge||F[Xe+2]>Je)&&(K.numSimplified++,We.push(F[Xe]),We.push(F[Xe+1])),K.numPoints++;De&&function(st,Lt){for(var tn=0,Ft=0,jt=st.length,sn=jt-2;Ft<jt;sn=Ft,Ft+=2)tn+=(st[Ft]-st[sn])*(st[Ft+1]+st[sn+1]);if(tn>0===Lt)for(Ft=0,jt=st.length;Ft<jt/2;Ft+=2){var En=st[Ft],zn=st[Ft+1];st[Ft]=st[jt-2-Ft],st[Ft+1]=st[jt-1-Ft],st[jt-2-Ft]=En,st[jt-1-Ft]=zn}}(We,ke),J.push(We)}}function Ei(J,F){var K=(F=this.options=function(De,ke){for(var Je in ke)De[Je]=ke[Je];return De}(Object.create(this.options),F)).debug;if(K&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var De,ke,Je,We,Xe,st,ge=function(De,ke){var Je=[];if("FeatureCollection"===De.type)for(var We=0;We<De.features.length;We++)nt(Je,De.features[We],ke,We);else nt(Je,"Feature"===De.type?De:{geometry:De},ke);return Je}(J,F);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),We=De=ge,Xe=Fi(De,1,-1-(Je=(ke=F).buffer/ke.extent),Je,0,-1,2,ke),st=Fi(De,1,1-Je,2+Je,0,-1,2,ke),(Xe||st)&&(We=Fi(De,1,-Je,1+Je,0,-1,2,ke)||[],Xe&&(We=pt(Xe,1).concat(We)),st&&(We=We.concat(pt(st,-1)))),(ge=We).length&&this.splitTile(ge,0,0,0),K&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gi(J,F,K){return 32*((1<<J)*K+F)+J}function er(J,F){const K=J.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);const ge=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ge)return F(null,null);const De=new Ht(ge.features);let ke=kn(De);0===ke.byteOffset&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),F(null,{vectorTile:De,rawData:ke.buffer})}Ei.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ei.prototype.splitTile=function(J,F,K,ge,De,ke,Je){for(var We=[J,F,K,ge],Xe=this.options,st=Xe.debug;We.length;){ge=We.pop(),K=We.pop(),F=We.pop(),J=We.pop();var Lt=1<<F,tn=Gi(F,K,ge),Ft=this.tiles[tn];if(!Ft&&(st>1&&console.time("creation"),Ft=this.tiles[tn]=dt(J,F,K,ge,Xe),this.tileCoords.push({z:F,x:K,y:ge}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,K,ge,Ft.numFeatures,Ft.numPoints,Ft.numSimplified),console.timeEnd("creation"));var jt="z"+F;this.stats[jt]=(this.stats[jt]||0)+1,this.total++}if(Ft.source=J,De){if(F===Xe.maxZoom||F===De)continue;var sn=1<<De-F;if(K!==Math.floor(ke/sn)||ge!==Math.floor(Je/sn))continue}else if(F===Xe.indexMaxZoom||Ft.numPoints<=Xe.indexMaxPoints)continue;if(Ft.source=null,0!==J.length){st>1&&console.time("clipping");var En,zn,Li,li,Ci,Pn,pi=.5*Xe.buffer/Xe.extent,rr=.5-pi,An=.5+pi,br=1+pi;En=zn=Li=li=null,Ci=Fi(J,Lt,K-pi,K+An,0,Ft.minX,Ft.maxX,Xe),Pn=Fi(J,Lt,K+rr,K+br,0,Ft.minX,Ft.maxX,Xe),J=null,Ci&&(En=Fi(Ci,Lt,ge-pi,ge+An,1,Ft.minY,Ft.maxY,Xe),zn=Fi(Ci,Lt,ge+rr,ge+br,1,Ft.minY,Ft.maxY,Xe),Ci=null),Pn&&(Li=Fi(Pn,Lt,ge-pi,ge+An,1,Ft.minY,Ft.maxY,Xe),li=Fi(Pn,Lt,ge+rr,ge+br,1,Ft.minY,Ft.maxY,Xe),Pn=null),st>1&&console.timeEnd("clipping"),We.push(En||[],F+1,2*K,2*ge),We.push(zn||[],F+1,2*K,2*ge+1),We.push(Li||[],F+1,2*K+1,2*ge),We.push(li||[],F+1,2*K+1,2*ge+1)}}},Ei.prototype.getTile=function(J,F,K){var ge=this.options,De=ge.extent,ke=ge.debug;if(J<0||J>24)return null;var Je=1<<J,We=Gi(J,F=(F%Je+Je)%Je,K);if(this.tiles[We])return Ae(this.tiles[We],De);ke>1&&console.log("drilling down to z%d-%d-%d",J,F,K);for(var Xe,st=J,Lt=F,tn=K;!Xe&&st>0;)st--,Lt=Math.floor(Lt/2),tn=Math.floor(tn/2),Xe=this.tiles[Gi(st,Lt,tn)];return Xe&&Xe.source?(ke>1&&console.log("found parent tile z%d-%d-%d",st,Lt,tn),ke>1&&console.time("drilling down"),this.splitTile(Xe.source,st,Lt,tn,J,F,K),ke>1&&console.timeEnd("drilling down"),this.tiles[We]?Ae(this.tiles[We],De):null):null};class Tt extends Be{constructor(F,K,ge,De){super(F,K,ge,er),De&&(this.loadGeoJSON=De)}loadData(F,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=K,this._pendingLoadDataParams=F,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const F=this._pendingCallback,K=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ge=!!(K&&K.request&&K.request.collectResourceTiming)&&new g.RequestPerformance(K.request);this.loadGeoJSON(K,(De,ke)=>{if(De||!ke)return F(De);if("object"!=typeof ke)return F(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{Ye(ke,!0);try{if(K.filter){const We=g.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===We.result)throw new Error(We.value.map(st=>`${st.key}: ${st.message}`).join(", "));const Xe=ke.features.filter(st=>We.value.evaluate({zoom:0},st));ke={type:"FeatureCollection",features:Xe}}this._geoJSONIndex=K.cluster?new Bn(function({superclusterOptions:We,clusterProperties:Xe}){if(!Xe||!We)return We;const st={},Lt={},tn={accumulated:null,zoom:0},Ft={properties:null},jt=Object.keys(Xe);for(const sn of jt){const[En,zn]=Xe[sn],Li=g.createExpression(zn),li=g.createExpression("string"==typeof En?[En,["accumulated"],["get",sn]]:En);st[sn]=Li.value,Lt[sn]=li.value}return We.map=sn=>{Ft.properties=sn;const En={};for(const zn of jt)En[zn]=st[zn].evaluate(tn,Ft);return En},We.reduce=(sn,En)=>{Ft.properties=En;for(const zn of jt)tn.accumulated=sn[zn],sn[zn]=Lt[zn].evaluate(tn,Ft)},We}(K)).load(ke.features):new Ei(We=ke,K.geojsonVtOptions)}catch(We){return F(We)}this.loaded={};const Je={};if(ge){const We=ge.finish();We&&(Je.resourceTiming={},Je.resourceTiming[K.source]=JSON.parse(JSON.stringify(We)))}F(null,Je)}var We})}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(F,K){const ge=this.loaded;return ge&&ge[F.uid]?super.reloadTile(F,K):this.loadTile(F,K)}loadGeoJSON(F,K){if(F.request)g.getJSON(F.request,K);else{if("string"!=typeof F.data)return K(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`));try{return K(null,JSON.parse(F.data))}catch(ge){return K(new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`))}}}removeSource(F,K){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),K()}getClusterExpansionZoom(F,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(F.clusterId))}catch(ge){K(ge)}}getClusterChildren(F,K){try{K(null,this._geoJSONIndex.getChildren(F.clusterId))}catch(ge){K(ge)}}getClusterLeaves(F,K){try{K(null,this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset))}catch(ge){K(ge)}}}class it{constructor(F){this.self=F,this.actor=new g.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Be,geojson:Tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(K,ge)=>{if(this.workerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.workerSourceTypes[K]=ge},this.self.registerRTLTextPlugin=K=>{if(g.plugin.isParsed())throw new Error("RTL text plugin already registered.");g.plugin.applyArabicShaping=K.applyArabicShaping,g.plugin.processBidirectionalText=K.processBidirectionalText,g.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}}setReferrer(F,K){this.referrer=K}setImages(F,K,ge){this.availableImages[F]=K;for(const De in this.workerSources[F]){const ke=this.workerSources[F][De];for(const Je in ke)ke[Je].availableImages=K}ge()}setLayers(F,K,ge){this.getLayerIndex(F).replace(K),ge()}updateLayers(F,K,ge){this.getLayerIndex(F).update(K.layers,K.removedIds),ge()}loadTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).loadTile(K,ge)}loadDEMTile(F,K,ge){this.getDEMWorkerSource(F,K.source).loadTile(K,ge)}reloadTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).reloadTile(K,ge)}abortTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).abortTile(K,ge)}removeTile(F,K,ge){this.getWorkerSource(F,K.type,K.source).removeTile(K,ge)}removeDEMTile(F,K){this.getDEMWorkerSource(F,K.source).removeTile(K)}removeSource(F,K,ge){if(!this.workerSources[F]||!this.workerSources[F][K.type]||!this.workerSources[F][K.type][K.source])return;const De=this.workerSources[F][K.type][K.source];delete this.workerSources[F][K.type][K.source],void 0!==De.removeSource?De.removeSource(K,ge):ge()}loadWorkerSource(F,K,ge){try{this.self.importScripts(K.url),ge()}catch(De){ge(De.toString())}}syncRTLPluginState(F,K,ge){try{g.plugin.setState(K);const De=g.plugin.getPluginURL();if(g.plugin.isLoaded()&&!g.plugin.isParsed()&&null!=De){this.self.importScripts(De);const ke=g.plugin.isParsed();ge(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${De}`),ke)}}catch(De){ge(De.toString())}}getAvailableImages(F){let K=this.availableImages[F];return K||(K=[]),K}getLayerIndex(F){let K=this.layerIndexes[F];return K||(K=this.layerIndexes[F]=new Oe),K}getWorkerSource(F,K,ge){return this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][K]||(this.workerSources[F][K]={}),this.workerSources[F][K][ge]||(this.workerSources[F][K][ge]=new this.workerSourceTypes[K]({send:(ke,Je,We)=>{this.actor.send(ke,Je,We,F)}},this.getLayerIndex(F),this.getAvailableImages(F))),this.workerSources[F][K][ge]}getDEMWorkerSource(F,K){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][K]||(this.demWorkerSources[F][K]=new gt),this.demWorkerSources[F][K]}enforceCacheSizeLimit(F,K){g.enforceCacheSizeLimit(K)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new it(self)),it}),l(0,function(g){var $e=Ke;function Ke(f){return i=f,!("undefined"==typeof window||"undefined"==typeof document||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,E=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(E);try{v=new Worker(O),m=!0}catch(G){m=!1}return v&&v.terminate(),URL.revokeObjectURL(O),m}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var E=v.getImageData(0,0,1,1);return E&&E.width===m.width}()||(void 0===Oe[c=i&&i.failIfMajorPerformanceCaveat]&&(Oe[c]=function(m){var v,O,G,Y,E=(O=m,G=document.createElement("canvas"),(Y=Object.create(Ke.webGLContextAttributes)).failIfMajorPerformanceCaveat=O,G.getContext("webgl",Y)||G.getContext("experimental-webgl",Y));if(!E)return!1;try{v=E.createShader(E.VERTEX_SHADER)}catch(O){return!1}return!(!v||E.isContextLost())&&(E.shaderSource(v,"void main() {}"),E.compileShader(v),!0===E.getShaderParameter(v,E.COMPILE_STATUS))}(c)),!Oe[c]||document.documentMode));var i,c}var Oe={};function Le(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let c=0;c<f.length;c++)if(!Le(f[c],i[c]))return!1;return!0}if("object"==typeof f&&null!==f&&null!==i){if("object"!=typeof i||Object.keys(f).length!==Object.keys(i).length)return!1;for(const c in f)if(!Le(f[c],i[c]))return!1;return!0}return f===i}Ke.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class he{static testProp(i){if(!he.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in he.docStyle)return i[c];return i[0]}static create(i,c,m){const v=window.document.createElement(i);return void 0!==c&&(v.className=c),m&&m.appendChild(v),v}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){he.docStyle&&he.selectProp&&(he.userSelect=he.docStyle[he.selectProp],he.docStyle[he.selectProp]="none")}static enableDrag(){he.docStyle&&he.selectProp&&(he.docStyle[he.selectProp]=he.userSelect)}static setTransform(i,c){i.style[he.transformProp]=c}static addEventListener(i,c,m,v={}){i.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(i,c,m,v={}){i.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",he.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",he.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",he.suppressClickInternal,!0)},0)}static mousePos(i,c){const m=i.getBoundingClientRect();return new g.pointGeometry(c.clientX-m.left-i.clientLeft,c.clientY-m.top-i.clientTop)}static touchPos(i,c){const m=i.getBoundingClientRect(),v=[];for(let E=0;E<c.length;E++)v.push(new g.pointGeometry(c[E].clientX-m.left-i.clientLeft,c[E].clientY-m.top-i.clientTop));return v}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}he.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,he.selectProp=he.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),he.transformProp=he.testProp(["transform","WebkitTransform"]);class Ve{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,m){const v=function(E){const O=E.match(Ze);if(!O)throw new Error(`Unable to parse URL "${E}"`);return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}(i);return v.path+=`${c}${m}`,function(E){const O=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${O}`}(v)}setTransformRequest(i){this._transformRequestFn=i}}const Ze=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Be(f){var i=new g.ARRAY_TYPE(3);return i[0]=f[0],i[1]=f[1],i[2]=f[2],i}function gt(f,i,c){var m=new g.ARRAY_TYPE(3);return m[0]=f,m[1]=i,m[2]=c,m}var Ye,tt=function(f,i,c){return f[0]=i[0]-c[0],f[1]=i[1]-c[1],f[2]=i[2]-c[2],f};Ye=new g.ARRAY_TYPE(3),g.ARRAY_TYPE!=Float32Array&&(Ye[0]=0,Ye[1]=0,Ye[2]=0);var f,Mt=function(f){var i=f[0],c=f[1];return i*i+c*c};f=new g.ARRAY_TYPE(2),g.ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0);class He{constructor(i,c,m,v){this.context=i,this.format=m,this.texture=i.gl.createTexture(),this.update(c,v)}update(i,c,m){const{width:v,height:E}=i,O=!(this.size&&this.size[0]===v&&this.size[1]===E||m),{context:G}=this,{gl:Y}=G;if(this.useMipmap=Boolean(c&&c.useMipmap),Y.bindTexture(Y.TEXTURE_2D,this.texture),G.pixelStoreUnpackFlipY.set(!1),G.pixelStoreUnpack.set(1),G.pixelStoreUnpackPremultiplyAlpha.set(this.format===Y.RGBA&&(!c||!1!==c.premultiply)),O)this.size=[v,E],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||g.isImageBitmap(i)?Y.texImage2D(Y.TEXTURE_2D,0,this.format,this.format,Y.UNSIGNED_BYTE,i):Y.texImage2D(Y.TEXTURE_2D,0,this.format,v,E,0,this.format,Y.UNSIGNED_BYTE,i.data);else{const{x:oe,y:ce}=m||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||g.isImageBitmap(i)?Y.texSubImage2D(Y.TEXTURE_2D,0,oe,ce,Y.RGBA,Y.UNSIGNED_BYTE,i):Y.texSubImage2D(Y.TEXTURE_2D,0,oe,ce,v,E,Y.RGBA,Y.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Y.generateMipmap(Y.TEXTURE_2D)}bind(i,c,m){const{context:v}=this,{gl:E}=v;E.bindTexture(E.TEXTURE_2D,this.texture),m!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=E.LINEAR),i!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,i),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,m||i),this.filter=i),c!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,c),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Vt(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ht extends g.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new g.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,c){this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new g.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new g.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new g.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,c){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(i,c){return!(i&&(4!==i.length||i[0]<0||c.data.width<i[0]||i[1]<0||c.data.height<i[1]||i[2]<0||c.data.width<i[2]||i[3]<0||c.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,c){c.version=this.images[i].version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,c){let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(i,c):this.requestors.push({ids:i,callback:c})}_notify(i,c){const m={};for(const v of i){this.images[v]||this.fire(new g.Event("styleimagemissing",{id:v}));const E=this.images[v];E?m[v]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:g.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],m=this.getImage(i);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},E=new g.ImagePosition(v,m);this.patterns[i]={bin:v,position:E}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new He(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const E in this.patterns)i.push(this.patterns[E].bin);const{w:c,h:m}=g.potpack(i),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const E in this.patterns){const{bin:O}=this.patterns[E],G=O.x+1,Y=O.y+1,oe=this.images[E].data,ce=oe.width,be=oe.height;g.RGBAImage.copy(oe,v,{x:0,y:0},{x:G,y:Y},{width:ce,height:be}),g.RGBAImage.copy(oe,v,{x:0,y:be-1},{x:G,y:Y-1},{width:ce,height:1}),g.RGBAImage.copy(oe,v,{x:0,y:0},{x:G,y:Y+be},{width:ce,height:1}),g.RGBAImage.copy(oe,v,{x:ce-1,y:0},{x:G-1,y:Y},{width:1,height:be}),g.RGBAImage.copy(oe,v,{x:0,y:0},{x:G+ce,y:Y},{width:1,height:be})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.images[c];Vt(m)&&this.updateImage(c,m)}}}const an=1e20;function Dt(f,i,c,m,v,E,O,G,Y){for(let oe=i;oe<i+m;oe++)Fe(f,c*E+oe,E,v,O,G,Y);for(let oe=c;oe<c+v;oe++)Fe(f,oe*E+i,1,m,O,G,Y)}function Fe(f,i,c,m,v,E,O){E[0]=0,O[0]=-an,O[1]=an,v[0]=f[i];for(let G=1,Y=0,oe=0;G<m;G++){v[G]=f[i+G*c];const ce=G*G;do{const be=E[Y];oe=(v[G]-v[be]+ce-be*be)/(G-be)/2}while(oe<=O[Y]&&--Y>-1);Y++,E[Y]=G,O[Y]=oe,O[Y+1]=an}for(let G=0,Y=0;G<m;G++){for(;O[Y+1]<G;)Y++;const oe=E[Y],ce=G-oe;f[i+G*c]=v[oe]+ce*ce}}class rt{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i,c){const m=[];for(const v in i)for(const E of i[v])m.push({stack:v,id:E});g.asyncAll(m,({stack:v,id:E},O)=>{let G=this.entries[v];G||(G=this.entries[v]={glyphs:{},requests:{},ranges:{}});let Y=G.glyphs[E];if(void 0!==Y)return void O(null,{stack:v,id:E,glyph:Y});if(Y=this._tinySDF(G,v,E),Y)return G.glyphs[E]=Y,void O(null,{stack:v,id:E,glyph:Y});const oe=Math.floor(E/256);if(256*oe>65535)return void O(new Error("glyphs > 65535 not supported"));if(G.ranges[oe])return void O(null,{stack:v,id:E,glyph:Y});let ce=G.requests[oe];ce||(ce=G.requests[oe]=[],rt.loadGlyphRange(v,oe,this.url,this.requestManager,(be,Ie)=>{if(Ie){for(const ze in Ie)this._doesCharSupportLocalGlyph(+ze)||(G.glyphs[+ze]=Ie[+ze]);G.ranges[oe]=!0}for(const ze of ce)ze(be,Ie);delete G.requests[oe]})),ce.push((be,Ie)=>{be?O(be):Ie&&O(null,{stack:v,id:E,glyph:Ie[E]||null})})},(v,E)=>{if(v)c(v);else if(E){const O={};for(const{stack:G,id:Y,glyph:oe}of E)(O[G]||(O[G]={}))[Y]=oe&&{id:oe.id,bitmap:oe.bitmap.clone(),metrics:oe.metrics};c(null,O)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(g.unicodeBlockLookup["CJK Unified Ideographs"](i)||g.unicodeBlockLookup["Hangul Syllables"](i)||g.unicodeBlockLookup.Hiragana(i)||g.unicodeBlockLookup.Katakana(i))}_tinySDF(i,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let E=i.tinySDF;if(!E){let O="400";/bold/i.test(c)?O="900":/medium/i.test(c)?O="500":/light/i.test(c)&&(O="200"),E=i.tinySDF=new rt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:v,fontWeight:O})}return{id:m,bitmap:new g.AlphaImage({width:30,height:30},E.draw(String.fromCharCode(m)).data),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}}rt.loadGlyphRange=function(f,i,c,m,v){const E=256*i,O=E+255,G=m.transformRequest(c.replace("{fontstack}",f).replace("{range}",`${E}-${O}`),g.ResourceType.Glyphs);g.getArrayBuffer(G,(Y,oe)=>{if(Y)v(Y);else if(oe){const ce={};for(const be of g.parseGlyphPBF(oe))ce[be.id]=be;v(null,ce)}})},rt.TinySDF=class{constructor({fontSize:f=24,buffer:i=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:O="normal"}){this.buffer=i,this.cutoff=m,this.radius=c;const G=this.size=f+4*i,Y=this._createCanvas(G),oe=this.ctx=Y.getContext("2d",{willReadFrequently:!0});oe.font=`${O} ${E} ${f}px ${v}`,oe.textBaseline="alphabetic",oe.textAlign="left",oe.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(f){const i=document.createElement("canvas");return i.width=i.height=f,i}draw(f){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(f),O=Math.floor(c),G=Math.min(this.size-this.buffer,Math.ceil(E-v)),Y=Math.min(this.size-this.buffer,Math.ceil(c)+Math.ceil(m)),oe=G+2*this.buffer,ce=Y+2*this.buffer,be=oe*ce,Ie=new Uint8ClampedArray(be),ze={data:Ie,width:oe,height:ce,glyphWidth:G,glyphHeight:Y,glyphTop:O,glyphLeft:0,glyphAdvance:i};if(0===G||0===Y)return ze;const{ctx:Pe,buffer:qe,gridInner:ut,gridOuter:vt}=this;Pe.clearRect(qe,qe,G,Y),Pe.fillText(f,qe,qe+O+1);const Nt=Pe.getImageData(qe,qe,G,Y);vt.fill(an,0,be),ut.fill(0,0,be);for(let bt=0;bt<Y;bt++)for(let cn=0;cn<G;cn++){const qt=Nt.data[4*(bt*G+cn)+3]/255;if(0===qt)continue;const Xt=(bt+qe)*oe+cn+qe;if(1===qt)vt[Xt]=0,ut[Xt]=an;else{const bn=.5-qt;vt[Xt]=bn>0?bn*bn:0,ut[Xt]=bn<0?bn*bn:0}}Dt(vt,0,0,oe,ce,oe,this.f,this.v,this.z),Dt(ut,qe,qe,G,Y,oe,this.f,this.v,this.z);for(let bt=0;bt<be;bt++){const cn=Math.sqrt(vt[bt])-Math.sqrt(ut[bt]);Ie[bt]=Math.round(255-255*(cn/this.radius+this.cutoff))}return ze}};const nn=new g.Properties({anchor:new g.DataConstantProperty(g.spec.light.anchor),position:new class{constructor(){this.specification=g.spec.light.position}possiblyEvaluate(f,i){return g.sphericalToCartesian(f.expression.evaluate(i))}interpolate(f,i,c){return{x:g.number(f.x,i.x,c),y:g.number(f.y,i.y,c),z:g.number(f.z,i.z,c)}}},color:new g.DataConstantProperty(g.spec.light.color),intensity:new g.DataConstantProperty(g.spec.light.intensity)}),Bt="-transition";class Qt extends g.Evented{constructor(i){super(),this._transitionable=new g.Transitionable(nn),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(g.validateLight,i,c))for(const m in i){const v=i[m];m.endsWith(Bt)?this._transitionable.setTransition(m.slice(0,-Bt.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,m){return(!m||!1!==m.validate)&&g.emitValidationErrors(this,i.call(g.validateStyle,g.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:g.spec})))}}class at{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const m=i.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,c)),this.dashEntry[m]}getDashRanges(i,c,m){const v=[];let E=i.length%2==1?-i[i.length-1]*m:0,O=i[0]*m,G=!0;v.push({left:E,right:O,isDash:G,zeroLength:0===i[0]});let Y=i[0];for(let oe=1;oe<i.length;oe++){G=!G;const ce=i[oe];E=Y*m,Y+=ce,O=Y*m,v.push({left:E,right:O,isDash:G,zeroLength:0===ce})}return v}addRoundDash(i,c,m){const v=c/2;for(let E=-m;E<=m;E++){const O=this.width*(this.nextRow+m+E);let G=0,Y=i[G];for(let oe=0;oe<this.width;oe++){oe/Y.right>1&&(Y=i[++G]);const ce=Math.abs(oe-Y.left),be=Math.abs(oe-Y.right),Ie=Math.min(ce,be);let ze;const Pe=E/m*(v+1);if(Y.isDash){const qe=v-Math.abs(Pe);ze=Math.sqrt(Ie*Ie+qe*qe)}else ze=v-Math.sqrt(Ie*Ie+Pe*Pe);this.data[O+oe]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(i){for(let G=i.length-1;G>=0;--G){const Y=i[G],oe=i[G+1];Y.zeroLength?i.splice(G,1):oe&&oe.isDash===Y.isDash&&(oe.left=Y.left,i.splice(G,1))}const c=i[0],m=i[i.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let E=0,O=i[E];for(let G=0;G<this.width;G++){G/O.right>1&&(O=i[++E]);const Y=Math.abs(G-O.left),oe=Math.abs(G-O.right),ce=Math.min(Y,oe);this.data[v+G]=Math.max(0,Math.min(255,(O.isDash?ce:-ce)+128))}}addDash(i,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return g.warnOnce("LineAtlas out of space"),null;let E=0;for(let G=0;G<i.length;G++)E+=i[G];if(0!==E){const G=this.width/E,Y=this.getDashRanges(i,this.width,G);c?this.addRoundDash(Y,G,m):this.addRegularDash(Y)}const O={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:E};return this.nextRow+=v,this.dirty=!0,O}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}class mt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=g.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const E=new mt.Actor(m[v],c,this.id);E.name=`Worker ${v}`,this.actors.push(E)}}broadcast(i,c,m){g.asyncAll(this.actors,(v,E)=>{v.send(i,c,E)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function lt(f,i,c){const m=function(v,E){if(v)return c(v);if(E){const O=g.pick(g.extend(E,f),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(O.vectorLayers=E.vector_layers,O.vectorLayerIds=O.vectorLayers.map(G=>G.id)),c(null,O)}};return f.url?g.getJSON(i.transformRequest(f.url,g.ResourceType.Source),m):g.exported.frame(()=>m(null,f))}mt.Actor=g.Actor;class At{constructor(i,c,m){this.bounds=g.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),m=Math.floor(g.mercatorXfromLng(this.bounds.getWest())*c),v=Math.floor(g.mercatorYfromLat(this.bounds.getNorth())*c),E=Math.ceil(g.mercatorXfromLng(this.bounds.getEast())*c),O=Math.ceil(g.mercatorYfromLat(this.bounds.getSouth())*c);return i.x>=m&&i.x<E&&i.y>=v&&i.y<O}}class Kt extends g.Evented{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=g.extend({type:"raster"},c),g.extend(this,g.pick(c,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(i,c)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new g.ErrorEvent(i)):c&&(g.extend(this,c),c.bounds&&(this.tileBounds=new At(c.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,c){const m=i.tileID.canonical.url(this.tiles,this.scheme);i.request=g.getImage(this.map._requestManager.transformRequest(m,g.ResourceType.Tile),(v,E)=>{if(delete i.request,i.aborted)i.state="unloaded",c(null);else if(v)i.state="errored",c(v);else if(E){this.map._refreshExpiredTiles&&i.setExpiryData(E),delete E.cacheControl,delete E.expires;const O=this.map.painter.context,G=O.gl;i.texture=this.map.painter.getTileTexture(E.width),i.texture?i.texture.update(E,{useMipmap:!0}):(i.texture=new He(O,E,G.RGBA,{useMipmap:!0}),i.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),O.extTextureFilterAnisotropic&&G.texParameterf(G.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax)),i.state="loaded",g.cacheEntryPossiblyAdded(this.dispatcher),c(null)}})}abortTile(i,c){i.request&&(i.request.cancel(),delete i.request),c()}unloadTile(i,c){i.texture&&this.map.painter.saveTileTexture(i.texture),c()}hasTransition(){return!1}}let Ct;var yn=g.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class di extends g.Evented{constructor(i,c,m,v){super(),this.id=i,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(i,c){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this.url=this.options.url,g.getImage(this.map._requestManager.transformRequest(this.url,g.ResourceType.Image),(m,v)=>{this._loaded=!0,m?this.fire(new g.ErrorEvent(m)):v&&(this.image=v,i&&(this.coordinates=i),c&&c(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const c=i.map(g.MercatorCoordinate.fromLngLat);this.tileID=function(v){let E=1/0,O=1/0,G=-1/0,Y=-1/0;for(const Ie of v)E=Math.min(E,Ie.x),O=Math.min(O,Ie.y),G=Math.max(G,Ie.x),Y=Math.max(Y,Ie.y);const oe=Math.max(G-E,Y-O),ce=Math.max(0,Math.floor(-Math.log(oe)/Math.LN2)),be=Math.pow(2,ce);return new g.CanonicalTileID(ce,Math.floor((E+G)/2*be),Math.floor((O+Y)/2*be))}(c),this.minzoom=this.maxzoom=this.tileID.z;const m=c.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new g.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,g.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,g.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,g.EXTENT,g.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,yn.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new He(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,c){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},c(null)):(i.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ui={vector:class extends g.Evented{constructor(f,i,c,m){if(super(),this.id=f,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,g.extend(this,g.pick(i,["url","scheme","tileSize","promoteId"])),this._options=g.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new g.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=lt(this._options,this.map._requestManager,(f,i)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new g.ErrorEvent(f)):i&&(g.extend(this,i),i.bounds&&(this.tileBounds=new At(i.bounds,this.minzoom,this.maxzoom)),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new g.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}setSourceProperty(f){this._tileJSONRequest&&this._tileJSONRequest.cancel(),f(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()}setTiles(f){return this.setSourceProperty(()=>{this._options.tiles=f}),this}setUrl(f){return this.setSourceProperty(()=>{this.url=f,this._options.url=f}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return g.extend({},this._options)}loadTile(f,i){const c=f.tileID.canonical.url(this.tiles,this.scheme),m={request:this.map._requestManager.transformRequest(c,g.ResourceType.Tile),uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(E,O){return delete f.request,f.aborted?i(null):E&&404!==E.status?i(E):(O&&O.resourceTiming&&(f.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&f.setExpiryData(O),f.loadVectorData(O,this.map.painter),g.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,f.actor&&"expired"!==f.state?"loading"===f.state?f.reloadCallback=i:f.request=f.actor.send("reloadTile",m,v.bind(this)):(f.actor=this.dispatcher.getActor(),f.request=f.actor.send("loadTile",m,v.bind(this)))}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id},void 0)}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}},raster:Kt,"raster-dem":class extends Kt{constructor(f,i,c,m){super(f,i,c,m),this.type="raster-dem",this.maxzoom=22,this._options=g.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(f,i){const c=f.tileID.canonical.url(this.tiles,this.scheme);function m(v,E){v&&(f.state="errored",i(v)),E&&(f.dem=E,f.needsHillshadePrepare=!0,f.state="loaded",i(null))}f.request=g.getImage(this.map._requestManager.transformRequest(c,g.ResourceType.Tile),function(v,E){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(v)f.state="errored",i(v);else if(E){this.map._refreshExpiredTiles&&f.setExpiryData(E),delete E.cacheControl,delete E.expires;const O=g.isImageBitmap(E)&&(null==Ct&&(Ct="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),Ct)?E:g.exported.getImageData(E,1),G={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:O,encoding:this.encoding};f.actor&&"expired"!==f.state||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",G,m.bind(this)))}}.bind(this)),f.neighboringTiles=this._getNeighboringTiles(f.tileID)}_getNeighboringTiles(f){const i=f.canonical,c=Math.pow(2,i.z),m=(i.x-1+c)%c,v=0===i.x?f.wrap-1:f.wrap,E=(i.x+1+c)%c,O=i.x+1===c?f.wrap+1:f.wrap,G={};return G[new g.OverscaledTileID(f.overscaledZ,v,i.z,m,i.y).key]={backfilled:!1},G[new g.OverscaledTileID(f.overscaledZ,O,i.z,E,i.y).key]={backfilled:!1},i.y>0&&(G[new g.OverscaledTileID(f.overscaledZ,v,i.z,m,i.y-1).key]={backfilled:!1},G[new g.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},G[new g.OverscaledTileID(f.overscaledZ,O,i.z,E,i.y-1).key]={backfilled:!1}),i.y+1<c&&(G[new g.OverscaledTileID(f.overscaledZ,v,i.z,m,i.y+1).key]={backfilled:!1},G[new g.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},G[new g.OverscaledTileID(f.overscaledZ,O,i.z,E,i.y+1).key]={backfilled:!1}),G}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded",f.actor&&f.actor.send("removeDEMTile",{uid:f.uid,source:this.id})}},geojson:class extends g.Evented{constructor(f,i,c,m){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(m),this._data=i.data,this._options=g.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=g.EXTENT/this.tileSize;this.workerOptions=g.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*v,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*v,extent:g.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:g.EXTENT,radius:(i.clusterRadius||50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(f){this.map=f,this.load()}setData(f){return this._data=f,this._updateWorkerData("content"),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,c,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:c},m),this}_updateWorkerData(f){const i=g.extend({},this.workerOptions),c=this._data;"string"==typeof c?(i.request=this.map._requestManager.transformRequest(g.exported.resolveURL(c),g.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(c),this._pendingLoads++,this.fire(new g.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,i,(m,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return;let E=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(E=v.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:i.source},null),m)return void this.fire(new g.ErrorEvent(m));const O={dataType:"source",sourceDataType:f};this._collectResourceTiming&&E&&E.length>0&&g.extend(O,{resourceTiming:E}),this.fire(new g.Event("data",O))})}loaded(){return 0===this._pendingLoads}loadTile(f,i){const c=f.actor?"reloadTile":"loadTile";f.actor=this.actor;const m={type:this.type,uid:f.uid,tileID:f.tileID,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request=this.actor.send(c,m,(v,E)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):v?i(v):(f.loadVectorData(E,this.map.painter,"reloadTile"===c),i(null))))}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return g.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends di{constructor(f,i,c,m){super(f,i,c,m),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,g.ResourceType.Source).url);g.getVideo(this.urls,(i,c)=>{this._loaded=!0,i?this.fire(new g.ErrorEvent(i)):c&&(this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,yn.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new He(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const c in this.tiles){const m=this.tiles[c];"loaded"!==m.state&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:di,canvas:class extends di{constructor(f,i,c,m){super(f,i,c,m),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(v=>!Array.isArray(v)||2!==v.length||v.some(E=>"number"!=typeof E))||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new g.ErrorEvent(new g.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new g.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,yn.members)),this.boundsSegments||(this.boundsSegments=g.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new He(i,this.canvas,c.RGBA,{premultiply:!0});for(const m in this.tiles){const v=this.tiles[m];"loaded"!==v.state&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}}};function kn(f,i){const c=g.create();return g.translate(c,c,[1,1,0]),g.scale(c,c,[.5*f.width,.5*f.height,1]),g.multiply(c,c,f.calculatePosMatrix(i.toUnwrapped()))}function Rn(f,i,c,m,v,E){const O=function(be,Ie,ze){if(be)for(const Pe of be){const qe=Ie[Pe];if(qe&&qe.source===ze&&"fill-extrusion"===qe.type)return!0}else for(const Pe in Ie){const qe=Ie[Pe];if(qe.source===ze&&"fill-extrusion"===qe.type)return!0}return!1}(v&&v.layers,i,f.id),G=E.maxPitchScaleFactor(),Y=f.tilesIn(m,G,O);Y.sort(ki);const oe=[];for(const be of Y)oe.push({wrappedTileID:be.tileID.wrapped().key,queryResults:be.tile.queryRenderedFeatures(i,c,f._state,be.queryGeometry,be.cameraQueryGeometry,be.scale,v,E,G,kn(f.transform,be.tileID))});const ce=function(be){const Ie={},ze={};for(const Pe of be){const qe=Pe.queryResults,ut=Pe.wrappedTileID,vt=ze[ut]=ze[ut]||{};for(const Nt in qe){const bt=qe[Nt],cn=vt[Nt]=vt[Nt]||{},qt=Ie[Nt]=Ie[Nt]||[];for(const Xt of bt)cn[Xt.featureIndex]||(cn[Xt.featureIndex]=!0,qt.push(Xt))}}return Ie}(oe);for(const be in ce)ce[be].forEach(Ie=>{const ze=Ie.feature,Pe=f.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=Pe});return ce}function ki(f,i){const c=f.tileID,m=i.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}class hi{constructor(i,c){this.tileID=i,this.uid=g.uniqueId(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<g.exported.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(i,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(v,E){const O={};if(!E)return O;for(const G of v){const Y=G.layerIds.map(oe=>E.getLayer(oe)).filter(Boolean);if(0!==Y.length){G.layers=Y,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(oe=>Y.filter(ce=>ce.id===oe)[0]));for(const oe of Y)O[oe.id]=G}}return O}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof g.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof g.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,g.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(E))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new g.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new He(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new He(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,m,v,E,O,G,Y,oe,ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:E,scale:O,tileSize:this.tileSize,pixelPosMatrix:ce,transform:Y,params:G,queryPadding:this.queryPadding*oe},i,c,m):{}}querySourceFeatures(i,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),E=c?c.sourceLayer:"",O=v._geojsonTileLayer||v[E];if(!O)return;const G=g.createFilter(c&&c.filter),{z:Y,x:oe,y:ce}=this.tileID.canonical,be={z:Y,x:oe,y:ce};for(let Ie=0;Ie<O.length;Ie++){const ze=O.feature(Ie);if(G.needGeometry){const ut=g.toEvaluationFeature(ze,!0);if(!G.filter(new g.EvaluationParameters(this.tileID.overscaledZ),ut,this.tileID.canonical))continue}else if(!G.filter(new g.EvaluationParameters(this.tileID.overscaledZ),ze))continue;const Pe=m.getId(ze,E),qe=new g.GeoJSONFeature(ze,Y,oe,ce,Pe);qe.tile=be,i.push(qe)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const m=g.parseCacheControl(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const E=this.expirationTime-c;E?this.expirationTime=m+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(i).length)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const E=this.buckets[v],O=E.layers[0].sourceLayer||"_geojsonTileLayer",G=m[O],Y=i[O];if(!G||!Y||0===Object.keys(Y).length)continue;E.update(Y,G,this.imageAtlas&&this.imageAtlas.patternPositions||{});const oe=c&&c.style&&c.style.getLayer(v);oe&&(this.queryPadding=Math.max(this.queryPadding,oe.queryRadius(E)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<g.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=g.exported.now()+i}setDependencies(i,c){const m={};for(const v of c)m[v]=!0;this.dependencies[i]=m}hasDependency(i,c){for(const m of i){const v=this.dependencies[m];if(v)for(const E of c)if(v[E])return!0}return!1}}class sr{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,m){const v=i.wrapped().key;void 0===this.data[v]&&(this.data[v]=[]);const E={value:c,timeout:void 0};if(void 0!==m&&(E.timeout=setTimeout(()=>{this.remove(i,E)},m)),this.data[v].push(E),this.order.push(v),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const m=i.wrapped().key,v=void 0===c?0:this.data[m].indexOf(c),E=this.data[m][v];return this.data[m].splice(v,1),E.timeout&&clearTimeout(E.timeout),0===this.data[m].length&&delete this.data[m],this.onRemove(E.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const m in this.data)for(const v of this.data[m])i(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class xi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,m){const v=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},g.extend(this.stateChanges[i][v],m),null===this.deletedStates[i]){this.deletedStates[i]={};for(const E in this.state[i])E!==v&&(this.deletedStates[i][E]=null)}else if(this.deletedStates[i]&&null===this.deletedStates[i][v]){this.deletedStates[i][v]={};for(const E in this.state[i][v])m[E]||(this.deletedStates[i][v][E]=null)}else for(const E in m)this.deletedStates[i]&&this.deletedStates[i][v]&&null===this.deletedStates[i][v][E]&&delete this.deletedStates[i][v][E]}removeFeatureState(i,c,m){if(null===this.deletedStates[i])return;const v=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&void 0!==c)null!==this.deletedStates[i][v]&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(void 0!==c)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,c){const m=String(c),v=g.extend({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(null===this.deletedStates[i])return{};if(this.deletedStates[i]){const E=this.deletedStates[i][c];if(null===E)return{};for(const O in E)delete v[O]}return v}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const O in this.stateChanges[v])this.state[v][O]||(this.state[v][O]={}),g.extend(this.state[v][O],this.stateChanges[v][O]),E[O]=this.state[v][O];m[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(null===this.deletedStates[v])for(const O in this.state[v])E[O]={},this.state[v][O]={};else for(const O in this.deletedStates[v]){if(null===this.deletedStates[v][O])this.state[v][O]={};else for(const G of Object.keys(this.deletedStates[v][O]))delete this.state[v][O][G];E[O]=this.state[v][O]}m[v]=m[v]||{},g.extend(m[v],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(m).length)for(const v in i)i[v].setFeatureState(m,c)}}class In extends g.Evented{constructor(i,c,m){super(),this.id=i,this.dispatcher=m,this.on("data",v=>{"source"===v.dataType&&"metadata"===v.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===v.dataType&&"content"===v.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(v,E,O,G){const Y=new Ui[E.type](v,E,O,G);if(Y.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${Y.id}`);return g.bindAll(["load","abort","unload","serialize","prepare"],Y),Y}(i,c,m,this),this._tiles={},this._cache=new sr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new xi}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const c=this._tiles[i];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,c){return this._source.loadTile(i,c)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(i),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Qn).map(i=>i.key)}getRenderableIds(i){const c=[];for(const m in this._tiles)this._isIdRenderable(m,i)&&c.push(this._tiles[m]);return i?c.sort((m,v)=>{const E=m.tileID,O=v.tileID,G=new g.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),Y=new g.pointGeometry(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-O.overscaledZ||Y.y-G.y||Y.x-G.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(Qn).map(m=>m.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)"errored"!==this._tiles[i].state&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){const m=this._tiles[i];m&&("loading"!==m.state&&(m.state=c),this._loadTile(m,this._tileLoaded.bind(this,m,i,c)))}_tileLoaded(i,c,m,v){if(v)return i.state="errored",void(404!==v.status?this._source.fire(new g.ErrorEvent(v,{tile:i})):this.update(this.transform));i.timeAdded=g.exported.now(),"expired"===m&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),"raster-dem"===this.getSource().type&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new g.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const E=c[v];if(i.neighboringTiles&&i.neighboringTiles[E]){const O=this.getTileByID(E);m(i,O),m(O,i)}}function m(v,E){v.needsHillshadePrepare=!0;let O=E.tileID.canonical.x-v.tileID.canonical.x;const G=E.tileID.canonical.y-v.tileID.canonical.y,Y=Math.pow(2,v.tileID.canonical.z),oe=E.tileID.key;0===O&&0===G||Math.abs(G)>1||(Math.abs(O)>1&&(1===Math.abs(O+Y)?O+=Y:1===Math.abs(O-Y)&&(O-=Y)),E.dem&&v.dem&&(v.dem.backfillBorder(E.dem,O,G),v.neighboringTiles&&v.neighboringTiles[oe]&&(v.neighboringTiles[oe].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,m,v){for(const E in this._tiles){let O=this._tiles[E];if(v[E]||!O.hasData()||O.tileID.overscaledZ<=c||O.tileID.overscaledZ>m)continue;let G=O.tileID;for(;O&&O.tileID.overscaledZ>c+1;){const oe=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[oe.key],O&&O.hasData()&&(G=oe)}let Y=G;for(;Y.overscaledZ>c;)if(Y=Y.scaledTo(Y.overscaledZ-1),i[Y.key]){v[G.key]=G;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const m=this._loadedParentTiles[i.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=i.overscaledZ-1;m>=c;m--){const v=i.scaledTo(m),E=this._getLoadedTile(v);if(E)return E}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(c*m*5),E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(E)}handleWrapJump(i){const c=Math.round((i-(void 0===this._prevLng?i:this._prevLng))/360);if(this._prevLng=i,c){const m={};for(const v in this._tiles){const E=this._tiles[v];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),m[E.tileID.key]=E}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let c;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?c=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new g.OverscaledTileID(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(c=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(c=c.filter(Y=>this._source.hasTile(Y)))):c=[];const m=i.coveringZoomLevel(this._source),v=Math.max(m-In.maxOverzooming,this._source.minzoom),E=Math.max(m+In.maxUnderzooming,this._source.minzoom),O=this._updateRetainedTiles(c,m);if(ft(this._source.type)){const Y={},oe={},ce=Object.keys(O);for(const be of ce){const Ie=O[be],ze=this._tiles[be];if(!ze||ze.fadeEndTime&&ze.fadeEndTime<=g.exported.now())continue;const Pe=this.findLoadedParent(Ie,v);Pe&&(this._addTile(Pe.tileID),Y[Pe.tileID.key]=Pe.tileID),oe[be]=Ie}this._retainLoadedChildren(oe,m,E,O);for(const be in Y)O[be]||(this._coveredTiles[be]=!0,O[be]=Y[be])}for(const Y in O)this._tiles[Y].clearFadeHold();const G=g.keysDifference(this._tiles,O);for(const Y of G){const oe=this._tiles[Y];oe.hasSymbolBuckets&&!oe.holdingForFade()?oe.setHoldDuration(this.map._fadeDuration):oe.hasSymbolBuckets&&!oe.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){const m={},v={},E=Math.max(c-In.maxOverzooming,this._source.minzoom),O=Math.max(c+In.maxUnderzooming,this._source.minzoom),G={};for(const Y of i){const oe=this._addTile(Y);m[Y.key]=Y,oe.hasData()||c<this._source.maxzoom&&(G[Y.key]=Y)}this._retainLoadedChildren(G,c,O,m);for(const Y of i){let oe=this._tiles[Y.key];if(oe.hasData())continue;if(c+1>this._source.maxzoom){const be=Y.children(this._source.maxzoom)[0],Ie=this.getTile(be);if(Ie&&Ie.hasData()){m[be.key]=be;continue}}else{const be=Y.children(this._source.maxzoom);if(m[be[0].key]&&m[be[1].key]&&m[be[2].key]&&m[be[3].key])continue}let ce=oe.wasRequested();for(let be=Y.overscaledZ-1;be>=E;--be){const Ie=Y.scaledTo(be);if(v[Ie.key]||(v[Ie.key]=!0,oe=this.getTile(Ie),!oe&&ce&&(oe=this._addTile(Ie)),oe&&(m[Ie.key]=Ie,ce=oe.wasRequested(),oe.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let m,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const E=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(E),m)break;v=E}for(const E of c)this._loadedParentTiles[E]=m}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const m=c;return c||(c=new hi(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,i.key,c.state))),c.uses++,this._tiles[i.key]=c,m||this._source.fire(new g.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const m=c.getExpiryTimeout();m&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},m))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,m){const v=[],E=this.transform;if(!E)return v;const O=m?E.getCameraQueryGeometry(i):i,G=i.map(Pe=>E.pointCoordinate(Pe)),Y=O.map(Pe=>E.pointCoordinate(Pe)),oe=this.getIds();let ce=1/0,be=1/0,Ie=-1/0,ze=-1/0;for(const Pe of Y)ce=Math.min(ce,Pe.x),be=Math.min(be,Pe.y),Ie=Math.max(Ie,Pe.x),ze=Math.max(ze,Pe.y);for(let Pe=0;Pe<oe.length;Pe++){const qe=this._tiles[oe[Pe]];if(qe.holdingForFade())continue;const ut=qe.tileID,vt=Math.pow(2,E.zoom-qe.tileID.overscaledZ),Nt=c*qe.queryPadding*g.EXTENT/qe.tileSize/vt,bt=[ut.getTilePoint(new g.MercatorCoordinate(ce,be)),ut.getTilePoint(new g.MercatorCoordinate(Ie,ze))];if(bt[0].x-Nt<g.EXTENT&&bt[0].y-Nt<g.EXTENT&&bt[1].x+Nt>=0&&bt[1].y+Nt>=0){const cn=G.map(Xt=>ut.getTilePoint(Xt)),qt=Y.map(Xt=>ut.getTilePoint(Xt));v.push({tile:qe,tileID:ut,queryGeometry:cn,cameraQueryGeometry:qt,scale:vt})}}return v}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(m=>this._tiles[m].tileID);for(const m of c)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(ft(this._source.type))for(const i in this._tiles){const c=this._tiles[i];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=g.exported.now())return!0}return!1}setFeatureState(i,c,m){this._state.updateState(i=i||"_geojsonTileLayer",c,m)}removeFeatureState(i,c,m){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,m)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,m){const v=this._tiles[i];v&&v.setDependencies(c,m)}reloadTilesForDependencies(i,c){for(const m in this._tiles)this._tiles[m].hasDependency(i,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(i,c))}}function Qn(f,i){const c=Math.abs(2*f.wrap)-+(f.wrap<0),m=Math.abs(2*i.wrap)-+(i.wrap<0);return f.overscaledZ-i.overscaledZ||m-c||i.canonical.y-f.canonical.y||i.canonical.x-f.canonical.x}function ft(f){return"raster"===f||"image"===f||"video"===f}In.maxOverzooming=10,In.maxUnderzooming=3;const kt="mapboxgl_preloaded_worker_pool";class ln{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ln.workerCount;)this.workers.push(new Worker(So.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kt]}numActive(){return Object.keys(this.active).length}}const gn=Math.floor(g.exported.hardwareConcurrency/2);let Bn;function Jn(){return Bn||(Bn=new ln),Bn}function Bi(f,i){const c={};for(const m in f)"ref"!==m&&(c[m]=f[m]);return g.refProperties.forEach(m=>{m in i&&(c[m]=i[m])}),c}function Xi(f){f=f.slice();const i=Object.create(null);for(let c=0;c<f.length;c++)i[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=Bi(f[c],i[f[c].ref]));return f}ln.workerCount=Math.max(Math.min(gn,6),1);const _i={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function qn(f,i,c){c.push({command:_i.addSource,args:[f,i[f]]})}function Xn(f,i,c){i.push({command:_i.removeSource,args:[f]}),c[f]=!0}function Zn(f,i,c,m){Xn(f,c,m),qn(f,i,c)}function St(f,i,c){let m;for(m in f[c])if(Object.prototype.hasOwnProperty.call(f[c],m)&&"data"!==m&&!Le(f[c][m],i[c][m]))return!1;for(m in i[c])if(Object.prototype.hasOwnProperty.call(i[c],m)&&"data"!==m&&!Le(f[c][m],i[c][m]))return!1;return!0}function $(f,i,c,m,v,E){let O;for(O in i=i||{},f=f||{})Object.prototype.hasOwnProperty.call(f,O)&&(Le(f[O],i[O])||c.push({command:E,args:[m,O,i[O],v]}));for(O in i)Object.prototype.hasOwnProperty.call(i,O)&&!Object.prototype.hasOwnProperty.call(f,O)&&(Le(f[O],i[O])||c.push({command:E,args:[m,O,i[O],v]}))}function U(f){return f.id}function R(f,i){return f[i.id]=i,f}class N{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=g.clamp(i,0,1);let c=1,m=this._distances[c];const v=i*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const E=c-1,O=this._distances[E],G=m-O,Y=G>0?(v-O)/G:0;return this.points[E].mult(1-Y).add(this.points[c].mult(Y))}}class ie{constructor(i,c,m){const v=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(c/m);for(let O=0;O<this.xCellCount*this.yCellCount;O++)v.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,m,v,E){this._forEachCell(c,m,v,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(E)}insertCircle(i,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,c,m,v,E,O){this.boxCells[E].push(O)}_insertCircleCell(i,c,m,v,E,O){this.circleCells[E].push(O)}_query(i,c,m,v,E,O){if(m<0||i>this.width||v<0||c>this.height)return[];const G=[];if(i<=0&&c<=0&&this.width<=m&&this.height<=v){if(E)return[{key:null,x1:i,y1:c,x2:m,y2:v}];for(let Y=0;Y<this.boxKeys.length;Y++)G.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const oe=this.circles[3*Y],ce=this.circles[3*Y+1],be=this.circles[3*Y+2];G.push({key:this.circleKeys[Y],x1:oe-be,y1:ce-be,x2:oe+be,y2:ce+be})}}else this._forEachCell(i,c,m,v,this._queryCell,G,{hitTest:E,seenUids:{box:{},circle:{}}},O);return G}query(i,c,m,v){return this._query(i,c,m,v,!1,null)}hitTest(i,c,m,v,E){return this._query(i,c,m,v,!0,E).length>0}hitTestCircle(i,c,m,v){const E=i-m,O=i+m,G=c-m,Y=c+m;if(O<0||E>this.width||Y<0||G>this.height)return!1;const oe=[];return this._forEachCell(E,G,O,Y,this._queryCellCircle,oe,{hitTest:!0,circle:{x:i,y:c,radius:m},seenUids:{box:{},circle:{}}},v),oe.length>0}_queryCell(i,c,m,v,E,O,G,Y){const{seenUids:oe,hitTest:ce}=G,be=this.boxCells[E];if(null!==be){const ze=this.bboxes;for(const Pe of be)if(!oe.box[Pe]){oe.box[Pe]=!0;const qe=4*Pe,ut=this.boxKeys[Pe];if(i<=ze[qe+2]&&c<=ze[qe+3]&&m>=ze[qe+0]&&v>=ze[qe+1]&&(!Y||Y(ut))&&(O.push({key:ut,x1:ze[qe],y1:ze[qe+1],x2:ze[qe+2],y2:ze[qe+3]}),ce))return!0}}const Ie=this.circleCells[E];if(null!==Ie){const ze=this.circles;for(const Pe of Ie)if(!oe.circle[Pe]){oe.circle[Pe]=!0;const qe=3*Pe,ut=this.circleKeys[Pe];if(this._circleAndRectCollide(ze[qe],ze[qe+1],ze[qe+2],i,c,m,v)&&(!Y||Y(ut))){const vt=ze[qe],Nt=ze[qe+1],bt=ze[qe+2];if(O.push({key:ut,x1:vt-bt,y1:Nt-bt,x2:vt+bt,y2:Nt+bt}),ce)return!0}}}return!1}_queryCellCircle(i,c,m,v,E,O,G,Y){const{circle:oe,seenUids:ce}=G,be=this.boxCells[E];if(null!==be){const ze=this.bboxes;for(const Pe of be)if(!ce.box[Pe]){ce.box[Pe]=!0;const qe=4*Pe,ut=this.boxKeys[Pe];if(this._circleAndRectCollide(oe.x,oe.y,oe.radius,ze[qe+0],ze[qe+1],ze[qe+2],ze[qe+3])&&(!Y||Y(ut)))return O.push(!0),!0}}const Ie=this.circleCells[E];if(null!==Ie){const ze=this.circles;for(const Pe of Ie)if(!ce.circle[Pe]){ce.circle[Pe]=!0;const qe=3*Pe,ut=this.circleKeys[Pe];if(this._circlesCollide(ze[qe],ze[qe+1],ze[qe+2],oe.x,oe.y,oe.radius)&&(!Y||Y(ut)))return O.push(!0),!0}}}_forEachCell(i,c,m,v,E,O,G,Y){const oe=this._convertToXCellCoord(i),ce=this._convertToYCellCoord(c),be=this._convertToXCellCoord(m),Ie=this._convertToYCellCoord(v);for(let ze=oe;ze<=be;ze++)for(let Pe=ce;Pe<=Ie;Pe++)if(E.call(this,i,c,m,v,this.xCellCount*Pe+ze,O,G,Y))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,m,v,E,O){const G=v-i,Y=E-c,oe=m+O;return oe*oe>G*G+Y*Y}_circleAndRectCollide(i,c,m,v,E,O,G){const Y=(O-v)/2,oe=Math.abs(i-(v+Y));if(oe>Y+m)return!1;const ce=(G-E)/2,be=Math.abs(c-(E+ce));if(be>ce+m)return!1;if(oe<=Y||be<=ce)return!0;const Ie=oe-Y,ze=be-ce;return Ie*Ie+ze*ze<=m*m}}function fe(f,i,c,m,v){const E=g.create();return i?(g.scale(E,E,[1/v,1/v,1]),c||g.rotateZ(E,E,m.angle)):g.multiply(E,m.labelPlaneMatrix,f),E}function nt(f,i,c,m,v){if(i){const E=g.clone(f);return g.scale(E,E,[v,v,1]),c||g.rotateZ(E,E,-m.angle),E}return m.glCoordMatrix}function Et(f,i){const c=g.fromValues(f.x,f.y,0,1);Vn(c,c,i);const m=c[3];return{point:new g.pointGeometry(c[0]/m,c[1]/m),signedDistanceFromCamera:m}}function _t(f,i){return.5+f/i*.5}function fn(f,i){const c=f[0]/f[3],m=f[1]/f[3];return c>=-i[0]&&c<=i[0]&&m>=-i[1]&&m<=i[1]}function _n(f,i,c,m,v,E,O,G){const Y=m?f.textSizeData:f.iconSizeData,oe=g.evaluateSizeForZoom(Y,c.transform.zoom),ce=[256/c.width*2+1,256/c.height*2+1],be=m?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;be.clear();const Ie=f.lineVertexArray,ze=m?f.text.placedSymbolArray:f.icon.placedSymbolArray,Pe=c.transform.width/c.transform.height;let qe=!1;for(let ut=0;ut<ze.length;ut++){const vt=ze.get(ut);if(vt.hidden||vt.writingMode===g.WritingMode.vertical&&!qe){Wn(vt.numGlyphs,be);continue}qe=!1;const Nt=g.fromValues(vt.anchorX,vt.anchorY,0,1);if(g.transformMat4(Nt,Nt,i),!fn(Nt,ce)){Wn(vt.numGlyphs,be);continue}const bt=_t(c.transform.cameraToCenterDistance,Nt[3]),cn=g.evaluateSizeForFeature(Y,oe,vt),qt=O?cn/bt:cn*bt,Xt=new g.pointGeometry(vt.anchorX,vt.anchorY),bn=Et(Xt,v).point,wn={},Ut=Jt(vt,qt,!1,G,i,v,E,f.glyphOffsetArray,Ie,be,bn,Xt,wn,Pe);qe=Ut.useVertical,(Ut.notEnoughRoom||qe||Ut.needsFlipping&&Jt(vt,qt,!0,G,i,v,E,f.glyphOffsetArray,Ie,be,bn,Xt,wn,Pe).notEnoughRoom)&&Wn(vt.numGlyphs,be)}m?f.text.dynamicLayoutVertexBuffer.updateData(be):f.icon.dynamicLayoutVertexBuffer.updateData(be)}function Hn(f,i,c,m,v,E,O,G,Y,oe,ce){const be=G.glyphStartIndex+G.numGlyphs,Ie=G.lineStartIndex,ze=G.lineStartIndex+G.lineLength,Pe=i.getoffsetX(G.glyphStartIndex),qe=i.getoffsetX(be-1),ut=Zt(f*Pe,c,m,v,E,O,G.segment,Ie,ze,Y,oe,ce);if(!ut)return null;const vt=Zt(f*qe,c,m,v,E,O,G.segment,Ie,ze,Y,oe,ce);return vt?{first:ut,last:vt}:null}function Fi(f,i,c,m){return f===g.WritingMode.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*m?{useVertical:!0}:(f===g.WritingMode.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function Jt(f,i,c,m,v,E,O,G,Y,oe,ce,be,Ie,ze){const Pe=i/24,qe=f.lineOffsetX*Pe,ut=f.lineOffsetY*Pe;let vt;if(f.numGlyphs>1){const Nt=f.glyphStartIndex+f.numGlyphs,bt=f.lineStartIndex,cn=f.lineStartIndex+f.lineLength,qt=Hn(Pe,G,qe,ut,c,ce,be,f,Y,E,Ie);if(!qt)return{notEnoughRoom:!0};const Xt=Et(qt.first.point,O).point,bn=Et(qt.last.point,O).point;if(m&&!c){const wn=Fi(f.writingMode,Xt,bn,ze);if(wn)return wn}vt=[qt.first];for(let wn=f.glyphStartIndex+1;wn<Nt-1;wn++)vt.push(Zt(Pe*G.getoffsetX(wn),qe,ut,c,ce,be,f.segment,bt,cn,Y,E,Ie));vt.push(qt.last)}else{if(m&&!c){const bt=Et(be,v).point,cn=f.lineStartIndex+f.segment+1,qt=new g.pointGeometry(Y.getx(cn),Y.gety(cn)),Xt=Et(qt,v),bn=Xt.signedDistanceFromCamera>0?Xt.point:hn(be,qt,bt,1,v),wn=Fi(f.writingMode,bt,bn,ze);if(wn)return wn}const Nt=Zt(Pe*G.getoffsetX(f.glyphStartIndex),qe,ut,c,ce,be,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,Y,E,Ie);if(!Nt)return{notEnoughRoom:!0};vt=[Nt]}for(const Nt of vt)g.addDynamicAttributes(oe,Nt.point,Nt.angle);return{}}function hn(f,i,c,m,v){const E=Et(f.add(f.sub(i)._unit()),v).point,O=c.sub(E);return c.add(O._mult(m/O.mag()))}function Zt(f,i,c,m,v,E,O,G,Y,oe,ce,be){const Ie=m?f-i:f+i;let ze=Ie>0?1:-1,Pe=0;m&&(ze*=-1,Pe=Math.PI),ze<0&&(Pe+=Math.PI);let qe=ze>0?G+O:G+O+1,ut=v,vt=v,Nt=0,bt=0;const cn=Math.abs(Ie),qt=[];for(;Nt+bt<=cn;){if(qe+=ze,qe<G||qe>=Y)return null;if(vt=ut,qt.push(ut),ut=be[qe],void 0===ut){const Cn=new g.pointGeometry(oe.getx(qe),oe.gety(qe)),Ii=Et(Cn,ce);if(Ii.signedDistanceFromCamera>0)ut=be[qe]=Ii.point;else{const qi=qe-ze;ut=hn(0===Nt?E:new g.pointGeometry(oe.getx(qi),oe.gety(qi)),Cn,vt,cn-Nt+1,ce)}}Nt+=bt,bt=vt.dist(ut)}const Xt=(cn-Nt)/bt,bn=ut.sub(vt),wn=bn.mult(Xt)._add(vt);wn._add(bn._unit()._perp()._mult(c*ze));const Ut=Pe+Math.atan2(ut.y-vt.y,ut.x-vt.x);return qt.push(wn),{point:wn,angle:Ut,path:qt}}const Oi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wn(f,i){for(let c=0;c<f;c++){const m=i.length;i.resize(m+4),i.float32.set(Oi,3*m)}}function Vn(f,i,c){const m=i[0],v=i[1];return f[0]=c[0]*m+c[4]*v+c[12],f[1]=c[1]*m+c[5]*v+c[13],f[3]=c[3]*m+c[7]*v+c[15],f}const Rt=100;class pt{constructor(i,c=new ie(i.width+200,i.height+200,25),m=new ie(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=m,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Rt,this.screenBottomBoundary=i.height+Rt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,c,m,v,E){const O=this.projectAndGetPerspectiveRatio(v,i.anchorPointX,i.anchorPointY),G=m*O.perspectiveRatio,Y=i.x1*G+O.point.x,oe=i.y1*G+O.point.y,ce=i.x2*G+O.point.x,be=i.y2*G+O.point.y;return!this.isInsideGrid(Y,oe,ce,be)||!c&&this.grid.hitTest(Y,oe,ce,be,E)?{box:[],offscreen:!1}:{box:[Y,oe,ce,be],offscreen:this.isOffscreen(Y,oe,ce,be)}}placeCollisionCircles(i,c,m,v,E,O,G,Y,oe,ce,be,Ie,ze){const Pe=[],qe=new g.pointGeometry(c.anchorX,c.anchorY),ut=Et(qe,O),vt=_t(this.transform.cameraToCenterDistance,ut.signedDistanceFromCamera),Nt=(ce?E/vt:E*vt)/g.ONE_EM,bt=Et(qe,G).point,cn=Hn(Nt,v,c.lineOffsetX*Nt,c.lineOffsetY*Nt,!1,bt,qe,c,m,G,{});let qt=!1,Xt=!1,bn=!0;if(cn){const wn=.5*Ie*vt+ze,Ut=new g.pointGeometry(-100,-100),Cn=new g.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ii=new N,qi=cn.first,Kr=cn.last;let cr=[];for(let lr=qi.path.length-1;lr>=1;lr--)cr.push(qi.path[lr]);for(let lr=1;lr<Kr.path.length;lr++)cr.push(Kr.path[lr]);const gi=2.5*wn;if(Y){const lr=cr.map(Qi=>Et(Qi,Y));cr=lr.some(Qi=>Qi.signedDistanceFromCamera<=0)?[]:lr.map(Qi=>Qi.point)}let hr=[];if(cr.length>0){const lr=cr[0].clone(),Qi=cr[0].clone();for(let Lr=1;Lr<cr.length;Lr++)lr.x=Math.min(lr.x,cr[Lr].x),lr.y=Math.min(lr.y,cr[Lr].y),Qi.x=Math.max(Qi.x,cr[Lr].x),Qi.y=Math.max(Qi.y,cr[Lr].y);hr=lr.x>=Ut.x&&Qi.x<=Cn.x&&lr.y>=Ut.y&&Qi.y<=Cn.y?[cr]:Qi.x<Ut.x||lr.x>Cn.x||Qi.y<Ut.y||lr.y>Cn.y?[]:g.clipLine([cr],Ut.x,Ut.y,Cn.x,Cn.y)}for(const lr of hr){Ii.reset(lr,.25*wn);let Qi=0;Qi=Ii.length<=.5*wn?1:Math.ceil(Ii.paddedLength/gi)+1;for(let Lr=0;Lr<Qi;Lr++){const ra=Lr/Math.max(Qi-1,1),Aa=Ii.lerp(ra),_a=Aa.x+Rt,ya=Aa.y+Rt;Pe.push(_a,ya,wn,0);const Ga=_a-wn,ss=ya-wn,Tr=_a+wn,yo=ya+wn;if(bn=bn&&this.isOffscreen(Ga,ss,Tr,yo),Xt=Xt||this.isInsideGrid(Ga,ss,Tr,yo),!i&&this.grid.hitTestCircle(_a,ya,wn,be)&&(qt=!0,!oe))return{circles:[],offscreen:!1,collisionDetected:qt}}}}return{circles:!oe&&qt||!Xt?[]:Pe,offscreen:bn,collisionDetected:qt}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const c=[];let m=1/0,v=1/0,E=-1/0,O=-1/0;for(const ce of i){const be=new g.pointGeometry(ce.x+Rt,ce.y+Rt);m=Math.min(m,be.x),v=Math.min(v,be.y),E=Math.max(E,be.x),O=Math.max(O,be.y),c.push(be)}const G=this.grid.query(m,v,E,O).concat(this.ignoredGrid.query(m,v,E,O)),Y={},oe={};for(const ce of G){const be=ce.key;if(void 0===Y[be.bucketInstanceId]&&(Y[be.bucketInstanceId]={}),Y[be.bucketInstanceId][be.featureIndex])continue;const Ie=[new g.pointGeometry(ce.x1,ce.y1),new g.pointGeometry(ce.x2,ce.y1),new g.pointGeometry(ce.x2,ce.y2),new g.pointGeometry(ce.x1,ce.y2)];g.polygonIntersectsPolygon(c,Ie)&&(Y[be.bucketInstanceId][be.featureIndex]=!0,void 0===oe[be.bucketInstanceId]&&(oe[be.bucketInstanceId]=[]),oe[be.bucketInstanceId].push(be.featureIndex))}return oe}insertCollisionBox(i,c,m,v,E){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:E},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,m,v,E){const O=c?this.ignoredGrid:this.grid,G={bucketInstanceId:m,featureIndex:v,collisionGroupID:E};for(let Y=0;Y<i.length;Y+=4)O.insertCircle(G,i[Y],i[Y+1],i[Y+2])}projectAndGetPerspectiveRatio(i,c,m){const v=g.fromValues(c,m,0,1);return Vn(v,v,i),{point:new g.pointGeometry((v[0]/v[3]+1)/2*this.transform.width+Rt,(-v[1]/v[3]+1)/2*this.transform.height+Rt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(i,c,m,v){return m<Rt||i>=this.screenRightBoundary||v<Rt||c>this.screenBottomBoundary}isInsideGrid(i,c,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=g.identity([]);return g.translate(i,i,[-100,-100,0]),i}}function we(f,i,c){return i*(g.EXTENT/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}class Ae{constructor(i,c,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return 0===this.opacity&&!this.placed}}class ye{constructor(i,c,m,v,E){this.text=new Ae(i?i.text:null,c,m,E),this.icon=new Ae(i?i.icon:null,c,v,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dt{constructor(i,c,m){this.text=i,this.icon=c,this.skipFade=m}}class It{constructor(){this.invProjMatrix=g.create(),this.viewportMatrix=g.create(),this.circles=[]}}class xn{constructor(i,c,m,v,E){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=E}}class Ei{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[i]}}function Gi(f,i,c,m,v){const{horizontalAlign:E,verticalAlign:O}=g.getAnchorAlignment(f),G=-(E-.5)*i,Y=-(O-.5)*c,oe=g.evaluateVariableOffset(f,m);return new g.pointGeometry(G+oe[0]*v,Y+oe[1]*v)}function er(f,i,c,m,v,E){const{x1:O,x2:G,y1:Y,y2:oe,anchorPointX:ce,anchorPointY:be}=f,Ie=new g.pointGeometry(i,c);return m&&Ie._rotate(v?E:-E),{x1:O+Ie.x,y1:Y+Ie.y,x2:G+Ie.x,y2:oe+Ie.y,anchorPointX:ce,anchorPointY:be}}class Tt{constructor(i,c,m,v){this.transform=i.clone(),this.collisionIndex=new pt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Ei(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,m,v){const E=m.getBucket(c),O=m.latestFeatureIndex;if(!E||!O||c.id!==E.layerIds[0])return;const G=m.collisionBoxArray,Y=E.layers[0].layout,oe=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),ce=m.tileSize/g.EXTENT,be=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),Ie="map"===Y.get("text-pitch-alignment"),ze="map"===Y.get("text-rotation-alignment"),Pe=we(m,1,this.transform.zoom),qe=fe(be,Ie,ze,this.transform,Pe);let ut=null;if(Ie){const Nt=nt(be,Ie,ze,this.transform,Pe);ut=g.multiply([],this.transform.labelPlaneMatrix,Nt)}this.retainedQueryData[E.bucketInstanceId]=new xn(E.bucketInstanceId,O,E.sourceLayerIndex,E.index,m.tileID);const vt={bucket:E,layout:Y,posMatrix:be,textLabelPlaneMatrix:qe,labelToScreenMatrix:ut,scale:oe,textPixelRatio:ce,holdingForFade:m.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:g.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(v)for(const Nt of E.sortKeyRanges){const{sortKey:bt,symbolInstanceStart:cn,symbolInstanceEnd:qt}=Nt;i.push({sortKey:bt,symbolInstanceStart:cn,symbolInstanceEnd:qt,parameters:vt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:vt})}attemptAnchorPlacement(i,c,m,v,E,O,G,Y,oe,ce,be,Ie,ze,Pe,qe){const ut=[Ie.textOffset0,Ie.textOffset1],vt=Gi(i,m,v,ut,E),Nt=this.collisionIndex.placeCollisionBox(er(c,vt.x,vt.y,O,G,this.transform.angle),be,Y,oe,ce.predicate);if((!qe||0!==this.collisionIndex.placeCollisionBox(er(qe,vt.x,vt.y,O,G,this.transform.angle),be,Y,oe,ce.predicate).box.length)&&Nt.box.length>0){let bt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID]&&this.prevPlacement.placements[Ie.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[Ie.crossTileID].anchor),this.variableOffsets[Ie.crossTileID]={textOffset:ut,width:m,height:v,anchor:i,textBoxScale:E,prevAnchor:bt},this.markUsedJustification(ze,i,Ie,Pe),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,Pe,Ie),this.placedOrientations[Ie.crossTileID]=Pe),{shift:vt,placedGlyphBoxes:Nt}}}placeLayerBucketPart(i,c,m){const{bucket:v,layout:E,posMatrix:O,textLabelPlaneMatrix:G,labelToScreenMatrix:Y,textPixelRatio:oe,holdingForFade:ce,collisionBoxArray:be,partiallyEvaluatedTextSize:Ie,collisionGroup:ze}=i.parameters,Pe=E.get("text-optional"),qe=E.get("icon-optional"),ut=E.get("text-allow-overlap"),vt=E.get("icon-allow-overlap"),Nt="map"===E.get("text-rotation-alignment"),bt="map"===E.get("text-pitch-alignment"),cn="none"!==E.get("icon-text-fit"),qt="viewport-y"===E.get("symbol-z-order"),Xt=ut&&(vt||!v.hasIconData()||qe),bn=vt&&(ut||!v.hasTextData()||Pe);!v.collisionArrays&&be&&v.deserializeCollisionBoxes(be);const wn=(Ut,Cn)=>{if(c[Ut.crossTileID])return;if(ce)return void(this.placements[Ut.crossTileID]=new dt(!1,!1,!1));let Ii=!1,qi=!1,Kr=!0,cr=null,gi={box:null,offscreen:null},hr={box:null,offscreen:null},lr=null,Qi=null,Lr=null,ra=0,Aa=0,_a=0;Cn.textFeatureIndex?ra=Cn.textFeatureIndex:Ut.useRuntimeCollisionCircles&&(ra=Ut.featureIndex),Cn.verticalTextFeatureIndex&&(Aa=Cn.verticalTextFeatureIndex);const ya=Cn.textBox;if(ya){const Tr=_r=>{let Uo=g.WritingMode.horizontal;if(v.allowVerticalPlacement&&!_r&&this.prevPlacement){const vs=this.prevPlacement.placedOrientations[Ut.crossTileID];vs&&(this.placedOrientations[Ut.crossTileID]=vs,Uo=vs,this.markUsedOrientation(v,Uo,Ut))}return Uo},yo=(_r,Uo)=>{if(v.allowVerticalPlacement&&Ut.numVerticalGlyphVertices>0&&Cn.verticalTextBox){for(const vs of v.writingModes)if(vs===g.WritingMode.vertical?(gi=Uo(),hr=gi):gi=_r(),gi&&gi.box&&gi.box.length)break}else gi=_r()};if(E.get("text-variable-anchor")){let _r=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ut.crossTileID]){const Cr=this.prevPlacement.variableOffsets[Ut.crossTileID];_r.indexOf(Cr.anchor)>0&&(_r=_r.filter(il=>il!==Cr.anchor),_r.unshift(Cr.anchor))}const Uo=(Cr,il,ic)=>{const rc=Cr.x2-Cr.x1,Jr=Cr.y2-Cr.y1,El=Ut.textBoxScale,Dl=cn&&!vt?il:null;let Gs={box:[],offscreen:!1};const ud=ut?2*_r.length:_r.length;for(let oa=0;oa<ud;++oa){const Ml=this.attemptAnchorPlacement(_r[oa%_r.length],Cr,rc,Jr,El,Nt,bt,oe,O,ze,oa>=_r.length,Ut,v,ic,Dl);if(Ml&&(Gs=Ml.placedGlyphBoxes,Gs&&Gs.box&&Gs.box.length)){Ii=!0,cr=Ml.shift;break}}return Gs};yo(()=>Uo(ya,Cn.iconBox,g.WritingMode.horizontal),()=>{const Cr=Cn.verticalTextBox;return v.allowVerticalPlacement&&!(gi&&gi.box&&gi.box.length)&&Ut.numVerticalGlyphVertices>0&&Cr?Uo(Cr,Cn.verticalIconBox,g.WritingMode.vertical):{box:null,offscreen:null}}),gi&&(Ii=gi.box,Kr=gi.offscreen);const vs=Tr(gi&&gi.box);if(!Ii&&this.prevPlacement){const Cr=this.prevPlacement.variableOffsets[Ut.crossTileID];Cr&&(this.variableOffsets[Ut.crossTileID]=Cr,this.markUsedJustification(v,Cr.anchor,Ut,vs))}}else{const _r=(Uo,vs)=>{const Cr=this.collisionIndex.placeCollisionBox(Uo,ut,oe,O,ze.predicate);return Cr&&Cr.box&&Cr.box.length&&(this.markUsedOrientation(v,vs,Ut),this.placedOrientations[Ut.crossTileID]=vs),Cr};yo(()=>_r(ya,g.WritingMode.horizontal),()=>{const Uo=Cn.verticalTextBox;return v.allowVerticalPlacement&&Ut.numVerticalGlyphVertices>0&&Uo?_r(Uo,g.WritingMode.vertical):{box:null,offscreen:null}}),Tr(gi&&gi.box&&gi.box.length)}}if(lr=gi,Ii=lr&&lr.box&&lr.box.length>0,Kr=lr&&lr.offscreen,Ut.useRuntimeCollisionCircles){const Tr=v.text.placedSymbolArray.get(Ut.centerJustifiedTextSymbolIndex),yo=g.evaluateSizeForFeature(v.textSizeData,Ie,Tr),_r=E.get("text-padding");Qi=this.collisionIndex.placeCollisionCircles(ut,Tr,v.lineVertexArray,v.glyphOffsetArray,yo,O,G,Y,m,bt,ze.predicate,Ut.collisionCircleDiameter,_r),Ii=ut||Qi.circles.length>0&&!Qi.collisionDetected,Kr=Kr&&Qi.offscreen}if(Cn.iconFeatureIndex&&(_a=Cn.iconFeatureIndex),Cn.iconBox){const Tr=yo=>{const _r=cn&&cr?er(yo,cr.x,cr.y,Nt,bt,this.transform.angle):yo;return this.collisionIndex.placeCollisionBox(_r,vt,oe,O,ze.predicate)};hr&&hr.box&&hr.box.length&&Cn.verticalIconBox?(Lr=Tr(Cn.verticalIconBox),qi=Lr.box.length>0):(Lr=Tr(Cn.iconBox),qi=Lr.box.length>0),Kr=Kr&&Lr.offscreen}const Ga=Pe||0===Ut.numHorizontalGlyphVertices&&0===Ut.numVerticalGlyphVertices,ss=qe||0===Ut.numIconVertices;if(Ga||ss?ss?Ga||(qi=qi&&Ii):Ii=qi&&Ii:qi=Ii=qi&&Ii,Ii&&lr&&lr.box&&this.collisionIndex.insertCollisionBox(lr.box,E.get("text-ignore-placement"),v.bucketInstanceId,hr&&hr.box&&Aa?Aa:ra,ze.ID),qi&&Lr&&this.collisionIndex.insertCollisionBox(Lr.box,E.get("icon-ignore-placement"),v.bucketInstanceId,_a,ze.ID),Qi&&(Ii&&this.collisionIndex.insertCollisionCircles(Qi.circles,E.get("text-ignore-placement"),v.bucketInstanceId,ra,ze.ID),m)){const Tr=v.bucketInstanceId;let yo=this.collisionCircleArrays[Tr];void 0===yo&&(yo=this.collisionCircleArrays[Tr]=new It);for(let _r=0;_r<Qi.circles.length;_r+=4)yo.circles.push(Qi.circles[_r+0]),yo.circles.push(Qi.circles[_r+1]),yo.circles.push(Qi.circles[_r+2]),yo.circles.push(Qi.collisionDetected?1:0)}this.placements[Ut.crossTileID]=new dt(Ii||Xt,qi||bn,Kr||v.justReloaded),c[Ut.crossTileID]=!0};if(qt){const Ut=v.getSortedSymbolIndexes(this.transform.angle);for(let Cn=Ut.length-1;Cn>=0;--Cn){const Ii=Ut[Cn];wn(v.symbolInstances.get(Ii),v.collisionArrays[Ii])}}else for(let Ut=i.symbolInstanceStart;Ut<i.symbolInstanceEnd;Ut++)wn(v.symbolInstances.get(Ut),v.collisionArrays[Ut]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Ut=this.collisionCircleArrays[v.bucketInstanceId];g.invert(Ut.invProjMatrix,O),Ut.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,c,m,v){let E;E=v===g.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[g.getAnchorJustification(c)];const O=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const G of O)G>=0&&(i.text.placedSymbolArray.get(G).crossTileID=E>=0&&G!==E?0:m.crossTileID)}markUsedOrientation(i,c,m){const v=c===g.WritingMode.horizontal||c===g.WritingMode.horizontalOnly?c:0,E=c===g.WritingMode.vertical?c:0,O=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const G of O)i.text.placedSymbolArray.get(G).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(i):1,E=c?c.opacities:{},O=c?c.variableOffsets:{},G=c?c.placedOrientations:{};for(const Y in this.placements){const oe=this.placements[Y],ce=E[Y];ce?(this.opacities[Y]=new ye(ce,v,oe.text,oe.icon),m=m||oe.text!==ce.text.placed||oe.icon!==ce.icon.placed):(this.opacities[Y]=new ye(null,v,oe.text,oe.icon,oe.skipFade),m=m||oe.text||oe.icon)}for(const Y in E){const oe=E[Y];if(!this.opacities[Y]){const ce=new ye(oe,v,!1,!1);ce.isHidden()||(this.opacities[Y]=ce,m=m||oe.text.placed||oe.icon.placed)}}for(const Y in O)this.variableOffsets[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.variableOffsets[Y]=O[Y]);for(const Y in G)this.placedOrientations[Y]||!this.opacities[Y]||this.opacities[Y].isHidden()||(this.placedOrientations[Y]=G[Y]);m?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const m={};for(const v of c){const E=v.getBucket(i);E&&v.latestFeatureIndex&&i.id===E.layerIds[0]&&this.updateBucketOpacities(E,m,v.collisionBoxArray)}}updateBucketOpacities(i,c,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,E=new ye(null,0,!1,!1,!0),O=v.get("text-allow-overlap"),G=v.get("icon-allow-overlap"),Y=v.get("text-variable-anchor"),oe="map"===v.get("text-rotation-alignment"),ce="map"===v.get("text-pitch-alignment"),be="none"!==v.get("icon-text-fit"),Ie=new ye(null,0,O&&(G||!i.hasIconData()||v.get("icon-optional")),G&&(O||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const ze=(Pe,qe,ut)=>{for(let vt=0;vt<qe/4;vt++)Pe.opacityVertexArray.emplaceBack(ut)};for(let Pe=0;Pe<i.symbolInstances.length;Pe++){const qe=i.symbolInstances.get(Pe),{numHorizontalGlyphVertices:ut,numVerticalGlyphVertices:vt,crossTileID:Nt}=qe;let bt=this.opacities[Nt];c[Nt]?bt=E:bt||(bt=Ie,this.opacities[Nt]=bt),c[Nt]=!0;const cn=qe.numIconVertices>0,qt=this.placedOrientations[qe.crossTileID],Xt=qt===g.WritingMode.vertical,bn=qt===g.WritingMode.horizontal||qt===g.WritingMode.horizontalOnly;if(ut>0||vt>0){const wn=We(bt.text);ze(i.text,ut,Xt?Xe:wn),ze(i.text,vt,bn?Xe:wn);const Ut=bt.text.isHidden();[qe.rightJustifiedTextSymbolIndex,qe.centerJustifiedTextSymbolIndex,qe.leftJustifiedTextSymbolIndex].forEach(qi=>{qi>=0&&(i.text.placedSymbolArray.get(qi).hidden=Ut||Xt?1:0)}),qe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(qe.verticalPlacedTextSymbolIndex).hidden=Ut||bn?1:0);const Cn=this.variableOffsets[qe.crossTileID];Cn&&this.markUsedJustification(i,Cn.anchor,qe,qt);const Ii=this.placedOrientations[qe.crossTileID];Ii&&(this.markUsedJustification(i,"left",qe,Ii),this.markUsedOrientation(i,Ii,qe))}if(cn){const wn=We(bt.icon),Ut=!(be&&qe.verticalPlacedIconSymbolIndex&&Xt);qe.placedIconSymbolIndex>=0&&(ze(i.icon,qe.numIconVertices,Ut?wn:Xe),i.icon.placedSymbolArray.get(qe.placedIconSymbolIndex).hidden=bt.icon.isHidden()),qe.verticalPlacedIconSymbolIndex>=0&&(ze(i.icon,qe.numVerticalIconVertices,Ut?Xe:wn),i.icon.placedSymbolArray.get(qe.verticalPlacedIconSymbolIndex).hidden=bt.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const wn=i.collisionArrays[Pe];if(wn){let Ut=new g.pointGeometry(0,0);if(wn.textBox||wn.verticalTextBox){let Ii=!0;if(Y){const qi=this.variableOffsets[Nt];qi?(Ut=Gi(qi.anchor,qi.width,qi.height,qi.textOffset,qi.textBoxScale),oe&&Ut._rotate(ce?this.transform.angle:-this.transform.angle)):Ii=!1}wn.textBox&&it(i.textCollisionBox.collisionVertexArray,bt.text.placed,!Ii||Xt,Ut.x,Ut.y),wn.verticalTextBox&&it(i.textCollisionBox.collisionVertexArray,bt.text.placed,!Ii||bn,Ut.x,Ut.y)}const Cn=Boolean(!bn&&wn.verticalIconBox);wn.iconBox&&it(i.iconCollisionBox.collisionVertexArray,bt.icon.placed,Cn,be?Ut.x:0,be?Ut.y:0),wn.verticalIconBox&&it(i.iconCollisionBox.collisionVertexArray,bt.icon.placed,!Cn,be?Ut.x:0,be?Ut.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Pe.invProjMatrix,i.placementViewportMatrix=Pe.viewportMatrix,i.collisionCircleArray=Pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function it(f,i,c,m,v){f.emplaceBack(i?1:0,c?1:0,m||0,v||0),f.emplaceBack(i?1:0,c?1:0,m||0,v||0),f.emplaceBack(i?1:0,c?1:0,m||0,v||0),f.emplaceBack(i?1:0,c?1:0,m||0,v||0)}const J=Math.pow(2,25),F=Math.pow(2,24),K=Math.pow(2,17),ge=Math.pow(2,16),De=Math.pow(2,9),ke=Math.pow(2,8),Je=Math.pow(2,1);function We(f){if(0===f.opacity&&!f.placed)return 0;if(1===f.opacity&&f.placed)return 4294967295;const i=f.placed?1:0,c=Math.floor(127*f.opacity);return c*J+i*F+c*K+i*ge+c*De+i*ke+c*Je+i}const Xe=0;class st{constructor(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,m,v,E){const O=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(O,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((G,Y)=>G.sortKey-Y.sortKey));this._currentPartIndex<O.length;)if(c.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,E())return!0;return!1}}class Lt{constructor(i,c,m,v,E,O,G){this.placement=new Tt(i,E,O,G),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,c,m){const v=g.exported.now(),E=()=>{const O=g.exported.now()-v;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=c[i[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if("symbol"===O.type&&(!O.minzoom||O.minzoom<=G)&&(!O.maxzoom||O.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new st(O)),this._inProgressLayer.continuePlacement(m[O.source],this.placement,this._showCollisionBoxes,O,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const tn=512/g.EXTENT/2;class Ft{constructor(i,c,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<c.length;v++){const E=c.get(v),O=E.key;this.indexedSymbolInstances[O]||(this.indexedSymbolInstances[O]=[]),this.indexedSymbolInstances[O].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,i)})}}getScaledCoordinates(i,c){const m=tn/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*g.EXTENT+i.anchorX)*m),y:Math.floor((c.canonical.y*g.EXTENT+i.anchorY)*m)}}findMatches(i,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<i.length;E++){const O=i.get(E);if(O.crossTileID)continue;const G=this.indexedSymbolInstances[O.key];if(!G)continue;const Y=this.getScaledCoordinates(O,c);for(const oe of G)if(Math.abs(oe.coord.x-Y.x)<=v&&Math.abs(oe.coord.y-Y.y)<=v&&!m[oe.crossTileID]){m[oe.crossTileID]=!0,O.crossTileID=oe.crossTileID;break}}}}class jt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class sn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(0!==c)for(const m in this.indexes){const v=this.indexes[m],E={};for(const O in v){const G=v[O];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+c),E[G.tileID.key]=G}this.indexes[m]=E}this.lng=i}addBucket(i,c,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const E in this.indexes){const O=this.indexes[E];if(Number(E)>i.overscaledZ)for(const G in O){const Y=O[G];Y.tileID.isChildOf(i)&&Y.findMatches(c.symbolInstances,i,v)}else{const G=O[i.scaledTo(Number(E)).key];G&&G.findMatches(c.symbolInstances,i,v)}}for(let E=0;E<c.symbolInstances.length;E++){const O=c.symbolInstances.get(E);O.crossTileID||(O.crossTileID=m.generate(),v[O.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ft(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const m in c.indexedSymbolInstances)for(const v of c.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const E in v)i[v[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[E]),delete v[E],c=!0)}return c}}class En{constructor(){this.layerIndexes={},this.crossTileIDs=new jt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,m){let v=this.layerIndexes[i.id];void 0===v&&(v=this.layerIndexes[i.id]=new sn);let E=!1;const O={};v.handleWrapJump(m);for(const G of c){const Y=G.getBucket(i);Y&&i.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(G.tileID,Y,this.crossTileIDs)&&(E=!0),O[Y.bucketInstanceId]=!0)}return v.removeStaleBuckets(O)&&(E=!0),E}pruneUnusedLayers(i){const c={};i.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const zn=(f,i)=>g.emitValidationErrors(f,i&&i.filter(c=>"source.canvas"!==c.identifier)),Li=g.pick(_i,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),li=g.pick(_i,["setCenter","setZoom","setBearing","setPitch"]),Ci=function(){const f={},i=g.spec.$version;for(const c in g.spec.$root){const m=g.spec.$root[c];if(m.required){let v=null;v="version"===c?i:"array"===m.type?[]:{},null!=v&&(f[c]=v)}}return f}();class Pn extends g.Evented{constructor(i,c={}){super(),this.map=i,this.dispatcher=new mt(Jn(),this),this.imageManager=new Ht,this.imageManager.setEventedParent(this),this.glyphManager=new rt(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new at(256,512),this.crossTileSymbolIndex=new En,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new g.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",g.getReferrer());const m=this;this._rtlTextPluginCallback=Pn.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(E,O)=>{if(g.triggerPluginCompletionEvent(E),O&&O.every(G=>G))for(const G in m.sourceCaches)m.sourceCaches[G].reload()})}),this.on("data",v=>{if("source"!==v.dataType||"metadata"!==v.sourceDataType)return;const E=this.sourceCaches[v.sourceId];if(!E)return;const O=E.getSource();if(O&&O.vectorLayerIds)for(const G in this._layers){const Y=this._layers[G];Y.source===O.id&&this._validateLayer(Y)}})}loadURL(i,c={}){this.fire(new g.Event("dataloading",{dataType:"style"}));const m="boolean"!=typeof c.validate||c.validate,v=this.map._requestManager.transformRequest(i,g.ResourceType.Style);this._request=g.getJSON(v,(E,O)=>{this._request=null,E?this.fire(new g.ErrorEvent(E)):O&&this._load(O,m)})}loadJSON(i,c={}){this.fire(new g.Event("dataloading",{dataType:"style"})),this._request=g.exported.frame(()=>{this._request=null,this._load(i,!1!==c.validate)})}loadEmpty(){this.fire(new g.Event("dataloading",{dataType:"style"})),this._load(Ci,!1)}_load(i,c){if(c&&zn(this,g.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const m=Xi(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=g.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Qt(this.stylesheet.light),this.fire(new g.Event("data",{dataType:"style"})),this.fire(new g.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(c,m,v){let E,O,G;const Y=devicePixelRatio>1?"@2x":"";let oe=g.getJSON(m.transformRequest(m.normalizeSpriteURL(c,Y,".json"),g.ResourceType.SpriteJSON),(Ie,ze)=>{oe=null,G||(G=Ie,E=ze,be())}),ce=g.getImage(m.transformRequest(m.normalizeSpriteURL(c,Y,".png"),g.ResourceType.SpriteImage),(Ie,ze)=>{ce=null,G||(G=Ie,O=ze,be())});function be(){if(G)v(G);else if(E&&O){const Ie=g.exported.getImageData(O),ze={};for(const Pe in E){const{width:qe,height:ut,x:vt,y:Nt,sdf:bt,pixelRatio:cn,stretchX:qt,stretchY:Xt,content:bn}=E[Pe],wn=new g.RGBAImage({width:qe,height:ut});g.RGBAImage.copy(Ie,wn,{x:vt,y:Nt},{x:0,y:0},{width:qe,height:ut}),ze[Pe]={data:wn,pixelRatio:cn,sdf:bt,stretchX:qt,stretchY:Xt,content:bn}}v(null,ze)}}return{cancel(){oe&&(oe.cancel(),oe=null),ce&&(ce.cancel(),ce=null)}}}(i,this.map._requestManager,(c,m)=>{if(this._spriteRequest=null,c)this.fire(new g.ErrorEvent(c));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))})}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const m=i.sourceLayer;if(!m)return;const v=c.getSource();("geojson"===v.type||v.vectorLayerIds&&-1===v.vectorLayerIds.indexOf(m))&&this.fire(new g.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const c=[];for(const m of i){const v=this._layers[m];"custom"!==v.type&&c.push(v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(v.length||E.length)&&this._updateWorkerLayers(v,E);for(const O in this._updatedSources){const G=this._updatedSources[O];"reload"===G?this._reloadSource(O):"clear"===G&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const E=this.sourceCaches[v];m[v]=E.used,E.used=!1}for(const v of this._order){const E=this._layers[v];E.recalculate(i,this._availableImages),!E.isHidden(i.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const v in m){const E=this.sourceCaches[v];m[v]!==E.used&&E.fire(new g.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new g.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),zn(this,g.validateStyle(i)))return!1;(i=g.clone$1(i)).layers=Xi(i.layers);const c=function(v,E){if(!v)return[{command:_i.setStyle,args:[E]}];let O=[];try{if(!Le(v.version,E.version))return[{command:_i.setStyle,args:[E]}];Le(v.center,E.center)||O.push({command:_i.setCenter,args:[E.center]}),Le(v.zoom,E.zoom)||O.push({command:_i.setZoom,args:[E.zoom]}),Le(v.bearing,E.bearing)||O.push({command:_i.setBearing,args:[E.bearing]}),Le(v.pitch,E.pitch)||O.push({command:_i.setPitch,args:[E.pitch]}),Le(v.sprite,E.sprite)||O.push({command:_i.setSprite,args:[E.sprite]}),Le(v.glyphs,E.glyphs)||O.push({command:_i.setGlyphs,args:[E.glyphs]}),Le(v.transition,E.transition)||O.push({command:_i.setTransition,args:[E.transition]}),Le(v.light,E.light)||O.push({command:_i.setLight,args:[E.light]});const G={},Y=[];!function(ce,be,Ie,ze){let Pe;for(Pe in be=be||{},ce=ce||{})Object.prototype.hasOwnProperty.call(ce,Pe)&&(Object.prototype.hasOwnProperty.call(be,Pe)||Xn(Pe,Ie,ze));for(Pe in be)Object.prototype.hasOwnProperty.call(be,Pe)&&(Object.prototype.hasOwnProperty.call(ce,Pe)?Le(ce[Pe],be[Pe])||("geojson"===ce[Pe].type&&"geojson"===be[Pe].type&&St(ce,be,Pe)?Ie.push({command:_i.setGeoJSONSourceData,args:[Pe,be[Pe].data]}):Zn(Pe,be,Ie,ze)):qn(Pe,be,Ie))}(v.sources,E.sources,Y,G);const oe=[];v.layers&&v.layers.forEach(ce=>{G[ce.source]?O.push({command:_i.removeLayer,args:[ce.id]}):oe.push(ce)}),O=O.concat(Y),function(ce,be,Ie){be=be||[];const ze=(ce=ce||[]).map(U),Pe=be.map(U),qe=ce.reduce(R,{}),ut=be.reduce(R,{}),vt=ze.slice(),Nt=Object.create(null);let bt,cn,qt,Xt,bn,wn,Ut;for(bt=0,cn=0;bt<ze.length;bt++)qt=ze[bt],Object.prototype.hasOwnProperty.call(ut,qt)?cn++:(Ie.push({command:_i.removeLayer,args:[qt]}),vt.splice(vt.indexOf(qt,cn),1));for(bt=0,cn=0;bt<Pe.length;bt++)qt=Pe[Pe.length-1-bt],vt[vt.length-1-bt]!==qt&&(Object.prototype.hasOwnProperty.call(qe,qt)?(Ie.push({command:_i.removeLayer,args:[qt]}),vt.splice(vt.lastIndexOf(qt,vt.length-cn),1)):cn++,wn=vt[vt.length-bt],Ie.push({command:_i.addLayer,args:[ut[qt],wn]}),vt.splice(vt.length-bt,0,qt),Nt[qt]=!0);for(bt=0;bt<Pe.length;bt++)if(qt=Pe[bt],Xt=qe[qt],bn=ut[qt],!Nt[qt]&&!Le(Xt,bn))if(Le(Xt.source,bn.source)&&Le(Xt["source-layer"],bn["source-layer"])&&Le(Xt.type,bn.type)){for(Ut in $(Xt.layout,bn.layout,Ie,qt,null,_i.setLayoutProperty),$(Xt.paint,bn.paint,Ie,qt,null,_i.setPaintProperty),Le(Xt.filter,bn.filter)||Ie.push({command:_i.setFilter,args:[qt,bn.filter]}),Le(Xt.minzoom,bn.minzoom)&&Le(Xt.maxzoom,bn.maxzoom)||Ie.push({command:_i.setLayerZoomRange,args:[qt,bn.minzoom,bn.maxzoom]}),Xt)Object.prototype.hasOwnProperty.call(Xt,Ut)&&"layout"!==Ut&&"paint"!==Ut&&"filter"!==Ut&&"metadata"!==Ut&&"minzoom"!==Ut&&"maxzoom"!==Ut&&(0===Ut.indexOf("paint.")?$(Xt[Ut],bn[Ut],Ie,qt,Ut.slice(6),_i.setPaintProperty):Le(Xt[Ut],bn[Ut])||Ie.push({command:_i.setLayerProperty,args:[qt,Ut,bn[Ut]]}));for(Ut in bn)Object.prototype.hasOwnProperty.call(bn,Ut)&&!Object.prototype.hasOwnProperty.call(Xt,Ut)&&"layout"!==Ut&&"paint"!==Ut&&"filter"!==Ut&&"metadata"!==Ut&&"minzoom"!==Ut&&"maxzoom"!==Ut&&(0===Ut.indexOf("paint.")?$(Xt[Ut],bn[Ut],Ie,qt,Ut.slice(6),_i.setPaintProperty):Le(Xt[Ut],bn[Ut])||Ie.push({command:_i.setLayerProperty,args:[qt,Ut,bn[Ut]]}))}else Ie.push({command:_i.removeLayer,args:[qt]}),wn=vt[vt.lastIndexOf(qt)+1],Ie.push({command:_i.addLayer,args:[bn,wn]})}(oe,E.layers,O)}catch(G){console.warn("Unable to compute style diff:",G),O=[{command:_i.setStyle,args:[E]}]}return O}(this.serialize(),i).filter(v=>!(v.command in li));if(0===c.length)return!1;const m=c.filter(v=>!(v.command in Li));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return c.forEach(v=>{"setTransition"!==v.command&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,c){if(this.getImage(i))return this.fire(new g.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new g.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new g.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,m={}){if(this._checkLoaded(),void 0!==this.sourceCaches[i])throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(g.validateStyle.source,`sources.${i}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[i]=new In(i,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i})),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),void 0===this.sourceCaches[i])throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new g.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new g.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.clearTiles(),c.onRemove&&c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){this._checkLoaded(),this.sourceCaches[i].getSource().setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new g.ErrorEvent(new Error(`Layer "${v}" already exists on this map.`)));let E;if("custom"===i.type){if(zn(this,g.validateCustomStyleLayer(i)))return;E=g.createStyleLayer(i)}else{if("object"==typeof i.source&&(this.addSource(v,i.source),i=g.clone$1(i),i=g.extend(i,{source:v})),this._validate(g.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;E=g.createStyleLayer(i),this._validateLayer(E),E.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[E.id]=E.serialize()}const O=c?this._order.indexOf(c):this._order.length;if(c&&-1===O)this.fire(new g.ErrorEvent(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(O,0,v),this._layerOrderChanged=!0,this._layers[v]=E,this._removedLayers[v]&&E.source&&"custom"!==E.type){const G=this._removedLayers[v];delete this._removedLayers[v],G.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new g.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&-1===v?this.fire(new g.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new g.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===c&&v.maxzoom===m||(null!=c&&(v.minzoom=c),null!=m&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new g.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!Le(v.filter,c))return null==c?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(g.validateStyle.filter,`layers.${v.id}.filter`,c,null,m)||(v.filter=g.clone$1(c),this._updateLayer(v)))}else this.fire(new g.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return g.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?Le(E.getLayoutProperty(c),m)||(E.setLayoutProperty(c,m,v),this._updateLayer(E)):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const m=this.getLayer(i);if(m)return m.getLayoutProperty(c);this.fire(new g.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,m,v={}){this._checkLoaded();const E=this.getLayer(i);E?Le(E.getPaintProperty(c),m)||(E.setPaintProperty(c,m,v)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new g.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const m=i.source,v=i.sourceLayer,E=this.sourceCaches[m];if(void 0===E)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const O=E.getSource().type;"geojson"===O&&v?this.fire(new g.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==O||v?(void 0===i.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(v,i.id,c)):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const m=i.source,v=this.sourceCaches[m];if(void 0===v)return void this.fire(new g.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const E=v.getSource().type,O="vector"===E?i.sourceLayer:void 0;"vector"!==E||O?c&&"string"!=typeof i.id&&"number"!=typeof i.id?this.fire(new g.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(O,i.id,c):this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,m=i.sourceLayer,v=this.sourceCaches[c];if(void 0!==v)return"vector"!==v.getSource().type||m?(void 0===i.id&&this.fire(new g.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new g.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new g.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return g.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return g.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:g.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>void 0!==i)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&"raster"!==this.sourceCaches[i.source].getSource().type&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=O=>"fill-extrusion"===this._layers[O].type,m={},v=[];for(let O=this._order.length-1;O>=0;O--){const G=this._order[O];if(c(G)){m[G]=O;for(const Y of i){const oe=Y[G];if(oe)for(const ce of oe)v.push(ce)}}}v.sort((O,G)=>G.intersectionZ-O.intersectionZ);const E=[];for(let O=this._order.length-1;O>=0;O--){const G=this._order[O];if(c(G))for(let Y=v.length-1;Y>=0;Y--){const oe=v[Y].feature;if(m[oe.layer.id]<O)break;E.push(oe),v.pop()}else for(const Y of i){const oe=Y[G];if(oe)for(const ce of oe)E.push(ce.feature)}}return E}queryRenderedFeatures(i,c,m){c&&c.filter&&this._validate(g.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new g.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of c.layers){const G=this._layers[O];if(!G)return this.fire(new g.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];v[G.source]=!0}}const E=[];c.availableImages=this._availableImages;for(const O in this.sourceCaches)c.layers&&!v[O]||E.push(Rn(this.sourceCaches[O],this._layers,this._serializedLayers,i,c,m));return this.placement&&E.push(function(O,G,Y,oe,ce,be,Ie){const ze={},Pe=be.queryRenderedSymbols(oe),qe=[];for(const ut of Object.keys(Pe).map(Number))qe.push(Ie[ut]);qe.sort(ki);for(const ut of qe){const vt=ut.featureIndex.lookupSymbolFeatures(Pe[ut.bucketInstanceId],G,ut.bucketIndex,ut.sourceLayerIndex,ce.filter,ce.layers,ce.availableImages,O);for(const Nt in vt){const bt=ze[Nt]=ze[Nt]||[],cn=vt[Nt];cn.sort((qt,Xt)=>{const bn=ut.featureSortOrder;if(bn){const wn=bn.indexOf(qt.featureIndex);return bn.indexOf(Xt.featureIndex)-wn}return Xt.featureIndex-qt.featureIndex});for(const qt of cn)bt.push(qt)}}for(const ut in ze)ze[ut].forEach(vt=>{const Nt=vt.feature,bt=Y[O[ut].source].getFeatureState(Nt.layer["source-layer"],Nt.id);Nt.source=Nt.layer.source,Nt.layer["source-layer"]&&(Nt.sourceLayer=Nt.layer["source-layer"]),Nt.state=bt});return ze}(this._layers,this._serializedLayers,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(i,c){c&&c.filter&&this._validate(g.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[i];return m?function(v,E){const O=v.getRenderableIds().map(oe=>v.getTileByID(oe)),G=[],Y={};for(let oe=0;oe<O.length;oe++){const ce=O[oe],be=ce.tileID.canonical.key;Y[be]||(Y[be]=!0,ce.querySourceFeatures(G,E))}return G}(m,c):[]}addSourceType(i,c,m){return Pn.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(Pn.setSourceType(i,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const O in i)if(!Le(i[O],m[O])){v=!0;break}if(!v)return;const E={now:g.exported.now(),transition:g.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(E)}_validate(i,c,m,v,E={}){return(!E||!1!==E.validate)&&zn(this,i.call(g.validateStyle,g.extend({key:c,style:this.serialize(),value:m,styleSpec:g.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),g.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,m,v,E=!1){let O=!1,G=!1;const Y={};for(const oe of this._order){const ce=this._layers[oe];if("symbol"!==ce.type)continue;if(!Y[ce.source]){const Ie=this.sourceCaches[ce.source];Y[ce.source]=Ie.getRenderableIds(!0).map(ze=>Ie.getTileByID(ze)).sort((ze,Pe)=>Pe.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(Pe.tileID)?-1:1))}const be=this.crossTileSymbolIndex.addLayer(ce,Y[ce.source],i.center.lng);O=O||be}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||0===m)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.exported.now(),i.zoom))&&(this.pauseablePlacement=new Lt(i,this._order,E,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Y),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.exported.now()),G=!0),O&&this.pauseablePlacement.placement.setStale()),G||O)for(const oe of this._order){const ce=this._layers[oe];"symbol"===ce.type&&this.placement.updateLayerOpacities(ce,Y[ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];v&&v.setDependencies(c.tileID.key,c.type,c.icons)}getGlyphs(i,c,m){this.glyphManager.getGlyphs(c.stacks,m)}getResource(i,c,m){return g.makeRequest(c,m)}}Pn.getSourceType=function(f){return Ui[f]},Pn.setSourceType=function(f,i){Ui[f]=i},Pn.registerForPluginStateChange=g.registerForPluginStateChange;var pi=g.createLayout([{name:"a_pos",type:"Int16",components:2}]),rr={prelude:An("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),background:An("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:An("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:An("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:An("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:An("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:An("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:An("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:An("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:An("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:An("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:An("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:An("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:An("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:An("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:An("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:An("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:An("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:An("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:An("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:An("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:An("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:An("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:An("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:An("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:An("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")};function An(f,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/attribute ([\w]+) ([\w]+)/g),v=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=E?E.concat(v):v,G={};return{fragmentSource:f=f.replace(c,(Y,oe,ce,be,Ie)=>(G[Ie]=!0,"define"===oe?`\n#ifndef HAS_UNIFORM_u_${Ie}\nvarying ${ce} ${be} ${Ie};\n#else\nuniform ${ce} ${be} u_${Ie};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Ie}\n    ${ce} ${be} ${Ie} = u_${Ie};\n#endif\n`)),vertexSource:i=i.replace(c,(Y,oe,ce,be,Ie)=>{const ze="float"===be?"vec2":"vec4",Pe=Ie.match(/color/)?"color":ze;return G[Ie]?"define"===oe?`\n#ifndef HAS_UNIFORM_u_${Ie}\nuniform lowp float u_${Ie}_t;\nattribute ${ce} ${ze} a_${Ie};\nvarying ${ce} ${be} ${Ie};\n#else\nuniform ${ce} ${be} u_${Ie};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${Ie} = a_${Ie};\n#else\n    ${ce} ${be} ${Ie} = u_${Ie};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${Ie} = unpack_mix_${Pe}(a_${Ie}, u_${Ie}_t);\n#else\n    ${ce} ${be} ${Ie} = u_${Ie};\n#endif\n`:"define"===oe?`\n#ifndef HAS_UNIFORM_u_${Ie}\nuniform lowp float u_${Ie}_t;\nattribute ${ce} ${ze} a_${Ie};\n#else\nuniform ${ce} ${be} u_${Ie};\n#endif\n`:"vec4"===Pe?`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${ce} ${be} ${Ie} = a_${Ie};\n#else\n    ${ce} ${be} ${Ie} = u_${Ie};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Ie}\n    ${ce} ${be} ${Ie} = unpack_mix_${Pe}(a_${Ie}, u_${Ie}_t);\n#else\n    ${ce} ${be} ${Ie} = u_${Ie};\n#endif\n`}),staticAttributes:m,staticUniforms:O}}class br{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,m,v,E,O,G,Y){this.context=i;let oe=this.boundPaintVertexBuffers.length!==v.length;for(let ce=0;!oe&&ce<v.length;ce++)this.boundPaintVertexBuffers[ce]!==v[ce]&&(oe=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===m&&!oe&&this.boundIndexBuffer===E&&this.boundVertexOffset===O&&this.boundDynamicVertexBuffer===G&&this.boundDynamicVertexBuffer2===Y?(i.bindVertexArrayOES.set(this.vao),G&&G.bind(),E&&E.dynamicDraw&&E.bind(),Y&&Y.bind()):this.freshBind(c,m,v,E,O,G,Y)}freshBind(i,c,m,v,E,O,G){let Y;const oe=i.numAttributes,ce=this.context,be=ce.gl;if(ce.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ce.extVertexArrayObject.createVertexArrayOES(),ce.bindVertexArrayOES.set(this.vao),Y=0,this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=G;else{Y=ce.currentNumAttributes||0;for(let Ie=oe;Ie<Y;Ie++)be.disableVertexAttribArray(Ie)}c.enableAttributes(be,i);for(const Ie of m)Ie.enableAttributes(be,i);O&&O.enableAttributes(be,i),G&&G.enableAttributes(be,i),c.bind(),c.setVertexAttribPointers(be,i,E);for(const Ie of m)Ie.bind(),Ie.setVertexAttribPointers(be,i,E);O&&(O.bind(),O.setVertexAttribPointers(be,i,E)),v&&v.bind(),G&&(G.bind(),G.setVertexAttribPointers(be,i,E)),ce.currentNumAttributes=oe}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pr(f){const i=[];for(let c=0;c<f.length;c++){if(null===f[c])continue;const m=f[c].split(" ");i.push(m.pop())}return i}class Qo{constructor(i,c,m,v,E,O){const G=i.gl;this.program=G.createProgram();const Y=pr(m.staticAttributes),oe=v?v.getBinderAttributes():[],ce=Y.concat(oe),be=m.staticUniforms?pr(m.staticUniforms):[],Ie=v?v.getBinderUniforms():[],ze=be.concat(Ie),Pe=[];for(const qt of ze)Pe.indexOf(qt)<0&&Pe.push(qt);const qe=v?v.defines():[];O&&qe.push("#define OVERDRAW_INSPECTOR;");const ut=qe.concat(rr.prelude.fragmentSource,m.fragmentSource).join("\n"),vt=qe.concat(rr.prelude.vertexSource,m.vertexSource).join("\n"),Nt=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);G.shaderSource(Nt,ut),G.compileShader(Nt),G.attachShader(this.program,Nt);const bt=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);G.shaderSource(bt,vt),G.compileShader(bt),G.attachShader(this.program,bt),this.attributes={};const cn={};this.numAttributes=ce.length;for(let qt=0;qt<this.numAttributes;qt++)ce[qt]&&(G.bindAttribLocation(this.program,qt,ce[qt]),this.attributes[ce[qt]]=qt);G.linkProgram(this.program),G.deleteShader(bt),G.deleteShader(Nt);for(let qt=0;qt<Pe.length;qt++){const Xt=Pe[qt];if(Xt&&!cn[Xt]){const bn=G.getUniformLocation(this.program,Xt);bn&&(cn[Xt]=bn)}}this.fixedUniforms=E(i,cn),this.binderUniforms=v?v.getUniforms(i,cn):[]}draw(i,c,m,v,E,O,G,Y,oe,ce,be,Ie,ze,Pe,qe,ut){const vt=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(E),i.setCullFace(O);for(const bt in this.fixedUniforms)this.fixedUniforms[bt].set(G[bt]);Pe&&Pe.setUniforms(i,this.binderUniforms,Ie,{zoom:ze});const Nt={[vt.LINES]:2,[vt.TRIANGLES]:3,[vt.LINE_STRIP]:1}[c];for(const bt of be.get()){const cn=bt.vaos||(bt.vaos={});(cn[Y]||(cn[Y]=new br)).bind(i,this,oe,Pe?Pe.getPaintVertexBuffers():[],ce,bt.vertexOffset,qe,ut),vt.drawElements(c,bt.primitiveLength*Nt,vt.UNSIGNED_SHORT,bt.primitiveOffset*Nt*2)}}}function $o(f,i,c){const m=1/we(c,1,i.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,i.transform.tileZoom)/v,O=E*(c.tileID.canonical.x+c.tileID.wrap*v),G=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[O>>16,G>>16],u_pixel_coord_lower:[65535&O,65535&G]}}const Mr=(f,i,c,m)=>{const v=i.style.light,E=v.properties.get("position"),O=gt(E.x,E.y,E.z),G=(oe=new g.ARRAY_TYPE(9),g.ARRAY_TYPE!=Float32Array&&(oe[1]=0,oe[2]=0,oe[3]=0,oe[5]=0,oe[6]=0,oe[7]=0),oe[0]=1,oe[4]=1,oe[8]=1,oe);var oe;"viewport"===v.properties.get("anchor")&&function(oe,ce){var be=Math.sin(ce),Ie=Math.cos(ce);oe[0]=Ie,oe[1]=be,oe[2]=0,oe[3]=-be,oe[4]=Ie,oe[5]=0,oe[6]=0,oe[7]=0,oe[8]=1}(G,-i.transform.angle),function(oe,ce,be){var Ie=ce[0],ze=ce[1],Pe=ce[2];oe[0]=Ie*be[0]+ze*be[3]+Pe*be[6],oe[1]=Ie*be[1]+ze*be[4]+Pe*be[7],oe[2]=Ie*be[2]+ze*be[5]+Pe*be[8]}(O,O,G);const Y=v.properties.get("color");return{u_matrix:f,u_lightpos:O,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+c,u_opacity:m}},ao=(f,i,c,m,v,E,O)=>g.extend(Mr(f,i,c,m),$o(E,i,O),{u_height_factor:-Math.pow(2,v.overscaledZ)/O.tileSize/8}),Lo=f=>({u_matrix:f}),dr=(f,i,c,m)=>g.extend(Lo(f),$o(c,i,m)),$i=(f,i)=>({u_matrix:f,u_world:i}),lo=(f,i,c,m,v)=>g.extend(dr(f,i,c,m),{u_world:v}),Zo=(f,i,c,m)=>{const v=f.transform;let E,O;if("map"===m.paint.get("circle-pitch-alignment")){const G=we(c,1,v.zoom);E=!0,O=[G,G]}else E=!1,O=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+("map"===m.paint.get("circle-pitch-scale")),u_matrix:f.translatePosMatrix(i.posMatrix,c,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:devicePixelRatio,u_extrude_scale:O}},Rr=(f,i,c)=>{const m=we(c,1,i.zoom),v=Math.pow(2,i.zoom-c.tileID.overscaledZ),E=c.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[i.pixelsToGLUnits[0]/(m*v),i.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:E}},Zr=(f,i,c=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:c}),cs=f=>({u_matrix:f}),zs=(f,i,c,m)=>({u_matrix:f,u_extrude_scale:we(i,1,c),u_intensity:m});function to(f,i){const c=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new g.MercatorCoordinate(0,m/c).toLngLat().lat,new g.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}const xr=(f,i,c)=>{const m=f.transform;return{u_matrix:qr(f,i,c),u_ratio:1/we(i,1,m.zoom),u_device_pixel_ratio:devicePixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},us=(f,i,c,m)=>g.extend(xr(f,i,c),{u_image:0,u_image_height:m}),ds=(f,i,c,m)=>{const v=f.transform,E=Ur(i,v);return{u_matrix:qr(f,i,c),u_texsize:i.imageAtlasTexture.size,u_ratio:1/we(i,1,v.zoom),u_device_pixel_ratio:devicePixelRatio,u_image:0,u_scale:[E,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},bo=(f,i,c,m,v)=>{const E=f.lineAtlas,O=Ur(i,f.transform),G="round"===c.layout.get("line-cap"),Y=E.getDash(m.from,G),oe=E.getDash(m.to,G),ce=Y.width*v.fromScale,be=oe.width*v.toScale;return g.extend(xr(f,i,c),{u_patternscale_a:[O/ce,-Y.height/2],u_patternscale_b:[O/be,-oe.height/2],u_sdfgamma:E.width/(256*Math.min(ce,be)*devicePixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:oe.y,u_mix:v.t})};function Ur(f,i){return 1/we(f,1,i.tileZoom)}function qr(f,i,c){return f.translatePosMatrix(i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const No=(f,i,c,m,v)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(O=v.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(E=v.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Ss(v.paint.get("raster-hue-rotate"))};var E,O};function Ss(f){f*=Math.PI/180;const i=Math.sin(f),c=Math.cos(f);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Ir=(f,i,c,m,v,E,O,G,Y,oe)=>{const ce=v.transform;return{u_is_size_zoom_constant:+("constant"===f||"source"===f),u_is_size_feature_constant:+("constant"===f||"camera"===f),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ce.width/ce.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:O,u_coord_matrix:G,u_is_text:+Y,u_pitch_with_map:+m,u_texsize:oe,u_texture:0}},Xo=(f,i,c,m,v,E,O,G,Y,oe,ce)=>{const be=v.transform;return g.extend(Ir(f,i,c,m,v,E,O,G,Y,oe),{u_gamma_scale:m?Math.cos(be._pitch)*be.cameraToCenterDistance:1,u_device_pixel_ratio:devicePixelRatio,u_is_halo:+ce})},Vs=(f,i,c,m,v,E,O,G,Y,oe)=>g.extend(Xo(f,i,c,m,v,E,O,G,!0,Y,!0),{u_texsize_icon:oe,u_texture_icon:1}),Ts=(f,i,c)=>({u_matrix:f,u_opacity:i,u_color:c}),As=(f,i,c,m,v,E)=>g.extend(function(O,G,Y,oe){const ce=Y.imageManager.getPattern(O.from.toString()),be=Y.imageManager.getPattern(O.to.toString()),{width:Ie,height:ze}=Y.imageManager.getPixelSize(),Pe=Math.pow(2,oe.tileID.overscaledZ),qe=oe.tileSize*Math.pow(2,Y.transform.tileZoom)/Pe,ut=qe*(oe.tileID.canonical.x+oe.tileID.wrap*Pe),vt=qe*oe.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ce.tl,u_pattern_br_a:ce.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[Ie,ze],u_mix:G.t,u_pattern_size_a:ce.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:G.fromScale,u_scale_b:G.toScale,u_tile_units_to_pixels:1/we(oe,1,Y.transform.tileZoom),u_pixel_coord_upper:[ut>>16,vt>>16],u_pixel_coord_lower:[65535&ut,65535&vt]}}(m,E,c,v),{u_matrix:f,u_opacity:i}),no={fillExtrusion:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_lightpos:new g.Uniform3f(f,i.u_lightpos),u_lightintensity:new g.Uniform1f(f,i.u_lightintensity),u_lightcolor:new g.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new g.Uniform1f(f,i.u_vertical_gradient),u_opacity:new g.Uniform1f(f,i.u_opacity)}),fillExtrusionPattern:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_lightpos:new g.Uniform3f(f,i.u_lightpos),u_lightintensity:new g.Uniform1f(f,i.u_lightintensity),u_lightcolor:new g.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new g.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new g.Uniform1f(f,i.u_height_factor),u_image:new g.Uniform1i(f,i.u_image),u_texsize:new g.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new g.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new g.Uniform3f(f,i.u_scale),u_fade:new g.Uniform1f(f,i.u_fade),u_opacity:new g.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_image:new g.Uniform1i(f,i.u_image),u_texsize:new g.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new g.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new g.Uniform3f(f,i.u_scale),u_fade:new g.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_world:new g.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_world:new g.Uniform2f(f,i.u_world),u_image:new g.Uniform1i(f,i.u_image),u_texsize:new g.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new g.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new g.Uniform3f(f,i.u_scale),u_fade:new g.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_scale_with_map:new g.Uniform1i(f,i.u_scale_with_map),u_pitch_with_map:new g.Uniform1i(f,i.u_pitch_with_map),u_extrude_scale:new g.Uniform2f(f,i.u_extrude_scale),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new g.UniformMatrix4f(f,i.u_matrix)}),collisionBox:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_pixels_to_tile_units:new g.Uniform1f(f,i.u_pixels_to_tile_units),u_extrude_scale:new g.Uniform2f(f,i.u_extrude_scale),u_overscale_factor:new g.Uniform1f(f,i.u_overscale_factor)}),collisionCircle:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new g.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new g.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new g.UniformColor(f,i.u_color),u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_overlay:new g.Uniform1i(f,i.u_overlay),u_overlay_scale:new g.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new g.Uniform1f(f,i.u_extrude_scale),u_intensity:new g.Uniform1f(f,i.u_intensity),u_matrix:new g.UniformMatrix4f(f,i.u_matrix)}),heatmapTexture:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_world:new g.Uniform2f(f,i.u_world),u_image:new g.Uniform1i(f,i.u_image),u_color_ramp:new g.Uniform1i(f,i.u_color_ramp),u_opacity:new g.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_image:new g.Uniform1i(f,i.u_image),u_latrange:new g.Uniform2f(f,i.u_latrange),u_light:new g.Uniform2f(f,i.u_light),u_shadow:new g.UniformColor(f,i.u_shadow),u_highlight:new g.UniformColor(f,i.u_highlight),u_accent:new g.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_image:new g.Uniform1i(f,i.u_image),u_dimension:new g.Uniform2f(f,i.u_dimension),u_zoom:new g.Uniform1f(f,i.u_zoom),u_unpack:new g.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_ratio:new g.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(f,i.u_units_to_pixels)}),lineGradient:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_ratio:new g.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(f,i.u_units_to_pixels),u_image:new g.Uniform1i(f,i.u_image),u_image_height:new g.Uniform1f(f,i.u_image_height)}),linePattern:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_texsize:new g.Uniform2f(f,i.u_texsize),u_ratio:new g.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_image:new g.Uniform1i(f,i.u_image),u_units_to_pixels:new g.Uniform2f(f,i.u_units_to_pixels),u_scale:new g.Uniform3f(f,i.u_scale),u_fade:new g.Uniform1f(f,i.u_fade)}),lineSDF:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_ratio:new g.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new g.Uniform2f(f,i.u_units_to_pixels),u_patternscale_a:new g.Uniform2f(f,i.u_patternscale_a),u_patternscale_b:new g.Uniform2f(f,i.u_patternscale_b),u_sdfgamma:new g.Uniform1f(f,i.u_sdfgamma),u_image:new g.Uniform1i(f,i.u_image),u_tex_y_a:new g.Uniform1f(f,i.u_tex_y_a),u_tex_y_b:new g.Uniform1f(f,i.u_tex_y_b),u_mix:new g.Uniform1f(f,i.u_mix)}),raster:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new g.Uniform2f(f,i.u_tl_parent),u_scale_parent:new g.Uniform1f(f,i.u_scale_parent),u_buffer_scale:new g.Uniform1f(f,i.u_buffer_scale),u_fade_t:new g.Uniform1f(f,i.u_fade_t),u_opacity:new g.Uniform1f(f,i.u_opacity),u_image0:new g.Uniform1i(f,i.u_image0),u_image1:new g.Uniform1i(f,i.u_image1),u_brightness_low:new g.Uniform1f(f,i.u_brightness_low),u_brightness_high:new g.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new g.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new g.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new g.Uniform3f(f,i.u_spin_weights)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new g.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new g.Uniform1f(f,i.u_size_t),u_size:new g.Uniform1f(f,i.u_size),u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new g.Uniform1f(f,i.u_pitch),u_rotate_symbol:new g.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new g.Uniform1f(f,i.u_fade_change),u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new g.Uniform1i(f,i.u_is_text),u_pitch_with_map:new g.Uniform1i(f,i.u_pitch_with_map),u_texsize:new g.Uniform2f(f,i.u_texsize),u_texture:new g.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new g.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new g.Uniform1f(f,i.u_size_t),u_size:new g.Uniform1f(f,i.u_size),u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new g.Uniform1f(f,i.u_pitch),u_rotate_symbol:new g.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new g.Uniform1f(f,i.u_fade_change),u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new g.Uniform1i(f,i.u_is_text),u_pitch_with_map:new g.Uniform1i(f,i.u_pitch_with_map),u_texsize:new g.Uniform2f(f,i.u_texsize),u_texture:new g.Uniform1i(f,i.u_texture),u_gamma_scale:new g.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new g.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new g.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new g.Uniform1f(f,i.u_size_t),u_size:new g.Uniform1f(f,i.u_size),u_camera_to_center_distance:new g.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new g.Uniform1f(f,i.u_pitch),u_rotate_symbol:new g.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new g.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new g.Uniform1f(f,i.u_fade_change),u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new g.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new g.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new g.Uniform1i(f,i.u_is_text),u_pitch_with_map:new g.Uniform1i(f,i.u_pitch_with_map),u_texsize:new g.Uniform2f(f,i.u_texsize),u_texsize_icon:new g.Uniform2f(f,i.u_texsize_icon),u_texture:new g.Uniform1i(f,i.u_texture),u_texture_icon:new g.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new g.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new g.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new g.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_opacity:new g.Uniform1f(f,i.u_opacity),u_color:new g.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new g.UniformMatrix4f(f,i.u_matrix),u_opacity:new g.Uniform1f(f,i.u_opacity),u_image:new g.Uniform1i(f,i.u_image),u_pattern_tl_a:new g.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new g.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new g.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new g.Uniform2f(f,i.u_pattern_br_b),u_texsize:new g.Uniform2f(f,i.u_texsize),u_mix:new g.Uniform1f(f,i.u_mix),u_pattern_size_a:new g.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new g.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new g.Uniform1f(f,i.u_scale_a),u_scale_b:new g.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new g.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new g.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new g.Uniform1f(f,i.u_tile_units_to_pixels)})};class da{constructor(i,c,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ha{constructor(i,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=i;const E=i.gl;this.buffer=E.createBuffer(),i.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];void 0!==v&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,c,m){for(let v=0;v<this.attributes.length;v++){const E=this.attributes[v],O=c.attributes[E.name];void 0!==O&&i.vertexAttribPointer(O,E.components,i[Rs[E.type]],!1,this.itemSize,E.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class tr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Us extends tr{getDefault(){return g.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class es extends tr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class mo extends tr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Da extends tr{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class co extends tr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class za extends tr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Io extends tr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class hs extends tr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class qo extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class Pr extends tr{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class xo extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class ps extends tr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Bo extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class ts extends tr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class fs extends tr{getDefault(){return g.Color.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ns extends tr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Fs extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class uo extends tr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Is extends tr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ls extends tr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class ho extends tr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class is extends tr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ps extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class js extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class fr extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ea extends tr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ma extends tr{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Or extends tr{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class te extends tr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ve extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class ne extends tr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ee extends tr{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class ct extends Ee{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Yt extends Ee{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class un{constructor(i,c,m,v){this.context=i,this.width=c,this.height=m;const E=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new ct(i,E),v&&(this.depthAttachment=new Yt(i,E))}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class Mn{constructor(i,c,m){this.blendFunction=i,this.blendColor=c,this.mask=m}}Mn.Replace=[1,0],Mn.disabled=new Mn(Mn.Replace,g.Color.transparent,[!1,!1,!1,!1]),Mn.unblended=new Mn(Mn.Replace,g.Color.transparent,[!0,!0,!0,!0]),Mn.alphaBlended=new Mn([1,771],g.Color.transparent,[!0,!0,!0,!0]);class Di{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Us(this),this.clearDepth=new es(this),this.clearStencil=new mo(this),this.colorMask=new Da(this),this.depthMask=new co(this),this.stencilMask=new za(this),this.stencilFunc=new Io(this),this.stencilOp=new hs(this),this.stencilTest=new qo(this),this.depthRange=new Pr(this),this.depthTest=new xo(this),this.depthFunc=new ps(this),this.blend=new Bo(this),this.blendFunc=new ts(this),this.blendColor=new fs(this),this.blendEquation=new ns(this),this.cullFace=new Fs(this),this.cullFaceSide=new uo(this),this.frontFace=new Is(this),this.program=new Ls(this),this.activeTexture=new ho(this),this.viewport=new is(this),this.bindFramebuffer=new Ps(this),this.bindRenderbuffer=new js(this),this.bindTexture=new fr(this),this.bindVertexBuffer=new ea(this),this.bindElementBuffer=new Ma(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Or(this),this.pixelStoreUnpack=new te(this),this.pixelStoreUnpackPremultiplyAlpha=new ve(this),this.pixelStoreUnpackFlipY=new ne(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new da(this,i,c)}createVertexBuffer(i,c,m){return new ha(this,i,c,m)}createRenderbuffer(i,c,m){const v=this.gl,E=v.createRenderbuffer();return this.bindRenderbuffer.set(E),v.renderbufferStorage(v.RENDERBUFFER,i,c,m),this.bindRenderbuffer.set(null),E}createFramebuffer(i,c,m){return new un(this,i,c,m)}clear({color:i,depth:c}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),void 0!==c&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m.clear(v)}setCullFace(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){Le(i.blendFunction,Mn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ai{constructor(i,c,m){this.func=i,this.mask=c,this.range=m}}ai.ReadOnly=!1,ai.ReadWrite=!0,ai.disabled=new ai(519,ai.ReadOnly,[0,1]);class ci{constructor(i,c,m,v,E,O){this.test=i,this.ref=c,this.mask=m,this.fail=v,this.depthFail=E,this.pass=O}}ci.disabled=new ci({func:519,mask:0},0,0,7680,7680,7680);class Q{constructor(i,c,m){this.enable=i,this.mode=c,this.frontFace=m}}let W;function B(f,i,c,m,v,E,O){const G=f.context,Y=G.gl,oe=f.useProgram("collisionBox"),ce=[];let be=0,Ie=0;for(let bt=0;bt<m.length;bt++){const cn=m[bt],qt=i.getTile(cn),Xt=qt.getBucket(c);if(!Xt)continue;let bn=cn.posMatrix;0===v[0]&&0===v[1]||(bn=f.translatePosMatrix(cn.posMatrix,qt,v,E));const wn=O?Xt.textCollisionBox:Xt.iconCollisionBox,Ut=Xt.collisionCircleArray;if(Ut.length>0){const Cn=g.create(),Ii=bn;g.mul(Cn,Xt.placementInvProjMatrix,f.transform.glCoordMatrix),g.mul(Cn,Cn,Xt.placementViewportMatrix),ce.push({circleArray:Ut,circleOffset:Ie,transform:Ii,invTransform:Cn}),be+=Ut.length/4,Ie=be}wn&&oe.draw(G,Y.LINES,ai.disabled,ci.disabled,f.colorModeForRenderPass(),Q.disabled,Rr(bn,f.transform,qt),c.id,wn.layoutVertexBuffer,wn.indexBuffer,wn.segments,null,f.transform.zoom,null,null,wn.collisionVertexBuffer)}if(!O||!ce.length)return;const ze=f.useProgram("collisionCircle"),Pe=new g.CollisionCircleLayoutArray;Pe.resize(4*be),Pe._trim();let qe=0;for(const bt of ce)for(let cn=0;cn<bt.circleArray.length/4;cn++){const qt=4*cn,Xt=bt.circleArray[qt+0],bn=bt.circleArray[qt+1],wn=bt.circleArray[qt+2],Ut=bt.circleArray[qt+3];Pe.emplace(qe++,Xt,bn,wn,Ut,0),Pe.emplace(qe++,Xt,bn,wn,Ut,1),Pe.emplace(qe++,Xt,bn,wn,Ut,2),Pe.emplace(qe++,Xt,bn,wn,Ut,3)}(!W||W.length<2*be)&&(W=function(bt){const cn=2*bt,qt=new g.QuadTriangleArray;qt.resize(cn),qt._trim();for(let Xt=0;Xt<cn;Xt++){const bn=6*Xt;qt.uint16[bn+0]=4*Xt+0,qt.uint16[bn+1]=4*Xt+1,qt.uint16[bn+2]=4*Xt+2,qt.uint16[bn+3]=4*Xt+2,qt.uint16[bn+4]=4*Xt+3,qt.uint16[bn+5]=4*Xt+0}return qt}(be));const ut=G.createIndexBuffer(W,!0),vt=G.createVertexBuffer(Pe,g.collisionCircleLayout.members,!0);for(const bt of ce){const cn={u_matrix:bt.transform,u_inv_matrix:bt.invTransform,u_camera_to_center_distance:(Nt=f.transform).cameraToCenterDistance,u_viewport_size:[Nt.width,Nt.height]};ze.draw(G,Y.TRIANGLES,ai.disabled,ci.disabled,f.colorModeForRenderPass(),Q.disabled,cn,c.id,vt,ut,g.SegmentVector.simpleSegment(0,2*bt.circleOffset,bt.circleArray.length,bt.circleArray.length/2),null,f.transform.zoom,null,null,null)}var Nt;vt.destroy(),ut.destroy()}Q.disabled=new Q(!1,1029,2305),Q.backCCW=new Q(!0,1029,2305);const Me=g.identity(new Float32Array(16));function $t(f,i,c,m,v,E){const{horizontalAlign:O,verticalAlign:G}=g.getAnchorAlignment(f),Y=-(O-.5)*i,oe=-(G-.5)*c,ce=g.evaluateVariableOffset(f,m);return new g.pointGeometry((Y/v+ce[0])*E,(oe/v+ce[1])*E)}function fi(f,i,c,m,v,E,O,G,Y,oe,ce){const be=f.text.placedSymbolArray,Ie=f.text.dynamicLayoutVertexArray,ze=f.icon.dynamicLayoutVertexArray,Pe={};Ie.clear();for(let qe=0;qe<be.length;qe++){const ut=be.get(qe),vt=f.allowVerticalPlacement&&!ut.placedOrientation,Nt=ut.hidden||!ut.crossTileID||vt?null:m[ut.crossTileID];if(Nt){const bt=new g.pointGeometry(ut.anchorX,ut.anchorY),cn=Et(bt,c?G:O),qt=_t(E.cameraToCenterDistance,cn.signedDistanceFromCamera);let Xt=v.evaluateSizeForFeature(f.textSizeData,oe,ut)*qt/g.ONE_EM;c&&(Xt*=f.tilePixelRatio/Y);const{width:bn,height:wn,anchor:Ut,textOffset:Cn,textBoxScale:Ii}=Nt,qi=$t(Ut,bn,wn,Cn,Ii,Xt),Kr=c?Et(bt.add(qi),O).point:cn.point.add(i?qi.rotate(-E.angle):qi),cr=f.allowVerticalPlacement&&ut.placedOrientation===g.WritingMode.vertical?Math.PI/2:0;for(let gi=0;gi<ut.numGlyphs;gi++)g.addDynamicAttributes(Ie,Kr,cr);ce&&ut.associatedIconIndex>=0&&(Pe[ut.associatedIconIndex]={shiftedAnchor:Kr,angle:cr})}else Wn(ut.numGlyphs,Ie)}if(ce){ze.clear();const qe=f.icon.placedSymbolArray;for(let ut=0;ut<qe.length;ut++){const vt=qe.get(ut);if(vt.hidden)Wn(vt.numGlyphs,ze);else{const Nt=Pe[ut];if(Nt)for(let bt=0;bt<vt.numGlyphs;bt++)g.addDynamicAttributes(ze,Nt.shiftedAnchor,Nt.angle);else Wn(vt.numGlyphs,ze)}}f.icon.dynamicLayoutVertexBuffer.updateData(ze)}f.text.dynamicLayoutVertexBuffer.updateData(Ie)}function gr(f,i,c){return c.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function jr(f,i,c,m,v,E,O,G,Y,oe,ce,be){const Ie=f.context,ze=Ie.gl,Pe=f.transform,qe="map"===G,ut="map"===Y,vt=qe&&"point"!==c.layout.get("symbol-placement"),Nt=qe&&!ut&&!vt,bt=!c.layout.get("symbol-sort-key").isConstant();let cn=!1;const qt=f.depthModeForSublayer(0,ai.ReadOnly),Xt=c.layout.get("text-variable-anchor"),bn=[];for(const wn of m){const Ut=i.getTile(wn),Cn=Ut.getBucket(c);if(!Cn)continue;const Ii=v?Cn.text:Cn.icon;if(!Ii||!Ii.segments.get().length)continue;const qi=Ii.programConfigurations.get(c.id),Kr=v||Cn.sdfIcons,cr=v?Cn.textSizeData:Cn.iconSizeData,gi=ut||0!==Pe.pitch,hr=f.useProgram(gr(Kr,v,Cn),qi),lr=g.evaluateSizeForZoom(cr,Pe.zoom);let Qi,Lr,ra,Aa,_a=[0,0],ya=null;if(v){if(Lr=Ut.glyphAtlasTexture,ra=ze.LINEAR,Qi=Ut.glyphAtlasTexture.size,Cn.iconsInText){_a=Ut.imageAtlasTexture.size,ya=Ut.imageAtlasTexture;const Jr="composite"===cr.kind||"camera"===cr.kind;Aa=gi||f.options.rotating||f.options.zooming||Jr?ze.LINEAR:ze.NEAREST}}else{const Jr=1!==c.layout.get("icon-size").constantOr(0)||Cn.iconsNeedLinear;Lr=Ut.imageAtlasTexture,ra=Kr||f.options.rotating||f.options.zooming||Jr||gi?ze.LINEAR:ze.NEAREST,Qi=Ut.imageAtlasTexture.size}const Ga=we(Ut,1,f.transform.zoom),ss=fe(wn.posMatrix,ut,qe,f.transform,Ga),Tr=nt(wn.posMatrix,ut,qe,f.transform,Ga),yo=Xt&&Cn.hasTextData(),_r="none"!==c.layout.get("icon-text-fit")&&yo&&Cn.hasIconData();vt&&_n(Cn,wn.posMatrix,f,v,ss,Tr,ut,oe);const Uo=f.translatePosMatrix(wn.posMatrix,Ut,E,O),vs=vt||v&&Xt||_r?Me:ss,Cr=f.translatePosMatrix(Tr,Ut,E,O,!0),il=Kr&&0!==c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1);let ic;ic=Kr?Cn.iconsInText?Vs(cr.kind,lr,Nt,ut,f,Uo,vs,Cr,Qi,_a):Xo(cr.kind,lr,Nt,ut,f,Uo,vs,Cr,v,Qi,!0):Ir(cr.kind,lr,Nt,ut,f,Uo,vs,Cr,v,Qi);const rc={program:hr,buffers:Ii,uniformValues:ic,atlasTexture:Lr,atlasTextureIcon:ya,atlasInterpolation:ra,atlasInterpolationIcon:Aa,isSDF:Kr,hasHalo:il};if(bt&&Cn.canOverlap){cn=!0;const Jr=Ii.segments.get();for(const El of Jr)bn.push({segments:new g.SegmentVector([El]),sortKey:El.sortKey,state:rc})}else bn.push({segments:Ii.segments,sortKey:0,state:rc})}cn&&bn.sort((wn,Ut)=>wn.sortKey-Ut.sortKey);for(const wn of bn){const Ut=wn.state;if(Ie.activeTexture.set(ze.TEXTURE0),Ut.atlasTexture.bind(Ut.atlasInterpolation,ze.CLAMP_TO_EDGE),Ut.atlasTextureIcon&&(Ie.activeTexture.set(ze.TEXTURE1),Ut.atlasTextureIcon&&Ut.atlasTextureIcon.bind(Ut.atlasInterpolationIcon,ze.CLAMP_TO_EDGE)),Ut.isSDF){const Cn=Ut.uniformValues;Ut.hasHalo&&(Cn.u_is_halo=1,ms(Ut.buffers,wn.segments,c,f,Ut.program,qt,ce,be,Cn)),Cn.u_is_halo=0}ms(Ut.buffers,wn.segments,c,f,Ut.program,qt,ce,be,Ut.uniformValues)}}function ms(f,i,c,m,v,E,O,G,Y){const oe=m.context;v.draw(oe,oe.gl.TRIANGLES,E,O,G,Q.disabled,Y,c.id,f.layoutVertexBuffer,f.indexBuffer,i,c.paint,m.transform.zoom,f.programConfigurations.get(c.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function wo(f,i,c,m,v,E,O){const G=f.context.gl,Y=c.paint.get("fill-pattern"),oe=Y&&Y.constantOr(1),ce=c.getCrossfadeParameters();let be,Ie,ze,Pe,qe;O?(Ie=oe&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",be=G.LINES):(Ie=oe?"fillPattern":"fill",be=G.TRIANGLES);for(const ut of m){const vt=i.getTile(ut);if(oe&&!vt.patternsLoaded())continue;const Nt=vt.getBucket(c);if(!Nt)continue;const bt=Nt.programConfigurations.get(c.id),cn=f.useProgram(Ie,bt);oe&&(f.context.activeTexture.set(G.TEXTURE0),vt.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),bt.updatePaintBuffers(ce));const qt=Y.constantOr(null);if(qt&&vt.imageAtlas){const bn=vt.imageAtlas,wn=bn.patternPositions[qt.to.toString()],Ut=bn.patternPositions[qt.from.toString()];wn&&Ut&&bt.setConstantPatternPositions(wn,Ut)}const Xt=f.translatePosMatrix(ut.posMatrix,vt,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(O){Pe=Nt.indexBuffer2,qe=Nt.segments2;const bn=[G.drawingBufferWidth,G.drawingBufferHeight];ze="fillOutlinePattern"===Ie&&oe?lo(Xt,f,ce,vt,bn):$i(Xt,bn)}else Pe=Nt.indexBuffer,qe=Nt.segments,ze=oe?dr(Xt,f,ce,vt):Lo(Xt);cn.draw(f.context,be,v,f.stencilModeForClipping(ut),E,Q.disabled,ze,c.id,Nt.layoutVertexBuffer,Pe,qe,c.paint,f.transform.zoom,bt)}}function mn(f,i,c,m,v,E,O){const G=f.context,Y=G.gl,oe=c.paint.get("fill-extrusion-pattern"),ce=oe.constantOr(1),be=c.getCrossfadeParameters(),Ie=c.paint.get("fill-extrusion-opacity");for(const ze of m){const Pe=i.getTile(ze),qe=Pe.getBucket(c);if(!qe)continue;const ut=qe.programConfigurations.get(c.id),vt=f.useProgram(ce?"fillExtrusionPattern":"fillExtrusion",ut);ce&&(f.context.activeTexture.set(Y.TEXTURE0),Pe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),ut.updatePaintBuffers(be));const Nt=oe.constantOr(null);if(Nt&&Pe.imageAtlas){const Xt=Pe.imageAtlas,bn=Xt.patternPositions[Nt.to.toString()],wn=Xt.patternPositions[Nt.from.toString()];bn&&wn&&ut.setConstantPatternPositions(bn,wn)}const bt=f.translatePosMatrix(ze.posMatrix,Pe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),cn=c.paint.get("fill-extrusion-vertical-gradient"),qt=ce?ao(bt,f,cn,Ie,ze,be,Pe):Mr(bt,f,cn,Ie);vt.draw(G,G.gl.TRIANGLES,v,E,O,Q.backCCW,qt,c.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,c.paint,f.transform.zoom,ut)}}function ue(f,i,c,m,v,E){const O=f.context,G=O.gl,Y=i.fbo;if(!Y)return;const oe=f.useProgram("hillshade");O.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,Y.colorAttachment.get());const ce=((be,Ie,ze)=>{const Pe=ze.paint.get("hillshade-shadow-color"),qe=ze.paint.get("hillshade-highlight-color"),ut=ze.paint.get("hillshade-accent-color");let vt=ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ze.paint.get("hillshade-illumination-anchor")&&(vt-=be.transform.angle);const Nt=!be.options.moving;return{u_matrix:be.transform.calculatePosMatrix(Ie.tileID.toUnwrapped(),Nt),u_image:0,u_latrange:to(0,Ie.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),vt],u_shadow:Pe,u_highlight:qe,u_accent:ut}})(f,i,c);oe.draw(O,G.TRIANGLES,m,v,E,Q.disabled,ce,c.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function M(f,i,c,m,v,E){const O=f.context,G=O.gl,Y=i.dem;if(Y&&Y.data){const oe=Y.dim,ce=Y.stride,be=Y.getPixels();if(O.activeTexture.set(G.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(ce),i.demTexture){const ze=i.demTexture;ze.update(be,{premultiply:!1}),ze.bind(G.NEAREST,G.CLAMP_TO_EDGE)}else i.demTexture=new He(O,be,G.RGBA,{premultiply:!1}),i.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);O.activeTexture.set(G.TEXTURE0);let Ie=i.fbo;if(!Ie){const ze=new He(O,{width:oe,height:oe,data:null},G.RGBA);ze.bind(G.LINEAR,G.CLAMP_TO_EDGE),Ie=i.fbo=O.createFramebuffer(oe,oe,!0),Ie.colorAttachment.set(ze.texture)}O.bindFramebuffer.set(Ie.framebuffer),O.viewport.set([0,0,oe,oe]),f.useProgram("hillshadePrepare").draw(O,G.TRIANGLES,m,v,E,Q.disabled,((ze,Pe)=>{const qe=Pe.stride,ut=g.create();return g.ortho(ut,0,g.EXTENT,-g.EXTENT,0,0,1),g.translate(ut,ut,[0,-g.EXTENT,0]),{u_matrix:ut,u_image:1,u_dimension:[qe,qe],u_zoom:ze.overscaledZ,u_unpack:Pe.getUnpackVector()}})(i.tileID,Y),c.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function S(f,i,c,m,v){const E=m.paint.get("raster-fade-duration");if(E>0){const O=g.exported.now(),G=(O-f.timeAdded)/E,Y=i?(O-i.timeAdded)/E:-1,oe=c.getSource(),ce=v.coveringZoomLevel({tileSize:oe.tileSize,roundZoom:oe.roundZoom}),be=!i||Math.abs(i.tileID.overscaledZ-ce)>Math.abs(f.tileID.overscaledZ-ce),Ie=be&&f.refreshedUponExpiration?1:g.clamp(be?G:1-Y,0,1);return f.refreshedUponExpiration&&G>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Ie}:{opacity:Ie,mix:0}}return{opacity:1,mix:0}}const j=new g.Color(1,0,0,1),de=new g.Color(0,1,0,1),Se=new g.Color(0,0,1,1),Ge=new g.Color(1,0,1,1),ot=new g.Color(0,1,1,1);function Pt(f,i,c,m){Tn(f,0,i+c/2,f.transform.width,c,m)}function rn(f,i,c,m){Tn(f,i-c/2,0,c,f.transform.height,m)}function Tn(f,i,c,m,v,E){const O=f.context,G=O.gl;G.enable(G.SCISSOR_TEST),G.scissor(i*devicePixelRatio,c*devicePixelRatio,m*devicePixelRatio,v*devicePixelRatio),O.clear({color:E}),G.disable(G.SCISSOR_TEST)}function ni(f,i,c){const m=f.context,v=m.gl,E=c.posMatrix,O=f.useProgram("debug"),G=ai.disabled,Y=ci.disabled,oe=f.colorModeForRenderPass();m.activeTexture.set(v.TEXTURE0),f.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),O.draw(m,v.LINE_STRIP,G,Y,oe,Q.disabled,Zr(E,g.Color.red),"$debug",f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);const be=i.getTileByID(c.key).latestRawTileData,Ie=Math.floor((be&&be.byteLength||0)/1024),ze=i.getTile(c).tileSize,Pe=512/Math.min(ze,512)*(c.overscaledZ/f.transform.zoom)*.5;let qe=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(qe+=` => ${c.overscaledZ}`),function(ut,vt){ut.initDebugOverlayCanvas();const Nt=ut.debugOverlayCanvas,bt=ut.context.gl,cn=ut.debugOverlayCanvas.getContext("2d");cn.clearRect(0,0,Nt.width,Nt.height),cn.shadowColor="white",cn.shadowBlur=2,cn.lineWidth=1.5,cn.strokeStyle="white",cn.textBaseline="top",cn.font="bold 36px Open Sans, sans-serif",cn.fillText(vt,5,5),cn.strokeText(vt,5,5),ut.debugOverlayTexture.update(Nt),ut.debugOverlayTexture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE)}(f,`${qe} ${Ie}kb`),O.draw(m,v.TRIANGLES,G,Y,Mn.alphaBlended,Q.disabled,Zr(E,g.Color.transparent,Pe),"$debug",f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}const yi={symbol:function(f,i,c,m,v){if("translucent"!==f.renderPass)return;const E=ci.disabled,O=f.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(G,Y,oe,ce,be,Ie,ze){const Pe=Y.transform,qe="map"===be,ut="map"===Ie;for(const vt of G){const Nt=ce.getTile(vt),bt=Nt.getBucket(oe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const cn=g.evaluateSizeForZoom(bt.textSizeData,Pe.zoom),qt=we(Nt,1,Y.transform.zoom),Xt=fe(vt.posMatrix,ut,qe,Y.transform,qt),bn="none"!==oe.layout.get("icon-text-fit")&&bt.hasIconData();if(cn){const wn=Math.pow(2,Pe.zoom-Nt.tileID.overscaledZ);fi(bt,qe,ut,ze,g.symbolSize,Pe,Xt,vt.posMatrix,wn,cn,bn)}}}(m,f,c,i,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),v),0!==c.paint.get("icon-opacity").constantOr(1)&&jr(f,i,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),E,O),0!==c.paint.get("text-opacity").constantOr(1)&&jr(f,i,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),E,O),i.map.showCollisionBoxes&&(B(f,i,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),B(f,i,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,c,m){if("translucent"!==f.renderPass)return;const v=c.paint.get("circle-opacity"),E=c.paint.get("circle-stroke-width"),O=c.paint.get("circle-stroke-opacity"),G=!c.layout.get("circle-sort-key").isConstant();if(0===v.constantOr(1)&&(0===E.constantOr(1)||0===O.constantOr(1)))return;const Y=f.context,oe=Y.gl,ce=f.depthModeForSublayer(0,ai.ReadOnly),be=ci.disabled,Ie=f.colorModeForRenderPass(),ze=[];for(let Pe=0;Pe<m.length;Pe++){const qe=m[Pe],ut=i.getTile(qe),vt=ut.getBucket(c);if(!vt)continue;const Nt=vt.programConfigurations.get(c.id),bt={programConfiguration:Nt,program:f.useProgram("circle",Nt),layoutVertexBuffer:vt.layoutVertexBuffer,indexBuffer:vt.indexBuffer,uniformValues:Zo(f,qe,ut,c)};if(G){const cn=vt.segments.get();for(const qt of cn)ze.push({segments:new g.SegmentVector([qt]),sortKey:qt.sortKey,state:bt})}else ze.push({segments:vt.segments,sortKey:0,state:bt})}G&&ze.sort((Pe,qe)=>Pe.sortKey-qe.sortKey);for(const Pe of ze){const{programConfiguration:qe,program:ut,layoutVertexBuffer:vt,indexBuffer:Nt,uniformValues:bt}=Pe.state;ut.draw(Y,oe.TRIANGLES,ce,be,Ie,Q.disabled,bt,c.id,vt,Nt,Pe.segments,c.paint,f.transform.zoom,qe)}},heatmap:function(f,i,c,m){if(0!==c.paint.get("heatmap-opacity"))if("offscreen"===f.renderPass){const v=f.context,E=v.gl,O=ci.disabled,G=new Mn([E.ONE,E.ONE],g.Color.transparent,[!0,!0,!0,!0]);(function(Y,oe,ce){const be=Y.gl;Y.activeTexture.set(be.TEXTURE1),Y.viewport.set([0,0,oe.width/4,oe.height/4]);let Ie=ce.heatmapFbo;if(Ie)be.bindTexture(be.TEXTURE_2D,Ie.colorAttachment.get()),Y.bindFramebuffer.set(Ie.framebuffer);else{const ze=be.createTexture();be.bindTexture(be.TEXTURE_2D,ze),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_WRAP_S,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_WRAP_T,be.CLAMP_TO_EDGE),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_MIN_FILTER,be.LINEAR),be.texParameteri(be.TEXTURE_2D,be.TEXTURE_MAG_FILTER,be.LINEAR),Ie=ce.heatmapFbo=Y.createFramebuffer(oe.width/4,oe.height/4,!1),function(Pe,qe,ut,vt){const Nt=Pe.gl;Nt.texImage2D(Nt.TEXTURE_2D,0,Nt.RGBA,qe.width/4,qe.height/4,0,Nt.RGBA,Pe.extRenderToTextureHalfFloat?Pe.extTextureHalfFloat.HALF_FLOAT_OES:Nt.UNSIGNED_BYTE,null),vt.colorAttachment.set(ut)}(Y,oe,ze,Ie)}})(v,f,c),v.clear({color:g.Color.transparent});for(let Y=0;Y<m.length;Y++){const oe=m[Y];if(i.hasRenderableParent(oe))continue;const ce=i.getTile(oe),be=ce.getBucket(c);if(!be)continue;const Ie=be.programConfigurations.get(c.id),ze=f.useProgram("heatmap",Ie),{zoom:Pe}=f.transform;ze.draw(v,E.TRIANGLES,ai.disabled,O,G,Q.disabled,zs(oe.posMatrix,ce,Pe,c.paint.get("heatmap-intensity")),c.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,c.paint,f.transform.zoom,Ie)}v.viewport.set([0,0,f.width,f.height])}else"translucent"===f.renderPass&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,E){const O=v.context,G=O.gl,Y=E.heatmapFbo;if(!Y)return;O.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,Y.colorAttachment.get()),O.activeTexture.set(G.TEXTURE1);let oe=E.colorRampTexture;oe||(oe=E.colorRampTexture=new He(O,E.colorRamp,G.RGBA)),oe.bind(G.LINEAR,G.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(O,G.TRIANGLES,ai.disabled,ci.disabled,v.colorModeForRenderPass(),Q.disabled,((ce,be,Ie,ze)=>{const Pe=g.create();g.ortho(Pe,0,ce.width,ce.height,0,0,1);const qe=ce.context.gl;return{u_matrix:Pe,u_world:[qe.drawingBufferWidth,qe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:be.paint.get("heatmap-opacity")}})(v,E),E.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,E.paint,v.transform.zoom)}(f,c))},line:function(f,i,c,m){if("translucent"!==f.renderPass)return;const v=c.paint.get("line-opacity"),E=c.paint.get("line-width");if(0===v.constantOr(1)||0===E.constantOr(1))return;const O=f.depthModeForSublayer(0,ai.ReadOnly),G=f.colorModeForRenderPass(),Y=c.paint.get("line-dasharray"),oe=c.paint.get("line-pattern"),ce=oe.constantOr(1),be=c.paint.get("line-gradient"),Ie=c.getCrossfadeParameters(),ze=ce?"linePattern":Y?"lineSDF":be?"lineGradient":"line",Pe=f.context,qe=Pe.gl;let ut=!0;for(const vt of m){const Nt=i.getTile(vt);if(ce&&!Nt.patternsLoaded())continue;const bt=Nt.getBucket(c);if(!bt)continue;const cn=bt.programConfigurations.get(c.id),qt=f.context.program.get(),Xt=f.useProgram(ze,cn),bn=ut||Xt.program!==qt,wn=oe.constantOr(null);if(wn&&Nt.imageAtlas){const Cn=Nt.imageAtlas,Ii=Cn.patternPositions[wn.to.toString()],qi=Cn.patternPositions[wn.from.toString()];Ii&&qi&&cn.setConstantPatternPositions(Ii,qi)}const Ut=ce?ds(f,Nt,c,Ie):Y?bo(f,Nt,c,Y,Ie):be?us(f,Nt,c,bt.lineClipsArray.length):xr(f,Nt,c);if(ce)Pe.activeTexture.set(qe.TEXTURE0),Nt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),cn.updatePaintBuffers(Ie);else if(Y&&(bn||f.lineAtlas.dirty))Pe.activeTexture.set(qe.TEXTURE0),f.lineAtlas.bind(Pe);else if(be){const Cn=bt.gradients[c.id];let Ii=Cn.texture;if(c.gradientVersion!==Cn.version){let qi=256;if(c.stepInterpolant){const Kr=i.getSource().maxzoom,cr=vt.canonical.z===Kr?Math.ceil(1<<f.transform.maxZoom-vt.canonical.z):1;qi=g.clamp(g.nextPowerOfTwo(bt.maxLineLength/g.EXTENT*1024*cr),256,Pe.maxTextureSize)}Cn.gradient=g.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:qi,image:Cn.gradient||void 0,clips:bt.lineClipsArray}),Cn.texture?Cn.texture.update(Cn.gradient):Cn.texture=new He(Pe,Cn.gradient,qe.RGBA),Cn.version=c.gradientVersion,Ii=Cn.texture}Pe.activeTexture.set(qe.TEXTURE0),Ii.bind(c.stepInterpolant?qe.NEAREST:qe.LINEAR,qe.CLAMP_TO_EDGE)}Xt.draw(Pe,qe.TRIANGLES,O,f.stencilModeForClipping(vt),G,Q.disabled,Ut,c.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,c.paint,f.transform.zoom,cn,bt.layoutVertexBuffer2),ut=!1}},fill:function(f,i,c,m){const v=c.paint.get("fill-color"),E=c.paint.get("fill-opacity");if(0===E.constantOr(1))return;const O=f.colorModeForRenderPass(),G=c.paint.get("fill-pattern"),Y=f.opaquePassEnabledForLayer()&&!G.constantOr(1)&&1===v.constantOr(g.Color.transparent).a&&1===E.constantOr(0)?"opaque":"translucent";if(f.renderPass===Y){const oe=f.depthModeForSublayer(1,"opaque"===f.renderPass?ai.ReadWrite:ai.ReadOnly);wo(f,i,c,m,oe,O,!1)}if("translucent"===f.renderPass&&c.paint.get("fill-antialias")){const oe=f.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,ai.ReadOnly);wo(f,i,c,m,oe,O,!0)}},"fill-extrusion":function(f,i,c,m){const v=c.paint.get("fill-extrusion-opacity");if(0!==v&&"translucent"===f.renderPass){const E=new ai(f.context.gl.LEQUAL,ai.ReadWrite,f.depthRangeFor3D);if(1!==v||c.paint.get("fill-extrusion-pattern").constantOr(1))mn(f,i,c,m,E,ci.disabled,Mn.disabled),mn(f,i,c,m,E,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const O=f.colorModeForRenderPass();mn(f,i,c,m,E,ci.disabled,O)}}},hillshade:function(f,i,c,m){if("offscreen"!==f.renderPass&&"translucent"!==f.renderPass)return;const v=f.context,E=f.depthModeForSublayer(0,ai.ReadOnly),O=f.colorModeForRenderPass(),[G,Y]="translucent"===f.renderPass?f.stencilConfigForOverlap(m):[{},m];for(const oe of Y){const ce=i.getTile(oe);ce.needsHillshadePrepare&&"offscreen"===f.renderPass?M(f,ce,c,E,ci.disabled,O):"translucent"===f.renderPass&&ue(f,ce,c,E,G[oe.overscaledZ],O)}v.viewport.set([0,0,f.width,f.height])},raster:function(f,i,c,m){if("translucent"!==f.renderPass||0===c.paint.get("raster-opacity")||!m.length)return;const v=f.context,E=v.gl,O=i.getSource(),G=f.useProgram("raster"),Y=f.colorModeForRenderPass(),[oe,ce]=O instanceof di?[{},m]:f.stencilConfigForOverlap(m),be=ce[ce.length-1].overscaledZ,Ie=!f.options.moving;for(const ze of ce){const Pe=f.depthModeForSublayer(ze.overscaledZ-be,1===c.paint.get("raster-opacity")?ai.ReadWrite:ai.ReadOnly,E.LESS),qe=i.getTile(ze),ut=f.transform.calculatePosMatrix(ze.toUnwrapped(),Ie);qe.registerFadeDuration(c.paint.get("raster-fade-duration"));const vt=i.findLoadedParent(ze,0),Nt=S(qe,vt,i,c,f.transform);let bt,cn;const qt="nearest"===c.paint.get("raster-resampling")?E.NEAREST:E.LINEAR;v.activeTexture.set(E.TEXTURE0),qe.texture.bind(qt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),v.activeTexture.set(E.TEXTURE1),vt?(vt.texture.bind(qt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),bt=Math.pow(2,vt.tileID.overscaledZ-qe.tileID.overscaledZ),cn=[qe.tileID.canonical.x*bt%1,qe.tileID.canonical.y*bt%1]):qe.texture.bind(qt,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const Xt=No(ut,cn||[0,0],bt||1,Nt,c);O instanceof di?G.draw(v,E.TRIANGLES,Pe,ci.disabled,Y,Q.disabled,Xt,c.id,O.boundsBuffer,f.quadTriangleIndexBuffer,O.boundsSegments):G.draw(v,E.TRIANGLES,Pe,oe[ze.overscaledZ],Y,Q.disabled,Xt,c.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,i,c){const m=c.paint.get("background-color"),v=c.paint.get("background-opacity");if(0===v)return;const E=f.context,O=E.gl,G=f.transform,Y=G.tileSize,oe=c.paint.get("background-pattern");if(f.isPatternMissing(oe))return;const ce=!oe&&1===m.a&&1===v&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==ce)return;const be=ci.disabled,Ie=f.depthModeForSublayer(0,"opaque"===ce?ai.ReadWrite:ai.ReadOnly),ze=f.colorModeForRenderPass(),Pe=f.useProgram(oe?"backgroundPattern":"background"),qe=G.coveringTiles({tileSize:Y});oe&&(E.activeTexture.set(O.TEXTURE0),f.imageManager.bind(f.context));const ut=c.getCrossfadeParameters();for(const vt of qe){const Nt=f.transform.calculatePosMatrix(vt.toUnwrapped()),bt=oe?As(Nt,v,f,oe,{tileID:vt,tileSize:Y},ut):Ts(Nt,v,m);Pe.draw(E,O.TRIANGLES,Ie,be,ze,Q.disabled,bt,c.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,i,c){for(let m=0;m<c.length;m++)ni(f,i,c[m])},custom:function(f,i,c){const m=f.context,v=c.implementation;if("offscreen"===f.renderPass){const E=v.prerender;E&&(f.setCustomLayerDefaults(),m.setColorMode(f.colorModeForRenderPass()),E.call(v,m.gl,f.transform.customLayerMatrix()),m.setDirty(),f.setBaseState())}else if("translucent"===f.renderPass){f.setCustomLayerDefaults(),m.setColorMode(f.colorModeForRenderPass()),m.setStencilMode(ci.disabled);const E="3d"===v.renderingMode?new ai(f.context.gl.LEQUAL,ai.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,ai.ReadOnly);m.setDepthMode(E),v.render(m.gl,f.transform.customLayerMatrix()),m.setDirty(),f.setBaseState(),m.bindFramebuffer.set(null)}}};class zi{constructor(i,c){this.context=new Di(i),this.transform=c,this._tileTextures={},this.setup(),this.numSublayers=In.maxUnderzooming+In.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new En,this.gpuTimers={}}resize(i,c){if(this.width=i*devicePixelRatio,this.height=c*devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,c=new g.PosArray;c.emplaceBack(0,0),c.emplaceBack(g.EXTENT,0),c.emplaceBack(0,g.EXTENT),c.emplaceBack(g.EXTENT,g.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(c,pi.members),this.tileExtentSegments=g.SegmentVector.simpleSegment(0,0,4,2);const m=new g.PosArray;m.emplaceBack(0,0),m.emplaceBack(g.EXTENT,0),m.emplaceBack(0,g.EXTENT),m.emplaceBack(g.EXTENT,g.EXTENT),this.debugBuffer=i.createVertexBuffer(m,pi.members),this.debugSegments=g.SegmentVector.simpleSegment(0,0,4,5);const v=new g.RasterBoundsArray;v.emplaceBack(0,0,0,0),v.emplaceBack(g.EXTENT,0,g.EXTENT,0),v.emplaceBack(0,g.EXTENT,0,g.EXTENT),v.emplaceBack(g.EXTENT,g.EXTENT,g.EXTENT,g.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,yn.members),this.rasterBoundsSegments=g.SegmentVector.simpleSegment(0,0,4,2);const E=new g.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(E,pi.members),this.viewportSegments=g.SegmentVector.simpleSegment(0,0,4,2);const O=new g.LineStripIndexArray;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(O);const G=new g.TriangleIndexArray;G.emplaceBack(0,1,2),G.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(G),this.emptyTexture=new He(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const Y=this.context.gl;this.stencilClearMode=new ci({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=g.create();g.ortho(m,0,this.width,this.height,0,0,1),g.scale(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,ai.disabled,this.stencilClearMode,Mn.disabled,Q.disabled,cs(m),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const m=this.context,v=m.gl;this.nextStencilID+c.length>256&&this.clearStencil(),m.setColorMode(Mn.disabled),m.setDepthMode(ai.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of c){const G=this._tileClippingMaskIDs[O.key]=this.nextStencilID++;E.draw(m,v.TRIANGLES,ai.disabled,new ci({func:v.ALWAYS,mask:0},G,255,v.KEEP,v.KEEP,v.REPLACE),Mn.disabled,Q.disabled,cs(O.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new ci({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new ci({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,m=i.sort((O,G)=>G.overscaledZ-O.overscaledZ),v=m[m.length-1].overscaledZ,E=m[0].overscaledZ-v+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const O={};for(let G=0;G<E;G++)O[G+v]=new ci({func:c.GEQUAL,mask:255},G+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[O,m]}return[{[v]:ci.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;if(this._showOverdrawInspector){const c=1/8;return new Mn([i.CONSTANT_COLOR,i.ONE],new g.Color(c,c,c,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Mn.unblended:Mn.alphaBlended}depthModeForSublayer(i,c,m){if(!this.opaquePassEnabledForLayer())return ai.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ai(m||this.context.gl.LEQUAL,c,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(g.exported.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches;for(const Y in v){const oe=v[Y];oe.used&&oe.prepare(this.context)}const E={},O={},G={};for(const Y in v){const oe=v[Y];E[Y]=oe.getVisibleCoordinates(),O[Y]=E[Y].slice().reverse(),G[Y]=oe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<m.length;Y++)if(this.style._layers[m[Y]].is3D()){this.opaquePassCutoff=Y;break}this.renderPass="offscreen";for(const Y of m){const oe=this.style._layers[Y];if(!oe.hasOffscreenPass()||oe.isHidden(this.transform.zoom))continue;const ce=O[oe.source];("custom"===oe.type||ce.length)&&this.renderLayer(this,v[oe.source],oe,ce)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?g.Color.black:g.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[m[this.currentLayer]],oe=v[Y.source],ce=E[Y.source];this._renderTileClippingMasks(Y,ce),this.renderLayer(this,oe,Y,ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const Y=this.style._layers[m[this.currentLayer]],oe=v[Y.source],ce=("symbol"===Y.type?G:O)[Y.source];this._renderTileClippingMasks(Y,E[Y.source]),this.renderLayer(this,oe,Y,ce)}if(this.options.showTileBoundaries){let Y,oe;Object.values(this.style._layers).forEach(ce=>{ce.source&&!ce.isHidden(this.transform.zoom)&&(ce.source!==(oe&&oe.id)&&(oe=this.style.sourceCaches[ce.source]),(!Y||Y.getSource().maxzoom<oe.getSource().maxzoom)&&(Y=oe))}),Y&&yi.debug(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&function(Y){const oe=Y.transform.padding;Pt(Y,Y.transform.height-(oe.top||0),3,j),Pt(Y,oe.bottom||0,3,de),rn(Y,oe.left||0,3,Se),rn(Y,Y.transform.width-(oe.right||0),3,Ge);const ce=Y.transform.centerPoint;var be,Ie,ze,Pe;Tn(be=Y,(Ie=ce.x)-1,(ze=Y.transform.height-ce.y)-10,2,20,Pe=ot),Tn(be,Ie-10,ze-1,20,2,Pe)}(this),this.context.setDefault()}renderLayer(i,c,m,v){m.isHidden(this.transform.zoom)||("background"===m.type||"custom"===m.type||v.length)&&(this.id=m.id,this.gpuTimingStart(m),yi[m.type](i,c,m,v,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),m.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const c={};for(const m in i){const v=i[m],E=this.context.extTimerQuery,O=E.getQueryObjectEXT(v.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(v.query),c[m]=O}return c}translatePosMatrix(i,c,m,v,E){if(!m[0]&&!m[1])return i;const O=E?"map"===v?this.transform.angle:0:"viewport"===v?-this.transform.angle:0;if(O){const oe=Math.sin(O),ce=Math.cos(O);m=[m[0]*ce-m[1]*oe,m[0]*oe+m[1]*ce]}const G=gt(E?m[0]:we(c,m[0],this.transform.zoom),E?m[1]:we(c,m[1],this.transform.zoom),0),Y=new Float32Array(16);return g.translate(Y,i,G),Y}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!c||!m}useProgram(i,c){this.cache=this.cache||{};const m=`${i}${c?c.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[m]||(this.cache[m]=new Qo(this.context,i,rr[i],c,no[i],this._showOverdrawInspector)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new He(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class mi{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,m){const v=Math.pow(2,m),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>g.transformMat4([],G,i)).map(G=>g.scale$1([],G,1/G[3]/c*v)),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(G=>{const Y=function(Ie,ze){var Pe=ze[0],qe=ze[1],ut=ze[2],vt=Pe*Pe+qe*qe+ut*ut;return vt>0&&(vt=1/Math.sqrt(vt)),Ie[0]=ze[0]*vt,Ie[1]=ze[1]*vt,Ie[2]=ze[2]*vt,Ie}([],(Ie=[],ze=tt([],E[G[0]],E[G[1]]),Pe=tt([],E[G[2]],E[G[1]]),qe=ze[0],Nt=Pe[0],Ie[0]=(ut=ze[1])*(cn=Pe[2])-(vt=ze[2])*(bt=Pe[1]),Ie[1]=vt*Nt-qe*cn,Ie[2]=qe*bt-ut*Nt,Ie)),oe=-((ce=Y)[0]*(be=E[G[1]])[0]+ce[1]*be[1]+ce[2]*be[2]);var Ie,ze,Pe,qe,ut,vt,Nt,bt,cn,ce,be;return Y.concat(oe)});return new mi(E,O)}}class Si{constructor(i,c){var m,v,E;this.min=i,this.max=c,this.center=function(m,v,E){return m[0]=.5*v[0],m[1]=.5*v[1],m[2]=.5*v[2],m}([],((m=[])[0]=(v=this.min)[0]+(E=this.max)[0],m[1]=v[1]+E[1],m[2]=v[2]+E[2],m))}quadrant(i){const c=[i%2==0,i<2],m=Be(this.min),v=Be(this.max);for(let E=0;E<c.length;E++)m[E]=c[E]?this.min[E]:this.center[E],v[E]=c[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new Si(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let m=!0;for(let v=0;v<i.planes.length;v++){const E=i.planes[v];let O=0;for(let G=0;G<c.length;G++)g.dot(E,c[G])>=0&&O++;if(0===O)return 0;O!==c.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let E=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let G=0;G<i.points.length;G++){const Y=i.points[G][v]-this.min[v];E=Math.min(E,Y),O=Math.max(O,Y)}if(O<0||E>this.max[v]-this.min[v])return 0}return 1}}class Ni{constructor(i=0,c=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=m,this.right=v}interpolate(i,c,m){return null!=c.top&&null!=i.top&&(this.top=g.number(i.top,c.top,m)),null!=c.bottom&&null!=i.bottom&&(this.bottom=g.number(i.bottom,c.bottom,m)),null!=c.left&&null!=i.left&&(this.left=g.number(i.left,c.left,m)),null!=c.right&&null!=i.right&&(this.right=g.number(i.right,c.right,m)),this}getCenter(i,c){const m=g.clamp((this.left+i-this.right)/2,0,i),v=g.clamp((this.top+c-this.bottom)/2,0,c);return new g.pointGeometry(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ni(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ur{constructor(i,c,m,v,E){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===E||!!E,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=null==m?0:m,this._maxPitch=null==v?60:v,this.setMaxBounds(),this.width=0,this.height=0,this._center=new g.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ni,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new ur(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new g.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-g.wrap(i,-180,180)*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new g.ARRAY_TYPE(4),g.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(m,v,E){var O=v[0],G=v[1],Y=v[2],oe=v[3],ce=Math.sin(E),be=Math.cos(E);m[0]=O*be+Y*ce,m[1]=G*be+oe*ce,m[2]=O*-ce+Y*be,m[3]=G*-ce+oe*be}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=g.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,m){this._unmodified=!1,this._edgeInsets.interpolate(i,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new g.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const m=this.pointCoordinate(new g.pointGeometry(0,0)),v=this.pointCoordinate(new g.pointGeometry(this.width,0)),E=this.pointCoordinate(new g.pointGeometry(this.width,this.height)),O=this.pointCoordinate(new g.pointGeometry(0,this.height)),G=Math.floor(Math.min(m.x,v.x,E.x,O.x)),Y=Math.floor(Math.max(m.x,v.x,E.x,O.x)),oe=1;for(let ce=G-oe;ce<=Y+oe;ce++)0!==ce&&c.push(new g.UnwrappedTileID(ce,i))}return c}coveringTiles(i){let c=this.coveringZoomLevel(i);const m=c;if(void 0!==i.minzoom&&c<i.minzoom)return[];void 0!==i.maxzoom&&c>i.maxzoom&&(c=i.maxzoom);const v=g.MercatorCoordinate.fromLngLat(this.center),E=Math.pow(2,c),O=[E*v.x,E*v.y,0],G=mi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c);let Y=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Y=c);const oe=Pe=>({aabb:new Si([Pe*E,0,0],[(Pe+1)*E,E,0]),zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}),ce=[],be=[],Ie=c,ze=i.reparseOverscaled?m:c;if(this._renderWorldCopies)for(let Pe=1;Pe<=3;Pe++)ce.push(oe(-Pe)),ce.push(oe(Pe));for(ce.push(oe(0));ce.length>0;){const Pe=ce.pop(),qe=Pe.x,ut=Pe.y;let vt=Pe.fullyVisible;if(!vt){const Xt=Pe.aabb.intersects(G);if(0===Xt)continue;vt=2===Xt}const Nt=Pe.aabb.distanceX(O),bt=Pe.aabb.distanceY(O),cn=Math.max(Math.abs(Nt),Math.abs(bt)),qt=3+(1<<Ie-Pe.zoom)-2;if(Pe.zoom===Ie||cn>qt&&Pe.zoom>=Y)be.push({tileID:new g.OverscaledTileID(Pe.zoom===Ie?ze:Pe.zoom,Pe.wrap,Pe.zoom,qe,ut),distanceSq:Mt([O[0]-.5-qe,O[1]-.5-ut])});else for(let Xt=0;Xt<4;Xt++){const bn=(qe<<1)+Xt%2,wn=(ut<<1)+(Xt>>1);ce.push({aabb:Pe.aabb.quadrant(Xt),zoom:Pe.zoom+1,x:bn,y:wn,wrap:Pe.wrap,fullyVisible:vt})}}return be.sort((Pe,qe)=>Pe.distanceSq-qe.distanceSq).map(Pe=>Pe.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=g.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new g.pointGeometry(g.mercatorXfromLng(i.lng)*this.worldSize,g.mercatorYfromLat(c)*this.worldSize)}unproject(i){return new g.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,c){const m=this.pointCoordinate(c),v=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(i),O=new g.MercatorCoordinate(E.x-(m.x-v.x),E.y-(m.y-v.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return g.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const c=[i.x,i.y,0,1],m=[i.x,i.y,1,1];g.transformMat4(c,c,this.pixelMatrixInverse),g.transformMat4(m,m,this.pixelMatrixInverse);const v=c[3],E=m[3],O=c[1]/v,G=m[1]/E,Y=c[2]/v,oe=m[2]/E,ce=Y===oe?0:(0-Y)/(oe-Y);return new g.MercatorCoordinate(g.number(c[0]/v,m[0]/E,ce)/this.worldSize,g.number(O,G,ce)/this.worldSize)}coordinatePoint(i){const c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return g.transformMat4(c,c,this.pixelMatrix),new g.pointGeometry(c[0]/c[3],c[1]/c[3])}getBounds(){return(new g.LngLatBounds).extend(this.pointLocation(new g.pointGeometry(0,0))).extend(this.pointLocation(new g.pointGeometry(this.width,0))).extend(this.pointLocation(new g.pointGeometry(this.width,this.height))).extend(this.pointLocation(new g.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new g.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,c=!1){const m=i.key,v=c?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const E=i.canonical,O=this.worldSize/this.zoomScale(E.z),G=E.x+Math.pow(2,E.z)*i.wrap,Y=g.identity(new Float64Array(16));return g.translate(Y,Y,[G*O,E.y*O,0]),g.scale(Y,Y,[O/g.EXTENT,O/g.EXTENT,1]),g.multiply(Y,c?this.alignedProjMatrix:this.projMatrix,Y),v[m]=new Float32Array(Y),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,c,m,v,E=-90,O=90,G=-180,Y=180;const oe=this.size,ce=this._unmodified;if(this.latRange){const ze=this.latRange;E=g.mercatorYfromLat(ze[1])*this.worldSize,O=g.mercatorYfromLat(ze[0])*this.worldSize,i=O-E<oe.y?oe.y/(O-E):0}if(this.lngRange){const ze=this.lngRange;G=g.mercatorXfromLng(ze[0])*this.worldSize,Y=g.mercatorXfromLng(ze[1])*this.worldSize,c=Y-G<oe.x?oe.x/(Y-G):0}const be=this.point,Ie=Math.max(c||0,i||0);if(Ie)return this.center=this.unproject(new g.pointGeometry(c?(Y+G)/2:be.x,i?(O+E)/2:be.y)),this.zoom+=this.scaleZoom(Ie),this._unmodified=ce,void(this._constraining=!1);if(this.latRange){const ze=be.y,Pe=oe.y/2;ze-Pe<E&&(v=E+Pe),ze+Pe>O&&(v=O-Pe)}if(this.lngRange){const ze=be.x,Pe=oe.x/2;ze-Pe<G&&(m=G+Pe),ze+Pe>Y&&(m=Y-Pe)}void 0===m&&void 0===v||(this.center=this.unproject(new g.pointGeometry(void 0!==m?m:be.x,void 0!==v?v:be.y))),this._unmodified=ce,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const c=Math.PI/2+this._pitch,m=this._fov*(.5+i.y/this.height),v=Math.sin(m)*this.cameraToCenterDistance/Math.sin(g.clamp(Math.PI-c-m,.01,Math.PI-.01)),E=this.point,O=E.x,G=E.y,Y=1.01*(Math.cos(Math.PI/2-this._pitch)*v+this.cameraToCenterDistance),oe=this.height/50;let ce=new Float64Array(16);g.perspective(ce,this._fov,this.width/this.height,oe,Y),ce[8]=2*-i.x/this.width,ce[9]=2*i.y/this.height,g.scale(ce,ce,[1,-1,1]),g.translate(ce,ce,[0,0,-this.cameraToCenterDistance]),g.rotateX(ce,ce,this._pitch),g.rotateZ(ce,ce,this.angle),g.translate(ce,ce,[-O,-G,0]),this.mercatorMatrix=g.scale([],ce,gt(this.worldSize,this.worldSize,this.worldSize)),g.scale(ce,ce,gt(1,1,g.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=ce,this.invProjMatrix=g.invert([],this.projMatrix);const be=this.width%2/2,Ie=this.height%2/2,ze=Math.cos(this.angle),Pe=Math.sin(this.angle),qe=O-Math.round(O)+ze*be+Pe*Ie,ut=G-Math.round(G)+ze*Ie+Pe*be,vt=new Float64Array(ce);if(g.translate(vt,vt,[qe>.5?qe-1:qe,ut>.5?ut-1:ut,0]),this.alignedProjMatrix=vt,ce=g.create(),g.scale(ce,ce,[this.width/2,-this.height/2,1]),g.translate(ce,ce,[1,-1,0]),this.labelPlaneMatrix=ce,ce=g.create(),g.scale(ce,ce,[1,-1,1]),g.translate(ce,ce,[-1,-1,0]),g.scale(ce,ce,[2/this.width,2/this.height,1]),this.glCoordMatrix=ce,this.pixelMatrix=g.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ce=g.invert(new Float64Array(16),this.pixelMatrix),!ce)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ce,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new g.pointGeometry(0,0)),c=g.fromValues(i.x*this.worldSize,i.y*this.worldSize,0,1);return g.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new g.pointGeometry(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(1===i.length)return[i[0],c];{let m=c.x,v=c.y,E=c.x,O=c.y;for(const G of i)m=Math.min(m,G.x),v=Math.min(v,G.y),E=Math.max(E,G.x),O=Math.max(O,G.y);return[new g.pointGeometry(m,v),new g.pointGeometry(E,v),new g.pointGeometry(E,O),new g.pointGeometry(m,O),new g.pointGeometry(m,v)]}}}class Fr{constructor(i){this._hashName=i&&encodeURIComponent(i),g.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(c,m){let v=!1,E=null;const O=()=>{E=null,v&&(c(),E=setTimeout(O,300),v=!1)};return()=>(v=!0,E||O(),E)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,v),O=Math.round(c.lng*E)/E,G=Math.round(c.lat*E)/E,Y=this._map.getBearing(),oe=this._map.getPitch();let ce="";if(ce+=i?`/${O}/${G}/${m}`:`${m}/${G}/${O}`,(Y||oe)&&(ce+="/"+Math.round(10*Y)/10),oe&&(ce+=`/${Math.round(oe)}`),this._hashName){const be=this._hashName;let Ie=!1;const ze=window.location.hash.slice(1).split("&").map(Pe=>{const qe=Pe.split("=")[0];return qe===be?(Ie=!0,`${qe}=${ce}`):Pe}).filter(Pe=>Pe);return Ie||ze.push(`${be}=${ce}`),`#${ze.join("&")}`}return`#${ce}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let c;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:c,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch(c){}}}const Wr={linearity:.3,easing:g.bezier(0,0,.3,1)},io=g.extend({deceleration:2500,maxSpeed:1400},Wr),gs=g.extend({deceleration:20,maxSpeed:1400},Wr),Po=g.extend({deceleration:1e3,maxSpeed:360},Wr),go=g.extend({deceleration:1e3,maxSpeed:90},Wr);class rs{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=g.exported.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new g.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const E=zo(c.pan.mag(),m,g.extend({},io,i||{}));v.offset=c.pan.mult(E.amount/c.pan.mag()),v.center=this._map.transform.center,Wo(v,E)}if(c.zoom){const E=zo(c.zoom,m,gs);v.zoom=this._map.transform.zoom+E.amount,Wo(v,E)}if(c.bearing){const E=zo(c.bearing,m,Po);v.bearing=this._map.transform.bearing+g.clamp(E.amount,-179,179),Wo(v,E)}if(c.pitch){const E=zo(c.pitch,m,go);v.pitch=this._map.transform.pitch+E.amount,Wo(v,E)}if(v.zoom||v.bearing){const E=void 0===c.pinchAround?c.around:c.pinchAround;v.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),g.extend(v,{noMoveStart:!0})}}function Wo(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function zo(f,i,c){const{maxSpeed:m,linearity:v,deceleration:E}=c,O=g.clamp(f*v/(i/1e3),-m,m),G=Math.abs(O)/(E*v);return{easing:c.easing,duration:1e3*G,amount:O*(G/2)}}class _o extends g.Event{constructor(i,c,m,v={}){const E=he.mousePos(c.getCanvasContainer(),m),O=c.unproject(E);super(i,g.extend({point:E,lngLat:O,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Co extends g.Event{constructor(i,c,m){const v="touchend"===i?m.changedTouches:m.touches,E=he.touchPos(c.getCanvasContainer(),v),O=E.map(Y=>c.unproject(Y)),G=E.reduce((Y,oe,ce,be)=>Y.add(oe.div(be.length)),new g.pointGeometry(0,0));super(i,{points:E,point:G,lngLats:O,lngLat:c.unproject(G),originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class _s extends g.Event{constructor(i,c,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Va{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new _s(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new _o(i.type,this._map,i))}mouseup(i){this._map.fire(new _o(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new _o(i.type,this._map,i))}dblclick(i){return this._firePreventable(new _o(i.type,this._map,i))}mouseover(i){this._map.fire(new _o(i.type,this._map,i))}mouseout(i){this._map.fire(new _o(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Co(i.type,this._map,i))}touchmove(i){this._map.fire(new Co(i.type,this._map,i))}touchend(i){this._map.fire(new Co(i.type,this._map,i))}touchcancel(i){this._map.fire(new Co(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ta{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new _o(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _o("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new _o(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ii{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&0===i.button&&(he.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=he.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const E=Math.min(v.x,m.x),O=Math.max(v.x,m.x),G=Math.min(v.y,m.y),Y=Math.max(v.y,m.y);he.setTransform(this._box,`translate(${E}px,${G}px)`),this._box.style.width=O-E+"px",this._box.style.height=Y-G+"px"}mouseupWindow(i,c){if(!this._active||0!==i.button)return;const m=this._startPos,v=c;if(this.reset(),he.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new g.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:E=>E.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(he.remove(this._box),this._box=null),he.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new g.Event(i,{originalEvent:c}))}}function si(f,i){const c={};for(let m=0;m<f.length;m++)c[f[m].identifier]=i[m];return c}class Ri{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const E=new g.pointGeometry(0,0);for(const O of v)E._add(O);return E.div(v.length)}(c),this.touches=si(m,c)))}touchmove(i,c,m){if(this.aborted||!this.centroid)return;const v=si(m,c);for(const E in this.touches){const O=this.touches[E],G=v[E];(!G||G.dist(O)>30)&&(this.aborted=!0)}}touchend(i,c,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===m.length){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ai{constructor(i){this.singleTap=new Ri(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,m){this.singleTap.touchstart(i,c,m)}touchmove(i,c,m){this.singleTap.touchmove(i,c,m)}touchend(i,c,m){const v=this.singleTap.touchend(i,c,m);if(v){const E=i.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(v)<30;if(E&&O||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Dr{constructor(){this._zoomIn=new Ai({numTouches:1,numTaps:2}),this._zoomOut=new Ai({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,m){this._zoomIn.touchstart(i,c,m),this._zoomOut.touchstart(i,c,m)}touchmove(i,c,m){this._zoomIn.touchmove(i,c,m),this._zoomOut.touchmove(i,c,m)}touchend(i,c,m){const v=this._zoomIn.touchend(i,c,m),E=this._zoomOut.touchend(i,c,m);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(v)},{originalEvent:i})}):E?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(E)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ar={0:1,2:2};class Hr{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,c){return!1}_move(i,c){return{}}mousedown(i,c){if(this._lastPoint)return;const m=he.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(i,c){const m=this._lastPoint;if(m)if(i.preventDefault(),function(v,E){const O=ar[E];return void 0===v.buttons||(v.buttons&O)!==O}(i,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}mouseupWindow(i){this._lastPoint&&he.mouseButton(i)===this._eventButton&&(this._moved&&he.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hs extends Hr{mousedown(i,c){super.mousedown(i,c),this._lastPoint&&(this._active=!0)}_correctButton(i,c){return 0===c&&!i.ctrlKey}_move(i,c){return{around:c,panDelta:c.sub(i)}}}class Sr extends Hr{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const m=.8*(c.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class Eo extends Hr{_correctButton(i,c){return 0===c&&i.ctrlKey||2===c}_move(i,c){const m=-.5*(c.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class na{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new g.pointGeometry(0,0)}touchstart(i,c,m){return this._calculateTransform(i,c,m)}touchmove(i,c,m){if(this._active&&!(m.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,c,m)}touchend(i,c,m){this._calculateTransform(i,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,m){m.length>0&&(this._active=!0);const v=si(m,c),E=new g.pointGeometry(0,0),O=new g.pointGeometry(0,0);let G=0;for(const oe in v){const ce=v[oe],be=this._touches[oe];be&&(E._add(ce),O._add(ce.sub(be)),G++,v[oe]=ce)}if(this._touches=v,G<this._minTouches||!O.mag())return;const Y=O.div(G);return this._sum._add(Y),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(G),panDelta:Y}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,c,m){return{}}touchstart(i,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,E]=this._firstTwoTouches,O=Yr(m,c,v),G=Yr(m,c,E);if(!O||!G)return;const Y=this._aroundCenter?null:O.add(G).div(2);return this._move([O,G],Y,i)}touchend(i,c,m){if(!this._firstTwoTouches)return;const[v,E]=this._firstTwoTouches,O=Yr(m,c,v),G=Yr(m,c,E);O&&G||(this._active&&he.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Yr(f,i,c){for(let m=0;m<f.length;m++)if(f[m].identifier===c)return i[m]}function Fn(f,i){return Math.log(f/i)/Math.LN2}class Do extends wr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Fn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fn(this._distance,m),pinchAround:c}}}function ys(f,i){return 180*f.angleWith(i)/Math.PI}class Ua extends wr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ys(this._vector,m),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,m=ys(i,this._startVector);return Math.abs(m)<c}}function nl(f){return Math.abs(f.y)>Math.abs(f.x)}class Ln extends wr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,nl(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,m){const v=i[0].sub(this._lastPoints[0]),E=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(v,E,m.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+E.y)/2*-.5}}gestureBeginsVertically(i,c,m){if(void 0!==this._valid)return this._valid;const v=i.mag()>=2,E=c.mag()>=2;if(!v&&!E)return;if(!v||!E)return void 0===this._firstMove&&(this._firstMove=m),m-this._firstMove<100&&void 0;const O=i.y>0==c.y>0;return nl(i)&&nl(c)&&O}}const pa={panStep:100,bearingStep:15,pitchStep:10};class tc{constructor(){const i=pa;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,m=0,v=0,E=0,O=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),E=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),E=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),O=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:G=>{const Y=G.getZoom();G.easeTo({duration:300,easeId:"keyboardHandler",easing:Sa,zoom:c?Math.round(Y)+c*(i.shiftKey?2:1):Y,bearing:G.getBearing()+m*this._bearingStep,pitch:G.getPitch()+v*this._pitchStep,offset:[-E*this._panStep,-O*this._panStep],center:G.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sa(f){return f*(2-f)}const Ta=4.000244140625;class os{constructor(i,c){this._map=i,this._el=i.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,g.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=g.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,0!==c&&c%Ta==0?this._type="wheel":0!==c&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=he.mousePos(this._el,i);this._around=g.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(c)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(0!==this._delta){const G="wheel"===this._type&&Math.abs(this._delta)>Ta?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&0!==Y&&(Y=1/Y);const oe="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(oe*Y))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c="number"==typeof this._targetZoom?this._targetZoom:i.zoom,m=this._startZoom,v=this._easing;let E,O=!1;if("wheel"===this._type&&m&&v){const G=Math.min((g.exported.now()-this._lastWheelEventTime)/200,1),Y=v(G);E=g.number(m,c,Y),G<1?this._frameId||(this._frameId=!0):O=!0}else E=c,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:E-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=g.ease;if(this._prevEase){const m=this._prevEase,v=(g.exported.now()-m.start)/m.duration,E=m.easing(v+.01)-m.easing(v),O=.27/Math.sqrt(E*E+1e-4)*.01,G=Math.sqrt(.0729-O*O);c=g.bezier(O,G,.25,1)}return this._prevEase={start:g.exported.now(),duration:i,easing:c},c}reset(){this._active=!1}}class Bl{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dc{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lu{constructor(){this._tap=new Ai({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,c,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,c,m))}touchmove(i,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],E=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(i,c,m)}touchend(i,c,m){this._tapTime?this._swipePoint&&0===m.length&&this.reset():this._tap.touchend(i,c,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(i,c,m){this._el=i,this._mousePan=c,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ja{constructor(i,c,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class wl{constructor(i,c,m,v){this._el=i,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fa=f=>f.zoom||f.drag||f.pitch||f.rotate;class Mo extends g.Event{}function Ns(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class zl{constructor(i,c){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rs(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),g.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,E,O]of this._listeners)he.addEventListener(v,E,v===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[i,c,m]of this._listeners)he.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new Va(c,i));const v=c.boxZoom=new ii(c,i);this._add("boxZoom",v);const E=new Dr,O=new Dc;c.doubleClickZoom=new Bl(O,E),this._add("tapZoom",E),this._add("clickZoom",O);const G=new lu;this._add("tapDragZoom",G);const Y=c.touchPitch=new Ln;this._add("touchPitch",Y);const oe=new Sr(i),ce=new Eo(i);c.dragRotate=new ja(i,oe,ce),this._add("mouseRotate",oe,["mousePitch"]),this._add("mousePitch",ce,["mouseRotate"]);const be=new Hs(i),Ie=new na(i);c.dragPan=new nc(m,be,Ie),this._add("mousePan",be),this._add("touchPan",Ie,["touchZoom","touchRotate"]);const ze=new Ua,Pe=new Do;c.touchZoomRotate=new wl(m,Pe,ze,G),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Pe,["touchPan","touchRotate"]);const qe=c.scrollZoom=new os(c,this);this._add("scrollZoom",qe,["mousePan"]);const ut=c.keyboard=new tc;this._add("keyboard",ut),this._add("blockableMapEvent",new ta(c));for(const vt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[vt]&&c[vt].enable(i[vt])}_add(i,c,m){this._handlers.push({handlerName:i,handler:c,allowed:m}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(fa(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,c,m){for(const v in i)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const c=[];for(const m of i)this._el.contains(m.target)&&c.push(m);return c}handleEvent(i,c){if("blur"===i.type)return void this.stop(!0);this._updatingCamera=!0;const m="renderFrame"===i.type?void 0:i,v={needsRenderFrame:!1},E={},O={},G=i.touches,Y=G?this._getMapTouches(G):void 0,oe=Y?he.touchPos(this._el,Y):he.mousePos(this._el,i);for(const{handlerName:Ie,handler:ze,allowed:Pe}of this._handlers){if(!ze.isEnabled())continue;let qe;this._blockedByActive(O,Pe,Ie)?ze.reset():ze[c||i.type]&&(qe=ze[c||i.type](i,oe,Y),this.mergeHandlerResult(v,E,qe,Ie,m),qe&&qe.needsRenderFrame&&this._triggerRenderFrame()),(qe||ze.isActive())&&(O[Ie]=ze)}const ce={};for(const Ie in this._previousActiveHandlers)O[Ie]||(ce[Ie]=m);this._previousActiveHandlers=O,(Object.keys(ce).length||Ns(v))&&(this._changes.push([v,E,ce]),this._triggerRenderFrame()),(Object.keys(O).length||Ns(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:be}=v;be&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],be(this._map))}mergeHandlerResult(i,c,m,v,E){if(!m)return;g.extend(i,m);const O={handlerName:v,originalEvent:m.originalEvent||E};void 0!==m.zoomDelta&&(c.zoom=O),void 0!==m.panDelta&&(c.drag=O),void 0!==m.pitchDelta&&(c.pitch=O),void 0!==m.bearingDelta&&(c.rotate=O)}_applyChanges(){const i={},c={},m={};for(const[v,E,O]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new g.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),void 0!==v.around&&(i.around=v.around),void 0!==v.pinchAround&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),g.extend(c,E),g.extend(m,O);this._updateMapTransform(i,c,m),this._changes=[]}_updateMapTransform(i,c,m){const v=this._map,E=v.transform;if(!Ns(i))return this._fireEvents(c,m,!0);let{panDelta:O,zoomDelta:G,bearingDelta:Y,pitchDelta:oe,around:ce,pinchAround:be}=i;void 0!==be&&(ce=be),v._stop(!0),ce=ce||v.transform.centerPoint;const Ie=E.pointLocation(O?ce.sub(O):ce);Y&&(E.bearing+=Y),oe&&(E.pitch+=oe),G&&(E.zoom+=G),E.setLocationAtPoint(Ie,ce),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,m,!0)}_fireEvents(i,c,m){const v=fa(this._eventsInProgress),E=fa(i),O={};for(const ce in i){const{originalEvent:be}=i[ce];this._eventsInProgress[ce]||(O[`${ce}start`]=be),this._eventsInProgress[ce]=i[ce]}!v&&E&&this._fireEvent("movestart",E.originalEvent);for(const ce in O)this._fireEvent(ce,O[ce]);E&&this._fireEvent("move",E.originalEvent);for(const ce in i){const{originalEvent:be}=i[ce];this._fireEvent(ce,be)}const G={};let Y;for(const ce in this._eventsInProgress){const{handlerName:be,originalEvent:Ie}=this._eventsInProgress[ce];this._handlersById[be].isActive()||(delete this._eventsInProgress[ce],Y=c[be]||Ie,G[`${ce}end`]=Y)}for(const ce in G)this._fireEvent(ce,G[ce]);const oe=fa(this._eventsInProgress);if(m&&(v||E)&&!oe){this._updatingCamera=!0;const ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),be=Ie=>0!==Ie&&-this._bearingSnap<Ie&&Ie<this._bearingSnap;ce?(be(ce.bearing||this._map.getBearing())&&(ce.bearing=0),this._map.easeTo(ce,{originalEvent:Y})):(this._map.fire(new g.Event("moveend",{originalEvent:Y})),be(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new g.Event(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Mo("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class ma extends g.Evented{constructor(i,c){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,g.bindAll(["_renderFrameCallback"],this)}getCenter(){return new g.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,m){return i=g.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,g.extend({offset:i},c),m)}panTo(i,c,m){return this.easeTo(g.extend({center:i},c),m)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,m){return this.easeTo(g.extend({zoom:i},c),m)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,m){return this.easeTo(g.extend({bearing:i},c),m)}resetNorth(i,c){return this.rotateTo(0,g.extend({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(g.extend({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=g.LngLatBounds.convert(i);const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,c)}_cameraForBoxAndBearing(i,c,m,v){const E={top:0,bottom:0,right:0,left:0};if("number"==typeof(v=g.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding){const qt=v.padding;v.padding={top:qt,bottom:qt,right:qt,left:qt}}v.padding=g.extend(E,v.padding);const O=this.transform,G=O.padding,Y=O.project(g.LngLat.convert(i)),oe=O.project(g.LngLat.convert(c)),ce=Y.rotate(-m*Math.PI/180),be=oe.rotate(-m*Math.PI/180),Ie=new g.pointGeometry(Math.max(ce.x,be.x),Math.max(ce.y,be.y)),ze=new g.pointGeometry(Math.min(ce.x,be.x),Math.min(ce.y,be.y)),Pe=Ie.sub(ze),qe=(O.width-(G.left+G.right+v.padding.left+v.padding.right))/Pe.x,ut=(O.height-(G.top+G.bottom+v.padding.top+v.padding.bottom))/Pe.y;if(ut<0||qe<0)return void g.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const vt=Math.min(O.scaleZoom(O.scale*Math.min(qe,ut)),v.maxZoom),Nt=g.pointGeometry.convert(v.offset),bt=new g.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),cn=Nt.add(bt).mult(O.scale/O.zoomScale(vt));return{center:O.unproject(Y.add(oe).div(2).sub(cn)),zoom:vt,bearing:m}}fitBounds(i,c,m){return this._fitInternal(this.cameraForBounds(i,c),c,m)}fitScreenCoordinates(i,c,m,v,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(g.pointGeometry.convert(i)),this.transform.pointLocation(g.pointGeometry.convert(c)),m,v),v,E)}_fitInternal(i,c,m){return i?(delete(c=g.extend(i,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(i,c){this.stop();const m=this.transform;let v=!1,E=!1,O=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(v=!0,m.zoom=+i.zoom),void 0!==i.center&&(m.center=g.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(E=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(O=!0,m.pitch=+i.pitch),null==i.padding||m.isPaddingEqual(i.padding)||(m.padding=i.padding),this.fire(new g.Event("movestart",c)).fire(new g.Event("move",c)),v&&this.fire(new g.Event("zoomstart",c)).fire(new g.Event("zoom",c)).fire(new g.Event("zoomend",c)),E&&this.fire(new g.Event("rotatestart",c)).fire(new g.Event("rotate",c)).fire(new g.Event("rotateend",c)),O&&this.fire(new g.Event("pitchstart",c)).fire(new g.Event("pitch",c)).fire(new g.Event("pitchend",c)),this.fire(new g.Event("moveend",c))}easeTo(i,c){this._stop(!1,i.easeId),(!1===(i=g.extend({offset:[0,0],duration:500,easing:g.ease},i)).animate||!i.essential&&g.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,v=this.getZoom(),E=this.getBearing(),O=this.getPitch(),G=this.getPadding(),Y="zoom"in i?+i.zoom:v,oe="bearing"in i?this._normalizeBearing(i.bearing,E):E,ce="pitch"in i?+i.pitch:O,be="padding"in i?i.padding:m.padding,Ie=g.pointGeometry.convert(i.offset);let ze=m.centerPoint.add(Ie);const Pe=m.pointLocation(ze),qe=g.LngLat.convert(i.center||Pe);this._normalizeCenter(qe);const ut=m.project(Pe),vt=m.project(qe).sub(ut),Nt=m.zoomScale(Y-v);let bt,cn;i.around&&(bt=g.LngLat.convert(i.around),cn=m.locationPoint(bt));const qt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Y!==v,this._rotating=this._rotating||E!==oe,this._pitching=this._pitching||ce!==O,this._padding=!m.isPaddingEqual(be),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,qt),this._ease(Xt=>{if(this._zooming&&(m.zoom=g.number(v,Y,Xt)),this._rotating&&(m.bearing=g.number(E,oe,Xt)),this._pitching&&(m.pitch=g.number(O,ce,Xt)),this._padding&&(m.interpolatePadding(G,be,Xt),ze=m.centerPoint.add(Ie)),bt)m.setLocationAtPoint(bt,cn);else{const bn=m.zoomScale(m.zoom-v),wn=Y>v?Math.min(2,Nt):Math.max(.5,Nt),Ut=Math.pow(wn,1-Xt),Cn=m.unproject(ut.add(vt.mult(Xt*Ut)).mult(bn));m.setLocationAtPoint(m.renderWorldCopies?Cn.wrap():Cn,ze)}this._fireMoveEvents(c)},Xt=>{this._afterEase(c,Xt)},i),this}_prepareEase(i,c,m={}){this._moving=!0,c||m.moving||this.fire(new g.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new g.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new g.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new g.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new g.Event("move",i)),this._zooming&&this.fire(new g.Event("zoom",i)),this._rotating&&this.fire(new g.Event("rotate",i)),this._pitching&&this.fire(new g.Event("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new g.Event("zoomend",i)),v&&this.fire(new g.Event("rotateend",i)),E&&this.fire(new g.Event("pitchend",i)),this.fire(new g.Event("moveend",i))}flyTo(i,c){if(!i.essential&&g.exported.prefersReducedMotion){const gi=g.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gi,c)}this.stop(),i=g.extend({offset:[0,0],speed:1.2,curve:1.42,easing:g.ease},i);const m=this.transform,v=this.getZoom(),E=this.getBearing(),O=this.getPitch(),G=this.getPadding(),Y="zoom"in i?g.clamp(+i.zoom,m.minZoom,m.maxZoom):v,oe="bearing"in i?this._normalizeBearing(i.bearing,E):E,ce="pitch"in i?+i.pitch:O,be="padding"in i?i.padding:m.padding,Ie=m.zoomScale(Y-v),ze=g.pointGeometry.convert(i.offset);let Pe=m.centerPoint.add(ze);const qe=m.pointLocation(Pe),ut=g.LngLat.convert(i.center||qe);this._normalizeCenter(ut);const vt=m.project(qe),Nt=m.project(ut).sub(vt);let bt=i.curve;const cn=Math.max(m.width,m.height),qt=cn/Ie,Xt=Nt.mag();if("minZoom"in i){const gi=g.clamp(Math.min(i.minZoom,v,Y),m.minZoom,m.maxZoom),hr=cn/m.zoomScale(gi-v);bt=Math.sqrt(hr/Xt*2)}const bn=bt*bt;function wn(gi){const hr=(qt*qt-cn*cn+(gi?-1:1)*bn*bn*Xt*Xt)/(2*(gi?qt:cn)*bn*Xt);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Ut(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function Cn(gi){return(Math.exp(gi)+Math.exp(-gi))/2}const Ii=wn(0);let qi=function(gi){return Cn(Ii)/Cn(Ii+bt*gi)},Kr=function(gi){return cn*((Cn(Ii)*(Ut(hr=Ii+bt*gi)/Cn(hr))-Ut(Ii))/bn)/Xt;var hr},cr=(wn(1)-Ii)/bt;if(Math.abs(Xt)<1e-6||!isFinite(cr)){if(Math.abs(cn-qt)<1e-6)return this.easeTo(i,c);const gi=qt<cn?-1:1;cr=Math.abs(Math.log(qt/cn))/bt,Kr=function(){return 0},qi=function(hr){return Math.exp(gi*bt*hr)}}return i.duration="duration"in i?+i.duration:1e3*cr/("screenSpeed"in i?+i.screenSpeed/bt:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=E!==oe,this._pitching=ce!==O,this._padding=!m.isPaddingEqual(be),this._prepareEase(c,!1),this._ease(gi=>{const hr=gi*cr,lr=1/qi(hr);m.zoom=1===gi?Y:v+m.scaleZoom(lr),this._rotating&&(m.bearing=g.number(E,oe,gi)),this._pitching&&(m.pitch=g.number(O,ce,gi)),this._padding&&(m.interpolatePadding(G,be,gi),Pe=m.centerPoint.add(ze));const Qi=1===gi?ut:m.unproject(vt.add(Nt.mult(Kr(hr))).mult(lr));m.setLocationAtPoint(m.renderWorldCopies?Qi.wrap():Qi,Pe),this._fireMoveEvents(c)},()=>this._afterEase(c),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,c,m){!1===m.animate||0===m.duration?(i(1),c()):(this._easeStart=g.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((g.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,c){i=g.wrap(i,-180,180);const m=Math.abs(i-c);return Math.abs(i-360-c)<m&&(i-=360),Math.abs(i+360-c)<m&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const m=i.lng-c.center.lng;i.lng+=m>180?-360:m<-180?360:0}}class Ha{constructor(i={}){this.options=i,g.bindAll(["_toggleAttribution","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._container=he.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=he.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=he.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateCompact(),this._updateAttributions(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._container}onRemove(){he.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const m=this._map._getUIString(`AttributionControl.${c}`);i.title=m,i.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"):this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show")}_updateData(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>"string"!=typeof v?"":v)):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const E=c[v];if(E.used){const O=E.getSource();O.attribution&&i.indexOf(O.attribution)<0&&i.push(O.attribution)}}i.sort((v,E)=>v.length-E.length),i=i.filter((v,E)=>{for(let O=E+1;O<i.length;O++)if(i[O].indexOf(v)>=0)return!1;return!0});const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){const i=this.options&&this.options.compact;this._map.getCanvasContainer().offsetWidth<=640||i?!1===i?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||(this._container.removeAttribute("open"),this._container.classList.add("maplibregl-compact","mapboxgl-compact")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}}class ga{constructor(){g.bindAll(["_updateLogo"],this),g.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=he.create("div","maplibregl-ctrl mapboxgl-ctrl");const c=he.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){he.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const i=this._map.style.sourceCaches;for(const c in i)if(i[c].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const i=this._container.children;if(i.length){const c=i[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("maplibregl-compact","mapboxgl-compact"):c.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Cl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Vo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Br={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ia={showCompass:!0,showZoom:!0,visualizePitch:!1};class z{constructor(i,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Sr({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new Eo({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),g.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),he.addEventListener(c,"mousedown",this.mousedown),he.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),he.addEventListener(c,"touchmove",this.touchmove),he.addEventListener(c,"touchend",this.touchend),he.addEventListener(c,"touchcancel",this.reset)}down(i,c){this.mouseRotate.mousedown(i,c),this.mousePitch&&this.mousePitch.mousedown(i,c),he.disableDrag()}move(i,c){const m=this.map,v=this.mouseRotate.mousemoveWindow(i,c);if(v&&v.bearingDelta&&m.setBearing(m.getBearing()+v.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(i,c);E&&E.pitchDelta&&m.setPitch(m.getPitch()+E.pitchDelta)}}off(){const i=this.element;he.removeEventListener(i,"mousedown",this.mousedown),he.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),he.removeEventListener(i,"touchmove",this.touchmove),he.removeEventListener(i,"touchend",this.touchend),he.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){he.enableDrag(),he.removeEventListener(window,"mousemove",this.mousemove),he.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(g.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),he.mousePos(this.element,i)),he.addEventListener(window,"mousemove",this.mousemove),he.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,he.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=he.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){1!==i.targetTouches.length?this.reset():(this._lastPos=he.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function P(f,i,c){if(f=new g.LngLat(f.lng,f.lat),i){const m=new g.LngLat(f.lng-360,f.lat),v=new g.LngLat(f.lng+360,f.lat),E=c.locationPoint(f).distSqr(i);c.locationPoint(m).distSqr(i)<E?f=m:c.locationPoint(v).distSqr(i)<E&&(f=v)}for(;Math.abs(f.lng-c.center.lng)>180;){const m=c.locationPoint(f);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;f.lng>c.center.lng?f.lng-=360:f.lng+=360}return f}const A={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function X(f,i,c){const m=f.classList;for(const v in A)m.remove(`maplibregl-${c}-anchor-${v}`,`mapboxgl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${i}`,`mapboxgl-${c}-anchor-${i}`)}class re extends g.Evented{constructor(i,c){if(super(),(i instanceof HTMLElement||c)&&(i=g.extend({element:i},c)),g.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&"auto"!==i.pitchAlignment?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=g.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=he.create("div"),this._element.setAttribute("aria-label","Map marker");const m=he.createNS("http://www.w3.org/2000/svg","svg"),v=41,E=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${E}px`),m.setAttributeNS(null,"viewBox",`0 0 ${E} ${v}`);const O=he.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"stroke","none"),O.setAttributeNS(null,"stroke-width","1"),O.setAttributeNS(null,"fill","none"),O.setAttributeNS(null,"fill-rule","evenodd");const G=he.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill-rule","nonzero");const Y=he.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const oe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Nt of oe){const bt=he.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",Nt.rx),bt.setAttributeNS(null,"ry",Nt.ry),Y.appendChild(bt)}const ce=he.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"fill",this._color);const be=he.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ce.appendChild(be);const Ie=he.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"fill","#000000");const ze=he.createNS("http://www.w3.org/2000/svg","path");ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ie.appendChild(ze);const Pe=he.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");const qe=he.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ut=he.createNS("http://www.w3.org/2000/svg","circle");ut.setAttributeNS(null,"fill","#000000"),ut.setAttributeNS(null,"opacity","0.25"),ut.setAttributeNS(null,"cx","5.5"),ut.setAttributeNS(null,"cy","5.5"),ut.setAttributeNS(null,"r","5.4999962");const vt=he.createNS("http://www.w3.org/2000/svg","circle");vt.setAttributeNS(null,"fill","#FFFFFF"),vt.setAttributeNS(null,"cx","5.5"),vt.setAttributeNS(null,"cy","5.5"),vt.setAttributeNS(null,"r","5.4999962"),qe.appendChild(ut),qe.appendChild(vt),G.appendChild(Y),G.appendChild(ce),G.appendChild(Ie),G.appendChild(Pe),G.appendChild(qe),m.appendChild(G),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(m),this._offset=g.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),X(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),he.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=g.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const c=38.1,m=13.5,v=Math.sqrt(Math.pow(m,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-c],"bottom-left":[v,-1*(c-m+v)],"bottom-right":[-v,-1*(c-m+v)],left:[m,-1*(c-m)],right:[-m,-1*(c-m)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const c=i.code,m=i.charCode||i.keyCode;"Space"!==c&&"Enter"!==c&&32!==m&&13!==m||this.togglePopup()}_onMapClick(i){const c=i.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=P(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let c="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?c=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(c=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?m="rotateX(0deg)":"map"===this._pitchAlignment&&(m=`rotateX(${this._map.getPitch()}deg)`),i&&"moveend"!==i.type||(this._pos=this._pos.round()),he.setTransform(this._element,`${A[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${c}`)}getOffset(){return this._offset}setOffset(i){return this._offset=g.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new g.Event("dragstart"))),this.fire(new g.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new g.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const xe={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ue,Re=0,xt=!1;const ri={maxWidth:100,unit:"metric"};function Ji(f,i,c){const m=c&&c.maxWidth||100,v=f._container.clientHeight/2,E=f.unproject([0,v]),O=f.unproject([m,v]),G=E.distanceTo(O);if(c&&"imperial"===c.unit){const Y=3.2808*G;Y>5280?vi(i,m,Y/5280,f._getUIString("ScaleControl.Miles")):vi(i,m,Y,f._getUIString("ScaleControl.Feet"))}else c&&"nautical"===c.unit?vi(i,m,G/1852,f._getUIString("ScaleControl.NauticalMiles")):G>=1e3?vi(i,m,G/1e3,f._getUIString("ScaleControl.Kilometers")):vi(i,m,G,f._getUIString("ScaleControl.Meters"))}function vi(f,i,c,m){const v=function(E){const O=Math.pow(10,`${Math.floor(E)}`.length-1);let G=E/O;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:function(Y){const oe=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10));return Math.round(Y*oe)/oe}(G),O*G}(c);f.style.width=i*(v/c)+"px",f.innerHTML=`${v}&nbsp;${m}`}const Zi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},yr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yo(f){if(f){if("number"==typeof f){const i=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new g.pointGeometry(0,0),top:new g.pointGeometry(0,f),"top-left":new g.pointGeometry(i,i),"top-right":new g.pointGeometry(-i,i),bottom:new g.pointGeometry(0,-f),"bottom-left":new g.pointGeometry(i,-i),"bottom-right":new g.pointGeometry(-i,-i),left:new g.pointGeometry(f,0),right:new g.pointGeometry(-f,0)}}if(f instanceof g.pointGeometry||Array.isArray(f)){const i=g.pointGeometry.convert(f);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:g.pointGeometry.convert(f.center||[0,0]),top:g.pointGeometry.convert(f.top||[0,0]),"top-left":g.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":g.pointGeometry.convert(f["top-right"]||[0,0]),bottom:g.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":g.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":g.pointGeometry.convert(f["bottom-right"]||[0,0]),left:g.pointGeometry.convert(f.left||[0,0]),right:g.pointGeometry.convert(f.right||[0,0])}}return Yo(new g.pointGeometry(0,0))}const So={supported:$e,setRTLTextPlugin:g.setRTLTextPlugin,getRTLTextPluginStatus:g.getRTLTextPluginStatus,Map:class extends ma{constructor(f){if(null!=(f=g.extend({},Br,f)).minZoom&&null!=f.maxZoom&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=f.minPitch&&null!=f.maxPitch&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=f.minPitch&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=f.maxPitch&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ur(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new Cl,this._controls=[],this._mapId=g.uniqueId(),this._locale=g.extend({},Vo,f.locale),this._clickTolerance=f.clickTolerance,this._requestManager=new Ve(f.transformRequest),"string"==typeof f.container){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),g.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new zl(this,f),this._hash=f.hash&&new Fr("string"==typeof f.hash&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,g.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Ha({customAttribution:f.customAttribution})),this.addControl(new ga,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new g.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new g.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(void 0===i&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=f.onAdd(this);this._controls.push(f);const m=this._controlPositions[i];return-1!==i.indexOf("bottom")?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new g.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}resize(f){const i=this._containerDimensions(),c=i[0],m=i[1];this._resizeCanvas(c,m),this.transform.resize(c,m),this.painter.resize(c,m);const v=!this._moving;return v&&(this.stop(),this.fire(new g.Event("movestart",f)).fire(new g.Event("move",f))),this.fire(new g.Event("resize",f)),v&&this.fire(new g.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(g.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=null==f?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=null==f?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=null==f?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=null==f?60:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(g.LngLat.convert(f))}unproject(f){return this.transform.pointLocation(g.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,i,c){if("mouseenter"===f||"mouseover"===f){let m=!1;return{layer:i,listener:c,delegates:{mousemove:E=>{const O=this.getLayer(i)?this.queryRenderedFeatures(E.point,{layers:[i]}):[];O.length?m||(m=!0,c.call(this,new _o(f,this,E.originalEvent,{features:O}))):m=!1},mouseout:()=>{m=!1}}}}if("mouseleave"===f||"mouseout"===f){let m=!1;return{layer:i,listener:c,delegates:{mousemove:O=>{(this.getLayer(i)?this.queryRenderedFeatures(O.point,{layers:[i]}):[]).length?m=!0:m&&(m=!1,c.call(this,new _o(f,this,O.originalEvent)))},mouseout:O=>{m&&(m=!1,c.call(this,new _o(f,this,O.originalEvent)))}}}}{const m=v=>{const E=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];E.length&&(v.features=E,c.call(this,v),delete v.features)};return{layer:i,listener:c,delegates:{[f]:m}}}}on(f,i,c){if(void 0===c)return super.on(f,i);const m=this._createDelegatedListener(f,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(f,i,c){if(void 0===c)return super.once(f,i);const m=this._createDelegatedListener(f,i,c);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(f,i,c){return void 0===c?super.off(f,i):(this._delegatedListeners&&this._delegatedListeners[f]&&(m=>{const v=this._delegatedListeners[f];for(let E=0;E<v.length;E++){const O=v[E];if(O.layer===i&&O.listener===c){for(const G in O.delegates)this.off(G,O.delegates[G]);return v.splice(E,1),this}}})(),this)}queryRenderedFeatures(f,i){if(!this.style)return[];let c;if(void 0!==i||void 0===f||f instanceof g.pointGeometry||Array.isArray(f)||(i=f,f=void 0),i=i||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof g.pointGeometry||"number"==typeof f[0])c=[g.pointGeometry.convert(f)];else{const m=g.pointGeometry.convert(f[0]),v=g.pointGeometry.convert(f[1]);c=[m,new g.pointGeometry(v.x,m.y),v,new g.pointGeometry(m.x,v.y),m]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}setStyle(f,i){return!1!==(i=g.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(f,i))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const i=this._locale[f];if(null==i)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new Pn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof f?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if("string"==typeof f){const c=this._requestManager.transformRequest(f,g.ResourceType.Style);g.getJSON(c,(m,v)=>{m?this.fire(new g.ErrorEvent(m)):v&&this._updateDiff(v,i)})}else"object"==typeof f&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(c){g.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():g.warnOnce("There is no style added to the map.")}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){const i=this.style&&this.style.sourceCaches[f];if(void 0!==i)return i.loaded();this.fire(new g.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const i in f){const c=f[i]._tiles;for(const m in c){const v=c[m];if("loaded"!==v.state&&"errored"!==v.state)return!1}}return!0}addSourceType(f,i,c){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,c)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:c=1,sdf:m=!1,stretchX:v,stretchY:E,content:O}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||g.isImageBitmap(i)){const{width:G,height:Y,data:oe}=g.exported.getImageData(i);this.style.addImage(f,{data:new g.RGBAImage({width:G,height:Y},oe),pixelRatio:c,stretchX:v,stretchY:E,content:O,sdf:m,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:Y,data:oe}=i,ce=i;this.style.addImage(f,{data:new g.RGBAImage({width:G,height:Y},new Uint8Array(oe)),pixelRatio:c,stretchX:v,stretchY:E,content:O,sdf:m,version:0,userImage:ce}),ce.onAdd&&ce.onAdd(this,f)}}}updateImage(f,i){const c=this.style.getImage(f);if(!c)return this.fire(new g.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||g.isImageBitmap(i)?g.exported.getImageData(i):i,{width:v,height:E,data:O}=m;if(void 0===v||void 0===E)return this.fire(new g.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||E!==c.data.height)return this.fire(new g.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const G=!(i instanceof HTMLImageElement||g.isImageBitmap(i));c.data.replace(O,G),this.style.updateImage(f,c)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new g.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){g.getImage(this._requestManager.transformRequest(f,g.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,c){return this.style.setLayerZoomRange(f,i,c),this._update(!0)}setFilter(f,i,c={}){return this.style.setFilter(f,i,c),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,c,m={}){return this.style.setPaintProperty(f,i,c,m),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,c,m={}){return this.style.setLayoutProperty(f,i,c,m),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,i=0;return this._container&&(f=this._container.clientWidth||400,i=this._container.clientHeight||300),[f,i]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=he.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=he.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions();this._resizeCanvas(c[0],c[1]);const m=this._controlContainer=he.create("div","maplibregl-control-container mapboxgl-control-container",f),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{v[E]=he.create("div",`maplibregl-ctrl-${E} mapboxgl-ctrl-${E}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const c=devicePixelRatio||1;this._canvas.width=c*f,this._canvas.height=c*i,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const f=g.extend({},$e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(this.painter=new zi(i,this.transform),g.exported$1.testSupport(i)):this.fire(new g.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new g.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new g.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let i,c=0;const m=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,i),c=g.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,G=g.exported.now();this.style.zoomHistory.update(O,G);const Y=new g.EvaluationParameters(O,{now:G,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=Y.crossFadingFactor();1===oe&&oe===this._crossFadingFactor||(v=!0,this._crossFadingFactor=oe),this.style.update(Y)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new g.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new g.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const O=g.exported.now()-c;m.endQueryEXT(m.TIME_ELAPSED_EXT,i),setTimeout(()=>{const G=m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(i),this.fire(new g.Event("gpu-timing-frame",{cpuTime:O,gpuTime:G}))},50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout(()=>{const G=this.painter.queryGpuTimers(O);this.fire(new g.Event("gpu-timing-layer",{layerTimes:G}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new g.Event("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),he.remove(this._canvasContainer),he.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new g.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=g.exported.frame(f=>{this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){g.setCacheLimits(f,i)}},NavigationControl:class{constructor(f){this.options=g.extend({},ia,f),this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(g.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(g.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),i=f===this._map.getMaxZoom(),c=f===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new z(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){he.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,i){const c=he.create("button",f,this._container);return c.type="button",c.addEventListener("click",i),c}_setButtonTitle(f,i){const c=this._map._getUIString(`NavigationControl.${i}`);f.title=c,f.setAttribute("aria-label",c)}},GeolocateControl:class extends g.Evented{constructor(f){super(),this.options=g.extend({},xe,f),g.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var i;return this._map=f,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Ue?i(Ue):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(c=>{Ue="denied"!==c.state,i(Ue)}):(Ue=!!window.navigator.geolocation,i(Ue)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),he.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Re=0,xt=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),c=f.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new g.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(f),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new g.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new g.LngLat(f.coords.longitude,f.coords.latitude),c=f.coords.accuracy,m=this._map.getBearing(),v=g.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(c),v,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new g.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,i=this._map.unproject([0,f]),c=this._map.unproject([1,f]),m=i.distanceTo(c),v=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(1===f.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===f.code&&xt)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new g.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=he.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===f){g.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=he.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new re(this._dotElement),this._circleElement=he.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new re({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new g.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return g.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new g.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Re--,xt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new g.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new g.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Re++,Re>1?(f={maximumAge:6e5,timeout:0},xt=!0):(f=this.options.positionOptions,xt=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ha,ScaleControl:class{constructor(f){this.options=g.extend({},ri,f),g.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ji(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=he.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){he.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Ji(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:g.warnOnce("Full screen control 'container' must be a DOM element.")),g.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=he.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",g.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){he.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=he.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);he.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends g.Evented{constructor(f){super(),this.options=g.extend(Object.create(Zi),f),g.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new g.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&he.remove(this._content),this._container&&(he.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new g.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=g.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const i=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=f;m=c.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=he.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=he.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=he.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=he.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=P(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const i=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let c=this.options.anchor;const m=Yo(this.options.offset);if(!c){const E=this._container.offsetWidth,O=this._container.offsetHeight;let G;G=i.y+m.bottom.y<O?["top"]:i.y>this._map.transform.height-O?["bottom"]:[],i.x<E/2?G.push("left"):i.x>this._map.transform.width-E/2&&G.push("right"),c=0===G.length?"bottom":G.join("-")}const v=i.add(m[c]).round();he.setTransform(this._container,`${A[c]} translate(${v.x}px,${v.y}px)`),X(this._container,c,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(yr);f&&f.focus()}_onClose(){this.remove()}},Marker:re,Style:Pn,LngLat:g.LngLat,LngLatBounds:g.LngLatBounds,Point:g.pointGeometry,MercatorCoordinate:g.MercatorCoordinate,Evented:g.Evented,config:g.config,prewarm:function(){Jn().acquire(kt)},clearPrewarmedResources:function(){const f=Bn;f&&(f.isPreloaded()&&1===f.numActive()?(f.release(kt),Bn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return ln.workerCount},set workerCount(f){ln.workerCount=f},get maxParallelImageRequests(){return g.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){g.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){g.clearTileCache(f)},workerUrl:"",addProtocol(f,i){g.config.REGISTERED_PROTOCOLS[f]=i},removeProtocol(f){delete g.config.REGISTERED_PROTOCOLS[f]}};return So}),D}()},1777:(On,wt,V)=>{"use strict";V.d(wt,{l3:()=>q,_j:()=>D,LC:()=>l,ZN:()=>Vt,jt:()=>$e,pV:()=>gt,F4:()=>Ve,IO:()=>tt,vP:()=>Oe,SB:()=>he,oB:()=>Le,eR:()=>Ze,X$:()=>g,ZE:()=>Ht,k1:()=>an});class D{}class l{}const q="*";function g(Dt,Fe){return{type:7,name:Dt,definitions:Fe,options:{}}}function $e(Dt,Fe=null){return{type:4,styles:Fe,timings:Dt}}function Oe(Dt,Fe=null){return{type:2,steps:Dt,options:Fe}}function Le(Dt){return{type:6,styles:Dt,offset:null}}function he(Dt,Fe,rt){return{type:0,name:Dt,styles:Fe,options:rt}}function Ve(Dt){return{type:5,steps:Dt}}function Ze(Dt,Fe,rt=null){return{type:1,expr:Dt,animation:Fe,options:rt}}function gt(Dt=null){return{type:9,options:Dt}}function tt(Dt,Fe,rt=null){return{type:11,selector:Dt,animation:Fe,options:rt}}function He(Dt){Promise.resolve(null).then(Dt)}class Vt{constructor(Fe=0,rt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Fe+rt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Fe=>Fe()),this._onDoneFns=[])}onStart(Fe){this._onStartFns.push(Fe)}onDone(Fe){this._onDoneFns.push(Fe)}onDestroy(Fe){this._onDestroyFns.push(Fe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){He(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Fe=>Fe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Fe=>Fe()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Fe){this._position=this.totalTime?Fe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Fe){const rt="start"==Fe?this._onStartFns:this._onDoneFns;rt.forEach(nn=>nn()),rt.length=0}}class Ht{constructor(Fe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Fe;let rt=0,nn=0,Bt=0;const Qt=this.players.length;0==Qt?He(()=>this._onFinish()):this.players.forEach(at=>{at.onDone(()=>{++rt==Qt&&this._onFinish()}),at.onDestroy(()=>{++nn==Qt&&this._onDestroy()}),at.onStart(()=>{++Bt==Qt&&this._onStart()})}),this.totalTime=this.players.reduce((at,mt)=>Math.max(at,mt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Fe=>Fe()),this._onDoneFns=[])}init(){this.players.forEach(Fe=>Fe.init())}onStart(Fe){this._onStartFns.push(Fe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Fe=>Fe()),this._onStartFns=[])}onDone(Fe){this._onDoneFns.push(Fe)}onDestroy(Fe){this._onDestroyFns.push(Fe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Fe=>Fe.play())}pause(){this.players.forEach(Fe=>Fe.pause())}restart(){this.players.forEach(Fe=>Fe.restart())}finish(){this._onFinish(),this.players.forEach(Fe=>Fe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Fe=>Fe.destroy()),this._onDestroyFns.forEach(Fe=>Fe()),this._onDestroyFns=[])}reset(){this.players.forEach(Fe=>Fe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Fe){const rt=Fe*this.totalTime;this.players.forEach(nn=>{const Bt=nn.totalTime?Math.min(1,rt/nn.totalTime):1;nn.setPosition(Bt)})}getPosition(){const Fe=this.players.reduce((rt,nn)=>null===rt||nn.totalTime>rt.totalTime?nn:rt,null);return null!=Fe?Fe.getPosition():0}beforeDestroy(){this.players.forEach(Fe=>{Fe.beforeDestroy&&Fe.beforeDestroy()})}triggerCallback(Fe){const rt="start"==Fe?this._onStartFns:this._onDoneFns;rt.forEach(nn=>nn()),rt.length=0}}const an="!"},5664:(On,wt,V)=>{"use strict";V.d(wt,{rt:()=>pt,s1:()=>yn,$s:()=>lt,Em:()=>di,tE:()=>hn,qV:()=>Bi,qm:()=>Rt,ic:()=>kn,Kd:()=>_n,X6:()=>$,yG:()=>U});var D=V(9808),l=V(5e3),q=V(7579),g=V(727),$e=V(1135),Ke=V(9646),Oe=V(1159),Le=V(8505),he=V(8372),Ve=V(9300),Ze=V(4004),Be=V(5698),gt=V(5684),Ye=V(1884),tt=V(2722),Mt=V(3191),He=V(925),Vt=V(7144);function Fe(we,Ae){return(we.getAttribute(Ae)||"").match(/\S+/g)||[]}const rt="cdk-describedby-message-container",nn="cdk-describedby-message",Bt="cdk-describedby-host";let Qt=0;const at=new Map;let mt=null,lt=(()=>{class we{constructor(ye){this._document=ye}describe(ye,dt,It){if(!this._canBeDescribed(ye,dt))return;const xn=At(dt,It);"string"!=typeof dt?(Kt(dt),at.set(xn,{messageElement:dt,referenceCount:0})):at.has(xn)||this._createMessageElement(dt,It),this._isElementDescribedByMessage(ye,xn)||this._addMessageReference(ye,xn)}removeDescription(ye,dt,It){if(!dt||!this._isElementNode(ye))return;const xn=At(dt,It);if(this._isElementDescribedByMessage(ye,xn)&&this._removeMessageReference(ye,xn),"string"==typeof dt){const Ei=at.get(xn);Ei&&0===Ei.referenceCount&&this._deleteMessageElement(xn)}mt&&0===mt.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const ye=this._document.querySelectorAll(`[${Bt}]`);for(let dt=0;dt<ye.length;dt++)this._removeCdkDescribedByReferenceIds(ye[dt]),ye[dt].removeAttribute(Bt);mt&&this._deleteMessagesContainer(),at.clear()}_createMessageElement(ye,dt){const It=this._document.createElement("div");Kt(It),It.textContent=ye,dt&&It.setAttribute("role",dt),this._createMessagesContainer(),mt.appendChild(It),at.set(At(ye,dt),{messageElement:It,referenceCount:0})}_deleteMessageElement(ye){var dt;const It=at.get(ye);null===(dt=null==It?void 0:It.messageElement)||void 0===dt||dt.remove(),at.delete(ye)}_createMessagesContainer(){if(!mt){const ye=this._document.getElementById(rt);null==ye||ye.remove(),mt=this._document.createElement("div"),mt.id=rt,mt.style.visibility="hidden",mt.classList.add("cdk-visually-hidden"),this._document.body.appendChild(mt)}}_deleteMessagesContainer(){mt&&(mt.remove(),mt=null)}_removeCdkDescribedByReferenceIds(ye){const dt=Fe(ye,"aria-describedby").filter(It=>0!=It.indexOf(nn));ye.setAttribute("aria-describedby",dt.join(" "))}_addMessageReference(ye,dt){const It=at.get(dt);(function an(we,Ae,ye){const dt=Fe(we,Ae);dt.some(It=>It.trim()==ye.trim())||(dt.push(ye.trim()),we.setAttribute(Ae,dt.join(" ")))})(ye,"aria-describedby",It.messageElement.id),ye.setAttribute(Bt,""),It.referenceCount++}_removeMessageReference(ye,dt){const It=at.get(dt);It.referenceCount--,function Dt(we,Ae,ye){const It=Fe(we,Ae).filter(xn=>xn!=ye.trim());It.length?we.setAttribute(Ae,It.join(" ")):we.removeAttribute(Ae)}(ye,"aria-describedby",It.messageElement.id),ye.removeAttribute(Bt)}_isElementDescribedByMessage(ye,dt){const It=Fe(ye,"aria-describedby"),xn=at.get(dt),Ei=xn&&xn.messageElement.id;return!!Ei&&-1!=It.indexOf(Ei)}_canBeDescribed(ye,dt){if(!this._isElementNode(ye))return!1;if(dt&&"object"==typeof dt)return!0;const It=null==dt?"":`${dt}`.trim(),xn=ye.getAttribute("aria-label");return!(!It||xn&&xn.trim()===It)}_isElementNode(ye){return ye.nodeType===this._document.ELEMENT_NODE}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(D.K0))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function At(we,Ae){return"string"==typeof we?`${Ae||""}/${we}`:we}function Kt(we){we.id||(we.id=`${nn}-${Qt++}`)}class Ct{constructor(Ae){this._items=Ae,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new q.x,this._typeaheadSubscription=g.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=ye=>ye.disabled,this._pressedLetters=[],this.tabOut=new q.x,this.change=new q.x,Ae instanceof l.n_E&&Ae.changes.subscribe(ye=>{if(this._activeItem){const It=ye.toArray().indexOf(this._activeItem);It>-1&&It!==this._activeItemIndex&&(this._activeItemIndex=It)}})}skipPredicate(Ae){return this._skipPredicateFn=Ae,this}withWrap(Ae=!0){return this._wrap=Ae,this}withVerticalOrientation(Ae=!0){return this._vertical=Ae,this}withHorizontalOrientation(Ae){return this._horizontal=Ae,this}withAllowedModifierKeys(Ae){return this._allowedModifierKeys=Ae,this}withTypeAhead(Ae=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Le.b)(ye=>this._pressedLetters.push(ye)),(0,he.b)(Ae),(0,Ve.h)(()=>this._pressedLetters.length>0),(0,Ze.U)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const dt=this._getItemsArray();for(let It=1;It<dt.length+1;It++){const xn=(this._activeItemIndex+It)%dt.length,Ei=dt[xn];if(!this._skipPredicateFn(Ei)&&0===Ei.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(xn);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Ae=!0){return this._homeAndEnd=Ae,this}setActiveItem(Ae){const ye=this._activeItem;this.updateActiveItem(Ae),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(Ae){const ye=Ae.keyCode,It=["altKey","ctrlKey","metaKey","shiftKey"].every(xn=>!Ae[xn]||this._allowedModifierKeys.indexOf(xn)>-1);switch(ye){case Oe.Mf:return void this.tabOut.next();case Oe.JH:if(this._vertical&&It){this.setNextItemActive();break}return;case Oe.LH:if(this._vertical&&It){this.setPreviousItemActive();break}return;case Oe.SV:if(this._horizontal&&It){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Oe.oh:if(this._horizontal&&It){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Oe.Sd:if(this._homeAndEnd&&It){this.setFirstItemActive();break}return;case Oe.uR:if(this._homeAndEnd&&It){this.setLastItemActive();break}return;default:return void((It||(0,Oe.Vb)(Ae,"shiftKey"))&&(Ae.key&&1===Ae.key.length?this._letterKeyStream.next(Ae.key.toLocaleUpperCase()):(ye>=Oe.A&&ye<=Oe.Z||ye>=Oe.xE&&ye<=Oe.aO)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],Ae.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Ae){const ye=this._getItemsArray(),dt="number"==typeof Ae?Ae:ye.indexOf(Ae),It=ye[dt];this._activeItem=null==It?null:It,this._activeItemIndex=dt}_setActiveItemByDelta(Ae){this._wrap?this._setActiveInWrapMode(Ae):this._setActiveInDefaultMode(Ae)}_setActiveInWrapMode(Ae){const ye=this._getItemsArray();for(let dt=1;dt<=ye.length;dt++){const It=(this._activeItemIndex+Ae*dt+ye.length)%ye.length;if(!this._skipPredicateFn(ye[It]))return void this.setActiveItem(It)}}_setActiveInDefaultMode(Ae){this._setActiveItemByIndex(this._activeItemIndex+Ae,Ae)}_setActiveItemByIndex(Ae,ye){const dt=this._getItemsArray();if(dt[Ae]){for(;this._skipPredicateFn(dt[Ae]);)if(!dt[Ae+=ye])return;this.setActiveItem(Ae)}}_getItemsArray(){return this._items instanceof l.n_E?this._items.toArray():this._items}}class yn extends Ct{setActiveItem(Ae){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(Ae),this.activeItem&&this.activeItem.setActiveStyles()}}class di extends Ct{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Ae){return this._origin=Ae,this}setActiveItem(Ae){super.setActiveItem(Ae),this.activeItem&&this.activeItem.focus(this._origin)}}let kn=(()=>{class we{constructor(ye){this._platform=ye}isDisabled(ye){return ye.hasAttribute("disabled")}isVisible(ye){return function ki(we){return!!(we.offsetWidth||we.offsetHeight||"function"==typeof we.getClientRects&&we.getClientRects().length)}(ye)&&"visible"===getComputedStyle(ye).visibility}isTabbable(ye){if(!this._platform.isBrowser)return!1;const dt=function Rn(we){try{return we.frameElement}catch(Ae){return null}}(function Bn(we){return we.ownerDocument&&we.ownerDocument.defaultView||window}(ye));if(dt&&(-1===kt(dt)||!this.isVisible(dt)))return!1;let It=ye.nodeName.toLowerCase(),xn=kt(ye);return ye.hasAttribute("contenteditable")?-1!==xn:!("iframe"===It||"object"===It||this._platform.WEBKIT&&this._platform.IOS&&!function ln(we){let Ae=we.nodeName.toLowerCase(),ye="input"===Ae&&we.type;return"text"===ye||"password"===ye||"select"===Ae||"textarea"===Ae}(ye))&&("audio"===It?!!ye.hasAttribute("controls")&&-1!==xn:"video"===It?-1!==xn&&(null!==xn||this._platform.FIREFOX||ye.hasAttribute("controls")):ye.tabIndex>=0)}isFocusable(ye,dt){return function gn(we){return!function sr(we){return function In(we){return"input"==we.nodeName.toLowerCase()}(we)&&"hidden"==we.type}(we)&&(function hi(we){let Ae=we.nodeName.toLowerCase();return"input"===Ae||"select"===Ae||"button"===Ae||"textarea"===Ae}(we)||function xi(we){return function Qn(we){return"a"==we.nodeName.toLowerCase()}(we)&&we.hasAttribute("href")}(we)||we.hasAttribute("contenteditable")||ft(we))}(ye)&&!this.isDisabled(ye)&&((null==dt?void 0:dt.ignoreVisibility)||this.isVisible(ye))}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(He.t4))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function ft(we){if(!we.hasAttribute("tabindex")||void 0===we.tabIndex)return!1;let Ae=we.getAttribute("tabindex");return!(!Ae||isNaN(parseInt(Ae,10)))}function kt(we){if(!ft(we))return null;const Ae=parseInt(we.getAttribute("tabindex")||"",10);return isNaN(Ae)?-1:Ae}class Jn{constructor(Ae,ye,dt,It,xn=!1){this._element=Ae,this._checker=ye,this._ngZone=dt,this._document=It,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,xn||this.attachAnchors()}get enabled(){return this._enabled}set enabled(Ae){this._enabled=Ae,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ae,this._startAnchor),this._toggleAnchorTabIndex(Ae,this._endAnchor))}destroy(){const Ae=this._startAnchor,ye=this._endAnchor;Ae&&(Ae.removeEventListener("focus",this.startAnchorListener),Ae.remove()),ye&&(ye.removeEventListener("focus",this.endAnchorListener),ye.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusInitialElement(Ae)))})}focusFirstTabbableElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusFirstTabbableElement(Ae)))})}focusLastTabbableElementWhenReady(Ae){return new Promise(ye=>{this._executeOnStable(()=>ye(this.focusLastTabbableElement(Ae)))})}_getRegionBoundary(Ae){const ye=this._element.querySelectorAll(`[cdk-focus-region-${Ae}], [cdkFocusRegion${Ae}], [cdk-focus-${Ae}]`);return"start"==Ae?ye.length?ye[0]:this._getFirstTabbableElement(this._element):ye.length?ye[ye.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(Ae){const ye=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(ye){if(!this._checker.isFocusable(ye)){const dt=this._getFirstTabbableElement(ye);return null==dt||dt.focus(Ae),!!dt}return ye.focus(Ae),!0}return this.focusFirstTabbableElement(Ae)}focusFirstTabbableElement(Ae){const ye=this._getRegionBoundary("start");return ye&&ye.focus(Ae),!!ye}focusLastTabbableElement(Ae){const ye=this._getRegionBoundary("end");return ye&&ye.focus(Ae),!!ye}hasAttached(){return this._hasAttached}_getFirstTabbableElement(Ae){if(this._checker.isFocusable(Ae)&&this._checker.isTabbable(Ae))return Ae;const ye=Ae.children;for(let dt=0;dt<ye.length;dt++){const It=ye[dt].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ye[dt]):null;if(It)return It}return null}_getLastTabbableElement(Ae){if(this._checker.isFocusable(Ae)&&this._checker.isTabbable(Ae))return Ae;const ye=Ae.children;for(let dt=ye.length-1;dt>=0;dt--){const It=ye[dt].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ye[dt]):null;if(It)return It}return null}_createAnchor(){const Ae=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,Ae),Ae.classList.add("cdk-visually-hidden"),Ae.classList.add("cdk-focus-trap-anchor"),Ae.setAttribute("aria-hidden","true"),Ae}_toggleAnchorTabIndex(Ae,ye){Ae?ye.setAttribute("tabindex","0"):ye.removeAttribute("tabindex")}toggleAnchors(Ae){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(Ae,this._startAnchor),this._toggleAnchorTabIndex(Ae,this._endAnchor))}_executeOnStable(Ae){this._ngZone.isStable?Ae():this._ngZone.onStable.pipe((0,Be.q)(1)).subscribe(Ae)}}let Bi=(()=>{class we{constructor(ye,dt,It){this._checker=ye,this._ngZone=dt,this._document=It}create(ye,dt=!1){return new Jn(ye,this._checker,this._ngZone,this._document,dt)}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(kn),l.LFG(l.R0b),l.LFG(D.K0))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function $(we){return 0===we.buttons||0===we.offsetX&&0===we.offsetY}function U(we){const Ae=we.touches&&we.touches[0]||we.changedTouches&&we.changedTouches[0];return!(!Ae||-1!==Ae.identifier||null!=Ae.radiusX&&1!==Ae.radiusX||null!=Ae.radiusY&&1!==Ae.radiusY)}const R=new l.OlP("cdk-input-modality-detector-options"),N={ignoreKeys:[Oe.zL,Oe.jx,Oe.b2,Oe.MW,Oe.JU]},fe=(0,He.i$)({passive:!0,capture:!0});let nt=(()=>{class we{constructor(ye,dt,It,xn){this._platform=ye,this._mostRecentTarget=null,this._modality=new $e.X(null),this._lastTouchMs=0,this._onKeydown=Ei=>{var Gi,er;(null===(er=null===(Gi=this._options)||void 0===Gi?void 0:Gi.ignoreKeys)||void 0===er?void 0:er.some(Tt=>Tt===Ei.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,He.sA)(Ei))},this._onMousedown=Ei=>{Date.now()-this._lastTouchMs<650||(this._modality.next($(Ei)?"keyboard":"mouse"),this._mostRecentTarget=(0,He.sA)(Ei))},this._onTouchstart=Ei=>{U(Ei)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,He.sA)(Ei))},this._options=Object.assign(Object.assign({},N),xn),this.modalityDetected=this._modality.pipe((0,gt.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ye.x)()),ye.isBrowser&&dt.runOutsideAngular(()=>{It.addEventListener("keydown",this._onKeydown,fe),It.addEventListener("mousedown",this._onMousedown,fe),It.addEventListener("touchstart",this._onTouchstart,fe)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fe),document.removeEventListener("mousedown",this._onMousedown,fe),document.removeEventListener("touchstart",this._onTouchstart,fe))}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(He.t4),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(R,8))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const Et=new l.OlP("liveAnnouncerElement",{providedIn:"root",factory:function _t(){return null}}),fn=new l.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let _n=(()=>{class we{constructor(ye,dt,It,xn){this._ngZone=dt,this._defaultOptions=xn,this._document=It,this._liveElement=ye||this._createLiveElement()}announce(ye,...dt){const It=this._defaultOptions;let xn,Ei;return 1===dt.length&&"number"==typeof dt[0]?Ei=dt[0]:[xn,Ei]=dt,this.clear(),clearTimeout(this._previousTimeout),xn||(xn=It&&It.politeness?It.politeness:"polite"),null==Ei&&It&&(Ei=It.duration),this._liveElement.setAttribute("aria-live",xn),this._ngZone.runOutsideAngular(()=>new Promise(Gi=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ye,Gi(),"number"==typeof Ei&&(this._previousTimeout=setTimeout(()=>this.clear(),Ei))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var ye;clearTimeout(this._previousTimeout),null===(ye=this._liveElement)||void 0===ye||ye.remove(),this._liveElement=null}_createLiveElement(){const ye="cdk-live-announcer-element",dt=this._document.getElementsByClassName(ye),It=this._document.createElement("div");for(let xn=0;xn<dt.length;xn++)dt[xn].remove();return It.classList.add(ye),It.classList.add("cdk-visually-hidden"),It.setAttribute("aria-atomic","true"),It.setAttribute("aria-live","polite"),this._document.body.appendChild(It),It}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(Et,8),l.LFG(l.R0b),l.LFG(D.K0),l.LFG(fn,8))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const Fi=new l.OlP("cdk-focus-monitor-default-options"),Jt=(0,He.i$)({passive:!0,capture:!0});let hn=(()=>{class we{constructor(ye,dt,It,xn,Ei){this._ngZone=ye,this._platform=dt,this._inputModalityDetector=It,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q.x,this._rootNodeFocusAndBlurListener=Gi=>{const er=(0,He.sA)(Gi),Tt="focus"===Gi.type?this._onFocus:this._onBlur;for(let it=er;it;it=it.parentElement)Tt.call(this,Gi,it)},this._document=xn,this._detectionMode=(null==Ei?void 0:Ei.detectionMode)||0}monitor(ye,dt=!1){const It=(0,Mt.fI)(ye);if(!this._platform.isBrowser||1!==It.nodeType)return(0,Ke.of)(null);const xn=(0,He.kV)(It)||this._getDocument(),Ei=this._elementInfo.get(It);if(Ei)return dt&&(Ei.checkChildren=!0),Ei.subject;const Gi={checkChildren:dt,subject:new q.x,rootNode:xn};return this._elementInfo.set(It,Gi),this._registerGlobalListeners(Gi),Gi.subject}stopMonitoring(ye){const dt=(0,Mt.fI)(ye),It=this._elementInfo.get(dt);It&&(It.subject.complete(),this._setClasses(dt),this._elementInfo.delete(dt),this._removeGlobalListeners(It))}focusVia(ye,dt,It){const xn=(0,Mt.fI)(ye);xn===this._getDocument().activeElement?this._getClosestElementsInfo(xn).forEach(([Gi,er])=>this._originChanged(Gi,dt,er)):(this._setOrigin(dt),"function"==typeof xn.focus&&xn.focus(It))}ngOnDestroy(){this._elementInfo.forEach((ye,dt)=>this.stopMonitoring(dt))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(ye){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ye)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(ye){return 1===this._detectionMode||!!(null==ye?void 0:ye.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(ye,dt){ye.classList.toggle("cdk-focused",!!dt),ye.classList.toggle("cdk-touch-focused","touch"===dt),ye.classList.toggle("cdk-keyboard-focused","keyboard"===dt),ye.classList.toggle("cdk-mouse-focused","mouse"===dt),ye.classList.toggle("cdk-program-focused","program"===dt)}_setOrigin(ye,dt=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ye,this._originFromTouchInteraction="touch"===ye&&dt,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ye,dt){const It=this._elementInfo.get(dt),xn=(0,He.sA)(ye);!It||!It.checkChildren&&dt!==xn||this._originChanged(dt,this._getFocusOrigin(xn),It)}_onBlur(ye,dt){const It=this._elementInfo.get(dt);!It||It.checkChildren&&ye.relatedTarget instanceof Node&&dt.contains(ye.relatedTarget)||(this._setClasses(dt),this._emitOrigin(It.subject,null))}_emitOrigin(ye,dt){this._ngZone.run(()=>ye.next(dt))}_registerGlobalListeners(ye){if(!this._platform.isBrowser)return;const dt=ye.rootNode,It=this._rootNodeFocusListenerCount.get(dt)||0;It||this._ngZone.runOutsideAngular(()=>{dt.addEventListener("focus",this._rootNodeFocusAndBlurListener,Jt),dt.addEventListener("blur",this._rootNodeFocusAndBlurListener,Jt)}),this._rootNodeFocusListenerCount.set(dt,It+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,tt.R)(this._stopInputModalityDetector)).subscribe(xn=>{this._setOrigin(xn,!0)}))}_removeGlobalListeners(ye){const dt=ye.rootNode;if(this._rootNodeFocusListenerCount.has(dt)){const It=this._rootNodeFocusListenerCount.get(dt);It>1?this._rootNodeFocusListenerCount.set(dt,It-1):(dt.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Jt),dt.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Jt),this._rootNodeFocusListenerCount.delete(dt))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ye,dt,It){this._setClasses(ye,dt),this._emitOrigin(It.subject,dt),this._lastFocusOrigin=dt}_getClosestElementsInfo(ye){const dt=[];return this._elementInfo.forEach((It,xn)=>{(xn===ye||It.checkChildren&&xn.contains(ye))&&dt.push([xn,It])}),dt}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(l.R0b),l.LFG(He.t4),l.LFG(nt),l.LFG(D.K0,8),l.LFG(Fi,8))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const Oi="cdk-high-contrast-black-on-white",Wn="cdk-high-contrast-white-on-black",Vn="cdk-high-contrast-active";let Rt=(()=>{class we{constructor(ye,dt){this._platform=ye,this._document=dt}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const dt=this._document.defaultView||window,It=dt&&dt.getComputedStyle?dt.getComputedStyle(ye):null,xn=(It&&It.backgroundColor||"").replace(/ /g,"");switch(ye.remove(),xn){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(Vn),ye.remove(Oi),ye.remove(Wn),this._hasCheckedHighContrastMode=!0;const dt=this.getHighContrastMode();1===dt?(ye.add(Vn),ye.add(Oi)):2===dt&&(ye.add(Vn),ye.add(Wn))}}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(He.t4),l.LFG(D.K0))},we.\u0275prov=l.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})(),pt=(()=>{class we{constructor(ye){ye._applyBodyHighContrastModeCssClasses()}}return we.\u0275fac=function(ye){return new(ye||we)(l.LFG(Rt))},we.\u0275mod=l.oAB({type:we}),we.\u0275inj=l.cJS({imports:[[He.ud,Vt.Q8]]}),we})()},226:(On,wt,V)=>{"use strict";V.d(wt,{vT:()=>he,Is:()=>Oe});var D=V(5e3),l=V(9808);const q=new D.OlP("cdk-dir-doc",{providedIn:"root",factory:function g(){return(0,D.f3M)(l.K0)}}),$e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Oe=(()=>{class Ve{constructor(Be){if(this.value="ltr",this.change=new D.vpe,Be){const Ye=Be.documentElement?Be.documentElement.dir:null;this.value=function Ke(Ve){const Ze=(null==Ve?void 0:Ve.toLowerCase())||"";return"auto"===Ze&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?$e.test(navigator.language)?"rtl":"ltr":"rtl"===Ze?"rtl":"ltr"}((Be.body?Be.body.dir:null)||Ye||"ltr")}}ngOnDestroy(){this.change.complete()}}return Ve.\u0275fac=function(Be){return new(Be||Ve)(D.LFG(q,8))},Ve.\u0275prov=D.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),he=(()=>{class Ve{}return Ve.\u0275fac=function(Be){return new(Be||Ve)},Ve.\u0275mod=D.oAB({type:Ve}),Ve.\u0275inj=D.cJS({}),Ve})()},3191:(On,wt,V)=>{"use strict";V.d(wt,{Eq:()=>$e,Ig:()=>l,HM:()=>Ke,fI:()=>Oe,su:()=>q});var D=V(5e3);function l(he){return null!=he&&"false"!=`${he}`}function q(he,Ve=0){return function g(he){return!isNaN(parseFloat(he))&&!isNaN(Number(he))}(he)?Number(he):Ve}function $e(he){return Array.isArray(he)?he:[he]}function Ke(he){return null==he?"":"string"==typeof he?he:`${he}px`}function Oe(he){return he instanceof D.SBq?he.nativeElement:he}},449:(On,wt,V)=>{"use strict";V.d(wt,{Ov:()=>Le,A8:()=>Ve});var D=V(7579),l=V(5e3);class Le{constructor(gt=!1,Ye,tt=!0){this._multiple=gt,this._emitChanges=tt,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new D.x,Ye&&Ye.length&&(gt?Ye.forEach(Mt=>this._markSelected(Mt)):this._markSelected(Ye[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...gt){this._verifyValueAssignment(gt),gt.forEach(Ye=>this._markSelected(Ye)),this._emitChangeEvent()}deselect(...gt){this._verifyValueAssignment(gt),gt.forEach(Ye=>this._unmarkSelected(Ye)),this._emitChangeEvent()}toggle(gt){this.isSelected(gt)?this.deselect(gt):this.select(gt)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(gt){return this._selection.has(gt)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(gt){this._multiple&&this.selected&&this._selected.sort(gt)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(gt){this.isSelected(gt)||(this._multiple||this._unmarkAll(),this._selection.add(gt),this._emitChanges&&this._selectedToEmit.push(gt))}_unmarkSelected(gt){this.isSelected(gt)&&(this._selection.delete(gt),this._emitChanges&&this._deselectedToEmit.push(gt))}_unmarkAll(){this.isEmpty()||this._selection.forEach(gt=>this._unmarkSelected(gt))}_verifyValueAssignment(gt){}}let Ve=(()=>{class Be{constructor(){this._listeners=[]}notify(Ye,tt){for(let Mt of this._listeners)Mt(Ye,tt)}listen(Ye){return this._listeners.push(Ye),()=>{this._listeners=this._listeners.filter(tt=>Ye!==tt)}}ngOnDestroy(){this._listeners=[]}}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275prov=l.Yz7({token:Be,factory:Be.\u0275fac,providedIn:"root"}),Be})()},1159:(On,wt,V)=>{"use strict";V.d(wt,{A:()=>hi,zL:()=>Le,jx:()=>Oe,JH:()=>an,uR:()=>tt,K5:()=>$e,hY:()=>Ze,Sd:()=>Mt,oh:()=>He,b2:()=>Lo,MW:()=>_t,aO:()=>di,SV:()=>Ht,JU:()=>Ke,L_:()=>Be,Mf:()=>q,LH:()=>Vt,Z:()=>Et,xE:()=>Bt,Vb:()=>dr});const q=9,$e=13,Ke=16,Oe=17,Le=18,Ze=27,Be=32,tt=35,Mt=36,He=37,Vt=38,Ht=39,an=40,Bt=48,di=57,hi=65,Et=90,_t=91,Lo=224;function dr($i,...lo){return lo.length?lo.some(Zo=>$i[Zo]):$i.altKey||$i.shiftKey||$i.ctrlKey||$i.metaKey}},7144:(On,wt,V)=>{"use strict";V.d(wt,{wD:()=>Le,Q8:()=>he});var D=V(3191),l=V(5e3),q=V(8306),g=V(7579),$e=V(8372);let Ke=(()=>{class Ve{create(Be){return"undefined"==typeof MutationObserver?null:new MutationObserver(Be)}}return Ve.\u0275fac=function(Be){return new(Be||Ve)},Ve.\u0275prov=l.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),Oe=(()=>{class Ve{constructor(Be){this._mutationObserverFactory=Be,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((Be,gt)=>this._cleanupObserver(gt))}observe(Be){const gt=(0,D.fI)(Be);return new q.y(Ye=>{const Mt=this._observeElement(gt).subscribe(Ye);return()=>{Mt.unsubscribe(),this._unobserveElement(gt)}})}_observeElement(Be){if(this._observedElements.has(Be))this._observedElements.get(Be).count++;else{const gt=new g.x,Ye=this._mutationObserverFactory.create(tt=>gt.next(tt));Ye&&Ye.observe(Be,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(Be,{observer:Ye,stream:gt,count:1})}return this._observedElements.get(Be).stream}_unobserveElement(Be){this._observedElements.has(Be)&&(this._observedElements.get(Be).count--,this._observedElements.get(Be).count||this._cleanupObserver(Be))}_cleanupObserver(Be){if(this._observedElements.has(Be)){const{observer:gt,stream:Ye}=this._observedElements.get(Be);gt&&gt.disconnect(),Ye.complete(),this._observedElements.delete(Be)}}}return Ve.\u0275fac=function(Be){return new(Be||Ve)(l.LFG(Ke))},Ve.\u0275prov=l.Yz7({token:Ve,factory:Ve.\u0275fac,providedIn:"root"}),Ve})(),Le=(()=>{class Ve{constructor(Be,gt,Ye){this._contentObserver=Be,this._elementRef=gt,this._ngZone=Ye,this.event=new l.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(Be){this._disabled=(0,D.Ig)(Be),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(Be){this._debounce=(0,D.su)(Be),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const Be=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?Be.pipe((0,$e.b)(this.debounce)):Be).subscribe(this.event)})}_unsubscribe(){var Be;null===(Be=this._currentSubscription)||void 0===Be||Be.unsubscribe()}}return Ve.\u0275fac=function(Be){return new(Be||Ve)(l.Y36(Oe),l.Y36(l.SBq),l.Y36(l.R0b))},Ve.\u0275dir=l.lG2({type:Ve,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Ve})(),he=(()=>{class Ve{}return Ve.\u0275fac=function(Be){return new(Be||Ve)},Ve.\u0275mod=l.oAB({type:Ve}),Ve.\u0275inj=l.cJS({providers:[Ke]}),Ve})()},9776:(On,wt,V)=>{"use strict";V.d(wt,{pI:()=>Xi,xu:()=>Bi,aV:()=>gn,U8:()=>Xn});var D=V(8962),l=V(9808),q=V(5e3),g=V(3191),$e=V(925),Ke=V(226),Oe=V(7429),Le=V(7579),he=V(727),Ve=V(6451),Ze=V(4482),Be=V(5403),Ye=V(5698),tt=V(2722),Mt=V(1159);const He=(0,$e.Mq)();class Vt{constructor($,U){this._viewportRuler=$,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=U}attach(){}enable(){if(this._canBeEnabled()){const $=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=$.style.left||"",this._previousHTMLStyles.top=$.style.top||"",$.style.left=(0,g.HM)(-this._previousScrollPosition.left),$.style.top=(0,g.HM)(-this._previousScrollPosition.top),$.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const $=this._document.documentElement,R=$.style,N=this._document.body.style,ie=R.scrollBehavior||"",fe=N.scrollBehavior||"";this._isEnabled=!1,R.left=this._previousHTMLStyles.left,R.top=this._previousHTMLStyles.top,$.classList.remove("cdk-global-scrollblock"),He&&(R.scrollBehavior=N.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),He&&(R.scrollBehavior=ie,N.scrollBehavior=fe)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const U=this._document.body,R=this._viewportRuler.getViewportSize();return U.scrollHeight>R.height||U.scrollWidth>R.width}}class an{constructor($,U,R,N){this._scrollDispatcher=$,this._ngZone=U,this._viewportRuler=R,this._config=N,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach($){this._overlayRef=$}enable(){if(this._scrollSubscription)return;const $=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=$.subscribe(()=>{const U=this._viewportRuler.getViewportScrollPosition().top;Math.abs(U-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=$.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Dt{enable(){}disable(){}attach(){}}function Fe(St,$){return $.some(U=>St.bottom<U.top||St.top>U.bottom||St.right<U.left||St.left>U.right)}function rt(St,$){return $.some(U=>St.top<U.top||St.bottom>U.bottom||St.left<U.left||St.right>U.right)}class nn{constructor($,U,R,N){this._scrollDispatcher=$,this._viewportRuler=U,this._ngZone=R,this._config=N,this._scrollSubscription=null}attach($){this._overlayRef=$}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const U=this._overlayRef.overlayElement.getBoundingClientRect(),{width:R,height:N}=this._viewportRuler.getViewportSize();Fe(U,[{width:R,height:N,bottom:N,right:R,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Bt=(()=>{class St{constructor(U,R,N,ie){this._scrollDispatcher=U,this._viewportRuler=R,this._ngZone=N,this.noop=()=>new Dt,this.close=fe=>new an(this._scrollDispatcher,this._ngZone,this._viewportRuler,fe),this.block=()=>new Vt(this._viewportRuler,this._document),this.reposition=fe=>new nn(this._scrollDispatcher,this._viewportRuler,this._ngZone,fe),this._document=ie}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(D.mF),q.LFG(D.rL),q.LFG(q.R0b),q.LFG(l.K0))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})();class Qt{constructor($){if(this.scrollStrategy=new Dt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,$){const U=Object.keys($);for(const R of U)void 0!==$[R]&&(this[R]=$[R])}}}class lt{constructor($,U){this.connectionPair=$,this.scrollableViewProperties=U}}class Ct{constructor($,U,R,N,ie,fe,nt,Et,_t){this._portalOutlet=$,this._host=U,this._pane=R,this._config=N,this._ngZone=ie,this._keyboardDispatcher=fe,this._document=nt,this._location=Et,this._outsideClickDispatcher=_t,this._backdropElement=null,this._backdropClick=new Le.x,this._attachments=new Le.x,this._detachments=new Le.x,this._locationChanges=he.w0.EMPTY,this._backdropClickHandler=fn=>this._backdropClick.next(fn),this._keydownEvents=new Le.x,this._outsidePointerEvents=new Le.x,N.scrollStrategy&&(this._scrollStrategy=N.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=N.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach($){let U=this._portalOutlet.attach($);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Ye.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),U}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const $=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),$}dispose(){var $;const U=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===($=this._host)||void 0===$||$.remove(),this._previousHostParent=this._pane=this._host=null,U&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy($){$!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=$,this.hasAttached()&&($.attach(this),this.updatePosition()))}updateSize($){this._config=Object.assign(Object.assign({},this._config),$),this._updateElementSize()}setDirection($){this._config=Object.assign(Object.assign({},this._config),{direction:$}),this._updateElementDirection()}addPanelClass($){this._pane&&this._toggleClasses(this._pane,$,!0)}removePanelClass($){this._pane&&this._toggleClasses(this._pane,$,!1)}getDirection(){const $=this._config.direction;return $?"string"==typeof $?$:$.value:"ltr"}updateScrollStrategy($){$!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=$,this.hasAttached()&&($.attach(this),$.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const $=this._pane.style;$.width=(0,g.HM)(this._config.width),$.height=(0,g.HM)(this._config.height),$.minWidth=(0,g.HM)(this._config.minWidth),$.minHeight=(0,g.HM)(this._config.minHeight),$.maxWidth=(0,g.HM)(this._config.maxWidth),$.maxHeight=(0,g.HM)(this._config.maxHeight)}_togglePointerEvents($){this._pane.style.pointerEvents=$?"":"none"}_attachBackdrop(){const $="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add($)})}):this._backdropElement.classList.add($)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const $=this._backdropElement;if(!$)return;let U;const R=()=>{$&&($.removeEventListener("click",this._backdropClickHandler),$.removeEventListener("transitionend",R),this._disposeBackdrop($)),this._config.backdropClass&&this._toggleClasses($,this._config.backdropClass,!1),clearTimeout(U)};$.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{$.addEventListener("transitionend",R)}),$.style.pointerEvents="none",U=this._ngZone.runOutsideAngular(()=>setTimeout(R,500))}_toggleClasses($,U,R){const N=(0,g.Eq)(U||[]).filter(ie=>!!ie);N.length&&(R?$.classList.add(...N):$.classList.remove(...N))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const $=this._ngZone.onStable.pipe((0,tt.R)((0,Ve.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),$.unsubscribe())})})}_disposeScrollStrategy(){const $=this._scrollStrategy;$&&($.disable(),$.detach&&$.detach())}_disposeBackdrop($){$&&($.remove(),this._backdropElement===$&&(this._backdropElement=null))}}let yn=(()=>{class St{constructor(U,R){this._platform=R,this._document=U}ngOnDestroy(){var U;null===(U=this._containerElement)||void 0===U||U.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const U="cdk-overlay-container";if(this._platform.isBrowser||(0,$e.Oy)()){const N=this._document.querySelectorAll(`.${U}[platform="server"], .${U}[platform="test"]`);for(let ie=0;ie<N.length;ie++)N[ie].remove()}const R=this._document.createElement("div");R.classList.add(U),(0,$e.Oy)()?R.setAttribute("platform","test"):this._platform.isBrowser||R.setAttribute("platform","server"),this._document.body.appendChild(R),this._containerElement=R}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(l.K0),q.LFG($e.t4))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})();const di="cdk-overlay-connected-position-bounding-box",Ui=/([A-Za-z%]+)$/;class kn{constructor($,U,R,N,ie){this._viewportRuler=U,this._document=R,this._platform=N,this._overlayContainer=ie,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Le.x,this._resizeSubscription=he.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin($)}get positions(){return this._preferredPositions}attach($){this._validatePositions(),$.hostElement.classList.add(di),this._overlayRef=$,this._boundingBox=$.hostElement,this._pane=$.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const $=this._originRect,U=this._overlayRect,R=this._viewportRect,N=this._containerRect,ie=[];let fe;for(let nt of this._preferredPositions){let Et=this._getOriginPoint($,N,nt),_t=this._getOverlayPoint(Et,U,nt),fn=this._getOverlayFit(_t,U,R,nt);if(fn.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(nt,Et);this._canFitWithFlexibleDimensions(fn,_t,R)?ie.push({position:nt,origin:Et,overlayRect:U,boundingBoxRect:this._calculateBoundingBoxRect(Et,nt)}):(!fe||fe.overlayFit.visibleArea<fn.visibleArea)&&(fe={overlayFit:fn,overlayPoint:_t,originPoint:Et,position:nt,overlayRect:U})}if(ie.length){let nt=null,Et=-1;for(const _t of ie){const fn=_t.boundingBoxRect.width*_t.boundingBoxRect.height*(_t.position.weight||1);fn>Et&&(Et=fn,nt=_t)}return this._isPushed=!1,void this._applyPosition(nt.position,nt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(fe.position,fe.originPoint);this._applyPosition(fe.position,fe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(di),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const $=this._lastPosition||this._preferredPositions[0],U=this._getOriginPoint(this._originRect,this._containerRect,$);this._applyPosition($,U)}}withScrollableContainers($){return this._scrollables=$,this}withPositions($){return this._preferredPositions=$,-1===$.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin($){return this._viewportMargin=$,this}withFlexibleDimensions($=!0){return this._hasFlexibleDimensions=$,this}withGrowAfterOpen($=!0){return this._growAfterOpen=$,this}withPush($=!0){return this._canPush=$,this}withLockedPosition($=!0){return this._positionLocked=$,this}setOrigin($){return this._origin=$,this}withDefaultOffsetX($){return this._offsetX=$,this}withDefaultOffsetY($){return this._offsetY=$,this}withTransformOriginOn($){return this._transformOriginSelector=$,this}_getOriginPoint($,U,R){let N,ie;if("center"==R.originX)N=$.left+$.width/2;else{const fe=this._isRtl()?$.right:$.left,nt=this._isRtl()?$.left:$.right;N="start"==R.originX?fe:nt}return U.left<0&&(N-=U.left),ie="center"==R.originY?$.top+$.height/2:"top"==R.originY?$.top:$.bottom,U.top<0&&(ie-=U.top),{x:N,y:ie}}_getOverlayPoint($,U,R){let N,ie;return N="center"==R.overlayX?-U.width/2:"start"===R.overlayX?this._isRtl()?-U.width:0:this._isRtl()?0:-U.width,ie="center"==R.overlayY?-U.height/2:"top"==R.overlayY?0:-U.height,{x:$.x+N,y:$.y+ie}}_getOverlayFit($,U,R,N){const ie=hi(U);let{x:fe,y:nt}=$,Et=this._getOffset(N,"x"),_t=this._getOffset(N,"y");Et&&(fe+=Et),_t&&(nt+=_t);let Hn=0-nt,Fi=nt+ie.height-R.height,Jt=this._subtractOverflows(ie.width,0-fe,fe+ie.width-R.width),hn=this._subtractOverflows(ie.height,Hn,Fi),Zt=Jt*hn;return{visibleArea:Zt,isCompletelyWithinViewport:ie.width*ie.height===Zt,fitsInViewportVertically:hn===ie.height,fitsInViewportHorizontally:Jt==ie.width}}_canFitWithFlexibleDimensions($,U,R){if(this._hasFlexibleDimensions){const N=R.bottom-U.y,ie=R.right-U.x,fe=ki(this._overlayRef.getConfig().minHeight),nt=ki(this._overlayRef.getConfig().minWidth),_t=$.fitsInViewportHorizontally||null!=nt&&nt<=ie;return($.fitsInViewportVertically||null!=fe&&fe<=N)&&_t}return!1}_pushOverlayOnScreen($,U,R){if(this._previousPushAmount&&this._positionLocked)return{x:$.x+this._previousPushAmount.x,y:$.y+this._previousPushAmount.y};const N=hi(U),ie=this._viewportRect,fe=Math.max($.x+N.width-ie.width,0),nt=Math.max($.y+N.height-ie.height,0),Et=Math.max(ie.top-R.top-$.y,0),_t=Math.max(ie.left-R.left-$.x,0);let fn=0,_n=0;return fn=N.width<=ie.width?_t||-fe:$.x<this._viewportMargin?ie.left-R.left-$.x:0,_n=N.height<=ie.height?Et||-nt:$.y<this._viewportMargin?ie.top-R.top-$.y:0,this._previousPushAmount={x:fn,y:_n},{x:$.x+fn,y:$.y+_n}}_applyPosition($,U){if(this._setTransformOrigin($),this._setOverlayElementStyles(U,$),this._setBoundingBoxStyles(U,$),$.panelClass&&this._addPanelClasses($.panelClass),this._lastPosition=$,this._positionChanges.observers.length){const R=this._getScrollVisibility(),N=new lt($,R);this._positionChanges.next(N)}this._isInitialRender=!1}_setTransformOrigin($){if(!this._transformOriginSelector)return;const U=this._boundingBox.querySelectorAll(this._transformOriginSelector);let R,N=$.overlayY;R="center"===$.overlayX?"center":this._isRtl()?"start"===$.overlayX?"right":"left":"start"===$.overlayX?"left":"right";for(let ie=0;ie<U.length;ie++)U[ie].style.transformOrigin=`${R} ${N}`}_calculateBoundingBoxRect($,U){const R=this._viewportRect,N=this._isRtl();let ie,fe,nt,fn,_n,Hn;if("top"===U.overlayY)fe=$.y,ie=R.height-fe+this._viewportMargin;else if("bottom"===U.overlayY)nt=R.height-$.y+2*this._viewportMargin,ie=R.height-nt+this._viewportMargin;else{const Fi=Math.min(R.bottom-$.y+R.top,$.y),Jt=this._lastBoundingBoxSize.height;ie=2*Fi,fe=$.y-Fi,ie>Jt&&!this._isInitialRender&&!this._growAfterOpen&&(fe=$.y-Jt/2)}if("end"===U.overlayX&&!N||"start"===U.overlayX&&N)Hn=R.width-$.x+this._viewportMargin,fn=$.x-this._viewportMargin;else if("start"===U.overlayX&&!N||"end"===U.overlayX&&N)_n=$.x,fn=R.right-$.x;else{const Fi=Math.min(R.right-$.x+R.left,$.x),Jt=this._lastBoundingBoxSize.width;fn=2*Fi,_n=$.x-Fi,fn>Jt&&!this._isInitialRender&&!this._growAfterOpen&&(_n=$.x-Jt/2)}return{top:fe,left:_n,bottom:nt,right:Hn,width:fn,height:ie}}_setBoundingBoxStyles($,U){const R=this._calculateBoundingBoxRect($,U);!this._isInitialRender&&!this._growAfterOpen&&(R.height=Math.min(R.height,this._lastBoundingBoxSize.height),R.width=Math.min(R.width,this._lastBoundingBoxSize.width));const N={};if(this._hasExactPosition())N.top=N.left="0",N.bottom=N.right=N.maxHeight=N.maxWidth="",N.width=N.height="100%";else{const ie=this._overlayRef.getConfig().maxHeight,fe=this._overlayRef.getConfig().maxWidth;N.height=(0,g.HM)(R.height),N.top=(0,g.HM)(R.top),N.bottom=(0,g.HM)(R.bottom),N.width=(0,g.HM)(R.width),N.left=(0,g.HM)(R.left),N.right=(0,g.HM)(R.right),N.alignItems="center"===U.overlayX?"center":"end"===U.overlayX?"flex-end":"flex-start",N.justifyContent="center"===U.overlayY?"center":"bottom"===U.overlayY?"flex-end":"flex-start",ie&&(N.maxHeight=(0,g.HM)(ie)),fe&&(N.maxWidth=(0,g.HM)(fe))}this._lastBoundingBoxSize=R,Rn(this._boundingBox.style,N)}_resetBoundingBoxStyles(){Rn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles($,U){const R={},N=this._hasExactPosition(),ie=this._hasFlexibleDimensions,fe=this._overlayRef.getConfig();if(N){const fn=this._viewportRuler.getViewportScrollPosition();Rn(R,this._getExactOverlayY(U,$,fn)),Rn(R,this._getExactOverlayX(U,$,fn))}else R.position="static";let nt="",Et=this._getOffset(U,"x"),_t=this._getOffset(U,"y");Et&&(nt+=`translateX(${Et}px) `),_t&&(nt+=`translateY(${_t}px)`),R.transform=nt.trim(),fe.maxHeight&&(N?R.maxHeight=(0,g.HM)(fe.maxHeight):ie&&(R.maxHeight="")),fe.maxWidth&&(N?R.maxWidth=(0,g.HM)(fe.maxWidth):ie&&(R.maxWidth="")),Rn(this._pane.style,R)}_getExactOverlayY($,U,R){let N={top:"",bottom:""},ie=this._getOverlayPoint(U,this._overlayRect,$);return this._isPushed&&(ie=this._pushOverlayOnScreen(ie,this._overlayRect,R)),"bottom"===$.overlayY?N.bottom=this._document.documentElement.clientHeight-(ie.y+this._overlayRect.height)+"px":N.top=(0,g.HM)(ie.y),N}_getExactOverlayX($,U,R){let fe,N={left:"",right:""},ie=this._getOverlayPoint(U,this._overlayRect,$);return this._isPushed&&(ie=this._pushOverlayOnScreen(ie,this._overlayRect,R)),fe=this._isRtl()?"end"===$.overlayX?"left":"right":"end"===$.overlayX?"right":"left","right"===fe?N.right=this._document.documentElement.clientWidth-(ie.x+this._overlayRect.width)+"px":N.left=(0,g.HM)(ie.x),N}_getScrollVisibility(){const $=this._getOriginRect(),U=this._pane.getBoundingClientRect(),R=this._scrollables.map(N=>N.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:rt($,R),isOriginOutsideView:Fe($,R),isOverlayClipped:rt(U,R),isOverlayOutsideView:Fe(U,R)}}_subtractOverflows($,...U){return U.reduce((R,N)=>R-Math.max(N,0),$)}_getNarrowedViewportRect(){const $=this._document.documentElement.clientWidth,U=this._document.documentElement.clientHeight,R=this._viewportRuler.getViewportScrollPosition();return{top:R.top+this._viewportMargin,left:R.left+this._viewportMargin,right:R.left+$-this._viewportMargin,bottom:R.top+U-this._viewportMargin,width:$-2*this._viewportMargin,height:U-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset($,U){return"x"===U?null==$.offsetX?this._offsetX:$.offsetX:null==$.offsetY?this._offsetY:$.offsetY}_validatePositions(){}_addPanelClasses($){this._pane&&(0,g.Eq)($).forEach(U=>{""!==U&&-1===this._appliedPanelClasses.indexOf(U)&&(this._appliedPanelClasses.push(U),this._pane.classList.add(U))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach($=>{this._pane.classList.remove($)}),this._appliedPanelClasses=[])}_getOriginRect(){const $=this._origin;if($ instanceof q.SBq)return $.nativeElement.getBoundingClientRect();if($ instanceof Element)return $.getBoundingClientRect();const U=$.width||0,R=$.height||0;return{top:$.y,bottom:$.y+R,left:$.x,right:$.x+U,height:R,width:U}}}function Rn(St,$){for(let U in $)$.hasOwnProperty(U)&&(St[U]=$[U]);return St}function ki(St){if("number"!=typeof St&&null!=St){const[$,U]=St.split(Ui);return U&&"px"!==U?null:parseFloat($)}return St||null}function hi(St){return{top:Math.floor(St.top),right:Math.floor(St.right),bottom:Math.floor(St.bottom),left:Math.floor(St.left),width:Math.floor(St.width),height:Math.floor(St.height)}}const sr="cdk-global-overlay-wrapper";class xi{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach($){const U=$.getConfig();this._overlayRef=$,this._width&&!U.width&&$.updateSize({width:this._width}),this._height&&!U.height&&$.updateSize({height:this._height}),$.hostElement.classList.add(sr),this._isDisposed=!1}top($=""){return this._bottomOffset="",this._topOffset=$,this._alignItems="flex-start",this}left($=""){return this._rightOffset="",this._leftOffset=$,this._justifyContent="flex-start",this}bottom($=""){return this._topOffset="",this._bottomOffset=$,this._alignItems="flex-end",this}right($=""){return this._leftOffset="",this._rightOffset=$,this._justifyContent="flex-end",this}width($=""){return this._overlayRef?this._overlayRef.updateSize({width:$}):this._width=$,this}height($=""){return this._overlayRef?this._overlayRef.updateSize({height:$}):this._height=$,this}centerHorizontally($=""){return this.left($),this._justifyContent="center",this}centerVertically($=""){return this.top($),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const $=this._overlayRef.overlayElement.style,U=this._overlayRef.hostElement.style,R=this._overlayRef.getConfig(),{width:N,height:ie,maxWidth:fe,maxHeight:nt}=R,Et=!("100%"!==N&&"100vw"!==N||fe&&"100%"!==fe&&"100vw"!==fe),_t=!("100%"!==ie&&"100vh"!==ie||nt&&"100%"!==nt&&"100vh"!==nt);$.position=this._cssPosition,$.marginLeft=Et?"0":this._leftOffset,$.marginTop=_t?"0":this._topOffset,$.marginBottom=this._bottomOffset,$.marginRight=this._rightOffset,Et?U.justifyContent="flex-start":"center"===this._justifyContent?U.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?U.justifyContent="flex-end":"flex-end"===this._justifyContent&&(U.justifyContent="flex-start"):U.justifyContent=this._justifyContent,U.alignItems=_t?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const $=this._overlayRef.overlayElement.style,U=this._overlayRef.hostElement,R=U.style;U.classList.remove(sr),R.justifyContent=R.alignItems=$.marginTop=$.marginBottom=$.marginLeft=$.marginRight=$.position="",this._overlayRef=null,this._isDisposed=!0}}let In=(()=>{class St{constructor(U,R,N,ie){this._viewportRuler=U,this._document=R,this._platform=N,this._overlayContainer=ie}global(){return new xi}flexibleConnectedTo(U){return new kn(U,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(D.rL),q.LFG(l.K0),q.LFG($e.t4),q.LFG(yn))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),Qn=(()=>{class St{constructor(U){this._attachedOverlays=[],this._document=U}ngOnDestroy(){this.detach()}add(U){this.remove(U),this._attachedOverlays.push(U)}remove(U){const R=this._attachedOverlays.indexOf(U);R>-1&&this._attachedOverlays.splice(R,1),0===this._attachedOverlays.length&&this.detach()}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(l.K0))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),ft=(()=>{class St extends Qn{constructor(U){super(U),this._keydownListener=R=>{const N=this._attachedOverlays;for(let ie=N.length-1;ie>-1;ie--)if(N[ie]._keydownEvents.observers.length>0){N[ie]._keydownEvents.next(R);break}}}add(U){super.add(U),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(l.K0))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),kt=(()=>{class St extends Qn{constructor(U,R){super(U),this._platform=R,this._cursorStyleIsSet=!1,this._pointerDownListener=N=>{this._pointerDownEventTarget=(0,$e.sA)(N)},this._clickListener=N=>{const ie=(0,$e.sA)(N),fe="click"===N.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:ie;this._pointerDownEventTarget=null;const nt=this._attachedOverlays.slice();for(let Et=nt.length-1;Et>-1;Et--){const _t=nt[Et];if(!(_t._outsidePointerEvents.observers.length<1)&&_t.hasAttached()){if(_t.overlayElement.contains(ie)||_t.overlayElement.contains(fe))break;_t._outsidePointerEvents.next(N)}}}}add(U){if(super.add(U),!this._isAttached){const R=this._document.body;R.addEventListener("pointerdown",this._pointerDownListener,!0),R.addEventListener("click",this._clickListener,!0),R.addEventListener("auxclick",this._clickListener,!0),R.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=R.style.cursor,R.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const U=this._document.body;U.removeEventListener("pointerdown",this._pointerDownListener,!0),U.removeEventListener("click",this._clickListener,!0),U.removeEventListener("auxclick",this._clickListener,!0),U.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(U.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(l.K0),q.LFG($e.t4))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})(),ln=0,gn=(()=>{class St{constructor(U,R,N,ie,fe,nt,Et,_t,fn,_n,Hn){this.scrollStrategies=U,this._overlayContainer=R,this._componentFactoryResolver=N,this._positionBuilder=ie,this._keyboardDispatcher=fe,this._injector=nt,this._ngZone=Et,this._document=_t,this._directionality=fn,this._location=_n,this._outsideClickDispatcher=Hn}create(U){const R=this._createHostElement(),N=this._createPaneElement(R),ie=this._createPortalOutlet(N),fe=new Qt(U);return fe.direction=fe.direction||this._directionality.value,new Ct(ie,R,N,fe,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(U){const R=this._document.createElement("div");return R.id="cdk-overlay-"+ln++,R.classList.add("cdk-overlay-pane"),U.appendChild(R),R}_createHostElement(){const U=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(U),U}_createPortalOutlet(U){return this._appRef||(this._appRef=this._injector.get(q.z2F)),new Oe.u0(U,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return St.\u0275fac=function(U){return new(U||St)(q.LFG(Bt),q.LFG(yn),q.LFG(q._Vd),q.LFG(In),q.LFG(ft),q.LFG(q.zs3),q.LFG(q.R0b),q.LFG(l.K0),q.LFG(Ke.Is),q.LFG(l.Ye),q.LFG(kt))},St.\u0275prov=q.Yz7({token:St,factory:St.\u0275fac}),St})();const Bn=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Jn=new q.OlP("cdk-connected-overlay-scroll-strategy");let Bi=(()=>{class St{constructor(U){this.elementRef=U}}return St.\u0275fac=function(U){return new(U||St)(q.Y36(q.SBq))},St.\u0275dir=q.lG2({type:St,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),St})(),Xi=(()=>{class St{constructor(U,R,N,ie,fe){this._overlay=U,this._dir=fe,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=he.w0.EMPTY,this._attachSubscription=he.w0.EMPTY,this._detachSubscription=he.w0.EMPTY,this._positionSubscription=he.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new q.vpe,this.positionChange=new q.vpe,this.attach=new q.vpe,this.detach=new q.vpe,this.overlayKeydown=new q.vpe,this.overlayOutsideClick=new q.vpe,this._templatePortal=new Oe.UE(R,N),this._scrollStrategyFactory=ie,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(U){this._offsetX=U,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(U){this._offsetY=U,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(U){this._hasBackdrop=(0,g.Ig)(U)}get lockPosition(){return this._lockPosition}set lockPosition(U){this._lockPosition=(0,g.Ig)(U)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(U){this._flexibleDimensions=(0,g.Ig)(U)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(U){this._growAfterOpen=(0,g.Ig)(U)}get push(){return this._push}set push(U){this._push=(0,g.Ig)(U)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(U){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),U.origin&&this.open&&this._position.apply()),U.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Bn);const U=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=U.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=U.detachments().subscribe(()=>this.detach.emit()),U.keydownEvents().subscribe(R=>{this.overlayKeydown.next(R),R.keyCode===Mt.hY&&!this.disableClose&&!(0,Mt.Vb)(R)&&(R.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(R=>{this.overlayOutsideClick.next(R)})}_buildConfig(){const U=this._position=this.positionStrategy||this._createPositionStrategy(),R=new Qt({direction:this._dir,positionStrategy:U,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(R.width=this.width),(this.height||0===this.height)&&(R.height=this.height),(this.minWidth||0===this.minWidth)&&(R.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(R.minHeight=this.minHeight),this.backdropClass&&(R.backdropClass=this.backdropClass),this.panelClass&&(R.panelClass=this.panelClass),R}_updatePositionStrategy(U){const R=this.positions.map(N=>({originX:N.originX,originY:N.originY,overlayX:N.overlayX,overlayY:N.overlayY,offsetX:N.offsetX||this.offsetX,offsetY:N.offsetY||this.offsetY,panelClass:N.panelClass||void 0}));return U.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(R).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const U=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(U),U}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof Bi?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(U=>{this.backdropClick.emit(U)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function gt(St,$=!1){return(0,Ze.e)((U,R)=>{let N=0;U.subscribe(new Be.Q(R,ie=>{const fe=St(ie,N++);(fe||$)&&R.next(ie),!fe&&R.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(U=>{this.positionChange.emit(U),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return St.\u0275fac=function(U){return new(U||St)(q.Y36(gn),q.Y36(q.Rgc),q.Y36(q.s_b),q.Y36(Jn),q.Y36(Ke.Is,8))},St.\u0275dir=q.lG2({type:St,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[q.TTD]}),St})();const qn={provide:Jn,deps:[gn],useFactory:function _i(St){return()=>St.scrollStrategies.reposition()}};let Xn=(()=>{class St{}return St.\u0275fac=function(U){return new(U||St)},St.\u0275mod=q.oAB({type:St}),St.\u0275inj=q.cJS({providers:[gn,qn],imports:[[Ke.vT,Oe.eL,D.Cl],D.Cl]}),St})()},925:(On,wt,V)=>{"use strict";V.d(wt,{t4:()=>g,ud:()=>$e,sA:()=>an,kV:()=>Vt,Oy:()=>Dt,_i:()=>tt,qK:()=>Le,i$:()=>Ze,Mq:()=>Ye});var D=V(5e3),l=V(9808);let q;try{q="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Fe){q=!1}let Ke,g=(()=>{class Fe{constructor(nn){this._platformId=nn,this.isBrowser=this._platformId?(0,l.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!q)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Fe.\u0275fac=function(nn){return new(nn||Fe)(D.LFG(D.Lbi))},Fe.\u0275prov=D.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})(),$e=(()=>{class Fe{}return Fe.\u0275fac=function(nn){return new(nn||Fe)},Fe.\u0275mod=D.oAB({type:Fe}),Fe.\u0275inj=D.cJS({}),Fe})();const Oe=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Le(){if(Ke)return Ke;if("object"!=typeof document||!document)return Ke=new Set(Oe),Ke;let Fe=document.createElement("input");return Ke=new Set(Oe.filter(rt=>(Fe.setAttribute("type",rt),Fe.type===rt))),Ke}let he,Be,gt,Mt;function Ze(Fe){return function Ve(){if(null==he&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>he=!0}))}finally{he=he||!1}return he}()?Fe:!!Fe.capture}function Ye(){if(null==gt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return gt=!1,gt;if("scrollBehavior"in document.documentElement.style)gt=!0;else{const Fe=Element.prototype.scrollTo;gt=!!Fe&&!/\{\s*\[native code\]\s*\}/.test(Fe.toString())}}return gt}function tt(){if("object"!=typeof document||!document)return 0;if(null==Be){const Fe=document.createElement("div"),rt=Fe.style;Fe.dir="rtl",rt.width="1px",rt.overflow="auto",rt.visibility="hidden",rt.pointerEvents="none",rt.position="absolute";const nn=document.createElement("div"),Bt=nn.style;Bt.width="2px",Bt.height="1px",Fe.appendChild(nn),document.body.appendChild(Fe),Be=0,0===Fe.scrollLeft&&(Fe.scrollLeft=1,Be=0===Fe.scrollLeft?1:2),Fe.remove()}return Be}function Vt(Fe){if(function He(){if(null==Mt){const Fe="undefined"!=typeof document?document.head:null;Mt=!(!Fe||!Fe.createShadowRoot&&!Fe.attachShadow)}return Mt}()){const rt=Fe.getRootNode?Fe.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&rt instanceof ShadowRoot)return rt}return null}function an(Fe){return Fe.composedPath?Fe.composedPath()[0]:Fe.target}function Dt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},7429:(On,wt,V)=>{"use strict";V.d(wt,{ig:()=>Mt,C5:()=>he,u0:()=>Ye,eL:()=>an,UE:()=>Ve,bH:()=>He});var D=V(5e3);class Le{attach(rt){return this._attachedHost=rt,rt.attach(this)}detach(){let rt=this._attachedHost;null!=rt&&(this._attachedHost=null,rt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(rt){this._attachedHost=rt}}class he extends Le{constructor(rt,nn,Bt,Qt){super(),this.component=rt,this.viewContainerRef=nn,this.injector=Bt,this.componentFactoryResolver=Qt}}class Ve extends Le{constructor(rt,nn,Bt){super(),this.templateRef=rt,this.viewContainerRef=nn,this.context=Bt}get origin(){return this.templateRef.elementRef}attach(rt,nn=this.context){return this.context=nn,super.attach(rt)}detach(){return this.context=void 0,super.detach()}}class Ze extends Le{constructor(rt){super(),this.element=rt instanceof D.SBq?rt.nativeElement:rt}}class Ye extends class Be{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(rt){return rt instanceof he?(this._attachedPortal=rt,this.attachComponentPortal(rt)):rt instanceof Ve?(this._attachedPortal=rt,this.attachTemplatePortal(rt)):this.attachDomPortal&&rt instanceof Ze?(this._attachedPortal=rt,this.attachDomPortal(rt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(rt){this._disposeFn=rt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(rt,nn,Bt,Qt,at){super(),this.outletElement=rt,this._componentFactoryResolver=nn,this._appRef=Bt,this._defaultInjector=Qt,this.attachDomPortal=mt=>{const lt=mt.element,At=this._document.createComment("dom-portal");lt.parentNode.insertBefore(At,lt),this.outletElement.appendChild(lt),this._attachedPortal=mt,super.setDisposeFn(()=>{At.parentNode&&At.parentNode.replaceChild(lt,At)})},this._document=at}attachComponentPortal(rt){const Bt=(rt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(rt.component);let Qt;return rt.viewContainerRef?(Qt=rt.viewContainerRef.createComponent(Bt,rt.viewContainerRef.length,rt.injector||rt.viewContainerRef.injector),this.setDisposeFn(()=>Qt.destroy())):(Qt=Bt.create(rt.injector||this._defaultInjector),this._appRef.attachView(Qt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Qt.hostView),Qt.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(Qt)),this._attachedPortal=rt,Qt}attachTemplatePortal(rt){let nn=rt.viewContainerRef,Bt=nn.createEmbeddedView(rt.templateRef,rt.context);return Bt.rootNodes.forEach(Qt=>this.outletElement.appendChild(Qt)),Bt.detectChanges(),this.setDisposeFn(()=>{let Qt=nn.indexOf(Bt);-1!==Qt&&nn.remove(Qt)}),this._attachedPortal=rt,Bt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(rt){return rt.hostView.rootNodes[0]}}let Mt=(()=>{class Fe extends Ve{constructor(nn,Bt){super(nn,Bt)}}return Fe.\u0275fac=function(nn){return new(nn||Fe)(D.Y36(D.Rgc),D.Y36(D.s_b))},Fe.\u0275dir=D.lG2({type:Fe,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[D.qOj]}),Fe})(),He=(()=>{class Fe extends Mt{}return Fe.\u0275fac=function(){let rt;return function(Bt){return(rt||(rt=D.n5z(Fe)))(Bt||Fe)}}(),Fe.\u0275dir=D.lG2({type:Fe,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[D._Bn([{provide:Mt,useExisting:Fe}]),D.qOj]}),Fe})(),an=(()=>{class Fe{}return Fe.\u0275fac=function(nn){return new(nn||Fe)},Fe.\u0275mod=D.oAB({type:Fe}),Fe.\u0275inj=D.cJS({}),Fe})()},8962:(On,wt,V)=>{"use strict";V.d(wt,{PQ:()=>Bn,ZD:()=>St,mF:()=>gn,Cl:()=>$,rL:()=>Bi});var D=V(3191),l=V(5e3),q=V(4408),g=V(727);const $e={schedule(U){let R=requestAnimationFrame,N=cancelAnimationFrame;const{delegate:ie}=$e;ie&&(R=ie.requestAnimationFrame,N=ie.cancelAnimationFrame);const fe=R(nt=>{N=void 0,U(nt)});return new g.w0(()=>null==N?void 0:N(fe))},requestAnimationFrame(...U){const{delegate:R}=$e;return((null==R?void 0:R.requestAnimationFrame)||requestAnimationFrame)(...U)},cancelAnimationFrame(...U){const{delegate:R}=$e;return((null==R?void 0:R.cancelAnimationFrame)||cancelAnimationFrame)(...U)},delegate:void 0};var Oe=V(7565);new class Le extends Oe.v{flush(R){this._active=!0;const N=this._scheduled;this._scheduled=void 0;const{actions:ie}=this;let fe;R=R||ie.shift();do{if(fe=R.execute(R.state,R.delay))break}while((R=ie[0])&&R.id===N&&ie.shift());if(this._active=!1,fe){for(;(R=ie[0])&&R.id===N&&ie.shift();)R.unsubscribe();throw fe}}}(class Ke extends q.o{constructor(R,N){super(R,N),this.scheduler=R,this.work=N}requestAsyncId(R,N,ie=0){return null!==ie&&ie>0?super.requestAsyncId(R,N,ie):(R.actions.push(this),R._scheduled||(R._scheduled=$e.requestAnimationFrame(()=>R.flush(void 0))))}recycleAsyncId(R,N,ie=0){if(null!=ie&&ie>0||null==ie&&this.delay>0)return super.recycleAsyncId(R,N,ie);R.actions.some(fe=>fe.id===N)||($e.cancelAnimationFrame(N),R._scheduled=void 0)}});let Be,Ze=1;const gt={};function Ye(U){return U in gt&&(delete gt[U],!0)}const tt={setImmediate(U){const R=Ze++;return gt[R]=!0,Be||(Be=Promise.resolve()),Be.then(()=>Ye(R)&&U()),R},clearImmediate(U){Ye(U)}},{setImmediate:He,clearImmediate:Vt}=tt,Ht={setImmediate(...U){const{delegate:R}=Ht;return((null==R?void 0:R.setImmediate)||He)(...U)},clearImmediate(U){const{delegate:R}=Ht;return((null==R?void 0:R.clearImmediate)||Vt)(U)},delegate:void 0};new class Dt extends Oe.v{flush(R){this._active=!0;const N=this._scheduled;this._scheduled=void 0;const{actions:ie}=this;let fe;R=R||ie.shift();do{if(fe=R.execute(R.state,R.delay))break}while((R=ie[0])&&R.id===N&&ie.shift());if(this._active=!1,fe){for(;(R=ie[0])&&R.id===N&&ie.shift();)R.unsubscribe();throw fe}}}(class an extends q.o{constructor(R,N){super(R,N),this.scheduler=R,this.work=N}requestAsyncId(R,N,ie=0){return null!==ie&&ie>0?super.requestAsyncId(R,N,ie):(R.actions.push(this),R._scheduled||(R._scheduled=Ht.setImmediate(R.flush.bind(R,void 0))))}recycleAsyncId(R,N,ie=0){if(null!=ie&&ie>0||null==ie&&this.delay>0)return super.recycleAsyncId(R,N,ie);R.actions.some(fe=>fe.id===N)||(Ht.clearImmediate(N),R._scheduled=void 0)}});var nn=V(7579),Bt=V(9646),Qt=V(8306),at=V(4968),mt=V(4986),lt=V(4482),At=V(8421),Kt=V(5403),yn=V(5963);function di(U,R=mt.z){return function Ct(U){return(0,lt.e)((R,N)=>{let ie=!1,fe=null,nt=null,Et=!1;const _t=()=>{if(null==nt||nt.unsubscribe(),nt=null,ie){ie=!1;const _n=fe;fe=null,N.next(_n)}Et&&N.complete()},fn=()=>{nt=null,Et&&N.complete()};R.subscribe(new Kt.Q(N,_n=>{ie=!0,fe=_n,nt||(0,At.Xf)(U(_n)).subscribe(nt=new Kt.Q(N,_t,fn))},()=>{Et=!0,(!ie||!nt||nt.closed)&&N.complete()}))})}(()=>(0,yn.H)(U,R))}var Ui=V(9300),kn=V(2722),Rn=V(9808),ki=V(925),hi=V(226);let gn=(()=>{class U{constructor(N,ie,fe){this._ngZone=N,this._platform=ie,this._scrolled=new nn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=fe}register(N){this.scrollContainers.has(N)||this.scrollContainers.set(N,N.elementScrolled().subscribe(()=>this._scrolled.next(N)))}deregister(N){const ie=this.scrollContainers.get(N);ie&&(ie.unsubscribe(),this.scrollContainers.delete(N))}scrolled(N=20){return this._platform.isBrowser?new Qt.y(ie=>{this._globalSubscription||this._addGlobalListener();const fe=N>0?this._scrolled.pipe(di(N)).subscribe(ie):this._scrolled.subscribe(ie);return this._scrolledCount++,()=>{fe.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Bt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((N,ie)=>this.deregister(ie)),this._scrolled.complete()}ancestorScrolled(N,ie){const fe=this.getAncestorScrollContainers(N);return this.scrolled(ie).pipe((0,Ui.h)(nt=>!nt||fe.indexOf(nt)>-1))}getAncestorScrollContainers(N){const ie=[];return this.scrollContainers.forEach((fe,nt)=>{this._scrollableContainsElement(nt,N)&&ie.push(nt)}),ie}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(N,ie){let fe=(0,D.fI)(ie),nt=N.getElementRef().nativeElement;do{if(fe==nt)return!0}while(fe=fe.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const N=this._getWindow();return(0,at.R)(N.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(l.R0b),l.LFG(ki.t4),l.LFG(Rn.K0,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),Bn=(()=>{class U{constructor(N,ie,fe,nt){this.elementRef=N,this.scrollDispatcher=ie,this.ngZone=fe,this.dir=nt,this._destroyed=new nn.x,this._elementScrolled=new Qt.y(Et=>this.ngZone.runOutsideAngular(()=>(0,at.R)(this.elementRef.nativeElement,"scroll").pipe((0,kn.R)(this._destroyed)).subscribe(Et)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(N){const ie=this.elementRef.nativeElement,fe=this.dir&&"rtl"==this.dir.value;null==N.left&&(N.left=fe?N.end:N.start),null==N.right&&(N.right=fe?N.start:N.end),null!=N.bottom&&(N.top=ie.scrollHeight-ie.clientHeight-N.bottom),fe&&0!=(0,ki._i)()?(null!=N.left&&(N.right=ie.scrollWidth-ie.clientWidth-N.left),2==(0,ki._i)()?N.left=N.right:1==(0,ki._i)()&&(N.left=N.right?-N.right:N.right)):null!=N.right&&(N.left=ie.scrollWidth-ie.clientWidth-N.right),this._applyScrollToOptions(N)}_applyScrollToOptions(N){const ie=this.elementRef.nativeElement;(0,ki.Mq)()?ie.scrollTo(N):(null!=N.top&&(ie.scrollTop=N.top),null!=N.left&&(ie.scrollLeft=N.left))}measureScrollOffset(N){const ie="left",nt=this.elementRef.nativeElement;if("top"==N)return nt.scrollTop;if("bottom"==N)return nt.scrollHeight-nt.clientHeight-nt.scrollTop;const Et=this.dir&&"rtl"==this.dir.value;return"start"==N?N=Et?"right":ie:"end"==N&&(N=Et?ie:"right"),Et&&2==(0,ki._i)()?N==ie?nt.scrollWidth-nt.clientWidth-nt.scrollLeft:nt.scrollLeft:Et&&1==(0,ki._i)()?N==ie?nt.scrollLeft+nt.scrollWidth-nt.clientWidth:-nt.scrollLeft:N==ie?nt.scrollLeft:nt.scrollWidth-nt.clientWidth-nt.scrollLeft}}return U.\u0275fac=function(N){return new(N||U)(l.Y36(l.SBq),l.Y36(gn),l.Y36(l.R0b),l.Y36(hi.Is,8))},U.\u0275dir=l.lG2({type:U,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),U})(),Bi=(()=>{class U{constructor(N,ie,fe){this._platform=N,this._change=new nn.x,this._changeListener=nt=>{this._change.next(nt)},this._document=fe,ie.runOutsideAngular(()=>{if(N.isBrowser){const nt=this._getWindow();nt.addEventListener("resize",this._changeListener),nt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const N=this._getWindow();N.removeEventListener("resize",this._changeListener),N.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const N={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),N}getViewportRect(){const N=this.getViewportScrollPosition(),{width:ie,height:fe}=this.getViewportSize();return{top:N.top,left:N.left,bottom:N.top+fe,right:N.left+ie,height:fe,width:ie}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const N=this._document,ie=this._getWindow(),fe=N.documentElement,nt=fe.getBoundingClientRect();return{top:-nt.top||N.body.scrollTop||ie.scrollY||fe.scrollTop||0,left:-nt.left||N.body.scrollLeft||ie.scrollX||fe.scrollLeft||0}}change(N=20){return N>0?this._change.pipe(di(N)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const N=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:N.innerWidth,height:N.innerHeight}:{width:0,height:0}}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(ki.t4),l.LFG(l.R0b),l.LFG(Rn.K0,8))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})(),St=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({}),U})(),$=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({imports:[[hi.vT,ki.ud,St],hi.vT,St]}),U})()},9808:(On,wt,V)=>{"use strict";V.d(wt,{mr:()=>Ht,Ov:()=>Xo,ez:()=>Bo,K0:()=>Oe,Do:()=>Dt,V_:()=>Ve,Ye:()=>Fe,S$:()=>He,mk:()=>pr,sg:()=>Mr,O5:()=>dr,PC:()=>us,RF:()=>Rr,n9:()=>Zr,ED:()=>cs,tP:()=>ds,b0:()=>an,lw:()=>Le,EM:()=>Ps,JF:()=>Or,NF:()=>uo,w_:()=>Ke,bD:()=>ts,q:()=>q,Mx:()=>br,HT:()=>$e});var D=V(5e3);let l=null;function q(){return l}function $e(te){l||(l=te)}class Ke{}const Oe=new D.OlP("DocumentToken");let Le=(()=>{class te{historyGo(ne){throw new Error("Not implemented")}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275prov=D.Yz7({token:te,factory:function(){return function he(){return(0,D.LFG)(Ze)}()},providedIn:"platform"}),te})();const Ve=new D.OlP("Location Initialized");let Ze=(()=>{class te extends Le{constructor(ne){super(),this._doc=ne,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(ne){const Ee=q().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("popstate",ne,!1),()=>Ee.removeEventListener("popstate",ne)}onHashChange(ne){const Ee=q().getGlobalEventTarget(this._doc,"window");return Ee.addEventListener("hashchange",ne,!1),()=>Ee.removeEventListener("hashchange",ne)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(ne){this.location.pathname=ne}pushState(ne,Ee,ct){Be()?this._history.pushState(ne,Ee,ct):this.location.hash=ct}replaceState(ne,Ee,ct){Be()?this._history.replaceState(ne,Ee,ct):this.location.hash=ct}forward(){this._history.forward()}back(){this._history.back()}historyGo(ne=0){this._history.go(ne)}getState(){return this._history.state}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Oe))},te.\u0275prov=D.Yz7({token:te,factory:function(){return function gt(){return new Ze((0,D.LFG)(Oe))}()},providedIn:"platform"}),te})();function Be(){return!!window.history.pushState}function Ye(te,ve){if(0==te.length)return ve;if(0==ve.length)return te;let ne=0;return te.endsWith("/")&&ne++,ve.startsWith("/")&&ne++,2==ne?te+ve.substring(1):1==ne?te+ve:te+"/"+ve}function tt(te){const ve=te.match(/#|\?|$/),ne=ve&&ve.index||te.length;return te.slice(0,ne-("/"===te[ne-1]?1:0))+te.slice(ne)}function Mt(te){return te&&"?"!==te[0]?"?"+te:te}let He=(()=>{class te{historyGo(ne){throw new Error("Not implemented")}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275prov=D.Yz7({token:te,factory:function(){return function Vt(te){const ve=(0,D.LFG)(Oe).location;return new an((0,D.LFG)(Le),ve&&ve.origin||"")}()},providedIn:"root"}),te})();const Ht=new D.OlP("appBaseHref");let an=(()=>{class te extends He{constructor(ne,Ee){if(super(),this._platformLocation=ne,this._removeListenerFns=[],null==Ee&&(Ee=this._platformLocation.getBaseHrefFromDOM()),null==Ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ne){this._removeListenerFns.push(this._platformLocation.onPopState(ne),this._platformLocation.onHashChange(ne))}getBaseHref(){return this._baseHref}prepareExternalUrl(ne){return Ye(this._baseHref,ne)}path(ne=!1){const Ee=this._platformLocation.pathname+Mt(this._platformLocation.search),ct=this._platformLocation.hash;return ct&&ne?`${Ee}${ct}`:Ee}pushState(ne,Ee,ct,Yt){const un=this.prepareExternalUrl(ct+Mt(Yt));this._platformLocation.pushState(ne,Ee,un)}replaceState(ne,Ee,ct,Yt){const un=this.prepareExternalUrl(ct+Mt(Yt));this._platformLocation.replaceState(ne,Ee,un)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ne=0){var Ee,ct;null===(ct=(Ee=this._platformLocation).historyGo)||void 0===ct||ct.call(Ee,ne)}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Le),D.LFG(Ht,8))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})(),Dt=(()=>{class te extends He{constructor(ne,Ee){super(),this._platformLocation=ne,this._baseHref="",this._removeListenerFns=[],null!=Ee&&(this._baseHref=Ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ne){this._removeListenerFns.push(this._platformLocation.onPopState(ne),this._platformLocation.onHashChange(ne))}getBaseHref(){return this._baseHref}path(ne=!1){let Ee=this._platformLocation.hash;return null==Ee&&(Ee="#"),Ee.length>0?Ee.substring(1):Ee}prepareExternalUrl(ne){const Ee=Ye(this._baseHref,ne);return Ee.length>0?"#"+Ee:Ee}pushState(ne,Ee,ct,Yt){let un=this.prepareExternalUrl(ct+Mt(Yt));0==un.length&&(un=this._platformLocation.pathname),this._platformLocation.pushState(ne,Ee,un)}replaceState(ne,Ee,ct,Yt){let un=this.prepareExternalUrl(ct+Mt(Yt));0==un.length&&(un=this._platformLocation.pathname),this._platformLocation.replaceState(ne,Ee,un)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(ne=0){var Ee,ct;null===(ct=(Ee=this._platformLocation).historyGo)||void 0===ct||ct.call(Ee,ne)}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(Le),D.LFG(Ht,8))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})(),Fe=(()=>{class te{constructor(ne,Ee){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=ne;const ct=this._platformStrategy.getBaseHref();this._platformLocation=Ee,this._baseHref=tt(Bt(ct)),this._platformStrategy.onPopState(Yt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Yt.state,type:Yt.type})})}path(ne=!1){return this.normalize(this._platformStrategy.path(ne))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(ne,Ee=""){return this.path()==this.normalize(ne+Mt(Ee))}normalize(ne){return te.stripTrailingSlash(function nn(te,ve){return te&&ve.startsWith(te)?ve.substring(te.length):ve}(this._baseHref,Bt(ne)))}prepareExternalUrl(ne){return ne&&"/"!==ne[0]&&(ne="/"+ne),this._platformStrategy.prepareExternalUrl(ne)}go(ne,Ee="",ct=null){this._platformStrategy.pushState(ct,"",ne,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(ne+Mt(Ee)),ct)}replaceState(ne,Ee="",ct=null){this._platformStrategy.replaceState(ct,"",ne,Ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(ne+Mt(Ee)),ct)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(ne=0){var Ee,ct;null===(ct=(Ee=this._platformStrategy).historyGo)||void 0===ct||ct.call(Ee,ne)}onUrlChange(ne){this._urlChangeListeners.push(ne),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ee=>{this._notifyUrlChangeListeners(Ee.url,Ee.state)}))}_notifyUrlChangeListeners(ne="",Ee){this._urlChangeListeners.forEach(ct=>ct(ne,Ee))}subscribe(ne,Ee,ct){return this._subject.subscribe({next:ne,error:Ee,complete:ct})}}return te.normalizeQueryParams=Mt,te.joinWithSlash=Ye,te.stripTrailingSlash=tt,te.\u0275fac=function(ne){return new(ne||te)(D.LFG(He),D.LFG(Le))},te.\u0275prov=D.Yz7({token:te,factory:function(){return function rt(){return new Fe((0,D.LFG)(He),(0,D.LFG)(Le))}()},providedIn:"root"}),te})();function Bt(te){return te.replace(/\/index.html$/,"")}var mt=(()=>((mt=mt||{})[mt.Zero=0]="Zero",mt[mt.One=1]="One",mt[mt.Two=2]="Two",mt[mt.Few=3]="Few",mt[mt.Many=4]="Many",mt[mt.Other=5]="Other",mt))();const Bi=D.kL8;class Pn{}let rr=(()=>{class te extends Pn{constructor(ne){super(),this.locale=ne}getPluralCategory(ne,Ee){switch(Bi(Ee||this.locale)(ne)){case mt.Zero:return"zero";case mt.One:return"one";case mt.Two:return"two";case mt.Few:return"few";case mt.Many:return"many";default:return"other"}}}return te.\u0275fac=function(ne){return new(ne||te)(D.LFG(D.soG))},te.\u0275prov=D.Yz7({token:te,factory:te.\u0275fac}),te})();function br(te,ve){ve=encodeURIComponent(ve);for(const ne of te.split(";")){const Ee=ne.indexOf("="),[ct,Yt]=-1==Ee?[ne,""]:[ne.slice(0,Ee),ne.slice(Ee+1)];if(ct.trim()===ve)return decodeURIComponent(Yt)}return null}let pr=(()=>{class te{constructor(ne,Ee,ct,Yt){this._iterableDiffers=ne,this._keyValueDiffers=Ee,this._ngEl=ct,this._renderer=Yt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(ne){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof ne?ne.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(ne){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof ne?ne.split(/\s+/):ne,this._rawClass&&((0,D.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const ne=this._iterableDiffer.diff(this._rawClass);ne&&this._applyIterableChanges(ne)}else if(this._keyValueDiffer){const ne=this._keyValueDiffer.diff(this._rawClass);ne&&this._applyKeyValueChanges(ne)}}_applyKeyValueChanges(ne){ne.forEachAddedItem(Ee=>this._toggleClass(Ee.key,Ee.currentValue)),ne.forEachChangedItem(Ee=>this._toggleClass(Ee.key,Ee.currentValue)),ne.forEachRemovedItem(Ee=>{Ee.previousValue&&this._toggleClass(Ee.key,!1)})}_applyIterableChanges(ne){ne.forEachAddedItem(Ee=>{if("string"!=typeof Ee.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,D.AaK)(Ee.item)}`);this._toggleClass(Ee.item,!0)}),ne.forEachRemovedItem(Ee=>this._toggleClass(Ee.item,!1))}_applyClasses(ne){ne&&(Array.isArray(ne)||ne instanceof Set?ne.forEach(Ee=>this._toggleClass(Ee,!0)):Object.keys(ne).forEach(Ee=>this._toggleClass(Ee,!!ne[Ee])))}_removeClasses(ne){ne&&(Array.isArray(ne)||ne instanceof Set?ne.forEach(Ee=>this._toggleClass(Ee,!1)):Object.keys(ne).forEach(Ee=>this._toggleClass(Ee,!1)))}_toggleClass(ne,Ee){(ne=ne.trim())&&ne.split(/\s+/g).forEach(ct=>{Ee?this._renderer.addClass(this._ngEl.nativeElement,ct):this._renderer.removeClass(this._ngEl.nativeElement,ct)})}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.ZZ4),D.Y36(D.aQg),D.Y36(D.SBq),D.Y36(D.Qsj))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),te})();class $o{constructor(ve,ne,Ee,ct){this.$implicit=ve,this.ngForOf=ne,this.index=Ee,this.count=ct}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mr=(()=>{class te{constructor(ne,Ee,ct){this._viewContainer=ne,this._template=Ee,this._differs=ct,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ne){this._ngForOf=ne,this._ngForOfDirty=!0}set ngForTrackBy(ne){this._trackByFn=ne}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(ne){ne&&(this._template=ne)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ne=this._ngForOf;!this._differ&&ne&&(this._differ=this._differs.find(ne).create(this.ngForTrackBy))}if(this._differ){const ne=this._differ.diff(this._ngForOf);ne&&this._applyChanges(ne)}}_applyChanges(ne){const Ee=this._viewContainer;ne.forEachOperation((ct,Yt,un)=>{if(null==ct.previousIndex)Ee.createEmbeddedView(this._template,new $o(ct.item,this._ngForOf,-1,-1),null===un?void 0:un);else if(null==un)Ee.remove(null===Yt?void 0:Yt);else if(null!==Yt){const Mn=Ee.get(Yt);Ee.move(Mn,un),ao(Mn,ct)}});for(let ct=0,Yt=Ee.length;ct<Yt;ct++){const Mn=Ee.get(ct).context;Mn.index=ct,Mn.count=Yt,Mn.ngForOf=this._ngForOf}ne.forEachIdentityChange(ct=>{ao(Ee.get(ct.currentIndex),ct)})}static ngTemplateContextGuard(ne,Ee){return!0}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(D.ZZ4))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),te})();function ao(te,ve){te.context.$implicit=ve.item}let dr=(()=>{class te{constructor(ne,Ee){this._viewContainer=ne,this._context=new $i,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ee}set ngIf(ne){this._context.$implicit=this._context.ngIf=ne,this._updateView()}set ngIfThen(ne){lo("ngIfThen",ne),this._thenTemplateRef=ne,this._thenViewRef=null,this._updateView()}set ngIfElse(ne){lo("ngIfElse",ne),this._elseTemplateRef=ne,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ne,Ee){return!0}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),te})();class $i{constructor(){this.$implicit=null,this.ngIf=null}}function lo(te,ve){if(ve&&!ve.createEmbeddedView)throw new Error(`${te} must be a TemplateRef, but received '${(0,D.AaK)(ve)}'.`)}class Zo{constructor(ve,ne){this._viewContainerRef=ve,this._templateRef=ne,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(ve){ve&&!this._created?this.create():!ve&&this._created&&this.destroy()}}let Rr=(()=>{class te{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(ne){this._ngSwitch=ne,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(ne){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(ne)}_matchCase(ne){const Ee=ne==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||Ee,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),Ee}_updateDefaultCases(ne){if(this._defaultViews&&ne!==this._defaultUsed){this._defaultUsed=ne;for(let Ee=0;Ee<this._defaultViews.length;Ee++)this._defaultViews[Ee].enforceState(ne)}}}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),te})(),Zr=(()=>{class te{constructor(ne,Ee,ct){this.ngSwitch=ct,ct._addCase(),this._view=new Zo(ne,Ee)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Rr,9))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),te})(),cs=(()=>{class te{constructor(ne,Ee,ct){ct._addDefault(new Zo(ne,Ee))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b),D.Y36(D.Rgc),D.Y36(Rr,9))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngSwitchDefault",""]]}),te})(),us=(()=>{class te{constructor(ne,Ee,ct){this._ngEl=ne,this._differs=Ee,this._renderer=ct,this._ngStyle=null,this._differ=null}set ngStyle(ne){this._ngStyle=ne,!this._differ&&ne&&(this._differ=this._differs.find(ne).create())}ngDoCheck(){if(this._differ){const ne=this._differ.diff(this._ngStyle);ne&&this._applyChanges(ne)}}_setStyle(ne,Ee){const[ct,Yt]=ne.split(".");null!=(Ee=null!=Ee&&Yt?`${Ee}${Yt}`:Ee)?this._renderer.setStyle(this._ngEl.nativeElement,ct,Ee):this._renderer.removeStyle(this._ngEl.nativeElement,ct)}_applyChanges(ne){ne.forEachRemovedItem(Ee=>this._setStyle(Ee.key,null)),ne.forEachAddedItem(Ee=>this._setStyle(Ee.key,Ee.currentValue)),ne.forEachChangedItem(Ee=>this._setStyle(Ee.key,Ee.currentValue))}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.SBq),D.Y36(D.aQg),D.Y36(D.Qsj))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),te})(),ds=(()=>{class te{constructor(ne){this._viewContainerRef=ne,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(ne){if(ne.ngTemplateOutlet){const Ee=this._viewContainerRef;this._viewRef&&Ee.remove(Ee.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?Ee.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&ne.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.s_b))},te.\u0275dir=D.lG2({type:te,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[D.TTD]}),te})();class qr{createSubscription(ve,ne){return ve.subscribe({next:ne,error:Ee=>{throw Ee}})}dispose(ve){ve.unsubscribe()}onDestroy(ve){ve.unsubscribe()}}class No{createSubscription(ve,ne){return ve.then(ne,Ee=>{throw Ee})}dispose(ve){}onDestroy(ve){}}const Ss=new No,Ir=new qr;let Xo=(()=>{class te{constructor(ne){this._ref=ne,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(ne){return this._obj?ne!==this._obj?(this._dispose(),this.transform(ne)):this._latestValue:(ne&&this._subscribe(ne),this._latestValue)}_subscribe(ne){this._obj=ne,this._strategy=this._selectStrategy(ne),this._subscription=this._strategy.createSubscription(ne,Ee=>this._updateLatestValue(ne,Ee))}_selectStrategy(ne){if((0,D.QGY)(ne))return Ss;if((0,D.F4k)(ne))return Ir;throw function Ur(te,ve){return new D.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(ne,Ee){ne===this._obj&&(this._latestValue=Ee,this._ref.markForCheck())}}return te.\u0275fac=function(ne){return new(ne||te)(D.Y36(D.sBO,16))},te.\u0275pipe=D.Yjl({name:"async",type:te,pure:!1}),te})(),Bo=(()=>{class te{}return te.\u0275fac=function(ne){return new(ne||te)},te.\u0275mod=D.oAB({type:te}),te.\u0275inj=D.cJS({providers:[{provide:Pn,useClass:rr}]}),te})();const ts="browser";function uo(te){return te===ts}let Ps=(()=>{class te{}return te.\u0275prov=(0,D.Yz7)({token:te,providedIn:"root",factory:()=>new js((0,D.LFG)(Oe),window)}),te})();class js{constructor(ve,ne){this.document=ve,this.window=ne,this.offset=()=>[0,0]}setOffset(ve){this.offset=Array.isArray(ve)?()=>ve:ve}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ve){this.supportsScrolling()&&this.window.scrollTo(ve[0],ve[1])}scrollToAnchor(ve){if(!this.supportsScrolling())return;const ne=function ea(te,ve){const ne=te.getElementById(ve)||te.getElementsByName(ve)[0];if(ne)return ne;if("function"==typeof te.createTreeWalker&&te.body&&(te.body.createShadowRoot||te.body.attachShadow)){const Ee=te.createTreeWalker(te.body,NodeFilter.SHOW_ELEMENT);let ct=Ee.currentNode;for(;ct;){const Yt=ct.shadowRoot;if(Yt){const un=Yt.getElementById(ve)||Yt.querySelector(`[name="${ve}"]`);if(un)return un}ct=Ee.nextNode()}}return null}(this.document,ve);ne&&(this.scrollToElement(ne),this.attemptFocus(ne))}setHistoryScrollRestoration(ve){if(this.supportScrollRestoration()){const ne=this.window.history;ne&&ne.scrollRestoration&&(ne.scrollRestoration=ve)}}scrollToElement(ve){const ne=ve.getBoundingClientRect(),Ee=ne.left+this.window.pageXOffset,ct=ne.top+this.window.pageYOffset,Yt=this.offset();this.window.scrollTo(Ee-Yt[0],ct-Yt[1])}attemptFocus(ve){return ve.focus(),this.document.activeElement===ve}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ve=fr(this.window.history)||fr(Object.getPrototypeOf(this.window.history));return!(!ve||!ve.writable&&!ve.set)}catch(ve){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ve){return!1}}}function fr(te){return Object.getOwnPropertyDescriptor(te,"scrollRestoration")}class Or{}},520:(On,wt,V)=>{"use strict";V.d(wt,{eN:()=>Ct,JF:()=>Zn});var D=V(9808),l=V(5e3),q=V(9646),g=V(8306),$e=V(4351),Ke=V(9300),Oe=V(4004);class Le{}class he{}class Ve{constructor(R){this.normalizedNames=new Map,this.lazyUpdate=null,R?this.lazyInit="string"==typeof R?()=>{this.headers=new Map,R.split("\n").forEach(N=>{const ie=N.indexOf(":");if(ie>0){const fe=N.slice(0,ie),nt=fe.toLowerCase(),Et=N.slice(ie+1).trim();this.maybeSetNormalizedName(fe,nt),this.headers.has(nt)?this.headers.get(nt).push(Et):this.headers.set(nt,[Et])}})}:()=>{this.headers=new Map,Object.keys(R).forEach(N=>{let ie=R[N];const fe=N.toLowerCase();"string"==typeof ie&&(ie=[ie]),ie.length>0&&(this.headers.set(fe,ie),this.maybeSetNormalizedName(N,fe))})}:this.headers=new Map}has(R){return this.init(),this.headers.has(R.toLowerCase())}get(R){this.init();const N=this.headers.get(R.toLowerCase());return N&&N.length>0?N[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(R){return this.init(),this.headers.get(R.toLowerCase())||null}append(R,N){return this.clone({name:R,value:N,op:"a"})}set(R,N){return this.clone({name:R,value:N,op:"s"})}delete(R,N){return this.clone({name:R,value:N,op:"d"})}maybeSetNormalizedName(R,N){this.normalizedNames.has(N)||this.normalizedNames.set(N,R)}init(){this.lazyInit&&(this.lazyInit instanceof Ve?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(R=>this.applyUpdate(R)),this.lazyUpdate=null))}copyFrom(R){R.init(),Array.from(R.headers.keys()).forEach(N=>{this.headers.set(N,R.headers.get(N)),this.normalizedNames.set(N,R.normalizedNames.get(N))})}clone(R){const N=new Ve;return N.lazyInit=this.lazyInit&&this.lazyInit instanceof Ve?this.lazyInit:this,N.lazyUpdate=(this.lazyUpdate||[]).concat([R]),N}applyUpdate(R){const N=R.name.toLowerCase();switch(R.op){case"a":case"s":let ie=R.value;if("string"==typeof ie&&(ie=[ie]),0===ie.length)return;this.maybeSetNormalizedName(R.name,N);const fe=("a"===R.op?this.headers.get(N):void 0)||[];fe.push(...ie),this.headers.set(N,fe);break;case"d":const nt=R.value;if(nt){let Et=this.headers.get(N);if(!Et)return;Et=Et.filter(_t=>-1===nt.indexOf(_t)),0===Et.length?(this.headers.delete(N),this.normalizedNames.delete(N)):this.headers.set(N,Et)}else this.headers.delete(N),this.normalizedNames.delete(N)}}forEach(R){this.init(),Array.from(this.normalizedNames.keys()).forEach(N=>R(this.normalizedNames.get(N),this.headers.get(N)))}}class Ze{encodeKey(R){return tt(R)}encodeValue(R){return tt(R)}decodeKey(R){return decodeURIComponent(R)}decodeValue(R){return decodeURIComponent(R)}}const gt=/%(\d[a-f0-9])/gi,Ye={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function tt(U){return encodeURIComponent(U).replace(gt,(R,N)=>{var ie;return null!==(ie=Ye[N])&&void 0!==ie?ie:R})}function Mt(U){return`${U}`}class He{constructor(R={}){if(this.updates=null,this.cloneFrom=null,this.encoder=R.encoder||new Ze,R.fromString){if(R.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Be(U,R){const N=new Map;return U.length>0&&U.replace(/^\?/,"").split("&").forEach(fe=>{const nt=fe.indexOf("="),[Et,_t]=-1==nt?[R.decodeKey(fe),""]:[R.decodeKey(fe.slice(0,nt)),R.decodeValue(fe.slice(nt+1))],fn=N.get(Et)||[];fn.push(_t),N.set(Et,fn)}),N}(R.fromString,this.encoder)}else R.fromObject?(this.map=new Map,Object.keys(R.fromObject).forEach(N=>{const ie=R.fromObject[N];this.map.set(N,Array.isArray(ie)?ie:[ie])})):this.map=null}has(R){return this.init(),this.map.has(R)}get(R){this.init();const N=this.map.get(R);return N?N[0]:null}getAll(R){return this.init(),this.map.get(R)||null}keys(){return this.init(),Array.from(this.map.keys())}append(R,N){return this.clone({param:R,value:N,op:"a"})}appendAll(R){const N=[];return Object.keys(R).forEach(ie=>{const fe=R[ie];Array.isArray(fe)?fe.forEach(nt=>{N.push({param:ie,value:nt,op:"a"})}):N.push({param:ie,value:fe,op:"a"})}),this.clone(N)}set(R,N){return this.clone({param:R,value:N,op:"s"})}delete(R,N){return this.clone({param:R,value:N,op:"d"})}toString(){return this.init(),this.keys().map(R=>{const N=this.encoder.encodeKey(R);return this.map.get(R).map(ie=>N+"="+this.encoder.encodeValue(ie)).join("&")}).filter(R=>""!==R).join("&")}clone(R){const N=new He({encoder:this.encoder});return N.cloneFrom=this.cloneFrom||this,N.updates=(this.updates||[]).concat(R),N}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(R=>this.map.set(R,this.cloneFrom.map.get(R))),this.updates.forEach(R=>{switch(R.op){case"a":case"s":const N=("a"===R.op?this.map.get(R.param):void 0)||[];N.push(Mt(R.value)),this.map.set(R.param,N);break;case"d":if(void 0===R.value){this.map.delete(R.param);break}{let ie=this.map.get(R.param)||[];const fe=ie.indexOf(Mt(R.value));-1!==fe&&ie.splice(fe,1),ie.length>0?this.map.set(R.param,ie):this.map.delete(R.param)}}}),this.cloneFrom=this.updates=null)}}class Ht{constructor(){this.map=new Map}set(R,N){return this.map.set(R,N),this}get(R){return this.map.has(R)||this.map.set(R,R.defaultValue()),this.map.get(R)}delete(R){return this.map.delete(R),this}has(R){return this.map.has(R)}keys(){return this.map.keys()}}function Dt(U){return"undefined"!=typeof ArrayBuffer&&U instanceof ArrayBuffer}function Fe(U){return"undefined"!=typeof Blob&&U instanceof Blob}function rt(U){return"undefined"!=typeof FormData&&U instanceof FormData}class Bt{constructor(R,N,ie,fe){let nt;if(this.url=N,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=R.toUpperCase(),function an(U){switch(U){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fe?(this.body=void 0!==ie?ie:null,nt=fe):nt=ie,nt&&(this.reportProgress=!!nt.reportProgress,this.withCredentials=!!nt.withCredentials,nt.responseType&&(this.responseType=nt.responseType),nt.headers&&(this.headers=nt.headers),nt.context&&(this.context=nt.context),nt.params&&(this.params=nt.params)),this.headers||(this.headers=new Ve),this.context||(this.context=new Ht),this.params){const Et=this.params.toString();if(0===Et.length)this.urlWithParams=N;else{const _t=N.indexOf("?");this.urlWithParams=N+(-1===_t?"?":_t<N.length-1?"&":"")+Et}}else this.params=new He,this.urlWithParams=N}serializeBody(){return null===this.body?null:Dt(this.body)||Fe(this.body)||rt(this.body)||function nn(U){return"undefined"!=typeof URLSearchParams&&U instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof He?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rt(this.body)?null:Fe(this.body)?this.body.type||null:Dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof He?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(R={}){var N;const ie=R.method||this.method,fe=R.url||this.url,nt=R.responseType||this.responseType,Et=void 0!==R.body?R.body:this.body,_t=void 0!==R.withCredentials?R.withCredentials:this.withCredentials,fn=void 0!==R.reportProgress?R.reportProgress:this.reportProgress;let _n=R.headers||this.headers,Hn=R.params||this.params;const Fi=null!==(N=R.context)&&void 0!==N?N:this.context;return void 0!==R.setHeaders&&(_n=Object.keys(R.setHeaders).reduce((Jt,hn)=>Jt.set(hn,R.setHeaders[hn]),_n)),R.setParams&&(Hn=Object.keys(R.setParams).reduce((Jt,hn)=>Jt.set(hn,R.setParams[hn]),Hn)),new Bt(ie,fe,Et,{params:Hn,headers:_n,context:Fi,reportProgress:fn,responseType:nt,withCredentials:_t})}}var Qt=(()=>((Qt=Qt||{})[Qt.Sent=0]="Sent",Qt[Qt.UploadProgress=1]="UploadProgress",Qt[Qt.ResponseHeader=2]="ResponseHeader",Qt[Qt.DownloadProgress=3]="DownloadProgress",Qt[Qt.Response=4]="Response",Qt[Qt.User=5]="User",Qt))();class at{constructor(R,N=200,ie="OK"){this.headers=R.headers||new Ve,this.status=void 0!==R.status?R.status:N,this.statusText=R.statusText||ie,this.url=R.url||null,this.ok=this.status>=200&&this.status<300}}class mt extends at{constructor(R={}){super(R),this.type=Qt.ResponseHeader}clone(R={}){return new mt({headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class lt extends at{constructor(R={}){super(R),this.type=Qt.Response,this.body=void 0!==R.body?R.body:null}clone(R={}){return new lt({body:void 0!==R.body?R.body:this.body,headers:R.headers||this.headers,status:void 0!==R.status?R.status:this.status,statusText:R.statusText||this.statusText,url:R.url||this.url||void 0})}}class At extends at{constructor(R){super(R,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${R.url||"(unknown url)"}`:`Http failure response for ${R.url||"(unknown url)"}: ${R.status} ${R.statusText}`,this.error=R.error||null}}function Kt(U,R){return{body:R,headers:U.headers,context:U.context,observe:U.observe,params:U.params,reportProgress:U.reportProgress,responseType:U.responseType,withCredentials:U.withCredentials}}let Ct=(()=>{class U{constructor(N){this.handler=N}request(N,ie,fe={}){let nt;if(N instanceof Bt)nt=N;else{let fn,_n;fn=fe.headers instanceof Ve?fe.headers:new Ve(fe.headers),fe.params&&(_n=fe.params instanceof He?fe.params:new He({fromObject:fe.params})),nt=new Bt(N,ie,void 0!==fe.body?fe.body:null,{headers:fn,context:fe.context,params:_n,reportProgress:fe.reportProgress,responseType:fe.responseType||"json",withCredentials:fe.withCredentials})}const Et=(0,q.of)(nt).pipe((0,$e.b)(fn=>this.handler.handle(fn)));if(N instanceof Bt||"events"===fe.observe)return Et;const _t=Et.pipe((0,Ke.h)(fn=>fn instanceof lt));switch(fe.observe||"body"){case"body":switch(nt.responseType){case"arraybuffer":return _t.pipe((0,Oe.U)(fn=>{if(null!==fn.body&&!(fn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return fn.body}));case"blob":return _t.pipe((0,Oe.U)(fn=>{if(null!==fn.body&&!(fn.body instanceof Blob))throw new Error("Response is not a Blob.");return fn.body}));case"text":return _t.pipe((0,Oe.U)(fn=>{if(null!==fn.body&&"string"!=typeof fn.body)throw new Error("Response is not a string.");return fn.body}));default:return _t.pipe((0,Oe.U)(fn=>fn.body))}case"response":return _t;default:throw new Error(`Unreachable: unhandled observe type ${fe.observe}}`)}}delete(N,ie={}){return this.request("DELETE",N,ie)}get(N,ie={}){return this.request("GET",N,ie)}head(N,ie={}){return this.request("HEAD",N,ie)}jsonp(N,ie){return this.request("JSONP",N,{params:(new He).append(ie,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(N,ie={}){return this.request("OPTIONS",N,ie)}patch(N,ie,fe={}){return this.request("PATCH",N,Kt(fe,ie))}post(N,ie,fe={}){return this.request("POST",N,Kt(fe,ie))}put(N,ie,fe={}){return this.request("PUT",N,Kt(fe,ie))}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(Le))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();class yn{constructor(R,N){this.next=R,this.interceptor=N}handle(R){return this.interceptor.intercept(R,this.next)}}const di=new l.OlP("HTTP_INTERCEPTORS");let Ui=(()=>{class U{intercept(N,ie){return ie.handle(N)}}return U.\u0275fac=function(N){return new(N||U)},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();const Qn=/^\)\]\}',?\n/;let kt=(()=>{class U{constructor(N){this.xhrFactory=N}handle(N){if("JSONP"===N.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new g.y(ie=>{const fe=this.xhrFactory.build();if(fe.open(N.method,N.urlWithParams),N.withCredentials&&(fe.withCredentials=!0),N.headers.forEach((hn,Zt)=>fe.setRequestHeader(hn,Zt.join(","))),N.headers.has("Accept")||fe.setRequestHeader("Accept","application/json, text/plain, */*"),!N.headers.has("Content-Type")){const hn=N.detectContentTypeHeader();null!==hn&&fe.setRequestHeader("Content-Type",hn)}if(N.responseType){const hn=N.responseType.toLowerCase();fe.responseType="json"!==hn?hn:"text"}const nt=N.serializeBody();let Et=null;const _t=()=>{if(null!==Et)return Et;const hn=1223===fe.status?204:fe.status,Zt=fe.statusText||"OK",Oi=new Ve(fe.getAllResponseHeaders()),Wn=function ft(U){return"responseURL"in U&&U.responseURL?U.responseURL:/^X-Request-URL:/m.test(U.getAllResponseHeaders())?U.getResponseHeader("X-Request-URL"):null}(fe)||N.url;return Et=new mt({headers:Oi,status:hn,statusText:Zt,url:Wn}),Et},fn=()=>{let{headers:hn,status:Zt,statusText:Oi,url:Wn}=_t(),Vn=null;204!==Zt&&(Vn=void 0===fe.response?fe.responseText:fe.response),0===Zt&&(Zt=Vn?200:0);let Rt=Zt>=200&&Zt<300;if("json"===N.responseType&&"string"==typeof Vn){const pt=Vn;Vn=Vn.replace(Qn,"");try{Vn=""!==Vn?JSON.parse(Vn):null}catch(we){Vn=pt,Rt&&(Rt=!1,Vn={error:we,text:Vn})}}Rt?(ie.next(new lt({body:Vn,headers:hn,status:Zt,statusText:Oi,url:Wn||void 0})),ie.complete()):ie.error(new At({error:Vn,headers:hn,status:Zt,statusText:Oi,url:Wn||void 0}))},_n=hn=>{const{url:Zt}=_t(),Oi=new At({error:hn,status:fe.status||0,statusText:fe.statusText||"Unknown Error",url:Zt||void 0});ie.error(Oi)};let Hn=!1;const Fi=hn=>{Hn||(ie.next(_t()),Hn=!0);let Zt={type:Qt.DownloadProgress,loaded:hn.loaded};hn.lengthComputable&&(Zt.total=hn.total),"text"===N.responseType&&!!fe.responseText&&(Zt.partialText=fe.responseText),ie.next(Zt)},Jt=hn=>{let Zt={type:Qt.UploadProgress,loaded:hn.loaded};hn.lengthComputable&&(Zt.total=hn.total),ie.next(Zt)};return fe.addEventListener("load",fn),fe.addEventListener("error",_n),fe.addEventListener("timeout",_n),fe.addEventListener("abort",_n),N.reportProgress&&(fe.addEventListener("progress",Fi),null!==nt&&fe.upload&&fe.upload.addEventListener("progress",Jt)),fe.send(nt),ie.next({type:Qt.Sent}),()=>{fe.removeEventListener("error",_n),fe.removeEventListener("abort",_n),fe.removeEventListener("load",fn),fe.removeEventListener("timeout",_n),N.reportProgress&&(fe.removeEventListener("progress",Fi),null!==nt&&fe.upload&&fe.upload.removeEventListener("progress",Jt)),fe.readyState!==fe.DONE&&fe.abort()}})}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(D.JF))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})();const ln=new l.OlP("XSRF_COOKIE_NAME"),gn=new l.OlP("XSRF_HEADER_NAME");class Bn{}let Jn=(()=>{class U{constructor(N,ie,fe){this.doc=N,this.platform=ie,this.cookieName=fe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const N=this.doc.cookie||"";return N!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,D.Mx)(N,this.cookieName),this.lastCookieString=N),this.lastToken}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(D.K0),l.LFG(l.Lbi),l.LFG(ln))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),Bi=(()=>{class U{constructor(N,ie){this.tokenService=N,this.headerName=ie}intercept(N,ie){const fe=N.url.toLowerCase();if("GET"===N.method||"HEAD"===N.method||fe.startsWith("http://")||fe.startsWith("https://"))return ie.handle(N);const nt=this.tokenService.getToken();return null!==nt&&!N.headers.has(this.headerName)&&(N=N.clone({headers:N.headers.set(this.headerName,nt)})),ie.handle(N)}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(Bn),l.LFG(gn))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),Xi=(()=>{class U{constructor(N,ie){this.backend=N,this.injector=ie,this.chain=null}handle(N){if(null===this.chain){const ie=this.injector.get(di,[]);this.chain=ie.reduceRight((fe,nt)=>new yn(fe,nt),this.backend)}return this.chain.handle(N)}}return U.\u0275fac=function(N){return new(N||U)(l.LFG(he),l.LFG(l.zs3))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac}),U})(),Xn=(()=>{class U{static disable(){return{ngModule:U,providers:[{provide:Bi,useClass:Ui}]}}static withOptions(N={}){return{ngModule:U,providers:[N.cookieName?{provide:ln,useValue:N.cookieName}:[],N.headerName?{provide:gn,useValue:N.headerName}:[]]}}}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({providers:[Bi,{provide:di,useExisting:Bi,multi:!0},{provide:Bn,useClass:Jn},{provide:ln,useValue:"XSRF-TOKEN"},{provide:gn,useValue:"X-XSRF-TOKEN"}]}),U})(),Zn=(()=>{class U{}return U.\u0275fac=function(N){return new(N||U)},U.\u0275mod=l.oAB({type:U}),U.\u0275inj=l.cJS({providers:[Ct,{provide:Le,useClass:Xi},kt,{provide:he,useExisting:kt}],imports:[[Xn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),U})()},5e3:(On,wt,V)=>{"use strict";V.d(wt,{deG:()=>vt,tb:()=>xx,AFp:()=>yx,ip1:()=>$0,CZH:()=>$p,hGG:()=>_1,z2F:()=>Lm,sBO:()=>Zw,Sil:()=>q0,_Vd:()=>Na,EJc:()=>Cx,SBq:()=>Eh,qLn:()=>dc,vpe:()=>Nl,tBr:()=>jl,XFs:()=>qn,OlP:()=>ut,zs3:()=>Xa,ZZ4:()=>iy,aQg:()=>ry,soG:()=>ty,YKP:()=>bi,h0i:()=>ei,PXZ:()=>zw,R0b:()=>bl,FiY:()=>$s,Lbi:()=>bx,g9A:()=>vx,n_E:()=>Y_,Qsj:()=>Im,FYo:()=>Wi,JOm:()=>ka,q3G:()=>vo,tp0:()=>Hl,Rgc:()=>Rm,dDg:()=>Mx,GfV:()=>q_,s_b:()=>J_,ifc:()=>nt,eFA:()=>Ax,G48:()=>$w,Gpc:()=>Ze,f3M:()=>Mc,_c5:()=>u1,VLi:()=>Lw,c2e:()=>wx,zSh:()=>Ff,wAp:()=>ji,vHH:()=>tt,EiD:()=>Ed,mCW:()=>lc,qzn:()=>Al,JVY:()=>sa,pB0:()=>Kp,eBb:()=>Wp,L6k:()=>Uh,LAX:()=>Yp,cg1:()=>pm,kL8:()=>w_,yhl:()=>Il,dqk:()=>Hn,sIi:()=>fh,CqO:()=>Ag,QGY:()=>em,F4k:()=>Tg,RDi:()=>is,AaK:()=>Le,z3N:()=>ba,qOj:()=>Uf,TTD:()=>qo,_Bn:()=>$_,xp6:()=>Wc,uIk:()=>Gf,Tol:()=>Qg,Gre:()=>h_,ekj:()=>sm,Suo:()=>Jb,Xpm:()=>ye,lG2:()=>it,Yz7:()=>xi,cJS:()=>Qn,oAB:()=>Gi,Yjl:()=>J,Y36:()=>gh,_UZ:()=>Dg,GkF:()=>Mg,BQk:()=>Xf,ynx:()=>Qf,qZA:()=>Jf,TgZ:()=>Kf,EpF:()=>Sg,n5z:()=>E,Ikx:()=>dm,LFG:()=>Oo,$8M:()=>G,$Z:()=>Eg,NdJ:()=>tm,CRH:()=>Qb,kcU:()=>Sr,O4$:()=>Hr,oxw:()=>Og,ALo:()=>Ih,lcZ:()=>Ph,Hsn:()=>Rg,F$t:()=>kg,Q6J:()=>Wf,DdM:()=>yl,VKq:()=>Xl,WLB:()=>Mh,kEZ:()=>tl,rFY:()=>Np,iGM:()=>Yb,MAs:()=>Ny,Jf7:()=>kd,CHM:()=>M,oJD:()=>Zh,LSH:()=>Fc,Akn:()=>fl,Udp:()=>om,WFA:()=>nm,d8E:()=>hm,YNc:()=>Ly,_uU:()=>o_,Oqu:()=>cm,hij:()=>Ep,Gf:()=>Kb});var D=V(7579),l=V(727),q=V(8306),g=V(6451),$e=V(3099);function Ke(t){for(let n in t)if(t[n]===Ke)return n;throw Error("Could not find renamed property on target object.")}function Oe(t,n){for(const o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=n[o])}function Le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const o=n.indexOf("\n");return-1===o?n:n.substring(0,o)}function he(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Ve=Ke({__forward_ref__:Ke});function Ze(t){return t.__forward_ref__=Ze,t.toString=function(){return Le(this())},t}function Be(t){return gt(t)?t():t}function gt(t){return"function"==typeof t&&t.hasOwnProperty(Ve)&&t.__forward_ref__===Ze}class tt extends Error{constructor(n,o){super(function Mt(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,o)),this.code=n}}function He(t){return"string"==typeof t?t:null==t?"":String(t)}function Vt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():He(t)}function Fe(t,n){const o=n?` in ${n}`:"";throw new tt(-201,`No provider for ${Vt(t)} found${o}`)}function kn(t,n){null==t&&function Rn(t,n,o,u){throw new Error(`ASSERTION ERROR: ${t}`+(null==u?"":` [Expected=> ${o} ${u} ${n} <=Actual]`))}(n,t,null,"!=")}function xi(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return kt(t,Jn)||kt(t,Xi)}function kt(t,n){return t.hasOwnProperty(n)?t[n]:null}function Bn(t){return t&&(t.hasOwnProperty(Bi)||t.hasOwnProperty(_i))?t[Bi]:null}const Jn=Ke({\u0275prov:Ke}),Bi=Ke({\u0275inj:Ke}),Xi=Ke({ngInjectableDef:Ke}),_i=Ke({ngInjectorDef:Ke});var qn=(()=>((qn=qn||{})[qn.Default=0]="Default",qn[qn.Host=1]="Host",qn[qn.Self=2]="Self",qn[qn.SkipSelf=4]="SkipSelf",qn[qn.Optional=8]="Optional",qn))();let Xn;function St(t){const n=Xn;return Xn=t,n}function $(t,n,o){const u=ft(t);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&qn.Optional?null:void 0!==n?n:void Fe(Le(t),"Injector")}function R(t){return{toString:t}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),nt=(()=>{return(t=nt||(nt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",nt;var t})();const Et="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,fn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Hn=Et||"undefined"!=typeof global&&global||_t||fn,hn={},Zt=[],Oi=Ke({\u0275cmp:Ke}),Wn=Ke({\u0275dir:Ke}),Vn=Ke({\u0275pipe:Ke}),Rt=Ke({\u0275mod:Ke}),pt=Ke({\u0275fac:Ke}),we=Ke({__NG_ELEMENT_ID__:Ke});let Ae=0;function ye(t){return R(()=>{const o={},u={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Zt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||nt.Emulated,id:"c",styles:t.styles||Zt,_:null,setInput:null,schemas:t.schemas||null,tView:null},p=t.directives,b=t.features,T=t.pipes;return u.id+=Ae++,u.inputs=Tt(t.inputs,o),u.outputs=Tt(t.outputs),b&&b.forEach(k=>k(u)),u.directiveDefs=p?()=>("function"==typeof p?p():p).map(It):null,u.pipeDefs=T?()=>("function"==typeof T?T():T).map(xn):null,u})}function It(t){return F(t)||function K(t){return t[Wn]||null}(t)}function xn(t){return function ge(t){return t[Vn]||null}(t)}const Ei={};function Gi(t){return R(()=>{const n={type:t.type,bootstrap:t.bootstrap||Zt,declarations:t.declarations||Zt,imports:t.imports||Zt,exports:t.exports||Zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ei[t.id]=t.type),n})}function Tt(t,n){if(null==t)return hn;const o={};for(const u in t)if(t.hasOwnProperty(u)){let p=t[u],b=p;Array.isArray(p)&&(b=p[1],p=p[0]),o[p]=u,n&&(n[p]=b)}return o}const it=ye;function J(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function F(t){return t[Oi]||null}function De(t,n){const o=t[Rt]||null;if(!o&&!0===n)throw new Error(`Type ${Le(t)} does not have '\u0275mod' property.`);return o}function Rr(t){return Array.isArray(t)&&"object"==typeof t[1]}function Zr(t){return Array.isArray(t)&&!0===t[1]}function cs(t){return 0!=(8&t.flags)}function zs(t){return 2==(2&t.flags)}function to(t){return 1==(1&t.flags)}function xr(t){return null!==t.template}function us(t){return 0!=(512&t[2])}function Io(t,n){return t.hasOwnProperty(pt)?t[pt]:null}class hs{constructor(n,o,u){this.previousValue=n,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function qo(){return Pr}function Pr(t){return t.type.prototype.ngOnChanges&&(t.setInput=ps),xo}function xo(){const t=ts(this),n=null==t?void 0:t.current;if(n){const o=t.previous;if(o===hn)t.previous=n;else for(let u in n)o[u]=n[u];t.current=null,this.ngOnChanges(n)}}function ps(t,n,o,u){const p=ts(t)||function fs(t,n){return t[Bo]=n}(t,{previous:hn,current:null}),b=p.current||(p.current={}),T=p.previous,k=this.declaredInputs[o],H=T[k];b[k]=new hs(H&&H.currentValue,n,T===hn),t[u]=n}qo.ngInherit=!0;const Bo="__ngSimpleChanges__";function ts(t){return t[Bo]||null}const Is="http://www.w3.org/2000/svg";let ho;function is(t){ho=t}function Ps(){return void 0!==ho?ho:"undefined"!=typeof document?document:void 0}function fr(t){return!!t.listen}const ea={createRenderer:(t,n)=>Ps()};function Or(t){for(;Array.isArray(t);)t=t[0];return t}function ne(t,n){return Or(n[t])}function Ee(t,n){return Or(n[t.index])}function Yt(t,n){return t.data[n]}function un(t,n){return t[n]}function Mn(t,n){const o=n[t];return Rr(o)?o:o[0]}function Di(t){return 4==(4&t[2])}function ai(t){return 128==(128&t[2])}function ci(t,n){return null==n?null:t[n]}function Q(t){t[18]=0}function W(t,n){t[5]+=n;let o=t,u=t[3];for(;null!==u&&(1===n&&1===o[5]||-1===n&&0===o[5]);)u[5]+=n,o=u,u=u[3]}const B={lFrame:_s(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jr(){return B.bindingsEnabled}function mn(){return B.lFrame.lView}function ue(){return B.lFrame.tView}function M(t){return B.lFrame.contextLView=t,t[8]}function S(){let t=j();for(;null!==t&&64===t.type;)t=t.parent;return t}function j(){return B.lFrame.currentTNode}function Se(t,n){const o=B.lFrame;o.currentTNode=t,o.isParent=n}function Ge(){return B.lFrame.isParent}function ot(){B.lFrame.isParent=!1}function Tn(){return B.isInCheckNoChangesMode}function ni(t){B.isInCheckNoChangesMode=t}function yi(){const t=B.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Si(){return B.lFrame.bindingIndex++}function Ni(t){const n=B.lFrame,o=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,o}function Wr(t,n){const o=B.lFrame;o.bindingIndex=o.bindingRootIndex=t,gs(n)}function gs(t){B.lFrame.currentDirectiveIndex=t}function Po(t){const n=B.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}function go(){return B.lFrame.currentQueryIndex}function rs(t){B.lFrame.currentQueryIndex=t}function Wo(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function zo(t,n,o){if(o&qn.SkipSelf){let p=n,b=t;for(;!(p=p.parent,null!==p||o&qn.Host||(p=Wo(b),null===p||(b=b[15],10&p.type))););if(null===p)return!1;n=p,t=b}const u=B.lFrame=Co();return u.currentTNode=n,u.lView=t,!0}function _o(t){const n=Co(),o=t[1];B.lFrame=n,n.currentTNode=o.firstChild,n.lView=t,n.tView=o,n.contextLView=t,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function Co(){const t=B.lFrame,n=null===t?null:t.child;return null===n?_s(t):n}function _s(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Va(){const t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ta=Va;function ii(){const t=Va();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ai(){return B.lFrame.selectedIndex}function Dr(t){B.lFrame.selectedIndex=t}function ar(){const t=B.lFrame;return Yt(t.tView,t.selectedIndex)}function Hr(){B.lFrame.currentNamespace=Is}function Sr(){!function Eo(){B.lFrame.currentNamespace=null}()}function Yr(t,n){for(let o=n.directiveStart,u=n.directiveEnd;o<u;o++){const b=t.data[o].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:k,ngAfterViewInit:H,ngAfterViewChecked:le,ngOnDestroy:_e}=b;T&&(t.contentHooks||(t.contentHooks=[])).push(-o,T),k&&((t.contentHooks||(t.contentHooks=[])).push(o,k),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(o,k)),H&&(t.viewHooks||(t.viewHooks=[])).push(-o,H),le&&((t.viewHooks||(t.viewHooks=[])).push(o,le),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(o,le)),null!=_e&&(t.destroyHooks||(t.destroyHooks=[])).push(o,_e)}}function Fn(t,n,o){Ua(t,n,3,o)}function Do(t,n,o,u){(3&t[2])===o&&Ua(t,n,o,u)}function ys(t,n){let o=t[2];(3&o)===n&&(o&=2047,o+=1,t[2]=o)}function Ua(t,n,o,u){const b=null!=u?u:-1,T=n.length-1;let k=0;for(let H=void 0!==u?65535&t[18]:0;H<T;H++)if("number"==typeof n[H+1]){if(k=n[H],null!=u&&k>=u)break}else n[H]<0&&(t[18]+=65536),(k<b||-1==b)&&(nl(t,o,n,H),t[18]=(4294901760&t[18])+H+2),H++}function nl(t,n,o,u){const p=o[u]<0,b=o[u+1],k=t[p?-o[u]:o[u]];if(p){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{b.call(k)}finally{}}}else try{b.call(k)}finally{}}class pa{constructor(n,o,u){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function ja(t,n,o){const u=fr(t);let p=0;for(;p<o.length;){const b=o[p];if("number"==typeof b){if(0!==b)break;p++;const T=o[p++],k=o[p++],H=o[p++];u?t.setAttribute(n,k,H,T):n.setAttributeNS(T,k,H)}else{const T=b,k=o[++p];fa(T)?u&&t.setProperty(n,T,k):u?t.setAttribute(n,T,k):n.setAttribute(T,k),p++}}return p}function wl(t){return 3===t||4===t||6===t}function fa(t){return 64===t.charCodeAt(0)}function Mo(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let o=-1;for(let u=0;u<n.length;u++){const p=n[u];"number"==typeof p?o=p:0===o||Ns(t,o,p,null,-1===o||2===o?n[++u]:null)}}return t}function Ns(t,n,o,u,p){let b=0,T=t.length;if(-1===n)T=-1;else for(;b<t.length;){const k=t[b++];if("number"==typeof k){if(k===n){T=-1;break}if(k>n){T=b-1;break}}}for(;b<t.length;){const k=t[b];if("number"==typeof k)break;if(k===o){if(null===u)return void(null!==p&&(t[b+1]=p));if(u===t[b+1])return void(t[b+2]=p)}b++,null!==u&&b++,null!==p&&b++}-1!==T&&(t.splice(T,0,n),b=T+1),t.splice(b++,0,o),null!==u&&t.splice(b++,0,u),null!==p&&t.splice(b++,0,p)}function zl(t){return-1!==t}function ma(t){return 32767&t}function ga(t,n){let o=function Ha(t){return t>>16}(t),u=n;for(;o>0;)u=u[15],o--;return u}let Cl=!0;function Vo(t){const n=Cl;return Cl=t,n}let P=0;function X(t,n){const o=xe(t,n);if(-1!==o)return o;const u=n[1];u.firstCreatePass&&(t.injectorIndex=n.length,re(u.data,t),re(n,null),re(u.blueprint,null));const p=Ue(t,n),b=t.injectorIndex;if(zl(p)){const T=ma(p),k=ga(p,n),H=k[1].data;for(let le=0;le<8;le++)n[b+le]=k[T+le]|H[T+le]}return n[b+8]=p,b}function re(t,n){t.push(0,0,0,0,0,0,0,0,n)}function xe(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Ue(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,u=null,p=n;for(;null!==p;){const b=p[1],T=b.type;if(u=2===T?b.declTNode:1===T?p[6]:null,null===u)return-1;if(o++,p=p[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Re(t,n,o){!function A(t,n,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(we)&&(u=o[we]),null==u&&(u=o[we]=P++);const p=255&u;n.data[t+(p>>5)]|=1<<p}(t,n,o)}function ri(t,n,o){if(o&qn.Optional)return t;Fe(n,"NodeInjector")}function Ji(t,n,o,u){if(o&qn.Optional&&void 0===u&&(u=null),0==(o&(qn.Self|qn.Host))){const p=t[9],b=St(void 0);try{return p?p.get(n,u,o&qn.Optional):$(n,u,o&qn.Optional)}finally{St(b)}}return ri(u,n,o)}function vi(t,n,o,u=qn.Default,p){if(null!==t){const b=function i(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(we)?t[we]:void 0;return"number"==typeof n?n>=0?255&n:yr:n}(o);if("function"==typeof b){if(!zo(n,t,u))return u&qn.Host?ri(p,o,u):Ji(n,o,u,p);try{const T=b(u);if(null!=T||u&qn.Optional)return T;Fe(o)}finally{ta()}}else if("number"==typeof b){let T=null,k=xe(t,n),H=-1,le=u&qn.Host?n[16][6]:null;for((-1===k||u&qn.SkipSelf)&&(H=-1===k?Ue(t,n):n[k+8],-1!==H&&m(u,!1)?(T=n[1],k=ma(H),n=ga(H,n)):k=-1);-1!==k;){const _e=n[1];if(c(b,k,_e.data)){const Ne=Yo(k,n,o,T,u,le);if(Ne!==Zi)return Ne}H=n[k+8],-1!==H&&m(u,n[1].data[k+8]===le)&&c(b,k,n)?(T=_e,k=ma(H),n=ga(H,n)):k=-1}}}return Ji(n,o,u,p)}const Zi={};function yr(){return new v(S(),mn())}function Yo(t,n,o,u,p,b){const T=n[1],k=T.data[t+8],_e=So(k,T,o,null==u?zs(k)&&Cl:u!=T&&0!=(3&k.type),p&qn.Host&&b===k);return null!==_e?f(n,T,_e,k):Zi}function So(t,n,o,u,p){const b=t.providerIndexes,T=n.data,k=1048575&b,H=t.directiveStart,_e=b>>20,ht=p?k+_e:t.directiveEnd;for(let Ot=u?k:k+_e;Ot<ht;Ot++){const dn=T[Ot];if(Ot<H&&o===dn||Ot>=H&&dn.type===o)return Ot}if(p){const Ot=T[H];if(Ot&&xr(Ot)&&Ot.type===o)return H}return null}function f(t,n,o,u){let p=t[o];const b=n.data;if(function tc(t){return t instanceof pa}(p)){const T=p;T.resolving&&function Ht(t,n){const o=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new tt(-200,`Circular dependency in DI detected for ${t}${o}`)}(Vt(b[o]));const k=Vo(T.canSeeViewProviders);T.resolving=!0;const H=T.injectImpl?St(T.injectImpl):null;zo(t,u,qn.Default);try{p=t[o]=T.factory(void 0,b,t,u),n.firstCreatePass&&o>=u.directiveStart&&function wr(t,n,o){const{ngOnChanges:u,ngOnInit:p,ngDoCheck:b}=n.type.prototype;if(u){const T=Pr(n);(o.preOrderHooks||(o.preOrderHooks=[])).push(t,T),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,T)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-t,p),b&&((o.preOrderHooks||(o.preOrderHooks=[])).push(t,b),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,b))}(o,b[o],n)}finally{null!==H&&St(H),Vo(k),T.resolving=!1,ta()}}return p}function c(t,n,o){return!!(o[n+(t>>5)]&1<<t)}function m(t,n){return!(t&qn.Self||t&qn.Host&&n)}class v{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,u){return vi(this._tNode,this._lView,n,u,o)}}function E(t){return R(()=>{const n=t.prototype.constructor,o=n[pt]||O(n),u=Object.prototype;let p=Object.getPrototypeOf(t.prototype).constructor;for(;p&&p!==u;){const b=p[pt]||O(p);if(b&&b!==o)return b;p=Object.getPrototypeOf(p)}return b=>new b})}function O(t){return gt(t)?()=>{const n=O(Be(t));return n&&n()}:Io(t)}function G(t){return function xt(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const o=t.attrs;if(o){const u=o.length;let p=0;for(;p<u;){const b=o[p];if(wl(b))break;if(0===b)p+=2;else if("number"==typeof b)for(p++;p<u&&"string"==typeof o[p];)p++;else{if(b===n)return o[p+1];p+=2}}}return null}(S(),t)}const oe="__parameters__";function ze(t,n,o){return R(()=>{const u=function Ie(t){return function(...o){if(t){const u=t(...o);for(const p in u)this[p]=u[p]}}}(n);function p(...b){if(this instanceof p)return u.apply(this,b),this;const T=new p(...b);return k.annotation=T,k;function k(H,le,_e){const Ne=H.hasOwnProperty(oe)?H[oe]:Object.defineProperty(H,oe,{value:[]})[oe];for(;Ne.length<=_e;)Ne.push(null);return(Ne[_e]=Ne[_e]||[]).push(T),H}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=t,p.annotationCls=p,p})}class ut{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=xi({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vt=new ut("AnalyzeForEntryComponents");function gi(t,n){void 0===n&&(n=t);for(let o=0;o<t.length;o++){let u=t[o];Array.isArray(u)?(n===t&&(n=t.slice(0,o)),gi(u,n)):n!==t&&n.push(u)}return n}function hr(t,n){t.forEach(o=>Array.isArray(o)?hr(o,n):n(o))}function lr(t,n,o){n>=t.length?t.push(o):t.splice(n,0,o)}function Qi(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Lr(t,n){const o=[];for(let u=0;u<t;u++)o.push(n);return o}function Tr(t,n,o){let u=_r(t,n);return u>=0?t[1|u]=o:(u=~u,function _a(t,n,o,u){let p=t.length;if(p==n)t.push(o,u);else if(1===p)t.push(u,t[0]),t[0]=o;else{for(p--,t.push(t[p-1],t[p]);p>n;)t[p]=t[p-2],p--;t[n]=o,t[n+1]=u}}(t,u,n,o)),u}function yo(t,n){const o=_r(t,n);if(o>=0)return t[1|o]}function _r(t,n){return function vs(t,n,o){let u=0,p=t.length>>o;for(;p!==u;){const b=u+(p-u>>1),T=t[b<<o];if(n===T)return b<<o;T>n?p=b:u=b+1}return~(p<<o)}(t,n,1)}const oa={},Ml="__NG_DI_FLAG__",oc="ngTempTokenPath",cu=/\n/gm,uu="__source",du=Ke({provide:String,useValue:Ke});let Ia;function Vl(t){const n=Ia;return Ia=t,n}function Fh(t,n=qn.Default){if(void 0===Ia)throw new tt(203,"");return null===Ia?$(t,void 0,n):Ia.get(t,n&qn.Optional?null:void 0,n)}function Oo(t,n=qn.Default){return(function Zn(){return Xn}()||Fh)(Be(t),n)}const Mc=Oo;function Ul(t){const n=[];for(let o=0;o<t.length;o++){const u=Be(t[o]);if(Array.isArray(u)){if(0===u.length)throw new tt(900,"");let p,b=qn.Default;for(let T=0;T<u.length;T++){const k=u[T],H=$a(k);"number"==typeof H?-1===H?p=k.token:b|=H:p=k}n.push(Oo(p,b))}else n.push(Oo(u))}return n}function va(t,n){return t[Ml]=n,t.prototype[Ml]=n,t}function $a(t){return t[Ml]}const jl=va(ze("Inject",t=>({token:t})),-1),$s=va(ze("Optional"),8),Hl=va(ze("SkipSelf"),4);let fu,qa;function ol(t){var n;return(null===(n=function Gl(){if(void 0===fu&&(fu=null,Hn.trustedTypes))try{fu=Hn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return fu}())||void 0===n?void 0:n.createHTML(t))||t}function gu(t){var n;return(null===(n=function Ac(){if(void 0===qa&&(qa=null,Hn.trustedTypes))try{qa=Hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return qa}())||void 0===n?void 0:n.createHTML(t))||t}class Wa{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yu extends Wa{getTypeName(){return"HTML"}}class vu extends Wa{getTypeName(){return"Style"}}class Vh extends Wa{getTypeName(){return"Script"}}class qp extends Wa{getTypeName(){return"URL"}}class gd extends Wa{getTypeName(){return"ResourceURL"}}function ba(t){return t instanceof Wa?t.changingThisBreaksApplicationSecurity:t}function Al(t,n){const o=Il(t);if(null!=o&&o!==n){if("ResourceURL"===o&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===n}function Il(t){return t instanceof Wa&&t.getTypeName()||null}function sa(t){return new yu(t)}function Uh(t){return new vu(t)}function Wp(t){return new Vh(t)}function Yp(t){return new qp(t)}function Kp(t){return new gd(t)}class xu{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const o=(new window.DOMParser).parseFromString(ol(n),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(n):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class jh{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(n){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=ol(n),o;const u=this.inertDocument.createElement("body");return u.innerHTML=ol(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(n){const o=n.attributes;for(let p=o.length-1;0<p;p--){const T=o.item(p).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&n.removeAttribute(T)}let u=n.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const Ic=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lc(t){return(t=String(t)).match(Ic)||t.match(Hh)?t:"unsafe:"+t}function Ya(t){const n={};for(const o of t.split(","))n[o]=!0;return n}function Pc(...t){const n={};for(const o of t)for(const u in o)o.hasOwnProperty(u)&&(n[u]=!0);return n}const Gh=Ya("area,br,col,hr,img,wbr"),wu=Ya("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yd=Ya("rp,rt"),cc=Pc(Gh,Pc(wu,Ya("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pc(yd,Ya("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pc(yd,wu)),kc=Ya("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uc=Ya("srcset"),bd=Pc(kc,uc,Ya("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ya("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$h=Ya("script,style,template");class Rc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let o=n.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let p=this.checkClobberedElement(o,o.nextSibling);if(p){o=p;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(n){const o=n.nodeName.toLowerCase();if(!cc.hasOwnProperty(o))return this.sanitizedSomething=!0,!$h.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=n.attributes;for(let p=0;p<u.length;p++){const b=u.item(p),T=b.name,k=T.toLowerCase();if(!bd.hasOwnProperty(k)){this.sanitizedSomething=!0;continue}let H=b.value;kc[k]&&(H=lc(H)),uc[k]&&(t=H,H=(t=String(t)).split(",").map(n=>lc(n.trim())).join(", ")),this.buf.push(" ",T,'="',Cd(H),'"')}var t;return this.buf.push(">"),!0}endElement(n){const o=n.nodeName.toLowerCase();cc.hasOwnProperty(o)&&!Gh.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(n){this.buf.push(Cd(n))}checkClobberedElement(n,o){if(o&&(n.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return o}}const xd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wd=/([^\#-~ |!])/g;function Cd(t){return t.replace(/&/g,"&amp;").replace(xd,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(wd,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Eu;function Ed(t,n){let o=null;try{Eu=Eu||function bu(t){const n=new jh(t);return function Pl(){try{return!!(new window.DOMParser).parseFromString(ol(""),"text/html")}catch(t){return!1}}()?new xu(n):n}(t);let u=n?String(n):"";o=Eu.getInertBodyElement(u);let p=5,b=u;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,u=b,b=o.innerHTML,o=Eu.getInertBodyElement(u)}while(u!==b);return ol((new Rc).sanitizeChildren($l(o)||o))}finally{if(o){const u=$l(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function $l(t){return"content"in t&&function Jp(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var vo=(()=>((vo=vo||{})[vo.NONE=0]="NONE",vo[vo.HTML=1]="HTML",vo[vo.STYLE=2]="STYLE",vo[vo.SCRIPT=3]="SCRIPT",vo[vo.URL=4]="URL",vo[vo.RESOURCE_URL=5]="RESOURCE_URL",vo))();function Zh(t){const n=Ka();return n?gu(n.sanitize(vo.HTML,t)||""):Al(t,"HTML")?gu(ba(t)):Ed(Ps(),He(t))}function Fc(t){const n=Ka();return n?n.sanitize(vo.URL,t)||"":Al(t,"URL")?ba(t):lc(He(t))}function Ka(){const t=mn();return t&&t[12]}const Sd="__ngContext__";function bs(t,n){t[Sd]=n}function Td(t){const n=function Lc(t){return t[Sd]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function zc(t){return t.ngOriginalError}function df(t,...n){t.error(...n)}class dc{constructor(){this._console=console}handleError(n){const o=this._findOriginalError(n),u=function uf(t){return t&&t.ngErrorLogger||df}(n);u(this._console,"ERROR",n),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&zc(n);for(;o&&zc(o);)o=zc(o);return o||null}}const Xh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Hn))();function kd(t){return t.ownerDocument.defaultView}function Oa(t){return t instanceof Function?t():t}var ka=(()=>((ka=ka||{})[ka.Important=1]="Important",ka[ka.DashCase=2]="DashCase",ka))();function Ra(t,n){return undefined(t,n)}function jc(t){const n=t[3];return Zr(n)?n[3]:n}function Rd(t){return Ld(t[13])}function Fd(t){return Ld(t[4])}function Ld(t){for(;null!==t&&!Zr(t);)t=t[4];return t}function pc(t,n,o,u,p){if(null!=u){let b,T=!1;Zr(u)?b=u:Rr(u)&&(T=!0,u=u[0]);const k=Or(u);0===t&&null!==o?null==p?Ud(n,o,k):Yl(n,o,k,p||null,!0):1===t&&null!==o?Yl(n,o,k,p||null,!0):2===t?function qd(t,n,o){const u=gc(t,n);u&&function Hd(t,n,o,u){fr(t)?t.removeChild(n,o,u):n.removeChild(o)}(t,u,n,o)}(n,k,T):3===t&&n.destroyNode(k),null!=b&&function Wd(t,n,o,u,p){const b=o[7];b!==Or(o)&&pc(n,t,u,b,p);for(let k=10;k<o.length;k++){const H=o[k];_c(H[1],H,t,n,u,b)}}(n,t,b,o,p)}}function Au(t,n,o){return fr(t)?t.createElement(n,o):null===o?t.createElement(n):t.createElementNS(o,n)}function Gc(t,n){const o=t[9],u=o.indexOf(n),p=n[3];1024&n[2]&&(n[2]&=-1025,W(p,-1)),o.splice(u,1)}function ql(t,n){if(t.length<=10)return;const o=10+n,u=t[o];if(u){const p=u[17];null!==p&&p!==t&&Gc(p,u),n>0&&(t[o-1][4]=u[4]);const b=Qi(t,10+n);!function _f(t,n){_c(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(u[1],u);const T=b[19];null!==T&&T.detachView(b[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Wl(t,n){if(!(256&n[2])){const o=n[11];fr(o)&&o.destroyNode&&_c(t,n,o,3,null,null),function ip(t){let n=t[13];if(!n)return mc(t[1],t);for(;n;){let o=null;if(Rr(n))o=n[13];else{const u=n[10];u&&(o=u)}if(!o){for(;n&&!n[4]&&n!==t;)Rr(n)&&mc(n[1],n),n=n[3];null===n&&(n=t),Rr(n)&&mc(n[1],n),o=n&&n[4]}n=o}}(n)}}function mc(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function bf(t,n){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let u=0;u<o.length;u+=2){const p=n[o[u]];if(!(p instanceof pa)){const b=o[u+1];if(Array.isArray(b))for(let T=0;T<b.length;T+=2){const k=p[b[T]],H=b[T+1];try{H.call(k)}finally{}}else try{b.call(p)}finally{}}}}(t,n),function Iu(t,n){const o=t.cleanup,u=n[7];let p=-1;if(null!==o)for(let b=0;b<o.length-1;b+=2)if("string"==typeof o[b]){const T=o[b+1],k="function"==typeof T?T(n):Or(n[T]),H=u[p=o[b+2]],le=o[b+3];"boolean"==typeof le?k.removeEventListener(o[b],H,le):le>=0?u[p=le]():u[p=-le].unsubscribe(),b+=2}else{const T=u[p=o[b+1]];o[b].call(T)}if(null!==u){for(let b=p+1;b<u.length;b++)u[b]();n[7]=null}}(t,n),1===n[1].type&&fr(n[11])&&n[11].destroy();const o=n[17];if(null!==o&&Zr(n[3])){o!==n[3]&&Gc(o,n);const u=n[19];null!==u&&u.detachView(t)}}}function zd(t,n,o){return function Vd(t,n,o){let u=n;for(;null!==u&&40&u.type;)u=(n=u).parent;if(null===u)return o[0];if(2&u.flags){const p=t.data[u.directiveStart].encapsulation;if(p===nt.None||p===nt.Emulated)return null}return Ee(u,o)}(t,n.parent,o)}function Yl(t,n,o,u,p){fr(t)?t.insertBefore(n,o,u,p):n.insertBefore(o,u,p)}function Ud(t,n,o){fr(t)?t.appendChild(n,o):n.appendChild(o)}function jd(t,n,o,u,p){null!==u?Yl(t,n,o,u,p):Ud(t,n,o)}function gc(t,n){return fr(t)?t.parentNode(n):n.parentNode}function Gd(t,n,o){return Fa(t,n,o)}let Fa=function $d(t,n,o){return 40&t.type?Ee(t,o):null};function Zc(t,n,o,u){const p=zd(t,u,n),b=n[11],k=Gd(u.parent||n[6],u,n);if(null!=p)if(Array.isArray(o))for(let H=0;H<o.length;H++)jd(b,p,o[H],k,!1);else jd(b,p,o,k,!1)}function Pu(t,n){if(null!==n){const o=n.type;if(3&o)return Ee(n,t);if(4&o)return qc(-1,t[n.index]);if(8&o){const u=n.child;if(null!==u)return Pu(t,u);{const p=t[n.index];return Zr(p)?qc(-1,p):Or(p)}}if(32&o)return Ra(n,t)()||Or(t[n.index]);{const u=ll(t,n);return null!==u?Array.isArray(u)?u[0]:Pu(jc(t[16]),u):Pu(t,n.next)}}return null}function ll(t,n){return null!==n?t[16][6].projection[n.projection]:null}function qc(t,n){const o=10+t+1;if(o<n.length){const u=n[o],p=u[1].firstChild;if(null!==p)return Pu(u,p)}return n[7]}function Ou(t,n,o,u,p,b,T){for(;null!=o;){const k=u[o.index],H=o.type;if(T&&0===n&&(k&&bs(Or(k),u),o.flags|=4),64!=(64&o.flags))if(8&H)Ou(t,n,o.child,u,p,b,!1),pc(n,t,p,k,b);else if(32&H){const le=Ra(o,u);let _e;for(;_e=le();)pc(n,t,p,_e,b);pc(n,t,p,k,b)}else 16&H?op(t,n,u,o,p,b):pc(n,t,p,k,b);o=T?o.projectionNext:o.next}}function _c(t,n,o,u,p,b){Ou(o,u,t.firstChild,n,p,b,!1)}function op(t,n,o,u,p,b){const T=o[16],H=T[6].projection[u.projection];if(Array.isArray(H))for(let le=0;le<H.length;le++)pc(n,t,p,H[le],b);else Ou(t,n,H,T[3],p,b,!0)}function Yd(t,n,o){fr(t)?t.setAttribute(n,"style",o):n.style.cssText=o}function yc(t,n,o){fr(t)?""===o?t.removeAttribute(n,"class"):t.setAttribute(n,"class",o):n.className=o}function Kd(t,n,o){let u=t.length;for(;;){const p=t.indexOf(n,o);if(-1===p)return p;if(0===p||t.charCodeAt(p-1)<=32){const b=n.length;if(p+b===u||t.charCodeAt(p+b)<=32)return p}o=p+1}}const vc="ng-template";function ku(t,n,o){let u=0;for(;u<t.length;){let p=t[u++];if(o&&"class"===p){if(p=t[u],-1!==Kd(p.toLowerCase(),n,0))return!0}else if(1===p){for(;u<t.length&&"string"==typeof(p=t[u++]);)if(p.toLowerCase()===n)return!0;return!1}}return!1}function ap(t){return 4===t.type&&t.value!==vc}function Cf(t,n,o){return n===(4!==t.type||o?t.value:vc)}function Ef(t,n,o){let u=4;const p=t.attrs||[],b=function Fu(t){for(let n=0;n<t.length;n++)if(wl(t[n]))return n;return t.length}(p);let T=!1;for(let k=0;k<n.length;k++){const H=n[k];if("number"!=typeof H){if(!T)if(4&u){if(u=2|1&u,""!==H&&!Cf(t,H,o)||""===H&&1===n.length){if(xa(u))return!1;T=!0}}else{const le=8&u?H:n[++k];if(8&u&&null!==t.attrs){if(!ku(t.attrs,le,o)){if(xa(u))return!1;T=!0}continue}const Ne=bc(8&u?"class":H,p,ap(t),o);if(-1===Ne){if(xa(u))return!1;T=!0;continue}if(""!==le){let ht;ht=Ne>b?"":p[Ne+1].toLowerCase();const Ot=8&u?ht:null;if(Ot&&-1!==Kd(Ot,le,0)||2&u&&le!==ht){if(xa(u))return!1;T=!0}}}}else{if(!T&&!xa(u)&&!xa(H))return!1;if(T&&xa(H))continue;T=!1,u=H|1&u}}return xa(u)||T}function xa(t){return 0==(1&t)}function bc(t,n,o,u){if(null===n)return-1;let p=0;if(u||!o){let b=!1;for(;p<n.length;){const T=n[p];if(T===t)return p;if(3===T||6===T)b=!0;else{if(1===T||2===T){let k=n[++p];for(;"string"==typeof k;)k=n[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=b?1:2}return-1}return function Df(t,n){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const u=t[o];if("number"==typeof u)return-1;if(u===n)return o;o++}return-1}(n,t)}function Ru(t,n,o=!1){for(let u=0;u<n.length;u++)if(Ef(t,n[u],o))return!0;return!1}function kl(t,n){e:for(let o=0;o<n.length;o++){const u=n[o];if(t.length===u.length){for(let p=0;p<t.length;p++)if(t[p]!==u[p])continue e;return!0}}return!1}function Qd(t,n){return t?":not("+n.trim()+")":n}function cp(t){let n=t[0],o=1,u=2,p="",b=!1;for(;o<t.length;){let T=t[o];if("string"==typeof T)if(2&u){const k=t[++o];p+="["+T+(k.length>0?'="'+k+'"':"")+"]"}else 8&u?p+="."+T:4&u&&(p+=" "+T);else""!==p&&!xa(T)&&(n+=Qd(b,p),p=""),u=T,b=b||!xa(u);o++}return""!==p&&(n+=Qd(b,p)),n}const nr={};function Wc(t){Lu(ue(),mn(),Ai()+t,Tn())}function Lu(t,n,o,u){if(!u)if(3==(3&n[2])){const b=t.preOrderCheckHooks;null!==b&&Fn(n,b,o)}else{const b=t.preOrderHooks;null!==b&&Do(n,b,0,o)}Dr(o)}function xc(t,n){return t<<17|n<<2}function aa(t){return t>>17&32767}function Yc(t){return 2|t}function Ja(t){return(131068&t)>>2}function Ar(t,n){return-131069&t|n<<2}function Xd(t){return 1|t}function Gt(t,n){const o=t.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const p=o[u],b=o[u+1];if(-1!==b){const T=t.data[b];rs(p),T.contentQueries(2,n[b],b)}}}function pn(t,n,o,u,p,b,T,k,H,le){const _e=n.blueprint.slice();return _e[0]=p,_e[2]=140|u,Q(_e),_e[3]=_e[15]=t,_e[8]=o,_e[10]=T||t&&t[10],_e[11]=k||t&&t[11],_e[12]=H||t&&t[12]||null,_e[9]=le||t&&t[9]||null,_e[6]=b,_e[16]=2==n.type?t[16]:_e,_e}function on(t,n,o,u,p){let b=t.data[n];if(null===b)b=function Yn(t,n,o,u,p){const b=j(),T=Ge(),H=t.data[n]=function To(t,n,o,u,p,b){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?b:b&&b.parent,o,n,u,p);return null===t.firstChild&&(t.firstChild=H),null!==b&&(T?null==b.child&&null!==H.parent&&(b.child=H):null===b.next&&(b.next=H)),H}(t,n,o,u,p),function ur(){return B.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=o,b.value=u,b.attrs=p;const T=function de(){const t=B.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();b.injectorIndex=null===T?-1:T.injectorIndex}return Se(b,!0),b}function ui(t,n,o,u){if(0===o)return-1;const p=n.length;for(let b=0;b<o;b++)n.push(u),t.blueprint.push(u),t.data.push(null);return p}function Gn(t,n,o){_o(n);try{const u=t.viewQuery;null!==u&&Ds(1,u,o);const p=t.template;null!==p&&Kn(t,n,p,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gt(t,n),t.staticViewQueries&&Ds(2,t.viewQuery,o);const b=t.components;null!==b&&function en(t,n){for(let o=0;o<n.length;o++)mp(t,n[o])}(n,b)}catch(u){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),u}finally{n[2]&=-5,ii()}}function Un(t,n,o,u){const p=n[2];if(256==(256&p))return;_o(n);const b=Tn();try{Q(n),function mi(t){return B.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&Kn(t,n,o,2,u);const T=3==(3&p);if(!b)if(T){const le=t.preOrderCheckHooks;null!==le&&Fn(n,le,null)}else{const le=t.preOrderHooks;null!==le&&Do(n,le,0,null),ys(n,0)}if(function zu(t){for(let n=Rd(t);null!==n;n=Fd(n)){if(!n[2])continue;const o=n[9];for(let u=0;u<o.length;u++){const p=o[u],b=p[3];0==(1024&p[2])&&W(b,1),p[2]|=1024}}}(n),function sh(t){for(let n=Rd(t);null!==n;n=Fd(n))for(let o=10;o<n.length;o++){const u=n[o],p=u[1];ai(u)&&Un(p,u,p.template,u[8])}}(n),null!==t.contentQueries&&Gt(t,n),!b)if(T){const le=t.contentCheckHooks;null!==le&&Fn(n,le)}else{const le=t.contentHooks;null!==le&&Do(n,le,1),ys(n,1)}!function yt(t,n){const o=t.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const p=o[u];if(p<0)Dr(~p);else{const b=p,T=o[++u],k=o[++u];Wr(T,b),k(2,n[b])}}}finally{Dr(-1)}}(t,n);const k=t.components;null!==k&&function zt(t,n){for(let o=0;o<n.length;o++)ah(t,n[o])}(n,k);const H=t.viewQuery;if(null!==H&&Ds(2,H,u),!b)if(T){const le=t.viewCheckHooks;null!==le&&Fn(n,le)}else{const le=t.viewHooks;null!==le&&Do(n,le,2),ys(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),b||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,W(n[3],-1))}finally{ii()}}function Nn(t,n,o,u){const p=n[10],b=!Tn(),T=Di(n);try{b&&!T&&p.begin&&p.begin(),T&&Gn(t,n,u),Un(t,n,o,u)}finally{b&&!T&&p.end&&p.end()}}function Kn(t,n,o,u,p){const b=Ai(),T=2&u;try{Dr(-1),T&&n.length>20&&Lu(t,n,20,Tn()),o(u,p)}finally{Dr(b)}}function $n(t,n,o){if(cs(n)){const p=n.directiveEnd;for(let b=n.directiveStart;b<p;b++){const T=t.data[b];T.contentQueries&&T.contentQueries(1,o[b],b)}}}function Dn(t,n,o){!jr()||(function Fo(t,n,o,u){const p=o.directiveStart,b=o.directiveEnd;t.firstCreatePass||X(o,n),bs(u,n);const T=o.initialInputs;for(let k=p;k<b;k++){const H=t.data[k],le=xr(H);le&&ul(n,o,H);const _e=f(n,t,k,o);bs(_e,n),null!==T&&rh(0,k-p,_e,H,0,T),le&&(Mn(o.index,n)[8]=_e)}}(t,n,o,Ee(o,n)),128==(128&o.flags)&&function Es(t,n,o){const u=o.directiveStart,p=o.directiveEnd,T=o.index,k=function io(){return B.lFrame.currentDirectiveIndex}();try{Dr(T);for(let H=u;H<p;H++){const le=t.data[H],_e=n[H];gs(H),(null!==le.hostBindings||0!==le.hostVars||null!==le.hostAttrs)&&la(le,_e)}}finally{Dr(-1),gs(k)}}(t,n,o))}function Mi(t,n,o=Ee){const u=n.localNames;if(null!==u){let p=n.index+1;for(let b=0;b<u.length;b+=2){const T=u[b+1],k=-1===T?o(n,t):t[T];t[p++]=k}}}function wi(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Yi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Yi(t,n,o,u,p,b,T,k,H,le){const _e=20+u,Ne=_e+p,ht=function vr(t,n){const o=[];for(let u=0;u<n;u++)o.push(u<t?null:nr);return o}(_e,Ne),Ot="function"==typeof le?le():le;return ht[1]={type:t,blueprint:ht,template:o,queries:null,viewQuery:k,declTNode:n,data:ht.slice().fill(null,_e),bindingStartIndex:_e,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:H,consts:Ot,incompleteFirstPass:!1}}function po(t,n,o,u){const p=Cc(n);null===o?p.push(u):(p.push(o),t.firstCreatePass&&dh(t).push(u,p.length-1))}function Gr(t,n,o){for(let u in t)if(t.hasOwnProperty(u)){const p=t[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(n,p):o[u]=[n,p]}return o}function $r(t,n,o,u,p,b,T,k){const H=Ee(n,o);let _e,le=n.inputs;!k&&null!=le&&(_e=le[u])?(Zm(t,o,_e,u,p),zs(n)&&function Ro(t,n){const o=Mn(n,t);16&o[2]||(o[2]|=64)}(o,n.index)):3&n.type&&(u=function ls(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(u),p=null!=T?T(p,n.value||"",u):p,fr(b)?b.setProperty(H,u,p):fa(u)||(H.setProperty?H.setProperty(u,p):H[u]=p))}function Ao(t,n,o,u){let p=!1;if(jr()){const b=function ca(t,n,o){const u=t.directiveRegistry;let p=null;if(u)for(let b=0;b<u.length;b++){const T=u[b];Ru(o,T.selectors,!1)&&(p||(p=[]),Re(X(o,n),t,T.type),xr(T)?(ua(t,o),p.unshift(T)):p.push(T))}return p}(t,n,o),T=null===u?null:{"":-1};if(null!==b){p=!0,Ks(o,t.data.length,b.length);for(let _e=0;_e<b.length;_e++){const Ne=b[_e];Ne.providersResolver&&Ne.providersResolver(Ne)}let k=!1,H=!1,le=ui(t,n,b.length,null);for(let _e=0;_e<b.length;_e++){const Ne=b[_e];o.mergedAttrs=Mo(o.mergedAttrs,Ne.hostAttrs),ks(t,o,n,le,Ne),wa(le,Ne,T),null!==Ne.contentQueries&&(o.flags|=8),(null!==Ne.hostBindings||null!==Ne.hostAttrs||0!==Ne.hostVars)&&(o.flags|=128);const ht=Ne.type.prototype;!k&&(ht.ngOnChanges||ht.ngOnInit||ht.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(o.index),k=!0),!H&&(ht.ngOnChanges||ht.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(o.index),H=!0),le++}!function as(t,n){const u=n.directiveEnd,p=t.data,b=n.attrs,T=[];let k=null,H=null;for(let le=n.directiveStart;le<u;le++){const _e=p[le],Ne=_e.inputs,ht=null===b||ap(n)?null:Bu(Ne,b);T.push(ht),k=Gr(Ne,le,k),H=Gr(_e.outputs,le,H)}null!==k&&(k.hasOwnProperty("class")&&(n.flags|=16),k.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=T,n.inputs=k,n.outputs=H}(t,o)}T&&function cl(t,n,o){if(n){const u=t.localNames=[];for(let p=0;p<n.length;p+=2){const b=o[n[p+1]];if(null==b)throw new tt(-301,`Export of name '${n[p+1]}' not found!`);u.push(n[p],b)}}}(o,u,T)}return o.mergedAttrs=Mo(o.mergedAttrs,o.attrs),p}function or(t,n,o,u,p,b){const T=b.hostBindings;if(T){let k=t.hostBindingOpCodes;null===k&&(k=t.hostBindingOpCodes=[]);const H=~n.index;(function Ys(t){let n=t.length;for(;n>0;){const o=t[--n];if("number"==typeof o&&o<0)return o}return 0})(k)!=H&&k.push(H),k.push(u,p,T)}}function la(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function ua(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function wa(t,n,o){if(o){if(n.exportAs)for(let u=0;u<n.exportAs.length;u++)o[n.exportAs[u]]=t;xr(n)&&(o[""]=t)}}function Ks(t,n,o){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+o,t.providerIndexes=n}function ks(t,n,o,u,p){t.data[u]=p;const b=p.factory||(p.factory=Io(p.type)),T=new pa(b,xr(p),null);t.blueprint[u]=T,o[u]=T,or(t,n,0,u,ui(t,o,p.hostVars,nr),p)}function ul(t,n,o){const u=Ee(n,t),p=wi(o),b=t[10],T=Vu(t,pn(t,p,null,o.onPush?64:16,u,n,b,b.createRenderer(u,o),null,null));t[n.index]=T}function Js(t,n,o,u,p,b){const T=Ee(t,n);!function Qc(t,n,o,u,p,b,T){if(null==b)fr(t)?t.removeAttribute(n,p,o):n.removeAttribute(p);else{const k=null==T?He(b):T(b,u||"",p);fr(t)?t.setAttribute(n,p,k,o):o?n.setAttributeNS(o,p,k):n.setAttribute(p,k)}}(n[11],T,b,t.value,o,u,p)}function rh(t,n,o,u,p,b){const T=b[n];if(null!==T){const k=u.setInput;for(let H=0;H<T.length;){const le=T[H++],_e=T[H++],Ne=T[H++];null!==k?u.setInput(o,Ne,le,_e):o[_e]=Ne}}}function Bu(t,n){let o=null,u=0;for(;u<n.length;){const p=n[u];if(0!==p)if(5!==p){if("number"==typeof p)break;t.hasOwnProperty(p)&&(null===o&&(o=[]),o.push(p,t[p],n[u+1])),u+=2}else u+=2;else u+=4}return o}function oh(t,n,o,u){return new Array(t,!0,!1,n,null,0,u,o,null,null)}function ah(t,n){const o=Mn(n,t);if(ai(o)){const u=o[1];80&o[2]?Un(u,o,u.template,o[8]):o[5]>0&&lh(o)}}function lh(t){for(let u=Rd(t);null!==u;u=Fd(u))for(let p=10;p<u.length;p++){const b=u[p];if(1024&b[2]){const T=b[1];Un(T,b,T.template,b[8])}else b[5]>0&&lh(b)}const o=t[1].components;if(null!==o)for(let u=0;u<o.length;u++){const p=Mn(o[u],t);ai(p)&&p[5]>0&&lh(p)}}function mp(t,n){const o=Mn(n,t),u=o[1];(function Of(t,n){for(let o=n.length;o<t.blueprint.length;o++)n.push(t.blueprint[o])})(u,o),Gn(u,o,o[8])}function Vu(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function ch(t){for(;t;){t[2]|=64;const n=jc(t);if(us(t)&&!n)return t;t=n}return null}function Uu(t,n,o){const u=n[10];u.begin&&u.begin();try{Un(t,n,t.template,o)}catch(p){throw $m(n,p),p}finally{u.end&&u.end()}}function Ca(t){!function uh(t){for(let n=0;n<t.components.length;n++){const o=t.components[n],u=Td(o),p=u[1];Nn(p,u,p.template,o)}}(t[8])}function Ds(t,n,o){rs(0),n(t,o)}const Xc=(()=>Promise.resolve(null))();function Cc(t){return t[7]||(t[7]=[])}function dh(t){return t.cleanup||(t.cleanup=[])}function Ki(t,n,o){return(null===t||xr(t))&&(o=function te(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(o[n.index])),o[11]}function $m(t,n){const o=t[9],u=o?o.get(dc,null):null;u&&u.handleError(n)}function Zm(t,n,o,u,p){for(let b=0;b<o.length;){const T=o[b++],k=o[b++],H=n[T],le=t.data[T];null!==le.setInput?le.setInput(H,p,u,k):H[k]=p}}function Rl(t,n,o){const u=ne(n,t);!function Hc(t,n,o){fr(t)?t.setValue(n,o):n.textContent=o}(t[11],u,o)}function hh(t,n,o){let u=o?t.styles:null,p=o?t.classes:null,b=0;if(null!==n)for(let T=0;T<n.length;T++){const k=n[T];"number"==typeof k?b=k:1==b?p=he(p,k):2==b&&(u=he(u,k+": "+n[++T]+";"))}o?t.styles=u:t.stylesWithoutHost=u,o?t.classes=p:t.classesWithoutHost=p}const Rf=new ut("INJECTOR",-1);class Wm{get(n,o=oa){if(o===oa){const u=new Error(`NullInjectorError: No provider for ${Le(n)}!`);throw u.name="NullInjectorError",u}return o}}const Ff=new ut("Set Injector scope."),ph={},sy={};let Lf;function Ym(){return void 0===Lf&&(Lf=new Wm),Lf}function Km(t,n=null,o=null,u){const p=Jm(t,n,o,u);return p._resolveInjectorDefTypes(),p}function Jm(t,n=null,o=null,u){return new ay(t,o,n||Ym(),u)}class ay{constructor(n,o,u,p=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const b=[];o&&hr(o,k=>this.processProvider(k,n,o)),hr([n],k=>this.processInjectorType(k,[],b)),this.records.set(Rf,Hu(void 0,this));const T=this.records.get(Ff);this.scope=null!=T?T.value:null,this.source=p||("object"==typeof n?null:Le(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,o=oa,u=qn.Default){this.assertNotDestroyed();const p=Vl(this),b=St(void 0);try{if(!(u&qn.SkipSelf)){let k=this.records.get(n);if(void 0===k){const H=function my(t){return"function"==typeof t||"object"==typeof t&&t instanceof ut}(n)&&ft(n);k=H&&this.injectableDefInScope(H)?Hu(Nf(n),ph):null,this.records.set(n,k)}if(null!=k)return this.hydrate(n,k)}return(u&qn.Self?Ym():this.parent).get(n,o=u&qn.Optional&&o===oa?null:o)}catch(T){if("NullInjectorError"===T.name){if((T[oc]=T[oc]||[]).unshift(Le(n)),p)throw T;return function Pa(t,n,o,u){const p=t[oc];throw n[uu]&&p.unshift(n[uu]),t.message=function rl(t,n,o,u=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let p=Le(n);if(Array.isArray(n))p=n.map(Le).join(" -> ");else if("object"==typeof n){let b=[];for(let T in n)if(n.hasOwnProperty(T)){let k=n[T];b.push(T+":"+("string"==typeof k?JSON.stringify(k):Le(k)))}p=`{${b.join(", ")}}`}return`${o}${u?"("+u+")":""}[${p}]: ${t.replace(cu,"\n  ")}`}("\n"+t.message,p,o,u),t.ngTokenPath=p,t[oc]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{St(b),Vl(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((u,p)=>n.push(Le(p))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new tt(205,"")}processInjectorType(n,o,u){if(!(n=Be(n)))return!1;let p=Bn(n);const b=null==p&&n.ngModule||void 0,T=void 0===b?n:b,k=-1!==u.indexOf(T);if(void 0!==b&&(p=Bn(b)),null==p)return!1;if(null!=p.imports&&!k){let _e;u.push(T);try{hr(p.imports,Ne=>{this.processInjectorType(Ne,o,u)&&(void 0===_e&&(_e=[]),_e.push(Ne))})}finally{}if(void 0!==_e)for(let Ne=0;Ne<_e.length;Ne++){const{ngModule:ht,providers:Ot}=_e[Ne];hr(Ot,dn=>this.processProvider(dn,ht,Ot||Zt))}}this.injectorDefTypes.add(T);const H=Io(T)||(()=>new T);this.records.set(T,Hu(H,ph));const le=p.providers;if(null!=le&&!k){const _e=n;hr(le,Ne=>this.processProvider(Ne,_e,le))}return void 0!==b&&void 0!==n.providers}processProvider(n,o,u){let p=Gu(n=Be(n))?n:Be(n&&n.provide);const b=function cy(t,n,o){return yp(t)?Hu(void 0,t.useValue):Hu(_p(t),ph)}(n);if(Gu(n)||!0!==n.multi)this.records.get(p);else{let T=this.records.get(p);T||(T=Hu(void 0,ph,!0),T.factory=()=>Ul(T.multi),this.records.set(p,T)),p=n,T.multi.push(n)}this.records.set(p,b)}hydrate(n,o){return o.value===ph&&(o.value=sy,o.value=o.factory()),"object"==typeof o.value&&o.value&&function fy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(n){if(!n.providedIn)return!1;const o=Be(n.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Nf(t){const n=ft(t),o=null!==n?n.factory:Io(t);if(null!==o)return o;if(t instanceof ut)throw new tt(204,"");if(t instanceof Function)return function ly(t){const n=t.length;if(n>0)throw Lr(n,"?"),new tt(204,"");const o=function ln(t){const n=t&&(t[Jn]||t[Xi]);if(n){const o=function gn(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),n}return null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new tt(204,"")}function _p(t,n,o){let u;if(Gu(t)){const p=Be(t);return Io(p)||Nf(p)}if(yp(t))u=()=>Be(t.useValue);else if(function dy(t){return!(!t||!t.useFactory)}(t))u=()=>t.useFactory(...Ul(t.deps||[]));else if(function uy(t){return!(!t||!t.useExisting)}(t))u=()=>Oo(Be(t.useExisting));else{const p=Be(t&&(t.useClass||t.provide));if(!function py(t){return!!t.deps}(t))return Io(p)||Nf(p);u=()=>new p(...Ul(t.deps))}return u}function Hu(t,n,o=!1){return{factory:t,value:n,multi:o?[]:void 0}}function yp(t){return null!==t&&"object"==typeof t&&du in t}function Gu(t){return"function"==typeof t}let Xa=(()=>{class t{static create(o,u){var p;if(Array.isArray(o))return Km({name:""},u,o,"");{const b=null!==(p=o.name)&&void 0!==p?p:"";return Km({name:b},o.parent,o.providers,b)}}}return t.THROW_IF_NOT_FOUND=oa,t.NULL=new Wm,t.\u0275prov=xi({token:t,providedIn:"any",factory:()=>Oo(Rf)}),t.__NG_ELEMENT_ID__=-1,t})();function Ey(t,n){Yr(Td(t)[1],S())}function Uf(t){let n=function Vf(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const u=[t];for(;n;){let p;if(xr(t))p=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new tt(903,"");p=n.\u0275dir}if(p){if(o){u.push(p);const T=t;T.inputs=jf(t.inputs),T.declaredInputs=jf(t.declaredInputs),T.outputs=jf(t.outputs);const k=p.hostBindings;k&&My(t,k);const H=p.viewQuery,le=p.contentQueries;if(H&&lg(t,H),le&&cg(t,le),Oe(t.inputs,p.inputs),Oe(t.declaredInputs,p.declaredInputs),Oe(t.outputs,p.outputs),xr(p)&&p.data.animation){const _e=t.data;_e.animation=(_e.animation||[]).concat(p.data.animation)}}const b=p.features;if(b)for(let T=0;T<b.length;T++){const k=b[T];k&&k.ngInherit&&k(t),k===Uf&&(o=!1)}}n=Object.getPrototypeOf(n)}!function Dy(t){let n=0,o=null;for(let u=t.length-1;u>=0;u--){const p=t[u];p.hostVars=n+=p.hostVars,p.hostAttrs=Mo(p.hostAttrs,o=Mo(o,p.hostAttrs))}}(u)}function jf(t){return t===hn?{}:t===Zt?[]:t}function lg(t,n){const o=t.viewQuery;t.viewQuery=o?(u,p)=>{n(u,p),o(u,p)}:n}function cg(t,n){const o=t.contentQueries;t.contentQueries=o?(u,p,b)=>{n(u,p,b),o(u,p,b)}:n}function My(t,n){const o=t.hostBindings;t.hostBindings=o?(u,p)=>{n(u,p),o(u,p)}:n}let vp=null;function $u(){if(!vp){const t=Hn.Symbol;if(t&&t.iterator)vp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<n.length;++o){const u=n[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(vp=u)}}}return vp}function fh(t){return!!Hf(t)&&(Array.isArray(t)||!(t instanceof Map)&&$u()in t)}function Hf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fl(t,n,o){return t[n]=o}function Qs(t,n,o){return!Object.is(t[n],o)&&(t[n]=o,!0)}function tu(t,n,o,u){const p=Qs(t,n,o);return Qs(t,n+1,u)||p}function Gf(t,n,o,u){const p=mn();return Qs(p,Si(),n)&&(ue(),Js(ar(),p,t,n,o,u)),Gf}function qu(t,n,o,u){return Qs(t,Si(),o)?n+He(o)+u:nr}function Ly(t,n,o,u,p,b,T,k){const H=mn(),le=ue(),_e=t+20,Ne=le.firstCreatePass?function vb(t,n,o,u,p,b,T,k,H){const le=n.consts,_e=on(n,t,4,T||null,ci(le,k));Ao(n,o,_e,ci(le,H)),Yr(n,_e);const Ne=_e.tViews=Yi(2,_e,u,p,b,n.directiveRegistry,n.pipeRegistry,null,n.schemas,le);return null!==n.queries&&(n.queries.template(n,_e),Ne.queries=n.queries.embeddedTView(_e)),_e}(_e,le,H,n,o,u,p,b,T):le.data[_e];Se(Ne,!1);const ht=H[11].createComment("");Zc(le,H,ht,Ne),bs(ht,H),Vu(H,H[_e]=oh(ht,H,ht,Ne)),to(Ne)&&Dn(le,H,Ne),null!=T&&Mi(H,Ne,k)}function Ny(t){return un(function rn(){return B.lFrame.contextLView}(),20+t)}function gh(t,n=qn.Default){const o=mn();return null===o?Oo(t,n):vi(S(),o,Be(t),n)}function Eg(){throw new Error("invalid")}function Wf(t,n,o){const u=mn();return Qs(u,Si(),n)&&$r(ue(),ar(),u,t,n,u[11],o,!1),Wf}function Yf(t,n,o,u,p){const T=p?"class":"style";Zm(t,o,n.inputs[T],T,u)}function Kf(t,n,o,u){const p=mn(),b=ue(),T=20+t,k=p[11],H=p[T]=Au(k,n,function na(){return B.lFrame.currentNamespace}()),le=b.firstCreatePass?function nv(t,n,o,u,p,b,T){const k=n.consts,le=on(n,t,2,p,ci(k,b));return Ao(n,o,le,ci(k,T)),null!==le.attrs&&hh(le,le.attrs,!1),null!==le.mergedAttrs&&hh(le,le.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,le),le}(T,b,p,0,n,o,u):b.data[T];Se(le,!0);const _e=le.mergedAttrs;null!==_e&&ja(k,H,_e);const Ne=le.classes;null!==Ne&&yc(k,H,Ne);const ht=le.styles;null!==ht&&Yd(k,H,ht),64!=(64&le.flags)&&Zc(b,p,H,le),0===function $t(){return B.lFrame.elementDepthCount}()&&bs(H,p),function fi(){B.lFrame.elementDepthCount++}(),to(le)&&(Dn(b,p,le),$n(b,le,p)),null!==u&&Mi(p,le)}function Jf(){let t=S();Ge()?ot():(t=t.parent,Se(t,!1));const n=t;!function gr(){B.lFrame.elementDepthCount--}();const o=ue();o.firstCreatePass&&(Yr(o,t),cs(t)&&o.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Bl(t){return 0!=(16&t.flags)}(n)&&Yf(o,n,mn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Dc(t){return 0!=(32&t.flags)}(n)&&Yf(o,n,mn(),n.stylesWithoutHost,!1)}function Dg(t,n,o,u){Kf(t,n,o,u),Jf()}function Qf(t,n,o){const u=mn(),p=ue(),b=t+20,T=p.firstCreatePass?function iv(t,n,o,u,p){const b=n.consts,T=ci(b,u),k=on(n,t,8,"ng-container",T);return null!==T&&hh(k,T,!0),Ao(n,o,k,ci(b,p)),null!==n.queries&&n.queries.elementStart(n,k),k}(b,p,u,n,o):p.data[b];Se(T,!0);const k=u[b]=u[11].createComment("");Zc(p,u,k,T),bs(k,u),to(T)&&(Dn(p,u,T),$n(p,T,u)),null!=o&&Mi(u,T)}function Xf(){let t=S();const n=ue();Ge()?ot():(t=t.parent,Se(t,!1)),n.firstCreatePass&&(Yr(n,t),cs(t)&&n.queries.elementEnd(t))}function Mg(t,n,o){Qf(t,n,o),Xf()}function Sg(){return mn()}function em(t){return!!t&&"function"==typeof t.then}function Tg(t){return!!t&&"function"==typeof t.subscribe}const Ag=Tg;function tm(t,n,o,u){const p=mn(),b=ue(),T=S();return Ig(b,p,p[11],T,t,n,!!o,u),tm}function nm(t,n){const o=S(),u=mn(),p=ue();return Ig(p,u,Ki(Po(p.data),o,u),o,t,n,!1),nm}function Ig(t,n,o,u,p,b,T,k){const H=to(u),_e=t.firstCreatePass&&dh(t),Ne=n[8],ht=Cc(n);let Ot=!0;if(3&u.type||k){const ti=Ee(u,n),Ti=k?k(ti):ti,vn=ht.length,Vi=k?Er=>k(Or(Er[u.index])):u.index;if(fr(o)){let Er=null;if(!k&&H&&(Er=function rv(t,n,o,u){const p=t.cleanup;if(null!=p)for(let b=0;b<p.length-1;b+=2){const T=p[b];if(T===o&&p[b+1]===u){const k=n[7],H=p[b+2];return k.length>H?k[H]:null}"string"==typeof T&&(b+=2)}return null}(t,n,p,u.index)),null!==Er)(Er.__ngLastListenerFn__||Er).__ngNextListenerFn__=b,Er.__ngLastListenerFn__=b,Ot=!1;else{b=im(u,n,Ne,b,!1);const eo=o.listen(Ti,p,b);ht.push(b,eo),_e&&_e.push(p,Vi,vn,vn+1)}}else b=im(u,n,Ne,b,!0),Ti.addEventListener(p,b,T),ht.push(b),_e&&_e.push(p,Vi,vn,T)}else b=im(u,n,Ne,b,!1);const dn=u.outputs;let jn;if(Ot&&null!==dn&&(jn=dn[p])){const ti=jn.length;if(ti)for(let Ti=0;Ti<ti;Ti+=2){const xl=n[jn[Ti]][jn[Ti+1]].subscribe(b),kh=ht.length;ht.push(b,xl),_e&&_e.push(p,u.index,kh,-(kh+1))}}}function Pg(t,n,o,u){try{return!1!==o(u)}catch(p){return $m(t,p),!1}}function im(t,n,o,u,p){return function b(T){if(T===Function)return u;const k=2&t.flags?Mn(t.index,n):n;0==(32&n[2])&&ch(k);let H=Pg(n,0,u,T),le=b.__ngNextListenerFn__;for(;le;)H=Pg(n,0,le,T)&&H,le=le.__ngNextListenerFn__;return p&&!1===H&&(T.preventDefault(),T.returnValue=!1),H}}function Og(t=1){return function si(t){return(B.lFrame.contextLView=function Ri(t,n){for(;t>0;)n=n[15],t--;return n}(t,B.lFrame.contextLView))[8]}(t)}function ov(t,n){let o=null;const u=function lp(t){const n=t.attrs;if(null!=n){const o=n.indexOf(5);if(0==(1&o))return n[o+1]}return null}(t);for(let p=0;p<n.length;p++){const b=n[p];if("*"!==b){if(null===u?Ru(t,b,!0):kl(u,b))return p}else o=p}return o}function kg(t){const n=mn()[16][6];if(!n.projection){const u=n.projection=Lr(t?t.length:1,null),p=u.slice();let b=n.child;for(;null!==b;){const T=t?ov(b,t):0;null!==T&&(p[T]?p[T].projectionNext=b:u[T]=b,p[T]=b),b=b.next}}}function Rg(t,n=0,o){const u=mn(),p=ue(),b=on(p,20+t,16,null,o||null);null===b.projection&&(b.projection=n),ot(),64!=(64&b.flags)&&function wf(t,n,o){op(n[11],0,n,o,zd(t,o,n),Gd(o.parent||n[6],o,n))}(p,u,b)}function $g(t,n,o,u,p){const b=t[o+1],T=null===n;let k=u?aa(b):Ja(b),H=!1;for(;0!==k&&(!1===H||T);){const _e=t[k+1];av(t[k],n)&&(H=!0,t[k+1]=u?Xd(_e):Yc(_e)),k=u?aa(_e):Ja(_e)}H&&(t[o+1]=u?Yc(b):Xd(b))}function av(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&_r(t,n)>=0}const Ms={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zg(t){return t.substring(Ms.key,Ms.keyEnd)}function lv(t){return t.substring(Ms.value,Ms.valueEnd)}function qg(t,n){const o=Ms.textEnd;return o===n?-1:(n=Ms.keyEnd=function uv(t,n,o){for(;n<o&&t.charCodeAt(n)>32;)n++;return n}(t,Ms.key=n,o),nd(t,n,o))}function wp(t,n){const o=Ms.textEnd;let u=Ms.key=nd(t,n,o);return o===u?-1:(u=Ms.keyEnd=function dv(t,n,o){let u;for(;n<o&&(45===(u=t.charCodeAt(n))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)n++;return n}(t,u,o),u=hv(t,u,o),u=Ms.value=nd(t,u,o),u=Ms.valueEnd=function Kg(t,n,o){let u=-1,p=-1,b=-1,T=n,k=T;for(;T<o;){const H=t.charCodeAt(T++);if(59===H)return k;34===H||39===H?k=T=nu(t,H,T,o):n===T-4&&85===b&&82===p&&76===u&&40===H?k=T=nu(t,41,T,o):H>32&&(k=T),b=p,p=u,u=-33&H}return k}(t,u,o),hv(t,u,o))}function Yg(t){Ms.key=0,Ms.keyEnd=0,Ms.value=0,Ms.valueEnd=0,Ms.textEnd=t.length}function nd(t,n,o){for(;n<o&&t.charCodeAt(n)<=32;)n++;return n}function hv(t,n,o,u){return(n=nd(t,n,o))<o&&n++,n}function nu(t,n,o,u){let p=-1,b=o;for(;b<u;){const T=t.charCodeAt(b++);if(T==n&&92!==p)return b;p=92==T&&92===p?0:T}throw new Error}function om(t,n,o){return ml(t,n,o,!1),om}function sm(t,n){return ml(t,n,null,!0),sm}function fl(t){gl(t_,Jg,t,!1)}function Jg(t,n){for(let o=function Wg(t){return Yg(t),wp(t,nd(t,0,Ms.textEnd))}(n);o>=0;o=wp(n,o))t_(t,Zg(n),lv(n))}function Qg(t){gl(Tr,Ll,t,!0)}function Ll(t,n){for(let o=function cv(t){return Yg(t),qg(t,nd(t,0,Ms.textEnd))}(n);o>=0;o=qg(n,o))Tr(t,Zg(n),!0)}function ml(t,n,o,u){const p=mn(),b=ue(),T=Ni(2);b.firstUpdatePass&&am(b,t,T,u),n!==nr&&Qs(p,T,n)&&n_(b,b.data[Ai()],p,p[11],t,p[T+1]=function _v(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Le(ba(t)))),t}(n,o),u,T)}function gl(t,n,o,u){const p=ue(),b=Ni(2);p.firstUpdatePass&&am(p,null,b,u);const T=mn();if(o!==nr&&Qs(T,b,o)){const k=p.data[Ai()];if(r_(k,u)&&!pv(p,b)){let H=u?k.classesWithoutHost:k.stylesWithoutHost;null!==H&&(o=he(H,o||"")),Yf(p,k,T,o,u)}else!function gv(t,n,o,u,p,b,T,k){p===nr&&(p=Zt);let H=0,le=0,_e=0<p.length?p[0]:null,Ne=0<b.length?b[0]:null;for(;null!==_e||null!==Ne;){const ht=H<p.length?p[H+1]:void 0,Ot=le<b.length?b[le+1]:void 0;let jn,dn=null;_e===Ne?(H+=2,le+=2,ht!==Ot&&(dn=Ne,jn=Ot)):null===Ne||null!==_e&&_e<Ne?(H+=2,dn=_e):(le+=2,dn=Ne,jn=Ot),null!==dn&&n_(t,n,o,u,dn,jn,T,k),_e=H<p.length?p[H]:null,Ne=le<b.length?b[le]:null}}(p,k,T,T[11],T[b+1],T[b+1]=function mv(t,n,o){if(null==o||""===o)return Zt;const u=[],p=ba(o);if(Array.isArray(p))for(let b=0;b<p.length;b++)t(u,p[b],!0);else if("object"==typeof p)for(const b in p)p.hasOwnProperty(b)&&t(u,b,p[b]);else"string"==typeof p&&n(u,p);return u}(t,n,o),u,b)}}function pv(t,n){return n>=t.expandoStartIndex}function am(t,n,o,u){const p=t.data;if(null===p[o+1]){const b=p[Ai()],T=pv(t,o);r_(b,u)&&null===n&&!T&&(n=!1),n=function Xg(t,n,o,u){const p=Po(t);let b=u?n.residualClasses:n.residualStyles;if(null===p)0===(u?n.classBindings:n.styleBindings)&&(o=_h(o=lm(null,t,n,o,u),n.attrs,u),b=null);else{const T=n.directiveStylingLast;if(-1===T||t[T]!==p)if(o=lm(p,t,n,o,u),null===b){let H=function fv(t,n,o){const u=o?n.classBindings:n.styleBindings;if(0!==Ja(u))return t[aa(u)]}(t,n,u);void 0!==H&&Array.isArray(H)&&(H=lm(null,t,n,H[1],u),H=_h(H,n.attrs,u),function Fb(t,n,o,u){t[aa(o?n.classBindings:n.styleBindings)]=u}(t,n,u,H))}else b=function e_(t,n,o){let u;const p=n.directiveEnd;for(let b=1+n.directiveStylingLast;b<p;b++)u=_h(u,t[b].hostAttrs,o);return _h(u,n.attrs,o)}(t,n,u)}return void 0!==b&&(u?n.residualClasses=b:n.residualStyles=b),o}(p,b,n,u),function sv(t,n,o,u,p,b){let T=b?n.classBindings:n.styleBindings,k=aa(T),H=Ja(T);t[u]=o;let _e,le=!1;if(Array.isArray(o)){const Ne=o;_e=Ne[1],(null===_e||_r(Ne,_e)>0)&&(le=!0)}else _e=o;if(p)if(0!==H){const ht=aa(t[k+1]);t[u+1]=xc(ht,k),0!==ht&&(t[ht+1]=Ar(t[ht+1],u)),t[k+1]=function Tf(t,n){return 131071&t|n<<17}(t[k+1],u)}else t[u+1]=xc(k,0),0!==k&&(t[k+1]=Ar(t[k+1],u)),k=u;else t[u+1]=xc(H,0),0===k?k=u:t[H+1]=Ar(t[H+1],u),H=u;le&&(t[u+1]=Yc(t[u+1])),$g(t,_e,u,!0),$g(t,_e,u,!1),function Gg(t,n,o,u,p){const b=p?t.residualClasses:t.residualStyles;null!=b&&"string"==typeof n&&_r(b,n)>=0&&(o[u+1]=Xd(o[u+1]))}(n,_e,t,u,b),T=xc(k,H),b?n.classBindings=T:n.styleBindings=T}(p,b,n,o,T,u)}}function lm(t,n,o,u,p){let b=null;const T=o.directiveEnd;let k=o.directiveStylingLast;for(-1===k?k=o.directiveStart:k++;k<T&&(b=n[k],u=_h(u,b.hostAttrs,p),b!==t);)k++;return null!==t&&(o.directiveStylingLast=k),u}function _h(t,n,o){const u=o?1:2;let p=-1;if(null!==n)for(let b=0;b<n.length;b++){const T=n[b];"number"==typeof T?p=T:p===u&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tr(t,T,!!o||n[++b]))}return void 0===t?null:t}function t_(t,n,o){Tr(t,n,ba(o))}function n_(t,n,o,u,p,b,T,k){if(!(3&n.type))return;const H=t.data,le=H[k+1];Cp(function Kc(t){return 1==(1&t)}(le)?i_(H,n,o,p,Ja(le),T):void 0)||(Cp(b)||function Kl(t){return 2==(2&t)}(le)&&(b=i_(H,null,o,p,k,T)),function sp(t,n,o,u,p){const b=fr(t);if(n)p?b?t.addClass(o,u):o.classList.add(u):b?t.removeClass(o,u):o.classList.remove(u);else{let T=-1===u.indexOf("-")?void 0:ka.DashCase;if(null==p)b?t.removeStyle(o,u,T):o.style.removeProperty(u);else{const k="string"==typeof p&&p.endsWith("!important");k&&(p=p.slice(0,-10),T|=ka.Important),b?t.setStyle(o,u,p,T):o.style.setProperty(u,p,k?"important":"")}}}(u,T,ne(Ai(),o),p,b))}function i_(t,n,o,u,p,b){const T=null===n;let k;for(;p>0;){const H=t[p],le=Array.isArray(H),_e=le?H[1]:H,Ne=null===_e;let ht=o[p+1];ht===nr&&(ht=Ne?Zt:void 0);let Ot=Ne?yo(ht,u):_e===u?ht:void 0;if(le&&!Cp(Ot)&&(Ot=yo(H,u)),Cp(Ot)&&(k=Ot,T))return k;const dn=t[p+1];p=T?aa(dn):Ja(dn)}if(null!==n){let H=b?n.residualClasses:n.residualStyles;null!=H&&(k=yo(H,u))}return k}function Cp(t){return void 0!==t}function r_(t,n){return 0!=(t.flags&(n?16:32))}function o_(t,n=""){const o=mn(),u=ue(),p=t+20,b=u.firstCreatePass?on(u,p,1,n,null):u.data[p],T=o[p]=function Nd(t,n){return fr(t)?t.createText(n):t.createTextNode(n)}(o[11],n);Zc(u,o,T,b),Se(b,!1)}function cm(t){return Ep("",t,""),cm}function Ep(t,n,o){const u=mn(),p=qu(u,t,n,o);return p!==nr&&Rl(u,Ai(),p),Ep}function h_(t,n,o){gl(Tr,Ll,qu(mn(),t,n,o),!0)}function dm(t,n,o){const u=mn();return Qs(u,Si(),n)&&$r(ue(),ar(),u,t,n,u[11],o,!0),dm}function hm(t,n,o){const u=mn();if(Qs(u,Si(),n)){const b=ue(),T=ar();$r(b,T,u,t,n,Ki(Po(b.data),T,u),o,!0)}return hm}const iu=void 0;var Fv=["en",[["a","p"],["AM","PM"],iu],[["AM","PM"],iu,iu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],iu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],iu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",iu,"{1} 'at' {0}",iu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rv(t){const o=Math.floor(Math.abs(t)),u=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let id={};function pm(t){const n=function Lv(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=C_(n);if(o)return o;const u=n.split("-")[0];if(o=C_(u),o)return o;if("en"===u)return Fv;throw new Error(`Missing locale data for the locale "${t}".`)}function w_(t){return pm(t)[ji.PluralCase]}function C_(t){return t in id||(id[t]=Hn.ng&&Hn.ng.common&&Hn.ng.common.locales&&Hn.ng.common.locales[t]),id[t]}var ji=(()=>((ji=ji||{})[ji.LocaleId=0]="LocaleId",ji[ji.DayPeriodsFormat=1]="DayPeriodsFormat",ji[ji.DayPeriodsStandalone=2]="DayPeriodsStandalone",ji[ji.DaysFormat=3]="DaysFormat",ji[ji.DaysStandalone=4]="DaysStandalone",ji[ji.MonthsFormat=5]="MonthsFormat",ji[ji.MonthsStandalone=6]="MonthsStandalone",ji[ji.Eras=7]="Eras",ji[ji.FirstDayOfWeek=8]="FirstDayOfWeek",ji[ji.WeekendRange=9]="WeekendRange",ji[ji.DateFormat=10]="DateFormat",ji[ji.TimeFormat=11]="TimeFormat",ji[ji.DateTimeFormat=12]="DateTimeFormat",ji[ji.NumberSymbols=13]="NumberSymbols",ji[ji.NumberFormats=14]="NumberFormats",ji[ji.CurrencyCode=15]="CurrencyCode",ji[ji.CurrencySymbol=16]="CurrencySymbol",ji[ji.CurrencyName=17]="CurrencyName",ji[ji.Currencies=18]="Currencies",ji[ji.Directionality=19]="Directionality",ji[ji.PluralCase=20]="PluralCase",ji[ji.ExtraData=21]="ExtraData",ji))();const Mp="en-US";let D_=Mp;function Em(t,n,o,u,p){if(t=Be(t),Array.isArray(t))for(let b=0;b<t.length;b++)Em(t[b],n,o,u,p);else{const b=ue(),T=mn();let k=Gu(t)?t:Be(t.provide),H=_p(t);const le=S(),_e=1048575&le.providerIndexes,Ne=le.directiveStart,ht=le.providerIndexes>>20;if(Gu(t)||!t.multi){const Ot=new pa(H,p,gh),dn=Mm(k,n,p?_e:_e+ht,Ne);-1===dn?(Re(X(le,T),b,k),Ch(b,t,n.length),n.push(k),le.directiveStart++,le.directiveEnd++,p&&(le.providerIndexes+=1048576),o.push(Ot),T.push(Ot)):(o[dn]=Ot,T[dn]=Ot)}else{const Ot=Mm(k,n,_e+ht,Ne),dn=Mm(k,n,_e,_e+ht),jn=Ot>=0&&o[Ot],ti=dn>=0&&o[dn];if(p&&!ti||!p&&!jn){Re(X(le,T),b,k);const Ti=function E0(t,n,o,u,p){const b=new pa(t,o,gh);return b.multi=[],b.index=n,b.componentProviders=0,Dm(b,p,u&&!o),b}(p?C0:w0,o.length,p,u,H);!p&&ti&&(o[dn].providerFactory=Ti),Ch(b,t,n.length,0),n.push(k),le.directiveStart++,le.directiveEnd++,p&&(le.providerIndexes+=1048576),o.push(Ti),T.push(Ti)}else Ch(b,t,Ot>-1?Ot:dn,Dm(o[p?dn:Ot],H,!p&&u));!p&&u&&ti&&o[dn].componentProviders++}}}function Ch(t,n,o,u){const p=Gu(n),b=function hy(t){return!!t.useClass}(n);if(p||b){const H=(b?Be(n.useClass):n).prototype.ngOnDestroy;if(H){const le=t.destroyHooks||(t.destroyHooks=[]);if(!p&&n.multi){const _e=le.indexOf(o);-1===_e?le.push(o,[u,H]):le[_e+1].push(u,H)}else le.push(o,H)}}}function Dm(t,n,o){return o&&t.componentProviders++,t.multi.push(n)-1}function Mm(t,n,o,u){for(let p=o;p<u;p++)if(n[p]===t)return p;return-1}function w0(t,n,o,u){return Sm(this.multi,[])}function C0(t,n,o,u){const p=this.multi;let b;if(this.providerFactory){const T=this.providerFactory.componentProviders,k=f(o,o[1],this.providerFactory.index,u);b=k.slice(0,T),Sm(p,b);for(let H=T;H<k.length;H++)b.push(k[H])}else b=[],Sm(p,b);return b}function Sm(t,n){for(let o=0;o<t.length;o++)n.push((0,t[o])());return n}function $_(t,n=[]){return o=>{o.providersResolver=(u,p)=>function x0(t,n,o){const u=ue();if(u.firstCreatePass){const p=xr(t);Em(o,u.data,u.blueprint,p,!0),Em(n,u.data,u.blueprint,p,!1)}}(u,p?p(t):t,n)}}class Z_{}class M0{resolveComponentFactory(n){throw function D0(t){const n=Error(`No component factory found for ${Le(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Na=(()=>{class t{}return t.NULL=new M0,t})();function S0(){return ld(S(),mn())}function ld(t,n){return new Eh(Ee(t,n))}let Eh=(()=>{class t{constructor(o){this.nativeElement=o}}return t.__NG_ELEMENT_ID__=S0,t})();function T0(t){return t instanceof Eh?t.nativeElement:t}class Wi{}let Im=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function Hb(){const t=mn(),o=Mn(S().index,t);return function A0(t){return t[11]}(Rr(o)?o:t)}(),t})(),I0=(()=>{class t{}return t.\u0275prov=xi({token:t,providedIn:"root",factory:()=>null}),t})();class q_{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const P0=new q_("13.1.3"),Pm={};function Lp(t,n,o,u,p=!1){for(;null!==o;){const b=n[o.index];if(null!==b&&u.push(Or(b)),Zr(b))for(let k=10;k<b.length;k++){const H=b[k],le=H[1].firstChild;null!==le&&Lp(H[1],H,le,u)}const T=o.type;if(8&T)Lp(t,n,o.child,u);else if(32&T){const k=Ra(o,n);let H;for(;H=k();)u.push(H)}else if(16&T){const k=ll(n,o);if(Array.isArray(k))u.push(...k);else{const H=jc(n[16]);Lp(H[1],H,k,u,!0)}}o=p?o.projectionNext:o.next}return u}class Dh{constructor(n,o){this._lView=n,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,o=n[1];return Lp(o,n,o.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Zr(n)){const o=n[8],u=o?o.indexOf(this):-1;u>-1&&(ql(n,u),Qi(o,u))}this._attachedToViewContainer=!1}Wl(this._lView[1],this._lView)}onDestroy(n){po(this._lView[1],this._lView,null,n)}markForCheck(){ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Uu(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ju(t,n,o){ni(!0);try{Uu(t,n,o)}finally{ni(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new tt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vf(t,n){_c(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new tt(902,"");this._appRef=n}}class O0 extends Dh{constructor(n){super(n),this._view=n}detectChanges(){Ca(this._view)}checkNoChanges(){!function gp(t){ni(!0);try{Ca(t)}finally{ni(!1)}}(this._view)}get context(){return null}}class k0 extends Na{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const o=F(n);return new Z(o,this.ngModule)}}function d(t){const n=[];for(let o in t)t.hasOwnProperty(o)&&n.push({propName:t[o],templateName:o});return n}const a=new ut("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xh});class Z extends Z_{constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=function Mf(t){return t.map(cp).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return d(this.componentDef.inputs)}get outputs(){return d(this.componentDef.outputs)}create(n,o,u,p){const b=(p=p||this.ngModule)?function y(t,n){return{get:(o,u,p)=>{const b=t.get(o,Pm,p);return b!==Pm||u===Pm?b:n.get(o,u,p)}}}(n,p.injector):n,T=b.get(Wi,ea),k=b.get(I0,null),H=T.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",_e=u?function jo(t,n,o){if(fr(t))return t.selectRootElement(n,o===nt.ShadowDom);let u="string"==typeof n?t.querySelector(n):n;return u.textContent="",u}(H,u,this.componentDef.encapsulation):Au(T.createRenderer(null,this.componentDef),le,function C(t){const n=t.toLowerCase();return"svg"===n?Is:"math"===n?"http://www.w3.org/1998/MathML/":null}(le)),Ne=this.componentDef.onPush?576:528,ht=function eu(t,n){return{components:[],scheduler:t||Xh,clean:Xc,playerHandler:n||null,flags:0}}(),Ot=Yi(0,null,null,1,0,null,null,null,null,null),dn=pn(null,Ot,ht,Ne,null,null,T,H,k,b);let jn,ti;_o(dn);try{const Ti=function sg(t,n,o,u,p,b){const T=o[1];o[20]=t;const H=on(T,20,2,"#host",null),le=H.mergedAttrs=n.hostAttrs;null!==le&&(hh(H,le,!0),null!==t&&(ja(p,t,le),null!==H.classes&&yc(p,t,H.classes),null!==H.styles&&Yd(p,t,H.styles)));const _e=u.createRenderer(t,n),Ne=pn(o,wi(n),null,n.onPush?64:16,o[20],H,u,_e,b||null,null);return T.firstCreatePass&&(Re(X(H,o),T,n.type),ua(T,H),Ks(H,o.length,1)),Vu(o,Ne),o[20]=Ne}(_e,this.componentDef,dn,T,H);if(_e)if(u)ja(H,_e,["ng-version",P0.full]);else{const{attrs:vn,classes:Vi}=function Sf(t){const n=[],o=[];let u=1,p=2;for(;u<t.length;){let b=t[u];if("string"==typeof b)2===p?""!==b&&n.push(b,t[++u]):8===p&&o.push(b);else{if(!xa(p))break;p=b}u++}return{attrs:n,classes:o}}(this.componentDef.selectors[0]);vn&&ja(H,_e,vn),Vi&&Vi.length>0&&yc(H,_e,Vi.join(" "))}if(ti=Yt(Ot,20),void 0!==o){const vn=ti.projection=[];for(let Vi=0;Vi<this.ngContentSelectors.length;Vi++){const Er=o[Vi];vn.push(null!=Er?Array.from(Er):null)}}jn=function ag(t,n,o,u,p){const b=o[1],T=function Qr(t,n,o){const u=S();t.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),ks(t,u,n,ui(t,n,1,null),o));const p=f(n,t,u.directiveStart,u);bs(p,n);const b=Ee(u,n);return b&&bs(b,n),p}(b,o,n);if(u.components.push(T),t[8]=T,p&&p.forEach(H=>H(T,n)),n.contentQueries){const H=S();n.contentQueries(1,T,H.directiveStart)}const k=S();return!b.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(Dr(k.index),or(o[1],k,0,k.directiveStart,k.directiveEnd,n),la(n,T)),T}(Ti,this.componentDef,dn,ht,[Ey]),Gn(Ot,dn,null)}finally{ii()}return new Wt(this.componentType,jn,ld(ti,dn),dn,ti)}}class Wt extends class Tm{}{constructor(n,o,u,p,b){super(),this.location=u,this._rootLView=p,this._tNode=b,this.instance=o,this.hostView=this.changeDetectorRef=new O0(p),this.componentType=n}get injector(){return new v(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class ei{}class bi{}const oi=new Map;class Xs extends ei{constructor(n,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k0(this);const u=De(n);this._bootstrapComponents=Oa(u.bootstrap),this._r3Injector=Jm(n,o,[{provide:ei,useValue:this},{provide:Na,useValue:this.componentFactoryResolver}],Le(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,o=Xa.THROW_IF_NOT_FOUND,u=qn.Default){return n===Xa||n===ei||n===Rf?this:this._r3Injector.get(n,o,u)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class _l extends bi{constructor(n){super(),this.moduleType=n,null!==De(n)&&function fo(t){const n=new Set;!function o(u){const p=De(u,!0),b=p.id;null!==b&&(function Xr(t,n,o){if(n&&n!==o)throw new Error(`Duplicate module registered for ${t} - ${Le(n)} vs ${Le(n.name)}`)}(b,oi.get(b),u),oi.set(b,u));const T=Oa(p.imports);for(const k of T)n.has(k)||(n.add(k),o(k))}(t)}(n)}create(n){return new Xs(this.moduleType,n)}}function yl(t,n,o){const u=yi()+t,p=mn();return p[u]===nr?Fl(p,u,o?n.call(o):n()):function mh(t,n){return t[n]}(p,u)}function Xl(t,n,o,u){return Sh(mn(),yi(),t,n,o,u)}function Mh(t,n,o,u,p){return function Bp(t,n,o,u,p,b,T){const k=n+o;return tu(t,k,p,b)?Fl(t,k+2,T?u.call(T,p,b):u(p,b)):ou(t,k+2)}(mn(),yi(),t,n,o,u,p)}function tl(t,n,o,u,p,b){return function zp(t,n,o,u,p,b,T,k){const H=n+o;return function bp(t,n,o,u,p){const b=tu(t,n,o,u);return Qs(t,n+2,p)||b}(t,H,p,b,T)?Fl(t,H+3,k?u.call(k,p,b,T):u(p,b,T)):ou(t,H+3)}(mn(),yi(),t,n,o,u,p,b)}function Np(t,n,o,u){return function Ah(t,n,o,u,p,b){let T=n+o,k=!1;for(let H=0;H<p.length;H++)Qs(t,T++,p[H])&&(k=!0);return k?Fl(t,T,u.apply(b,p)):ou(t,T)}(mn(),yi(),t,n,o,u)}function ou(t,n){const o=t[n];return o===nr?void 0:o}function Sh(t,n,o,u,p,b){const T=n+o;return Qs(t,T,p)?Fl(t,T+1,b?u.call(b,p):u(p)):ou(t,T+1)}function Ih(t,n){const o=ue();let u;const p=t+20;o.firstCreatePass?(u=function Vp(t,n){if(n)for(let o=n.length-1;o>=0;o--){const u=n[o];if(t===u.name)return u}}(n,o.pipeRegistry),o.data[p]=u,u.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(p,u.onDestroy)):u=o.data[p];const b=u.factory||(u.factory=Io(u.type)),T=St(gh);try{const k=Vo(!1),H=b();return Vo(k),function bb(t,n,o,u){o>=t.data.length&&(t.data[o]=null,t.blueprint[o]=null),n[o]=u}(o,mn(),p,H),H}finally{St(T)}}function Ph(t,n,o){const u=t+20,p=mn(),b=un(p,u);return function Ec(t,n){return t[1].data[n].pure}(p,u)?Sh(p,yi(),n,b.transform,o,b):b.transform(o)}function Hp(t){return n=>{setTimeout(t,void 0,n)}}const Nl=class W_ extends D.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,o,u){var p,b,T;let k=n,H=o||(()=>null),le=u;if(n&&"object"==typeof n){const Ne=n;k=null===(p=Ne.next)||void 0===p?void 0:p.bind(Ne),H=null===(b=Ne.error)||void 0===b?void 0:b.bind(Ne),le=null===(T=Ne.complete)||void 0===T?void 0:T.bind(Ne)}this.__isAsync&&(H=Hp(H),k&&(k=Hp(k)),le&&(le=Hp(le)));const _e=super.subscribe({next:k,error:H,complete:le});return n instanceof l.w0&&n.add(_e),_e}};function Wx(){return this._results[$u()]()}class Y_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=$u(),u=Y_.prototype;u[o]||(u[o]=Wx)}get changes(){return this._changes||(this._changes=new Nl)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){const u=this;u.dirty=!1;const p=gi(n);(this._changesDetected=!function cr(t,n,o){if(t.length!==n.length)return!1;for(let u=0;u<t.length;u++){let p=t[u],b=n[u];if(o&&(p=o(p),b=o(b)),b!==p)return!1}return!0}(u._results,p,o))&&(u._results=p,u.length=p.length,u.last=p[this.length-1],u.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Rm=(()=>{class t{}return t.__NG_ELEMENT_ID__=Jx,t})();const Yx=Rm,Kx=class extends Yx{constructor(n,o,u){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(n){const o=this._declarationTContainer.tViews,u=pn(this._declarationLView,o,n,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(u[19]=b.createEmbeddedView(o)),Gn(o,u,n),new Dh(u)}};function Jx(){return K_(S(),mn())}function K_(t,n){return 4&t.type?new Kx(n,t,ld(t,n)):null}let J_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qx,t})();function Qx(){return Zb(S(),mn())}const Xx=J_,Gb=class extends Xx{constructor(n,o,u){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=u}get element(){return ld(this._hostTNode,this._hostLView)}get injector(){return new v(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ue(this._hostTNode,this._hostLView);if(zl(n)){const o=ga(n,this._hostLView),u=ma(n);return new v(o[1].data[u+8],o)}return new v(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const o=$b(this._lContainer);return null!==o&&o[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,o,u){const p=n.createEmbeddedView(o||{});return this.insert(p,u),p}createComponent(n,o,u,p,b){const T=n&&!function qi(t){return"function"==typeof t}(n);let k;if(T)k=o;else{const Ne=o||{};k=Ne.index,u=Ne.injector,p=Ne.projectableNodes,b=Ne.ngModuleRef}const H=T?n:new Z(F(n)),le=u||this.parentInjector;if(!b&&null==H.ngModule&&le){const Ne=le.get(ei,null);Ne&&(b=Ne)}const _e=H.create(le,p,void 0,b);return this.insert(_e.hostView,k),_e}insert(n,o){const u=n._lView,p=u[1];if(function mr(t){return Zr(t[3])}(u)){const _e=this.indexOf(n);if(-1!==_e)this.detach(_e);else{const Ne=u[3],ht=new Gb(Ne,Ne[6],Ne[3]);ht.detach(ht.indexOf(n))}}const b=this._adjustIndex(o),T=this._lContainer;!function Bd(t,n,o,u){const p=10+u,b=o.length;u>0&&(o[p-1][4]=n),u<b-10?(n[4]=o[p],lr(o,10+u,n)):(o.push(n),n[4]=null),n[3]=o;const T=n[17];null!==T&&o!==T&&function rp(t,n){const o=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===o?t[9]=[n]:o.push(n)}(T,n);const k=n[19];null!==k&&k.insertView(t),n[2]|=128}(p,u,T,b);const k=qc(b,T),H=u[11],le=gc(H,T[7]);return null!==le&&function yf(t,n,o,u,p,b){u[0]=p,u[6]=n,_c(t,u,o,1,p,b)}(p,T[6],H,u,le,k),n.attachToViewContainerRef(),lr(R0(T),b,n),n}move(n,o){return this.insert(n,o)}indexOf(n){const o=$b(this._lContainer);return null!==o?o.indexOf(n):-1}remove(n){const o=this._adjustIndex(n,-1),u=ql(this._lContainer,o);u&&(Qi(R0(this._lContainer),o),Wl(u[1],u))}detach(n){const o=this._adjustIndex(n,-1),u=ql(this._lContainer,o);return u&&null!=Qi(R0(this._lContainer),o)?new Dh(u):null}_adjustIndex(n,o=0){return null==n?this.length+o:n}};function $b(t){return t[8]}function R0(t){return t[8]||(t[8]=[])}function Zb(t,n){let o;const u=n[t.index];if(Zr(u))o=u;else{let p;if(8&t.type)p=Or(u);else{const b=n[11];p=b.createComment("");const T=Ee(t,n);Yl(b,gc(b,T),p,function xf(t,n){return fr(t)?t.nextSibling(n):n.nextSibling}(b,T),!1)}n[t.index]=o=oh(u,n,p,t),Vu(n,o)}return new Gb(o,t,n)}class F0{constructor(n){this.queryList=n,this.matches=null}clone(){return new F0(this.queryList)}setDirty(){this.queryList.setDirty()}}class L0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const o=n.queries;if(null!==o){const u=null!==n.contentQueries?n.contentQueries[0]:o.length,p=[];for(let b=0;b<u;b++){const T=o.getByIndex(b);p.push(this.queries[T.indexInDeclarationView].clone())}return new L0(p)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)null!==tx(n,o).matches&&this.queries[o].setDirty()}}class qb{constructor(n,o,u=null){this.predicate=n,this.flags=o,this.read=u}}class N0{constructor(n=[]){this.queries=n}elementStart(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let u=0;u<this.length;u++){const p=null!==o?o.length:0,b=this.getByIndex(u).embeddedTView(n,p);b&&(b.indexInDeclarationView=u,null!==o?o.push(b):o=[b])}return null!==o?new N0(o):null}template(n,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class B0{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new B0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=n.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(n,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let p=0;p<u.length;p++){const b=u[p];this.matchTNodeWithReadOption(n,o,nw(o,b)),this.matchTNodeWithReadOption(n,o,So(o,n,b,!1,!1))}else u===Rm?4&o.type&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,So(o,n,u,!1,!1))}matchTNodeWithReadOption(n,o,u){if(null!==u){const p=this.metadata.read;if(null!==p)if(p===Eh||p===J_||p===Rm&&4&o.type)this.addMatch(o.index,-2);else{const b=So(o,n,p,!1,!1);null!==b&&this.addMatch(o.index,b)}else this.addMatch(o.index,u)}}addMatch(n,o){null===this.matches?this.matches=[n,o]:this.matches.push(n,o)}}function nw(t,n){const o=t.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===n)return o[u+1];return null}function rw(t,n,o,u){return-1===o?function iw(t,n){return 11&t.type?ld(t,n):4&t.type?K_(t,n):null}(n,t):-2===o?function ow(t,n,o){return o===Eh?ld(n,t):o===Rm?K_(n,t):o===J_?Zb(n,t):void 0}(t,n,u):f(t,t[1],o,n)}function Wb(t,n,o,u){const p=n[19].queries[u];if(null===p.matches){const b=t.data,T=o.matches,k=[];for(let H=0;H<T.length;H+=2){const le=T[H];k.push(le<0?null:rw(n,b[le],T[H+1],o.metadata.read))}p.matches=k}return p.matches}function z0(t,n,o,u){const p=t.queries.getByIndex(o),b=p.matches;if(null!==b){const T=Wb(t,n,p,o);for(let k=0;k<b.length;k+=2){const H=b[k];if(H>0)u.push(T[k/2]);else{const le=b[k+1],_e=n[-H];for(let Ne=10;Ne<_e.length;Ne++){const ht=_e[Ne];ht[17]===ht[3]&&z0(ht[1],ht,le,u)}if(null!==_e[9]){const Ne=_e[9];for(let ht=0;ht<Ne.length;ht++){const Ot=Ne[ht];z0(Ot[1],Ot,le,u)}}}}}return u}function Yb(t){const n=mn(),o=ue(),u=go();rs(u+1);const p=tx(o,u);if(t.dirty&&Di(n)===(2==(2&p.metadata.flags))){if(null===p.matches)t.reset([]);else{const b=p.crossesNgTemplate?z0(o,n,u,[]):Wb(o,n,p,u);t.reset(b,T0),t.notifyOnChanges()}return!0}return!1}function Kb(t,n,o){const u=ue();u.firstCreatePass&&(ex(u,new qb(t,n,o),-1),2==(2&n)&&(u.staticViewQueries=!0)),Xb(u,mn(),n)}function Jb(t,n,o,u){const p=ue();if(p.firstCreatePass){const b=S();ex(p,new qb(n,o,u),b.index),function aw(t,n){const o=t.contentQueries||(t.contentQueries=[]);n!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,n)}(p,t),2==(2&o)&&(p.staticContentQueries=!0)}Xb(p,mn(),o)}function Qb(){return function sw(t,n){return t[19].queries[n].queryList}(mn(),go())}function Xb(t,n,o){const u=new Y_(4==(4&o));po(t,n,u,u.destroy),null===n[19]&&(n[19]=new L0),n[19].queries.push(new F0(u))}function ex(t,n,o){null===t.queries&&(t.queries=new N0),t.queries.track(new B0(n,o))}function tx(t,n){return t.queries.getByIndex(n)}function ey(...t){}const $0=new ut("Application Initializer");let $p=(()=>{class t{constructor(o){this.appInits=o,this.resolve=ey,this.reject=ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const b=this.appInits[p]();if(em(b))o.push(b);else if(Ag(b)){const T=new Promise((k,H)=>{b.subscribe({complete:k,error:H})});o.push(T)}}Promise.all(o).then(()=>{u()}).catch(p=>{this.reject(p)}),0===o.length&&u(),this.initialized=!0}}return t.\u0275fac=function(o){return new(o||t)(Oo($0,8))},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();const yx=new ut("AppId"),Mw={provide:yx,useFactory:function Dw(){return`${Z0()}${Z0()}${Z0()}`},deps:[]};function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vx=new ut("Platform Initializer"),bx=new ut("Platform ID"),xx=new ut("appBootstrapListener");let wx=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();const ty=new ut("LocaleId"),Cx=new ut("DefaultCurrencyCode");class Sw{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}}let q0=(()=>{class t{compileModuleSync(o){return new _l(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),b=Oa(De(o).declarations).reduce((T,k)=>{const H=F(k);return H&&T.push(new Z(H)),T},[]);return new Sw(u,b)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();const Aw=(()=>Promise.resolve(0))();function W0(t){"undefined"==typeof Zone?Aw.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class bl{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nl(!1),this.onMicrotaskEmpty=new Nl(!1),this.onStable=new Nl(!1),this.onError=new Nl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&o,p.shouldCoalesceRunChangeDetection=u,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Iw(){let t=Hn.requestAnimationFrame,n=Hn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o);const u=n[Zone.__symbol__("OriginalDelegate")];u&&(n=u)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function kw(t){const n=()=>{!function Ow(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Hn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,K0(t),t.isCheckStableRunning=!0,Y0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),K0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,p,b,T,k)=>{try{return Ex(t),o.invokeTask(p,b,T,k)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||t.shouldCoalesceRunChangeDetection)&&n(),Dx(t)}},onInvoke:(o,u,p,b,T,k,H)=>{try{return Ex(t),o.invoke(p,b,T,k,H)}finally{t.shouldCoalesceRunChangeDetection&&n(),Dx(t)}},onHasTask:(o,u,p,b)=>{o.hasTask(p,b),u===p&&("microTask"==b.change?(t._hasPendingMicrotasks=b.microTask,K0(t),Y0(t)):"macroTask"==b.change&&(t.hasPendingMacrotasks=b.macroTask))},onHandleError:(o,u,p,b)=>(o.handleError(p,b),t.runOutsideAngular(()=>t.onError.emit(b)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,o,u){return this._inner.run(n,o,u)}runTask(n,o,u,p){const b=this._inner,T=b.scheduleEventTask("NgZoneEvent: "+p,n,Pw,ey,ey);try{return b.runTask(T,o,u)}finally{b.cancelTask(T)}}runGuarded(n,o,u){return this._inner.runGuarded(n,o,u)}runOutsideAngular(n){return this._outer.run(n)}}const Pw={};function Y0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function K0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ex(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dx(t){t._nesting--,Y0(t)}class Rw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nl,this.onMicrotaskEmpty=new Nl,this.onStable=new Nl,this.onError=new Nl}run(n,o,u){return n.apply(o,u)}runGuarded(n,o,u){return n.apply(o,u)}runOutsideAngular(n){return n()}runTask(n,o,u,p){return n.apply(o,u)}}let Mx=(()=>{class t{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bl.assertNotInAngularZone(),W0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())W0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,p){let b=-1;u&&u>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==b),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:b,updateCb:p})}whenStable(o,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,p){return[]}}return t.\u0275fac=function(o){return new(o||t)(Oo(bl))},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})(),Sx=(()=>{class t{constructor(){this._applications=new Map,J0.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return J0.findTestabilityInTree(this,o,u)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();class Fw{addToWindow(n){}findTestabilityInTree(n,o,u){return null}}function Lw(t){J0=t}let ec,J0=new Fw;const Tx=new ut("AllowMultipleToken");class zw{constructor(n,o){this.name=n,this.token=o}}function Ax(t,n,o=[]){const u=`Platform: ${n}`,p=new ut(u);return(b=[])=>{let T=Ix();if(!T||T.injector.get(Tx,!1))if(t)t(o.concat(b).concat({provide:p,useValue:!0}));else{const k=o.concat(b).concat({provide:p,useValue:!0},{provide:Ff,useValue:"platform"});!function Vw(t){if(ec&&!ec.destroyed&&!ec.injector.get(Tx,!1))throw new tt(400,"");ec=t.get(Px);const n=t.get(vx,null);n&&n.forEach(o=>o())}(Xa.create({providers:k,name:u}))}return function Uw(t){const n=Ix();if(!n)throw new tt(401,"");return n}()}}function Ix(){return ec&&!ec.destroyed?ec:null}let Px=(()=>{class t{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const k=function jw(t,n){let o;return o="noop"===t?new Rw:("zone.js"===t?void 0:t)||new bl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),H=[{provide:bl,useValue:k}];return k.run(()=>{const le=Xa.create({providers:H,parent:this.injector,name:o.moduleType.name}),_e=o.create(le),Ne=_e.injector.get(dc,null);if(!Ne)throw new tt(402,"");return k.runOutsideAngular(()=>{const ht=k.onError.subscribe({next:Ot=>{Ne.handleError(Ot)}});_e.onDestroy(()=>{Q0(this._modules,_e),ht.unsubscribe()})}),function Hw(t,n,o){try{const u=o();return em(u)?u.catch(p=>{throw n.runOutsideAngular(()=>t.handleError(p)),p}):u}catch(u){throw n.runOutsideAngular(()=>t.handleError(u)),u}}(Ne,k,()=>{const ht=_e.injector.get($p);return ht.runInitializers(),ht.donePromise.then(()=>(function zv(t){kn(t,"Expected localeId to be defined"),"string"==typeof t&&(D_=t.toLowerCase().replace(/_/g,"-"))}(_e.injector.get(ty,Mp)||Mp),this._moduleDoBootstrap(_e),_e))})})}bootstrapModule(o,u=[]){const p=Ox({},u);return function Nw(t,n,o){const u=new _l(o);return Promise.resolve(u)}(0,0,o).then(b=>this.bootstrapModuleFactory(b,p))}_moduleDoBootstrap(o){const u=o.injector.get(Lm);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new tt(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new tt(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(o){return new(o||t)(Oo(Xa))},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();function Ox(t,n){return Array.isArray(n)?n.reduce(Ox,t):Object.assign(Object.assign({},t),n)}let Lm=(()=>{class t{constructor(o,u,p,b,T){this._zone=o,this._injector=u,this._exceptionHandler=p,this._componentFactoryResolver=b,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const k=new q.y(le=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{le.next(this._stable),le.complete()})}),H=new q.y(le=>{let _e;this._zone.runOutsideAngular(()=>{_e=this._zone.onStable.subscribe(()=>{bl.assertNotInAngularZone(),W0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,le.next(!0))})})});const Ne=this._zone.onUnstable.subscribe(()=>{bl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{le.next(!1)}))});return()=>{_e.unsubscribe(),Ne.unsubscribe()}});this.isStable=(0,g.T)(k,H.pipe((0,$e.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new tt(405,"");let p;p=o instanceof Z_?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(p.componentType);const b=function Bw(t){return t.isBoundToModule}(p)?void 0:this._injector.get(ei),k=p.create(Xa.NULL,[],u||p.selector,b),H=k.location.nativeElement,le=k.injector.get(Mx,null),_e=le&&k.injector.get(Sx);return le&&_e&&_e.registerApplication(H,le),k.onDestroy(()=>{this.detachView(k.hostView),Q0(this.components,k),_e&&_e.unregisterApplication(H)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new tt(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Q0(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(xx,[]).concat(this._bootstrapListeners).forEach(p=>p(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(o){return new(o||t)(Oo(bl),Oo(Xa),Oo(dc),Oo(Na),Oo($p))},t.\u0275prov=xi({token:t,factory:t.\u0275fac}),t})();function Q0(t,n){const o=t.indexOf(n);o>-1&&t.splice(o,1)}let Rx=!0;function $w(){Rx=!1}let Zw=(()=>{class t{}return t.__NG_ELEMENT_ID__=qw,t})();function qw(t){return function Ww(t,n,o){if(zs(t)&&!o){const u=Mn(t.index,n);return new Dh(u,u)}return 47&t.type?new Dh(n[16],n):null}(S(),mn(),16==(16&t))}class Ux{constructor(){}supports(n){return fh(n)}create(n){return new e1(n)}}const Xw=(t,n)=>n;class e1{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Xw}forEachItem(n){let o;for(o=this._itHead;null!==o;o=o._next)n(o)}forEachOperation(n){let o=this._itHead,u=this._removalsHead,p=0,b=null;for(;o||u;){const T=!u||o&&o.currentIndex<Hx(u,p,b)?o:u,k=Hx(T,p,b),H=T.currentIndex;if(T===u)p--,u=u._nextRemoved;else if(o=o._next,null==T.previousIndex)p++;else{b||(b=[]);const le=k-p,_e=H-p;if(le!=_e){for(let ht=0;ht<le;ht++){const Ot=ht<b.length?b[ht]:b[ht]=0,dn=Ot+ht;_e<=dn&&dn<le&&(b[ht]=Ot+1)}b[T.previousIndex]=_e-le}}k!==H&&n(T,k,H)}}forEachPreviousItem(n){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachMovedItem(n){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}forEachIdentityChange(n){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)n(o)}diff(n){if(null==n&&(n=[]),!fh(n))throw new tt(900,"");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let p,b,T,o=this._itHead,u=!1;if(Array.isArray(n)){this.length=n.length;for(let k=0;k<this.length;k++)b=n[k],T=this._trackByFn(k,b),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,b,T,k)),Object.is(o.item,b)||this._addIdentityChange(o,b)):(o=this._mismatch(o,b,T,k),u=!0),o=o._next}else p=0,function Oy(t,n){if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else{const o=t[$u()]();let u;for(;!(u=o.next()).done;)n(u.value)}}(n,k=>{T=this._trackByFn(p,k),null!==o&&Object.is(o.trackById,T)?(u&&(o=this._verifyReinsertion(o,k,T,p)),Object.is(o.item,k)||this._addIdentityChange(o,k)):(o=this._mismatch(o,k,T,p),u=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,o,u,p){let b;return null===n?b=this._itTail:(b=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._reinsertAfter(n,b,p)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(u,p))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._moveAfter(n,b,p)):n=this._addAfter(new t1(o,u),b,p),n}_verifyReinsertion(n,o,u,p){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==b?n=this._reinsertAfter(b,n._prev,p):n.currentIndex!=p&&(n.currentIndex=p,this._addToMoves(n,p)),n}_truncate(n){for(;null!==n;){const o=n._next;this._addToRemovals(this._unlink(n)),n=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const p=n._prevRemoved,b=n._nextRemoved;return null===p?this._removalsHead=b:p._nextRemoved=b,null===b?this._removalsTail=p:b._prevRemoved=p,this._insertAfter(n,o,u),this._addToMoves(n,u),n}_moveAfter(n,o,u){return this._unlink(n),this._insertAfter(n,o,u),this._addToMoves(n,u),n}_addAfter(n,o,u){return this._insertAfter(n,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,o,u){const p=null===o?this._itHead:o._next;return n._next=p,n._prev=o,null===p?this._itTail=n:p._prev=n,null===o?this._itHead=n:o._next=n,null===this._linkedRecords&&(this._linkedRecords=new jx),this._linkedRecords.put(n),n.currentIndex=u,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const o=n._prev,u=n._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,n}_addToMoves(n,o){return n.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jx),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,o){return n.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class t1{constructor(n,o){this.item=n,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class n1{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,n))return u;return null}remove(n){const o=n._prevDup,u=n._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class jx{constructor(){this.map=new Map}put(n){const o=n.trackById;let u=this.map.get(o);u||(u=new n1,this.map.set(o,u)),u.add(n)}get(n,o){const p=this.map.get(n);return p?p.get(n,o):null}remove(n){const o=n.trackById;return this.map.get(o).remove(n)&&this.map.delete(o),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hx(t,n,o){const u=t.previousIndex;if(null===u)return u;let p=0;return o&&u<o.length&&(p=o[u]),u+n+p}class Gx{constructor(){}supports(n){return n instanceof Map||Hf(n)}create(){return new r1}}class r1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let o;for(o=this._mapHead;null!==o;o=o._next)n(o)}forEachPreviousItem(n){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)n(o)}forEachChangedItem(n){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}diff(n){if(n){if(!(n instanceof Map||Hf(n)))throw new tt(900,"")}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(n,(u,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const b=this._getOrCreateRecordForKey(p,u);o=this._insertBeforeOrAppend(o,b)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,o){if(n){const u=n._prev;return o._next=n,o._prev=u,n._prev=o,u&&(u._next=o),n===this._mapHead&&(this._mapHead=o),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(n,o){if(this._records.has(n)){const p=this._records.get(n);this._maybeAddToChanges(p,o);const b=p._prev,T=p._next;return b&&(b._next=T),T&&(T._prev=b),p._next=null,p._prev=null,p}const u=new o1(n);return this._records.set(n,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,o){Object.is(o,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=o,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,o){n instanceof Map?n.forEach(o):Object.keys(n).forEach(u=>o(n[u],u))}}class o1{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $x(){return new iy([new Ux])}let iy=(()=>{class t{constructor(o){this.factories=o}static create(o,u){if(null!=u){const p=u.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:u=>t.create(o,u||$x()),deps:[[t,new Hl,new $s]]}}find(o){const u=this.factories.find(p=>p.supports(o));if(null!=u)return u;throw new tt(901,"")}}return t.\u0275prov=xi({token:t,providedIn:"root",factory:$x}),t})();function Zx(){return new ry([new Gx])}let ry=(()=>{class t{constructor(o){this.factories=o}static create(o,u){if(u){const p=u.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:u=>t.create(o,u||Zx()),deps:[[t,new Hl,new $s]]}}find(o){const u=this.factories.find(b=>b.supports(o));if(u)return u;throw new tt(901,"")}}return t.\u0275prov=xi({token:t,providedIn:"root",factory:Zx}),t})();const s1=[new Gx],l1=new iy([new Ux]),c1=new ry(s1),u1=Ax(null,"core",[{provide:bx,useValue:"unknown"},{provide:Px,deps:[Xa]},{provide:Sx,deps:[]},{provide:wx,deps:[]}]),m1=[{provide:Lm,useClass:Lm,deps:[bl,Xa,dc,Na,$p]},{provide:a,deps:[bl],useFactory:function g1(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(o){n.push(o)}}},{provide:$p,useClass:$p,deps:[[new $s,$0]]},{provide:q0,useClass:q0,deps:[]},Mw,{provide:iy,useFactory:function d1(){return l1},deps:[]},{provide:ry,useFactory:function h1(){return c1},deps:[]},{provide:ty,useFactory:function p1(t){return t||function f1(){return"undefined"!=typeof $localize&&$localize.locale||Mp}()},deps:[[new jl(ty),new $s,new Hl]]},{provide:Cx,useValue:"USD"}];let _1=(()=>{class t{constructor(o){}}return t.\u0275fac=function(o){return new(o||t)(Oo(Lm))},t.\u0275mod=Gi({type:t}),t.\u0275inj=Qn({providers:m1}),t})()},3075:(On,wt,V)=>{"use strict";V.d(wt,{Zs:()=>Ps,Fj:()=>Ye,sg:()=>Ts,u5:()=>Mn,Cf:()=>He,JU:()=>Le,a5:()=>Bn,JJ:()=>qn,F:()=>Qo,On:()=>Zr,kI:()=>an});var D=V(5e3),l=V(9808),q=V(2076),g=V(4128),$e=V(4004);let Ke=(()=>{class Q{constructor(B,Me){this._renderer=B,this._elementRef=Me,this.onChange=$t=>{},this.onTouched=()=>{}}setProperty(B,Me){this._renderer.setProperty(this._elementRef.nativeElement,B,Me)}registerOnTouched(B){this.onTouched=B}registerOnChange(B){this.onChange=B}setDisabledState(B){this.setProperty("disabled",B)}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(D.Qsj),D.Y36(D.SBq))},Q.\u0275dir=D.lG2({type:Q}),Q})(),Oe=(()=>{class Q extends Ke{}return Q.\u0275fac=function(){let W;return function(Me){return(W||(W=D.n5z(Q)))(Me||Q)}}(),Q.\u0275dir=D.lG2({type:Q,features:[D.qOj]}),Q})();const Le=new D.OlP("NgValueAccessor"),Ze={provide:Le,useExisting:(0,D.Gpc)(()=>Ye),multi:!0},gt=new D.OlP("CompositionEventMode");let Ye=(()=>{class Q extends Ke{constructor(B,Me,$t){super(B,Me),this._compositionMode=$t,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Be(){const Q=(0,l.q)()?(0,l.q)().getUserAgent():"";return/android (\d+)/.test(Q.toLowerCase())}())}writeValue(B){this.setProperty("value",null==B?"":B)}_handleInput(B){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(B)}_compositionStart(){this._composing=!0}_compositionEnd(B){this._composing=!1,this._compositionMode&&this.onChange(B)}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(D.Qsj),D.Y36(D.SBq),D.Y36(gt,8))},Q.\u0275dir=D.lG2({type:Q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(B,Me){1&B&&D.NdJ("input",function(fi){return Me._handleInput(fi.target.value)})("blur",function(){return Me.onTouched()})("compositionstart",function(){return Me._compositionStart()})("compositionend",function(fi){return Me._compositionEnd(fi.target.value)})},features:[D._Bn([Ze]),D.qOj]}),Q})();function tt(Q){return null==Q||0===Q.length}function Mt(Q){return null!=Q&&"number"==typeof Q.length}const He=new D.OlP("NgValidators"),Vt=new D.OlP("NgAsyncValidators"),Ht=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class an{static min(W){return function Dt(Q){return W=>{if(tt(W.value)||tt(Q))return null;const B=parseFloat(W.value);return!isNaN(B)&&B<Q?{min:{min:Q,actual:W.value}}:null}}(W)}static max(W){return function Fe(Q){return W=>{if(tt(W.value)||tt(Q))return null;const B=parseFloat(W.value);return!isNaN(B)&&B>Q?{max:{max:Q,actual:W.value}}:null}}(W)}static required(W){return rt(W)}static requiredTrue(W){return nn(W)}static email(W){return function Bt(Q){return tt(Q.value)||Ht.test(Q.value)?null:{email:!0}}(W)}static minLength(W){return function Qt(Q){return W=>tt(W.value)||!Mt(W.value)?null:W.value.length<Q?{minlength:{requiredLength:Q,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function at(Q){return W=>Mt(W.value)&&W.value.length>Q?{maxlength:{requiredLength:Q,actualLength:W.value.length}}:null}(W)}static pattern(W){return function mt(Q){if(!Q)return lt;let W,B;return"string"==typeof Q?(B="","^"!==Q.charAt(0)&&(B+="^"),B+=Q,"$"!==Q.charAt(Q.length-1)&&(B+="$"),W=new RegExp(B)):(B=Q.toString(),W=Q),Me=>{if(tt(Me.value))return null;const $t=Me.value;return W.test($t)?null:{pattern:{requiredPattern:B,actualValue:$t}}}}(W)}static nullValidator(W){return null}static compose(W){return kn(W)}static composeAsync(W){return ki(W)}}function rt(Q){return tt(Q.value)?{required:!0}:null}function nn(Q){return!0===Q.value?null:{required:!0}}function lt(Q){return null}function At(Q){return null!=Q}function Kt(Q){const W=(0,D.QGY)(Q)?(0,q.D)(Q):Q;return(0,D.CqO)(W),W}function Ct(Q){let W={};return Q.forEach(B=>{W=null!=B?Object.assign(Object.assign({},W),B):W}),0===Object.keys(W).length?null:W}function yn(Q,W){return W.map(B=>B(Q))}function Ui(Q){return Q.map(W=>function di(Q){return!Q.validate}(W)?W:B=>W.validate(B))}function kn(Q){if(!Q)return null;const W=Q.filter(At);return 0==W.length?null:function(B){return Ct(yn(B,W))}}function Rn(Q){return null!=Q?kn(Ui(Q)):null}function ki(Q){if(!Q)return null;const W=Q.filter(At);return 0==W.length?null:function(B){const Me=yn(B,W).map(Kt);return(0,g.D)(Me).pipe((0,$e.U)(Ct))}}function hi(Q){return null!=Q?ki(Ui(Q)):null}function sr(Q,W){return null===Q?[W]:Array.isArray(Q)?[...Q,W]:[Q,W]}function xi(Q){return Q._rawValidators}function In(Q){return Q._rawAsyncValidators}function Qn(Q){return Q?Array.isArray(Q)?Q:[Q]:[]}function ft(Q,W){return Array.isArray(Q)?Q.includes(W):Q===W}function kt(Q,W){const B=Qn(W);return Qn(Q).forEach($t=>{ft(B,$t)||B.push($t)}),B}function ln(Q,W){return Qn(W).filter(B=>!ft(Q,B))}class gn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=Rn(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=hi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W){this.control&&this.control.reset(W)}hasError(W,B){return!!this.control&&this.control.hasError(W,B)}getError(W,B){return this.control?this.control.getError(W,B):null}}class Bn extends gn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jn extends gn{get formDirective(){return null}get path(){return null}}let qn=(()=>{class Q extends class Bi{constructor(W){this._cd=W}is(W){var B,Me,$t;return"submitted"===W?!!(null===(B=this._cd)||void 0===B?void 0:B.submitted):!!(null===($t=null===(Me=this._cd)||void 0===Me?void 0:Me.control)||void 0===$t?void 0:$t[W])}}{constructor(B){super(B)}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(Bn,2))},Q.\u0275dir=D.lG2({type:Q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(B,Me){2&B&&D.ekj("ng-untouched",Me.is("untouched"))("ng-touched",Me.is("touched"))("ng-pristine",Me.is("pristine"))("ng-dirty",Me.is("dirty"))("ng-valid",Me.is("valid"))("ng-invalid",Me.is("invalid"))("ng-pending",Me.is("pending"))},features:[D.qOj]}),Q})();function Zt(Q,W){Rt(Q,W),W.valueAccessor.writeValue(Q.value),function we(Q,W){W.valueAccessor.registerOnChange(B=>{Q._pendingValue=B,Q._pendingChange=!0,Q._pendingDirty=!0,"change"===Q.updateOn&&ye(Q,W)})}(Q,W),function dt(Q,W){const B=(Me,$t)=>{W.valueAccessor.writeValue(Me),$t&&W.viewToModelUpdate(Me)};Q.registerOnChange(B),W._registerOnDestroy(()=>{Q._unregisterOnChange(B)})}(Q,W),function Ae(Q,W){W.valueAccessor.registerOnTouched(()=>{Q._pendingTouched=!0,"blur"===Q.updateOn&&Q._pendingChange&&ye(Q,W),"submit"!==Q.updateOn&&Q.markAsTouched()})}(Q,W),function Vn(Q,W){if(W.valueAccessor.setDisabledState){const B=Me=>{W.valueAccessor.setDisabledState(Me)};Q.registerOnDisabledChange(B),W._registerOnDestroy(()=>{Q._unregisterOnDisabledChange(B)})}}(Q,W)}function Oi(Q,W,B=!0){const Me=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(Me),W.valueAccessor.registerOnTouched(Me)),pt(Q,W),Q&&(W._invokeOnDestroyCallbacks(),Q._registerOnCollectionChange(()=>{}))}function Wn(Q,W){Q.forEach(B=>{B.registerOnValidatorChange&&B.registerOnValidatorChange(W)})}function Rt(Q,W){const B=xi(Q);null!==W.validator?Q.setValidators(sr(B,W.validator)):"function"==typeof B&&Q.setValidators([B]);const Me=In(Q);null!==W.asyncValidator?Q.setAsyncValidators(sr(Me,W.asyncValidator)):"function"==typeof Me&&Q.setAsyncValidators([Me]);const $t=()=>Q.updateValueAndValidity();Wn(W._rawValidators,$t),Wn(W._rawAsyncValidators,$t)}function pt(Q,W){let B=!1;if(null!==Q){if(null!==W.validator){const $t=xi(Q);if(Array.isArray($t)&&$t.length>0){const fi=$t.filter(gr=>gr!==W.validator);fi.length!==$t.length&&(B=!0,Q.setValidators(fi))}}if(null!==W.asyncValidator){const $t=In(Q);if(Array.isArray($t)&&$t.length>0){const fi=$t.filter(gr=>gr!==W.asyncValidator);fi.length!==$t.length&&(B=!0,Q.setAsyncValidators(fi))}}}const Me=()=>{};return Wn(W._rawValidators,Me),Wn(W._rawAsyncValidators,Me),B}function ye(Q,W){Q._pendingDirty&&Q.markAsDirty(),Q.setValue(Q._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(Q._pendingValue),Q._pendingChange=!1}function It(Q,W){Rt(Q,W)}function it(Q,W){Q._syncPendingControls(),W.forEach(B=>{const Me=B.control;"submit"===Me.updateOn&&Me._pendingChange&&(B.viewToModelUpdate(Me._pendingValue),Me._pendingChange=!1)})}function F(Q,W){const B=Q.indexOf(W);B>-1&&Q.splice(B,1)}const De="VALID",ke="INVALID",Je="PENDING",We="DISABLED";function st(Q){return(jt(Q)?Q.validators:Q)||null}function Lt(Q){return Array.isArray(Q)?Rn(Q):Q||null}function tn(Q,W){return(jt(W)?W.asyncValidators:Q)||null}function Ft(Q){return Array.isArray(Q)?hi(Q):Q||null}function jt(Q){return null!=Q&&!Array.isArray(Q)&&"object"==typeof Q}const sn=Q=>Q instanceof pi,En=Q=>Q instanceof rr;function Li(Q){return sn(Q)?Q.value:Q.getRawValue()}function li(Q,W){const B=En(Q),Me=Q.controls;if(!(B?Object.keys(Me):Me).length)throw new D.vHH(1e3,"");if(!Me[W])throw new D.vHH(1001,"")}function Ci(Q,W){En(Q),Q._forEachChild((Me,$t)=>{if(void 0===W[$t])throw new D.vHH(1002,"")})}class Pn{constructor(W,B){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=W,this._rawAsyncValidators=B,this._composedValidatorFn=Lt(this._rawValidators),this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===De}get invalid(){return this.status===ke}get pending(){return this.status==Je}get disabled(){return this.status===We}get enabled(){return this.status!==We}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._rawValidators=W,this._composedValidatorFn=Lt(W)}setAsyncValidators(W){this._rawAsyncValidators=W,this._composedAsyncValidatorFn=Ft(W)}addValidators(W){this.setValidators(kt(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(kt(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(ln(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(ln(W,this._rawAsyncValidators))}hasValidator(W){return ft(this._rawValidators,W)}hasAsyncValidator(W){return ft(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(B=>{B.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(B=>{B.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=Je,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const B=this._parentMarkedDirty(W.onlySelf);this.status=We,this.errors=null,this._forEachChild(Me=>{Me.disable(Object.assign(Object.assign({},W),{onlySelf:!0}))}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},W),{skipPristineCheck:B})),this._onDisabledChange.forEach(Me=>Me(!0))}enable(W={}){const B=this._parentMarkedDirty(W.onlySelf);this.status=De,this._forEachChild(Me=>{Me.enable(Object.assign(Object.assign({},W),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},W),{skipPristineCheck:B})),this._onDisabledChange.forEach(Me=>Me(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===De||this.status===Je)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(B=>B._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?We:De}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=Je,this._hasOwnPendingAsyncValidator=!0;const B=Kt(this.asyncValidator(this));this._asyncValidationSubscription=B.subscribe(Me=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Me,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,B={}){this.errors=W,this._updateControlsErrors(!1!==B.emitEvent)}get(W){return function Xe(Q,W,B){if(null==W||(Array.isArray(W)||(W=W.split(B)),Array.isArray(W)&&0===W.length))return null;let Me=Q;return W.forEach($t=>{Me=En(Me)?Me.controls.hasOwnProperty($t)?Me.controls[$t]:null:(Q=>Q instanceof An)(Me)&&Me.at($t)||null}),Me}(this,W,".")}getError(W,B){const Me=B?this.get(B):this;return Me&&Me.errors?Me.errors[W]:null}hasError(W,B){return!!this.getError(W,B)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new D.vpe,this.statusChanges=new D.vpe}_calculateStatus(){return this._allControlsDisabled()?We:this.errors?ke:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Je)?Je:this._anyControlsHaveStatus(ke)?ke:De}_anyControlsHaveStatus(W){return this._anyControls(B=>B.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_isBoxedValue(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){jt(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pi extends Pn{constructor(W=null,B,Me){super(st(B),tn(Me,B)),this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(B),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(W,B={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==B.emitModelToViewChange&&this._onChange.forEach(Me=>Me(this.value,!1!==B.emitViewToModelChange)),this.updateValueAndValidity(B)}patchValue(W,B={}){this.setValue(W,B)}reset(W=null,B={}){this._applyFormState(W),this.markAsPristine(B),this.markAsUntouched(B),this.setValue(this.value,B),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){F(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){F(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){this._isBoxedValue(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}}class rr extends Pn{constructor(W,B,Me){super(st(B),tn(Me,B)),this.controls=W,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,B){return this.controls[W]?this.controls[W]:(this.controls[W]=B,B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange),B)}addControl(W,B,Me={}){this.registerControl(W,B),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}removeControl(W,B={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}setControl(W,B,Me={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],B&&this.registerControl(W,B),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,B={}){Ci(this,W),Object.keys(W).forEach(Me=>{li(this,Me),this.controls[Me].setValue(W[Me],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(W,B={}){null!=W&&(Object.keys(W).forEach(Me=>{this.controls[Me]&&this.controls[Me].patchValue(W[Me],{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(W={},B={}){this._forEachChild((Me,$t)=>{Me.reset(W[$t],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this._reduceChildren({},(W,B,Me)=>(W[Me]=Li(B),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(B,Me)=>!!Me._syncPendingControls()||B);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(B=>{const Me=this.controls[B];Me&&W(Me,B)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const B of Object.keys(this.controls)){const Me=this.controls[B];if(this.contains(B)&&W(Me))return!0}return!1}_reduceValue(){return this._reduceChildren({},(W,B,Me)=>((B.enabled||this.disabled)&&(W[Me]=B.value),W))}_reduceChildren(W,B){let Me=W;return this._forEachChild(($t,fi)=>{Me=B(Me,$t,fi)}),Me}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class An extends Pn{constructor(W,B,Me){super(st(B),tn(Me,B)),this.controls=W,this._initObservables(),this._setUpdateStrategy(B),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(W){return this.controls[W]}push(W,B={}){this.controls.push(W),this._registerControl(W),this.updateValueAndValidity({emitEvent:B.emitEvent}),this._onCollectionChange()}insert(W,B,Me={}){this.controls.splice(W,0,B),this._registerControl(B),this.updateValueAndValidity({emitEvent:Me.emitEvent})}removeAt(W,B={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),this.controls.splice(W,1),this.updateValueAndValidity({emitEvent:B.emitEvent})}setControl(W,B,Me={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),this.controls.splice(W,1),B&&(this.controls.splice(W,0,B),this._registerControl(B)),this.updateValueAndValidity({emitEvent:Me.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(W,B={}){Ci(this,W),W.forEach((Me,$t)=>{li(this,$t),this.at($t).setValue(Me,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B)}patchValue(W,B={}){null!=W&&(W.forEach((Me,$t)=>{this.at($t)&&this.at($t).patchValue(Me,{onlySelf:!0,emitEvent:B.emitEvent})}),this.updateValueAndValidity(B))}reset(W=[],B={}){this._forEachChild((Me,$t)=>{Me.reset(W[$t],{onlySelf:!0,emitEvent:B.emitEvent})}),this._updatePristine(B),this._updateTouched(B),this.updateValueAndValidity(B)}getRawValue(){return this.controls.map(W=>Li(W))}clear(W={}){this.controls.length<1||(this._forEachChild(B=>B._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:W.emitEvent}))}_syncPendingControls(){let W=this.controls.reduce((B,Me)=>!!Me._syncPendingControls()||B,!1);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){this.controls.forEach((B,Me)=>{W(B,Me)})}_updateValue(){this.value=this.controls.filter(W=>W.enabled||this.disabled).map(W=>W.value)}_anyControls(W){return this.controls.some(B=>B.enabled&&W(B))}_setUpControls(){this._forEachChild(W=>this._registerControl(W))}_allControlsDisabled(){for(const W of this.controls)if(W.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(W){W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)}}const br={provide:Jn,useExisting:(0,D.Gpc)(()=>Qo)},pr=(()=>Promise.resolve(null))();let Qo=(()=>{class Q extends Jn{constructor(B,Me){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new D.vpe,this.form=new rr({},Rn(B),hi(Me))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(B){pr.then(()=>{const Me=this._findContainer(B.path);B.control=Me.registerControl(B.name,B.control),Zt(B.control,B),B.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(B)})}getControl(B){return this.form.get(B.path)}removeControl(B){pr.then(()=>{const Me=this._findContainer(B.path);Me&&Me.removeControl(B.name),F(this._directives,B)})}addFormGroup(B){pr.then(()=>{const Me=this._findContainer(B.path),$t=new rr({});It($t,B),Me.registerControl(B.name,$t),$t.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(B){pr.then(()=>{const Me=this._findContainer(B.path);Me&&Me.removeControl(B.name)})}getFormGroup(B){return this.form.get(B.path)}updateModel(B,Me){pr.then(()=>{this.form.get(B.path).setValue(Me)})}setValue(B){this.control.setValue(B)}onSubmit(B){return this.submitted=!0,it(this.form,this._directives),this.ngSubmit.emit(B),!1}onReset(){this.resetForm()}resetForm(B){this.form.reset(B),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(B){return B.pop(),B.length?this.form.get(B):this.form}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(He,10),D.Y36(Vt,10))},Q.\u0275dir=D.lG2({type:Q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(B,Me){1&B&&D.NdJ("submit",function(fi){return Me.onSubmit(fi)})("reset",function(){return Me.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([br]),D.qOj]}),Q})();const Zo={provide:Bn,useExisting:(0,D.Gpc)(()=>Zr)},Rr=(()=>Promise.resolve(null))();let Zr=(()=>{class Q extends Bn{constructor(B,Me,$t,fi){super(),this.control=new pi,this._registered=!1,this.update=new D.vpe,this._parent=B,this._setValidators(Me),this._setAsyncValidators($t),this.valueAccessor=function J(Q,W){if(!W)return null;let B,Me,$t;return Array.isArray(W),W.forEach(fi=>{fi.constructor===Ye?B=fi:function Tt(Q){return Object.getPrototypeOf(Q.constructor)===Oe}(fi)?Me=fi:$t=fi}),$t||Me||B||null}(0,fi)}ngOnChanges(B){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in B&&this._updateDisabled(B),function er(Q,W){if(!Q.hasOwnProperty("model"))return!1;const B=Q.model;return!!B.isFirstChange()||!Object.is(W,B.currentValue)}(B,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function hn(Q,W){return[...W.path,Q]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(B){this.viewModel=B,this.update.emit(B)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(B){Rr.then(()=>{this.control.setValue(B,{emitViewToModelChange:!1})})}_updateDisabled(B){const Me=B.isDisabled.currentValue,$t=""===Me||Me&&"false"!==Me;Rr.then(()=>{$t&&!this.control.disabled?this.control.disable():!$t&&this.control.disabled&&this.control.enable()})}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(Jn,9),D.Y36(He,10),D.Y36(Vt,10),D.Y36(Le,10))},Q.\u0275dir=D.lG2({type:Q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[D._Bn([Zo]),D.qOj,D.TTD]}),Q})(),ds=(()=>{class Q{}return Q.\u0275fac=function(B){return new(B||Q)},Q.\u0275mod=D.oAB({type:Q}),Q.\u0275inj=D.cJS({}),Q})();const Vs={provide:Jn,useExisting:(0,D.Gpc)(()=>Ts)};let Ts=(()=>{class Q extends Jn{constructor(B,Me){super(),this.validators=B,this.asyncValidators=Me,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new D.vpe,this._setValidators(B),this._setAsyncValidators(Me)}ngOnChanges(B){this._checkFormPresent(),B.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(B){const Me=this.form.get(B.path);return Zt(Me,B),Me.updateValueAndValidity({emitEvent:!1}),this.directives.push(B),Me}getControl(B){return this.form.get(B.path)}removeControl(B){Oi(B.control||null,B,!1),F(this.directives,B)}addFormGroup(B){this._setUpFormContainer(B)}removeFormGroup(B){this._cleanUpFormContainer(B)}getFormGroup(B){return this.form.get(B.path)}addFormArray(B){this._setUpFormContainer(B)}removeFormArray(B){this._cleanUpFormContainer(B)}getFormArray(B){return this.form.get(B.path)}updateModel(B,Me){this.form.get(B.path).setValue(Me)}onSubmit(B){return this.submitted=!0,it(this.form,this.directives),this.ngSubmit.emit(B),!1}onReset(){this.resetForm()}resetForm(B){this.form.reset(B),this.submitted=!1}_updateDomValue(){this.directives.forEach(B=>{const Me=B.control,$t=this.form.get(B.path);Me!==$t&&(Oi(Me||null,B),sn($t)&&(Zt($t,B),B.control=$t))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(B){const Me=this.form.get(B.path);It(Me,B),Me.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(B){if(this.form){const Me=this.form.get(B.path);Me&&function xn(Q,W){return pt(Q,W)}(Me,B)&&Me.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rt(this.form,this),this._oldForm&&pt(this._oldForm,this)}_checkFormPresent(){}}return Q.\u0275fac=function(B){return new(B||Q)(D.Y36(He,10),D.Y36(Vt,10))},Q.\u0275dir=D.lG2({type:Q,selectors:[["","formGroup",""]],hostBindings:function(B,Me){1&B&&D.NdJ("submit",function(fi){return Me.onSubmit(fi)})("reset",function(){return Me.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[D._Bn([Vs]),D.qOj,D.TTD]}),Q})();const Ls={provide:He,useExisting:(0,D.Gpc)(()=>is),multi:!0},ho={provide:He,useExisting:(0,D.Gpc)(()=>Ps),multi:!0};let is=(()=>{class Q{constructor(){this._required=!1}get required(){return this._required}set required(B){this._required=null!=B&&!1!==B&&"false"!=`${B}`,this._onChange&&this._onChange()}validate(B){return this.required?rt(B):null}registerOnValidatorChange(B){this._onChange=B}}return Q.\u0275fac=function(B){return new(B||Q)},Q.\u0275dir=D.lG2({type:Q,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(B,Me){2&B&&D.uIk("required",Me.required?"":null)},inputs:{required:"required"},features:[D._Bn([Ls])]}),Q})(),Ps=(()=>{class Q extends is{validate(B){return this.required?nn(B):null}}return Q.\u0275fac=function(){let W;return function(Me){return(W||(W=D.n5z(Q)))(Me||Q)}}(),Q.\u0275dir=D.lG2({type:Q,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(B,Me){2&B&&D.uIk("required",Me.required?"":null)},features:[D._Bn([ho]),D.qOj]}),Q})(),un=(()=>{class Q{}return Q.\u0275fac=function(B){return new(B||Q)},Q.\u0275mod=D.oAB({type:Q}),Q.\u0275inj=D.cJS({imports:[[ds]]}),Q})(),Mn=(()=>{class Q{}return Q.\u0275fac=function(B){return new(B||Q)},Q.\u0275mod=D.oAB({type:Q}),Q.\u0275inj=D.cJS({imports:[un]}),Q})()},7423:(On,wt,V)=>{"use strict";V.d(wt,{zs:()=>Be,lW:()=>Ze,ot:()=>gt});var D=V(5e3),l=V(508),q=V(6360),g=V(5664);const $e=["mat-button",""],Ke=["*"],he=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Ve=(0,l.pj)((0,l.Id)((0,l.Kr)(class{constructor(Ye){this._elementRef=Ye}})));let Ze=(()=>{class Ye extends Ve{constructor(Mt,He,Vt){super(Mt),this._focusMonitor=He,this._animationMode=Vt,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ht of he)this._hasHostAttributes(Ht)&&this._getHostElement().classList.add(Ht);Mt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Mt,He){Mt?this._focusMonitor.focusVia(this._getHostElement(),Mt,He):this._getHostElement().focus(He)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Mt){return Mt.some(He=>this._getHostElement().hasAttribute(He))}}return Ye.\u0275fac=function(Mt){return new(Mt||Ye)(D.Y36(D.SBq),D.Y36(g.tE),D.Y36(q.Qb,8))},Ye.\u0275cmp=D.Xpm({type:Ye,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Mt,He){if(1&Mt&&D.Gf(l.wG,5),2&Mt){let Vt;D.iGM(Vt=D.CRH())&&(He.ripple=Vt.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Mt,He){2&Mt&&(D.uIk("disabled",He.disabled||null),D.ekj("_mat-animation-noopable","NoopAnimations"===He._animationMode)("mat-button-disabled",He.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[D.qOj],attrs:$e,ngContentSelectors:Ke,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Mt,He){1&Mt&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1),D._UZ(3,"span",2)),2&Mt&&(D.xp6(2),D.ekj("mat-button-ripple-round",He.isRoundButton||He.isIconButton),D.Q6J("matRippleDisabled",He._isRippleDisabled())("matRippleCentered",He.isIconButton)("matRippleTrigger",He._getHostElement()))},directives:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ye})(),Be=(()=>{class Ye extends Ze{constructor(Mt,He,Vt,Ht){super(He,Mt,Vt),this._ngZone=Ht,this._haltDisabledEvents=an=>{this.disabled&&(an.preventDefault(),an.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}return Ye.\u0275fac=function(Mt){return new(Mt||Ye)(D.Y36(g.tE),D.Y36(D.SBq),D.Y36(q.Qb,8),D.Y36(D.R0b,8))},Ye.\u0275cmp=D.Xpm({type:Ye,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(Mt,He){2&Mt&&(D.uIk("tabindex",He.disabled?-1:He.tabIndex||0)("disabled",He.disabled||null)("aria-disabled",He.disabled.toString()),D.ekj("_mat-animation-noopable","NoopAnimations"===He._animationMode)("mat-button-disabled",He.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[D.qOj],attrs:$e,ngContentSelectors:Ke,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Mt,He){1&Mt&&(D.F$t(),D.TgZ(0,"span",0),D.Hsn(1),D.qZA(),D._UZ(2,"span",1),D._UZ(3,"span",2)),2&Mt&&(D.xp6(2),D.ekj("mat-button-ripple-round",He.isRoundButton||He.isIconButton),D.Q6J("matRippleDisabled",He._isRippleDisabled())("matRippleCentered",He.isIconButton)("matRippleTrigger",He._getHostElement()))},directives:[l.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ye})(),gt=(()=>{class Ye{}return Ye.\u0275fac=function(Mt){return new(Mt||Ye)},Ye.\u0275mod=D.oAB({type:Ye}),Ye.\u0275inj=D.cJS({imports:[[l.si,l.BQ],l.BQ]}),Ye})()},508:(On,wt,V)=>{"use strict";V.d(wt,{rD:()=>ft,K7:()=>_n,HF:()=>nt,BQ:()=>rt,X2:()=>kt,uc:()=>Bn,ey:()=>Zt,Ng:()=>Vn,nP:()=>ie,us:()=>fe,wG:()=>R,si:()=>N,CB:()=>Oi,jH:()=>Wn,pj:()=>mt,Kr:()=>lt,Id:()=>at,FD:()=>Kt,dB:()=>Ct,sb:()=>At,E0:()=>ln});var D=V(5e3),l=V(226),g=V(9808),$e=V(925),Ke=V(5664),Oe=V(3191),Le=V(7579),he=V(8306),Ve=V(8675),Ze=V(6360),Be=V(1159);function tt(Rt,pt){if(1&Rt&&D._UZ(0,"mat-pseudo-checkbox",4),2&Rt){const we=D.oxw();D.Q6J("state",we.selected?"checked":"unchecked")("disabled",we.disabled)}}function Mt(Rt,pt){if(1&Rt&&(D.TgZ(0,"span",5),D._uU(1),D.qZA()),2&Rt){const we=D.oxw();D.xp6(1),D.hij("(",we.group.label,")")}}const He=["*"],Fe=new D.OlP("mat-sanity-checks",{providedIn:"root",factory:function Dt(){return!0}});let rt=(()=>{class Rt{constructor(we,Ae,ye){this._sanityChecks=Ae,this._document=ye,this._hasDoneGlobalChecks=!1,we._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(we){return!(0,$e.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[we])}}return Rt.\u0275fac=function(we){return new(we||Rt)(D.LFG(Ke.qm),D.LFG(Fe,8),D.LFG(g.K0))},Rt.\u0275mod=D.oAB({type:Rt}),Rt.\u0275inj=D.cJS({imports:[[l.vT],l.vT]}),Rt})();function at(Rt){return class extends Rt{constructor(...pt){super(...pt),this._disabled=!1}get disabled(){return this._disabled}set disabled(pt){this._disabled=(0,Oe.Ig)(pt)}}}function mt(Rt,pt){return class extends Rt{constructor(...we){super(...we),this.defaultColor=pt,this.color=pt}get color(){return this._color}set color(we){const Ae=we||this.defaultColor;Ae!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),Ae&&this._elementRef.nativeElement.classList.add(`mat-${Ae}`),this._color=Ae)}}}function lt(Rt){return class extends Rt{constructor(...pt){super(...pt),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(pt){this._disableRipple=(0,Oe.Ig)(pt)}}}function At(Rt,pt=0){return class extends Rt{constructor(...we){super(...we),this._tabIndex=pt,this.defaultTabIndex=pt}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(we){this._tabIndex=null!=we?(0,Oe.su)(we):this.defaultTabIndex}}}function Kt(Rt){return class extends Rt{constructor(...pt){super(...pt),this.stateChanges=new Le.x,this.errorState=!1}updateErrorState(){const pt=this.errorState,dt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);dt!==pt&&(this.errorState=dt,this.stateChanges.next())}}}function Ct(Rt){return class extends Rt{constructor(...pt){super(...pt),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new he.y(we=>{this._isInitialized?this._notifySubscriber(we):this._pendingSubscribers.push(we)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(pt){pt.next(),pt.complete()}}}let ft=(()=>{class Rt{isErrorState(we,Ae){return!!(we&&we.invalid&&(we.touched||Ae&&Ae.submitted))}}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275prov=D.Yz7({token:Rt,factory:Rt.\u0275fac,providedIn:"root"}),Rt})(),kt=(()=>{class Rt{}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275dir=D.lG2({type:Rt,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Rt})();function ln(Rt,pt,we="mat"){Rt.changes.pipe((0,Ve.O)(Rt)).subscribe(({length:Ae})=>{gn(pt,`${we}-2-line`,!1),gn(pt,`${we}-3-line`,!1),gn(pt,`${we}-multi-line`,!1),2===Ae||3===Ae?gn(pt,`${we}-${Ae}-line`,!0):Ae>3&&gn(pt,`${we}-multi-line`,!0)})}function gn(Rt,pt,we){Rt.nativeElement.classList.toggle(pt,we)}let Bn=(()=>{class Rt{}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275mod=D.oAB({type:Rt}),Rt.\u0275inj=D.cJS({imports:[[rt],rt]}),Rt})();class Jn{constructor(pt,we,Ae){this._renderer=pt,this.element=we,this.config=Ae,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Bi={enterDuration:225,exitDuration:150},_i=(0,$e.i$)({passive:!0}),qn=["mousedown","touchstart"],Xn=["mouseup","mouseleave","touchend","touchcancel"];class Zn{constructor(pt,we,Ae,ye){this._target=pt,this._ngZone=we,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,ye.isBrowser&&(this._containerElement=(0,Oe.fI)(Ae))}fadeInRipple(pt,we,Ae={}){const ye=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),dt=Object.assign(Object.assign({},Bi),Ae.animation);Ae.centered&&(pt=ye.left+ye.width/2,we=ye.top+ye.height/2);const It=Ae.radius||function $(Rt,pt,we){const Ae=Math.max(Math.abs(Rt-we.left),Math.abs(Rt-we.right)),ye=Math.max(Math.abs(pt-we.top),Math.abs(pt-we.bottom));return Math.sqrt(Ae*Ae+ye*ye)}(pt,we,ye),xn=pt-ye.left,Ei=we-ye.top,Gi=dt.enterDuration,er=document.createElement("div");er.classList.add("mat-ripple-element"),er.style.left=xn-It+"px",er.style.top=Ei-It+"px",er.style.height=2*It+"px",er.style.width=2*It+"px",null!=Ae.color&&(er.style.backgroundColor=Ae.color),er.style.transitionDuration=`${Gi}ms`,this._containerElement.appendChild(er),function St(Rt){window.getComputedStyle(Rt).getPropertyValue("opacity")}(er),er.style.transform="scale(1)";const Tt=new Jn(this,er,Ae);return Tt.state=0,this._activeRipples.add(Tt),Ae.persistent||(this._mostRecentTransientRipple=Tt),this._runTimeoutOutsideZone(()=>{const it=Tt===this._mostRecentTransientRipple;Tt.state=1,!Ae.persistent&&(!it||!this._isPointerDown)&&Tt.fadeOut()},Gi),Tt}fadeOutRipple(pt){const we=this._activeRipples.delete(pt);if(pt===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!we)return;const Ae=pt.element,ye=Object.assign(Object.assign({},Bi),pt.config.animation);Ae.style.transitionDuration=`${ye.exitDuration}ms`,Ae.style.opacity="0",pt.state=2,this._runTimeoutOutsideZone(()=>{pt.state=3,Ae.remove()},ye.exitDuration)}fadeOutAll(){this._activeRipples.forEach(pt=>pt.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(pt=>{pt.config.persistent||pt.fadeOut()})}setupTriggerEvents(pt){const we=(0,Oe.fI)(pt);!we||we===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=we,this._registerEvents(qn))}handleEvent(pt){"mousedown"===pt.type?this._onMousedown(pt):"touchstart"===pt.type?this._onTouchStart(pt):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Xn),this._pointerUpEventsRegistered=!0)}_onMousedown(pt){const we=(0,Ke.X6)(pt),Ae=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!we&&!Ae&&(this._isPointerDown=!0,this.fadeInRipple(pt.clientX,pt.clientY,this._target.rippleConfig))}_onTouchStart(pt){if(!this._target.rippleDisabled&&!(0,Ke.yG)(pt)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const we=pt.changedTouches;for(let Ae=0;Ae<we.length;Ae++)this.fadeInRipple(we[Ae].clientX,we[Ae].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(pt=>{!pt.config.persistent&&(1===pt.state||pt.config.terminateOnPointerUp&&0===pt.state)&&pt.fadeOut()}))}_runTimeoutOutsideZone(pt,we=0){this._ngZone.runOutsideAngular(()=>setTimeout(pt,we))}_registerEvents(pt){this._ngZone.runOutsideAngular(()=>{pt.forEach(we=>{this._triggerElement.addEventListener(we,this,_i)})})}_removeTriggerEvents(){this._triggerElement&&(qn.forEach(pt=>{this._triggerElement.removeEventListener(pt,this,_i)}),this._pointerUpEventsRegistered&&Xn.forEach(pt=>{this._triggerElement.removeEventListener(pt,this,_i)}))}}const U=new D.OlP("mat-ripple-global-options");let R=(()=>{class Rt{constructor(we,Ae,ye,dt,It){this._elementRef=we,this._animationMode=It,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=dt||{},this._rippleRenderer=new Zn(this,Ae,we,ye)}get disabled(){return this._disabled}set disabled(we){we&&this.fadeOutAllNonPersistent(),this._disabled=we,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(we){this._trigger=we,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(we,Ae=0,ye){return"number"==typeof we?this._rippleRenderer.fadeInRipple(we,Ae,Object.assign(Object.assign({},this.rippleConfig),ye)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),we))}}return Rt.\u0275fac=function(we){return new(we||Rt)(D.Y36(D.SBq),D.Y36(D.R0b),D.Y36($e.t4),D.Y36(U,8),D.Y36(Ze.Qb,8))},Rt.\u0275dir=D.lG2({type:Rt,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(we,Ae){2&we&&D.ekj("mat-ripple-unbounded",Ae.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Rt})(),N=(()=>{class Rt{}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275mod=D.oAB({type:Rt}),Rt.\u0275inj=D.cJS({imports:[[rt,$e.ud],rt]}),Rt})(),ie=(()=>{class Rt{constructor(we){this._animationMode=we,this.state="unchecked",this.disabled=!1}}return Rt.\u0275fac=function(we){return new(we||Rt)(D.Y36(Ze.Qb,8))},Rt.\u0275cmp=D.Xpm({type:Rt,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(we,Ae){2&we&&D.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===Ae.state)("mat-pseudo-checkbox-checked","checked"===Ae.state)("mat-pseudo-checkbox-disabled",Ae.disabled)("_mat-animation-noopable","NoopAnimations"===Ae._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(we,Ae){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Rt})(),fe=(()=>{class Rt{}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275mod=D.oAB({type:Rt}),Rt.\u0275inj=D.cJS({imports:[[rt]]}),Rt})();const nt=new D.OlP("MAT_OPTION_PARENT_COMPONENT"),_n=new D.OlP("MatOptgroup");let Fi=0;class Jt{constructor(pt,we=!1){this.source=pt,this.isUserInput=we}}let hn=(()=>{class Rt{constructor(we,Ae,ye,dt){this._element=we,this._changeDetectorRef=Ae,this._parent=ye,this.group=dt,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Fi++,this.onSelectionChange=new D.vpe,this._stateChanges=new Le.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(we){this._disabled=(0,Oe.Ig)(we)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(we,Ae){const ye=this._getHostElement();"function"==typeof ye.focus&&ye.focus(Ae)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(we){(we.keyCode===Be.K5||we.keyCode===Be.L_)&&!(0,Be.Vb)(we)&&(this._selectViaInteraction(),we.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const we=this.viewValue;we!==this._mostRecentViewValue&&(this._mostRecentViewValue=we,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(we=!1){this.onSelectionChange.emit(new Jt(this,we))}}return Rt.\u0275fac=function(we){D.$Z()},Rt.\u0275dir=D.lG2({type:Rt,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Rt})(),Zt=(()=>{class Rt extends hn{constructor(we,Ae,ye,dt){super(we,Ae,ye,dt)}}return Rt.\u0275fac=function(we){return new(we||Rt)(D.Y36(D.SBq),D.Y36(D.sBO),D.Y36(nt,8),D.Y36(_n,8))},Rt.\u0275cmp=D.Xpm({type:Rt,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(we,Ae){1&we&&D.NdJ("click",function(){return Ae._selectViaInteraction()})("keydown",function(dt){return Ae._handleKeydown(dt)}),2&we&&(D.Ikx("id",Ae.id),D.uIk("tabindex",Ae._getTabIndex())("aria-selected",Ae._getAriaSelected())("aria-disabled",Ae.disabled.toString()),D.ekj("mat-selected",Ae.selected)("mat-option-multiple",Ae.multiple)("mat-active",Ae.active)("mat-option-disabled",Ae.disabled))},exportAs:["matOption"],features:[D.qOj],ngContentSelectors:He,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(we,Ae){1&we&&(D.F$t(),D.YNc(0,tt,1,2,"mat-pseudo-checkbox",0),D.TgZ(1,"span",1),D.Hsn(2),D.qZA(),D.YNc(3,Mt,2,1,"span",2),D._UZ(4,"div",3)),2&we&&(D.Q6J("ngIf",Ae.multiple),D.xp6(3),D.Q6J("ngIf",Ae.group&&Ae.group._inert),D.xp6(1),D.Q6J("matRippleTrigger",Ae._getHostElement())("matRippleDisabled",Ae.disabled||Ae.disableRipple))},directives:[ie,g.O5,R],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Rt})();function Oi(Rt,pt,we){if(we.length){let Ae=pt.toArray(),ye=we.toArray(),dt=0;for(let It=0;It<Rt+1;It++)Ae[It].group&&Ae[It].group===ye[dt]&&dt++;return dt}return 0}function Wn(Rt,pt,we,Ae){return Rt<we?Rt:Rt+pt>we+Ae?Math.max(0,Rt-Ae+pt):we}let Vn=(()=>{class Rt{}return Rt.\u0275fac=function(we){return new(we||Rt)},Rt.\u0275mod=D.oAB({type:Rt}),Rt.\u0275inj=D.cJS({imports:[[N,g.ez,rt,fe]]}),Rt})()},7322:(On,wt,V)=>{"use strict";V.d(wt,{G_:()=>Xn,KE:()=>Zn,Eo:()=>kn,lN:()=>St,R9:()=>Bn});var D=V(7144),l=V(9808),q=V(5e3),g=V(508),$e=V(3191),Ke=V(7579),Oe=V(6451),Le=V(4968),he=V(8675),Ve=V(2722),Ze=V(5698),Be=V(1777),gt=V(6360),Ye=V(226),tt=V(925);const Mt=["connectionContainer"],He=["inputContainer"],Vt=["label"];function Ht($,U){1&$&&(q.ynx(0),q.TgZ(1,"div",14),q._UZ(2,"div",15),q._UZ(3,"div",16),q._UZ(4,"div",17),q.qZA(),q.TgZ(5,"div",18),q._UZ(6,"div",15),q._UZ(7,"div",16),q._UZ(8,"div",17),q.qZA(),q.BQk())}function an($,U){if(1&$){const R=q.EpF();q.TgZ(0,"div",19),q.NdJ("cdkObserveContent",function(){return q.CHM(R),q.oxw().updateOutlineGap()}),q.Hsn(1,1),q.qZA()}if(2&$){const R=q.oxw();q.Q6J("cdkObserveContentDisabled","outline"!=R.appearance)}}function Dt($,U){if(1&$&&(q.ynx(0),q.Hsn(1,2),q.TgZ(2,"span"),q._uU(3),q.qZA(),q.BQk()),2&$){const R=q.oxw(2);q.xp6(3),q.Oqu(R._control.placeholder)}}function Fe($,U){1&$&&q.Hsn(0,3,["*ngSwitchCase","true"])}function rt($,U){1&$&&(q.TgZ(0,"span",23),q._uU(1," *"),q.qZA())}function nn($,U){if(1&$){const R=q.EpF();q.TgZ(0,"label",20,21),q.NdJ("cdkObserveContent",function(){return q.CHM(R),q.oxw().updateOutlineGap()}),q.YNc(2,Dt,4,1,"ng-container",12),q.YNc(3,Fe,1,0,"ng-content",12),q.YNc(4,rt,2,0,"span",22),q.qZA()}if(2&$){const R=q.oxw();q.ekj("mat-empty",R._control.empty&&!R._shouldAlwaysFloat())("mat-form-field-empty",R._control.empty&&!R._shouldAlwaysFloat())("mat-accent","accent"==R.color)("mat-warn","warn"==R.color),q.Q6J("cdkObserveContentDisabled","outline"!=R.appearance)("id",R._labelId)("ngSwitch",R._hasLabel()),q.uIk("for",R._control.id)("aria-owns",R._control.id),q.xp6(2),q.Q6J("ngSwitchCase",!1),q.xp6(1),q.Q6J("ngSwitchCase",!0),q.xp6(1),q.Q6J("ngIf",!R.hideRequiredMarker&&R._control.required&&!R._control.disabled)}}function Bt($,U){1&$&&(q.TgZ(0,"div",24),q.Hsn(1,4),q.qZA())}function Qt($,U){if(1&$&&(q.TgZ(0,"div",25),q._UZ(1,"span",26),q.qZA()),2&$){const R=q.oxw();q.xp6(1),q.ekj("mat-accent","accent"==R.color)("mat-warn","warn"==R.color)}}function at($,U){if(1&$&&(q.TgZ(0,"div"),q.Hsn(1,5),q.qZA()),2&$){const R=q.oxw();q.Q6J("@transitionMessages",R._subscriptAnimationState)}}function mt($,U){if(1&$&&(q.TgZ(0,"div",30),q._uU(1),q.qZA()),2&$){const R=q.oxw(2);q.Q6J("id",R._hintLabelId),q.xp6(1),q.Oqu(R.hintLabel)}}function lt($,U){if(1&$&&(q.TgZ(0,"div",27),q.YNc(1,mt,2,2,"div",28),q.Hsn(2,6),q._UZ(3,"div",29),q.Hsn(4,7),q.qZA()),2&$){const R=q.oxw();q.Q6J("@transitionMessages",R._subscriptAnimationState),q.xp6(1),q.Q6J("ngIf",R.hintLabel)}}const At=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Kt=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],yn=new q.OlP("MatError"),Ui={transitionMessages:(0,Be.X$)("transitionMessages",[(0,Be.SB)("enter",(0,Be.oB)({opacity:1,transform:"translateY(0%)"})),(0,Be.eR)("void => enter",[(0,Be.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Be.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let kn=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=q.lG2({type:$}),$})();const xi=new q.OlP("MatHint");let Qn=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=q.lG2({type:$,selectors:[["mat-label"]]}),$})(),ft=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=q.lG2({type:$,selectors:[["mat-placeholder"]]}),$})();const kt=new q.OlP("MatPrefix"),gn=new q.OlP("MatSuffix");let Bn=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275dir=q.lG2({type:$,selectors:[["","matSuffix",""]],features:[q._Bn([{provide:gn,useExisting:$}])]}),$})(),Jn=0;const _i=(0,g.pj)(class{constructor($){this._elementRef=$}},"primary"),qn=new q.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Xn=new q.OlP("MatFormField");let Zn=(()=>{class $ extends _i{constructor(R,N,ie,fe,nt,Et,_t){super(R),this._changeDetectorRef=N,this._dir=ie,this._defaults=fe,this._platform=nt,this._ngZone=Et,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Ke.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Jn++,this._labelId="mat-form-field-label-"+Jn++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_t,this.appearance=fe&&fe.appearance?fe.appearance:"legacy",this._hideRequiredMarker=!(!fe||null==fe.hideRequiredMarker)&&fe.hideRequiredMarker}get appearance(){return this._appearance}set appearance(R){const N=this._appearance;this._appearance=R||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&N!==R&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(R){this._hideRequiredMarker=(0,$e.Ig)(R)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(R){this._hintLabel=R,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(R){R!==this._floatLabel&&(this._floatLabel=R||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(R){this._explicitFormFieldControl=R}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const R=this._control;R.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${R.controlType}`),R.stateChanges.pipe((0,he.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),R.ngControl&&R.ngControl.valueChanges&&R.ngControl.valueChanges.pipe((0,Ve.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Ve.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Oe.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,he.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,he.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,Ve.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(R){const N=this._control?this._control.ngControl:null;return N&&N[R]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,Le.R)(this._label.nativeElement,"transitionend").pipe((0,Ze.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let R=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&R.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const N=this._hintChildren?this._hintChildren.find(fe=>"start"===fe.align):null,ie=this._hintChildren?this._hintChildren.find(fe=>"end"===fe.align):null;N?R.push(N.id):this._hintLabel&&R.push(this._hintLabelId),ie&&R.push(ie.id)}else this._errorChildren&&R.push(...this._errorChildren.map(N=>N.id));this._control.setDescribedByIds(R)}}_validateControlChild(){}updateOutlineGap(){const R=this._label?this._label.nativeElement:null,N=this._connectionContainerRef.nativeElement,ie=".mat-form-field-outline-start",fe=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!R||!R.children.length||!R.textContent.trim()){const _n=N.querySelectorAll(`${ie}, ${fe}`);for(let Hn=0;Hn<_n.length;Hn++)_n[Hn].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let nt=0,Et=0;const _t=N.querySelectorAll(ie),fn=N.querySelectorAll(fe);if(this._label&&this._label.nativeElement.children.length){const _n=N.getBoundingClientRect();if(0===_n.width&&0===_n.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Hn=this._getStartEnd(_n),Fi=R.children,Jt=this._getStartEnd(Fi[0].getBoundingClientRect());let hn=0;for(let Zt=0;Zt<Fi.length;Zt++)hn+=Fi[Zt].offsetWidth;nt=Math.abs(Jt-Hn)-5,Et=hn>0?.75*hn+10:0}for(let _n=0;_n<_t.length;_n++)_t[_n].style.width=`${nt}px`;for(let _n=0;_n<fn.length;_n++)fn[_n].style.width=`${Et}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(R){return this._dir&&"rtl"===this._dir.value?R.right:R.left}_isAttachedToDOM(){const R=this._elementRef.nativeElement;if(R.getRootNode){const N=R.getRootNode();return N&&N!==R}return document.documentElement.contains(R)}}return $.\u0275fac=function(R){return new(R||$)(q.Y36(q.SBq),q.Y36(q.sBO),q.Y36(Ye.Is,8),q.Y36(qn,8),q.Y36(tt.t4),q.Y36(q.R0b),q.Y36(gt.Qb,8))},$.\u0275cmp=q.Xpm({type:$,selectors:[["mat-form-field"]],contentQueries:function(R,N,ie){if(1&R&&(q.Suo(ie,kn,5),q.Suo(ie,kn,7),q.Suo(ie,Qn,5),q.Suo(ie,Qn,7),q.Suo(ie,ft,5),q.Suo(ie,yn,5),q.Suo(ie,xi,5),q.Suo(ie,kt,5),q.Suo(ie,gn,5)),2&R){let fe;q.iGM(fe=q.CRH())&&(N._controlNonStatic=fe.first),q.iGM(fe=q.CRH())&&(N._controlStatic=fe.first),q.iGM(fe=q.CRH())&&(N._labelChildNonStatic=fe.first),q.iGM(fe=q.CRH())&&(N._labelChildStatic=fe.first),q.iGM(fe=q.CRH())&&(N._placeholderChild=fe.first),q.iGM(fe=q.CRH())&&(N._errorChildren=fe),q.iGM(fe=q.CRH())&&(N._hintChildren=fe),q.iGM(fe=q.CRH())&&(N._prefixChildren=fe),q.iGM(fe=q.CRH())&&(N._suffixChildren=fe)}},viewQuery:function(R,N){if(1&R&&(q.Gf(Mt,7),q.Gf(He,5),q.Gf(Vt,5)),2&R){let ie;q.iGM(ie=q.CRH())&&(N._connectionContainerRef=ie.first),q.iGM(ie=q.CRH())&&(N._inputContainerRef=ie.first),q.iGM(ie=q.CRH())&&(N._label=ie.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(R,N){2&R&&q.ekj("mat-form-field-appearance-standard","standard"==N.appearance)("mat-form-field-appearance-fill","fill"==N.appearance)("mat-form-field-appearance-outline","outline"==N.appearance)("mat-form-field-appearance-legacy","legacy"==N.appearance)("mat-form-field-invalid",N._control.errorState)("mat-form-field-can-float",N._canLabelFloat())("mat-form-field-should-float",N._shouldLabelFloat())("mat-form-field-has-label",N._hasFloatingLabel())("mat-form-field-hide-placeholder",N._hideControlPlaceholder())("mat-form-field-disabled",N._control.disabled)("mat-form-field-autofilled",N._control.autofilled)("mat-focused",N._control.focused)("ng-untouched",N._shouldForward("untouched"))("ng-touched",N._shouldForward("touched"))("ng-pristine",N._shouldForward("pristine"))("ng-dirty",N._shouldForward("dirty"))("ng-valid",N._shouldForward("valid"))("ng-invalid",N._shouldForward("invalid"))("ng-pending",N._shouldForward("pending"))("_mat-animation-noopable",!N._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[q._Bn([{provide:Xn,useExisting:$}]),q.qOj],ngContentSelectors:Kt,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(R,N){1&R&&(q.F$t(At),q.TgZ(0,"div",0),q.TgZ(1,"div",1,2),q.NdJ("click",function(fe){return N._control.onContainerClick&&N._control.onContainerClick(fe)}),q.YNc(3,Ht,9,0,"ng-container",3),q.YNc(4,an,2,1,"div",4),q.TgZ(5,"div",5,6),q.Hsn(7),q.TgZ(8,"span",7),q.YNc(9,nn,5,16,"label",8),q.qZA(),q.qZA(),q.YNc(10,Bt,2,0,"div",9),q.qZA(),q.YNc(11,Qt,2,4,"div",10),q.TgZ(12,"div",11),q.YNc(13,at,2,1,"div",12),q.YNc(14,lt,5,2,"div",13),q.qZA(),q.qZA()),2&R&&(q.xp6(3),q.Q6J("ngIf","outline"==N.appearance),q.xp6(1),q.Q6J("ngIf",N._prefixChildren.length),q.xp6(5),q.Q6J("ngIf",N._hasFloatingLabel()),q.xp6(1),q.Q6J("ngIf",N._suffixChildren.length),q.xp6(1),q.Q6J("ngIf","outline"!=N.appearance),q.xp6(1),q.Q6J("ngSwitch",N._getDisplayedMessages()),q.xp6(1),q.Q6J("ngSwitchCase","error"),q.xp6(1),q.Q6J("ngSwitchCase","hint"))},directives:[l.O5,D.wD,l.RF,l.n9],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Ui.transitionMessages]},changeDetection:0}),$})(),St=(()=>{class ${}return $.\u0275fac=function(R){return new(R||$)},$.\u0275mod=q.oAB({type:$}),$.\u0275inj=q.cJS({imports:[[l.ez,g.BQ,D.Q8],g.BQ]}),$})()},3874:(On,wt,V)=>{"use strict";V.d(wt,{Hw:()=>sr,Ps:()=>xi,jv:()=>mt});var D=V(5e3),l=V(508),q=V(3191),g=V(9808),$e=V(8306),Ke=V(576),Le=V(9646),he=V(4128),Ve=V(727),Ze=V(8505),Be=V(4004),gt=V(262),Ye=V(8746),tt=V(3099),Mt=V(5698),He=V(520),Vt=V(2313);const Ht=["*"];let an;function Fe(In){var Qn;return(null===(Qn=function Dt(){if(void 0===an&&(an=null,"undefined"!=typeof window)){const In=window;void 0!==In.trustedTypes&&(an=In.trustedTypes.createPolicy("angular#components",{createHTML:Qn=>Qn}))}return an}())||void 0===Qn?void 0:Qn.createHTML(In))||In}function rt(In){return Error(`Unable to find icon with the name "${In}"`)}function Bt(In){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${In}".`)}function Qt(In){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${In}".`)}class at{constructor(Qn,ft,kt){this.url=Qn,this.svgText=ft,this.options=kt}}let mt=(()=>{class In{constructor(ft,kt,ln,gn){this._httpClient=ft,this._sanitizer=kt,this._errorHandler=gn,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=ln}addSvgIcon(ft,kt,ln){return this.addSvgIconInNamespace("",ft,kt,ln)}addSvgIconLiteral(ft,kt,ln){return this.addSvgIconLiteralInNamespace("",ft,kt,ln)}addSvgIconInNamespace(ft,kt,ln,gn){return this._addSvgIconConfig(ft,kt,new at(ln,null,gn))}addSvgIconResolver(ft){return this._resolvers.push(ft),this}addSvgIconLiteralInNamespace(ft,kt,ln,gn){const Bn=this._sanitizer.sanitize(D.q3G.HTML,ln);if(!Bn)throw Qt(ln);const Jn=Fe(Bn);return this._addSvgIconConfig(ft,kt,new at("",Jn,gn))}addSvgIconSet(ft,kt){return this.addSvgIconSetInNamespace("",ft,kt)}addSvgIconSetLiteral(ft,kt){return this.addSvgIconSetLiteralInNamespace("",ft,kt)}addSvgIconSetInNamespace(ft,kt,ln){return this._addSvgIconSetConfig(ft,new at(kt,null,ln))}addSvgIconSetLiteralInNamespace(ft,kt,ln){const gn=this._sanitizer.sanitize(D.q3G.HTML,kt);if(!gn)throw Qt(kt);const Bn=Fe(gn);return this._addSvgIconSetConfig(ft,new at("",Bn,ln))}registerFontClassAlias(ft,kt=ft){return this._fontCssClassesByAlias.set(ft,kt),this}classNameForFontAlias(ft){return this._fontCssClassesByAlias.get(ft)||ft}setDefaultFontSetClass(ft){return this._defaultFontSetClass=ft,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(ft){const kt=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,ft);if(!kt)throw Bt(ft);const ln=this._cachedIconsByUrl.get(kt);return ln?(0,Le.of)(Kt(ln)):this._loadSvgIconFromConfig(new at(ft,null)).pipe((0,Ze.b)(gn=>this._cachedIconsByUrl.set(kt,gn)),(0,Be.U)(gn=>Kt(gn)))}getNamedSvgIcon(ft,kt=""){const ln=Ct(kt,ft);let gn=this._svgIconConfigs.get(ln);if(gn)return this._getSvgFromConfig(gn);if(gn=this._getIconConfigFromResolvers(kt,ft),gn)return this._svgIconConfigs.set(ln,gn),this._getSvgFromConfig(gn);const Bn=this._iconSetConfigs.get(kt);return Bn?this._getSvgFromIconSetConfigs(ft,Bn):function Oe(In,Qn){const ft=(0,Ke.m)(In)?In:()=>In,kt=ln=>ln.error(ft());return new $e.y(Qn?ln=>Qn.schedule(kt,0,ln):kt)}(rt(ln))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(ft){return ft.svgText?(0,Le.of)(Kt(this._svgElementFromConfig(ft))):this._loadSvgIconFromConfig(ft).pipe((0,Be.U)(kt=>Kt(kt)))}_getSvgFromIconSetConfigs(ft,kt){const ln=this._extractIconWithNameFromAnySet(ft,kt);if(ln)return(0,Le.of)(ln);const gn=kt.filter(Bn=>!Bn.svgText).map(Bn=>this._loadSvgIconSetFromConfig(Bn).pipe((0,gt.K)(Jn=>{const Xi=`Loading icon set URL: ${this._sanitizer.sanitize(D.q3G.RESOURCE_URL,Bn.url)} failed: ${Jn.message}`;return this._errorHandler.handleError(new Error(Xi)),(0,Le.of)(null)})));return(0,he.D)(gn).pipe((0,Be.U)(()=>{const Bn=this._extractIconWithNameFromAnySet(ft,kt);if(!Bn)throw rt(ft);return Bn}))}_extractIconWithNameFromAnySet(ft,kt){for(let ln=kt.length-1;ln>=0;ln--){const gn=kt[ln];if(gn.svgText&&gn.svgText.toString().indexOf(ft)>-1){const Bn=this._svgElementFromConfig(gn),Jn=this._extractSvgIconFromSet(Bn,ft,gn.options);if(Jn)return Jn}}return null}_loadSvgIconFromConfig(ft){return this._fetchIcon(ft).pipe((0,Ze.b)(kt=>ft.svgText=kt),(0,Be.U)(()=>this._svgElementFromConfig(ft)))}_loadSvgIconSetFromConfig(ft){return ft.svgText?(0,Le.of)(null):this._fetchIcon(ft).pipe((0,Ze.b)(kt=>ft.svgText=kt))}_extractSvgIconFromSet(ft,kt,ln){const gn=ft.querySelector(`[id="${kt}"]`);if(!gn)return null;const Bn=gn.cloneNode(!0);if(Bn.removeAttribute("id"),"svg"===Bn.nodeName.toLowerCase())return this._setSvgAttributes(Bn,ln);if("symbol"===Bn.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Bn),ln);const Jn=this._svgElementFromString(Fe("<svg></svg>"));return Jn.appendChild(Bn),this._setSvgAttributes(Jn,ln)}_svgElementFromString(ft){const kt=this._document.createElement("DIV");kt.innerHTML=ft;const ln=kt.querySelector("svg");if(!ln)throw Error("<svg> tag not found");return ln}_toSvgElement(ft){const kt=this._svgElementFromString(Fe("<svg></svg>")),ln=ft.attributes;for(let gn=0;gn<ln.length;gn++){const{name:Bn,value:Jn}=ln[gn];"id"!==Bn&&kt.setAttribute(Bn,Jn)}for(let gn=0;gn<ft.childNodes.length;gn++)ft.childNodes[gn].nodeType===this._document.ELEMENT_NODE&&kt.appendChild(ft.childNodes[gn].cloneNode(!0));return kt}_setSvgAttributes(ft,kt){return ft.setAttribute("fit",""),ft.setAttribute("height","100%"),ft.setAttribute("width","100%"),ft.setAttribute("preserveAspectRatio","xMidYMid meet"),ft.setAttribute("focusable","false"),kt&&kt.viewBox&&ft.setAttribute("viewBox",kt.viewBox),ft}_fetchIcon(ft){var kt;const{url:ln,options:gn}=ft,Bn=null!==(kt=null==gn?void 0:gn.withCredentials)&&void 0!==kt&&kt;if(!this._httpClient)throw function nn(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==ln)throw Error(`Cannot fetch icon from URL "${ln}".`);const Jn=this._sanitizer.sanitize(D.q3G.RESOURCE_URL,ln);if(!Jn)throw Bt(ln);const Bi=this._inProgressUrlFetches.get(Jn);if(Bi)return Bi;const Xi=this._httpClient.get(Jn,{responseType:"text",withCredentials:Bn}).pipe((0,Be.U)(_i=>Fe(_i)),(0,Ye.x)(()=>this._inProgressUrlFetches.delete(Jn)),(0,tt.B)());return this._inProgressUrlFetches.set(Jn,Xi),Xi}_addSvgIconConfig(ft,kt,ln){return this._svgIconConfigs.set(Ct(ft,kt),ln),this}_addSvgIconSetConfig(ft,kt){const ln=this._iconSetConfigs.get(ft);return ln?ln.push(kt):this._iconSetConfigs.set(ft,[kt]),this}_svgElementFromConfig(ft){if(!ft.svgElement){const kt=this._svgElementFromString(ft.svgText);this._setSvgAttributes(kt,ft.options),ft.svgElement=kt}return ft.svgElement}_getIconConfigFromResolvers(ft,kt){for(let ln=0;ln<this._resolvers.length;ln++){const gn=this._resolvers[ln](kt,ft);if(gn)return yn(gn)?new at(gn.url,null,gn.options):new at(gn,null)}}}return In.\u0275fac=function(ft){return new(ft||In)(D.LFG(He.eN,8),D.LFG(Vt.H7),D.LFG(g.K0,8),D.LFG(D.qLn))},In.\u0275prov=D.Yz7({token:In,factory:In.\u0275fac,providedIn:"root"}),In})();function Kt(In){return In.cloneNode(!0)}function Ct(In,Qn){return In+":"+Qn}function yn(In){return!(!In.url||!In.options)}const di=(0,l.pj)(class{constructor(In){this._elementRef=In}}),Ui=new D.OlP("mat-icon-location",{providedIn:"root",factory:function kn(){const In=(0,D.f3M)(g.K0),Qn=In?In.location:null;return{getPathname:()=>Qn?Qn.pathname+Qn.search:""}}}),Rn=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ki=Rn.map(In=>`[${In}]`).join(", "),hi=/^url\(['"]?#(.*?)['"]?\)$/;let sr=(()=>{class In extends di{constructor(ft,kt,ln,gn,Bn){super(ft),this._iconRegistry=kt,this._location=gn,this._errorHandler=Bn,this._inline=!1,this._currentIconFetch=Ve.w0.EMPTY,ln||ft.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(ft){this._inline=(0,q.Ig)(ft)}get svgIcon(){return this._svgIcon}set svgIcon(ft){ft!==this._svgIcon&&(ft?this._updateSvgIcon(ft):this._svgIcon&&this._clearSvgElement(),this._svgIcon=ft)}get fontSet(){return this._fontSet}set fontSet(ft){const kt=this._cleanupFontValue(ft);kt!==this._fontSet&&(this._fontSet=kt,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(ft){const kt=this._cleanupFontValue(ft);kt!==this._fontIcon&&(this._fontIcon=kt,this._updateFontIconClasses())}_splitIconName(ft){if(!ft)return["",""];const kt=ft.split(":");switch(kt.length){case 1:return["",kt[0]];case 2:return kt;default:throw Error(`Invalid icon name: "${ft}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const ft=this._elementsWithExternalReferences;if(ft&&ft.size){const kt=this._location.getPathname();kt!==this._previousPath&&(this._previousPath=kt,this._prependPathToReferences(kt))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(ft){this._clearSvgElement();const kt=ft.querySelectorAll("style");for(let gn=0;gn<kt.length;gn++)kt[gn].textContent+=" ";const ln=this._location.getPathname();this._previousPath=ln,this._cacheChildrenWithExternalReferences(ft),this._prependPathToReferences(ln),this._elementRef.nativeElement.appendChild(ft)}_clearSvgElement(){const ft=this._elementRef.nativeElement;let kt=ft.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();kt--;){const ln=ft.childNodes[kt];(1!==ln.nodeType||"svg"===ln.nodeName.toLowerCase())&&ln.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const ft=this._elementRef.nativeElement,kt=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();kt!=this._previousFontSetClass&&(this._previousFontSetClass&&ft.classList.remove(this._previousFontSetClass),kt&&ft.classList.add(kt),this._previousFontSetClass=kt),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&ft.classList.remove(this._previousFontIconClass),this.fontIcon&&ft.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(ft){return"string"==typeof ft?ft.trim().split(" ")[0]:ft}_prependPathToReferences(ft){const kt=this._elementsWithExternalReferences;kt&&kt.forEach((ln,gn)=>{ln.forEach(Bn=>{gn.setAttribute(Bn.name,`url('${ft}#${Bn.value}')`)})})}_cacheChildrenWithExternalReferences(ft){const kt=ft.querySelectorAll(ki),ln=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let gn=0;gn<kt.length;gn++)Rn.forEach(Bn=>{const Jn=kt[gn],Bi=Jn.getAttribute(Bn),Xi=Bi?Bi.match(hi):null;if(Xi){let _i=ln.get(Jn);_i||(_i=[],ln.set(Jn,_i)),_i.push({name:Bn,value:Xi[1]})}})}_updateSvgIcon(ft){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),ft){const[kt,ln]=this._splitIconName(ft);kt&&(this._svgNamespace=kt),ln&&(this._svgName=ln),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(ln,kt).pipe((0,Mt.q)(1)).subscribe(gn=>this._setSvgElement(gn),gn=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${kt}:${ln}! ${gn.message}`))})}}}return In.\u0275fac=function(ft){return new(ft||In)(D.Y36(D.SBq),D.Y36(mt),D.$8M("aria-hidden"),D.Y36(Ui),D.Y36(D.qLn))},In.\u0275cmp=D.Xpm({type:In,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(ft,kt){2&ft&&(D.uIk("data-mat-icon-type",kt._usingFontIcon()?"font":"svg")("data-mat-icon-name",kt._svgName||kt.fontIcon)("data-mat-icon-namespace",kt._svgNamespace||kt.fontSet),D.ekj("mat-icon-inline",kt.inline)("mat-icon-no-color","primary"!==kt.color&&"accent"!==kt.color&&"warn"!==kt.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[D.qOj],ngContentSelectors:Ht,decls:1,vars:0,template:function(ft,kt){1&ft&&(D.F$t(),D.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),In})(),xi=(()=>{class In{}return In.\u0275fac=function(ft){return new(ft||In)},In.\u0275mod=D.oAB({type:In}),In.\u0275inj=D.cJS({imports:[[l.BQ],l.BQ]}),In})()},4107:(On,wt,V)=>{"use strict";V.d(wt,{gD:()=>qn,LD:()=>Xn});var D=V(9776),l=V(9808),q=V(5e3),g=V(508),$e=V(7322),Ke=V(8962),Oe=V(5664),Le=V(3191),he=V(449),Ve=V(1159),Ze=V(3075),Be=V(7579),gt=V(9770),Ye=V(6451),tt=V(8675),Mt=V(3900),He=V(5698),Vt=V(9300),Ht=V(4004),an=V(1884),Dt=V(2722),Fe=V(1777),rt=V(226);const nn=["trigger"],Bt=["panel"];function Qt(Zn,St){if(1&Zn&&(q.TgZ(0,"span",8),q._uU(1),q.qZA()),2&Zn){const $=q.oxw();q.xp6(1),q.Oqu($.placeholder)}}function at(Zn,St){if(1&Zn&&(q.TgZ(0,"span",12),q._uU(1),q.qZA()),2&Zn){const $=q.oxw(2);q.xp6(1),q.Oqu($.triggerValue)}}function mt(Zn,St){1&Zn&&q.Hsn(0,0,["*ngSwitchCase","true"])}function lt(Zn,St){if(1&Zn&&(q.TgZ(0,"span",9),q.YNc(1,at,2,1,"span",10),q.YNc(2,mt,1,0,"ng-content",11),q.qZA()),2&Zn){const $=q.oxw();q.Q6J("ngSwitch",!!$.customTrigger),q.xp6(2),q.Q6J("ngSwitchCase",!0)}}function At(Zn,St){if(1&Zn){const $=q.EpF();q.TgZ(0,"div",13),q.TgZ(1,"div",14,15),q.NdJ("@transformPanel.done",function(R){return q.CHM($),q.oxw()._panelDoneAnimatingStream.next(R.toState)})("keydown",function(R){return q.CHM($),q.oxw()._handleKeydown(R)}),q.Hsn(3,1),q.qZA(),q.qZA()}if(2&Zn){const $=q.oxw();q.Q6J("@transformPanelWrap",void 0),q.xp6(1),q.Gre("mat-select-panel ",$._getPanelTheme(),""),q.Udp("transform-origin",$._transformOrigin)("font-size",$._triggerFontSize,"px"),q.Q6J("ngClass",$.panelClass)("@transformPanel",$.multiple?"showing-multiple":"showing"),q.uIk("id",$.id+"-panel")("aria-multiselectable",$.multiple)("aria-label",$.ariaLabel||null)("aria-labelledby",$._getPanelAriaLabelledby())}}const Kt=[[["mat-select-trigger"]],"*"],Ct=["mat-select-trigger","*"],yn={transformPanelWrap:(0,Fe.X$)("transformPanelWrap",[(0,Fe.eR)("* => void",(0,Fe.IO)("@transformPanel",[(0,Fe.pV)()],{optional:!0}))]),transformPanel:(0,Fe.X$)("transformPanel",[(0,Fe.SB)("void",(0,Fe.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,Fe.SB)("showing",(0,Fe.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,Fe.SB)("showing-multiple",(0,Fe.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,Fe.eR)("void => *",(0,Fe.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,Fe.eR)("* => void",(0,Fe.jt)("100ms 25ms linear",(0,Fe.oB)({opacity:0})))])};let Rn=0;const ft=new q.OlP("mat-select-scroll-strategy"),ln=new q.OlP("MAT_SELECT_CONFIG"),gn={provide:ft,deps:[D.aV],useFactory:function kt(Zn){return()=>Zn.scrollStrategies.reposition()}};class Bn{constructor(St,$){this.source=St,this.value=$}}const Jn=(0,g.Kr)((0,g.sb)((0,g.Id)((0,g.FD)(class{constructor(Zn,St,$,U,R){this._elementRef=Zn,this._defaultErrorStateMatcher=St,this._parentForm=$,this._parentFormGroup=U,this.ngControl=R}})))),Bi=new q.OlP("MatSelectTrigger");let _i=(()=>{class Zn extends Jn{constructor($,U,R,N,ie,fe,nt,Et,_t,fn,_n,Hn,Fi,Jt){var hn,Zt,Oi;super(ie,N,nt,Et,fn),this._viewportRuler=$,this._changeDetectorRef=U,this._ngZone=R,this._dir=fe,this._parentFormField=_t,this._liveAnnouncer=Fi,this._defaultOptions=Jt,this._panelOpen=!1,this._compareWith=(Wn,Vn)=>Wn===Vn,this._uid="mat-select-"+Rn++,this._triggerAriaLabelledBy=null,this._destroy=new Be.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Rn++,this._panelDoneAnimatingStream=new Be.x,this._overlayPanelClass=(null===(hn=this._defaultOptions)||void 0===hn?void 0:hn.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Oi=null===(Zt=this._defaultOptions)||void 0===Zt?void 0:Zt.disableOptionCentering)&&void 0!==Oi&&Oi,this.ariaLabel="",this.optionSelectionChanges=(0,gt.P)(()=>{const Wn=this.options;return Wn?Wn.changes.pipe((0,tt.O)(Wn),(0,Mt.w)(()=>(0,Ye.T)(...Wn.map(Vn=>Vn.onSelectionChange)))):this._ngZone.onStable.pipe((0,He.q)(1),(0,Mt.w)(()=>this.optionSelectionChanges))}),this.openedChange=new q.vpe,this._openedStream=this.openedChange.pipe((0,Vt.h)(Wn=>Wn),(0,Ht.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,Vt.h)(Wn=>!Wn),(0,Ht.U)(()=>{})),this.selectionChange=new q.vpe,this.valueChange=new q.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Jt?void 0:Jt.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Jt.typeaheadDebounceInterval),this._scrollStrategyFactory=Hn,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(_n)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder($){this._placeholder=$,this.stateChanges.next()}get required(){var $,U,R,N;return null!==(N=null!==($=this._required)&&void 0!==$?$:null===(R=null===(U=this.ngControl)||void 0===U?void 0:U.control)||void 0===R?void 0:R.hasValidator(Ze.kI.required))&&void 0!==N&&N}set required($){this._required=(0,Le.Ig)($),this.stateChanges.next()}get multiple(){return this._multiple}set multiple($){this._multiple=(0,Le.Ig)($)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering($){this._disableOptionCentering=(0,Le.Ig)($)}get compareWith(){return this._compareWith}set compareWith($){this._compareWith=$,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value($){($!==this._value||this._multiple&&Array.isArray($))&&(this.options&&this._setSelectionByValue($),this._value=$)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval($){this._typeaheadDebounceInterval=(0,Le.su)($)}get id(){return this._id}set id($){this._id=$||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new he.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,an.x)(),(0,Dt.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Dt.R)(this._destroy)).subscribe($=>{$.added.forEach(U=>U.select()),$.removed.forEach(U=>U.deselect())}),this.options.changes.pipe((0,tt.O)(null),(0,Dt.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const $=this._getTriggerAriaLabelledby();if($!==this._triggerAriaLabelledBy){const U=this._elementRef.nativeElement;this._triggerAriaLabelledBy=$,$?U.setAttribute("aria-labelledby",$):U.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges($){$.disabled&&this.stateChanges.next(),$.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue($){this.value=$}registerOnChange($){this._onChange=$}registerOnTouched($){this._onTouched=$}setDisabledState($){this.disabled=$,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var $,U;return this.multiple?(null===($=this._selectionModel)||void 0===$?void 0:$.selected)||[]:null===(U=this._selectionModel)||void 0===U?void 0:U.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const $=this._selectionModel.selected.map(U=>U.viewValue);return this._isRtl()&&$.reverse(),$.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown($){this.disabled||(this.panelOpen?this._handleOpenKeydown($):this._handleClosedKeydown($))}_handleClosedKeydown($){const U=$.keyCode,R=U===Ve.JH||U===Ve.LH||U===Ve.oh||U===Ve.SV,N=U===Ve.K5||U===Ve.L_,ie=this._keyManager;if(!ie.isTyping()&&N&&!(0,Ve.Vb)($)||(this.multiple||$.altKey)&&R)$.preventDefault(),this.open();else if(!this.multiple){const fe=this.selected;ie.onKeydown($);const nt=this.selected;nt&&fe!==nt&&this._liveAnnouncer.announce(nt.viewValue,1e4)}}_handleOpenKeydown($){const U=this._keyManager,R=$.keyCode,N=R===Ve.JH||R===Ve.LH,ie=U.isTyping();if(N&&$.altKey)$.preventDefault(),this.close();else if(ie||R!==Ve.K5&&R!==Ve.L_||!U.activeItem||(0,Ve.Vb)($))if(!ie&&this._multiple&&R===Ve.A&&$.ctrlKey){$.preventDefault();const fe=this.options.some(nt=>!nt.disabled&&!nt.selected);this.options.forEach(nt=>{nt.disabled||(fe?nt.select():nt.deselect())})}else{const fe=U.activeItemIndex;U.onKeydown($),this._multiple&&N&&$.shiftKey&&U.activeItem&&U.activeItemIndex!==fe&&U.activeItem._selectViaInteraction()}else $.preventDefault(),U.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,He.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue($){if(this._selectionModel.selected.forEach(U=>U.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&$)Array.isArray($),$.forEach(U=>this._selectValue(U)),this._sortValues();else{const U=this._selectValue($);U?this._keyManager.updateActiveItem(U):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue($){const U=this.options.find(R=>{if(this._selectionModel.isSelected(R))return!1;try{return null!=R.value&&this._compareWith(R.value,$)}catch(N){return!1}});return U&&this._selectionModel.select(U),U}_initKeyManager(){this._keyManager=new Oe.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const $=(0,Ye.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Dt.R)($)).subscribe(U=>{this._onSelect(U.source,U.isUserInput),U.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Ye.T)(...this.options.map(U=>U._stateChanges)).pipe((0,Dt.R)($)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect($,U){const R=this._selectionModel.isSelected($);null!=$.value||this._multiple?(R!==$.selected&&($.selected?this._selectionModel.select($):this._selectionModel.deselect($)),U&&this._keyManager.setActiveItem($),this.multiple&&(this._sortValues(),U&&this.focus())):($.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges($.value)),R!==this._selectionModel.isSelected($)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const $=this.options.toArray();this._selectionModel.sort((U,R)=>this.sortComparator?this.sortComparator(U,R,$):$.indexOf(U)-$.indexOf(R)),this.stateChanges.next()}}_propagateChanges($){let U=null;U=this.multiple?this.selected.map(R=>R.value):this.selected?this.selected.value:$,this._value=U,this.valueChange.emit(U),this._onChange(U),this.selectionChange.emit(this._getChangeEvent(U)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var $;return!this._panelOpen&&!this.disabled&&(null===($=this.options)||void 0===$?void 0:$.length)>0}focus($){this._elementRef.nativeElement.focus($)}_getPanelAriaLabelledby(){var $;if(this.ariaLabel)return null;const U=null===($=this._parentFormField)||void 0===$?void 0:$.getLabelId();return this.ariaLabelledby?(U?U+" ":"")+this.ariaLabelledby:U}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var $;if(this.ariaLabel)return null;const U=null===($=this._parentFormField)||void 0===$?void 0:$.getLabelId();let R=(U?U+" ":"")+this._valueId;return this.ariaLabelledby&&(R+=" "+this.ariaLabelledby),R}_panelDoneAnimating($){this.openedChange.emit($)}setDescribedByIds($){this._ariaDescribedby=$.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Zn.\u0275fac=function($){return new($||Zn)(q.Y36(Ke.rL),q.Y36(q.sBO),q.Y36(q.R0b),q.Y36(g.rD),q.Y36(q.SBq),q.Y36(rt.Is,8),q.Y36(Ze.F,8),q.Y36(Ze.sg,8),q.Y36($e.G_,8),q.Y36(Ze.a5,10),q.$8M("tabindex"),q.Y36(ft),q.Y36(Oe.Kd),q.Y36(ln,8))},Zn.\u0275dir=q.lG2({type:Zn,viewQuery:function($,U){if(1&$&&(q.Gf(nn,5),q.Gf(Bt,5),q.Gf(D.pI,5)),2&$){let R;q.iGM(R=q.CRH())&&(U.trigger=R.first),q.iGM(R=q.CRH())&&(U.panel=R.first),q.iGM(R=q.CRH())&&(U._overlayDir=R.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[q.qOj,q.TTD]}),Zn})(),qn=(()=>{class Zn extends _i{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll($,U,R){const N=this._getItemHeight();return Math.min(Math.max(0,N*$-U+N/2),R)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Dt.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,He.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView($){const U=(0,g.CB)($,this.options,this.optionGroups),R=this._getItemHeight();this.panel.nativeElement.scrollTop=0===$&&1===U?0:(0,g.jH)(($+U)*R,R,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating($){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating($)}_getChangeEvent($){return new Bn(this,$)}_calculateOverlayOffsetX(){const $=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),U=this._viewportRuler.getViewportSize(),R=this._isRtl(),N=this.multiple?56:32;let ie;if(this.multiple)ie=40;else if(this.disableOptionCentering)ie=16;else{let Et=this._selectionModel.selected[0]||this.options.first;ie=Et&&Et.group?32:16}R||(ie*=-1);const fe=0-($.left+ie-(R?N:0)),nt=$.right+ie-U.width+(R?0:N);fe>0?ie+=fe+8:nt>0&&(ie-=nt+8),this._overlayDir.offsetX=Math.round(ie),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY($,U,R){const N=this._getItemHeight(),ie=(N-this._triggerRect.height)/2,fe=Math.floor(256/N);let nt;return this.disableOptionCentering?0:(nt=0===this._scrollTop?$*N:this._scrollTop===R?($-(this._getItemCount()-fe))*N+(N-(this._getItemCount()*N-256)%N):U-N/2,Math.round(-1*nt-ie))}_checkOverlayWithinViewport($){const U=this._getItemHeight(),R=this._viewportRuler.getViewportSize(),N=this._triggerRect.top-8,ie=R.height-this._triggerRect.bottom-8,fe=Math.abs(this._offsetY),Et=Math.min(this._getItemCount()*U,256)-fe-this._triggerRect.height;Et>ie?this._adjustPanelUp(Et,ie):fe>N?this._adjustPanelDown(fe,N,$):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp($,U){const R=Math.round($-U);this._scrollTop-=R,this._offsetY-=R,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown($,U,R){const N=Math.round($-U);if(this._scrollTop+=N,this._offsetY+=N,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=R)return this._scrollTop=R,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const $=this._getItemHeight(),U=this._getItemCount(),R=Math.min(U*$,256),ie=U*$-R;let fe;fe=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),fe+=(0,g.CB)(fe,this.options,this.optionGroups);const nt=R/2;this._scrollTop=this._calculateOverlayScroll(fe,nt,ie),this._offsetY=this._calculateOverlayOffsetY(fe,nt,ie),this._checkOverlayWithinViewport(ie)}_getOriginBasedOnOption(){const $=this._getItemHeight(),U=($-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-U+$/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Zn.\u0275fac=function(){let St;return function(U){return(St||(St=q.n5z(Zn)))(U||Zn)}}(),Zn.\u0275cmp=q.Xpm({type:Zn,selectors:[["mat-select"]],contentQueries:function($,U,R){if(1&$&&(q.Suo(R,Bi,5),q.Suo(R,g.ey,5),q.Suo(R,g.K7,5)),2&$){let N;q.iGM(N=q.CRH())&&(U.customTrigger=N.first),q.iGM(N=q.CRH())&&(U.options=N),q.iGM(N=q.CRH())&&(U.optionGroups=N)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function($,U){1&$&&q.NdJ("keydown",function(N){return U._handleKeydown(N)})("focus",function(){return U._onFocus()})("blur",function(){return U._onBlur()}),2&$&&(q.uIk("id",U.id)("tabindex",U.tabIndex)("aria-controls",U.panelOpen?U.id+"-panel":null)("aria-expanded",U.panelOpen)("aria-label",U.ariaLabel||null)("aria-required",U.required.toString())("aria-disabled",U.disabled.toString())("aria-invalid",U.errorState)("aria-describedby",U._ariaDescribedby||null)("aria-activedescendant",U._getAriaActiveDescendant()),q.ekj("mat-select-disabled",U.disabled)("mat-select-invalid",U.errorState)("mat-select-required",U.required)("mat-select-empty",U.empty)("mat-select-multiple",U.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[q._Bn([{provide:$e.Eo,useExisting:Zn},{provide:g.HF,useExisting:Zn}]),q.qOj],ngContentSelectors:Ct,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function($,U){if(1&$&&(q.F$t(Kt),q.TgZ(0,"div",0,1),q.NdJ("click",function(){return U.toggle()}),q.TgZ(3,"div",2),q.YNc(4,Qt,2,1,"span",3),q.YNc(5,lt,3,2,"span",4),q.qZA(),q.TgZ(6,"div",5),q._UZ(7,"div",6),q.qZA(),q.qZA(),q.YNc(8,At,4,14,"ng-template",7),q.NdJ("backdropClick",function(){return U.close()})("attach",function(){return U._onAttached()})("detach",function(){return U.close()})),2&$){const R=q.MAs(1);q.uIk("aria-owns",U.panelOpen?U.id+"-panel":null),q.xp6(3),q.Q6J("ngSwitch",U.empty),q.uIk("id",U._valueId),q.xp6(1),q.Q6J("ngSwitchCase",!0),q.xp6(1),q.Q6J("ngSwitchCase",!1),q.xp6(3),q.Q6J("cdkConnectedOverlayPanelClass",U._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",U._scrollStrategy)("cdkConnectedOverlayOrigin",R)("cdkConnectedOverlayOpen",U.panelOpen)("cdkConnectedOverlayPositions",U._positions)("cdkConnectedOverlayMinWidth",null==U._triggerRect?null:U._triggerRect.width)("cdkConnectedOverlayOffsetY",U._offsetY)}},directives:[D.xu,l.RF,l.n9,l.ED,D.pI,l.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[yn.transformPanelWrap,yn.transformPanel]},changeDetection:0}),Zn})(),Xn=(()=>{class Zn{}return Zn.\u0275fac=function($){return new($||Zn)},Zn.\u0275mod=q.oAB({type:Zn}),Zn.\u0275inj=q.cJS({providers:[gn],imports:[[l.ez,D.U8,g.Ng,g.BQ],Ke.ZD,$e.lN,g.Ng,g.BQ]}),Zn})()},4594:(On,wt,V)=>{"use strict";V.d(wt,{Ye:()=>he,g0:()=>Ze});var D=V(5e3),l=V(508),q=V(9808),g=V(925);const $e=["*",[["mat-toolbar-row"]]],Ke=["*","mat-toolbar-row"],Oe=(0,l.pj)(class{constructor(Be){this._elementRef=Be}});let Le=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275dir=D.lG2({type:Be,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Be})(),he=(()=>{class Be extends Oe{constructor(Ye,tt,Mt){super(Ye),this._platform=tt,this._document=Mt}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Be.\u0275fac=function(Ye){return new(Ye||Be)(D.Y36(D.SBq),D.Y36(g.t4),D.Y36(q.K0))},Be.\u0275cmp=D.Xpm({type:Be,selectors:[["mat-toolbar"]],contentQueries:function(Ye,tt,Mt){if(1&Ye&&D.Suo(Mt,Le,5),2&Ye){let He;D.iGM(He=D.CRH())&&(tt._toolbarRows=He)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(Ye,tt){2&Ye&&D.ekj("mat-toolbar-multiple-rows",tt._toolbarRows.length>0)("mat-toolbar-single-row",0===tt._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[D.qOj],ngContentSelectors:Ke,decls:2,vars:0,template:function(Ye,tt){1&Ye&&(D.F$t($e),D.Hsn(0),D.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),Be})(),Ze=(()=>{class Be{}return Be.\u0275fac=function(Ye){return new(Ye||Be)},Be.\u0275mod=D.oAB({type:Be}),Be.\u0275inj=D.cJS({imports:[[l.BQ],l.BQ]}),Be})()},6360:(On,wt,V)=>{"use strict";V.d(wt,{Qb:()=>fi,PW:()=>wo});var D=V(5e3),l=V(2313),q=V(1777);function g(){return"undefined"!=typeof window&&void 0!==window.document}function $e(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ke(ue){switch(ue.length){case 0:return new q.ZN;case 1:return ue[0];default:return new q.ZE(ue)}}function Oe(ue,M,S,j,de={},Se={}){const Ge=[],ot=[];let Pt=-1,rn=null;if(j.forEach(Tn=>{const ni=Tn.offset,yi=ni==Pt,zi=yi&&rn||{};Object.keys(Tn).forEach(mi=>{let Si=mi,Ni=Tn[mi];if("offset"!==mi)switch(Si=M.normalizePropertyName(Si,Ge),Ni){case q.k1:Ni=de[mi];break;case q.l3:Ni=Se[mi];break;default:Ni=M.normalizeStyleValue(mi,Si,Ni,Ge)}zi[Si]=Ni}),yi||ot.push(zi),rn=zi,Pt=ni}),Ge.length){const Tn="\n - ";throw new Error(`Unable to animate due to the following errors:${Tn}${Ge.join(Tn)}`)}return ot}function Le(ue,M,S,j){switch(M){case"start":ue.onStart(()=>j(S&&he(S,"start",ue)));break;case"done":ue.onDone(()=>j(S&&he(S,"done",ue)));break;case"destroy":ue.onDestroy(()=>j(S&&he(S,"destroy",ue)))}}function he(ue,M,S){const j=S.totalTime,Se=Ve(ue.element,ue.triggerName,ue.fromState,ue.toState,M||ue.phaseName,null==j?ue.totalTime:j,!!S.disabled),Ge=ue._data;return null!=Ge&&(Se._data=Ge),Se}function Ve(ue,M,S,j,de="",Se=0,Ge){return{element:ue,triggerName:M,fromState:S,toState:j,phaseName:de,totalTime:Se,disabled:!!Ge}}function Ze(ue,M,S){let j;return ue instanceof Map?(j=ue.get(M),j||ue.set(M,j=S)):(j=ue[M],j||(j=ue[M]=S)),j}function Be(ue){const M=ue.indexOf(":");return[ue.substring(1,M),ue.substr(M+1)]}let gt=(ue,M)=>!1,Ye=(ue,M,S)=>[];($e()||"undefined"!=typeof Element)&&(gt=g()?(ue,M)=>{for(;M&&M!==document.documentElement;){if(M===ue)return!0;M=M.parentNode||M.host}return!1}:(ue,M)=>ue.contains(M),Ye=(ue,M,S)=>{if(S)return Array.from(ue.querySelectorAll(M));const j=ue.querySelector(M);return j?[j]:[]});let He=null,Vt=!1;function Ht(ue){He||(He=function an(){return"undefined"!=typeof document?document.body:null}()||{},Vt=!!He.style&&"WebkitAppearance"in He.style);let M=!0;return He.style&&!function Mt(ue){return"ebkit"==ue.substring(1,6)}(ue)&&(M=ue in He.style,!M&&Vt&&(M="Webkit"+ue.charAt(0).toUpperCase()+ue.substr(1)in He.style)),M}const Dt=gt,Fe=Ye;function rt(ue){const M={};return Object.keys(ue).forEach(S=>{const j=S.replace(/([a-z])([A-Z])/g,"$1-$2");M[j]=ue[S]}),M}let nn=(()=>{class ue{validateStyleProperty(S){return Ht(S)}matchesElement(S,j){return!1}containsElement(S,j){return Dt(S,j)}query(S,j,de){return Fe(S,j,de)}computeStyle(S,j,de){return de||""}animate(S,j,de,Se,Ge,ot=[],Pt){return new q.ZN(de,Se)}}return ue.\u0275fac=function(S){return new(S||ue)},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})(),Bt=(()=>{class ue{}return ue.NOOP=new nn,ue})();const lt="ng-enter",At="ng-leave",Kt="ng-trigger",Ct=".ng-trigger",yn="ng-animating",di=".ng-animating";function Ui(ue){if("number"==typeof ue)return ue;const M=ue.match(/^(-?[\.\d]+)(m?s)/);return!M||M.length<2?0:kn(parseFloat(M[1]),M[2])}function kn(ue,M){return"s"===M?1e3*ue:ue}function Rn(ue,M,S){return ue.hasOwnProperty("duration")?ue:function ki(ue,M,S){let de,Se=0,Ge="";if("string"==typeof ue){const ot=ue.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ot)return M.push(`The provided timing value "${ue}" is invalid.`),{duration:0,delay:0,easing:""};de=kn(parseFloat(ot[1]),ot[2]);const Pt=ot[3];null!=Pt&&(Se=kn(parseFloat(Pt),ot[4]));const rn=ot[5];rn&&(Ge=rn)}else de=ue;if(!S){let ot=!1,Pt=M.length;de<0&&(M.push("Duration values below 0 are not allowed for this animation step."),ot=!0),Se<0&&(M.push("Delay values below 0 are not allowed for this animation step."),ot=!0),ot&&M.splice(Pt,0,`The provided timing value "${ue}" is invalid.`)}return{duration:de,delay:Se,easing:Ge}}(ue,M,S)}function hi(ue,M={}){return Object.keys(ue).forEach(S=>{M[S]=ue[S]}),M}function xi(ue,M,S={}){if(M)for(let j in ue)S[j]=ue[j];else hi(ue,S);return S}function In(ue,M,S){return S?M+":"+S+";":""}function Qn(ue){let M="";for(let S=0;S<ue.style.length;S++){const j=ue.style.item(S);M+=In(0,j,ue.style.getPropertyValue(j))}for(const S in ue.style)ue.style.hasOwnProperty(S)&&!S.startsWith("_")&&(M+=In(0,Xn(S),ue.style[S]));ue.setAttribute("style",M)}function ft(ue,M,S){ue.style&&(Object.keys(M).forEach(j=>{const de=qn(j);S&&!S.hasOwnProperty(j)&&(S[j]=ue.style[de]),ue.style[de]=M[j]}),$e()&&Qn(ue))}function kt(ue,M){ue.style&&(Object.keys(M).forEach(S=>{const j=qn(S);ue.style[j]=""}),$e()&&Qn(ue))}function ln(ue){return Array.isArray(ue)?1==ue.length?ue[0]:(0,q.vP)(ue):ue}const Bn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Jn(ue){let M=[];if("string"==typeof ue){let S;for(;S=Bn.exec(ue);)M.push(S[1]);Bn.lastIndex=0}return M}function Bi(ue,M,S){const j=ue.toString(),de=j.replace(Bn,(Se,Ge)=>{let ot=M[Ge];return M.hasOwnProperty(Ge)||(S.push(`Please provide a value for the animation param ${Ge}`),ot=""),ot.toString()});return de==j?ue:de}function Xi(ue){const M=[];let S=ue.next();for(;!S.done;)M.push(S.value),S=ue.next();return M}const _i=/-+([a-z0-9])/g;function qn(ue){return ue.replace(_i,(...M)=>M[1].toUpperCase())}function Xn(ue){return ue.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zn(ue,M){return 0===ue||0===M}function St(ue,M,S){const j=Object.keys(S);if(j.length&&M.length){let Se=M[0],Ge=[];if(j.forEach(ot=>{Se.hasOwnProperty(ot)||Ge.push(ot),Se[ot]=S[ot]}),Ge.length)for(var de=1;de<M.length;de++){let ot=M[de];Ge.forEach(function(Pt){ot[Pt]=U(ue,Pt)})}}return M}function $(ue,M,S){switch(M.type){case 7:return ue.visitTrigger(M,S);case 0:return ue.visitState(M,S);case 1:return ue.visitTransition(M,S);case 2:return ue.visitSequence(M,S);case 3:return ue.visitGroup(M,S);case 4:return ue.visitAnimate(M,S);case 5:return ue.visitKeyframes(M,S);case 6:return ue.visitStyle(M,S);case 8:return ue.visitReference(M,S);case 9:return ue.visitAnimateChild(M,S);case 10:return ue.visitAnimateRef(M,S);case 11:return ue.visitQuery(M,S);case 12:return ue.visitStagger(M,S);default:throw new Error(`Unable to resolve animation metadata node #${M.type}`)}}function U(ue,M){return window.getComputedStyle(ue)[M]}const R="*";function N(ue,M){const S=[];return"string"==typeof ue?ue.split(/\s*,\s*/).forEach(j=>function ie(ue,M,S){if(":"==ue[0]){const Pt=function fe(ue,M){switch(ue){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,j)=>parseFloat(j)>parseFloat(S);case":decrement":return(S,j)=>parseFloat(j)<parseFloat(S);default:return M.push(`The transition alias value "${ue}" is not supported`),"* => *"}}(ue,S);if("function"==typeof Pt)return void M.push(Pt);ue=Pt}const j=ue.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==j||j.length<4)return S.push(`The provided transition expression "${ue}" is not supported`),M;const de=j[1],Se=j[2],Ge=j[3];M.push(_t(de,Ge));"<"==Se[0]&&!(de==R&&Ge==R)&&M.push(_t(Ge,de))}(j,S,M)):S.push(ue),S}const nt=new Set(["true","1"]),Et=new Set(["false","0"]);function _t(ue,M){const S=nt.has(ue)||Et.has(ue),j=nt.has(M)||Et.has(M);return(de,Se)=>{let Ge=ue==R||ue==de,ot=M==R||M==Se;return!Ge&&S&&"boolean"==typeof de&&(Ge=de?nt.has(ue):Et.has(ue)),!ot&&j&&"boolean"==typeof Se&&(ot=Se?nt.has(M):Et.has(M)),Ge&&ot}}const _n=new RegExp("s*:selfs*,?","g");function Hn(ue,M,S){return new Jt(ue).build(M,S)}class Jt{constructor(M){this._driver=M}build(M,S){const j=new Oi(S);return this._resetContextStyleTimingState(j),$(this,ln(M),j)}_resetContextStyleTimingState(M){M.currentQuerySelector="",M.collectedStyles={},M.collectedStyles[""]={},M.currentTime=0}visitTrigger(M,S){let j=S.queryCount=0,de=S.depCount=0;const Se=[],Ge=[];return"@"==M.name.charAt(0)&&S.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),M.definitions.forEach(ot=>{if(this._resetContextStyleTimingState(S),0==ot.type){const Pt=ot,rn=Pt.name;rn.toString().split(/\s*,\s*/).forEach(Tn=>{Pt.name=Tn,Se.push(this.visitState(Pt,S))}),Pt.name=rn}else if(1==ot.type){const Pt=this.visitTransition(ot,S);j+=Pt.queryCount,de+=Pt.depCount,Ge.push(Pt)}else S.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:M.name,states:Se,transitions:Ge,queryCount:j,depCount:de,options:null}}visitState(M,S){const j=this.visitStyle(M.styles,S),de=M.options&&M.options.params||null;if(j.containsDynamicStyles){const Se=new Set,Ge=de||{};if(j.styles.forEach(ot=>{if(Vn(ot)){const Pt=ot;Object.keys(Pt).forEach(rn=>{Jn(Pt[rn]).forEach(Tn=>{Ge.hasOwnProperty(Tn)||Se.add(Tn)})})}}),Se.size){const ot=Xi(Se.values());S.errors.push(`state("${M.name}", ...) must define default values for all the following style substitutions: ${ot.join(", ")}`)}}return{type:0,name:M.name,style:j,options:de?{params:de}:null}}visitTransition(M,S){S.queryCount=0,S.depCount=0;const j=$(this,ln(M.animation),S);return{type:1,matchers:N(M.expr,S.errors),animation:j,queryCount:S.queryCount,depCount:S.depCount,options:pt(M.options)}}visitSequence(M,S){return{type:2,steps:M.steps.map(j=>$(this,j,S)),options:pt(M.options)}}visitGroup(M,S){const j=S.currentTime;let de=0;const Se=M.steps.map(Ge=>{S.currentTime=j;const ot=$(this,Ge,S);return de=Math.max(de,S.currentTime),ot});return S.currentTime=de,{type:3,steps:Se,options:pt(M.options)}}visitAnimate(M,S){const j=function Rt(ue,M){let S=null;if(ue.hasOwnProperty("duration"))S=ue;else if("number"==typeof ue)return we(Rn(ue,M).duration,0,"");const j=ue;if(j.split(/\s+/).some(Se=>"{"==Se.charAt(0)&&"{"==Se.charAt(1))){const Se=we(0,0,"");return Se.dynamic=!0,Se.strValue=j,Se}return S=S||Rn(j,M),we(S.duration,S.delay,S.easing)}(M.timings,S.errors);S.currentAnimateTimings=j;let de,Se=M.styles?M.styles:(0,q.oB)({});if(5==Se.type)de=this.visitKeyframes(Se,S);else{let Ge=M.styles,ot=!1;if(!Ge){ot=!0;const rn={};j.easing&&(rn.easing=j.easing),Ge=(0,q.oB)(rn)}S.currentTime+=j.duration+j.delay;const Pt=this.visitStyle(Ge,S);Pt.isEmptyStep=ot,de=Pt}return S.currentAnimateTimings=null,{type:4,timings:j,style:de,options:null}}visitStyle(M,S){const j=this._makeStyleAst(M,S);return this._validateStyleAst(j,S),j}_makeStyleAst(M,S){const j=[];Array.isArray(M.styles)?M.styles.forEach(Ge=>{"string"==typeof Ge?Ge==q.l3?j.push(Ge):S.errors.push(`The provided style string value ${Ge} is not allowed.`):j.push(Ge)}):j.push(M.styles);let de=!1,Se=null;return j.forEach(Ge=>{if(Vn(Ge)){const ot=Ge,Pt=ot.easing;if(Pt&&(Se=Pt,delete ot.easing),!de)for(let rn in ot)if(ot[rn].toString().indexOf("{{")>=0){de=!0;break}}}),{type:6,styles:j,easing:Se,offset:M.offset,containsDynamicStyles:de,options:null}}_validateStyleAst(M,S){const j=S.currentAnimateTimings;let de=S.currentTime,Se=S.currentTime;j&&Se>0&&(Se-=j.duration+j.delay),M.styles.forEach(Ge=>{"string"!=typeof Ge&&Object.keys(Ge).forEach(ot=>{if(!this._driver.validateStyleProperty(ot))return void S.errors.push(`The provided animation property "${ot}" is not a supported CSS property for animations`);const Pt=S.collectedStyles[S.currentQuerySelector],rn=Pt[ot];let Tn=!0;rn&&(Se!=de&&Se>=rn.startTime&&de<=rn.endTime&&(S.errors.push(`The CSS property "${ot}" that exists between the times of "${rn.startTime}ms" and "${rn.endTime}ms" is also being animated in a parallel animation between the times of "${Se}ms" and "${de}ms"`),Tn=!1),Se=rn.startTime),Tn&&(Pt[ot]={startTime:Se,endTime:de}),S.options&&function gn(ue,M,S){const j=M.params||{},de=Jn(ue);de.length&&de.forEach(Se=>{j.hasOwnProperty(Se)||S.push(`Unable to resolve the local animation param ${Se} in the given list of values`)})}(Ge[ot],S.options,S.errors)})})}visitKeyframes(M,S){const j={type:5,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push("keyframes() must be placed inside of a call to animate()"),j;let Se=0;const Ge=[];let ot=!1,Pt=!1,rn=0;const Tn=M.steps.map(ur=>{const Fr=this._makeStyleAst(ur,S);let Wr=null!=Fr.offset?Fr.offset:function Wn(ue){if("string"==typeof ue)return null;let M=null;if(Array.isArray(ue))ue.forEach(S=>{if(Vn(S)&&S.hasOwnProperty("offset")){const j=S;M=parseFloat(j.offset),delete j.offset}});else if(Vn(ue)&&ue.hasOwnProperty("offset")){const S=ue;M=parseFloat(S.offset),delete S.offset}return M}(Fr.styles),io=0;return null!=Wr&&(Se++,io=Fr.offset=Wr),Pt=Pt||io<0||io>1,ot=ot||io<rn,rn=io,Ge.push(io),Fr});Pt&&S.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),ot&&S.errors.push("Please ensure that all keyframe offsets are in order");const ni=M.steps.length;let yi=0;Se>0&&Se<ni?S.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==Se&&(yi=1/(ni-1));const zi=ni-1,mi=S.currentTime,Si=S.currentAnimateTimings,Ni=Si.duration;return Tn.forEach((ur,Fr)=>{const Wr=yi>0?Fr==zi?1:yi*Fr:Ge[Fr],io=Wr*Ni;S.currentTime=mi+Si.delay+io,Si.duration=io,this._validateStyleAst(ur,S),ur.offset=Wr,j.styles.push(ur)}),j}visitReference(M,S){return{type:8,animation:$(this,ln(M.animation),S),options:pt(M.options)}}visitAnimateChild(M,S){return S.depCount++,{type:9,options:pt(M.options)}}visitAnimateRef(M,S){return{type:10,animation:this.visitReference(M.animation,S),options:pt(M.options)}}visitQuery(M,S){const j=S.currentQuerySelector,de=M.options||{};S.queryCount++,S.currentQuery=M;const[Se,Ge]=function hn(ue){const M=!!ue.split(/\s*,\s*/).find(S=>":self"==S);return M&&(ue=ue.replace(_n,"")),ue=ue.replace(/@\*/g,Ct).replace(/@\w+/g,S=>Ct+"-"+S.substr(1)).replace(/:animating/g,di),[ue,M]}(M.selector);S.currentQuerySelector=j.length?j+" "+Se:Se,Ze(S.collectedStyles,S.currentQuerySelector,{});const ot=$(this,ln(M.animation),S);return S.currentQuery=null,S.currentQuerySelector=j,{type:11,selector:Se,limit:de.limit||0,optional:!!de.optional,includeSelf:Ge,animation:ot,originalSelector:M.selector,options:pt(M.options)}}visitStagger(M,S){S.currentQuery||S.errors.push("stagger() can only be used inside of query()");const j="full"===M.timings?{duration:0,delay:0,easing:"full"}:Rn(M.timings,S.errors,!0);return{type:12,animation:$(this,ln(M.animation),S),timings:j,options:null}}}class Oi{constructor(M){this.errors=M,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vn(ue){return!Array.isArray(ue)&&"object"==typeof ue}function pt(ue){return ue?(ue=hi(ue)).params&&(ue.params=function Zt(ue){return ue?hi(ue):null}(ue.params)):ue={},ue}function we(ue,M,S){return{duration:ue,delay:M,easing:S}}function Ae(ue,M,S,j,de,Se,Ge=null,ot=!1){return{type:1,element:ue,keyframes:M,preStyleProps:S,postStyleProps:j,duration:de,delay:Se,totalTime:de+Se,easing:Ge,subTimeline:ot}}class ye{constructor(){this._map=new Map}get(M){return this._map.get(M)||[]}append(M,S){let j=this._map.get(M);j||this._map.set(M,j=[]),j.push(...S)}has(M){return this._map.has(M)}clear(){this._map.clear()}}const xn=new RegExp(":enter","g"),Gi=new RegExp(":leave","g");function er(ue,M,S,j,de,Se={},Ge={},ot,Pt,rn=[]){return(new Tt).buildKeyframes(ue,M,S,j,de,Se,Ge,ot,Pt,rn)}class Tt{buildKeyframes(M,S,j,de,Se,Ge,ot,Pt,rn,Tn=[]){rn=rn||new ye;const ni=new J(M,S,rn,de,Se,Tn,[]);ni.options=Pt,ni.currentTimeline.setStyles([Ge],null,ni.errors,Pt),$(this,j,ni);const yi=ni.timelines.filter(zi=>zi.containsAnimation());if(Object.keys(ot).length){let zi;for(let mi=yi.length-1;mi>=0;mi--){const Si=yi[mi];if(Si.element===S){zi=Si;break}}zi&&!zi.allowOnlyTimelineStyles()&&zi.setStyles([ot],null,ni.errors,Pt)}return yi.length?yi.map(zi=>zi.buildKeyframes()):[Ae(S,[],[],[],0,0,"",!1)]}visitTrigger(M,S){}visitState(M,S){}visitTransition(M,S){}visitAnimateChild(M,S){const j=S.subInstructions.get(S.element);if(j){const de=S.createSubContext(M.options),Se=S.currentTimeline.currentTime,Ge=this._visitSubInstructions(j,de,de.options);Se!=Ge&&S.transformIntoNewTimeline(Ge)}S.previousNode=M}visitAnimateRef(M,S){const j=S.createSubContext(M.options);j.transformIntoNewTimeline(),this.visitReference(M.animation,j),S.transformIntoNewTimeline(j.currentTimeline.currentTime),S.previousNode=M}_visitSubInstructions(M,S,j){let Se=S.currentTimeline.currentTime;const Ge=null!=j.duration?Ui(j.duration):null,ot=null!=j.delay?Ui(j.delay):null;return 0!==Ge&&M.forEach(Pt=>{const rn=S.appendInstructionToTimeline(Pt,Ge,ot);Se=Math.max(Se,rn.duration+rn.delay)}),Se}visitReference(M,S){S.updateOptions(M.options,!0),$(this,M.animation,S),S.previousNode=M}visitSequence(M,S){const j=S.subContextCount;let de=S;const Se=M.options;if(Se&&(Se.params||Se.delay)&&(de=S.createSubContext(Se),de.transformIntoNewTimeline(),null!=Se.delay)){6==de.previousNode.type&&(de.currentTimeline.snapshotCurrentStyles(),de.previousNode=it);const Ge=Ui(Se.delay);de.delayNextStep(Ge)}M.steps.length&&(M.steps.forEach(Ge=>$(this,Ge,de)),de.currentTimeline.applyStylesToKeyframe(),de.subContextCount>j&&de.transformIntoNewTimeline()),S.previousNode=M}visitGroup(M,S){const j=[];let de=S.currentTimeline.currentTime;const Se=M.options&&M.options.delay?Ui(M.options.delay):0;M.steps.forEach(Ge=>{const ot=S.createSubContext(M.options);Se&&ot.delayNextStep(Se),$(this,Ge,ot),de=Math.max(de,ot.currentTimeline.currentTime),j.push(ot.currentTimeline)}),j.forEach(Ge=>S.currentTimeline.mergeTimelineCollectedStyles(Ge)),S.transformIntoNewTimeline(de),S.previousNode=M}_visitTiming(M,S){if(M.dynamic){const j=M.strValue;return Rn(S.params?Bi(j,S.params,S.errors):j,S.errors)}return{duration:M.duration,delay:M.delay,easing:M.easing}}visitAnimate(M,S){const j=S.currentAnimateTimings=this._visitTiming(M.timings,S),de=S.currentTimeline;j.delay&&(S.incrementTime(j.delay),de.snapshotCurrentStyles());const Se=M.style;5==Se.type?this.visitKeyframes(Se,S):(S.incrementTime(j.duration),this.visitStyle(Se,S),de.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=M}visitStyle(M,S){const j=S.currentTimeline,de=S.currentAnimateTimings;!de&&j.getCurrentStyleProperties().length&&j.forwardFrame();const Se=de&&de.easing||M.easing;M.isEmptyStep?j.applyEmptyStep(Se):j.setStyles(M.styles,Se,S.errors,S.options),S.previousNode=M}visitKeyframes(M,S){const j=S.currentAnimateTimings,de=S.currentTimeline.duration,Se=j.duration,ot=S.createSubContext().currentTimeline;ot.easing=j.easing,M.styles.forEach(Pt=>{ot.forwardTime((Pt.offset||0)*Se),ot.setStyles(Pt.styles,Pt.easing,S.errors,S.options),ot.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(ot),S.transformIntoNewTimeline(de+Se),S.previousNode=M}visitQuery(M,S){const j=S.currentTimeline.currentTime,de=M.options||{},Se=de.delay?Ui(de.delay):0;Se&&(6===S.previousNode.type||0==j&&S.currentTimeline.getCurrentStyleProperties().length)&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=it);let Ge=j;const ot=S.invokeQuery(M.selector,M.originalSelector,M.limit,M.includeSelf,!!de.optional,S.errors);S.currentQueryTotal=ot.length;let Pt=null;ot.forEach((rn,Tn)=>{S.currentQueryIndex=Tn;const ni=S.createSubContext(M.options,rn);Se&&ni.delayNextStep(Se),rn===S.element&&(Pt=ni.currentTimeline),$(this,M.animation,ni),ni.currentTimeline.applyStylesToKeyframe(),Ge=Math.max(Ge,ni.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(Ge),Pt&&(S.currentTimeline.mergeTimelineCollectedStyles(Pt),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=M}visitStagger(M,S){const j=S.parentContext,de=S.currentTimeline,Se=M.timings,Ge=Math.abs(Se.duration),ot=Ge*(S.currentQueryTotal-1);let Pt=Ge*S.currentQueryIndex;switch(Se.duration<0?"reverse":Se.easing){case"reverse":Pt=ot-Pt;break;case"full":Pt=j.currentStaggerTime}const Tn=S.currentTimeline;Pt&&Tn.delayNextStep(Pt);const ni=Tn.currentTime;$(this,M.animation,S),S.previousNode=M,j.currentStaggerTime=de.currentTime-ni+(de.startTime-j.currentTimeline.startTime)}}const it={};class J{constructor(M,S,j,de,Se,Ge,ot,Pt){this._driver=M,this.element=S,this.subInstructions=j,this._enterClassName=de,this._leaveClassName=Se,this.errors=Ge,this.timelines=ot,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=it,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Pt||new F(this._driver,S,0),ot.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(M,S){if(!M)return;const j=M;let de=this.options;null!=j.duration&&(de.duration=Ui(j.duration)),null!=j.delay&&(de.delay=Ui(j.delay));const Se=j.params;if(Se){let Ge=de.params;Ge||(Ge=this.options.params={}),Object.keys(Se).forEach(ot=>{(!S||!Ge.hasOwnProperty(ot))&&(Ge[ot]=Bi(Se[ot],Ge,this.errors))})}}_copyOptions(){const M={};if(this.options){const S=this.options.params;if(S){const j=M.params={};Object.keys(S).forEach(de=>{j[de]=S[de]})}}return M}createSubContext(M=null,S,j){const de=S||this.element,Se=new J(this._driver,de,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(de,j||0));return Se.previousNode=this.previousNode,Se.currentAnimateTimings=this.currentAnimateTimings,Se.options=this._copyOptions(),Se.updateOptions(M),Se.currentQueryIndex=this.currentQueryIndex,Se.currentQueryTotal=this.currentQueryTotal,Se.parentContext=this,this.subContextCount++,Se}transformIntoNewTimeline(M){return this.previousNode=it,this.currentTimeline=this.currentTimeline.fork(this.element,M),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(M,S,j){const de={duration:null!=S?S:M.duration,delay:this.currentTimeline.currentTime+(null!=j?j:0)+M.delay,easing:""},Se=new K(this._driver,M.element,M.keyframes,M.preStyleProps,M.postStyleProps,de,M.stretchStartingKeyframe);return this.timelines.push(Se),de}incrementTime(M){this.currentTimeline.forwardTime(this.currentTimeline.duration+M)}delayNextStep(M){M>0&&this.currentTimeline.delayNextStep(M)}invokeQuery(M,S,j,de,Se,Ge){let ot=[];if(de&&ot.push(this.element),M.length>0){M=(M=M.replace(xn,"."+this._enterClassName)).replace(Gi,"."+this._leaveClassName);let rn=this._driver.query(this.element,M,1!=j);0!==j&&(rn=j<0?rn.slice(rn.length+j,rn.length):rn.slice(0,j)),ot.push(...rn)}return!Se&&0==ot.length&&Ge.push(`\`query("${S}")\` returned zero elements. (Use \`query("${S}", { optional: true })\` if you wish to allow this.)`),ot}}class F{constructor(M,S,j,de){this._driver=M,this.element=S,this.startTime=j,this._elementTimelineStylesLookup=de,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(M){const S=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||S?(this.forwardTime(this.currentTime+M),S&&this.snapshotCurrentStyles()):this.startTime+=M}fork(M,S){return this.applyStylesToKeyframe(),new F(this._driver,M,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(M){this.applyStylesToKeyframe(),this.duration=M,this._loadKeyframe()}_updateStyle(M,S){this._localTimelineStyles[M]=S,this._globalTimelineStyles[M]=S,this._styleSummary[M]={time:this.currentTime,value:S}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(M){M&&(this._previousKeyframe.easing=M),Object.keys(this._globalTimelineStyles).forEach(S=>{this._backFill[S]=this._globalTimelineStyles[S]||q.l3,this._currentKeyframe[S]=q.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(M,S,j,de){S&&(this._previousKeyframe.easing=S);const Se=de&&de.params||{},Ge=function De(ue,M){const S={};let j;return ue.forEach(de=>{"*"===de?(j=j||Object.keys(M),j.forEach(Se=>{S[Se]=q.l3})):xi(de,!1,S)}),S}(M,this._globalTimelineStyles);Object.keys(Ge).forEach(ot=>{const Pt=Bi(Ge[ot],Se,j);this._pendingStyles[ot]=Pt,this._localTimelineStyles.hasOwnProperty(ot)||(this._backFill[ot]=this._globalTimelineStyles.hasOwnProperty(ot)?this._globalTimelineStyles[ot]:q.l3),this._updateStyle(ot,Pt)})}applyStylesToKeyframe(){const M=this._pendingStyles,S=Object.keys(M);0!=S.length&&(this._pendingStyles={},S.forEach(j=>{this._currentKeyframe[j]=M[j]}),Object.keys(this._localTimelineStyles).forEach(j=>{this._currentKeyframe.hasOwnProperty(j)||(this._currentKeyframe[j]=this._localTimelineStyles[j])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(M=>{const S=this._localTimelineStyles[M];this._pendingStyles[M]=S,this._updateStyle(M,S)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const M=[];for(let S in this._currentKeyframe)M.push(S);return M}mergeTimelineCollectedStyles(M){Object.keys(M._styleSummary).forEach(S=>{const j=this._styleSummary[S],de=M._styleSummary[S];(!j||de.time>j.time)&&this._updateStyle(S,de.value)})}buildKeyframes(){this.applyStylesToKeyframe();const M=new Set,S=new Set,j=1===this._keyframes.size&&0===this.duration;let de=[];this._keyframes.forEach((ot,Pt)=>{const rn=xi(ot,!0);Object.keys(rn).forEach(Tn=>{const ni=rn[Tn];ni==q.k1?M.add(Tn):ni==q.l3&&S.add(Tn)}),j||(rn.offset=Pt/this.duration),de.push(rn)});const Se=M.size?Xi(M.values()):[],Ge=S.size?Xi(S.values()):[];if(j){const ot=de[0],Pt=hi(ot);ot.offset=0,Pt.offset=1,de=[ot,Pt]}return Ae(this.element,de,Se,Ge,this.duration,this.startTime,this.easing,!1)}}class K extends F{constructor(M,S,j,de,Se,Ge,ot=!1){super(M,S,Ge.delay),this.keyframes=j,this.preStyleProps=de,this.postStyleProps=Se,this._stretchStartingKeyframe=ot,this.timings={duration:Ge.duration,delay:Ge.delay,easing:Ge.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let M=this.keyframes,{delay:S,duration:j,easing:de}=this.timings;if(this._stretchStartingKeyframe&&S){const Se=[],Ge=j+S,ot=S/Ge,Pt=xi(M[0],!1);Pt.offset=0,Se.push(Pt);const rn=xi(M[0],!1);rn.offset=ge(ot),Se.push(rn);const Tn=M.length-1;for(let ni=1;ni<=Tn;ni++){let yi=xi(M[ni],!1);yi.offset=ge((S+yi.offset*j)/Ge),Se.push(yi)}j=Ge,S=0,de="",M=Se}return Ae(this.element,M,this.preStyleProps,this.postStyleProps,j,S,de,!0)}}function ge(ue,M=3){const S=Math.pow(10,M-1);return Math.round(ue*S)/S}class Je{}class Xe extends Je{normalizePropertyName(M,S){return qn(M)}normalizeStyleValue(M,S,j,de){let Se="";const Ge=j.toString().trim();if(st[S]&&0!==j&&"0"!==j)if("number"==typeof j)Se="px";else{const ot=j.match(/^[+-]?[\d\.]+([a-z]*)$/);ot&&0==ot[1].length&&de.push(`Please provide a CSS unit value for ${M}:${j}`)}return Ge+Se}}const st=(()=>function Lt(ue){const M={};return ue.forEach(S=>M[S]=!0),M}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function tn(ue,M,S,j,de,Se,Ge,ot,Pt,rn,Tn,ni,yi){return{type:0,element:ue,triggerName:M,isRemovalTransition:de,fromState:S,fromStyles:Se,toState:j,toStyles:Ge,timelines:ot,queriedElements:Pt,preStyleProps:rn,postStyleProps:Tn,totalTime:ni,errors:yi}}const Ft={};class jt{constructor(M,S,j){this._triggerName=M,this.ast=S,this._stateStyles=j}match(M,S,j,de){return function sn(ue,M,S,j,de){return ue.some(Se=>Se(M,S,j,de))}(this.ast.matchers,M,S,j,de)}buildStyles(M,S,j){const de=this._stateStyles["*"],Se=this._stateStyles[M],Ge=de?de.buildStyles(S,j):{};return Se?Se.buildStyles(S,j):Ge}build(M,S,j,de,Se,Ge,ot,Pt,rn,Tn){const ni=[],yi=this.ast.options&&this.ast.options.params||Ft,mi=this.buildStyles(j,ot&&ot.params||Ft,ni),Si=Pt&&Pt.params||Ft,Ni=this.buildStyles(de,Si,ni),ur=new Set,Fr=new Map,Wr=new Map,io="void"===de,gs={params:Object.assign(Object.assign({},yi),Si)},Po=Tn?[]:er(M,S,this.ast.animation,Se,Ge,mi,Ni,gs,rn,ni);let go=0;if(Po.forEach(Wo=>{go=Math.max(Wo.duration+Wo.delay,go)}),ni.length)return tn(S,this._triggerName,j,de,io,mi,Ni,[],[],Fr,Wr,go,ni);Po.forEach(Wo=>{const zo=Wo.element,_o=Ze(Fr,zo,{});Wo.preStyleProps.forEach(_s=>_o[_s]=!0);const Co=Ze(Wr,zo,{});Wo.postStyleProps.forEach(_s=>Co[_s]=!0),zo!==S&&ur.add(zo)});const rs=Xi(ur.values());return tn(S,this._triggerName,j,de,io,mi,Ni,Po,rs,Fr,Wr,go)}}class En{constructor(M,S,j){this.styles=M,this.defaultParams=S,this.normalizer=j}buildStyles(M,S){const j={},de=hi(this.defaultParams);return Object.keys(M).forEach(Se=>{const Ge=M[Se];null!=Ge&&(de[Se]=Ge)}),this.styles.styles.forEach(Se=>{if("string"!=typeof Se){const Ge=Se;Object.keys(Ge).forEach(ot=>{let Pt=Ge[ot];Pt.length>1&&(Pt=Bi(Pt,de,S));const rn=this.normalizer.normalizePropertyName(ot,S);Pt=this.normalizer.normalizeStyleValue(ot,rn,Pt,S),j[rn]=Pt})}}),j}}class Li{constructor(M,S,j){this.name=M,this.ast=S,this._normalizer=j,this.transitionFactories=[],this.states={},S.states.forEach(de=>{this.states[de.name]=new En(de.style,de.options&&de.options.params||{},j)}),Ci(this.states,"true","1"),Ci(this.states,"false","0"),S.transitions.forEach(de=>{this.transitionFactories.push(new jt(M,de,this.states))}),this.fallbackTransition=function li(ue,M,S){return new jt(ue,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ge,ot)=>!0],options:null,queryCount:0,depCount:0},M)}(M,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(M,S,j,de){return this.transitionFactories.find(Ge=>Ge.match(M,S,j,de))||null}matchStyles(M,S,j){return this.fallbackTransition.buildStyles(M,S,j)}}function Ci(ue,M,S){ue.hasOwnProperty(M)?ue.hasOwnProperty(S)||(ue[S]=ue[M]):ue.hasOwnProperty(S)&&(ue[M]=ue[S])}const Pn=new ye;class pi{constructor(M,S,j){this.bodyNode=M,this._driver=S,this._normalizer=j,this._animations={},this._playersById={},this.players=[]}register(M,S){const j=[],de=Hn(this._driver,S,j);if(j.length)throw new Error(`Unable to build the animation due to the following errors: ${j.join("\n")}`);this._animations[M]=de}_buildPlayer(M,S,j){const de=M.element,Se=Oe(0,this._normalizer,0,M.keyframes,S,j);return this._driver.animate(de,Se,M.duration,M.delay,M.easing,[],!0)}create(M,S,j={}){const de=[],Se=this._animations[M];let Ge;const ot=new Map;if(Se?(Ge=er(this._driver,S,Se,lt,At,{},{},j,Pn,de),Ge.forEach(Tn=>{const ni=Ze(ot,Tn.element,{});Tn.postStyleProps.forEach(yi=>ni[yi]=null)})):(de.push("The requested animation doesn't exist or has already been destroyed"),Ge=[]),de.length)throw new Error(`Unable to create the animation due to the following errors: ${de.join("\n")}`);ot.forEach((Tn,ni)=>{Object.keys(Tn).forEach(yi=>{Tn[yi]=this._driver.computeStyle(ni,yi,q.l3)})});const rn=Ke(Ge.map(Tn=>{const ni=ot.get(Tn.element);return this._buildPlayer(Tn,{},ni)}));return this._playersById[M]=rn,rn.onDestroy(()=>this.destroy(M)),this.players.push(rn),rn}destroy(M){const S=this._getPlayer(M);S.destroy(),delete this._playersById[M];const j=this.players.indexOf(S);j>=0&&this.players.splice(j,1)}_getPlayer(M){const S=this._playersById[M];if(!S)throw new Error(`Unable to find the timeline player referenced by ${M}`);return S}listen(M,S,j,de){const Se=Ve(S,"","","");return Le(this._getPlayer(M),j,Se,de),()=>{}}command(M,S,j,de){if("register"==j)return void this.register(M,de[0]);if("create"==j)return void this.create(M,S,de[0]||{});const Se=this._getPlayer(M);switch(j){case"play":Se.play();break;case"pause":Se.pause();break;case"reset":Se.reset();break;case"restart":Se.restart();break;case"finish":Se.finish();break;case"init":Se.init();break;case"setPosition":Se.setPosition(parseFloat(de[0]));break;case"destroy":this.destroy(M)}}}const rr="ng-animate-queued",br="ng-animate-disabled",Mr=[],ao={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Lo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},dr="__ng_removed";class $i{constructor(M,S=""){this.namespaceId=S;const j=M&&M.hasOwnProperty("value");if(this.value=function to(ue){return null!=ue?ue:null}(j?M.value:M),j){const Se=hi(M);delete Se.value,this.options=Se}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(M){const S=M.params;if(S){const j=this.options.params;Object.keys(S).forEach(de=>{null==j[de]&&(j[de]=S[de])})}}}const lo="void",Zo=new $i(lo);class Rr{constructor(M,S,j){this.id=M,this.hostElement=S,this._engine=j,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+M,qr(S,this._hostClassName)}listen(M,S,j,de){if(!this._triggers.hasOwnProperty(S))throw new Error(`Unable to listen on the animation trigger event "${j}" because the animation trigger "${S}" doesn't exist!`);if(null==j||0==j.length)throw new Error(`Unable to listen on the animation trigger "${S}" because the provided event is undefined!`);if(!function us(ue){return"start"==ue||"done"==ue}(j))throw new Error(`The provided animation trigger event "${j}" for the animation trigger "${S}" is not supported!`);const Se=Ze(this._elementListeners,M,[]),Ge={name:S,phase:j,callback:de};Se.push(Ge);const ot=Ze(this._engine.statesByElement,M,{});return ot.hasOwnProperty(S)||(qr(M,Kt),qr(M,Kt+"-"+S),ot[S]=Zo),()=>{this._engine.afterFlush(()=>{const Pt=Se.indexOf(Ge);Pt>=0&&Se.splice(Pt,1),this._triggers[S]||delete ot[S]})}}register(M,S){return!this._triggers[M]&&(this._triggers[M]=S,!0)}_getTrigger(M){const S=this._triggers[M];if(!S)throw new Error(`The provided animation trigger "${M}" has not been registered!`);return S}trigger(M,S,j,de=!0){const Se=this._getTrigger(S),Ge=new cs(this.id,S,M);let ot=this._engine.statesByElement.get(M);ot||(qr(M,Kt),qr(M,Kt+"-"+S),this._engine.statesByElement.set(M,ot={}));let Pt=ot[S];const rn=new $i(j,this.id);if(!(j&&j.hasOwnProperty("value"))&&Pt&&rn.absorbOptions(Pt.options),ot[S]=rn,Pt||(Pt=Zo),rn.value!==lo&&Pt.value===rn.value){if(!function Vs(ue,M){const S=Object.keys(ue),j=Object.keys(M);if(S.length!=j.length)return!1;for(let de=0;de<S.length;de++){const Se=S[de];if(!M.hasOwnProperty(Se)||ue[Se]!==M[Se])return!1}return!0}(Pt.params,rn.params)){const Si=[],Ni=Se.matchStyles(Pt.value,Pt.params,Si),ur=Se.matchStyles(rn.value,rn.params,Si);Si.length?this._engine.reportError(Si):this._engine.afterFlush(()=>{kt(M,Ni),ft(M,ur)})}return}const yi=Ze(this._engine.playersByElement,M,[]);yi.forEach(Si=>{Si.namespaceId==this.id&&Si.triggerName==S&&Si.queued&&Si.destroy()});let zi=Se.matchTransition(Pt.value,rn.value,M,rn.params),mi=!1;if(!zi){if(!de)return;zi=Se.fallbackTransition,mi=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:S,transition:zi,fromState:Pt,toState:rn,player:Ge,isFallbackTransition:mi}),mi||(qr(M,rr),Ge.onStart(()=>{No(M,rr)})),Ge.onDone(()=>{let Si=this.players.indexOf(Ge);Si>=0&&this.players.splice(Si,1);const Ni=this._engine.playersByElement.get(M);if(Ni){let ur=Ni.indexOf(Ge);ur>=0&&Ni.splice(ur,1)}}),this.players.push(Ge),yi.push(Ge),Ge}deregister(M){delete this._triggers[M],this._engine.statesByElement.forEach((S,j)=>{delete S[M]}),this._elementListeners.forEach((S,j)=>{this._elementListeners.set(j,S.filter(de=>de.name!=M))})}clearElementCache(M){this._engine.statesByElement.delete(M),this._elementListeners.delete(M);const S=this._engine.playersByElement.get(M);S&&(S.forEach(j=>j.destroy()),this._engine.playersByElement.delete(M))}_signalRemovalForInnerTriggers(M,S){const j=this._engine.driver.query(M,Ct,!0);j.forEach(de=>{if(de[dr])return;const Se=this._engine.fetchNamespacesByElement(de);Se.size?Se.forEach(Ge=>Ge.triggerLeaveAnimation(de,S,!1,!0)):this.clearElementCache(de)}),this._engine.afterFlushAnimationsDone(()=>j.forEach(de=>this.clearElementCache(de)))}triggerLeaveAnimation(M,S,j,de){const Se=this._engine.statesByElement.get(M),Ge=new Map;if(Se){const ot=[];if(Object.keys(Se).forEach(Pt=>{if(Ge.set(Pt,Se[Pt].value),this._triggers[Pt]){const rn=this.trigger(M,Pt,lo,de);rn&&ot.push(rn)}}),ot.length)return this._engine.markElementAsRemoved(this.id,M,!0,S,Ge),j&&Ke(ot).onDone(()=>this._engine.processLeaveNode(M)),!0}return!1}prepareLeaveAnimationListeners(M){const S=this._elementListeners.get(M),j=this._engine.statesByElement.get(M);if(S&&j){const de=new Set;S.forEach(Se=>{const Ge=Se.name;if(de.has(Ge))return;de.add(Ge);const Pt=this._triggers[Ge].fallbackTransition,rn=j[Ge]||Zo,Tn=new $i(lo),ni=new cs(this.id,Ge,M);this._engine.totalQueuedPlayers++,this._queue.push({element:M,triggerName:Ge,transition:Pt,fromState:rn,toState:Tn,player:ni,isFallbackTransition:!0})})}}removeNode(M,S){const j=this._engine;if(M.childElementCount&&this._signalRemovalForInnerTriggers(M,S),this.triggerLeaveAnimation(M,S,!0))return;let de=!1;if(j.totalAnimations){const Se=j.players.length?j.playersByQueriedElement.get(M):[];if(Se&&Se.length)de=!0;else{let Ge=M;for(;Ge=Ge.parentNode;)if(j.statesByElement.get(Ge)){de=!0;break}}}if(this.prepareLeaveAnimationListeners(M),de)j.markElementAsRemoved(this.id,M,!1,S);else{const Se=M[dr];(!Se||Se===ao)&&(j.afterFlush(()=>this.clearElementCache(M)),j.destroyInnerAnimations(M),j._onRemovalComplete(M,S))}}insertNode(M,S){qr(M,this._hostClassName)}drainQueuedTransitions(M){const S=[];return this._queue.forEach(j=>{const de=j.player;if(de.destroyed)return;const Se=j.element,Ge=this._elementListeners.get(Se);Ge&&Ge.forEach(ot=>{if(ot.name==j.triggerName){const Pt=Ve(Se,j.triggerName,j.fromState.value,j.toState.value);Pt._data=M,Le(j.player,ot.phase,Pt,ot.callback)}}),de.markedForDestroy?this._engine.afterFlush(()=>{de.destroy()}):S.push(j)}),this._queue=[],S.sort((j,de)=>{const Se=j.transition.ast.depCount,Ge=de.transition.ast.depCount;return 0==Se||0==Ge?Se-Ge:this._engine.driver.containsElement(j.element,de.element)?1:-1})}destroy(M){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,M)}elementContainsData(M){let S=!1;return this._elementListeners.has(M)&&(S=!0),S=!!this._queue.find(j=>j.element===M)||S,S}}class Zr{constructor(M,S,j){this.bodyNode=M,this.driver=S,this._normalizer=j,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(de,Se)=>{}}_onRemovalComplete(M,S){this.onRemovalComplete(M,S)}get queuedPlayers(){const M=[];return this._namespaceList.forEach(S=>{S.players.forEach(j=>{j.queued&&M.push(j)})}),M}createNamespace(M,S){const j=new Rr(M,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(j,S):(this.newHostElements.set(S,j),this.collectEnterElement(S)),this._namespaceLookup[M]=j}_balanceNamespaceList(M,S){const j=this._namespaceList.length-1;if(j>=0){let de=!1;for(let Se=j;Se>=0;Se--)if(this.driver.containsElement(this._namespaceList[Se].hostElement,S)){this._namespaceList.splice(Se+1,0,M),de=!0;break}de||this._namespaceList.splice(0,0,M)}else this._namespaceList.push(M);return this.namespacesByHostElement.set(S,M),M}register(M,S){let j=this._namespaceLookup[M];return j||(j=this.createNamespace(M,S)),j}registerTrigger(M,S,j){let de=this._namespaceLookup[M];de&&de.register(S,j)&&this.totalAnimations++}destroy(M,S){if(!M)return;const j=this._fetchNamespace(M);this.afterFlush(()=>{this.namespacesByHostElement.delete(j.hostElement),delete this._namespaceLookup[M];const de=this._namespaceList.indexOf(j);de>=0&&this._namespaceList.splice(de,1)}),this.afterFlushAnimationsDone(()=>j.destroy(S))}_fetchNamespace(M){return this._namespaceLookup[M]}fetchNamespacesByElement(M){const S=new Set,j=this.statesByElement.get(M);if(j){const de=Object.keys(j);for(let Se=0;Se<de.length;Se++){const Ge=j[de[Se]].namespaceId;if(Ge){const ot=this._fetchNamespace(Ge);ot&&S.add(ot)}}}return S}trigger(M,S,j,de){if(xr(S)){const Se=this._fetchNamespace(M);if(Se)return Se.trigger(S,j,de),!0}return!1}insertNode(M,S,j,de){if(!xr(S))return;const Se=S[dr];if(Se&&Se.setForRemoval){Se.setForRemoval=!1,Se.setForMove=!0;const Ge=this.collectedLeaveElements.indexOf(S);Ge>=0&&this.collectedLeaveElements.splice(Ge,1)}if(M){const Ge=this._fetchNamespace(M);Ge&&Ge.insertNode(S,j)}de&&this.collectEnterElement(S)}collectEnterElement(M){this.collectedEnterElements.push(M)}markElementAsDisabled(M,S){S?this.disabledNodes.has(M)||(this.disabledNodes.add(M),qr(M,br)):this.disabledNodes.has(M)&&(this.disabledNodes.delete(M),No(M,br))}removeNode(M,S,j,de){if(xr(S)){const Se=M?this._fetchNamespace(M):null;if(Se?Se.removeNode(S,de):this.markElementAsRemoved(M,S,!1,de),j){const Ge=this.namespacesByHostElement.get(S);Ge&&Ge.id!==M&&Ge.removeNode(S,de)}}else this._onRemovalComplete(S,de)}markElementAsRemoved(M,S,j,de,Se){this.collectedLeaveElements.push(S),S[dr]={namespaceId:M,setForRemoval:de,hasAnimation:j,removedBeforeQueried:!1,previousTriggersValues:Se}}listen(M,S,j,de,Se){return xr(S)?this._fetchNamespace(M).listen(S,j,de,Se):()=>{}}_buildInstruction(M,S,j,de,Se){return M.transition.build(this.driver,M.element,M.fromState.value,M.toState.value,j,de,M.fromState.options,M.toState.options,S,Se)}destroyInnerAnimations(M){let S=this.driver.query(M,Ct,!0);S.forEach(j=>this.destroyActiveAnimationsForElement(j)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(M,di,!0),S.forEach(j=>this.finishActiveQueriedAnimationOnElement(j)))}destroyActiveAnimationsForElement(M){const S=this.playersByElement.get(M);S&&S.forEach(j=>{j.queued?j.markedForDestroy=!0:j.destroy()})}finishActiveQueriedAnimationOnElement(M){const S=this.playersByQueriedElement.get(M);S&&S.forEach(j=>j.finish())}whenRenderingDone(){return new Promise(M=>{if(this.players.length)return Ke(this.players).onDone(()=>M());M()})}processLeaveNode(M){var S;const j=M[dr];if(j&&j.setForRemoval){if(M[dr]=ao,j.namespaceId){this.destroyInnerAnimations(M);const de=this._fetchNamespace(j.namespaceId);de&&de.clearElementCache(M)}this._onRemovalComplete(M,j.setForRemoval)}(null===(S=M.classList)||void 0===S?void 0:S.contains(br))&&this.markElementAsDisabled(M,!1),this.driver.query(M,".ng-animate-disabled",!0).forEach(de=>{this.markElementAsDisabled(de,!1)})}flush(M=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((j,de)=>this._balanceNamespaceList(j,de)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let j=0;j<this.collectedEnterElements.length;j++)qr(this.collectedEnterElements[j],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const j=[];try{S=this._flushAnimations(j,M)}finally{for(let de=0;de<j.length;de++)j[de]()}}else for(let j=0;j<this.collectedLeaveElements.length;j++)this.processLeaveNode(this.collectedLeaveElements[j]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(j=>j()),this._flushFns=[],this._whenQuietFns.length){const j=this._whenQuietFns;this._whenQuietFns=[],S.length?Ke(S).onDone(()=>{j.forEach(de=>de())}):j.forEach(de=>de())}}reportError(M){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${M.join("\n")}`)}_flushAnimations(M,S){const j=new ye,de=[],Se=new Map,Ge=[],ot=new Map,Pt=new Map,rn=new Map,Tn=new Set;this.disabledNodes.forEach(ii=>{Tn.add(ii);const si=this.driver.query(ii,".ng-animate-queued",!0);for(let Ri=0;Ri<si.length;Ri++)Tn.add(si[Ri])});const ni=this.bodyNode,yi=Array.from(this.statesByElement.keys()),zi=Ur(yi,this.collectedEnterElements),mi=new Map;let Si=0;zi.forEach((ii,si)=>{const Ri=lt+Si++;mi.set(si,Ri),ii.forEach(Ai=>qr(Ai,Ri))});const Ni=[],ur=new Set,Fr=new Set;for(let ii=0;ii<this.collectedLeaveElements.length;ii++){const si=this.collectedLeaveElements[ii],Ri=si[dr];Ri&&Ri.setForRemoval&&(Ni.push(si),ur.add(si),Ri.hasAnimation?this.driver.query(si,".ng-star-inserted",!0).forEach(Ai=>ur.add(Ai)):Fr.add(si))}const Wr=new Map,io=Ur(yi,Array.from(ur));io.forEach((ii,si)=>{const Ri=At+Si++;Wr.set(si,Ri),ii.forEach(Ai=>qr(Ai,Ri))}),M.push(()=>{zi.forEach((ii,si)=>{const Ri=mi.get(si);ii.forEach(Ai=>No(Ai,Ri))}),io.forEach((ii,si)=>{const Ri=Wr.get(si);ii.forEach(Ai=>No(Ai,Ri))}),Ni.forEach(ii=>{this.processLeaveNode(ii)})});const gs=[],Po=[];for(let ii=this._namespaceList.length-1;ii>=0;ii--)this._namespaceList[ii].drainQueuedTransitions(S).forEach(Ri=>{const Ai=Ri.player,Dr=Ri.element;if(gs.push(Ai),this.collectedEnterElements.length){const wr=Dr[dr];if(wr&&wr.setForMove){if(wr.previousTriggersValues&&wr.previousTriggersValues.has(Ri.triggerName)){const Yr=wr.previousTriggersValues.get(Ri.triggerName),Fn=this.statesByElement.get(Ri.element);Fn&&Fn[Ri.triggerName]&&(Fn[Ri.triggerName].value=Yr)}return void Ai.destroy()}}const ar=!ni||!this.driver.containsElement(ni,Dr),Hr=Wr.get(Dr),Hs=mi.get(Dr),Sr=this._buildInstruction(Ri,j,Hs,Hr,ar);if(Sr.errors&&Sr.errors.length)return void Po.push(Sr);if(ar)return Ai.onStart(()=>kt(Dr,Sr.fromStyles)),Ai.onDestroy(()=>ft(Dr,Sr.toStyles)),void de.push(Ai);if(Ri.isFallbackTransition)return Ai.onStart(()=>kt(Dr,Sr.fromStyles)),Ai.onDestroy(()=>ft(Dr,Sr.toStyles)),void de.push(Ai);const Eo=[];Sr.timelines.forEach(wr=>{wr.stretchStartingKeyframe=!0,this.disabledNodes.has(wr.element)||Eo.push(wr)}),Sr.timelines=Eo,j.append(Dr,Sr.timelines),Ge.push({instruction:Sr,player:Ai,element:Dr}),Sr.queriedElements.forEach(wr=>Ze(ot,wr,[]).push(Ai)),Sr.preStyleProps.forEach((wr,Yr)=>{const Fn=Object.keys(wr);if(Fn.length){let Do=Pt.get(Yr);Do||Pt.set(Yr,Do=new Set),Fn.forEach(ys=>Do.add(ys))}}),Sr.postStyleProps.forEach((wr,Yr)=>{const Fn=Object.keys(wr);let Do=rn.get(Yr);Do||rn.set(Yr,Do=new Set),Fn.forEach(ys=>Do.add(ys))})});if(Po.length){const ii=[];Po.forEach(si=>{ii.push(`@${si.triggerName} has failed due to:\n`),si.errors.forEach(Ri=>ii.push(`- ${Ri}\n`))}),gs.forEach(si=>si.destroy()),this.reportError(ii)}const go=new Map,rs=new Map;Ge.forEach(ii=>{const si=ii.element;j.has(si)&&(rs.set(si,si),this._beforeAnimationBuild(ii.player.namespaceId,ii.instruction,go))}),de.forEach(ii=>{const si=ii.element;this._getPreviousPlayers(si,!1,ii.namespaceId,ii.triggerName,null).forEach(Ai=>{Ze(go,si,[]).push(Ai),Ai.destroy()})});const Wo=Ni.filter(ii=>Ts(ii,Pt,rn)),zo=new Map;bo(zo,this.driver,Fr,rn,q.l3).forEach(ii=>{Ts(ii,Pt,rn)&&Wo.push(ii)});const Co=new Map;zi.forEach((ii,si)=>{bo(Co,this.driver,new Set(ii),Pt,q.k1)}),Wo.forEach(ii=>{const si=zo.get(ii),Ri=Co.get(ii);zo.set(ii,Object.assign(Object.assign({},si),Ri))});const _s=[],Va=[],ta={};Ge.forEach(ii=>{const{element:si,player:Ri,instruction:Ai}=ii;if(j.has(si)){if(Tn.has(si))return Ri.onDestroy(()=>ft(si,Ai.toStyles)),Ri.disabled=!0,Ri.overrideTotalTime(Ai.totalTime),void de.push(Ri);let Dr=ta;if(rs.size>1){let Hr=si;const Hs=[];for(;Hr=Hr.parentNode;){const Sr=rs.get(Hr);if(Sr){Dr=Sr;break}Hs.push(Hr)}Hs.forEach(Sr=>rs.set(Sr,Dr))}const ar=this._buildAnimation(Ri.namespaceId,Ai,go,Se,Co,zo);if(Ri.setRealPlayer(ar),Dr===ta)_s.push(Ri);else{const Hr=this.playersByElement.get(Dr);Hr&&Hr.length&&(Ri.parentPlayer=Ke(Hr)),de.push(Ri)}}else kt(si,Ai.fromStyles),Ri.onDestroy(()=>ft(si,Ai.toStyles)),Va.push(Ri),Tn.has(si)&&de.push(Ri)}),Va.forEach(ii=>{const si=Se.get(ii.element);if(si&&si.length){const Ri=Ke(si);ii.setRealPlayer(Ri)}}),de.forEach(ii=>{ii.parentPlayer?ii.syncPlayerEvents(ii.parentPlayer):ii.destroy()});for(let ii=0;ii<Ni.length;ii++){const si=Ni[ii],Ri=si[dr];if(No(si,At),Ri&&Ri.hasAnimation)continue;let Ai=[];if(ot.size){let ar=ot.get(si);ar&&ar.length&&Ai.push(...ar);let Hr=this.driver.query(si,di,!0);for(let Hs=0;Hs<Hr.length;Hs++){let Sr=ot.get(Hr[Hs]);Sr&&Sr.length&&Ai.push(...Sr)}}const Dr=Ai.filter(ar=>!ar.destroyed);Dr.length?Ss(this,si,Dr):this.processLeaveNode(si)}return Ni.length=0,_s.forEach(ii=>{this.players.push(ii),ii.onDone(()=>{ii.destroy();const si=this.players.indexOf(ii);this.players.splice(si,1)}),ii.play()}),_s}elementContainsData(M,S){let j=!1;const de=S[dr];return de&&de.setForRemoval&&(j=!0),this.playersByElement.has(S)&&(j=!0),this.playersByQueriedElement.has(S)&&(j=!0),this.statesByElement.has(S)&&(j=!0),this._fetchNamespace(M).elementContainsData(S)||j}afterFlush(M){this._flushFns.push(M)}afterFlushAnimationsDone(M){this._whenQuietFns.push(M)}_getPreviousPlayers(M,S,j,de,Se){let Ge=[];if(S){const ot=this.playersByQueriedElement.get(M);ot&&(Ge=ot)}else{const ot=this.playersByElement.get(M);if(ot){const Pt=!Se||Se==lo;ot.forEach(rn=>{rn.queued||!Pt&&rn.triggerName!=de||Ge.push(rn)})}}return(j||de)&&(Ge=Ge.filter(ot=>!(j&&j!=ot.namespaceId||de&&de!=ot.triggerName))),Ge}_beforeAnimationBuild(M,S,j){const Se=S.element,Ge=S.isRemovalTransition?void 0:M,ot=S.isRemovalTransition?void 0:S.triggerName;for(const Pt of S.timelines){const rn=Pt.element,Tn=rn!==Se,ni=Ze(j,rn,[]);this._getPreviousPlayers(rn,Tn,Ge,ot,S.toState).forEach(zi=>{const mi=zi.getRealPlayer();mi.beforeDestroy&&mi.beforeDestroy(),zi.destroy(),ni.push(zi)})}kt(Se,S.fromStyles)}_buildAnimation(M,S,j,de,Se,Ge){const ot=S.triggerName,Pt=S.element,rn=[],Tn=new Set,ni=new Set,yi=S.timelines.map(mi=>{const Si=mi.element;Tn.add(Si);const Ni=Si[dr];if(Ni&&Ni.removedBeforeQueried)return new q.ZN(mi.duration,mi.delay);const ur=Si!==Pt,Fr=function Ir(ue){const M=[];return Xo(ue,M),M}((j.get(Si)||Mr).map(go=>go.getRealPlayer())).filter(go=>!!go.element&&go.element===Si),Wr=Se.get(Si),io=Ge.get(Si),gs=Oe(0,this._normalizer,0,mi.keyframes,Wr,io),Po=this._buildPlayer(mi,gs,Fr);if(mi.subTimeline&&de&&ni.add(Si),ur){const go=new cs(M,ot,Si);go.setRealPlayer(Po),rn.push(go)}return Po});rn.forEach(mi=>{Ze(this.playersByQueriedElement,mi.element,[]).push(mi),mi.onDone(()=>function zs(ue,M,S){let j;if(ue instanceof Map){if(j=ue.get(M),j){if(j.length){const de=j.indexOf(S);j.splice(de,1)}0==j.length&&ue.delete(M)}}else if(j=ue[M],j){if(j.length){const de=j.indexOf(S);j.splice(de,1)}0==j.length&&delete ue[M]}return j}(this.playersByQueriedElement,mi.element,mi))}),Tn.forEach(mi=>qr(mi,yn));const zi=Ke(yi);return zi.onDestroy(()=>{Tn.forEach(mi=>No(mi,yn)),ft(Pt,S.toStyles)}),ni.forEach(mi=>{Ze(de,mi,[]).push(zi)}),zi}_buildPlayer(M,S,j){return S.length>0?this.driver.animate(M.element,S,M.duration,M.delay,M.easing,j):new q.ZN(M.duration,M.delay)}}class cs{constructor(M,S,j){this.namespaceId=M,this.triggerName=S,this.element=j,this._player=new q.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(M){this._containsRealPlayer||(this._player=M,Object.keys(this._queuedCallbacks).forEach(S=>{this._queuedCallbacks[S].forEach(j=>Le(M,S,void 0,j))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(M.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(M){this.totalTime=M}syncPlayerEvents(M){const S=this._player;S.triggerCallback&&M.onStart(()=>S.triggerCallback("start")),M.onDone(()=>this.finish()),M.onDestroy(()=>this.destroy())}_queueEvent(M,S){Ze(this._queuedCallbacks,M,[]).push(S)}onDone(M){this.queued&&this._queueEvent("done",M),this._player.onDone(M)}onStart(M){this.queued&&this._queueEvent("start",M),this._player.onStart(M)}onDestroy(M){this.queued&&this._queueEvent("destroy",M),this._player.onDestroy(M)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(M){this.queued||this._player.setPosition(M)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(M){const S=this._player;S.triggerCallback&&S.triggerCallback(M)}}function xr(ue){return ue&&1===ue.nodeType}function ds(ue,M){const S=ue.style.display;return ue.style.display=null!=M?M:"none",S}function bo(ue,M,S,j,de){const Se=[];S.forEach(Pt=>Se.push(ds(Pt)));const Ge=[];j.forEach((Pt,rn)=>{const Tn={};Pt.forEach(ni=>{const yi=Tn[ni]=M.computeStyle(rn,ni,de);(!yi||0==yi.length)&&(rn[dr]=Lo,Ge.push(rn))}),ue.set(rn,Tn)});let ot=0;return S.forEach(Pt=>ds(Pt,Se[ot++])),Ge}function Ur(ue,M){const S=new Map;if(ue.forEach(ot=>S.set(ot,[])),0==M.length)return S;const de=new Set(M),Se=new Map;function Ge(ot){if(!ot)return 1;let Pt=Se.get(ot);if(Pt)return Pt;const rn=ot.parentNode;return Pt=S.has(rn)?rn:de.has(rn)?1:Ge(rn),Se.set(ot,Pt),Pt}return M.forEach(ot=>{const Pt=Ge(ot);1!==Pt&&S.get(Pt).push(ot)}),S}function qr(ue,M){var S;null===(S=ue.classList)||void 0===S||S.add(M)}function No(ue,M){var S;null===(S=ue.classList)||void 0===S||S.remove(M)}function Ss(ue,M,S){Ke(S).onDone(()=>ue.processLeaveNode(M))}function Xo(ue,M){for(let S=0;S<ue.length;S++){const j=ue[S];j instanceof q.ZE?Xo(j.players,M):M.push(j)}}function Ts(ue,M,S){const j=S.get(ue);if(!j)return!1;let de=M.get(ue);return de?j.forEach(Se=>de.add(Se)):M.set(ue,j),S.delete(ue),!0}class As{constructor(M,S,j){this.bodyNode=M,this._driver=S,this._normalizer=j,this._triggerCache={},this.onRemovalComplete=(de,Se)=>{},this._transitionEngine=new Zr(M,S,j),this._timelineEngine=new pi(M,S,j),this._transitionEngine.onRemovalComplete=(de,Se)=>this.onRemovalComplete(de,Se)}registerTrigger(M,S,j,de,Se){const Ge=M+"-"+de;let ot=this._triggerCache[Ge];if(!ot){const Pt=[],rn=Hn(this._driver,Se,Pt);if(Pt.length)throw new Error(`The animation trigger "${de}" has failed to build due to the following errors:\n - ${Pt.join("\n - ")}`);ot=function zn(ue,M,S){return new Li(ue,M,S)}(de,rn,this._normalizer),this._triggerCache[Ge]=ot}this._transitionEngine.registerTrigger(S,de,ot)}register(M,S){this._transitionEngine.register(M,S)}destroy(M,S){this._transitionEngine.destroy(M,S)}onInsert(M,S,j,de){this._transitionEngine.insertNode(M,S,j,de)}onRemove(M,S,j,de){this._transitionEngine.removeNode(M,S,de||!1,j)}disableAnimations(M,S){this._transitionEngine.markElementAsDisabled(M,S)}process(M,S,j,de){if("@"==j.charAt(0)){const[Se,Ge]=Be(j);this._timelineEngine.command(Se,S,Ge,de)}else this._transitionEngine.trigger(M,S,j,de)}listen(M,S,j,de,Se){if("@"==j.charAt(0)){const[Ge,ot]=Be(j);return this._timelineEngine.listen(Ge,S,ot,Se)}return this._transitionEngine.listen(M,S,j,de,Se)}flush(M=-1){this._transitionEngine.flush(M)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function no(ue,M){let S=null,j=null;return Array.isArray(M)&&M.length?(S=Rs(M[0]),M.length>1&&(j=Rs(M[M.length-1]))):M&&(S=Rs(M)),S||j?new da(ue,S,j):null}let da=(()=>{class ue{constructor(S,j,de){this._element=S,this._startStyles=j,this._endStyles=de,this._state=0;let Se=ue.initialStylesByElement.get(S);Se||ue.initialStylesByElement.set(S,Se={}),this._initialStyles=Se}start(){this._state<1&&(this._startStyles&&ft(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ft(this._element,this._initialStyles),this._endStyles&&(ft(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ue.initialStylesByElement.delete(this._element),this._startStyles&&(kt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kt(this._element,this._endStyles),this._endStyles=null),ft(this._element,this._initialStyles),this._state=3)}}return ue.initialStylesByElement=new WeakMap,ue})();function Rs(ue){let M=null;const S=Object.keys(ue);for(let j=0;j<S.length;j++){const de=S[j];ha(de)&&(M=M||{},M[de]=ue[de])}return M}function ha(ue){return"display"===ue||"position"===ue}const Us="animation",es="animationend";class Da{constructor(M,S,j,de,Se,Ge,ot){this._element=M,this._name=S,this._duration=j,this._delay=de,this._easing=Se,this._fillMode=Ge,this._onDoneFn=ot,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=Pt=>this._handleCallback(Pt)}apply(){(function za(ue,M){const S=ps(ue,"").trim();let j=0;S.length&&(j=function Bo(ue,M){let S=0;for(let j=0;j<ue.length;j++)ue.charAt(j)===M&&S++;return S}(S,",")+1,M=`${S}, ${M}`),xo(ue,"",M)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Pr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){co(this._element,this._name,"paused")}resume(){co(this._element,this._name,"running")}setPosition(M){const S=hs(this._element,this._name);this._position=M*this._duration,xo(this._element,"Delay",`-${this._position}ms`,S)}getPosition(){return this._position}_handleCallback(M){const S=M._ngTestManualTimestamp||Date.now(),j=1e3*parseFloat(M.elapsedTime.toFixed(3));M.animationName==this._name&&Math.max(S-this._startTime,0)>=this._delay&&j>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Pr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Io(ue,M){const j=ps(ue,"").split(","),de=qo(j,M);de>=0&&(j.splice(de,1),xo(ue,"",j.join(",")))}(this._element,this._name))}}function co(ue,M,S){xo(ue,"PlayState",S,hs(ue,M))}function hs(ue,M){const S=ps(ue,"");return S.indexOf(",")>0?qo(S.split(","),M):qo([S],M)}function qo(ue,M){for(let S=0;S<ue.length;S++)if(ue[S].indexOf(M)>=0)return S;return-1}function Pr(ue,M,S){S?ue.removeEventListener(es,M):ue.addEventListener(es,M)}function xo(ue,M,S,j){const de=Us+M;if(null!=j){const Se=ue.style[de];if(Se.length){const Ge=Se.split(",");Ge[j]=S,S=Ge.join(",")}}ue.style[de]=S}function ps(ue,M){return ue.style[Us+M]||""}class ns{constructor(M,S,j,de,Se,Ge,ot,Pt){this.element=M,this.keyframes=S,this.animationName=j,this._duration=de,this._delay=Se,this._finalStyles=ot,this._specialStyles=Pt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ge||"linear",this.totalTime=de+Se,this._buildStyler()}onStart(M){this._onStartFns.push(M)}onDone(M){this._onDoneFns.push(M)}onDestroy(M){this._onDestroyFns.push(M)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(M=>M()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(M=>M()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(M=>M()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(M){this._styler.setPosition(M)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Da(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(M){const S="start"==M?this._onStartFns:this._onDoneFns;S.forEach(j=>j()),S.length=0}beforeDestroy(){this.init();const M={};if(this.hasStarted()){const S=this._state>=3;Object.keys(this._finalStyles).forEach(j=>{"offset"!=j&&(M[j]=S?this._finalStyles[j]:U(this.element,j))})}this.currentSnapshot=M}}class Fs extends q.ZN{constructor(M,S){super(),this.element=M,this._startingStyles={},this.__initialized=!1,this._styles=rt(S)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(M=>{this._startingStyles[M]=this.element.style[M]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(M=>this.element.style.setProperty(M,this._styles[M])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(M=>{const S=this._startingStyles[M];S?this.element.style.setProperty(M,S):this.element.style.removeProperty(M)}),this._startingStyles=null,super.destroy())}}class Ls{constructor(){this._count=0}validateStyleProperty(M){return Ht(M)}matchesElement(M,S){return!1}containsElement(M,S){return Dt(M,S)}query(M,S,j){return Fe(M,S,j)}computeStyle(M,S,j){return window.getComputedStyle(M)[S]}buildKeyframeElement(M,S,j){j=j.map(ot=>rt(ot));let de=`@keyframes ${S} {\n`,Se="";j.forEach(ot=>{Se=" ";const Pt=parseFloat(ot.offset);de+=`${Se}${100*Pt}% {\n`,Se+=" ",Object.keys(ot).forEach(rn=>{const Tn=ot[rn];switch(rn){case"offset":return;case"easing":return void(Tn&&(de+=`${Se}animation-timing-function: ${Tn};\n`));default:return void(de+=`${Se}${rn}: ${Tn};\n`)}}),de+=`${Se}}\n`}),de+="}\n";const Ge=document.createElement("style");return Ge.textContent=de,Ge}animate(M,S,j,de,Se,Ge=[],ot){const Pt=Ge.filter(Ni=>Ni instanceof ns),rn={};Zn(j,de)&&Pt.forEach(Ni=>{let ur=Ni.currentSnapshot;Object.keys(ur).forEach(Fr=>rn[Fr]=ur[Fr])});const Tn=function is(ue){let M={};return ue&&(Array.isArray(ue)?ue:[ue]).forEach(j=>{Object.keys(j).forEach(de=>{"offset"==de||"easing"==de||(M[de]=j[de])})}),M}(S=St(M,S,rn));if(0==j)return new Fs(M,Tn);const ni="gen_css_kf_"+this._count++,yi=this.buildKeyframeElement(M,ni,S);(function ho(ue){var M;const S=null===(M=ue.getRootNode)||void 0===M?void 0:M.call(ue);return"undefined"!=typeof ShadowRoot&&S instanceof ShadowRoot?S:document.head})(M).appendChild(yi);const mi=no(M,S),Si=new ns(M,S,ni,j,de,Se,Tn,mi);return Si.onDestroy(()=>function Ps(ue){ue.parentNode.removeChild(ue)}(yi)),Si}}class ea{constructor(M,S,j,de){this.element=M,this.keyframes=S,this.options=j,this._specialStyles=de,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=j.duration,this._delay=j.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(M=>M()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const M=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,M,this.options),this._finalKeyframe=M.length?M[M.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(M,S,j){return M.animate(S,j)}onStart(M){this._onStartFns.push(M)}onDone(M){this._onDoneFns.push(M)}onDestroy(M){this._onDestroyFns.push(M)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(M=>M()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(M=>M()),this._onDestroyFns=[])}setPosition(M){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=M*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const M={};if(this.hasStarted()){const S=this._finalKeyframe;Object.keys(S).forEach(j=>{"offset"!=j&&(M[j]=this._finished?S[j]:U(this.element,j))})}this.currentSnapshot=M}triggerCallback(M){const S="start"==M?this._onStartFns:this._onDoneFns;S.forEach(j=>j()),S.length=0}}class Ma{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(te().toString()),this._cssKeyframesDriver=new Ls}validateStyleProperty(M){return Ht(M)}matchesElement(M,S){return!1}containsElement(M,S){return Dt(M,S)}query(M,S,j){return Fe(M,S,j)}computeStyle(M,S,j){return window.getComputedStyle(M)[S]}overrideWebAnimationsSupport(M){this._isNativeImpl=M}animate(M,S,j,de,Se,Ge=[],ot){if(!ot&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(M,S,j,de,Se,Ge);const Tn={duration:j,delay:de,fill:0==de?"both":"forwards"};Se&&(Tn.easing=Se);const ni={},yi=Ge.filter(mi=>mi instanceof ea);Zn(j,de)&&yi.forEach(mi=>{let Si=mi.currentSnapshot;Object.keys(Si).forEach(Ni=>ni[Ni]=Si[Ni])});const zi=no(M,S=St(M,S=S.map(mi=>xi(mi,!1)),ni));return new ea(M,S,Tn,zi)}}function te(){return g()&&Element.prototype.animate||{}}var ve=V(9808);let ne=(()=>{class ue extends q._j{constructor(S,j){super(),this._nextAnimationId=0,this._renderer=S.createRenderer(j.body,{id:"0",encapsulation:D.ifc.None,styles:[],data:{animation:[]}})}build(S){const j=this._nextAnimationId.toString();this._nextAnimationId++;const de=Array.isArray(S)?(0,q.vP)(S):S;return Yt(this._renderer,null,j,"register",[de]),new Ee(j,this._renderer)}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(D.FYo),D.LFG(ve.K0))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class Ee extends q.LC{constructor(M,S){super(),this._id=M,this._renderer=S}create(M,S){return new ct(this._id,M,S||{},this._renderer)}}class ct{constructor(M,S,j,de){this.id=M,this.element=S,this._renderer=de,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",j)}_listen(M,S){return this._renderer.listen(this.element,`@@${this.id}:${M}`,S)}_command(M,...S){return Yt(this._renderer,this.element,this.id,M,S)}onDone(M){this._listen("done",M)}onStart(M){this._listen("start",M)}onDestroy(M){this._listen("destroy",M)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(M){this._command("setPosition",M)}getPosition(){var M,S;return null!==(S=null===(M=this._renderer.engine.players[+this.id])||void 0===M?void 0:M.getPosition())&&void 0!==S?S:0}}function Yt(ue,M,S,j,de){return ue.setProperty(M,`@@${S}:${j}`,de)}const Mn="@.disabled";let Di=(()=>{class ue{constructor(S,j,de){this.delegate=S,this.engine=j,this._zone=de,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),j.onRemovalComplete=(Se,Ge)=>{const ot=null==Ge?void 0:Ge.parentNode(Se);ot&&Ge.removeChild(ot,Se)}}createRenderer(S,j){const Se=this.delegate.createRenderer(S,j);if(!(S&&j&&j.data&&j.data.animation)){let Tn=this._rendererCache.get(Se);return Tn||(Tn=new ai("",Se,this.engine),this._rendererCache.set(Se,Tn)),Tn}const Ge=j.id,ot=j.id+"-"+this._currentId;this._currentId++,this.engine.register(ot,S);const Pt=Tn=>{Array.isArray(Tn)?Tn.forEach(Pt):this.engine.registerTrigger(Ge,ot,S,Tn.name,Tn)};return j.data.animation.forEach(Pt),new mr(this,ot,Se,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(S,j,de){S>=0&&S<this._microtaskId?this._zone.run(()=>j(de)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Se=>{const[Ge,ot]=Se;Ge(ot)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([j,de]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(D.FYo),D.LFG(As),D.LFG(D.R0b))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();class ai{constructor(M,S,j){this.namespaceId=M,this.delegate=S,this.engine=j,this.destroyNode=this.delegate.destroyNode?de=>S.destroyNode(de):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(M,S){return this.delegate.createElement(M,S)}createComment(M){return this.delegate.createComment(M)}createText(M){return this.delegate.createText(M)}appendChild(M,S){this.delegate.appendChild(M,S),this.engine.onInsert(this.namespaceId,S,M,!1)}insertBefore(M,S,j,de=!0){this.delegate.insertBefore(M,S,j),this.engine.onInsert(this.namespaceId,S,M,de)}removeChild(M,S,j){this.engine.onRemove(this.namespaceId,S,this.delegate,j)}selectRootElement(M,S){return this.delegate.selectRootElement(M,S)}parentNode(M){return this.delegate.parentNode(M)}nextSibling(M){return this.delegate.nextSibling(M)}setAttribute(M,S,j,de){this.delegate.setAttribute(M,S,j,de)}removeAttribute(M,S,j){this.delegate.removeAttribute(M,S,j)}addClass(M,S){this.delegate.addClass(M,S)}removeClass(M,S){this.delegate.removeClass(M,S)}setStyle(M,S,j,de){this.delegate.setStyle(M,S,j,de)}removeStyle(M,S,j){this.delegate.removeStyle(M,S,j)}setProperty(M,S,j){"@"==S.charAt(0)&&S==Mn?this.disableAnimations(M,!!j):this.delegate.setProperty(M,S,j)}setValue(M,S){this.delegate.setValue(M,S)}listen(M,S,j){return this.delegate.listen(M,S,j)}disableAnimations(M,S){this.engine.disableAnimations(M,S)}}class mr extends ai{constructor(M,S,j,de){super(S,j,de),this.factory=M,this.namespaceId=S}setProperty(M,S,j){"@"==S.charAt(0)?"."==S.charAt(1)&&S==Mn?this.disableAnimations(M,j=void 0===j||!!j):this.engine.process(this.namespaceId,M,S.substr(1),j):this.delegate.setProperty(M,S,j)}listen(M,S,j){if("@"==S.charAt(0)){const de=function ci(ue){switch(ue){case"body":return document.body;case"document":return document;case"window":return window;default:return ue}}(M);let Se=S.substr(1),Ge="";return"@"!=Se.charAt(0)&&([Se,Ge]=function Q(ue){const M=ue.indexOf(".");return[ue.substring(0,M),ue.substr(M+1)]}(Se)),this.engine.listen(this.namespaceId,de,Se,Ge,ot=>{this.factory.scheduleListenerCallback(ot._data||-1,j,ot)})}return this.delegate.listen(M,S,j)}}let W=(()=>{class ue extends As{constructor(S,j,de){super(S.body,j,de)}ngOnDestroy(){this.flush()}}return ue.\u0275fac=function(S){return new(S||ue)(D.LFG(ve.K0),D.LFG(Bt),D.LFG(Je))},ue.\u0275prov=D.Yz7({token:ue,factory:ue.\u0275fac}),ue})();const fi=new D.OlP("AnimationModuleType"),gr=[{provide:q._j,useClass:ne},{provide:Je,useFactory:function Me(){return new Xe}},{provide:As,useClass:W},{provide:D.FYo,useFactory:function $t(ue,M,S){return new Di(ue,M,S)},deps:[l.se,As,D.R0b]}],jr=[{provide:Bt,useFactory:function B(){return function Or(){return"function"==typeof te()}()?new Ma:new Ls}},{provide:fi,useValue:"BrowserAnimations"},...gr],ms=[{provide:Bt,useClass:nn},{provide:fi,useValue:"NoopAnimations"},...gr];let wo=(()=>{class ue{static withConfig(S){return{ngModule:ue,providers:S.disableAnimations?ms:jr}}}return ue.\u0275fac=function(S){return new(S||ue)},ue.\u0275mod=D.oAB({type:ue}),ue.\u0275inj=D.cJS({providers:jr,imports:[l.b2]}),ue})()},2313:(On,wt,V)=>{"use strict";V.d(wt,{b2:()=>Xi,H7:()=>xn,q6:()=>Jn,se:()=>Kt});var D=V(9808),l=V(5e3);class q extends D.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class g extends q{static makeCurrent(){(0,D.HT)(new g)}onAndCancel(it,J,F){return it.addEventListener(J,F,!1),()=>{it.removeEventListener(J,F,!1)}}dispatchEvent(it,J){it.dispatchEvent(J)}remove(it){it.parentNode&&it.parentNode.removeChild(it)}createElement(it,J){return(J=J||this.getDefaultDocument()).createElement(it)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(it){return it.nodeType===Node.ELEMENT_NODE}isShadowRoot(it){return it instanceof DocumentFragment}getGlobalEventTarget(it,J){return"window"===J?window:"document"===J?it:"body"===J?it.body:null}getBaseHref(it){const J=function Ke(){return $e=$e||document.querySelector("base"),$e?$e.getAttribute("href"):null}();return null==J?null:function Le(Tt){Oe=Oe||document.createElement("a"),Oe.setAttribute("href",Tt);const it=Oe.pathname;return"/"===it.charAt(0)?it:`/${it}`}(J)}resetBaseElement(){$e=null}getUserAgent(){return window.navigator.userAgent}getCookie(it){return(0,D.Mx)(document.cookie,it)}}let Oe,$e=null;const he=new l.OlP("TRANSITION_ID"),Ze=[{provide:l.ip1,useFactory:function Ve(Tt,it,J){return()=>{J.get(l.CZH).donePromise.then(()=>{const F=(0,D.q)(),K=it.querySelectorAll(`style[ng-transition="${Tt}"]`);for(let ge=0;ge<K.length;ge++)F.remove(K[ge])})}},deps:[he,D.K0,l.zs3],multi:!0}];class Be{static init(){(0,l.VLi)(new Be)}addToWindow(it){l.dqk.getAngularTestability=(F,K=!0)=>{const ge=it.findTestabilityInTree(F,K);if(null==ge)throw new Error("Could not find testability for element.");return ge},l.dqk.getAllAngularTestabilities=()=>it.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>it.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(F=>{const K=l.dqk.getAllAngularTestabilities();let ge=K.length,De=!1;const ke=function(Je){De=De||Je,ge--,0==ge&&F(De)};K.forEach(function(Je){Je.whenStable(ke)})})}findTestabilityInTree(it,J,F){if(null==J)return null;const K=it.getTestability(J);return null!=K?K:F?(0,D.q)().isShadowRoot(J)?this.findTestabilityInTree(it,J.host,!0):this.findTestabilityInTree(it,J.parentElement,!0):null}}let gt=(()=>{class Tt{build(){return new XMLHttpRequest}}return Tt.\u0275fac=function(J){return new(J||Tt)},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const Ye=new l.OlP("EventManagerPlugins");let tt=(()=>{class Tt{constructor(J,F){this._zone=F,this._eventNameToPlugin=new Map,J.forEach(K=>K.manager=this),this._plugins=J.slice().reverse()}addEventListener(J,F,K){return this._findPluginFor(F).addEventListener(J,F,K)}addGlobalEventListener(J,F,K){return this._findPluginFor(F).addGlobalEventListener(J,F,K)}getZone(){return this._zone}_findPluginFor(J){const F=this._eventNameToPlugin.get(J);if(F)return F;const K=this._plugins;for(let ge=0;ge<K.length;ge++){const De=K[ge];if(De.supports(J))return this._eventNameToPlugin.set(J,De),De}throw new Error(`No event manager plugin found for event ${J}`)}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(Ye),l.LFG(l.R0b))},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();class Mt{constructor(it){this._doc=it}addGlobalEventListener(it,J,F){const K=(0,D.q)().getGlobalEventTarget(this._doc,it);if(!K)throw new Error(`Unsupported event target ${K} for event ${J}`);return this.addEventListener(K,J,F)}}let He=(()=>{class Tt{constructor(){this._stylesSet=new Set}addStyles(J){const F=new Set;J.forEach(K=>{this._stylesSet.has(K)||(this._stylesSet.add(K),F.add(K))}),this.onStylesAdded(F)}onStylesAdded(J){}getAllStyles(){return Array.from(this._stylesSet)}}return Tt.\u0275fac=function(J){return new(J||Tt)},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),Vt=(()=>{class Tt extends He{constructor(J){super(),this._doc=J,this._hostNodes=new Map,this._hostNodes.set(J.head,[])}_addStylesToHost(J,F,K){J.forEach(ge=>{const De=this._doc.createElement("style");De.textContent=ge,K.push(F.appendChild(De))})}addHost(J){const F=[];this._addStylesToHost(this._stylesSet,J,F),this._hostNodes.set(J,F)}removeHost(J){const F=this._hostNodes.get(J);F&&F.forEach(Ht),this._hostNodes.delete(J)}onStylesAdded(J){this._hostNodes.forEach((F,K)=>{this._addStylesToHost(J,K,F)})}ngOnDestroy(){this._hostNodes.forEach(J=>J.forEach(Ht))}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(D.K0))},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();function Ht(Tt){(0,D.q)().remove(Tt)}const an={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function mt(Tt,it,J){for(let F=0;F<it.length;F++){let K=it[F];Array.isArray(K)?mt(Tt,K,J):(K=K.replace(Dt,Tt),J.push(K))}return J}function lt(Tt){return it=>{if("__ngUnwrap__"===it)return Tt;!1===Tt(it)&&(it.preventDefault(),it.returnValue=!1)}}let Kt=(()=>{class Tt{constructor(J,F,K){this.eventManager=J,this.sharedStylesHost=F,this.appId=K,this.rendererByCompId=new Map,this.defaultRenderer=new Ct(J)}createRenderer(J,F){if(!J||!F)return this.defaultRenderer;switch(F.encapsulation){case l.ifc.Emulated:{let K=this.rendererByCompId.get(F.id);return K||(K=new Ui(this.eventManager,this.sharedStylesHost,F,this.appId),this.rendererByCompId.set(F.id,K)),K.applyToHost(J),K}case 1:case l.ifc.ShadowDom:return new kn(this.eventManager,this.sharedStylesHost,J,F);default:if(!this.rendererByCompId.has(F.id)){const K=mt(F.id,F.styles,[]);this.sharedStylesHost.addStyles(K),this.rendererByCompId.set(F.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(tt),l.LFG(Vt),l.LFG(l.AFp))},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();class Ct{constructor(it){this.eventManager=it,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(it,J){return J?document.createElementNS(an[J]||J,it):document.createElement(it)}createComment(it){return document.createComment(it)}createText(it){return document.createTextNode(it)}appendChild(it,J){it.appendChild(J)}insertBefore(it,J,F){it&&it.insertBefore(J,F)}removeChild(it,J){it&&it.removeChild(J)}selectRootElement(it,J){let F="string"==typeof it?document.querySelector(it):it;if(!F)throw new Error(`The selector "${it}" did not match any elements`);return J||(F.textContent=""),F}parentNode(it){return it.parentNode}nextSibling(it){return it.nextSibling}setAttribute(it,J,F,K){if(K){J=K+":"+J;const ge=an[K];ge?it.setAttributeNS(ge,J,F):it.setAttribute(J,F)}else it.setAttribute(J,F)}removeAttribute(it,J,F){if(F){const K=an[F];K?it.removeAttributeNS(K,J):it.removeAttribute(`${F}:${J}`)}else it.removeAttribute(J)}addClass(it,J){it.classList.add(J)}removeClass(it,J){it.classList.remove(J)}setStyle(it,J,F,K){K&(l.JOm.DashCase|l.JOm.Important)?it.style.setProperty(J,F,K&l.JOm.Important?"important":""):it.style[J]=F}removeStyle(it,J,F){F&l.JOm.DashCase?it.style.removeProperty(J):it.style[J]=""}setProperty(it,J,F){it[J]=F}setValue(it,J){it.nodeValue=J}listen(it,J,F){return"string"==typeof it?this.eventManager.addGlobalEventListener(it,J,lt(F)):this.eventManager.addEventListener(it,J,lt(F))}}class Ui extends Ct{constructor(it,J,F,K){super(it),this.component=F;const ge=mt(K+"-"+F.id,F.styles,[]);J.addStyles(ge),this.contentAttr=function Qt(Tt){return"_ngcontent-%COMP%".replace(Dt,Tt)}(K+"-"+F.id),this.hostAttr=function at(Tt){return"_nghost-%COMP%".replace(Dt,Tt)}(K+"-"+F.id)}applyToHost(it){super.setAttribute(it,this.hostAttr,"")}createElement(it,J){const F=super.createElement(it,J);return super.setAttribute(F,this.contentAttr,""),F}}class kn extends Ct{constructor(it,J,F,K){super(it),this.sharedStylesHost=J,this.hostEl=F,this.shadowRoot=F.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ge=mt(K.id,K.styles,[]);for(let De=0;De<ge.length;De++){const ke=document.createElement("style");ke.textContent=ge[De],this.shadowRoot.appendChild(ke)}}nodeOrShadowRoot(it){return it===this.hostEl?this.shadowRoot:it}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(it,J){return super.appendChild(this.nodeOrShadowRoot(it),J)}insertBefore(it,J,F){return super.insertBefore(this.nodeOrShadowRoot(it),J,F)}removeChild(it,J){return super.removeChild(this.nodeOrShadowRoot(it),J)}parentNode(it){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(it)))}}let Rn=(()=>{class Tt extends Mt{constructor(J){super(J)}supports(J){return!0}addEventListener(J,F,K){return J.addEventListener(F,K,!1),()=>this.removeEventListener(J,F,K)}removeEventListener(J,F,K){return J.removeEventListener(F,K)}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(D.K0))},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const ki=["alt","control","meta","shift"],sr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},In={alt:Tt=>Tt.altKey,control:Tt=>Tt.ctrlKey,meta:Tt=>Tt.metaKey,shift:Tt=>Tt.shiftKey};let Qn=(()=>{class Tt extends Mt{constructor(J){super(J)}supports(J){return null!=Tt.parseEventName(J)}addEventListener(J,F,K){const ge=Tt.parseEventName(F),De=Tt.eventCallback(ge.fullKey,K,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.q)().onAndCancel(J,ge.domEventName,De))}static parseEventName(J){const F=J.toLowerCase().split("."),K=F.shift();if(0===F.length||"keydown"!==K&&"keyup"!==K)return null;const ge=Tt._normalizeKey(F.pop());let De="";if(ki.forEach(Je=>{const We=F.indexOf(Je);We>-1&&(F.splice(We,1),De+=Je+".")}),De+=ge,0!=F.length||0===ge.length)return null;const ke={};return ke.domEventName=K,ke.fullKey=De,ke}static getEventFullKey(J){let F="",K=function ft(Tt){let it=Tt.key;if(null==it){if(it=Tt.keyIdentifier,null==it)return"Unidentified";it.startsWith("U+")&&(it=String.fromCharCode(parseInt(it.substring(2),16)),3===Tt.location&&xi.hasOwnProperty(it)&&(it=xi[it]))}return sr[it]||it}(J);return K=K.toLowerCase()," "===K?K="space":"."===K&&(K="dot"),ki.forEach(ge=>{ge!=K&&In[ge](J)&&(F+=ge+".")}),F+=K,F}static eventCallback(J,F,K){return ge=>{Tt.getEventFullKey(ge)===J&&K.runGuarded(()=>F(ge))}}static _normalizeKey(J){return"esc"===J?"escape":J}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(D.K0))},Tt.\u0275prov=l.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const Jn=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:D.bD},{provide:l.g9A,useValue:function kt(){g.makeCurrent(),Be.init()},multi:!0},{provide:D.K0,useFactory:function gn(){return(0,l.RDi)(document),document},deps:[]}]),Bi=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ln(){return new l.qLn},deps:[]},{provide:Ye,useClass:Rn,multi:!0,deps:[D.K0,l.R0b,l.Lbi]},{provide:Ye,useClass:Qn,multi:!0,deps:[D.K0]},{provide:Kt,useClass:Kt,deps:[tt,Vt,l.AFp]},{provide:l.FYo,useExisting:Kt},{provide:He,useExisting:Vt},{provide:Vt,useClass:Vt,deps:[D.K0]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:tt,useClass:tt,deps:[Ye,l.R0b]},{provide:D.JF,useClass:gt,deps:[]}];let Xi=(()=>{class Tt{constructor(J){if(J)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(J){return{ngModule:Tt,providers:[{provide:l.AFp,useValue:J.appId},{provide:he,useExisting:l.AFp},Ze]}}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(Tt,12))},Tt.\u0275mod=l.oAB({type:Tt}),Tt.\u0275inj=l.cJS({providers:Bi,imports:[D.ez,l.hGG]}),Tt})();"undefined"!=typeof window&&window;let xn=(()=>{class Tt{}return Tt.\u0275fac=function(J){return new(J||Tt)},Tt.\u0275prov=l.Yz7({token:Tt,factory:function(J){let F=null;return F=J?new(J||Tt):l.LFG(Gi),F},providedIn:"root"}),Tt})(),Gi=(()=>{class Tt extends xn{constructor(J){super(),this._doc=J}sanitize(J,F){if(null==F)return null;switch(J){case l.q3G.NONE:return F;case l.q3G.HTML:return(0,l.qzn)(F,"HTML")?(0,l.z3N)(F):(0,l.EiD)(this._doc,String(F)).toString();case l.q3G.STYLE:return(0,l.qzn)(F,"Style")?(0,l.z3N)(F):F;case l.q3G.SCRIPT:if((0,l.qzn)(F,"Script"))return(0,l.z3N)(F);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(F),(0,l.qzn)(F,"URL")?(0,l.z3N)(F):(0,l.mCW)(String(F));case l.q3G.RESOURCE_URL:if((0,l.qzn)(F,"ResourceURL"))return(0,l.z3N)(F);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${J} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(J){return(0,l.JVY)(J)}bypassSecurityTrustStyle(J){return(0,l.L6k)(J)}bypassSecurityTrustScript(J){return(0,l.eBb)(J)}bypassSecurityTrustUrl(J){return(0,l.LAX)(J)}bypassSecurityTrustResourceUrl(J){return(0,l.pB0)(J)}}return Tt.\u0275fac=function(J){return new(J||Tt)(l.LFG(D.K0))},Tt.\u0275prov=l.Yz7({token:Tt,factory:function(J){let F=null;return F=J?new J:function Ei(Tt){return new Gi(Tt.get(D.K0))}(l.LFG(l.zs3)),F},providedIn:"root"}),Tt})()},4521:(On,wt,V)=>{"use strict";V.d(wt,{gz:()=>pr,F0:()=>Eo,Od:()=>ys,yS:()=>Fn,Bz:()=>nc,lC:()=>ts});var D=V(5e3),l=V(8306),q=V(727),g=V(4482),$e=V(5403);function Ke(){return(0,g.e)((z,P)=>{let A=null;z._refCount++;const X=new $e.Q(P,void 0,void 0,void 0,()=>{if(!z||z._refCount<=0||0<--z._refCount)return void(A=null);const re=z._connection,xe=A;A=null,re&&(!xe||re===xe)&&re.unsubscribe(),P.unsubscribe()});z.subscribe(X),X.closed||(A=z.connect())})}class Oe extends l.y{constructor(P,A){super(),this.source=P,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,g.A)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,null==P||P.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new q.w0;const A=this.getSubject();P.add(this.source.subscribe(new $e.Q(A,void 0,()=>{this._teardown(),A.complete()},X=>{this._teardown(),A.error(X)},()=>this._teardown()))),P.closed&&(this._connection=null,P=q.w0.EMPTY)}return P}refCount(){return Ke()(this)}}var Le=V(2076),he=V(9646),Ve=V(1135),Ze=V(9841),Be=V(6805),gt=V(7272),Ye=V(9770),tt=V(515),Mt=V(7579);function He(z,P,A,X,re){return(xe,Ue)=>{let Re=A,xt=P,ri=0;xe.subscribe(new $e.Q(Ue,Ji=>{const vi=ri++;xt=Re?z(xt,Ji,vi):(Re=!0,Ji),X&&Ue.next(xt)},re&&(()=>{Re&&Ue.next(xt),Ue.complete()})))}}function Vt(z,P){return(0,g.e)(He(z,P,arguments.length>=2,!0))}var Ht=V(9300);function an(z){return z<=0?()=>tt.E:(0,g.e)((P,A)=>{let X=[];P.subscribe(new $e.Q(A,re=>{X.push(re),z<X.length&&X.shift()},()=>{for(const re of X)A.next(re);A.complete()},void 0,()=>{X=null}))})}var Dt=V(8068),Fe=V(6590),rt=V(4671),Bt=V(4004),Qt=V(3900),at=V(5698),mt=V(8675),lt=V(262),At=V(4351),Kt=V(590),Ct=V(5577),yn=V(8505),di=V(8746),Ui=V(8189),kn=V(9808);class Rn{constructor(P,A){this.id=P,this.url=A}}class ki extends Rn{constructor(P,A,X="imperative",re=null){super(P,A),this.navigationTrigger=X,this.restoredState=re}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hi extends Rn{constructor(P,A,X){super(P,A),this.urlAfterRedirects=X}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sr extends Rn{constructor(P,A,X){super(P,A),this.reason=X}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xi extends Rn{constructor(P,A,X){super(P,A),this.error=X}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class In extends Rn{constructor(P,A,X,re){super(P,A),this.urlAfterRedirects=X,this.state=re}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qn extends Rn{constructor(P,A,X,re){super(P,A),this.urlAfterRedirects=X,this.state=re}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ft extends Rn{constructor(P,A,X,re,xe){super(P,A),this.urlAfterRedirects=X,this.state=re,this.shouldActivate=xe}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kt extends Rn{constructor(P,A,X,re){super(P,A),this.urlAfterRedirects=X,this.state=re}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ln extends Rn{constructor(P,A,X,re){super(P,A),this.urlAfterRedirects=X,this.state=re}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gn{constructor(P){this.route=P}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bn{constructor(P){this.route=P}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jn{constructor(P){this.snapshot=P}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bi{constructor(P){this.snapshot=P}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(P){this.snapshot=P}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _i{constructor(P){this.snapshot=P}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qn{constructor(P,A,X){this.routerEvent=P,this.position=A,this.anchor=X}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xn="primary";class Zn{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A[0]:A}return null}getAll(P){if(this.has(P)){const A=this.params[P];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function St(z){return new Zn(z)}const $="ngNavigationCancelingError";function U(z){const P=Error("NavigationCancelingError: "+z);return P[$]=!0,P}function N(z,P,A){const X=A.path.split("/");if(X.length>z.length||"full"===A.pathMatch&&(P.hasChildren()||X.length<z.length))return null;const re={};for(let xe=0;xe<X.length;xe++){const Ue=X[xe],Re=z[xe];if(Ue.startsWith(":"))re[Ue.substring(1)]=Re;else if(Ue!==Re.path)return null}return{consumed:z.slice(0,X.length),posParams:re}}function fe(z,P){const A=z?Object.keys(z):void 0,X=P?Object.keys(P):void 0;if(!A||!X||A.length!=X.length)return!1;let re;for(let xe=0;xe<A.length;xe++)if(re=A[xe],!nt(z[re],P[re]))return!1;return!0}function nt(z,P){if(Array.isArray(z)&&Array.isArray(P)){if(z.length!==P.length)return!1;const A=[...z].sort(),X=[...P].sort();return A.every((re,xe)=>X[xe]===re)}return z===P}function Et(z){return Array.prototype.concat.apply([],z)}function _t(z){return z.length>0?z[z.length-1]:null}function _n(z,P){for(const A in z)z.hasOwnProperty(A)&&P(z[A],A)}function Hn(z){return(0,D.CqO)(z)?z:(0,D.QGY)(z)?(0,Le.D)(Promise.resolve(z)):(0,he.of)(z)}const Jt={exact:function Wn(z,P,A){if(!xn(z.segments,P.segments)||!we(z.segments,P.segments,A)||z.numberOfChildren!==P.numberOfChildren)return!1;for(const X in P.children)if(!z.children[X]||!Wn(z.children[X],P.children[X],A))return!1;return!0},subset:Rt},hn={exact:function Oi(z,P){return fe(z,P)},subset:function Vn(z,P){return Object.keys(P).length<=Object.keys(z).length&&Object.keys(P).every(A=>nt(z[A],P[A]))},ignored:()=>!0};function Zt(z,P,A){return Jt[A.paths](z.root,P.root,A.matrixParams)&&hn[A.queryParams](z.queryParams,P.queryParams)&&!("exact"===A.fragment&&z.fragment!==P.fragment)}function Rt(z,P,A){return pt(z,P,P.segments,A)}function pt(z,P,A,X){if(z.segments.length>A.length){const re=z.segments.slice(0,A.length);return!(!xn(re,A)||P.hasChildren()||!we(re,A,X))}if(z.segments.length===A.length){if(!xn(z.segments,A)||!we(z.segments,A,X))return!1;for(const re in P.children)if(!z.children[re]||!Rt(z.children[re],P.children[re],X))return!1;return!0}{const re=A.slice(0,z.segments.length),xe=A.slice(z.segments.length);return!!(xn(z.segments,re)&&we(z.segments,re,X)&&z.children[Xn])&&pt(z.children[Xn],P,xe,X)}}function we(z,P,A){return P.every((X,re)=>hn[A](z[re].parameters,X.parameters))}class Ae{constructor(P,A,X){this.root=P,this.queryParams=A,this.fragment=X}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}toString(){return Tt.serialize(this)}}class ye{constructor(P,A){this.segments=P,this.children=A,this.parent=null,_n(A,(X,re)=>X.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return it(this)}}class dt{constructor(P,A){this.path=P,this.parameters=A}get parameterMap(){return this._parameterMap||(this._parameterMap=St(this.parameters)),this._parameterMap}toString(){return We(this)}}function xn(z,P){return z.length===P.length&&z.every((A,X)=>A.path===P[X].path)}class Gi{}class er{parse(P){const A=new zn(P);return new Ae(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(P){const A=`/${J(P.root,!0)}`,X=function st(z){const P=Object.keys(z).map(A=>{const X=z[A];return Array.isArray(X)?X.map(re=>`${K(A)}=${K(re)}`).join("&"):`${K(A)}=${K(X)}`}).filter(A=>!!A);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${A}${X}${"string"==typeof P.fragment?`#${function ge(z){return encodeURI(z)}(P.fragment)}`:""}`}}const Tt=new er;function it(z){return z.segments.map(P=>We(P)).join("/")}function J(z,P){if(!z.hasChildren())return it(z);if(P){const A=z.children[Xn]?J(z.children[Xn],!1):"",X=[];return _n(z.children,(re,xe)=>{xe!==Xn&&X.push(`${xe}:${J(re,!1)}`)}),X.length>0?`${A}(${X.join("//")})`:A}{const A=function Ei(z,P){let A=[];return _n(z.children,(X,re)=>{re===Xn&&(A=A.concat(P(X,re)))}),_n(z.children,(X,re)=>{re!==Xn&&(A=A.concat(P(X,re)))}),A}(z,(X,re)=>re===Xn?[J(z.children[Xn],!1)]:[`${re}:${J(X,!1)}`]);return 1===Object.keys(z.children).length&&null!=z.children[Xn]?`${it(z)}/${A[0]}`:`${it(z)}/(${A.join("//")})`}}function F(z){return encodeURIComponent(z).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function K(z){return F(z).replace(/%3B/gi,";")}function De(z){return F(z).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ke(z){return decodeURIComponent(z)}function Je(z){return ke(z.replace(/\+/g,"%20"))}function We(z){return`${De(z.path)}${function Xe(z){return Object.keys(z).map(P=>`;${De(P)}=${De(z[P])}`).join("")}(z.parameters)}`}const Lt=/^[^\/()?;=#]+/;function tn(z){const P=z.match(Lt);return P?P[0]:""}const Ft=/^[^=?&#]+/,sn=/^[^&#]+/;class zn{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let X={};return this.peekStartsWith("(")&&(X=this.parseParens(!1)),(P.length>0||Object.keys(A).length>0)&&(X[Xn]=new ye(P,A)),X}parseSegment(){const P=tn(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(P),new dt(ke(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const A=tn(this.remaining);if(!A)return;this.capture(A);let X="";if(this.consumeOptional("=")){const re=tn(this.remaining);re&&(X=re,this.capture(X))}P[ke(A)]=ke(X)}parseQueryParam(P){const A=function jt(z){const P=z.match(Ft);return P?P[0]:""}(this.remaining);if(!A)return;this.capture(A);let X="";if(this.consumeOptional("=")){const Ue=function En(z){const P=z.match(sn);return P?P[0]:""}(this.remaining);Ue&&(X=Ue,this.capture(X))}const re=Je(A),xe=Je(X);if(P.hasOwnProperty(re)){let Ue=P[re];Array.isArray(Ue)||(Ue=[Ue],P[re]=Ue),Ue.push(xe)}else P[re]=xe}parseParens(P){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const X=tn(this.remaining),re=this.remaining[X.length];if("/"!==re&&")"!==re&&";"!==re)throw new Error(`Cannot parse url '${this.url}'`);let xe;X.indexOf(":")>-1?(xe=X.substr(0,X.indexOf(":")),this.capture(xe),this.capture(":")):P&&(xe=Xn);const Ue=this.parseChildren();A[xe]=1===Object.keys(Ue).length?Ue[Xn]:new ye([],Ue),this.consumeOptional("//")}return A}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new Error(`Expected "${P}".`)}}class Li{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const A=this.pathFromRoot(P);return A.length>1?A[A.length-2]:null}children(P){const A=li(P,this._root);return A?A.children.map(X=>X.value):[]}firstChild(P){const A=li(P,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(P){const A=Ci(P,this._root);return A.length<2?[]:A[A.length-2].children.map(re=>re.value).filter(re=>re!==P)}pathFromRoot(P){return Ci(P,this._root).map(A=>A.value)}}function li(z,P){if(z===P.value)return P;for(const A of P.children){const X=li(z,A);if(X)return X}return null}function Ci(z,P){if(z===P.value)return[P];for(const A of P.children){const X=Ci(z,A);if(X.length)return X.unshift(P),X}return[]}class Pn{constructor(P,A){this.value=P,this.children=A}toString(){return`TreeNode(${this.value})`}}function pi(z){const P={};return z&&z.children.forEach(A=>P[A.value.outlet]=A),P}class rr extends Li{constructor(P,A){super(P),this.snapshot=A,Lo(this,P)}toString(){return this.snapshot.toString()}}function An(z,P){const A=function br(z,P){const Ue=new Mr([],{},{},"",{},Xn,P,null,z.root,-1,{});return new ao("",new Pn(Ue,[]))}(z,P),X=new Ve.X([new dt("",{})]),re=new Ve.X({}),xe=new Ve.X({}),Ue=new Ve.X({}),Re=new Ve.X(""),xt=new pr(X,re,Ue,Re,xe,Xn,P,A.root);return xt.snapshot=A.root,new rr(new Pn(xt,[]),A)}class pr{constructor(P,A,X,re,xe,Ue,Re,xt){this.url=P,this.params=A,this.queryParams=X,this.fragment=re,this.data=xe,this.outlet=Ue,this.component=Re,this._futureSnapshot=xt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Bt.U)(P=>St(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Bt.U)(P=>St(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qo(z,P="emptyOnly"){const A=z.pathFromRoot;let X=0;if("always"!==P)for(X=A.length-1;X>=1;){const re=A[X],xe=A[X-1];if(re.routeConfig&&""===re.routeConfig.path)X--;else{if(xe.component)break;X--}}return function $o(z){return z.reduce((P,A)=>({params:Object.assign(Object.assign({},P.params),A.params),data:Object.assign(Object.assign({},P.data),A.data),resolve:Object.assign(Object.assign({},P.resolve),A._resolvedData)}),{params:{},data:{},resolve:{}})}(A.slice(X))}class Mr{constructor(P,A,X,re,xe,Ue,Re,xt,ri,Ji,vi){this.url=P,this.params=A,this.queryParams=X,this.fragment=re,this.data=xe,this.outlet=Ue,this.component=Re,this.routeConfig=xt,this._urlSegment=ri,this._lastPathIndex=Ji,this._resolve=vi}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=St(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(X=>X.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ao extends Li{constructor(P,A){super(A),this.url=P,Lo(this,A)}toString(){return dr(this._root)}}function Lo(z,P){P.value._routerState=z,P.children.forEach(A=>Lo(z,A))}function dr(z){const P=z.children.length>0?` { ${z.children.map(dr).join(", ")} } `:"";return`${z.value}${P}`}function $i(z){if(z.snapshot){const P=z.snapshot,A=z._futureSnapshot;z.snapshot=A,fe(P.queryParams,A.queryParams)||z.queryParams.next(A.queryParams),P.fragment!==A.fragment&&z.fragment.next(A.fragment),fe(P.params,A.params)||z.params.next(A.params),function ie(z,P){if(z.length!==P.length)return!1;for(let A=0;A<z.length;++A)if(!fe(z[A],P[A]))return!1;return!0}(P.url,A.url)||z.url.next(A.url),fe(P.data,A.data)||z.data.next(A.data)}else z.snapshot=z._futureSnapshot,z.data.next(z._futureSnapshot.data)}function lo(z,P){const A=fe(z.params,P.params)&&function It(z,P){return xn(z,P)&&z.every((A,X)=>fe(A.parameters,P[X].parameters))}(z.url,P.url);return A&&!(!z.parent!=!P.parent)&&(!z.parent||lo(z.parent,P.parent))}function Rr(z,P,A){if(A&&z.shouldReuseRoute(P.value,A.value.snapshot)){const X=A.value;X._futureSnapshot=P.value;const re=function Zr(z,P,A){return P.children.map(X=>{for(const re of A.children)if(z.shouldReuseRoute(X.value,re.value.snapshot))return Rr(z,X,re);return Rr(z,X)})}(z,P,A);return new Pn(X,re)}{if(z.shouldAttach(P.value)){const xe=z.retrieve(P.value);if(null!==xe){const Ue=xe.route;return Ue.value._futureSnapshot=P.value,Ue.children=P.children.map(Re=>Rr(z,Re)),Ue}}const X=function cs(z){return new pr(new Ve.X(z.url),new Ve.X(z.params),new Ve.X(z.queryParams),new Ve.X(z.fragment),new Ve.X(z.data),z.outlet,z.component,z)}(P.value),re=P.children.map(xe=>Rr(z,xe));return new Pn(X,re)}}function to(z){return"object"==typeof z&&null!=z&&!z.outlets&&!z.segmentPath}function xr(z){return"object"==typeof z&&null!=z&&z.outlets}function us(z,P,A,X,re){let xe={};return X&&_n(X,(Ue,Re)=>{xe[Re]=Array.isArray(Ue)?Ue.map(xt=>`${xt}`):`${Ue}`}),new Ae(A.root===z?P:ds(A.root,z,P),xe,re)}function ds(z,P,A){const X={};return _n(z.children,(re,xe)=>{X[xe]=re===P?A:ds(re,P,A)}),new ye(z.segments,X)}class bo{constructor(P,A,X){if(this.isAbsolute=P,this.numberOfDoubleDots=A,this.commands=X,P&&X.length>0&&to(X[0]))throw new Error("Root segment cannot have matrix parameters");const re=X.find(xr);if(re&&re!==_t(X))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qr{constructor(P,A,X){this.segmentGroup=P,this.processChildren=A,this.index=X}}function Xo(z,P,A){if(z||(z=new ye([],{})),0===z.segments.length&&z.hasChildren())return Vs(z,P,A);const X=function Ts(z,P,A){let X=0,re=P;const xe={match:!1,pathIndex:0,commandIndex:0};for(;re<z.segments.length;){if(X>=A.length)return xe;const Ue=z.segments[re],Re=A[X];if(xr(Re))break;const xt=`${Re}`,ri=X<A.length-1?A[X+1]:null;if(re>0&&void 0===xt)break;if(xt&&ri&&"object"==typeof ri&&void 0===ri.outlets){if(!Rs(xt,ri,Ue))return xe;X+=2}else{if(!Rs(xt,{},Ue))return xe;X++}re++}return{match:!0,pathIndex:re,commandIndex:X}}(z,P,A),re=A.slice(X.commandIndex);if(X.match&&X.pathIndex<z.segments.length){const xe=new ye(z.segments.slice(0,X.pathIndex),{});return xe.children[Xn]=new ye(z.segments.slice(X.pathIndex),z.children),Vs(xe,0,re)}return X.match&&0===re.length?new ye(z.segments,{}):X.match&&!z.hasChildren()?As(z,P,A):X.match?Vs(z,0,re):As(z,P,A)}function Vs(z,P,A){if(0===A.length)return new ye(z.segments,{});{const X=function Ir(z){return xr(z[0])?z[0].outlets:{[Xn]:z}}(A),re={};return _n(X,(xe,Ue)=>{"string"==typeof xe&&(xe=[xe]),null!==xe&&(re[Ue]=Xo(z.children[Ue],P,xe))}),_n(z.children,(xe,Ue)=>{void 0===X[Ue]&&(re[Ue]=xe)}),new ye(z.segments,re)}}function As(z,P,A){const X=z.segments.slice(0,P);let re=0;for(;re<A.length;){const xe=A[re];if(xr(xe)){const xt=no(xe.outlets);return new ye(X,xt)}if(0===re&&to(A[0])){X.push(new dt(z.segments[P].path,da(A[0]))),re++;continue}const Ue=xr(xe)?xe.outlets[Xn]:`${xe}`,Re=re<A.length-1?A[re+1]:null;Ue&&Re&&to(Re)?(X.push(new dt(Ue,da(Re))),re+=2):(X.push(new dt(Ue,{})),re++)}return new ye(X,{})}function no(z){const P={};return _n(z,(A,X)=>{"string"==typeof A&&(A=[A]),null!==A&&(P[X]=As(new ye([],{}),0,A))}),P}function da(z){const P={};return _n(z,(A,X)=>P[X]=`${A}`),P}function Rs(z,P,A){return z==A.path&&fe(P,A.parameters)}class tr{constructor(P,A,X,re){this.routeReuseStrategy=P,this.futureState=A,this.currState=X,this.forwardEvent=re}activate(P){const A=this.futureState._root,X=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,X,P),$i(this.futureState.root),this.activateChildRoutes(A,X,P)}deactivateChildRoutes(P,A,X){const re=pi(A);P.children.forEach(xe=>{const Ue=xe.value.outlet;this.deactivateRoutes(xe,re[Ue],X),delete re[Ue]}),_n(re,(xe,Ue)=>{this.deactivateRouteAndItsChildren(xe,X)})}deactivateRoutes(P,A,X){const re=P.value,xe=A?A.value:null;if(re===xe)if(re.component){const Ue=X.getContext(re.outlet);Ue&&this.deactivateChildRoutes(P,A,Ue.children)}else this.deactivateChildRoutes(P,A,X);else xe&&this.deactivateRouteAndItsChildren(A,X)}deactivateRouteAndItsChildren(P,A){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,A):this.deactivateRouteAndOutlet(P,A)}detachAndStoreRouteSubtree(P,A){const X=A.getContext(P.value.outlet),re=X&&P.value.component?X.children:A,xe=pi(P);for(const Ue of Object.keys(xe))this.deactivateRouteAndItsChildren(xe[Ue],re);if(X&&X.outlet){const Ue=X.outlet.detach(),Re=X.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:Ue,route:P,contexts:Re})}}deactivateRouteAndOutlet(P,A){const X=A.getContext(P.value.outlet),re=X&&P.value.component?X.children:A,xe=pi(P);for(const Ue of Object.keys(xe))this.deactivateRouteAndItsChildren(xe[Ue],re);X&&X.outlet&&(X.outlet.deactivate(),X.children.onOutletDeactivated(),X.attachRef=null,X.resolver=null,X.route=null)}activateChildRoutes(P,A,X){const re=pi(A);P.children.forEach(xe=>{this.activateRoutes(xe,re[xe.value.outlet],X),this.forwardEvent(new _i(xe.value.snapshot))}),P.children.length&&this.forwardEvent(new Bi(P.value.snapshot))}activateRoutes(P,A,X){const re=P.value,xe=A?A.value:null;if($i(re),re===xe)if(re.component){const Ue=X.getOrCreateContext(re.outlet);this.activateChildRoutes(P,A,Ue.children)}else this.activateChildRoutes(P,A,X);else if(re.component){const Ue=X.getOrCreateContext(re.outlet);if(this.routeReuseStrategy.shouldAttach(re.snapshot)){const Re=this.routeReuseStrategy.retrieve(re.snapshot);this.routeReuseStrategy.store(re.snapshot,null),Ue.children.onOutletReAttached(Re.contexts),Ue.attachRef=Re.componentRef,Ue.route=Re.route.value,Ue.outlet&&Ue.outlet.attach(Re.componentRef,Re.route.value),$i(Re.route.value),this.activateChildRoutes(P,null,Ue.children)}else{const Re=function Us(z){for(let P=z.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig;if(A&&A.component)return null}return null}(re.snapshot),xt=Re?Re.module.componentFactoryResolver:null;Ue.attachRef=null,Ue.route=re,Ue.resolver=xt,Ue.outlet&&Ue.outlet.activateWith(re,xt),this.activateChildRoutes(P,null,Ue.children)}}else this.activateChildRoutes(P,null,X)}}class es{constructor(P,A){this.routes=P,this.module=A}}function mo(z){return"function"==typeof z}function co(z){return z instanceof Ae}const Pr=Symbol("INITIAL_VALUE");function xo(){return(0,Qt.w)(z=>(0,Ze.a)(z.map(P=>P.pipe((0,at.q)(1),(0,mt.O)(Pr)))).pipe(Vt((P,A)=>{let X=!1;return A.reduce((re,xe,Ue)=>re!==Pr?re:(xe===Pr&&(X=!0),X||!1!==xe&&Ue!==A.length-1&&!co(xe)?re:xe),P)},Pr),(0,Ht.h)(P=>P!==Pr),(0,Bt.U)(P=>co(P)?P:!0===P),(0,at.q)(1)))}class ps{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bo,this.attachRef=null}}class Bo{constructor(){this.contexts=new Map}onChildOutletCreated(P,A){const X=this.getOrCreateContext(P);X.outlet=A,this.contexts.set(P,X)}onChildOutletDestroyed(P){const A=this.getContext(P);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const P=this.contexts;return this.contexts=new Map,P}onOutletReAttached(P){this.contexts=P}getOrCreateContext(P){let A=this.getContext(P);return A||(A=new ps,this.contexts.set(P,A)),A}getContext(P){return this.contexts.get(P)||null}}let ts=(()=>{class z{constructor(A,X,re,xe,Ue){this.parentContexts=A,this.location=X,this.resolver=re,this.changeDetector=Ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=xe||Xn,A.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const A=this.parentContexts.getContext(this.name);A&&A.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,X){this.activated=A,this._activatedRoute=X,this.location.insert(A.hostView),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,X){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=A;const Ue=(X=X||this.resolver).resolveComponentFactory(A._futureSnapshot.routeConfig.component),Re=this.parentContexts.getOrCreateContext(this.name).children,xt=new fs(A,Re,this.location.injector);this.activated=this.location.createComponent(Ue,this.location.length,xt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Bo),D.Y36(D.s_b),D.Y36(D._Vd),D.$8M("name"),D.Y36(D.sBO))},z.\u0275dir=D.lG2({type:z,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),z})();class fs{constructor(P,A,X){this.route=P,this.childContexts=A,this.parent=X}get(P,A){return P===pr?this.route:P===Bo?this.childContexts:this.parent.get(P,A)}}let ns=(()=>{class z{}return z.\u0275fac=function(A){return new(A||z)},z.\u0275cmp=D.Xpm({type:z,selectors:[["ng-component"]],decls:1,vars:0,template:function(A,X){1&A&&D._UZ(0,"router-outlet")},directives:[ts],encapsulation:2}),z})();function Fs(z,P=""){for(let A=0;A<z.length;A++){const X=z[A];uo(X,Is(P,X))}}function uo(z,P){z.children&&Fs(z.children,P)}function Is(z,P){return P?z||P.path?z&&!P.path?`${z}/`:!z&&P.path?P.path:`${z}/${P.path}`:"":z}function Ls(z){const P=z.children&&z.children.map(Ls),A=P?Object.assign(Object.assign({},z),{children:P}):Object.assign({},z);return!A.component&&(P||A.loadChildren)&&A.outlet&&A.outlet!==Xn&&(A.component=ns),A}function ho(z){return z.outlet||Xn}function is(z,P){const A=z.filter(X=>ho(X)===P);return A.push(...z.filter(X=>ho(X)!==P)),A}const Ps={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function js(z,P,A){var X;if(""===P.path)return"full"===P.pathMatch&&(z.hasChildren()||A.length>0)?Object.assign({},Ps):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const xe=(P.matcher||N)(A,z,P);if(!xe)return Object.assign({},Ps);const Ue={};_n(xe.posParams,(xt,ri)=>{Ue[ri]=xt.path});const Re=xe.consumed.length>0?Object.assign(Object.assign({},Ue),xe.consumed[xe.consumed.length-1].parameters):Ue;return{matched:!0,consumedSegments:xe.consumed,lastChild:xe.consumed.length,parameters:Re,positionalParamSegments:null!==(X=xe.posParams)&&void 0!==X?X:{}}}function fr(z,P,A,X,re="corrected"){if(A.length>0&&function Or(z,P,A){return A.some(X=>ve(z,P,X)&&ho(X)!==Xn)}(z,A,X)){const Ue=new ye(P,function Ma(z,P,A,X){const re={};re[Xn]=X,X._sourceSegment=z,X._segmentIndexShift=P.length;for(const xe of A)if(""===xe.path&&ho(xe)!==Xn){const Ue=new ye([],{});Ue._sourceSegment=z,Ue._segmentIndexShift=P.length,re[ho(xe)]=Ue}return re}(z,P,X,new ye(A,z.children)));return Ue._sourceSegment=z,Ue._segmentIndexShift=P.length,{segmentGroup:Ue,slicedSegments:[]}}if(0===A.length&&function te(z,P,A){return A.some(X=>ve(z,P,X))}(z,A,X)){const Ue=new ye(z.segments,function ea(z,P,A,X,re,xe){const Ue={};for(const Re of X)if(ve(z,A,Re)&&!re[ho(Re)]){const xt=new ye([],{});xt._sourceSegment=z,xt._segmentIndexShift="legacy"===xe?z.segments.length:P.length,Ue[ho(Re)]=xt}return Object.assign(Object.assign({},re),Ue)}(z,P,A,X,z.children,re));return Ue._sourceSegment=z,Ue._segmentIndexShift=P.length,{segmentGroup:Ue,slicedSegments:A}}const xe=new ye(z.segments,z.children);return xe._sourceSegment=z,xe._segmentIndexShift=P.length,{segmentGroup:xe,slicedSegments:A}}function ve(z,P,A){return(!(z.hasChildren()||P.length>0)||"full"!==A.pathMatch)&&""===A.path}function ne(z,P,A,X){return!!(ho(z)===X||X!==Xn&&ve(P,A,z))&&("**"===z.path||js(P,z,A).matched)}function Ee(z,P,A){return 0===P.length&&!z.children[A]}class ct{constructor(P){this.segmentGroup=P||null}}class Yt{constructor(P){this.urlTree=P}}function un(z){return new l.y(P=>P.error(new ct(z)))}function Mn(z){return new l.y(P=>P.error(new Yt(z)))}function Di(z){return new l.y(P=>P.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${z}'`)))}class ci{constructor(P,A,X,re,xe){this.configLoader=A,this.urlSerializer=X,this.urlTree=re,this.config=xe,this.allowRedirects=!0,this.ngModule=P.get(D.h0i)}apply(){const P=fr(this.urlTree.root,[],[],this.config).segmentGroup,A=new ye(P.segments,P.children);return this.expandSegmentGroup(this.ngModule,this.config,A,Xn).pipe((0,Bt.U)(xe=>this.createUrlTree(W(xe),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,lt.K)(xe=>{if(xe instanceof Yt)return this.allowRedirects=!1,this.match(xe.urlTree);throw xe instanceof ct?this.noMatchError(xe):xe}))}match(P){return this.expandSegmentGroup(this.ngModule,this.config,P.root,Xn).pipe((0,Bt.U)(re=>this.createUrlTree(W(re),P.queryParams,P.fragment))).pipe((0,lt.K)(re=>{throw re instanceof ct?this.noMatchError(re):re}))}noMatchError(P){return new Error(`Cannot match any routes. URL Segment: '${P.segmentGroup}'`)}createUrlTree(P,A,X){const re=P.segments.length>0?new ye([],{[Xn]:P}):P;return new Ae(re,A,X)}expandSegmentGroup(P,A,X,re){return 0===X.segments.length&&X.hasChildren()?this.expandChildren(P,A,X).pipe((0,Bt.U)(xe=>new ye([],xe))):this.expandSegment(P,X,A,X.segments,re,!0)}expandChildren(P,A,X){const re=[];for(const xe of Object.keys(X.children))"primary"===xe?re.unshift(xe):re.push(xe);return(0,Le.D)(re).pipe((0,At.b)(xe=>{const Ue=X.children[xe],Re=is(A,xe);return this.expandSegmentGroup(P,Re,Ue,xe).pipe((0,Bt.U)(xt=>({segment:xt,outlet:xe})))}),Vt((xe,Ue)=>(xe[Ue.outlet]=Ue.segment,xe),{}),function nn(z,P){const A=arguments.length>=2;return X=>X.pipe(z?(0,Ht.h)((re,xe)=>z(re,xe,X)):rt.y,an(1),A?(0,Fe.d)(P):(0,Dt.T)(()=>new Be.K))}())}expandSegment(P,A,X,re,xe,Ue){return(0,Le.D)(X).pipe((0,At.b)(Re=>this.expandSegmentAgainstRoute(P,A,X,Re,re,xe,Ue).pipe((0,lt.K)(ri=>{if(ri instanceof ct)return(0,he.of)(null);throw ri}))),(0,Kt.P)(Re=>!!Re),(0,lt.K)((Re,xt)=>{if(Re instanceof Be.K||"EmptyError"===Re.name){if(Ee(A,re,xe))return(0,he.of)(new ye([],{}));throw new ct(A)}throw Re}))}expandSegmentAgainstRoute(P,A,X,re,xe,Ue,Re){return ne(re,A,xe,Ue)?void 0===re.redirectTo?this.matchSegmentAgainstRoute(P,A,re,xe,Ue):Re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,A,X,re,xe,Ue):un(A):un(A)}expandSegmentAgainstRouteUsingRedirect(P,A,X,re,xe,Ue){return"**"===re.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,X,re,Ue):this.expandRegularSegmentAgainstRouteUsingRedirect(P,A,X,re,xe,Ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,A,X,re){const xe=this.applyRedirectCommands([],X.redirectTo,{});return X.redirectTo.startsWith("/")?Mn(xe):this.lineralizeSegments(X,xe).pipe((0,Ct.z)(Ue=>{const Re=new ye(Ue,{});return this.expandSegment(P,Re,A,Ue,re,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,A,X,re,xe,Ue){const{matched:Re,consumedSegments:xt,lastChild:ri,positionalParamSegments:Ji}=js(A,re,xe);if(!Re)return un(A);const vi=this.applyRedirectCommands(xt,re.redirectTo,Ji);return re.redirectTo.startsWith("/")?Mn(vi):this.lineralizeSegments(re,vi).pipe((0,Ct.z)(Zi=>this.expandSegment(P,A,X,Zi.concat(xe.slice(ri)),Ue,!1)))}matchSegmentAgainstRoute(P,A,X,re,xe){if("**"===X.path)return X.loadChildren?(X._loadedConfig?(0,he.of)(X._loadedConfig):this.configLoader.load(P.injector,X)).pipe((0,Bt.U)(Zi=>(X._loadedConfig=Zi,new ye(re,{})))):(0,he.of)(new ye(re,{}));const{matched:Ue,consumedSegments:Re,lastChild:xt}=js(A,X,re);if(!Ue)return un(A);const ri=re.slice(xt);return this.getChildConfig(P,X,re).pipe((0,Ct.z)(vi=>{const Zi=vi.module,yr=vi.routes,{segmentGroup:Yo,slicedSegments:So}=fr(A,Re,ri,yr),f=new ye(Yo.segments,Yo.children);if(0===So.length&&f.hasChildren())return this.expandChildren(Zi,yr,f).pipe((0,Bt.U)(v=>new ye(Re,v)));if(0===yr.length&&0===So.length)return(0,he.of)(new ye(Re,{}));const i=ho(X)===xe;return this.expandSegment(Zi,f,yr,So,i?Xn:xe,!0).pipe((0,Bt.U)(m=>new ye(Re.concat(m.segments),m.children)))}))}getChildConfig(P,A,X){return A.children?(0,he.of)(new es(A.children,P)):A.loadChildren?void 0!==A._loadedConfig?(0,he.of)(A._loadedConfig):this.runCanLoadGuards(P.injector,A,X).pipe((0,Ct.z)(re=>re?this.configLoader.load(P.injector,A).pipe((0,Bt.U)(xe=>(A._loadedConfig=xe,xe))):function ai(z){return new l.y(P=>P.error(U(`Cannot load children because the guard of the route "path: '${z.path}'" returned false`)))}(A))):(0,he.of)(new es([],P))}runCanLoadGuards(P,A,X){const re=A.canLoad;if(!re||0===re.length)return(0,he.of)(!0);const xe=re.map(Ue=>{const Re=P.get(Ue);let xt;if(function za(z){return z&&mo(z.canLoad)}(Re))xt=Re.canLoad(A,X);else{if(!mo(Re))throw new Error("Invalid CanLoad guard");xt=Re(A,X)}return Hn(xt)});return(0,he.of)(xe).pipe(xo(),(0,yn.b)(Ue=>{if(!co(Ue))return;const Re=U(`Redirecting to "${this.urlSerializer.serialize(Ue)}"`);throw Re.url=Ue,Re}),(0,Bt.U)(Ue=>!0===Ue))}lineralizeSegments(P,A){let X=[],re=A.root;for(;;){if(X=X.concat(re.segments),0===re.numberOfChildren)return(0,he.of)(X);if(re.numberOfChildren>1||!re.children[Xn])return Di(P.redirectTo);re=re.children[Xn]}}applyRedirectCommands(P,A,X){return this.applyRedirectCreatreUrlTree(A,this.urlSerializer.parse(A),P,X)}applyRedirectCreatreUrlTree(P,A,X,re){const xe=this.createSegmentGroup(P,A.root,X,re);return new Ae(xe,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(P,A){const X={};return _n(P,(re,xe)=>{if("string"==typeof re&&re.startsWith(":")){const Re=re.substring(1);X[xe]=A[Re]}else X[xe]=re}),X}createSegmentGroup(P,A,X,re){const xe=this.createSegments(P,A.segments,X,re);let Ue={};return _n(A.children,(Re,xt)=>{Ue[xt]=this.createSegmentGroup(P,Re,X,re)}),new ye(xe,Ue)}createSegments(P,A,X,re){return A.map(xe=>xe.path.startsWith(":")?this.findPosParam(P,xe,re):this.findOrReturn(xe,X))}findPosParam(P,A,X){const re=X[A.path.substring(1)];if(!re)throw new Error(`Cannot redirect to '${P}'. Cannot find '${A.path}'.`);return re}findOrReturn(P,A){let X=0;for(const re of A){if(re.path===P.path)return A.splice(X),re;X++}return P}}function W(z){const P={};for(const X of Object.keys(z.children)){const xe=W(z.children[X]);(xe.segments.length>0||xe.hasChildren())&&(P[X]=xe)}return function Q(z){if(1===z.numberOfChildren&&z.children[Xn]){const P=z.children[Xn];return new ye(z.segments.concat(P.segments),P.children)}return z}(new ye(z.segments,P))}class Me{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class $t{constructor(P,A){this.component=P,this.route=A}}function fi(z,P,A){const X=z._root;return wo(X,P?P._root:null,A,[X.value])}function jr(z,P,A){const X=function ms(z){if(!z)return null;for(let P=z.parent;P;P=P.parent){const A=P.routeConfig;if(A&&A._loadedConfig)return A._loadedConfig}return null}(P);return(X?X.module.injector:A).get(z)}function wo(z,P,A,X,re={canDeactivateChecks:[],canActivateChecks:[]}){const xe=pi(P);return z.children.forEach(Ue=>{(function mn(z,P,A,X,re={canDeactivateChecks:[],canActivateChecks:[]}){const xe=z.value,Ue=P?P.value:null,Re=A?A.getContext(z.value.outlet):null;if(Ue&&xe.routeConfig===Ue.routeConfig){const xt=function ue(z,P,A){if("function"==typeof A)return A(z,P);switch(A){case"pathParamsChange":return!xn(z.url,P.url);case"pathParamsOrQueryParamsChange":return!xn(z.url,P.url)||!fe(z.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lo(z,P)||!fe(z.queryParams,P.queryParams);default:return!lo(z,P)}}(Ue,xe,xe.routeConfig.runGuardsAndResolvers);xt?re.canActivateChecks.push(new Me(X)):(xe.data=Ue.data,xe._resolvedData=Ue._resolvedData),wo(z,P,xe.component?Re?Re.children:null:A,X,re),xt&&Re&&Re.outlet&&Re.outlet.isActivated&&re.canDeactivateChecks.push(new $t(Re.outlet.component,Ue))}else Ue&&M(P,Re,re),re.canActivateChecks.push(new Me(X)),wo(z,null,xe.component?Re?Re.children:null:A,X,re)})(Ue,xe[Ue.value.outlet],A,X.concat([Ue.value]),re),delete xe[Ue.value.outlet]}),_n(xe,(Ue,Re)=>M(Ue,A.getContext(Re),re)),re}function M(z,P,A){const X=pi(z),re=z.value;_n(X,(xe,Ue)=>{M(xe,re.component?P?P.children.getContext(Ue):null:P,A)}),A.canDeactivateChecks.push(new $t(re.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,re))}class Tn{}function ni(z){return new l.y(P=>P.error(z))}class zi{constructor(P,A,X,re,xe,Ue){this.rootComponentType=P,this.config=A,this.urlTree=X,this.url=re,this.paramsInheritanceStrategy=xe,this.relativeLinkResolution=Ue}recognize(){const P=fr(this.urlTree.root,[],[],this.config.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution).segmentGroup,A=this.processSegmentGroup(this.config,P,Xn);if(null===A)return null;const X=new Mr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xn,this.rootComponentType,null,this.urlTree.root,-1,{}),re=new Pn(X,A),xe=new ao(this.url,re);return this.inheritParamsAndData(xe._root),xe}inheritParamsAndData(P){const A=P.value,X=Qo(A,this.paramsInheritanceStrategy);A.params=Object.freeze(X.params),A.data=Object.freeze(X.data),P.children.forEach(re=>this.inheritParamsAndData(re))}processSegmentGroup(P,A,X){return 0===A.segments.length&&A.hasChildren()?this.processChildren(P,A):this.processSegment(P,A,A.segments,X)}processChildren(P,A){const X=[];for(const xe of Object.keys(A.children)){const Ue=A.children[xe],Re=is(P,xe),xt=this.processSegmentGroup(Re,Ue,xe);if(null===xt)return null;X.push(...xt)}const re=ur(X);return function mi(z){z.sort((P,A)=>P.value.outlet===Xn?-1:A.value.outlet===Xn?1:P.value.outlet.localeCompare(A.value.outlet))}(re),re}processSegment(P,A,X,re){for(const xe of P){const Ue=this.processSegmentAgainstRoute(xe,A,X,re);if(null!==Ue)return Ue}return Ee(A,X,re)?[]:null}processSegmentAgainstRoute(P,A,X,re){if(P.redirectTo||!ne(P,A,X,re))return null;let xe,Ue=[],Re=[];if("**"===P.path){const yr=X.length>0?_t(X).parameters:{};xe=new Mr(X,yr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gs(P),ho(P),P.component,P,Wr(A),io(A)+X.length,Po(P))}else{const yr=js(A,P,X);if(!yr.matched)return null;Ue=yr.consumedSegments,Re=X.slice(yr.lastChild),xe=new Mr(Ue,yr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,gs(P),ho(P),P.component,P,Wr(A),io(A)+Ue.length,Po(P))}const xt=function Si(z){return z.children?z.children:z.loadChildren?z._loadedConfig.routes:[]}(P),{segmentGroup:ri,slicedSegments:Ji}=fr(A,Ue,Re,xt.filter(yr=>void 0===yr.redirectTo),this.relativeLinkResolution);if(0===Ji.length&&ri.hasChildren()){const yr=this.processChildren(xt,ri);return null===yr?null:[new Pn(xe,yr)]}if(0===xt.length&&0===Ji.length)return[new Pn(xe,[])];const vi=ho(P)===re,Zi=this.processSegment(xt,ri,Ji,vi?Xn:re);return null===Zi?null:[new Pn(xe,Zi)]}}function Ni(z){const P=z.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function ur(z){const P=[],A=new Set;for(const X of z){if(!Ni(X)){P.push(X);continue}const re=P.find(xe=>X.value.routeConfig===xe.value.routeConfig);void 0!==re?(re.children.push(...X.children),A.add(re)):P.push(X)}for(const X of A){const re=ur(X.children);P.push(new Pn(X.value,re))}return P.filter(X=>!A.has(X))}function Wr(z){let P=z;for(;P._sourceSegment;)P=P._sourceSegment;return P}function io(z){let P=z,A=P._segmentIndexShift?P._segmentIndexShift:0;for(;P._sourceSegment;)P=P._sourceSegment,A+=P._segmentIndexShift?P._segmentIndexShift:0;return A-1}function gs(z){return z.data||{}}function Po(z){return z.resolve||{}}function Co(z){return(0,Qt.w)(P=>{const A=z(P);return A?(0,Le.D)(A).pipe((0,Bt.U)(()=>P)):(0,he.of)(P)})}class ta extends class Va{shouldDetach(P){return!1}store(P,A){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,A){return P.routeConfig===A.routeConfig}}{}const ii=new D.OlP("ROUTES");class si{constructor(P,A,X,re){this.injector=P,this.compiler=A,this.onLoadStartListener=X,this.onLoadEndListener=re}load(P,A){if(A._loader$)return A._loader$;this.onLoadStartListener&&this.onLoadStartListener(A);const re=this.loadModuleFactory(A.loadChildren).pipe((0,Bt.U)(xe=>{this.onLoadEndListener&&this.onLoadEndListener(A);const Ue=xe.create(P);return new es(Et(Ue.injector.get(ii,void 0,D.XFs.Self|D.XFs.Optional)).map(Ls),Ue)}),(0,lt.K)(xe=>{throw A._loader$=void 0,xe}));return A._loader$=new Oe(re,()=>new Mt.x).pipe(Ke()),A._loader$}loadModuleFactory(P){return Hn(P()).pipe((0,Ct.z)(A=>A instanceof D.YKP?(0,he.of)(A):(0,Le.D)(this.compiler.compileModuleAsync(A))))}}class Ai{shouldProcessUrl(P){return!0}extract(P){return P}merge(P,A){return P}}function Dr(z){throw z}function ar(z,P,A){return P.parse("/")}function Hr(z,P){return(0,he.of)(null)}const Hs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Eo=(()=>{class z{constructor(A,X,re,xe,Ue,Re,xt){this.rootComponentType=A,this.urlSerializer=X,this.rootContexts=re,this.location=xe,this.config=xt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mt.x,this.errorHandler=Dr,this.malformedUriErrorHandler=ar,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hr,afterPreactivation:Hr},this.urlHandlingStrategy=new Ai,this.routeReuseStrategy=new ta,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ue.get(D.h0i),this.console=Ue.get(D.c2e);const vi=Ue.get(D.R0b);this.isNgZoneEnabled=vi instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(xt),this.currentUrlTree=function Fi(){return new Ae(new ye([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new si(Ue,Re,Zi=>this.triggerEvent(new gn(Zi)),Zi=>this.triggerEvent(new Bn(Zi))),this.routerState=An(this.currentUrlTree,this.rootComponentType),this.transitions=new Ve.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var A;return null===(A=this.location.getState())||void 0===A?void 0:A.\u0275routerPageId}setupNavigations(A){const X=this.events;return A.pipe((0,Ht.h)(re=>0!==re.id),(0,Bt.U)(re=>Object.assign(Object.assign({},re),{extractedUrl:this.urlHandlingStrategy.extract(re.rawUrl)})),(0,Qt.w)(re=>{let xe=!1,Ue=!1;return(0,he.of)(re).pipe((0,yn.b)(Re=>{this.currentNavigation={id:Re.id,initialUrl:Re.currentRawUrl,extractedUrl:Re.extractedUrl,trigger:Re.source,extras:Re.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Qt.w)(Re=>{const xt=this.browserUrlTree.toString(),ri=!this.navigated||Re.extractedUrl.toString()!==xt||xt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ri)&&this.urlHandlingStrategy.shouldProcessUrl(Re.rawUrl))return wr(Re.source)&&(this.browserUrlTree=Re.extractedUrl),(0,he.of)(Re).pipe((0,Qt.w)(vi=>{const Zi=this.transitions.getValue();return X.next(new ki(vi.id,this.serializeUrl(vi.extractedUrl),vi.source,vi.restoredState)),Zi!==this.transitions.getValue()?tt.E:Promise.resolve(vi)}),function B(z,P,A,X){return(0,Qt.w)(re=>function mr(z,P,A,X,re){return new ci(z,P,A,X,re).apply()}(z,P,A,re.extractedUrl,X).pipe((0,Bt.U)(xe=>Object.assign(Object.assign({},re),{urlAfterRedirects:xe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yn.b)(vi=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vi.urlAfterRedirects})}),function go(z,P,A,X,re){return(0,Ct.z)(xe=>function yi(z,P,A,X,re="emptyOnly",xe="legacy"){try{const Ue=new zi(z,P,A,X,re,xe).recognize();return null===Ue?ni(new Tn):(0,he.of)(Ue)}catch(Ue){return ni(Ue)}}(z,P,xe.urlAfterRedirects,A(xe.urlAfterRedirects),X,re).pipe((0,Bt.U)(Ue=>Object.assign(Object.assign({},xe),{targetSnapshot:Ue}))))}(this.rootComponentType,this.config,vi=>this.serializeUrl(vi),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yn.b)(vi=>{if("eager"===this.urlUpdateStrategy){if(!vi.extras.skipLocationChange){const yr=this.urlHandlingStrategy.merge(vi.urlAfterRedirects,vi.rawUrl);this.setBrowserUrl(yr,vi)}this.browserUrlTree=vi.urlAfterRedirects}const Zi=new In(vi.id,this.serializeUrl(vi.extractedUrl),this.serializeUrl(vi.urlAfterRedirects),vi.targetSnapshot);X.next(Zi)}));if(ri&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Zi,extractedUrl:yr,source:Yo,restoredState:So,extras:f}=Re,i=new ki(Zi,this.serializeUrl(yr),Yo,So);X.next(i);const c=An(yr,this.rootComponentType).snapshot;return(0,he.of)(Object.assign(Object.assign({},Re),{targetSnapshot:c,urlAfterRedirects:yr,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Re.rawUrl,Re.resolve(null),tt.E}),Co(Re=>{const{targetSnapshot:xt,id:ri,extractedUrl:Ji,rawUrl:vi,extras:{skipLocationChange:Zi,replaceUrl:yr}}=Re;return this.hooks.beforePreactivation(xt,{navigationId:ri,appliedUrlTree:Ji,rawUrlTree:vi,skipLocationChange:!!Zi,replaceUrl:!!yr})}),(0,yn.b)(Re=>{const xt=new Qn(Re.id,this.serializeUrl(Re.extractedUrl),this.serializeUrl(Re.urlAfterRedirects),Re.targetSnapshot);this.triggerEvent(xt)}),(0,Bt.U)(Re=>Object.assign(Object.assign({},Re),{guards:fi(Re.targetSnapshot,Re.currentSnapshot,this.rootContexts)})),function S(z,P){return(0,Ct.z)(A=>{const{targetSnapshot:X,currentSnapshot:re,guards:{canActivateChecks:xe,canDeactivateChecks:Ue}}=A;return 0===Ue.length&&0===xe.length?(0,he.of)(Object.assign(Object.assign({},A),{guardsResult:!0})):function j(z,P,A,X){return(0,Le.D)(z).pipe((0,Ct.z)(re=>function rn(z,P,A,X,re){const xe=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!xe||0===xe.length)return(0,he.of)(!0);const Ue=xe.map(Re=>{const xt=jr(Re,P,re);let ri;if(function qo(z){return z&&mo(z.canDeactivate)}(xt))ri=Hn(xt.canDeactivate(z,P,A,X));else{if(!mo(xt))throw new Error("Invalid CanDeactivate guard");ri=Hn(xt(z,P,A,X))}return ri.pipe((0,Kt.P)())});return(0,he.of)(Ue).pipe(xo())}(re.component,re.route,A,P,X)),(0,Kt.P)(re=>!0!==re,!0))}(Ue,X,re,z).pipe((0,Ct.z)(Re=>Re&&function Da(z){return"boolean"==typeof z}(Re)?function de(z,P,A,X){return(0,Le.D)(P).pipe((0,At.b)(re=>(0,gt.z)(function Ge(z,P){return null!==z&&P&&P(new Jn(z)),(0,he.of)(!0)}(re.route.parent,X),function Se(z,P){return null!==z&&P&&P(new Xi(z)),(0,he.of)(!0)}(re.route,X),function Pt(z,P,A){const X=P[P.length-1],xe=P.slice(0,P.length-1).reverse().map(Ue=>function gr(z){const P=z.routeConfig?z.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:z,guards:P}:null}(Ue)).filter(Ue=>null!==Ue).map(Ue=>(0,Ye.P)(()=>{const Re=Ue.guards.map(xt=>{const ri=jr(xt,Ue.node,A);let Ji;if(function hs(z){return z&&mo(z.canActivateChild)}(ri))Ji=Hn(ri.canActivateChild(X,z));else{if(!mo(ri))throw new Error("Invalid CanActivateChild guard");Ji=Hn(ri(X,z))}return Ji.pipe((0,Kt.P)())});return(0,he.of)(Re).pipe(xo())}));return(0,he.of)(xe).pipe(xo())}(z,re.path,A),function ot(z,P,A){const X=P.routeConfig?P.routeConfig.canActivate:null;if(!X||0===X.length)return(0,he.of)(!0);const re=X.map(xe=>(0,Ye.P)(()=>{const Ue=jr(xe,P,A);let Re;if(function Io(z){return z&&mo(z.canActivate)}(Ue))Re=Hn(Ue.canActivate(P,z));else{if(!mo(Ue))throw new Error("Invalid CanActivate guard");Re=Hn(Ue(P,z))}return Re.pipe((0,Kt.P)())}));return(0,he.of)(re).pipe(xo())}(z,re.route,A))),(0,Kt.P)(re=>!0!==re,!0))}(X,xe,z,P):(0,he.of)(Re)),(0,Bt.U)(Re=>Object.assign(Object.assign({},A),{guardsResult:Re})))})}(this.ngModule.injector,Re=>this.triggerEvent(Re)),(0,yn.b)(Re=>{if(co(Re.guardsResult)){const ri=U(`Redirecting to "${this.serializeUrl(Re.guardsResult)}"`);throw ri.url=Re.guardsResult,ri}const xt=new ft(Re.id,this.serializeUrl(Re.extractedUrl),this.serializeUrl(Re.urlAfterRedirects),Re.targetSnapshot,!!Re.guardsResult);this.triggerEvent(xt)}),(0,Ht.h)(Re=>!!Re.guardsResult||(this.restoreHistory(Re),this.cancelNavigationTransition(Re,""),!1)),Co(Re=>{if(Re.guards.canActivateChecks.length)return(0,he.of)(Re).pipe((0,yn.b)(xt=>{const ri=new kt(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(ri)}),(0,Qt.w)(xt=>{let ri=!1;return(0,he.of)(xt).pipe(function rs(z,P){return(0,Ct.z)(A=>{const{targetSnapshot:X,guards:{canActivateChecks:re}}=A;if(!re.length)return(0,he.of)(A);let xe=0;return(0,Le.D)(re).pipe((0,At.b)(Ue=>function Wo(z,P,A,X){return function zo(z,P,A,X){const re=Object.keys(z);if(0===re.length)return(0,he.of)({});const xe={};return(0,Le.D)(re).pipe((0,Ct.z)(Ue=>function _o(z,P,A,X){const re=jr(z,P,X);return Hn(re.resolve?re.resolve(P,A):re(P,A))}(z[Ue],P,A,X).pipe((0,yn.b)(Re=>{xe[Ue]=Re}))),an(1),(0,Ct.z)(()=>Object.keys(xe).length===re.length?(0,he.of)(xe):tt.E))}(z._resolve,z,P,X).pipe((0,Bt.U)(xe=>(z._resolvedData=xe,z.data=Object.assign(Object.assign({},z.data),Qo(z,A).resolve),null)))}(Ue.route,X,z,P)),(0,yn.b)(()=>xe++),an(1),(0,Ct.z)(Ue=>xe===re.length?(0,he.of)(A):tt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yn.b)({next:()=>ri=!0,complete:()=>{ri||(this.restoreHistory(xt),this.cancelNavigationTransition(xt,"At least one route resolver didn't emit any value."))}}))}),(0,yn.b)(xt=>{const ri=new ln(xt.id,this.serializeUrl(xt.extractedUrl),this.serializeUrl(xt.urlAfterRedirects),xt.targetSnapshot);this.triggerEvent(ri)}))}),Co(Re=>{const{targetSnapshot:xt,id:ri,extractedUrl:Ji,rawUrl:vi,extras:{skipLocationChange:Zi,replaceUrl:yr}}=Re;return this.hooks.afterPreactivation(xt,{navigationId:ri,appliedUrlTree:Ji,rawUrlTree:vi,skipLocationChange:!!Zi,replaceUrl:!!yr})}),(0,Bt.U)(Re=>{const xt=function Zo(z,P,A){const X=Rr(z,P._root,A?A._root:void 0);return new rr(X,P)}(this.routeReuseStrategy,Re.targetSnapshot,Re.currentRouterState);return Object.assign(Object.assign({},Re),{targetRouterState:xt})}),(0,yn.b)(Re=>{this.currentUrlTree=Re.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Re.urlAfterRedirects,Re.rawUrl),this.routerState=Re.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Re.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Re),this.browserUrlTree=Re.urlAfterRedirects)}),((z,P,A)=>(0,Bt.U)(X=>(new tr(P,X.targetRouterState,X.currentRouterState,A).activate(z),X)))(this.rootContexts,this.routeReuseStrategy,Re=>this.triggerEvent(Re)),(0,yn.b)({next(){xe=!0},complete(){xe=!0}}),(0,di.x)(()=>{var Re;xe||Ue||this.cancelNavigationTransition(re,`Navigation ID ${re.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Re=this.currentNavigation)||void 0===Re?void 0:Re.id)===re.id&&(this.currentNavigation=null)}),(0,lt.K)(Re=>{if(Ue=!0,function R(z){return z&&z[$]}(Re)){const xt=co(Re.url);xt||(this.navigated=!0,this.restoreHistory(re,!0));const ri=new sr(re.id,this.serializeUrl(re.extractedUrl),Re.message);X.next(ri),xt?setTimeout(()=>{const Ji=this.urlHandlingStrategy.merge(Re.url,this.rawUrlTree),vi={skipLocationChange:re.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wr(re.source)};this.scheduleNavigation(Ji,"imperative",null,vi,{resolve:re.resolve,reject:re.reject,promise:re.promise})},0):re.resolve(!1)}else{this.restoreHistory(re,!0);const xt=new xi(re.id,this.serializeUrl(re.extractedUrl),Re);X.next(xt);try{re.resolve(this.errorHandler(Re))}catch(ri){re.reject(ri)}}return tt.E}))}))}resetRootComponentType(A){this.rootComponentType=A,this.routerState.root.component=this.rootComponentType}setTransition(A){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),A))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(A=>{const X="popstate"===A.type?"popstate":"hashchange";"popstate"===X&&setTimeout(()=>{var re;const xe={replaceUrl:!0},Ue=(null===(re=A.state)||void 0===re?void 0:re.navigationId)?A.state:null;if(Ue){const xt=Object.assign({},Ue);delete xt.navigationId,delete xt.\u0275routerPageId,0!==Object.keys(xt).length&&(xe.state=xt)}const Re=this.parseUrl(A.url);this.scheduleNavigation(Re,X,Ue,xe)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(A){this.events.next(A)}resetConfig(A){Fs(A),this.config=A.map(Ls),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(A,X={}){const{relativeTo:re,queryParams:xe,fragment:Ue,queryParamsHandling:Re,preserveFragment:xt}=X,ri=re||this.routerState.root,Ji=xt?this.currentUrlTree.fragment:Ue;let vi=null;switch(Re){case"merge":vi=Object.assign(Object.assign({},this.currentUrlTree.queryParams),xe);break;case"preserve":vi=this.currentUrlTree.queryParams;break;default:vi=xe||null}return null!==vi&&(vi=this.removeEmptyProps(vi)),function zs(z,P,A,X,re){if(0===A.length)return us(P.root,P.root,P,X,re);const xe=function Ur(z){if("string"==typeof z[0]&&1===z.length&&"/"===z[0])return new bo(!0,0,z);let P=0,A=!1;const X=z.reduce((re,xe,Ue)=>{if("object"==typeof xe&&null!=xe){if(xe.outlets){const Re={};return _n(xe.outlets,(xt,ri)=>{Re[ri]="string"==typeof xt?xt.split("/"):xt}),[...re,{outlets:Re}]}if(xe.segmentPath)return[...re,xe.segmentPath]}return"string"!=typeof xe?[...re,xe]:0===Ue?(xe.split("/").forEach((Re,xt)=>{0==xt&&"."===Re||(0==xt&&""===Re?A=!0:".."===Re?P++:""!=Re&&re.push(Re))}),re):[...re,xe]},[]);return new bo(A,P,X)}(A);if(xe.toRoot())return us(P.root,new ye([],{}),P,X,re);const Ue=function No(z,P,A){if(z.isAbsolute)return new qr(P.root,!0,0);if(-1===A.snapshot._lastPathIndex){const xe=A.snapshot._urlSegment;return new qr(xe,xe===P.root,0)}const X=to(z.commands[0])?0:1;return function Ss(z,P,A){let X=z,re=P,xe=A;for(;xe>re;){if(xe-=re,X=X.parent,!X)throw new Error("Invalid number of '../'");re=X.segments.length}return new qr(X,!1,re-xe)}(A.snapshot._urlSegment,A.snapshot._lastPathIndex+X,z.numberOfDoubleDots)}(xe,P,z),Re=Ue.processChildren?Vs(Ue.segmentGroup,Ue.index,xe.commands):Xo(Ue.segmentGroup,Ue.index,xe.commands);return us(Ue.segmentGroup,Re,P,X,re)}(ri,this.currentUrlTree,A,vi,null!=Ji?Ji:null)}navigateByUrl(A,X={skipLocationChange:!1}){const re=co(A)?A:this.parseUrl(A),xe=this.urlHandlingStrategy.merge(re,this.rawUrlTree);return this.scheduleNavigation(xe,"imperative",null,X)}navigate(A,X={skipLocationChange:!1}){return function na(z){for(let P=0;P<z.length;P++){const A=z[P];if(null==A)throw new Error(`The requested path contains ${A} segment at index ${P}`)}}(A),this.navigateByUrl(this.createUrlTree(A,X),X)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){let X;try{X=this.urlSerializer.parse(A)}catch(re){X=this.malformedUriErrorHandler(re,this.urlSerializer,A)}return X}isActive(A,X){let re;if(re=!0===X?Object.assign({},Hs):!1===X?Object.assign({},Sr):X,co(A))return Zt(this.currentUrlTree,A,re);const xe=this.parseUrl(A);return Zt(this.currentUrlTree,xe,re)}removeEmptyProps(A){return Object.keys(A).reduce((X,re)=>{const xe=A[re];return null!=xe&&(X[re]=xe),X},{})}processNavigations(){this.navigations.subscribe(A=>{this.navigated=!0,this.lastSuccessfulId=A.id,this.currentPageId=A.targetPageId,this.events.next(new hi(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,A.resolve(!0)},A=>{this.console.warn(`Unhandled Navigation Error: ${A}`)})}scheduleNavigation(A,X,re,xe,Ue){var Re,xt,ri;if(this.disposed)return Promise.resolve(!1);const Ji=this.transitions.value,vi=wr(X)&&Ji&&!wr(Ji.source),Zi=Ji.rawUrl.toString()===A.toString(),yr=Ji.id===(null===(Re=this.currentNavigation)||void 0===Re?void 0:Re.id);if(vi&&Zi&&yr)return Promise.resolve(!0);let So,f,i;Ue?(So=Ue.resolve,f=Ue.reject,i=Ue.promise):i=new Promise((v,E)=>{So=v,f=E});const c=++this.navigationId;let m;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(re=this.location.getState()),m=re&&re.\u0275routerPageId?re.\u0275routerPageId:xe.replaceUrl||xe.skipLocationChange?null!==(xt=this.browserPageId)&&void 0!==xt?xt:0:(null!==(ri=this.browserPageId)&&void 0!==ri?ri:0)+1):m=0,this.setTransition({id:c,targetPageId:m,source:X,restoredState:re,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:A,extras:xe,resolve:So,reject:f,promise:i,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),i.catch(v=>Promise.reject(v))}setBrowserUrl(A,X){const re=this.urlSerializer.serialize(A),xe=Object.assign(Object.assign({},X.extras.state),this.generateNgRouterState(X.id,X.targetPageId));this.location.isCurrentPathEqualTo(re)||X.extras.replaceUrl?this.location.replaceState(re,"",xe):this.location.go(re,"",xe)}restoreHistory(A,X=!1){var re,xe;if("computed"===this.canceledNavigationResolution){const Ue=this.currentPageId-A.targetPageId;"popstate"!==A.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(re=this.currentNavigation)||void 0===re?void 0:re.finalUrl)||0===Ue?this.currentUrlTree===(null===(xe=this.currentNavigation)||void 0===xe?void 0:xe.finalUrl)&&0===Ue&&(this.resetState(A),this.browserUrlTree=A.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ue)}else"replace"===this.canceledNavigationResolution&&(X&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=A.currentRouterState,this.currentUrlTree=A.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(A,X){const re=new sr(A.id,this.serializeUrl(A.extractedUrl),X);this.triggerEvent(re),A.resolve(!1)}generateNgRouterState(A,X){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:X}:{navigationId:A}}}return z.\u0275fac=function(A){D.$Z()},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();function wr(z){return"imperative"!==z}let Yr=(()=>{class z{constructor(A,X,re,xe,Ue){this.router=A,this.route=X,this.tabIndexAttribute=re,this.renderer=xe,this.el=Ue,this.commands=null,this.onChanges=new Mt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){if(null!=this.tabIndexAttribute)return;const X=this.renderer,re=this.el.nativeElement;null!==A?X.setAttribute(re,"tabindex",A):X.removeAttribute(re,"tabindex")}ngOnChanges(A){this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const A={skipLocationChange:Do(this.skipLocationChange),replaceUrl:Do(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,A),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Do(this.preserveFragment)})}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Eo),D.Y36(pr),D.$8M("tabindex"),D.Y36(D.Qsj),D.Y36(D.SBq))},z.\u0275dir=D.lG2({type:z,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(A,X){1&A&&D.NdJ("click",function(){return X.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[D.TTD]}),z})(),Fn=(()=>{class z{constructor(A,X,re){this.router=A,this.route=X,this.locationStrategy=re,this.commands=null,this.href=null,this.onChanges=new Mt.x,this.subscription=A.events.subscribe(xe=>{xe instanceof hi&&this.updateTargetUrlAndHref()})}set routerLink(A){this.commands=null!=A?Array.isArray(A)?A:[A]:null}ngOnChanges(A){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(A,X,re,xe,Ue){if(0!==A||X||re||xe||Ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Re={skipLocationChange:Do(this.skipLocationChange),replaceUrl:Do(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Re),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Do(this.preserveFragment)})}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Eo),D.Y36(pr),D.Y36(kn.S$))},z.\u0275dir=D.lG2({type:z,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(A,X){1&A&&D.NdJ("click",function(xe){return X.onClick(xe.button,xe.ctrlKey,xe.shiftKey,xe.altKey,xe.metaKey)}),2&A&&D.uIk("target",X.target)("href",X.href,D.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[D.TTD]}),z})();function Do(z){return""===z||!!z}let ys=(()=>{class z{constructor(A,X,re,xe,Ue,Re){this.router=A,this.element=X,this.renderer=re,this.cdr=xe,this.link=Ue,this.linkWithHref=Re,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new D.vpe,this.routerEventsSubscription=A.events.subscribe(xt=>{xt instanceof hi&&this.update()})}ngAfterContentInit(){(0,he.of)(this.links.changes,this.linksWithHrefs.changes,(0,he.of)(null)).pipe((0,Ui.J)()).subscribe(A=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var A;null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe();const X=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(re=>!!re).map(re=>re.onChanges);this.linkInputChangesSubscription=(0,Le.D)(X).pipe((0,Ui.J)()).subscribe(re=>{this.isActive!==this.isLinkActive(this.router)(re)&&this.update()})}set routerLinkActive(A){const X=Array.isArray(A)?A:A.split(" ");this.classes=X.filter(re=>!!re)}ngOnChanges(A){this.update()}ngOnDestroy(){var A;this.routerEventsSubscription.unsubscribe(),null===(A=this.linkInputChangesSubscription)||void 0===A||A.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const A=this.hasActiveLinks();this.isActive!==A&&(this.isActive=A,this.cdr.markForCheck(),this.classes.forEach(X=>{A?this.renderer.addClass(this.element.nativeElement,X):this.renderer.removeClass(this.element.nativeElement,X)}),this.isActiveChange.emit(A))})}isLinkActive(A){const X=function Ua(z){return!!z.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return re=>!!re.urlTree&&A.isActive(re.urlTree,X)}hasActiveLinks(){const A=this.isLinkActive(this.router);return this.link&&A(this.link)||this.linkWithHref&&A(this.linkWithHref)||this.links.some(A)||this.linksWithHrefs.some(A)}}return z.\u0275fac=function(A){return new(A||z)(D.Y36(Eo),D.Y36(D.SBq),D.Y36(D.Qsj),D.Y36(D.sBO),D.Y36(Yr,8),D.Y36(Fn,8))},z.\u0275dir=D.lG2({type:z,selectors:[["","routerLinkActive",""]],contentQueries:function(A,X,re){if(1&A&&(D.Suo(re,Yr,5),D.Suo(re,Fn,5)),2&A){let xe;D.iGM(xe=D.CRH())&&(X.links=xe),D.iGM(xe=D.CRH())&&(X.linksWithHrefs=xe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[D.TTD]}),z})();class nl{}class pa{preload(P,A){return(0,he.of)(null)}}let tc=(()=>{class z{constructor(A,X,re,xe){this.router=A,this.injector=re,this.preloadingStrategy=xe,this.loader=new si(re,X,xt=>A.triggerEvent(new gn(xt)),xt=>A.triggerEvent(new Bn(xt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ht.h)(A=>A instanceof hi),(0,At.b)(()=>this.preload())).subscribe(()=>{})}preload(){const A=this.injector.get(D.h0i);return this.processRoutes(A,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,X){const re=[];for(const xe of X)if(xe.loadChildren&&!xe.canLoad&&xe._loadedConfig){const Ue=xe._loadedConfig;re.push(this.processRoutes(Ue.module,Ue.routes))}else xe.loadChildren&&!xe.canLoad?re.push(this.preloadConfig(A,xe)):xe.children&&re.push(this.processRoutes(A,xe.children));return(0,Le.D)(re).pipe((0,Ui.J)(),(0,Bt.U)(xe=>{}))}preloadConfig(A,X){return this.preloadingStrategy.preload(X,()=>(X._loadedConfig?(0,he.of)(X._loadedConfig):this.loader.load(A.injector,X)).pipe((0,Ct.z)(xe=>(X._loadedConfig=xe,this.processRoutes(xe.module,xe.routes)))))}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(Eo),D.LFG(D.Sil),D.LFG(D.zs3),D.LFG(nl))},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})(),Sa=(()=>{class z{constructor(A,X,re={}){this.router=A,this.viewportScroller=X,this.options=re,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},re.scrollPositionRestoration=re.scrollPositionRestoration||"disabled",re.anchorScrolling=re.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(A=>{A instanceof ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof hi&&(this.lastId=A.id,this.scheduleScrollEvent(A,this.router.parseUrl(A.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(A=>{A instanceof qn&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,X){this.router.triggerEvent(new qn(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,X))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return z.\u0275fac=function(A){D.$Z()},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();const os=new D.OlP("ROUTER_CONFIGURATION"),Bl=new D.OlP("ROUTER_FORROOT_GUARD"),Dc=[kn.Ye,{provide:Gi,useClass:er},{provide:Eo,useFactory:function Ns(z,P,A,X,re,xe,Ue={},Re,xt){const ri=new Eo(null,z,P,A,X,re,Et(xe));return Re&&(ri.urlHandlingStrategy=Re),xt&&(ri.routeReuseStrategy=xt),function zl(z,P){z.errorHandler&&(P.errorHandler=z.errorHandler),z.malformedUriErrorHandler&&(P.malformedUriErrorHandler=z.malformedUriErrorHandler),z.onSameUrlNavigation&&(P.onSameUrlNavigation=z.onSameUrlNavigation),z.paramsInheritanceStrategy&&(P.paramsInheritanceStrategy=z.paramsInheritanceStrategy),z.relativeLinkResolution&&(P.relativeLinkResolution=z.relativeLinkResolution),z.urlUpdateStrategy&&(P.urlUpdateStrategy=z.urlUpdateStrategy),z.canceledNavigationResolution&&(P.canceledNavigationResolution=z.canceledNavigationResolution)}(Ue,ri),Ue.enableTracing&&ri.events.subscribe(Ji=>{var vi,Zi;null===(vi=console.group)||void 0===vi||vi.call(console,`Router Event: ${Ji.constructor.name}`),console.log(Ji.toString()),console.log(Ji),null===(Zi=console.groupEnd)||void 0===Zi||Zi.call(console)}),ri},deps:[Gi,Bo,kn.Ye,D.zs3,D.Sil,ii,os,[class Ri{},new D.FiY],[class _s{},new D.FiY]]},Bo,{provide:pr,useFactory:function ma(z){return z.routerState.root},deps:[Eo]},tc,pa,class Ln{preload(P,A){return A().pipe((0,lt.K)(()=>(0,he.of)(null)))}},{provide:os,useValue:{enableTracing:!1}}];function lu(){return new D.PXZ("Router",Eo)}let nc=(()=>{class z{constructor(A,X){}static forRoot(A,X){return{ngModule:z,providers:[Dc,Mo(A),{provide:Bl,useFactory:fa,deps:[[Eo,new D.FiY,new D.tp0]]},{provide:os,useValue:X||{}},{provide:kn.S$,useFactory:wl,deps:[kn.lw,[new D.tBr(kn.mr),new D.FiY],os]},{provide:Sa,useFactory:ja,deps:[Eo,kn.EM,os]},{provide:nl,useExisting:X&&X.preloadingStrategy?X.preloadingStrategy:pa},{provide:D.PXZ,multi:!0,useFactory:lu},[Ha,{provide:D.ip1,multi:!0,useFactory:ga,deps:[Ha]},{provide:Vo,useFactory:Cl,deps:[Ha]},{provide:D.tb,multi:!0,useExisting:Vo}]]}}static forChild(A){return{ngModule:z,providers:[Mo(A)]}}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(Bl,8),D.LFG(Eo,8))},z.\u0275mod=D.oAB({type:z}),z.\u0275inj=D.cJS({}),z})();function ja(z,P,A){return A.scrollOffset&&P.setOffset(A.scrollOffset),new Sa(z,P,A)}function wl(z,P,A={}){return A.useHash?new kn.Do(z,P):new kn.b0(z,P)}function fa(z){return"guarded"}function Mo(z){return[{provide:D.deG,multi:!0,useValue:z},{provide:ii,multi:!0,useValue:z}]}let Ha=(()=>{class z{constructor(A){this.injector=A,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mt.x}appInitializer(){return this.injector.get(kn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let X=null;const re=new Promise(Re=>X=Re),xe=this.injector.get(Eo),Ue=this.injector.get(os);return"disabled"===Ue.initialNavigation?(xe.setUpLocationChangeListener(),X(!0)):"enabled"===Ue.initialNavigation||"enabledBlocking"===Ue.initialNavigation?(xe.hooks.afterPreactivation=()=>this.initNavigation?(0,he.of)(null):(this.initNavigation=!0,X(!0),this.resultOfPreactivationDone),xe.initialNavigation()):X(!0),re})}bootstrapListener(A){const X=this.injector.get(os),re=this.injector.get(tc),xe=this.injector.get(Sa),Ue=this.injector.get(Eo),Re=this.injector.get(D.z2F);A===Re.components[0]&&(("enabledNonBlocking"===X.initialNavigation||void 0===X.initialNavigation)&&Ue.initialNavigation(),re.setUpPreloading(),xe.init(),Ue.resetRootComponentType(Re.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return z.\u0275fac=function(A){return new(A||z)(D.LFG(D.zs3))},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac}),z})();function ga(z){return z.appInitializer.bind(z)}function Cl(z){return z.bootstrapListener.bind(z)}const Vo=new D.OlP("Router Initializer")}},On=>{On(On.s=9819)}]);